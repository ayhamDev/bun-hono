import{createRequire as zl}from"node:module";var Cl=Object.create;var{getPrototypeOf:Wl,defineProperty:fz,getOwnPropertyNames:Hl}=Object;var ql=Object.prototype.hasOwnProperty;var gz=(F,A,B)=>{B=F!=null?Cl(Wl(F)):{};let D=A||!F||!F.__esModule?fz(B,"default",{value:F,enumerable:!0}):B;for(let X of Hl(F))if(!ql.call(D,X))fz(D,X,{get:()=>F[X],enumerable:!0});return D};var z=(F,A)=>()=>(A||F((A={exports:{}}).exports,A),A.exports);var m=zl(import.meta.url);var HQ=z((pL1,ol)=>{ol.exports={name:"dotenv",version:"17.2.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run tests/**/*.js --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run tests/**/*.js --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var VQ=z((iL1,V3)=>{var fZ=m("fs"),uA=m("path"),el=m("os"),Fp=m("crypto"),Ap=HQ(),gZ=Ap.version,qQ=["\uD83D\uDD10 encrypt with Dotenvx: https://dotenvx.com","\uD83D\uDD10 prevent committing .env to code: https://dotenvx.com/precommit","\uD83D\uDD10 prevent building .env in docker: https://dotenvx.com/prebuild","\uD83D\uDCE1 add observability to secrets: https://dotenvx.com/ops","\uD83D\uDC65 sync secrets across teammates & machines: https://dotenvx.com/ops","\uD83D\uDDC2️ backup and recover secrets: https://dotenvx.com/ops","✅ audit secrets and track compliance: https://dotenvx.com/ops","\uD83D\uDD04 add secrets lifecycle management: https://dotenvx.com/ops","\uD83D\uDD11 add access controls to secrets: https://dotenvx.com/ops","\uD83D\uDEE0️  run anywhere with `dotenvx run -- yourcommand`","⚙️  specify custom .env file path with { path: '/custom/path/.env' }","⚙️  enable debug logging with { debug: true }","⚙️  override existing env vars with { override: true }","⚙️  suppress all logs with { quiet: true }","⚙️  write to custom object with { processEnv: myObject }","⚙️  load multiple .env files with { path: ['.env.local', '.env'] }"];function Bp(){return qQ[Math.floor(Math.random()*qQ.length)]}function r9(F){if(typeof F==="string")return!["false","0","no","off",""].includes(F.toLowerCase());return Boolean(F)}function Dp(){return process.stdout.isTTY}function Xp(F){return Dp()?`\x1B[2m${F}\x1B[0m`:F}var Zp=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Jp(F){let A={},B=F.toString();B=B.replace(/\r\n?/mg,`
`);let D;while((D=Zp.exec(B))!=null){let X=D[1],Z=D[2]||"";Z=Z.trim();let J=Z[0];if(Z=Z.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),J==='"')Z=Z.replace(/\\n/g,`
`),Z=Z.replace(/\\r/g,"\r");A[X]=Z}return A}function Yp(F){F=F||{};let A=UQ(F);F.path=A;let B=_0.configDotenv(F);if(!B.parsed){let J=new Error(`MISSING_DATA: Cannot parse ${A} for an unknown reason`);throw J.code="MISSING_DATA",J}let D=KQ(F).split(","),X=D.length,Z;for(let J=0;J<X;J++)try{let Y=D[J].trim(),$=Gp(B,Y);Z=_0.decrypt($.ciphertext,$.key);break}catch(Y){if(J+1>=X)throw Y}return _0.parse(Z)}function $p(F){console.error(`[dotenv@${gZ}][WARN] ${F}`)}function l8(F){console.log(`[dotenv@${gZ}][DEBUG] ${F}`)}function QQ(F){console.log(`[dotenv@${gZ}] ${F}`)}function KQ(F){if(F&&F.DOTENV_KEY&&F.DOTENV_KEY.length>0)return F.DOTENV_KEY;if(process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0)return process.env.DOTENV_KEY;return""}function Gp(F,A){let B;try{B=new URL(A)}catch(Y){if(Y.code==="ERR_INVALID_URL"){let $=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw $.code="INVALID_DOTENV_KEY",$}throw Y}let D=B.password;if(!D){let Y=new Error("INVALID_DOTENV_KEY: Missing key part");throw Y.code="INVALID_DOTENV_KEY",Y}let X=B.searchParams.get("environment");if(!X){let Y=new Error("INVALID_DOTENV_KEY: Missing environment part");throw Y.code="INVALID_DOTENV_KEY",Y}let Z=`DOTENV_VAULT_${X.toUpperCase()}`,J=F.parsed[Z];if(!J){let Y=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${Z} in your .env.vault file.`);throw Y.code="NOT_FOUND_DOTENV_ENVIRONMENT",Y}return{ciphertext:J,key:D}}function UQ(F){let A=null;if(F&&F.path&&F.path.length>0)if(Array.isArray(F.path)){for(let B of F.path)if(fZ.existsSync(B))A=B.endsWith(".vault")?B:`${B}.vault`}else A=F.path.endsWith(".vault")?F.path:`${F.path}.vault`;else A=uA.resolve(process.cwd(),".env.vault");if(fZ.existsSync(A))return A;return null}function zQ(F){return F[0]==="~"?uA.join(el.homedir(),F.slice(1)):F}function Ep(F){let A=r9(process.env.DOTENV_CONFIG_DEBUG||F&&F.debug),B=r9(process.env.DOTENV_CONFIG_QUIET||F&&F.quiet);if(A||!B)QQ("Loading env from encrypted .env.vault");let D=_0._parseVault(F),X=process.env;if(F&&F.processEnv!=null)X=F.processEnv;return _0.populate(X,D,F),{parsed:D}}function Cp(F){let A=uA.resolve(process.cwd(),".env"),B="utf8",D=process.env;if(F&&F.processEnv!=null)D=F.processEnv;let X=r9(D.DOTENV_CONFIG_DEBUG||F&&F.debug),Z=r9(D.DOTENV_CONFIG_QUIET||F&&F.quiet);if(F&&F.encoding)B=F.encoding;else if(X)l8("No encoding is specified. UTF-8 is used by default");let J=[A];if(F&&F.path)if(!Array.isArray(F.path))J=[zQ(F.path)];else{J=[];for(let E of F.path)J.push(zQ(E))}let Y,$={};for(let E of J)try{let C=_0.parse(fZ.readFileSync(E,{encoding:B}));_0.populate($,C,F)}catch(C){if(X)l8(`Failed to load ${E} ${C.message}`);Y=C}let G=_0.populate(D,$,F);if(X=r9(D.DOTENV_CONFIG_DEBUG||X),Z=r9(D.DOTENV_CONFIG_QUIET||Z),X||!Z){let E=Object.keys(G).length,C=[];for(let W of J)try{let H=uA.relative(process.cwd(),W);C.push(H)}catch(H){if(X)l8(`Failed to load ${W} ${H.message}`);Y=H}QQ(`injecting env (${E}) from ${C.join(",")} ${Xp(`-- tip: ${Bp()}`)}`)}if(Y)return{parsed:$,error:Y};else return{parsed:$}}function Wp(F){if(KQ(F).length===0)return _0.configDotenv(F);let A=UQ(F);if(!A)return $p(`You set DOTENV_KEY but you are missing a .env.vault file at ${A}. Did you forget to build it?`),_0.configDotenv(F);return _0._configVault(F)}function Hp(F,A){let B=Buffer.from(A.slice(-64),"hex"),D=Buffer.from(F,"base64"),X=D.subarray(0,12),Z=D.subarray(-16);D=D.subarray(12,-16);try{let J=Fp.createDecipheriv("aes-256-gcm",B,X);return J.setAuthTag(Z),`${J.update(D)}${J.final()}`}catch(J){let Y=J instanceof RangeError,$=J.message==="Invalid key length",G=J.message==="Unsupported state or unable to authenticate data";if(Y||$){let E=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw E.code="INVALID_DOTENV_KEY",E}else if(G){let E=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw E.code="DECRYPTION_FAILED",E}else throw J}}function qp(F,A,B={}){let D=Boolean(B&&B.debug),X=Boolean(B&&B.override),Z={};if(typeof A!=="object"){let J=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw J.code="OBJECT_REQUIRED",J}for(let J of Object.keys(A))if(Object.prototype.hasOwnProperty.call(F,J)){if(X===!0)F[J]=A[J],Z[J]=A[J];if(D)if(X===!0)l8(`"${J}" is already defined and WAS overwritten`);else l8(`"${J}" is already defined and was NOT overwritten`)}else F[J]=A[J],Z[J]=A[J];return Z}var _0={configDotenv:Cp,_configVault:Ep,_parseVault:Yp,config:Wp,decrypt:Hp,parse:Jp,populate:qp};iL1.configDotenv=_0.configDotenv;iL1._configVault=_0._configVault;iL1._parseVault=_0._parseVault;iL1.config=_0.config;iL1.decrypt=_0.decrypt;iL1.parse=_0.parse;iL1.populate=_0.populate;V3.exports=_0});var KJ=z((Ci)=>{var Rp=(()=>{let F=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return(A)=>F.call(A)})();function e9(F){return Rp(F)==="Uint8Array"}function $J(F){return typeof F==="object"&&F!=null&&Symbol.toStringTag in F&&(F[Symbol.toStringTag]==="ArrayBuffer"||F[Symbol.toStringTag]==="SharedArrayBuffer")}function F7(F){return F instanceof RegExp||Object.prototype.toString.call(F)==="[object RegExp]"}function GJ(F){return typeof F==="object"&&F!=null&&Symbol.toStringTag in F&&F[Symbol.toStringTag]==="Map"}function A7(F){return F instanceof Date||Object.prototype.toString.call(F)==="[object Date]"}function o2(F,A){return JSON.stringify(F,(B,D)=>{if(typeof D==="bigint")return{$numberLong:`${D}`};else if(GJ(D))return Object.fromEntries(D);return D})}function Ip(F){if(F!=null&&typeof F==="object"&&"stylize"in F&&typeof F.stylize==="function")return F.stylize}var n4=7,X7=Symbol.for("@@mdb.bson.version"),r8=2147483647,t8=-2147483648,gQ=Math.pow(2,63)-1,bQ=-Math.pow(2,63),yQ=Math.pow(2,53),hQ=-Math.pow(2,53),EJ=1,vQ=2,CJ=3,mQ=4,WJ=5,Pp=6,dQ=7,cQ=8,lQ=9,HJ=10,xA=11,Np=12,qJ=13,pQ=14,iQ=15,n8=16,nQ=17,zJ=18,aQ=19,sQ=255,rQ=127,Mp=0,QJ=4,tQ=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class f extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(F,A){super(F,A)}static isBSONError(F){return F!=null&&typeof F==="object"&&"bsonError"in F&&F.bsonError===!0&&"name"in F&&"message"in F&&"stack"in F}}class B4 extends f{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${n4}.x.x`)}}class a8 extends f{get name(){return"BSONRuntimeError"}constructor(F){super(F)}}class S6 extends f{get name(){return"BSONOffsetError"}offset;constructor(F,A,B){super(`${F}. offset: ${A}`,B);this.offset=A}}var LQ,wQ;function oQ(F,A,B,D){if(D){LQ??=new TextDecoder("utf8",{fatal:!0});try{return LQ.decode(F.subarray(A,B))}catch(X){throw new f("Invalid UTF-8 string in BSON document",{cause:X})}}return wQ??=new TextDecoder("utf8",{fatal:!1}),wQ.decode(F.subarray(A,B))}function eQ(F,A,B){if(F.length===0)return"";let D=B-A;if(D===0)return"";if(D>20)return null;if(D===1&&F[A]<128)return String.fromCharCode(F[A]);if(D===2&&F[A]<128&&F[A+1]<128)return String.fromCharCode(F[A])+String.fromCharCode(F[A+1]);if(D===3&&F[A]<128&&F[A+1]<128&&F[A+2]<128)return String.fromCharCode(F[A])+String.fromCharCode(F[A+1])+String.fromCharCode(F[A+2]);let X=[];for(let Z=A;Z<B;Z++){let J=F[Z];if(J>127)return null;X.push(J)}return String.fromCharCode(...X)}function jp(F,A,B){if(A.length===0)return 0;if(A.length>25)return null;if(F.length-B<A.length)return null;for(let D=0,X=B;D<A.length;D++,X++){let Z=A.charCodeAt(D);if(Z>127)return null;F[X]=Z}return A.length}function Tp(F){return F3.fromNumberArray(Array.from({length:F},()=>Math.floor(Math.random()*256)))}function kp(F){return crypto.getRandomValues(F3.allocate(F))}var up=(()=>{let{crypto:F}=globalThis;if(F!=null&&typeof F.getRandomValues==="function")return kp;else return Tp})(),F3={toLocalBufferType(F){if(Buffer.isBuffer(F))return F;if(ArrayBuffer.isView(F))return Buffer.from(F.buffer,F.byteOffset,F.byteLength);let A=F?.[Symbol.toStringTag]??Object.prototype.toString.call(F);if(A==="ArrayBuffer"||A==="SharedArrayBuffer"||A==="[object ArrayBuffer]"||A==="[object SharedArrayBuffer]")return Buffer.from(F);throw new f("Cannot create Buffer from the passed potentialBuffer.")},allocate(F){return Buffer.alloc(F)},allocateUnsafe(F){return Buffer.allocUnsafe(F)},equals(F,A){return F3.toLocalBufferType(F).equals(A)},fromNumberArray(F){return Buffer.from(F)},fromBase64(F){return Buffer.from(F,"base64")},toBase64(F){return F3.toLocalBufferType(F).toString("base64")},fromISO88591(F){return Buffer.from(F,"binary")},toISO88591(F){return F3.toLocalBufferType(F).toString("binary")},fromHex(F){return Buffer.from(F,"hex")},toHex(F){return F3.toLocalBufferType(F).toString("hex")},toUTF8(F,A,B,D){let X=B-A<=20?eQ(F,A,B):null;if(X!=null)return X;let Z=F3.toLocalBufferType(F).toString("utf8",A,B);if(D){for(let J=0;J<Z.length;J++)if(Z.charCodeAt(J)===65533){oQ(F,A,B,!0);break}}return Z},utf8ByteLength(F){return Buffer.byteLength(F,"utf8")},encodeUTF8Into(F,A,B){let D=jp(F,A,B);if(D!=null)return D;return F3.toLocalBufferType(F).write(A,B,void 0,"utf8")},randomBytes:up,swap32(F){return F3.toLocalBufferType(F).swap32()}};function Op(){let{navigator:F}=globalThis;return typeof F==="object"&&F.product==="ReactNative"}function Sp(F){if(F<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${F}`);return s8.fromNumberArray(Array.from({length:F},()=>Math.floor(Math.random()*256)))}var xp=(()=>{let{crypto:F}=globalThis;if(F!=null&&typeof F.getRandomValues==="function")return(A)=>{return F.getRandomValues(s8.allocate(A))};else{if(Op()){let{console:A}=globalThis;A?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return Sp}})(),RQ=/(\d|[a-f])/i,s8={toLocalBufferType(F){let A=F?.[Symbol.toStringTag]??Object.prototype.toString.call(F);if(A==="Uint8Array")return F;if(ArrayBuffer.isView(F))return new Uint8Array(F.buffer.slice(F.byteOffset,F.byteOffset+F.byteLength));if(A==="ArrayBuffer"||A==="SharedArrayBuffer"||A==="[object ArrayBuffer]"||A==="[object SharedArrayBuffer]")return new Uint8Array(F);throw new f("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(F){if(typeof F!=="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(F)}`);return new Uint8Array(F)},allocateUnsafe(F){return s8.allocate(F)},equals(F,A){if(F.byteLength!==A.byteLength)return!1;for(let B=0;B<F.byteLength;B++)if(F[B]!==A[B])return!1;return!0},fromNumberArray(F){return Uint8Array.from(F)},fromBase64(F){return Uint8Array.from(atob(F),(A)=>A.charCodeAt(0))},toBase64(F){return btoa(s8.toISO88591(F))},fromISO88591(F){return Uint8Array.from(F,(A)=>A.charCodeAt(0)&255)},toISO88591(F){return Array.from(Uint16Array.from(F),(A)=>String.fromCharCode(A)).join("")},fromHex(F){let A=F.length%2===0?F:F.slice(0,F.length-1),B=[];for(let D=0;D<A.length;D+=2){let X=A[D],Z=A[D+1];if(!RQ.test(X))break;if(!RQ.test(Z))break;let J=Number.parseInt(`${X}${Z}`,16);B.push(J)}return Uint8Array.from(B)},toHex(F){return Array.from(F,(A)=>A.toString(16).padStart(2,"0")).join("")},toUTF8(F,A,B,D){let X=B-A<=20?eQ(F,A,B):null;if(X!=null)return X;return oQ(F,A,B,D)},utf8ByteLength(F){return new TextEncoder().encode(F).byteLength},encodeUTF8Into(F,A,B){let D=new TextEncoder().encode(A);return F.set(D,B),D.byteLength},randomBytes:xp,swap32(F){if(F.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<F.length;A+=4){let B=F[A],D=F[A+1],X=F[A+2],Z=F[A+3];F[A]=Z,F[A+1]=X,F[A+2]=D,F[A+3]=B}return F}},_p=typeof Buffer==="function"&&Buffer.prototype?._isBuffer!==!0,x=_p?F3:s8,fA=Symbol.for("@@mdb.bson.type");class I2{get[fA](){return this._bsontype}get[X7](){return n4}[Symbol.for("nodejs.util.inspect.custom")](F,A,B){return this.inspect(F,A,B)}}var B7=new Float64Array(1),S1=new Uint8Array(B7.buffer,0,8);B7[0]=-1;var bZ=S1[7]===0,D1={isBigEndian:bZ,getNonnegativeInt32LE(F,A){if(F[A+3]>127)throw new RangeError(`Size cannot be negative at offset: ${A}`);return F[A]|F[A+1]<<8|F[A+2]<<16|F[A+3]<<24},getInt32LE(F,A){return F[A]|F[A+1]<<8|F[A+2]<<16|F[A+3]<<24},getUint32LE(F,A){return F[A]+F[A+1]*256+F[A+2]*65536+F[A+3]*16777216},getUint32BE(F,A){return F[A+3]+F[A+2]*256+F[A+1]*65536+F[A]*16777216},getBigInt64LE(F,A){let B=BigInt(F[A+4]+F[A+5]*256+F[A+6]*65536+(F[A+7]<<24)),D=BigInt(F[A]+F[A+1]*256+F[A+2]*65536+F[A+3]*16777216);return(B<<32n)+D},getFloat64LE:bZ?(F,A)=>{return S1[7]=F[A],S1[6]=F[A+1],S1[5]=F[A+2],S1[4]=F[A+3],S1[3]=F[A+4],S1[2]=F[A+5],S1[1]=F[A+6],S1[0]=F[A+7],B7[0]}:(F,A)=>{return S1[0]=F[A],S1[1]=F[A+1],S1[2]=F[A+2],S1[3]=F[A+3],S1[4]=F[A+4],S1[5]=F[A+5],S1[6]=F[A+6],S1[7]=F[A+7],B7[0]},setInt32BE(F,A,B){return F[A+3]=B,B>>>=8,F[A+2]=B,B>>>=8,F[A+1]=B,B>>>=8,F[A]=B,4},setInt32LE(F,A,B){return F[A]=B,B>>>=8,F[A+1]=B,B>>>=8,F[A+2]=B,B>>>=8,F[A+3]=B,4},setBigInt64LE(F,A,B){let D=0xffffffffn,X=Number(B&D);F[A]=X,X>>=8,F[A+1]=X,X>>=8,F[A+2]=X,X>>=8,F[A+3]=X;let Z=Number(B>>32n&D);return F[A+4]=Z,Z>>=8,F[A+5]=Z,Z>>=8,F[A+6]=Z,Z>>=8,F[A+7]=Z,8},setFloat64LE:bZ?(F,A,B)=>{return B7[0]=B,F[A]=S1[7],F[A+1]=S1[6],F[A+2]=S1[5],F[A+3]=S1[4],F[A+4]=S1[3],F[A+5]=S1[2],F[A+6]=S1[1],F[A+7]=S1[0],8}:(F,A,B)=>{return B7[0]=B,F[A]=S1[0],F[A+1]=S1[1],F[A+2]=S1[2],F[A+3]=S1[3],F[A+4]=S1[4],F[A+5]=S1[5],F[A+6]=S1[6],F[A+7]=S1[7],8}};class H1 extends I2{get _bsontype(){return"Binary"}static BSON_BINARY_SUBTYPE_DEFAULT=0;static BUFFER_SIZE=256;static SUBTYPE_DEFAULT=0;static SUBTYPE_FUNCTION=1;static SUBTYPE_BYTE_ARRAY=2;static SUBTYPE_UUID_OLD=3;static SUBTYPE_UUID=4;static SUBTYPE_MD5=5;static SUBTYPE_ENCRYPTED=6;static SUBTYPE_COLUMN=7;static SUBTYPE_SENSITIVE=8;static SUBTYPE_VECTOR=9;static SUBTYPE_USER_DEFINED=128;static VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});buffer;sub_type;position;constructor(F,A){super();if(F!=null&&typeof F==="string"&&!ArrayBuffer.isView(F)&&!$J(F)&&!Array.isArray(F))throw new f("Binary can only be constructed from Uint8Array or number[]");if(this.sub_type=A??H1.BSON_BINARY_SUBTYPE_DEFAULT,F==null)this.buffer=x.allocate(H1.BUFFER_SIZE),this.position=0;else this.buffer=Array.isArray(F)?x.fromNumberArray(F):x.toLocalBufferType(F),this.position=this.buffer.byteLength}put(F){if(typeof F==="string"&&F.length!==1)throw new f("only accepts single character String");else if(typeof F!=="number"&&F.length!==1)throw new f("only accepts single character Uint8Array or Array");let A;if(typeof F==="string")A=F.charCodeAt(0);else if(typeof F==="number")A=F;else A=F[0];if(A<0||A>255)throw new f("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=A;else{let B=x.allocate(H1.BUFFER_SIZE+this.buffer.length);B.set(this.buffer,0),this.buffer=B,this.buffer[this.position++]=A}}write(F,A){if(A=typeof A==="number"?A:this.position,this.buffer.byteLength<A+F.length){let B=x.allocate(this.buffer.byteLength+F.length);B.set(this.buffer,0),this.buffer=B}if(ArrayBuffer.isView(F))this.buffer.set(x.toLocalBufferType(F),A),this.position=A+F.byteLength>this.position?A+F.length:this.position;else if(typeof F==="string")throw new f("input cannot be string")}read(F,A){A=A&&A>0?A:this.position;let B=F+A;return this.buffer.subarray(F,B>this.position?this.position:B)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return x.toBase64(this.buffer.subarray(0,this.position))}toString(F){if(F==="hex")return x.toHex(this.buffer.subarray(0,this.position));if(F==="base64")return x.toBase64(this.buffer.subarray(0,this.position));if(F==="utf8"||F==="utf-8")return x.toUTF8(this.buffer,0,this.position,!1);return x.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(F){if(F=F||{},this.sub_type===H1.SUBTYPE_VECTOR)L3(this);let A=x.toBase64(this.buffer),B=Number(this.sub_type).toString(16);if(F.legacy)return{$binary:A,$type:B.length===1?"0"+B:B};return{$binary:{base64:A,subType:B.length===1?"0"+B:B}}}toUUID(){if(this.sub_type===H1.SUBTYPE_UUID)return new a0(this.buffer.subarray(0,this.position));throw new f(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${H1.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(F,A){return new H1(x.fromHex(F),A)}static createFromBase64(F,A){return new H1(x.fromBase64(F),A)}static fromExtendedJSON(F,A){A=A||{};let B,D;if("$binary"in F){if(A.legacy&&typeof F.$binary==="string"&&"$type"in F)D=F.$type?parseInt(F.$type,16):0,B=x.fromBase64(F.$binary);else if(typeof F.$binary!=="string")D=F.$binary.subType?parseInt(F.$binary.subType,16):0,B=x.fromBase64(F.$binary.base64)}else if("$uuid"in F)D=4,B=a0.bytesFromString(F.$uuid);if(!B)throw new f(`Unexpected Binary Extended JSON format ${JSON.stringify(F)}`);return D===QJ?new a0(B):new H1(B,D)}inspect(F,A,B){B??=o2;let D=x.toBase64(this.buffer.subarray(0,this.position)),X=B(D,A),Z=B(this.sub_type,A);return`Binary.createFromBase64(${X}, ${Z})`}toInt8Array(){if(this.sub_type!==H1.SUBTYPE_VECTOR)throw new f("Binary sub_type is not Vector");if(this.buffer[0]!==H1.VECTOR_TYPE.Int8)throw new f("Binary datatype field is not Int8");return L3(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==H1.SUBTYPE_VECTOR)throw new f("Binary sub_type is not Vector");if(this.buffer[0]!==H1.VECTOR_TYPE.Float32)throw new f("Binary datatype field is not Float32");L3(this);let F=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));if(D1.isBigEndian)x.swap32(F);return new Float32Array(F.buffer)}toPackedBits(){if(this.sub_type!==H1.SUBTYPE_VECTOR)throw new f("Binary sub_type is not Vector");if(this.buffer[0]!==H1.VECTOR_TYPE.PackedBit)throw new f("Binary datatype field is not packed bit");return L3(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==H1.SUBTYPE_VECTOR)throw new f("Binary sub_type is not Vector");if(this.buffer[0]!==H1.VECTOR_TYPE.PackedBit)throw new f("Binary datatype field is not packed bit");L3(this);let A=(this.length()-2)*8-this.buffer[1],B=new Int8Array(A);for(let D=0;D<B.length;D++){let X=D/8|0,Z=this.buffer[X+2],J=7-D%8,Y=Z>>J&1;B[D]=Y}return B}static fromInt8Array(F){let A=x.allocate(F.byteLength+2);A[0]=H1.VECTOR_TYPE.Int8,A[1]=0;let B=new Uint8Array(F.buffer,F.byteOffset,F.byteLength);A.set(B,2);let D=new this(A,this.SUBTYPE_VECTOR);return L3(D),D}static fromFloat32Array(F){let A=x.allocate(F.byteLength+2);A[0]=H1.VECTOR_TYPE.Float32,A[1]=0;let B=new Uint8Array(F.buffer,F.byteOffset,F.byteLength);if(A.set(B,2),D1.isBigEndian)x.swap32(new Uint8Array(A.buffer,2));let D=new this(A,this.SUBTYPE_VECTOR);return L3(D),D}static fromPackedBits(F,A=0){let B=x.allocate(F.byteLength+2);B[0]=H1.VECTOR_TYPE.PackedBit,B[1]=A,B.set(F,2);let D=new this(B,this.SUBTYPE_VECTOR);return L3(D),D}static fromBits(F){let A=F.length+7>>>3,B=new Uint8Array(A+2);B[0]=H1.VECTOR_TYPE.PackedBit;let D=F.length%8;B[1]=D===0?0:8-D;for(let X=0;X<F.length;X++){let Z=X>>>3,J=F[X];if(J!==0&&J!==1)throw new f(`Invalid bit value at ${X}: must be 0 or 1, found ${F[X]}`);if(J===0)continue;let Y=7-X%8;B[Z+2]|=J<<Y}return new this(B,H1.SUBTYPE_VECTOR)}}function L3(F){if(F.sub_type!==H1.SUBTYPE_VECTOR)return;let A=F.position,B=F.buffer[0],D=F.buffer[1];if((B===H1.VECTOR_TYPE.Float32||B===H1.VECTOR_TYPE.Int8)&&D!==0)throw new f("Invalid Vector: padding must be zero for int8 and float32 vectors");if(B===H1.VECTOR_TYPE.Float32){if(A!==0&&A-2!==0&&(A-2)%4!==0)throw new f("Invalid Vector: Float32 vector must contain a multiple of 4 bytes")}if(B===H1.VECTOR_TYPE.PackedBit&&D!==0&&A===2)throw new f("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(B===H1.VECTOR_TYPE.PackedBit&&D>7)throw new f(`Invalid Vector: padding must be a value between 0 and 7. found: ${D}`)}var yZ=16,fp=/^[0-9A-F]{32}$/i,gp=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class a0 extends H1{constructor(F){let A;if(F==null)A=a0.generate();else if(F instanceof a0)A=x.toLocalBufferType(new Uint8Array(F.buffer));else if(ArrayBuffer.isView(F)&&F.byteLength===yZ)A=x.toLocalBufferType(F);else if(typeof F==="string")A=a0.bytesFromString(F);else throw new f("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(A,QJ)}get id(){return this.buffer}set id(F){this.buffer=F}toHexString(F=!0){if(F)return[x.toHex(this.buffer.subarray(0,4)),x.toHex(this.buffer.subarray(4,6)),x.toHex(this.buffer.subarray(6,8)),x.toHex(this.buffer.subarray(8,10)),x.toHex(this.buffer.subarray(10,16))].join("-");return x.toHex(this.buffer)}toString(F){if(F==="hex")return x.toHex(this.id);if(F==="base64")return x.toBase64(this.id);return this.toHexString()}toJSON(){return this.toHexString()}equals(F){if(!F)return!1;if(F instanceof a0)return x.equals(F.id,this.id);try{return x.equals(new a0(F).id,this.id)}catch{return!1}}toBinary(){return new H1(this.id,H1.SUBTYPE_UUID)}static generate(){let F=x.randomBytes(yZ);return F[6]=F[6]&15|64,F[8]=F[8]&63|128,F}static isValid(F){if(!F)return!1;if(typeof F==="string")return a0.isValidUUIDString(F);if(e9(F))return F.byteLength===yZ;return F._bsontype==="Binary"&&F.sub_type===this.SUBTYPE_UUID&&F.buffer.byteLength===16}static createFromHexString(F){let A=a0.bytesFromString(F);return new a0(A)}static createFromBase64(F){return new a0(x.fromBase64(F))}static bytesFromString(F){if(!a0.isValidUUIDString(F))throw new f("UUID string representation must be 32 hex digits or canonical hyphenated representation");return x.fromHex(F.replace(/-/g,""))}static isValidUUIDString(F){return fp.test(F)||gp.test(F)}inspect(F,A,B){return B??=o2,`new UUID(${B(this.toHexString(),A)})`}}class R3 extends I2{get _bsontype(){return"Code"}code;scope;constructor(F,A){super();this.code=F.toString(),this.scope=A??null}toJSON(){if(this.scope!=null)return{code:this.code,scope:this.scope};return{code:this.code}}toExtendedJSON(){if(this.scope)return{$code:this.code,$scope:this.scope};return{$code:this.code}}static fromExtendedJSON(F){return new R3(F.$code,F.$scope)}inspect(F,A,B){B??=o2;let D=B(this.code,A),X=D.includes(`
`);if(this.scope!=null)D+=`,${X?`
`:" "}${B(this.scope,A)}`;let Z=X&&this.scope===null;return`new Code(${X?`
`:""}${D}${Z?`
`:""})`}}function FK(F){return F!=null&&typeof F==="object"&&"$id"in F&&F.$id!=null&&"$ref"in F&&typeof F.$ref==="string"&&(!("$db"in F)||("$db"in F)&&typeof F.$db==="string")}class A3 extends I2{get _bsontype(){return"DBRef"}collection;oid;db;fields;constructor(F,A,B,D){super();let X=F.split(".");if(X.length===2)B=X.shift(),F=X.shift();this.collection=F,this.oid=A,this.db=B,this.fields=D||{}}get namespace(){return this.collection}set namespace(F){this.collection=F}toJSON(){let F=Object.assign({$ref:this.collection,$id:this.oid},this.fields);if(this.db!=null)F.$db=this.db;return F}toExtendedJSON(F){F=F||{};let A={$ref:this.collection,$id:this.oid};if(F.legacy)return A;if(this.db)A.$db=this.db;return A=Object.assign(A,this.fields),A}static fromExtendedJSON(F){let A=Object.assign({},F);return delete A.$ref,delete A.$id,delete A.$db,new A3(F.$ref,F.$id,F.$db,A)}inspect(F,A,B){B??=o2;let D=[B(this.namespace,A),B(this.oid,A),...this.db?[B(this.db,A)]:[],...Object.keys(this.fields).length>0?[B(this.fields,A)]:[]];return D[1]=B===o2?`new ObjectId(${D[1]})`:D[1],`new DBRef(${D.join(", ")})`}}function AK(F){if(F==="")return F;let A=0,B=F[A]==="-",D=F[A]==="+";if(D||B)A+=1;let X=!1;for(;A<F.length&&F[A]==="0";++A)X=!0;if(!X)return D?F.slice(1):F;return`${B?"-":""}${F.length===A?"0":F.slice(A)}`}function bp(F,A){A=A??10;let B="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,A);return new RegExp(`[^-+${B}]`,"i").test(F)?!1:F}var z6=void 0;try{z6=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var IQ=65536,yp=16777216,D7=IQ*IQ,BK=D7*D7,PQ=BK/2,NQ={},MQ={},hp=20,vp=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class M extends I2{get _bsontype(){return"Long"}get __isLong__(){return!0}high;low;unsigned;constructor(F=0,A,B){super();let D=typeof A==="boolean"?A:Boolean(B),X=typeof A==="number"?A:0,Z=typeof F==="string"?M.fromString(F,D):typeof F==="bigint"?M.fromBigInt(F,D):{low:F|0,high:X|0,unsigned:D};this.low=Z.low,this.high=Z.high,this.unsigned=Z.unsigned}static TWO_PWR_24=M.fromInt(yp);static MAX_UNSIGNED_VALUE=M.fromBits(-1,-1,!0);static ZERO=M.fromInt(0);static UZERO=M.fromInt(0,!0);static ONE=M.fromInt(1);static UONE=M.fromInt(1,!0);static NEG_ONE=M.fromInt(-1);static MAX_VALUE=M.fromBits(-1,2147483647,!1);static MIN_VALUE=M.fromBits(0,-2147483648,!1);static fromBits(F,A,B){return new M(F,A,B)}static fromInt(F,A){let B,D,X;if(A){if(F>>>=0,X=0<=F&&F<256){if(D=MQ[F],D)return D}if(B=M.fromBits(F,(F|0)<0?-1:0,!0),X)MQ[F]=B;return B}else{if(F|=0,X=-128<=F&&F<128){if(D=NQ[F],D)return D}if(B=M.fromBits(F,F<0?-1:0,!1),X)NQ[F]=B;return B}}static fromNumber(F,A){if(isNaN(F))return A?M.UZERO:M.ZERO;if(A){if(F<0)return M.UZERO;if(F>=BK)return M.MAX_UNSIGNED_VALUE}else{if(F<=-PQ)return M.MIN_VALUE;if(F+1>=PQ)return M.MAX_VALUE}if(F<0)return M.fromNumber(-F,A).neg();return M.fromBits(F%D7|0,F/D7|0,A)}static fromBigInt(F,A){let B=0xffffffffn,D=32n;return new M(Number(F&B),Number(F>>D&B),A)}static _fromString(F,A,B){if(F.length===0)throw new f("empty string");if(B<2||36<B)throw new f("radix");let D;if((D=F.indexOf("-"))>0)throw new f("interior hyphen");else if(D===0)return M._fromString(F.substring(1),A,B).neg();let X=M.fromNumber(Math.pow(B,8)),Z=M.ZERO;for(let J=0;J<F.length;J+=8){let Y=Math.min(8,F.length-J),$=parseInt(F.substring(J,J+Y),B);if(Y<8){let G=M.fromNumber(Math.pow(B,Y));Z=Z.mul(G).add(M.fromNumber($))}else Z=Z.mul(X),Z=Z.add(M.fromNumber($))}return Z.unsigned=A,Z}static fromStringStrict(F,A,B){let D=!1;if(typeof A==="number")B=A,A=!1;else D=!!A;if(B??=10,F.trim()!==F)throw new f(`Input: '${F}' contains leading and/or trailing whitespace`);if(!bp(F,B))throw new f(`Input: '${F}' contains invalid characters for radix: ${B}`);let X=AK(F),Z=M._fromString(X,D,B);if(Z.toString(B).toLowerCase()!==X.toLowerCase())throw new f(`Input: ${F} is not representable as ${Z.unsigned?"an unsigned":"a signed"} 64-bit Long ${B!=null?`with radix: ${B}`:""}`);return Z}static fromString(F,A,B){let D=!1;if(typeof A==="number")B=A,A=!1;else D=!!A;if(B??=10,F==="NaN"&&B<24)return M.ZERO;else if((F==="Infinity"||F==="+Infinity"||F==="-Infinity")&&B<35)return M.ZERO;return M._fromString(F,D,B)}static fromBytes(F,A,B){return B?M.fromBytesLE(F,A):M.fromBytesBE(F,A)}static fromBytesLE(F,A){return new M(F[0]|F[1]<<8|F[2]<<16|F[3]<<24,F[4]|F[5]<<8|F[6]<<16|F[7]<<24,A)}static fromBytesBE(F,A){return new M(F[4]<<24|F[5]<<16|F[6]<<8|F[7],F[0]<<24|F[1]<<16|F[2]<<8|F[3],A)}static isLong(F){return F!=null&&typeof F==="object"&&"__isLong__"in F&&F.__isLong__===!0}static fromValue(F,A){if(typeof F==="number")return M.fromNumber(F,A);if(typeof F==="string")return M.fromString(F,A);return M.fromBits(F.low,F.high,typeof A==="boolean"?A:F.unsigned)}add(F){if(!M.isLong(F))F=M.fromValue(F);let A=this.high>>>16,B=this.high&65535,D=this.low>>>16,X=this.low&65535,Z=F.high>>>16,J=F.high&65535,Y=F.low>>>16,$=F.low&65535,G=0,E=0,C=0,W=0;return W+=X+$,C+=W>>>16,W&=65535,C+=D+Y,E+=C>>>16,C&=65535,E+=B+J,G+=E>>>16,E&=65535,G+=A+Z,G&=65535,M.fromBits(C<<16|W,G<<16|E,this.unsigned)}and(F){if(!M.isLong(F))F=M.fromValue(F);return M.fromBits(this.low&F.low,this.high&F.high,this.unsigned)}compare(F){if(!M.isLong(F))F=M.fromValue(F);if(this.eq(F))return 0;let A=this.isNegative(),B=F.isNegative();if(A&&!B)return-1;if(!A&&B)return 1;if(!this.unsigned)return this.sub(F).isNegative()?-1:1;return F.high>>>0>this.high>>>0||F.high===this.high&&F.low>>>0>this.low>>>0?-1:1}comp(F){return this.compare(F)}divide(F){if(!M.isLong(F))F=M.fromValue(F);if(F.isZero())throw new f("division by zero");if(z6){if(!this.unsigned&&this.high===-2147483648&&F.low===-1&&F.high===-1)return this;let X=(this.unsigned?z6.div_u:z6.div_s)(this.low,this.high,F.low,F.high);return M.fromBits(X,z6.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?M.UZERO:M.ZERO;let A,B,D;if(!this.unsigned){if(this.eq(M.MIN_VALUE))if(F.eq(M.ONE)||F.eq(M.NEG_ONE))return M.MIN_VALUE;else if(F.eq(M.MIN_VALUE))return M.ONE;else if(A=this.shr(1).div(F).shl(1),A.eq(M.ZERO))return F.isNegative()?M.ONE:M.NEG_ONE;else return B=this.sub(F.mul(A)),D=A.add(B.div(F)),D;else if(F.eq(M.MIN_VALUE))return this.unsigned?M.UZERO:M.ZERO;if(this.isNegative()){if(F.isNegative())return this.neg().div(F.neg());return this.neg().div(F).neg()}else if(F.isNegative())return this.div(F.neg()).neg();D=M.ZERO}else{if(!F.unsigned)F=F.toUnsigned();if(F.gt(this))return M.UZERO;if(F.gt(this.shru(1)))return M.UONE;D=M.UZERO}B=this;while(B.gte(F)){A=Math.max(1,Math.floor(B.toNumber()/F.toNumber()));let X=Math.ceil(Math.log(A)/Math.LN2),Z=X<=48?1:Math.pow(2,X-48),J=M.fromNumber(A),Y=J.mul(F);while(Y.isNegative()||Y.gt(B))A-=Z,J=M.fromNumber(A,this.unsigned),Y=J.mul(F);if(J.isZero())J=M.ONE;D=D.add(J),B=B.sub(Y)}return D}div(F){return this.divide(F)}equals(F){if(!M.isLong(F))F=M.fromValue(F);if(this.unsigned!==F.unsigned&&this.high>>>31===1&&F.high>>>31===1)return!1;return this.high===F.high&&this.low===F.low}eq(F){return this.equals(F)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(M.MIN_VALUE)?64:this.neg().getNumBitsAbs();let F=this.high!==0?this.high:this.low,A;for(A=31;A>0;A--)if((F&1<<A)!==0)break;return this.high!==0?A+33:A+1}greaterThan(F){return this.comp(F)>0}gt(F){return this.greaterThan(F)}greaterThanOrEqual(F){return this.comp(F)>=0}gte(F){return this.greaterThanOrEqual(F)}ge(F){return this.greaterThanOrEqual(F)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(F){return this.comp(F)<0}lt(F){return this.lessThan(F)}lessThanOrEqual(F){return this.comp(F)<=0}lte(F){return this.lessThanOrEqual(F)}modulo(F){if(!M.isLong(F))F=M.fromValue(F);if(z6){let A=(this.unsigned?z6.rem_u:z6.rem_s)(this.low,this.high,F.low,F.high);return M.fromBits(A,z6.get_high(),this.unsigned)}return this.sub(this.div(F).mul(F))}mod(F){return this.modulo(F)}rem(F){return this.modulo(F)}multiply(F){if(this.isZero())return M.ZERO;if(!M.isLong(F))F=M.fromValue(F);if(z6){let H=z6.mul(this.low,this.high,F.low,F.high);return M.fromBits(H,z6.get_high(),this.unsigned)}if(F.isZero())return M.ZERO;if(this.eq(M.MIN_VALUE))return F.isOdd()?M.MIN_VALUE:M.ZERO;if(F.eq(M.MIN_VALUE))return this.isOdd()?M.MIN_VALUE:M.ZERO;if(this.isNegative())if(F.isNegative())return this.neg().mul(F.neg());else return this.neg().mul(F).neg();else if(F.isNegative())return this.mul(F.neg()).neg();if(this.lt(M.TWO_PWR_24)&&F.lt(M.TWO_PWR_24))return M.fromNumber(this.toNumber()*F.toNumber(),this.unsigned);let A=this.high>>>16,B=this.high&65535,D=this.low>>>16,X=this.low&65535,Z=F.high>>>16,J=F.high&65535,Y=F.low>>>16,$=F.low&65535,G=0,E=0,C=0,W=0;return W+=X*$,C+=W>>>16,W&=65535,C+=D*$,E+=C>>>16,C&=65535,C+=X*Y,E+=C>>>16,C&=65535,E+=B*$,G+=E>>>16,E&=65535,E+=D*Y,G+=E>>>16,E&=65535,E+=X*J,G+=E>>>16,E&=65535,G+=A*$+B*Y+D*J+X*Z,G&=65535,M.fromBits(C<<16|W,G<<16|E,this.unsigned)}mul(F){return this.multiply(F)}negate(){if(!this.unsigned&&this.eq(M.MIN_VALUE))return M.MIN_VALUE;return this.not().add(M.ONE)}neg(){return this.negate()}not(){return M.fromBits(~this.low,~this.high,this.unsigned)}notEquals(F){return!this.equals(F)}neq(F){return this.notEquals(F)}ne(F){return this.notEquals(F)}or(F){if(!M.isLong(F))F=M.fromValue(F);return M.fromBits(this.low|F.low,this.high|F.high,this.unsigned)}shiftLeft(F){if(M.isLong(F))F=F.toInt();if((F&=63)===0)return this;else if(F<32)return M.fromBits(this.low<<F,this.high<<F|this.low>>>32-F,this.unsigned);else return M.fromBits(0,this.low<<F-32,this.unsigned)}shl(F){return this.shiftLeft(F)}shiftRight(F){if(M.isLong(F))F=F.toInt();if((F&=63)===0)return this;else if(F<32)return M.fromBits(this.low>>>F|this.high<<32-F,this.high>>F,this.unsigned);else return M.fromBits(this.high>>F-32,this.high>=0?0:-1,this.unsigned)}shr(F){return this.shiftRight(F)}shiftRightUnsigned(F){if(M.isLong(F))F=F.toInt();if(F&=63,F===0)return this;else{let A=this.high;if(F<32){let B=this.low;return M.fromBits(B>>>F|A<<32-F,A>>>F,this.unsigned)}else if(F===32)return M.fromBits(A,0,this.unsigned);else return M.fromBits(A>>>F-32,0,this.unsigned)}}shr_u(F){return this.shiftRightUnsigned(F)}shru(F){return this.shiftRightUnsigned(F)}subtract(F){if(!M.isLong(F))F=M.fromValue(F);return this.add(F.neg())}sub(F){return this.subtract(F)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){if(this.unsigned)return(this.high>>>0)*D7+(this.low>>>0);return this.high*D7+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(F){return F?this.toBytesLE():this.toBytesBE()}toBytesLE(){let F=this.high,A=this.low;return[A&255,A>>>8&255,A>>>16&255,A>>>24,F&255,F>>>8&255,F>>>16&255,F>>>24]}toBytesBE(){let F=this.high,A=this.low;return[F>>>24,F>>>16&255,F>>>8&255,F&255,A>>>24,A>>>16&255,A>>>8&255,A&255]}toSigned(){if(!this.unsigned)return this;return M.fromBits(this.low,this.high,!1)}toString(F){if(F=F||10,F<2||36<F)throw new f("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(M.MIN_VALUE)){let X=M.fromNumber(F),Z=this.div(X),J=Z.mul(X).sub(this);return Z.toString(F)+J.toInt().toString(F)}else return"-"+this.neg().toString(F);let A=M.fromNumber(Math.pow(F,6),this.unsigned),B=this,D="";while(!0){let X=B.div(A),J=(B.sub(X.mul(A)).toInt()>>>0).toString(F);if(B=X,B.isZero())return J+D;else{while(J.length<6)J="0"+J;D=""+J+D}}}toUnsigned(){if(this.unsigned)return this;return M.fromBits(this.low,this.high,!0)}xor(F){if(!M.isLong(F))F=M.fromValue(F);return M.fromBits(this.low^F.low,this.high^F.high,this.unsigned)}eqz(){return this.isZero()}le(F){return this.lessThanOrEqual(F)}toExtendedJSON(F){if(F&&F.relaxed)return this.toNumber();return{$numberLong:this.toString()}}static fromExtendedJSON(F,A){let{useBigInt64:B=!1,relaxed:D=!0}={...A};if(F.$numberLong.length>hp)throw new f("$numberLong string is too long");if(!vp.test(F.$numberLong))throw new f(`$numberLong string "${F.$numberLong}" is in an invalid format`);if(B){let Z=BigInt(F.$numberLong);return BigInt.asIntN(64,Z)}let X=M.fromString(F.$numberLong);if(D)return X.toNumber();return X}inspect(F,A,B){B??=o2;let D=B(this.toString(),A),X=this.unsigned?`, ${B(this.unsigned,A)}`:"";return`new Long(${D}${X})`}}var mp=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,dp=/^(\+|-)?(Infinity|inf)$/i,cp=/^(\+|-)?NaN$/i,t9=6111,p8=-6176,jQ=6176,TQ=34,hZ=x.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),kQ=x.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),uQ=x.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),lp=/^([-+])?(\d+)?$/,pp=31,OQ=16383,ip=30,np=31;function SQ(F){return!isNaN(parseInt(F,10))}function ap(F){let A=M.fromNumber(1e9),B=M.fromNumber(0);if(!F.parts[0]&&!F.parts[1]&&!F.parts[2]&&!F.parts[3])return{quotient:F,rem:B};for(let D=0;D<=3;D++)B=B.shiftLeft(32),B=B.add(new M(F.parts[D],0)),F.parts[D]=B.div(A).low,B=B.modulo(A);return{quotient:F,rem:B}}function sp(F,A){if(!F&&!A)return{high:M.fromNumber(0),low:M.fromNumber(0)};let B=F.shiftRightUnsigned(32),D=new M(F.getLowBits(),0),X=A.shiftRightUnsigned(32),Z=new M(A.getLowBits(),0),J=B.multiply(X),Y=B.multiply(Z),$=D.multiply(X),G=D.multiply(Z);return J=J.add(Y.shiftRightUnsigned(32)),Y=new M(Y.getLowBits(),0).add($).add(G.shiftRightUnsigned(32)),J=J.add(Y.shiftRightUnsigned(32)),G=Y.shiftLeft(32).add(new M(G.getLowBits(),0)),{high:J,low:G}}function rp(F,A){let B=F.high>>>0,D=A.high>>>0;if(B<D)return!0;else if(B===D){let X=F.low>>>0,Z=A.low>>>0;if(X<Z)return!0}return!1}function O6(F,A){throw new f(`"${F}" is not a valid Decimal128 string - ${A}`)}class E2 extends I2{get _bsontype(){return"Decimal128"}bytes;constructor(F){super();if(typeof F==="string")this.bytes=E2.fromString(F).bytes;else if(F instanceof Uint8Array||e9(F)){if(F.byteLength!==16)throw new f("Decimal128 must take a Buffer of 16 bytes");this.bytes=F}else throw new f("Decimal128 must take a Buffer or string")}static fromString(F){return E2._fromString(F,{allowRounding:!1})}static fromStringWithRounding(F){return E2._fromString(F,{allowRounding:!0})}static _fromString(F,A){let B=!1,D=!1,X=!1,Z=!1,J=0,Y=0,$=0,G=0,E=0,C=[0],W=0,H=0,q=0,Q=0,K=new M(0,0),U=new M(0,0),R=0,w=0;if(F.length>=7000)throw new f(""+F+" not a valid Decimal128 string");let V=F.match(mp),N=F.match(dp),T=F.match(cp);if(!V&&!N&&!T||F.length===0)throw new f(""+F+" not a valid Decimal128 string");if(V){let k=V[2],d=V[4],h=V[5],o=V[6];if(d&&o===void 0)O6(F,"missing exponent power");if(d&&k===void 0)O6(F,"missing exponent base");if(d===void 0&&(h||o))O6(F,"missing e before exponent")}if(F[w]==="+"||F[w]==="-")D=!0,B=F[w++]==="-";if(!SQ(F[w])&&F[w]!=="."){if(F[w]==="i"||F[w]==="I")return new E2(B?kQ:uQ);else if(F[w]==="N")return new E2(hZ)}while(SQ(F[w])||F[w]==="."){if(F[w]==="."){if(X)O6(F,"contains multiple periods");X=!0,w=w+1;continue}if(W<TQ){if(F[w]!=="0"||Z){if(!Z)E=Y;Z=!0,C[H++]=parseInt(F[w],10),W=W+1}}if(Z)$=$+1;if(X)G=G+1;Y=Y+1,w=w+1}if(X&&!Y)throw new f(""+F+" not a valid Decimal128 string");if(F[w]==="e"||F[w]==="E"){let k=F.substr(++w).match(lp);if(!k||!k[2])return new E2(hZ);Q=parseInt(k[0],10),w=w+k[0].length}if(F[w])return new E2(hZ);if(!W)C[0]=0,$=1,W=1,J=0;else if(q=W-1,J=$,J!==1)while(F[E+J-1+Number(D)+Number(X)]==="0")J=J-1;if(Q<=G&&G>Q+16384)Q=p8;else Q=Q-G;while(Q>t9){if(q=q+1,q>=TQ){if(J===0){Q=t9;break}O6(F,"overflow")}Q=Q-1}if(A.allowRounding){while(Q<p8||W<$){if(q===0&&J<W){Q=p8,J=0;break}if(W<$)$=$-1;else q=q-1;if(Q<t9)Q=Q+1;else{if(C.join("").match(/^0+$/)){Q=t9;break}O6(F,"overflow")}}if(q+1<J){let k=Y;if(X)E=E+1,k=k+1;if(D)E=E+1,k=k+1;let d=parseInt(F[E+q+1],10),h=0;if(d>=5){if(h=1,d===5){h=C[q]%2===1?1:0;for(let o=E+q+2;o<k;o++)if(parseInt(F[o],10)){h=1;break}}}if(h){let o=q;for(;o>=0;o--)if(++C[o]>9){if(C[o]=0,o===0)if(Q<t9)Q=Q+1,C[o]=1;else return new E2(B?kQ:uQ)}else break}}}else{while(Q<p8||W<$){if(q===0){if(J===0){Q=p8;break}O6(F,"exponent underflow")}if(W<$){if(F[$-1+Number(D)+Number(X)]!=="0"&&J!==0)O6(F,"inexact rounding");$=$-1}else{if(C[q]!==0)O6(F,"inexact rounding");q=q-1}if(Q<t9)Q=Q+1;else O6(F,"overflow")}if(q+1<J){if(X)E=E+1;if(D)E=E+1;if(parseInt(F[E+q+1],10)!==0)O6(F,"inexact rounding")}}if(K=M.fromNumber(0),U=M.fromNumber(0),J===0)K=M.fromNumber(0),U=M.fromNumber(0);else if(q<17){let k=0;U=M.fromNumber(C[k++]),K=new M(0,0);for(;k<=q;k++)U=U.multiply(M.fromNumber(10)),U=U.add(M.fromNumber(C[k]))}else{let k=0;K=M.fromNumber(C[k++]);for(;k<=q-17;k++)K=K.multiply(M.fromNumber(10)),K=K.add(M.fromNumber(C[k]));U=M.fromNumber(C[k++]);for(;k<=q;k++)U=U.multiply(M.fromNumber(10)),U=U.add(M.fromNumber(C[k]))}let P=sp(K,M.fromString("100000000000000000"));if(P.low=P.low.add(U),rp(P.low,U))P.high=P.high.add(M.fromNumber(1));R=Q+jQ;let u={low:M.fromNumber(0),high:M.fromNumber(0)};if(P.high.shiftRightUnsigned(49).and(M.fromNumber(1)).equals(M.fromNumber(1)))u.high=u.high.or(M.fromNumber(3).shiftLeft(61)),u.high=u.high.or(M.fromNumber(R).and(M.fromNumber(16383).shiftLeft(47))),u.high=u.high.or(P.high.and(M.fromNumber(140737488355327)));else u.high=u.high.or(M.fromNumber(R&16383).shiftLeft(49)),u.high=u.high.or(P.high.and(M.fromNumber(562949953421311)));if(u.low=P.low,B)u.high=u.high.or(M.fromString("9223372036854775808"));let O=x.allocateUnsafe(16);return w=0,O[w++]=u.low.low&255,O[w++]=u.low.low>>8&255,O[w++]=u.low.low>>16&255,O[w++]=u.low.low>>24&255,O[w++]=u.low.high&255,O[w++]=u.low.high>>8&255,O[w++]=u.low.high>>16&255,O[w++]=u.low.high>>24&255,O[w++]=u.high.low&255,O[w++]=u.high.low>>8&255,O[w++]=u.high.low>>16&255,O[w++]=u.high.low>>24&255,O[w++]=u.high.high&255,O[w++]=u.high.high>>8&255,O[w++]=u.high.high>>16&255,O[w++]=u.high.high>>24&255,new E2(O)}toString(){let F,A=0,B=new Array(36);for(let w=0;w<B.length;w++)B[w]=0;let D=0,X=!1,Z,J={parts:[0,0,0,0]},Y,$,G=[];D=0;let E=this.bytes,C=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24,W=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24,H=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24,q=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24;if(D=0,{low:new M(C,W),high:new M(H,q)}.high.lessThan(M.ZERO))G.push("-");let K=q>>26&pp;if(K>>3===3)if(K===ip)return G.join("")+"Infinity";else if(K===np)return"NaN";else F=q>>15&OQ,Z=8+(q>>14&1);else Z=q>>14&7,F=q>>17&OQ;let U=F-jQ;if(J.parts[0]=(q&16383)+((Z&15)<<14),J.parts[1]=H,J.parts[2]=W,J.parts[3]=C,J.parts[0]===0&&J.parts[1]===0&&J.parts[2]===0&&J.parts[3]===0)X=!0;else for($=3;$>=0;$--){let w=0,V=ap(J);if(J=V.quotient,w=V.rem.low,!w)continue;for(Y=8;Y>=0;Y--)B[$*9+Y]=w%10,w=Math.floor(w/10)}if(X)A=1,B[D]=0;else{A=36;while(!B[D])A=A-1,D=D+1}let R=A-1+U;if(R>=34||R<=-7||U>0){if(A>34){if(G.push("0"),U>0)G.push(`E+${U}`);else if(U<0)G.push(`E${U}`);return G.join("")}if(G.push(`${B[D++]}`),A=A-1,A)G.push(".");for(let w=0;w<A;w++)G.push(`${B[D++]}`);if(G.push("E"),R>0)G.push(`+${R}`);else G.push(`${R}`)}else if(U>=0)for(let w=0;w<A;w++)G.push(`${B[D++]}`);else{let w=A+U;if(w>0)for(let V=0;V<w;V++)G.push(`${B[D++]}`);else G.push("0");G.push(".");while(w++<0)G.push("0");for(let V=0;V<A-Math.max(w-1,0);V++)G.push(`${B[D++]}`)}return G.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(F){return E2.fromString(F.$numberDecimal)}inspect(F,A,B){return B??=o2,`new Decimal128(${B(this.toString(),A)})`}}class Q6 extends I2{get _bsontype(){return"Double"}value;constructor(F){super();if(F instanceof Number)F=F.valueOf();this.value=+F}static fromString(F){let A=Number(F);if(F==="NaN")return new Q6(NaN);if(F==="Infinity")return new Q6(1/0);if(F==="-Infinity")return new Q6(-1/0);if(!Number.isFinite(A))throw new f(`Input: ${F} is not representable as a Double`);if(F.trim()!==F)throw new f(`Input: '${F}' contains whitespace`);if(F==="")throw new f("Input is an empty string");if(/[^-0-9.+eE]/.test(F))throw new f(`Input: '${F}' is not in decimal or exponential notation`);return new Q6(A)}valueOf(){return this.value}toJSON(){return this.value}toString(F){return this.value.toString(F)}toExtendedJSON(F){if(F&&(F.legacy||F.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-0.0"};return{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(F,A){let B=parseFloat(F.$numberDouble);return A&&A.relaxed?B:new Q6(B)}inspect(F,A,B){return B??=o2,`new Double(${B(this.value,A)})`}}class I3 extends I2{get _bsontype(){return"Int32"}value;constructor(F){super();if(F instanceof Number)F=F.valueOf();this.value=+F|0}static fromString(F){let A=AK(F),B=Number(F);if(r8<B)throw new f(`Input: '${F}' is larger than the maximum value for Int32`);else if(t8>B)throw new f(`Input: '${F}' is smaller than the minimum value for Int32`);else if(!Number.isSafeInteger(B))throw new f(`Input: '${F}' is not a safe integer`);else if(B.toString()!==A)throw new f(`Input: '${F}' is not a valid Int32 string`);return new I3(B)}valueOf(){return this.value}toString(F){return this.value.toString(F)}toJSON(){return this.value}toExtendedJSON(F){if(F&&(F.relaxed||F.legacy))return this.value;return{$numberInt:this.value.toString()}}static fromExtendedJSON(F,A){return A&&A.relaxed?parseInt(F.$numberInt,10):new I3(F.$numberInt)}inspect(F,A,B){return B??=o2,`new Int32(${B(this.value,A)})`}}class a4 extends I2{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new a4}inspect(){return"new MaxKey()"}}class s4 extends I2{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new s4}inspect(){return"new MinKey()"}}var i4=null,i8=new WeakMap;class F0 extends I2{get _bsontype(){return"ObjectId"}static index=Math.floor(Math.random()*16777215);static cacheHexString;buffer;constructor(F){super();let A;if(typeof F==="object"&&F&&"id"in F){if(typeof F.id!=="string"&&!ArrayBuffer.isView(F.id))throw new f("Argument passed in must have an id that is of type string or Buffer");if("toHexString"in F&&typeof F.toHexString==="function")A=x.fromHex(F.toHexString());else A=F.id}else A=F;if(A==null)this.buffer=F0.generate();else if(ArrayBuffer.isView(A)&&A.byteLength===12)this.buffer=x.toLocalBufferType(A);else if(typeof A==="string")if(F0.validateHexString(A)){if(this.buffer=x.fromHex(A),F0.cacheHexString)i8.set(this,A)}else throw new f("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new f("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(F){if(this.buffer=F,F0.cacheHexString)i8.set(this,x.toHex(F))}static validateHexString(F){if(F?.length!==24)return!1;for(let A=0;A<24;A++){let B=F.charCodeAt(A);if(B>=48&&B<=57||B>=97&&B<=102||B>=65&&B<=70)continue;return!1}return!0}toHexString(){if(F0.cacheHexString){let A=i8.get(this);if(A)return A}let F=x.toHex(this.id);if(F0.cacheHexString)i8.set(this,F);return F}static getInc(){return F0.index=(F0.index+1)%16777215}static generate(F){if(typeof F!=="number")F=Math.floor(Date.now()/1000);let A=F0.getInc(),B=x.allocateUnsafe(12);if(D1.setInt32BE(B,0,F),i4===null)i4=x.randomBytes(5);return B[4]=i4[0],B[5]=i4[1],B[6]=i4[2],B[7]=i4[3],B[8]=i4[4],B[11]=A&255,B[10]=A>>8&255,B[9]=A>>16&255,B}toString(F){if(F==="base64")return x.toBase64(this.id);if(F==="hex")return this.toHexString();return this.toHexString()}toJSON(){return this.toHexString()}static is(F){return F!=null&&typeof F==="object"&&"_bsontype"in F&&F._bsontype==="ObjectId"}equals(F){if(F===void 0||F===null)return!1;if(F0.is(F))return this.buffer[11]===F.buffer[11]&&x.equals(this.buffer,F.buffer);if(typeof F==="string")return F.toLowerCase()===this.toHexString();if(typeof F==="object"&&typeof F.toHexString==="function"){let A=F.toHexString(),B=this.toHexString();return typeof A==="string"&&A.toLowerCase()===B}return!1}getTimestamp(){let F=new Date,A=D1.getUint32BE(this.buffer,0);return F.setTime(Math.floor(A)*1000),F}static createPk(){return new F0}serializeInto(F,A){return F[A]=this.buffer[0],F[A+1]=this.buffer[1],F[A+2]=this.buffer[2],F[A+3]=this.buffer[3],F[A+4]=this.buffer[4],F[A+5]=this.buffer[5],F[A+6]=this.buffer[6],F[A+7]=this.buffer[7],F[A+8]=this.buffer[8],F[A+9]=this.buffer[9],F[A+10]=this.buffer[10],F[A+11]=this.buffer[11],12}static createFromTime(F){let A=x.allocate(12);for(let B=11;B>=4;B--)A[B]=0;return D1.setInt32BE(A,0,F),new F0(A)}static createFromHexString(F){if(F?.length!==24)throw new f("hex string must be 24 characters");return new F0(x.fromHex(F))}static createFromBase64(F){if(F?.length!==16)throw new f("base64 string must be 16 characters");return new F0(x.fromBase64(F))}static isValid(F){if(F==null)return!1;if(typeof F==="string")return F0.validateHexString(F);try{return new F0(F),!0}catch{return!1}}toExtendedJSON(){if(this.toHexString)return{$oid:this.toHexString()};return{$oid:this.toString("hex")}}static fromExtendedJSON(F){return new F0(F.$oid)}isCached(){return F0.cacheHexString&&i8.has(this)}inspect(F,A,B){return B??=o2,`new ObjectId(${B(this.toHexString(),A)})`}}function OA(F,A,B){let D=5;if(Array.isArray(F))for(let X=0;X<F.length;X++)D+=xQ(X.toString(),F[X],A,!0,B);else{if(typeof F?.toBSON==="function")F=F.toBSON();for(let X of Object.keys(F))D+=xQ(X,F[X],A,!1,B)}return D}function xQ(F,A,B=!1,D=!1,X=!1){if(typeof A?.toBSON==="function")A=A.toBSON();switch(typeof A){case"string":return 1+x.utf8ByteLength(F)+1+4+x.utf8ByteLength(A)+1;case"number":if(Math.floor(A)===A&&A>=hQ&&A<=yQ)if(A>=t8&&A<=r8)return(F!=null?x.utf8ByteLength(F)+1:0)+5;else return(F!=null?x.utf8ByteLength(F)+1:0)+9;else return(F!=null?x.utf8ByteLength(F)+1:0)+9;case"undefined":if(D||!X)return(F!=null?x.utf8ByteLength(F)+1:0)+1;return 0;case"boolean":return(F!=null?x.utf8ByteLength(F)+1:0)+2;case"object":if(A!=null&&typeof A._bsontype==="string"&&A[X7]!==n4)throw new B4;else if(A==null||A._bsontype==="MinKey"||A._bsontype==="MaxKey")return(F!=null?x.utf8ByteLength(F)+1:0)+1;else if(A._bsontype==="ObjectId")return(F!=null?x.utf8ByteLength(F)+1:0)+13;else if(A instanceof Date||A7(A))return(F!=null?x.utf8ByteLength(F)+1:0)+9;else if(ArrayBuffer.isView(A)||A instanceof ArrayBuffer||$J(A))return(F!=null?x.utf8ByteLength(F)+1:0)+6+A.byteLength;else if(A._bsontype==="Long"||A._bsontype==="Double"||A._bsontype==="Timestamp")return(F!=null?x.utf8ByteLength(F)+1:0)+9;else if(A._bsontype==="Decimal128")return(F!=null?x.utf8ByteLength(F)+1:0)+17;else if(A._bsontype==="Code")if(A.scope!=null&&Object.keys(A.scope).length>0)return(F!=null?x.utf8ByteLength(F)+1:0)+1+4+4+x.utf8ByteLength(A.code.toString())+1+OA(A.scope,B,X);else return(F!=null?x.utf8ByteLength(F)+1:0)+1+4+x.utf8ByteLength(A.code.toString())+1;else if(A._bsontype==="Binary"){let Z=A;if(Z.sub_type===H1.SUBTYPE_BYTE_ARRAY)return(F!=null?x.utf8ByteLength(F)+1:0)+(Z.position+1+4+1+4);else return(F!=null?x.utf8ByteLength(F)+1:0)+(Z.position+1+4+1)}else if(A._bsontype==="Symbol")return(F!=null?x.utf8ByteLength(F)+1:0)+x.utf8ByteLength(A.value)+4+1+1;else if(A._bsontype==="DBRef"){let Z=Object.assign({$ref:A.collection,$id:A.oid},A.fields);if(A.db!=null)Z.$db=A.db;return(F!=null?x.utf8ByteLength(F)+1:0)+1+OA(Z,B,X)}else if(A instanceof RegExp||F7(A))return(F!=null?x.utf8ByteLength(F)+1:0)+1+x.utf8ByteLength(A.source)+1+(A.global?1:0)+(A.ignoreCase?1:0)+(A.multiline?1:0)+1;else if(A._bsontype==="BSONRegExp")return(F!=null?x.utf8ByteLength(F)+1:0)+1+x.utf8ByteLength(A.pattern)+1+x.utf8ByteLength(A.options)+1;else return(F!=null?x.utf8ByteLength(F)+1:0)+OA(A,B,X)+1;case"function":if(B)return(F!=null?x.utf8ByteLength(F)+1:0)+1+4+x.utf8ByteLength(A.toString())+1;return 0;case"bigint":return(F!=null?x.utf8ByteLength(F)+1:0)+9;case"symbol":return 0;default:throw new f(`Unrecognized JS type: ${typeof A}`)}}function tp(F){return F.split("").sort().join("")}class K6 extends I2{get _bsontype(){return"BSONRegExp"}pattern;options;constructor(F,A){super();if(this.pattern=F,this.options=tp(A??""),this.pattern.indexOf("\x00")!==-1)throw new f(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\x00")!==-1)throw new f(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let B=0;B<this.options.length;B++)if(!(this.options[B]==="i"||this.options[B]==="m"||this.options[B]==="x"||this.options[B]==="l"||this.options[B]==="s"||this.options[B]==="u"))throw new f(`The regular expression option [${this.options[B]}] is not supported`)}static parseOptions(F){return F?F.split("").sort().join(""):""}toExtendedJSON(F){if(F=F||{},F.legacy)return{$regex:this.pattern,$options:this.options};return{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(F){if("$regex"in F)if(typeof F.$regex!=="string"){if(F.$regex._bsontype==="BSONRegExp")return F}else return new K6(F.$regex,K6.parseOptions(F.$options));if("$regularExpression"in F)return new K6(F.$regularExpression.pattern,K6.parseOptions(F.$regularExpression.options));throw new f(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(F)}`)}inspect(F,A,B){let D=Ip(A)??((J)=>J);B??=o2;let X=D(B(this.pattern),"regexp"),Z=D(B(this.options),"regexp");return`new BSONRegExp(${X}, ${Z})`}}class r4 extends I2{get _bsontype(){return"BSONSymbol"}value;constructor(F){super();this.value=F}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(F){return new r4(F.$symbol)}inspect(F,A,B){return B??=o2,`new BSONSymbol(${B(this.value,A)})`}}var op=M;class x6 extends op{get _bsontype(){return"Timestamp"}get[fA](){return"Timestamp"}static MAX_VALUE=M.MAX_UNSIGNED_VALUE;get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(F){if(F==null)super(0,0,!0);else if(typeof F==="bigint")super(F,!0);else if(M.isLong(F))super(F.low,F.high,!0);else if(typeof F==="object"&&"t"in F&&"i"in F){if(typeof F.t!=="number"&&(typeof F.t!=="object"||F.t._bsontype!=="Int32"))throw new f("Timestamp constructed from { t, i } must provide t as a number");if(typeof F.i!=="number"&&(typeof F.i!=="object"||F.i._bsontype!=="Int32"))throw new f("Timestamp constructed from { t, i } must provide i as a number");let A=Number(F.t),B=Number(F.i);if(A<0||Number.isNaN(A))throw new f("Timestamp constructed from { t, i } must provide a positive t");if(B<0||Number.isNaN(B))throw new f("Timestamp constructed from { t, i } must provide a positive i");if(A>4294967295)throw new f("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(B>4294967295)throw new f("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(B,A,!0)}else throw new f("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(F){return new x6(M.fromInt(F,!0))}static fromNumber(F){return new x6(M.fromNumber(F,!0))}static fromBits(F,A){return new x6({i:F,t:A})}static fromString(F,A){return new x6(M.fromString(F,!0,A))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(F){let A=M.isLong(F.$timestamp.i)?F.$timestamp.i.getLowBitsUnsigned():F.$timestamp.i,B=M.isLong(F.$timestamp.t)?F.$timestamp.t.getLowBitsUnsigned():F.$timestamp.t;return new x6({t:B,i:A})}inspect(F,A,B){B??=o2;let D=B(this.t,A),X=B(this.i,A);return`new Timestamp({ t: ${D}, i: ${X} })`}}var ep=M.fromNumber(yQ),Fi=M.fromNumber(hQ);function DK(F,A,B){A=A==null?{}:A;let D=A&&A.index?A.index:0,X=D1.getInt32LE(F,D);if(X<5)throw new f(`bson size must be >= 5, is ${X}`);if(A.allowObjectSmallerThanBufferSize&&F.length<X)throw new f(`buffer length ${F.length} must be >= bson size ${X}`);if(!A.allowObjectSmallerThanBufferSize&&F.length!==X)throw new f(`buffer length ${F.length} must === bson size ${X}`);if(X+D>F.byteLength)throw new f(`(bson size ${X} + options.index ${D} must be <= buffer length ${F.byteLength})`);if(F[D+X-1]!==0)throw new f("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return SA(F,D,A,B)}var Ai=/^\$ref$|^\$id$|^\$db$/;function SA(F,A,B,D=!1){let X=B.fieldsAsRaw==null?null:B.fieldsAsRaw,Z=B.raw==null?!1:B.raw,J=typeof B.bsonRegExp==="boolean"?B.bsonRegExp:!1,Y=B.promoteBuffers??!1,$=B.promoteLongs??!0,G=B.promoteValues??!0,E=B.useBigInt64??!1;if(E&&!G)throw new f("Must either request bigint or Long for int64 deserialization");if(E&&!$)throw new f("Must either request bigint or Long for int64 deserialization");let C=B.validation==null?{utf8:!0}:B.validation,W=!0,H,q,Q=C.utf8;if(typeof Q==="boolean")H=Q;else{W=!1;let N=Object.keys(Q).map(function(T){return Q[T]});if(N.length===0)throw new f("UTF-8 validation setting cannot be empty");if(typeof N[0]!=="boolean")throw new f("Invalid UTF-8 validation option, must specify boolean values");if(H=N[0],!N.every((T)=>T===H))throw new f("Invalid UTF-8 validation option - keys must be all true or all false")}if(!W){q=new Set;for(let N of Object.keys(Q))q.add(N)}let K=A;if(F.length<5)throw new f("corrupt bson message < 5 bytes long");let U=D1.getInt32LE(F,A);if(A+=4,U<5||U>F.length)throw new f("corrupt bson message");let R=D?[]:{},w=0,V=D?!1:null;while(!0){let N=F[A++];if(N===0)break;let T=A;while(F[T]!==0&&T<F.length)T++;if(T>=F.byteLength)throw new f("Bad BSON Document: illegal CString");let P=D?w++:x.toUTF8(F,A,T,!1),u=!0;if(W||q?.has(P))u=H;else u=!H;if(V!==!1&&P[0]==="$")V=Ai.test(P);let O;if(A=T+1,N===vQ){let k=D1.getInt32LE(F,A);if(A+=4,k<=0||k>F.length-A||F[A+k-1]!==0)throw new f("bad string length in bson");O=x.toUTF8(F,A,A+k-1,u),A=A+k}else if(N===dQ){let k=x.allocateUnsafe(12);for(let d=0;d<12;d++)k[d]=F[A+d];O=new F0(k),A=A+12}else if(N===n8&&G===!1)O=new I3(D1.getInt32LE(F,A)),A+=4;else if(N===n8)O=D1.getInt32LE(F,A),A+=4;else if(N===EJ){if(O=D1.getFloat64LE(F,A),A+=8,G===!1)O=new Q6(O)}else if(N===lQ){let k=D1.getInt32LE(F,A),d=D1.getInt32LE(F,A+4);A+=8,O=new Date(new M(k,d).toNumber())}else if(N===cQ){if(F[A]!==0&&F[A]!==1)throw new f("illegal boolean type value");O=F[A++]===1}else if(N===CJ){let k=A,d=D1.getInt32LE(F,A);if(d<=0||d>F.length-A)throw new f("bad embedded document length in bson");if(Z)O=F.subarray(A,A+d);else{let h=B;if(!W)h={...B,validation:{utf8:u}};O=SA(F,k,h,!1)}A=A+d}else if(N===mQ){let k=A,d=D1.getInt32LE(F,A),h=B,o=A+d;if(X&&X[P])h={...B,raw:!0};if(!W)h={...h,validation:{utf8:u}};if(O=SA(F,k,h,!0),A=A+d,F[A-1]!==0)throw new f("invalid array terminator byte");if(A!==o)throw new f("corrupted array bson")}else if(N===Pp)O=void 0;else if(N===HJ)O=null;else if(N===zJ)if(E)O=D1.getBigInt64LE(F,A),A+=8;else{let k=D1.getInt32LE(F,A),d=D1.getInt32LE(F,A+4);A+=8;let h=new M(k,d);if($&&G===!0)O=h.lessThanOrEqual(ep)&&h.greaterThanOrEqual(Fi)?h.toNumber():h;else O=h}else if(N===aQ){let k=x.allocateUnsafe(16);for(let d=0;d<16;d++)k[d]=F[A+d];A=A+16,O=new E2(k)}else if(N===WJ){let k=D1.getInt32LE(F,A);A+=4;let d=k,h=F[A++];if(k<0)throw new f("Negative binary type element size found");if(k>F.byteLength)throw new f("Binary type size larger than document size");if(h===H1.SUBTYPE_BYTE_ARRAY){if(k=D1.getInt32LE(F,A),A+=4,k<0)throw new f("Negative binary type element size found for subtype 0x02");if(k>d-4)throw new f("Binary type with subtype 0x02 contains too long binary size");if(k<d-4)throw new f("Binary type with subtype 0x02 contains too short binary size")}if(Y&&G)O=x.toLocalBufferType(F.subarray(A,A+k));else if(O=new H1(F.subarray(A,A+k),h),h===QJ&&a0.isValid(O))O=O.toUUID();A=A+k}else if(N===xA&&J===!1){T=A;while(F[T]!==0&&T<F.length)T++;if(T>=F.length)throw new f("Bad BSON Document: illegal CString");let k=x.toUTF8(F,A,T,!1);A=T+1,T=A;while(F[T]!==0&&T<F.length)T++;if(T>=F.length)throw new f("Bad BSON Document: illegal CString");let d=x.toUTF8(F,A,T,!1);A=T+1;let h=new Array(d.length);for(T=0;T<d.length;T++)switch(d[T]){case"m":h[T]="m";break;case"s":h[T]="g";break;case"i":h[T]="i";break}O=new RegExp(k,h.join(""))}else if(N===xA&&J===!0){T=A;while(F[T]!==0&&T<F.length)T++;if(T>=F.length)throw new f("Bad BSON Document: illegal CString");let k=x.toUTF8(F,A,T,!1);A=T+1,T=A;while(F[T]!==0&&T<F.length)T++;if(T>=F.length)throw new f("Bad BSON Document: illegal CString");let d=x.toUTF8(F,A,T,!1);A=T+1,O=new K6(k,d)}else if(N===pQ){let k=D1.getInt32LE(F,A);if(A+=4,k<=0||k>F.length-A||F[A+k-1]!==0)throw new f("bad string length in bson");let d=x.toUTF8(F,A,A+k-1,u);O=G?d:new r4(d),A=A+k}else if(N===nQ)O=new x6({i:D1.getUint32LE(F,A),t:D1.getUint32LE(F,A+4)}),A+=8;else if(N===sQ)O=new s4;else if(N===rQ)O=new a4;else if(N===qJ){let k=D1.getInt32LE(F,A);if(A+=4,k<=0||k>F.length-A||F[A+k-1]!==0)throw new f("bad string length in bson");let d=x.toUTF8(F,A,A+k-1,u);O=new R3(d),A=A+k}else if(N===iQ){let k=D1.getInt32LE(F,A);if(A+=4,k<13)throw new f("code_w_scope total size shorter minimum expected length");let d=D1.getInt32LE(F,A);if(A+=4,d<=0||d>F.length-A||F[A+d-1]!==0)throw new f("bad string length in bson");let h=x.toUTF8(F,A,A+d-1,u);A=A+d;let o=A,A1=D1.getInt32LE(F,A),R2=SA(F,o,B,!1);if(A=A+A1,k<8+A1+d)throw new f("code_w_scope total size is too short, truncating scope");if(k>8+A1+d)throw new f("code_w_scope total size is too long, clips outer document");O=new R3(h,R2)}else if(N===Np){let k=D1.getInt32LE(F,A);if(A+=4,k<=0||k>F.length-A||F[A+k-1]!==0)throw new f("bad string length in bson");let d=x.toUTF8(F,A,A+k-1,u);A=A+k;let h=x.allocateUnsafe(12);for(let A1=0;A1<12;A1++)h[A1]=F[A+A1];let o=new F0(h);A=A+12,O=new A3(d,o)}else throw new f(`Detected unknown BSON type ${N.toString(16)} for fieldname "${P}"`);if(P==="__proto__")Object.defineProperty(R,P,{value:O,writable:!0,enumerable:!0,configurable:!0});else R[P]=O}if(U!==A-K){if(D)throw new f("corrupt array bson");throw new f("corrupt object bson")}if(!V)return R;if(FK(R)){let N=Object.assign({},R);return delete N.$ref,delete N.$id,delete N.$db,new A3(R.$ref,R.$id,R.$db,N)}return R}var _A=/\x00/,_Q=new Set(["$db","$ref","$id","$clusterTime"]);function vZ(F,A,B,D){F[D++]=vQ;let X=x.encodeUTF8Into(F,A,D);D=D+X+1,F[D-1]=0;let Z=x.encodeUTF8Into(F,B,D+4);return D1.setInt32LE(F,D,Z+1),D=D+4+Z,F[D++]=0,D}function mZ(F,A,B,D){let Z=!Object.is(B,-0)&&Number.isSafeInteger(B)&&B<=r8&&B>=t8?n8:EJ;F[D++]=Z;let J=x.encodeUTF8Into(F,A,D);if(D=D+J,F[D++]=0,Z===n8)D+=D1.setInt32LE(F,D,B);else D+=D1.setFloat64LE(F,D,B);return D}function dZ(F,A,B,D){F[D++]=zJ;let X=x.encodeUTF8Into(F,A,D);return D+=X,F[D++]=0,D+=D1.setBigInt64LE(F,D,B),D}function o9(F,A,B,D){F[D++]=HJ;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,D}function cZ(F,A,B,D){F[D++]=cQ;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,F[D++]=B?1:0,D}function lZ(F,A,B,D){F[D++]=lQ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let Z=M.fromNumber(B.getTime()),J=Z.getLowBits(),Y=Z.getHighBits();return D+=D1.setInt32LE(F,D,J),D+=D1.setInt32LE(F,D,Y),D}function pZ(F,A,B,D){F[D++]=xA;let X=x.encodeUTF8Into(F,A,D);if(D=D+X,F[D++]=0,B.source&&B.source.match(_A)!=null)throw new f("value "+B.source+" must not contain null bytes");if(D=D+x.encodeUTF8Into(F,B.source,D),F[D++]=0,B.ignoreCase)F[D++]=105;if(B.global)F[D++]=115;if(B.multiline)F[D++]=109;return F[D++]=0,D}function iZ(F,A,B,D){F[D++]=xA;let X=x.encodeUTF8Into(F,A,D);if(D=D+X,F[D++]=0,B.pattern.match(_A)!=null)throw new f("pattern "+B.pattern+" must not contain null bytes");D=D+x.encodeUTF8Into(F,B.pattern,D),F[D++]=0;let Z=B.options.split("").sort().join("");return D=D+x.encodeUTF8Into(F,Z,D),F[D++]=0,D}function nZ(F,A,B,D){if(B===null)F[D++]=HJ;else if(B._bsontype==="MinKey")F[D++]=sQ;else F[D++]=rQ;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,D}function aZ(F,A,B,D){F[D++]=dQ;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,D+=B.serializeInto(F,D),D}function sZ(F,A,B,D){F[D++]=WJ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let Z=B.length;if(D+=D1.setInt32LE(F,D,Z),F[D++]=Mp,Z<=16)for(let J=0;J<Z;J++)F[D+J]=B[J];else F.set(B,D);return D=D+Z,D}function rZ(F,A,B,D,X,Z,J,Y,$){if($.has(B))throw new f("Cannot convert circular structure to BSON");$.add(B),F[D++]=Array.isArray(B)?mQ:CJ;let G=x.encodeUTF8Into(F,A,D);D=D+G,F[D++]=0;let E=o8(F,B,X,D,Z+1,J,Y,$);return $.delete(B),E}function tZ(F,A,B,D){F[D++]=aQ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;for(let Z=0;Z<16;Z++)F[D+Z]=B.bytes[Z];return D+16}function oZ(F,A,B,D){F[D++]=B._bsontype==="Long"?zJ:nQ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let Z=B.getLowBits(),J=B.getHighBits();return D+=D1.setInt32LE(F,D,Z),D+=D1.setInt32LE(F,D,J),D}function eZ(F,A,B,D){B=B.valueOf(),F[D++]=n8;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,D+=D1.setInt32LE(F,D,B),D}function FJ(F,A,B,D){F[D++]=EJ;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,D+=D1.setFloat64LE(F,D,B.value),D}function AJ(F,A,B,D){F[D++]=qJ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let Z=B.toString(),J=x.encodeUTF8Into(F,Z,D+4)+1;return D1.setInt32LE(F,D,J),D=D+4+J-1,F[D++]=0,D}function BJ(F,A,B,D,X=!1,Z=0,J=!1,Y=!0,$){if(B.scope&&typeof B.scope==="object"){F[D++]=iQ;let G=x.encodeUTF8Into(F,A,D);D=D+G,F[D++]=0;let E=D,C=B.code;D=D+4;let W=x.encodeUTF8Into(F,C,D+4)+1;D1.setInt32LE(F,D,W),F[D+4+W-1]=0,D=D+W+4;let H=o8(F,B.scope,X,D,Z+1,J,Y,$);D=H-1;let q=H-E;E+=D1.setInt32LE(F,E,q),F[D++]=0}else{F[D++]=qJ;let G=x.encodeUTF8Into(F,A,D);D=D+G,F[D++]=0;let E=B.code.toString(),C=x.encodeUTF8Into(F,E,D+4)+1;D1.setInt32LE(F,D,C),D=D+4+C-1,F[D++]=0}return D}function DJ(F,A,B,D){F[D++]=WJ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let{buffer:Z,position:J}=B;if(B.sub_type===H1.SUBTYPE_BYTE_ARRAY)J=J+4;if(D+=D1.setInt32LE(F,D,J),F[D++]=B.sub_type,B.sub_type===H1.SUBTYPE_BYTE_ARRAY)J=J-4,D+=D1.setInt32LE(F,D,J);if(B.sub_type===H1.SUBTYPE_VECTOR)L3(B);if(J<=16)for(let Y=0;Y<J;Y++)F[D+Y]=Z[Y];else F.set(Z,D);return D=D+B.position,D}function XJ(F,A,B,D){F[D++]=pQ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let Z=x.encodeUTF8Into(F,B.value,D+4)+1;return D1.setInt32LE(F,D,Z),D=D+4+Z-1,F[D++]=0,D}function ZJ(F,A,B,D,X,Z,J){F[D++]=CJ;let Y=x.encodeUTF8Into(F,A,D);D=D+Y,F[D++]=0;let $=D,G={$ref:B.collection||B.namespace,$id:B.oid};if(B.db!=null)G.$db=B.db;G=Object.assign(G,B.fields);let E=o8(F,G,!1,D,X+1,Z,!0,J),C=E-$;return $+=D1.setInt32LE(F,D,C),E}function o8(F,A,B,D,X,Z,J,Y){if(Y==null){if(A==null)return F[0]=5,F[1]=0,F[2]=0,F[3]=0,F[4]=0,5;if(Array.isArray(A))throw new f("serialize does not support an array as the root input");if(typeof A!=="object")throw new f("serialize does not support non-object as the root input");else if("_bsontype"in A&&typeof A._bsontype==="string")throw new f("BSON types cannot be serialized as a document");else if(A7(A)||F7(A)||e9(A)||$J(A))throw new f("date, regexp, typedarray, and arraybuffer cannot be BSON documents");Y=new Set}Y.add(A);let $=D+4;if(Array.isArray(A))for(let E=0;E<A.length;E++){let C=`${E}`,W=A[E];if(typeof W?.toBSON==="function")W=W.toBSON();let H=typeof W;if(W===void 0)$=o9(F,C,W,$);else if(W===null)$=o9(F,C,W,$);else if(H==="string")$=vZ(F,C,W,$);else if(H==="number")$=mZ(F,C,W,$);else if(H==="bigint")$=dZ(F,C,W,$);else if(H==="boolean")$=cZ(F,C,W,$);else if(H==="object"&&W._bsontype==null)if(W instanceof Date||A7(W))$=lZ(F,C,W,$);else if(W instanceof Uint8Array||e9(W))$=sZ(F,C,W,$);else if(W instanceof RegExp||F7(W))$=pZ(F,C,W,$);else $=rZ(F,C,W,$,B,X,Z,J,Y);else if(H==="object"){if(W[X7]!==n4)throw new B4;else if(W._bsontype==="ObjectId")$=aZ(F,C,W,$);else if(W._bsontype==="Decimal128")$=tZ(F,C,W,$);else if(W._bsontype==="Long"||W._bsontype==="Timestamp")$=oZ(F,C,W,$);else if(W._bsontype==="Double")$=FJ(F,C,W,$);else if(W._bsontype==="Code")$=BJ(F,C,W,$,B,X,Z,J,Y);else if(W._bsontype==="Binary")$=DJ(F,C,W,$);else if(W._bsontype==="BSONSymbol")$=XJ(F,C,W,$);else if(W._bsontype==="DBRef")$=ZJ(F,C,W,$,X,Z,Y);else if(W._bsontype==="BSONRegExp")$=iZ(F,C,W,$);else if(W._bsontype==="Int32")$=eZ(F,C,W,$);else if(W._bsontype==="MinKey"||W._bsontype==="MaxKey")$=nZ(F,C,W,$);else if(typeof W._bsontype!=="undefined")throw new f(`Unrecognized or invalid _bsontype: ${String(W._bsontype)}`)}else if(H==="function"&&Z)$=AJ(F,C,W,$)}else if(A instanceof Map||GJ(A)){let E=A.entries(),C=!1;while(!C){let W=E.next();if(C=!!W.done,C)continue;let H=W.value?W.value[0]:void 0,q=W.value?W.value[1]:void 0;if(typeof q?.toBSON==="function")q=q.toBSON();let Q=typeof q;if(typeof H==="string"&&!_Q.has(H)){if(H.match(_A)!=null)throw new f("key "+H+" must not contain null bytes");if(B){if(H[0]==="$")throw new f("key "+H+" must not start with '$'");else if(H.includes("."))throw new f("key "+H+" must not contain '.'")}}if(q===void 0){if(J===!1)$=o9(F,H,q,$)}else if(q===null)$=o9(F,H,q,$);else if(Q==="string")$=vZ(F,H,q,$);else if(Q==="number")$=mZ(F,H,q,$);else if(Q==="bigint")$=dZ(F,H,q,$);else if(Q==="boolean")$=cZ(F,H,q,$);else if(Q==="object"&&q._bsontype==null)if(q instanceof Date||A7(q))$=lZ(F,H,q,$);else if(q instanceof Uint8Array||e9(q))$=sZ(F,H,q,$);else if(q instanceof RegExp||F7(q))$=pZ(F,H,q,$);else $=rZ(F,H,q,$,B,X,Z,J,Y);else if(Q==="object"){if(q[X7]!==n4)throw new B4;else if(q._bsontype==="ObjectId")$=aZ(F,H,q,$);else if(q._bsontype==="Decimal128")$=tZ(F,H,q,$);else if(q._bsontype==="Long"||q._bsontype==="Timestamp")$=oZ(F,H,q,$);else if(q._bsontype==="Double")$=FJ(F,H,q,$);else if(q._bsontype==="Code")$=BJ(F,H,q,$,B,X,Z,J,Y);else if(q._bsontype==="Binary")$=DJ(F,H,q,$);else if(q._bsontype==="BSONSymbol")$=XJ(F,H,q,$);else if(q._bsontype==="DBRef")$=ZJ(F,H,q,$,X,Z,Y);else if(q._bsontype==="BSONRegExp")$=iZ(F,H,q,$);else if(q._bsontype==="Int32")$=eZ(F,H,q,$);else if(q._bsontype==="MinKey"||q._bsontype==="MaxKey")$=nZ(F,H,q,$);else if(typeof q._bsontype!=="undefined")throw new f(`Unrecognized or invalid _bsontype: ${String(q._bsontype)}`)}else if(Q==="function"&&Z)$=AJ(F,H,q,$)}}else{if(typeof A?.toBSON==="function"){if(A=A.toBSON(),A!=null&&typeof A!=="object")throw new f("toBSON function did not return an object")}for(let E of Object.keys(A)){let C=A[E];if(typeof C?.toBSON==="function")C=C.toBSON();let W=typeof C;if(typeof E==="string"&&!_Q.has(E)){if(E.match(_A)!=null)throw new f("key "+E+" must not contain null bytes");if(B){if(E[0]==="$")throw new f("key "+E+" must not start with '$'");else if(E.includes("."))throw new f("key "+E+" must not contain '.'")}}if(C===void 0){if(J===!1)$=o9(F,E,C,$)}else if(C===null)$=o9(F,E,C,$);else if(W==="string")$=vZ(F,E,C,$);else if(W==="number")$=mZ(F,E,C,$);else if(W==="bigint")$=dZ(F,E,C,$);else if(W==="boolean")$=cZ(F,E,C,$);else if(W==="object"&&C._bsontype==null)if(C instanceof Date||A7(C))$=lZ(F,E,C,$);else if(C instanceof Uint8Array||e9(C))$=sZ(F,E,C,$);else if(C instanceof RegExp||F7(C))$=pZ(F,E,C,$);else $=rZ(F,E,C,$,B,X,Z,J,Y);else if(W==="object"){if(C[X7]!==n4)throw new B4;else if(C._bsontype==="ObjectId")$=aZ(F,E,C,$);else if(C._bsontype==="Decimal128")$=tZ(F,E,C,$);else if(C._bsontype==="Long"||C._bsontype==="Timestamp")$=oZ(F,E,C,$);else if(C._bsontype==="Double")$=FJ(F,E,C,$);else if(C._bsontype==="Code")$=BJ(F,E,C,$,B,X,Z,J,Y);else if(C._bsontype==="Binary")$=DJ(F,E,C,$);else if(C._bsontype==="BSONSymbol")$=XJ(F,E,C,$);else if(C._bsontype==="DBRef")$=ZJ(F,E,C,$,X,Z,Y);else if(C._bsontype==="BSONRegExp")$=iZ(F,E,C,$);else if(C._bsontype==="Int32")$=eZ(F,E,C,$);else if(C._bsontype==="MinKey"||C._bsontype==="MaxKey")$=nZ(F,E,C,$);else if(typeof C._bsontype!=="undefined")throw new f(`Unrecognized or invalid _bsontype: ${String(C._bsontype)}`)}else if(W==="function"&&Z)$=AJ(F,E,C,$)}}Y.delete(A),F[$++]=0;let G=$-D;return D+=D1.setInt32LE(F,D,G),$}function Bi(F){return F!=null&&typeof F==="object"&&"_bsontype"in F&&typeof F._bsontype==="string"}var Di={$oid:F0,$binary:H1,$uuid:H1,$symbol:r4,$numberInt:I3,$numberDecimal:E2,$numberDouble:Q6,$numberLong:M,$minKey:s4,$maxKey:a4,$regex:K6,$regularExpression:K6,$timestamp:x6};function XK(F,A={}){if(typeof F==="number"){let D=F<=r8&&F>=t8,X=F<=gQ&&F>=bQ;if(A.relaxed||A.legacy)return F;if(Number.isInteger(F)&&!Object.is(F,-0)){if(D)return new I3(F);if(X){if(A.useBigInt64)return BigInt(F);return M.fromNumber(F)}}return new Q6(F)}if(F==null||typeof F!=="object")return F;if(F.$undefined)return null;let B=Object.keys(F).filter((D)=>D.startsWith("$")&&F[D]!=null);for(let D=0;D<B.length;D++){let X=Di[B[D]];if(X)return X.fromExtendedJSON(F,A)}if(F.$date!=null){let D=F.$date,X=new Date;if(A.legacy)if(typeof D==="number")X.setTime(D);else if(typeof D==="string")X.setTime(Date.parse(D));else if(typeof D==="bigint")X.setTime(Number(D));else throw new a8(`Unrecognized type for EJSON date: ${typeof D}`);else if(typeof D==="string")X.setTime(Date.parse(D));else if(M.isLong(D))X.setTime(D.toNumber());else if(typeof D==="number"&&A.relaxed)X.setTime(D);else if(typeof D==="bigint")X.setTime(Number(D));else throw new a8(`Unrecognized type for EJSON date: ${typeof D}`);return X}if(F.$code!=null){let D=Object.assign({},F);if(F.$scope)D.$scope=XK(F.$scope);return R3.fromExtendedJSON(F)}if(FK(F)||F.$dbPointer){let D=F.$ref?F:F.$dbPointer;if(D instanceof A3)return D;let X=Object.keys(D).filter((J)=>J.startsWith("$")),Z=!0;if(X.forEach((J)=>{if(["$ref","$id","$db"].indexOf(J)===-1)Z=!1}),Z)return A3.fromExtendedJSON(D)}return F}function Xi(F,A){return F.map((B,D)=>{A.seenObjects.push({propertyName:`index ${D}`,obj:null});try{return w3(B,A)}finally{A.seenObjects.pop()}})}function fQ(F){let A=F.toISOString();return F.getUTCMilliseconds()!==0?A:A.slice(0,-5)+"Z"}function w3(F,A){if(F instanceof Map||GJ(F)){let B=Object.create(null);for(let[D,X]of F){if(typeof D!=="string")throw new f("Can only serialize maps with string keys");B[D]=X}return w3(B,A)}if((typeof F==="object"||typeof F==="function")&&F!==null){let B=A.seenObjects.findIndex((D)=>D.obj===F);if(B!==-1){let D=A.seenObjects.map((E)=>E.propertyName),X=D.slice(0,B).map((E)=>`${E} -> `).join(""),Z=D[B],J=" -> "+D.slice(B+1,D.length-1).map((E)=>`${E} -> `).join(""),Y=D[D.length-1],$=" ".repeat(X.length+Z.length/2),G="-".repeat(J.length+(Z.length+Y.length)/2-1);throw new f(`Converting circular structure to EJSON:
    ${X}${Z}${J}${Y}
    ${$}\\${G}/`)}A.seenObjects[A.seenObjects.length-1].obj=F}if(Array.isArray(F))return Xi(F,A);if(F===void 0)return null;if(F instanceof Date||A7(F)){let B=F.getTime(),D=B>-1&&B<253402318800000;if(A.legacy)return A.relaxed&&D?{$date:F.getTime()}:{$date:fQ(F)};return A.relaxed&&D?{$date:fQ(F)}:{$date:{$numberLong:F.getTime().toString()}}}if(typeof F==="number"&&(!A.relaxed||!isFinite(F))){if(Number.isInteger(F)&&!Object.is(F,-0)){if(F>=t8&&F<=r8)return{$numberInt:F.toString()};if(F>=bQ&&F<=gQ)return{$numberLong:F.toString()}}return{$numberDouble:Object.is(F,-0)?"-0.0":F.toString()}}if(typeof F==="bigint"){if(!A.relaxed)return{$numberLong:BigInt.asIntN(64,F).toString()};return Number(BigInt.asIntN(64,F))}if(F instanceof RegExp||F7(F)){let B=F.flags;if(B===void 0){let X=F.toString().match(/[gimuy]*$/);if(X)B=X[0]}return new K6(F.source,B).toExtendedJSON(A)}if(F!=null&&typeof F==="object")return Ji(F,A);return F}var Zi={Binary:(F)=>new H1(F.value(),F.sub_type),Code:(F)=>new R3(F.code,F.scope),DBRef:(F)=>new A3(F.collection||F.namespace,F.oid,F.db,F.fields),Decimal128:(F)=>new E2(F.bytes),Double:(F)=>new Q6(F.value),Int32:(F)=>new I3(F.value),Long:(F)=>M.fromBits(F.low!=null?F.low:F.low_,F.low!=null?F.high:F.high_,F.low!=null?F.unsigned:F.unsigned_),MaxKey:()=>new a4,MinKey:()=>new s4,ObjectId:(F)=>new F0(F),BSONRegExp:(F)=>new K6(F.pattern,F.options),BSONSymbol:(F)=>new r4(F.value),Timestamp:(F)=>x6.fromBits(F.low,F.high)};function Ji(F,A){if(F==null||typeof F!=="object")throw new f("not an object instance");let B=F._bsontype;if(typeof B==="undefined"){let D={};for(let X of Object.keys(F)){A.seenObjects.push({propertyName:X,obj:null});try{let Z=w3(F[X],A);if(X==="__proto__")Object.defineProperty(D,X,{value:Z,writable:!0,enumerable:!0,configurable:!0});else D[X]=Z}finally{A.seenObjects.pop()}}return D}else if(F!=null&&typeof F==="object"&&typeof F._bsontype==="string"&&F[X7]!==n4)throw new B4;else if(Bi(F)){let D=F;if(typeof D.toExtendedJSON!=="function"){let X=Zi[F._bsontype];if(!X)throw new f("Unrecognized or invalid _bsontype: "+F._bsontype);D=X(D)}if(B==="Code"&&D.scope)D=new R3(D.code,w3(D.scope,A));else if(B==="DBRef"&&D.oid)D=new A3(w3(D.collection,A),w3(D.oid,A),w3(D.db,A),w3(D.fields,A));return D.toExtendedJSON(A)}else throw new f("_bsontype must be a string, but was: "+typeof B)}function ZK(F,A){let B={useBigInt64:A?.useBigInt64??!1,relaxed:A?.relaxed??!0,legacy:A?.legacy??!1};return JSON.parse(F,(D,X)=>{if(D.indexOf("\x00")!==-1)throw new f(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(D)}`);return XK(X,B)})}function JK(F,A,B,D){if(B!=null&&typeof B==="object")D=B,B=0;if(A!=null&&typeof A==="object"&&!Array.isArray(A))D=A,A=void 0,B=0;let X=Object.assign({relaxed:!0,legacy:!1},D,{seenObjects:[{propertyName:"(root)",obj:null}]}),Z=w3(F,X);return JSON.stringify(Z,A,B)}function Yi(F,A){return A=A||{},JSON.parse(JK(F,A))}function $i(F,A){return A=A||{},ZK(JSON.stringify(F),A)}var t4=Object.create(null);t4.parse=ZK;t4.stringify=JK;t4.serialize=Yi;t4.deserialize=$i;Object.freeze(t4);var Y0={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function JJ(F,A){try{return D1.getNonnegativeInt32LE(F,A)}catch(B){throw new S6("BSON size cannot be negative",A,{cause:B})}}function YJ(F,A){let B=A;for(;F[B]!==0;B++);if(B===F.length-1)throw new S6("Null terminator not found",A);return B}function Gi(F,A=0){if(A??=0,F.length<5)throw new S6(`Input must be at least 5 bytes, got ${F.length} bytes`,A);let B=JJ(F,A);if(B>F.length-A)throw new S6(`Parsed documentSize (${B} bytes) does not match input length (${F.length} bytes)`,A);if(F[A+B-1]!==0)throw new S6("BSON documents must end in 0x00",A+B);let D=[],X=A+4;while(X<=B+A){let Z=F[X];if(X+=1,Z===0){if(X-A!==B)throw new S6("Invalid 0x00 type byte",X);break}let J=X,Y=YJ(F,X)-J;X+=Y+1;let $;if(Z===Y0.double||Z===Y0.long||Z===Y0.date||Z===Y0.timestamp)$=8;else if(Z===Y0.int)$=4;else if(Z===Y0.objectId)$=12;else if(Z===Y0.decimal)$=16;else if(Z===Y0.bool)$=1;else if(Z===Y0.null||Z===Y0.undefined||Z===Y0.maxKey||Z===Y0.minKey)$=0;else if(Z===Y0.regex)$=YJ(F,YJ(F,X)+1)+1-X;else if(Z===Y0.object||Z===Y0.array||Z===Y0.javascriptWithScope)$=JJ(F,X);else if(Z===Y0.string||Z===Y0.binData||Z===Y0.dbPointer||Z===Y0.javascript||Z===Y0.symbol){if($=JJ(F,X)+4,Z===Y0.binData)$+=1;if(Z===Y0.dbPointer)$+=12}else throw new S6(`Invalid 0x${Z.toString(16).padStart(2,"0")} type byte`,X);if($>B)throw new S6("value reports length larger than document",X);D.push([Z,J,Y,X,$]),X+=$}return D}var Z7=Object.create(null);Z7.parseToElements=Gi;Z7.ByteUtils=x;Z7.NumberUtils=D1;Object.freeze(Z7);var YK=17825792,A4=x.allocate(YK);function $K(F){if(A4.length<F)A4=x.allocate(F)}function GK(F,A={}){let B=typeof A.checkKeys==="boolean"?A.checkKeys:!1,D=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,X=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!0,Z=typeof A.minInternalBufferSize==="number"?A.minInternalBufferSize:YK;if(A4.length<Z)A4=x.allocate(Z);let J=o8(A4,F,B,0,0,D,X,null),Y=x.allocateUnsafe(J);return Y.set(A4.subarray(0,J),0),Y}function EK(F,A,B={}){let D=typeof B.checkKeys==="boolean"?B.checkKeys:!1,X=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,Z=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!0,J=typeof B.index==="number"?B.index:0,Y=o8(A4,F,D,0,0,X,Z,null);return A.set(A4.subarray(0,Y),J),J+Y-1}function CK(F,A={}){return DK(x.toLocalBufferType(F),A)}function WK(F,A={}){A=A||{};let B=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,D=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!0;return OA(F,B,D)}function HK(F,A,B,D,X,Z){let J=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},Z),Y=x.toLocalBufferType(F),$=A;for(let G=0;G<B;G++){let E=D1.getInt32LE(Y,$);J.index=$,D[X+G]=DK(Y,J),$=$+E}return $}var Ei=Object.freeze({__proto__:null,BSONError:f,BSONOffsetError:S6,BSONRegExp:K6,BSONRuntimeError:a8,BSONSymbol:r4,BSONType:tQ,BSONValue:I2,BSONVersionError:B4,Binary:H1,Code:R3,DBRef:A3,Decimal128:E2,Double:Q6,EJSON:t4,Int32:I3,Long:M,MaxKey:a4,MinKey:s4,ObjectId:F0,Timestamp:x6,UUID:a0,bsonType:fA,calculateObjectSize:WK,deserialize:CK,deserializeStream:HK,onDemand:Z7,serialize:GK,serializeWithBufferAndIndex:EK,setInternalBufferSize:$K});Ci.BSON=Ei;Ci.BSONError=f;Ci.BSONOffsetError=S6;Ci.BSONRegExp=K6;Ci.BSONRuntimeError=a8;Ci.BSONSymbol=r4;Ci.BSONType=tQ;Ci.BSONValue=I2;Ci.BSONVersionError=B4;Ci.Binary=H1;Ci.Code=R3;Ci.DBRef=A3;Ci.Decimal128=E2;Ci.Double=Q6;Ci.EJSON=t4;Ci.Int32=I3;Ci.Long=M;Ci.MaxKey=a4;Ci.MinKey=s4;Ci.ObjectId=F0;Ci.Timestamp=x6;Ci.UUID=a0;Ci.bsonType=fA;Ci.calculateObjectSize=WK;Ci.deserialize=CK;Ci.deserializeStream=HK;Ci.onDemand=Z7;Ci.serialize=GK;Ci.serializeWithBufferAndIndex=EK;Ci.setInternalBufferSize=$K});var $1=z(($0)=>{Object.defineProperty($0,"__esModule",{value:!0});$0.toUTF8=$0.getBigInt64LE=$0.getFloat64LE=$0.getInt32LE=$0.UUID=$0.Timestamp=$0.serialize=$0.ObjectId=$0.MinKey=$0.MaxKey=$0.Long=$0.Int32=$0.EJSON=$0.Double=$0.deserialize=$0.Decimal128=$0.DBRef=$0.Code=$0.calculateObjectSize=$0.BSONType=$0.BSONSymbol=$0.BSONRegExp=$0.BSONError=$0.BSON=$0.Binary=void 0;$0.parseToElementsToArray=di;$0.pluckBSONSerializeOptions=ci;$0.resolveBSONOptions=li;$0.parseUtf8ValidationOption=pi;var e8=KJ(),L0=KJ();Object.defineProperty($0,"Binary",{enumerable:!0,get:function(){return L0.Binary}});Object.defineProperty($0,"BSON",{enumerable:!0,get:function(){return L0.BSON}});Object.defineProperty($0,"BSONError",{enumerable:!0,get:function(){return L0.BSONError}});Object.defineProperty($0,"BSONRegExp",{enumerable:!0,get:function(){return L0.BSONRegExp}});Object.defineProperty($0,"BSONSymbol",{enumerable:!0,get:function(){return L0.BSONSymbol}});Object.defineProperty($0,"BSONType",{enumerable:!0,get:function(){return L0.BSONType}});Object.defineProperty($0,"calculateObjectSize",{enumerable:!0,get:function(){return L0.calculateObjectSize}});Object.defineProperty($0,"Code",{enumerable:!0,get:function(){return L0.Code}});Object.defineProperty($0,"DBRef",{enumerable:!0,get:function(){return L0.DBRef}});Object.defineProperty($0,"Decimal128",{enumerable:!0,get:function(){return L0.Decimal128}});Object.defineProperty($0,"deserialize",{enumerable:!0,get:function(){return L0.deserialize}});Object.defineProperty($0,"Double",{enumerable:!0,get:function(){return L0.Double}});Object.defineProperty($0,"EJSON",{enumerable:!0,get:function(){return L0.EJSON}});Object.defineProperty($0,"Int32",{enumerable:!0,get:function(){return L0.Int32}});Object.defineProperty($0,"Long",{enumerable:!0,get:function(){return L0.Long}});Object.defineProperty($0,"MaxKey",{enumerable:!0,get:function(){return L0.MaxKey}});Object.defineProperty($0,"MinKey",{enumerable:!0,get:function(){return L0.MinKey}});Object.defineProperty($0,"ObjectId",{enumerable:!0,get:function(){return L0.ObjectId}});Object.defineProperty($0,"serialize",{enumerable:!0,get:function(){return L0.serialize}});Object.defineProperty($0,"Timestamp",{enumerable:!0,get:function(){return L0.Timestamp}});Object.defineProperty($0,"UUID",{enumerable:!0,get:function(){return L0.UUID}});function di(F,A){let B=e8.BSON.onDemand.parseToElements(F,A);return Array.isArray(B)?B:[...B]}$0.getInt32LE=e8.BSON.onDemand.NumberUtils.getInt32LE;$0.getFloat64LE=e8.BSON.onDemand.NumberUtils.getFloat64LE;$0.getBigInt64LE=e8.BSON.onDemand.NumberUtils.getBigInt64LE;$0.toUTF8=e8.BSON.onDemand.ByteUtils.toUTF8;function ci(F){let{fieldsAsRaw:A,useBigInt64:B,promoteValues:D,promoteBuffers:X,promoteLongs:Z,serializeFunctions:J,ignoreUndefined:Y,bsonRegExp:$,raw:G,enableUtf8Validation:E}=F;return{fieldsAsRaw:A,useBigInt64:B,promoteValues:D,promoteBuffers:X,promoteLongs:Z,serializeFunctions:J,ignoreUndefined:Y,bsonRegExp:$,raw:G,enableUtf8Validation:E}}function li(F,A){let B=A?.bsonOptions;return{raw:F?.raw??B?.raw??!1,useBigInt64:F?.useBigInt64??B?.useBigInt64??!1,promoteLongs:F?.promoteLongs??B?.promoteLongs??!0,promoteValues:F?.promoteValues??B?.promoteValues??!0,promoteBuffers:F?.promoteBuffers??B?.promoteBuffers??!1,ignoreUndefined:F?.ignoreUndefined??B?.ignoreUndefined??!1,bsonRegExp:F?.bsonRegExp??B?.bsonRegExp??!1,serializeFunctions:F?.serializeFunctions??B?.serializeFunctions??!1,fieldsAsRaw:F?.fieldsAsRaw??B?.fieldsAsRaw??{},enableUtf8Validation:F?.enableUtf8Validation??B?.enableUtf8Validation??!0}}function pi(F){if(F?.enableUtf8Validation===!1)return{utf8:!1};return{utf8:{writeErrors:!1}}}});var l=z((nK)=>{Object.defineProperty(nK,"__esModule",{value:!0});nK.MongoWriteConcernError=nK.MongoServerSelectionError=nK.MongoSystemError=nK.MongoMissingDependencyError=nK.MongoMissingCredentialsError=nK.MongoCompatibilityError=nK.MongoInvalidArgumentError=nK.MongoParseError=nK.MongoNetworkTimeoutError=nK.MongoNetworkError=nK.MongoClientClosedError=nK.MongoTopologyClosedError=nK.MongoCursorExhaustedError=nK.MongoServerClosedError=nK.MongoCursorInUseError=nK.MongoOperationTimeoutError=nK.MongoUnexpectedServerResponseError=nK.MongoGridFSChunkError=nK.MongoGridFSStreamError=nK.MongoTailableCursorError=nK.MongoChangeStreamError=nK.MongoClientBulkWriteExecutionError=nK.MongoClientBulkWriteCursorError=nK.MongoClientBulkWriteError=nK.MongoGCPError=nK.MongoAzureError=nK.MongoOIDCError=nK.MongoAWSError=nK.MongoKerberosError=nK.MongoExpiredSessionError=nK.MongoTransactionError=nK.MongoNotConnectedError=nK.MongoDecompressionError=nK.MongoBatchReExecutionError=nK.MongoStalePrimaryError=nK.MongoRuntimeError=nK.MongoAPIError=nK.MongoDriverError=nK.MongoServerError=nK.MongoError=nK.MongoErrorLabel=nK.GET_MORE_RESUMABLE_CODES=nK.MONGODB_ERROR_CODES=nK.NODE_IS_RECOVERING_ERROR_MESSAGE=nK.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=nK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;nK.needsRetryableWriteLabel=Fn;nK.isRetryableWriteError=pK;nK.isRetryableReadError=An;nK.isNodeShuttingDownError=Jn;nK.isSDAMUnrecoverableError=Yn;nK.isNetworkTimeoutError=$n;nK.isResumableError=Gn;nK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");nK.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");nK.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");nK.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});nK.GET_MORE_RESUMABLE_CODES=new Set([nK.MONGODB_ERROR_CODES.HostUnreachable,nK.MONGODB_ERROR_CODES.HostNotFound,nK.MONGODB_ERROR_CODES.NetworkTimeout,nK.MONGODB_ERROR_CODES.ShutdownInProgress,nK.MONGODB_ERROR_CODES.PrimarySteppedDown,nK.MONGODB_ERROR_CODES.ExceededTimeLimit,nK.MONGODB_ERROR_CODES.SocketException,nK.MONGODB_ERROR_CODES.NotWritablePrimary,nK.MONGODB_ERROR_CODES.InterruptedAtShutdown,nK.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,nK.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,nK.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,nK.MONGODB_ERROR_CODES.StaleShardVersion,nK.MONGODB_ERROR_CODES.StaleEpoch,nK.MONGODB_ERROR_CODES.StaleConfig,nK.MONGODB_ERROR_CODES.RetryChangeStream,nK.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,nK.MONGODB_ERROR_CODES.CursorNotFound]);nK.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequestedRetry:"PoolRequestedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function ei(F){return F!=null&&typeof F==="object"&&"errors"in F&&Array.isArray(F.errors)}class B3 extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(F,A){super(F,A);this.errorLabelSet=new Set}static buildErrorMessage(F){if(typeof F==="string")return F;if(ei(F)&&F.message.length===0)return F.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":F.errors.map(({message:A})=>A).join(", ");return F!=null&&typeof F==="object"&&"message"in F&&typeof F.message==="string"?F.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(F){return this.errorLabelSet.has(F)}addErrorLabel(F){this.errorLabelSet.add(F)}}nK.MongoError=B3;class gA extends B3{constructor(F){super(F.message||F.errmsg||F.$err||"n/a");if(F.errorLabels)for(let A of F.errorLabels)this.addErrorLabel(A);this.errorResponse=F;for(let A in F)if(A!=="errorLabels"&&A!=="errmsg"&&A!=="message"&&A!=="errorResponse")this[A]=F[A]}get name(){return"MongoServerError"}}nK.MongoServerError=gA;class J7 extends B3{constructor(F,A){super(F,A)}get name(){return"MongoDriverError"}}nK.MongoDriverError=J7;class C2 extends J7{constructor(F,A){super(F,A)}get name(){return"MongoAPIError"}}nK.MongoAPIError=C2;class e2 extends J7{constructor(F,A){super(F,A)}get name(){return"MongoRuntimeError"}}nK.MongoRuntimeError=e2;class zK extends e2{constructor(F,A){super(F,A)}get name(){return"MongoStalePrimaryError"}}nK.MongoStalePrimaryError=zK;class QK extends C2{constructor(F="This batch has already been executed, create new batch to execute"){super(F)}get name(){return"MongoBatchReExecutionError"}}nK.MongoBatchReExecutionError=QK;class KK extends e2{constructor(F){super(F)}get name(){return"MongoDecompressionError"}}nK.MongoDecompressionError=KK;class UK extends C2{constructor(F){super(F)}get name(){return"MongoNotConnectedError"}}nK.MongoNotConnectedError=UK;class VK extends C2{constructor(F){super(F)}get name(){return"MongoTransactionError"}}nK.MongoTransactionError=VK;class LK extends C2{constructor(F="Cannot use a session that has ended"){super(F)}get name(){return"MongoExpiredSessionError"}}nK.MongoExpiredSessionError=LK;class wK extends e2{constructor(F){super(F)}get name(){return"MongoKerberosError"}}nK.MongoKerberosError=wK;class RK extends e2{constructor(F,A){super(F,A)}get name(){return"MongoAWSError"}}nK.MongoAWSError=RK;class bA extends e2{constructor(F){super(F)}get name(){return"MongoOIDCError"}}nK.MongoOIDCError=bA;class IK extends bA{constructor(F){super(F)}get name(){return"MongoAzureError"}}nK.MongoAzureError=IK;class PK extends bA{constructor(F){super(F)}get name(){return"MongoGCPError"}}nK.MongoGCPError=PK;class NK extends gA{constructor(F){super(F);this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}}nK.MongoClientBulkWriteError=NK;class MK extends e2{constructor(F){super(F)}get name(){return"MongoClientBulkWriteCursorError"}}nK.MongoClientBulkWriteCursorError=MK;class jK extends e2{constructor(F){super(F)}get name(){return"MongoClientBulkWriteExecutionError"}}nK.MongoClientBulkWriteExecutionError=jK;class TK extends e2{constructor(F){super(F)}get name(){return"MongoChangeStreamError"}}nK.MongoChangeStreamError=TK;class kK extends C2{constructor(F="Tailable cursor does not support this operation"){super(F)}get name(){return"MongoTailableCursorError"}}nK.MongoTailableCursorError=kK;class uK extends e2{constructor(F){super(F)}get name(){return"MongoGridFSStreamError"}}nK.MongoGridFSStreamError=uK;class OK extends e2{constructor(F){super(F)}get name(){return"MongoGridFSChunkError"}}nK.MongoGridFSChunkError=OK;class SK extends e2{constructor(F,A){super(F,A)}get name(){return"MongoUnexpectedServerResponseError"}}nK.MongoUnexpectedServerResponseError=SK;class xK extends J7{get name(){return"MongoOperationTimeoutError"}}nK.MongoOperationTimeoutError=xK;class _K extends C2{constructor(F="Cursor is already initialized"){super(F)}get name(){return"MongoCursorInUseError"}}nK.MongoCursorInUseError=_K;class fK extends C2{constructor(F="Server is closed"){super(F)}get name(){return"MongoServerClosedError"}}nK.MongoServerClosedError=fK;class gK extends C2{constructor(F){super(F||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}}nK.MongoCursorExhaustedError=gK;class bK extends C2{constructor(F="Topology is closed"){super(F)}get name(){return"MongoTopologyClosedError"}}nK.MongoTopologyClosedError=bK;class yK extends C2{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}}nK.MongoClientClosedError=yK;class o4 extends B3{constructor(F,A){super(F,{cause:A?.cause});this.beforeHandshake=!!A?.beforeHandshake}get name(){return"MongoNetworkError"}}nK.MongoNetworkError=o4;class hK extends o4{constructor(F,A){super(F,A)}get name(){return"MongoNetworkTimeoutError"}}nK.MongoNetworkTimeoutError=hK;class VJ extends J7{constructor(F){super(F)}get name(){return"MongoParseError"}}nK.MongoParseError=VJ;class vK extends C2{constructor(F,A){super(F,A)}get name(){return"MongoInvalidArgumentError"}}nK.MongoInvalidArgumentError=vK;class mK extends C2{constructor(F){super(F)}get name(){return"MongoCompatibilityError"}}nK.MongoCompatibilityError=mK;class dK extends C2{constructor(F){super(F)}get name(){return"MongoMissingCredentialsError"}}nK.MongoMissingCredentialsError=dK;class cK extends C2{constructor(F,A){super(F,A);this.dependencyName=A.dependencyName}get name(){return"MongoMissingDependencyError"}}nK.MongoMissingDependencyError=cK;class LJ extends B3{constructor(F,A){if(A&&A.error)super(B3.buildErrorMessage(A.error.message||A.error),{cause:A.error});else super(F);if(A)this.reason=A;this.code=A.error?.code}get name(){return"MongoSystemError"}}nK.MongoSystemError=LJ;class wJ extends LJ{constructor(F,A){super(F,A)}get name(){return"MongoServerSelectionError"}}nK.MongoServerSelectionError=wJ;class RJ extends gA{constructor(F){super({...F.writeConcernError,...F});this.errInfo=F.writeConcernError.errInfo,this.result=F}get name(){return"MongoWriteConcernError"}}nK.MongoWriteConcernError=RJ;var lK=new Set([nK.MONGODB_ERROR_CODES.HostUnreachable,nK.MONGODB_ERROR_CODES.HostNotFound,nK.MONGODB_ERROR_CODES.NetworkTimeout,nK.MONGODB_ERROR_CODES.ShutdownInProgress,nK.MONGODB_ERROR_CODES.PrimarySteppedDown,nK.MONGODB_ERROR_CODES.SocketException,nK.MONGODB_ERROR_CODES.NotWritablePrimary,nK.MONGODB_ERROR_CODES.InterruptedAtShutdown,nK.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,nK.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,nK.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,nK.MONGODB_ERROR_CODES.ExceededTimeLimit,nK.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),UJ=lK;function Fn(F,A,B){if(F instanceof o4)return!0;if(F instanceof B3){if((A>=9||pK(F))&&!F.hasErrorLabel(nK.MongoErrorLabel.HandshakeError))return!1}if(F instanceof RJ){if(B==="Mongos"&&A<9)return UJ.has(F.result.code??0);let Z=F.result.writeConcernError.code??Number(F.code);return UJ.has(Number.isNaN(Z)?0:Z)}if(F instanceof B3)return UJ.has(Number(F.code));if(nK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message))return!0;if(nK.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message))return!0;return!1}function pK(F){return F.hasErrorLabel(nK.MongoErrorLabel.RetryableWriteError)||F.hasErrorLabel(nK.MongoErrorLabel.PoolRequestedRetry)}function An(F){if(typeof F.code==="number"?lK.has(F.code):!1)return!0;if(F instanceof o4)return!0;if(nK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message))return!0;if(nK.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message))return!0;return!1}var Bn=new Set([nK.MONGODB_ERROR_CODES.ShutdownInProgress,nK.MONGODB_ERROR_CODES.PrimarySteppedDown,nK.MONGODB_ERROR_CODES.InterruptedAtShutdown,nK.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,nK.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),Dn=new Set([nK.MONGODB_ERROR_CODES.NotWritablePrimary,nK.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,nK.MONGODB_ERROR_CODES.LegacyNotPrimary]),Xn=new Set([nK.MONGODB_ERROR_CODES.InterruptedAtShutdown,nK.MONGODB_ERROR_CODES.ShutdownInProgress]);function iK(F){if(typeof F.code==="number")return Bn.has(F.code);return nK.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(F.message)||nK.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message)}function Zn(F){if(typeof F.code==="number")return Dn.has(F.code);if(iK(F))return!1;return nK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message)}function Jn(F){return!!(typeof F.code==="number"&&Xn.has(F.code))}function Yn(F){if(F instanceof VJ||F==null)return!0;return iK(F)||Zn(F)}function $n(F){return!!(F instanceof o4&&F.message.match(/timed out/))}function Gn(F,A){if(F==null||!(F instanceof B3))return!1;if(F instanceof o4)return!0;if(F instanceof wJ)return!0;if(A!=null&&A>=9){if(F.code===nK.MONGODB_ERROR_CODES.CursorNotFound)return!0;return F.hasErrorLabel(nK.MongoErrorLabel.ResumableChangeStreamError)}if(typeof F.code==="number")return nK.GET_MORE_RESUMABLE_CODES.has(F.code);return!1}});var P3=z((tK)=>{Object.defineProperty(tK,"__esModule",{value:!0});tK.OP_MSG=tK.OP_COMPRESSED=tK.OP_DELETE=tK.OP_QUERY=tK.OP_INSERT=tK.OP_UPDATE=tK.OP_REPLY=tK.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=tK.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=tK.MIN_SUPPORTED_QE_SERVER_VERSION=tK.MIN_SUPPORTED_QE_WIRE_VERSION=tK.MAX_SUPPORTED_WIRE_VERSION=tK.MIN_SUPPORTED_WIRE_VERSION=tK.MIN_SUPPORTED_SNAPSHOT_READS_SERVER_VERSION=tK.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION=tK.MAX_SUPPORTED_SERVER_VERSION=tK.MIN_SUPPORTED_SERVER_VERSION=void 0;tK.MIN_SUPPORTED_SERVER_VERSION="4.2";tK.MAX_SUPPORTED_SERVER_VERSION="8.2";tK.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION=13;tK.MIN_SUPPORTED_SNAPSHOT_READS_SERVER_VERSION="5.0";tK.MIN_SUPPORTED_WIRE_VERSION=8;tK.MAX_SUPPORTED_WIRE_VERSION=27;tK.MIN_SUPPORTED_QE_WIRE_VERSION=21;tK.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";tK.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;tK.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";tK.OP_REPLY=1;tK.OP_UPDATE=2001;tK.OP_INSERT=2002;tK.OP_QUERY=2004;tK.OP_DELETE=2006;tK.OP_COMPRESSED=2012;tK.OP_MSG=2013});var w0=z((eK)=>{Object.defineProperty(eK,"__esModule",{value:!0});eK.END=eK.CHANGE=eK.INIT=eK.MORE=eK.RESPONSE=eK.SERVER_HEARTBEAT_FAILED=eK.SERVER_HEARTBEAT_SUCCEEDED=eK.SERVER_HEARTBEAT_STARTED=eK.COMMAND_FAILED=eK.COMMAND_SUCCEEDED=eK.COMMAND_STARTED=eK.CLUSTER_TIME_RECEIVED=eK.CONNECTION_CHECKED_IN=eK.CONNECTION_CHECKED_OUT=eK.CONNECTION_CHECK_OUT_FAILED=eK.CONNECTION_CHECK_OUT_STARTED=eK.CONNECTION_CLOSED=eK.CONNECTION_READY=eK.CONNECTION_CREATED=eK.CONNECTION_POOL_READY=eK.CONNECTION_POOL_CLEARED=eK.CONNECTION_POOL_CLOSED=eK.CONNECTION_POOL_CREATED=eK.WAITING_FOR_SUITABLE_SERVER=eK.SERVER_SELECTION_SUCCEEDED=eK.SERVER_SELECTION_FAILED=eK.SERVER_SELECTION_STARTED=eK.TOPOLOGY_DESCRIPTION_CHANGED=eK.TOPOLOGY_CLOSED=eK.TOPOLOGY_OPENING=eK.SERVER_DESCRIPTION_CHANGED=eK.SERVER_CLOSED=eK.SERVER_OPENING=eK.DESCRIPTION_RECEIVED=eK.UNPINNED=eK.PINNED=eK.MESSAGE=eK.ENDED=eK.CLOSED=eK.CONNECT=eK.OPEN=eK.CLOSE=eK.TIMEOUT=eK.ERROR=eK.SYSTEM_JS_COLLECTION=eK.SYSTEM_COMMAND_COLLECTION=eK.SYSTEM_USER_COLLECTION=eK.SYSTEM_PROFILE_COLLECTION=eK.SYSTEM_INDEX_COLLECTION=eK.SYSTEM_NAMESPACE_COLLECTION=void 0;eK.kDecoratedKeys=eK.kDecorateResult=eK.LEGACY_HELLO_COMMAND_CAMEL_CASE=eK.LEGACY_HELLO_COMMAND=eK.MONGO_CLIENT_EVENTS=eK.LOCAL_SERVER_EVENTS=eK.SERVER_RELAY_EVENTS=eK.APM_EVENTS=eK.TOPOLOGY_EVENTS=eK.CMAP_EVENTS=eK.HEARTBEAT_EVENTS=eK.RESUME_TOKEN_CHANGED=void 0;eK.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";eK.SYSTEM_INDEX_COLLECTION="system.indexes";eK.SYSTEM_PROFILE_COLLECTION="system.profile";eK.SYSTEM_USER_COLLECTION="system.users";eK.SYSTEM_COMMAND_COLLECTION="$cmd";eK.SYSTEM_JS_COLLECTION="system.js";eK.ERROR="error";eK.TIMEOUT="timeout";eK.CLOSE="close";eK.OPEN="open";eK.CONNECT="connect";eK.CLOSED="closed";eK.ENDED="ended";eK.MESSAGE="message";eK.PINNED="pinned";eK.UNPINNED="unpinned";eK.DESCRIPTION_RECEIVED="descriptionReceived";eK.SERVER_OPENING="serverOpening";eK.SERVER_CLOSED="serverClosed";eK.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";eK.TOPOLOGY_OPENING="topologyOpening";eK.TOPOLOGY_CLOSED="topologyClosed";eK.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";eK.SERVER_SELECTION_STARTED="serverSelectionStarted";eK.SERVER_SELECTION_FAILED="serverSelectionFailed";eK.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";eK.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";eK.CONNECTION_POOL_CREATED="connectionPoolCreated";eK.CONNECTION_POOL_CLOSED="connectionPoolClosed";eK.CONNECTION_POOL_CLEARED="connectionPoolCleared";eK.CONNECTION_POOL_READY="connectionPoolReady";eK.CONNECTION_CREATED="connectionCreated";eK.CONNECTION_READY="connectionReady";eK.CONNECTION_CLOSED="connectionClosed";eK.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";eK.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";eK.CONNECTION_CHECKED_OUT="connectionCheckedOut";eK.CONNECTION_CHECKED_IN="connectionCheckedIn";eK.CLUSTER_TIME_RECEIVED="clusterTimeReceived";eK.COMMAND_STARTED="commandStarted";eK.COMMAND_SUCCEEDED="commandSucceeded";eK.COMMAND_FAILED="commandFailed";eK.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";eK.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";eK.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";eK.RESPONSE="response";eK.MORE="more";eK.INIT="init";eK.CHANGE="change";eK.END="end";eK.RESUME_TOKEN_CHANGED="resumeTokenChanged";eK.HEARTBEAT_EVENTS=Object.freeze([eK.SERVER_HEARTBEAT_STARTED,eK.SERVER_HEARTBEAT_SUCCEEDED,eK.SERVER_HEARTBEAT_FAILED]);eK.CMAP_EVENTS=Object.freeze([eK.CONNECTION_POOL_CREATED,eK.CONNECTION_POOL_READY,eK.CONNECTION_POOL_CLEARED,eK.CONNECTION_POOL_CLOSED,eK.CONNECTION_CREATED,eK.CONNECTION_READY,eK.CONNECTION_CLOSED,eK.CONNECTION_CHECK_OUT_STARTED,eK.CONNECTION_CHECK_OUT_FAILED,eK.CONNECTION_CHECKED_OUT,eK.CONNECTION_CHECKED_IN]);eK.TOPOLOGY_EVENTS=Object.freeze([eK.SERVER_OPENING,eK.SERVER_CLOSED,eK.SERVER_DESCRIPTION_CHANGED,eK.TOPOLOGY_OPENING,eK.TOPOLOGY_CLOSED,eK.TOPOLOGY_DESCRIPTION_CHANGED,eK.ERROR,eK.TIMEOUT,eK.CLOSE]);eK.APM_EVENTS=Object.freeze([eK.COMMAND_STARTED,eK.COMMAND_SUCCEEDED,eK.COMMAND_FAILED]);eK.SERVER_RELAY_EVENTS=Object.freeze([eK.SERVER_HEARTBEAT_STARTED,eK.SERVER_HEARTBEAT_SUCCEEDED,eK.SERVER_HEARTBEAT_FAILED,eK.COMMAND_STARTED,eK.COMMAND_SUCCEEDED,eK.COMMAND_FAILED,...eK.CMAP_EVENTS]);eK.LOCAL_SERVER_EVENTS=Object.freeze([eK.CONNECT,eK.DESCRIPTION_RECEIVED,eK.CLOSED,eK.ENDED]);eK.MONGO_CLIENT_EVENTS=Object.freeze([...eK.CMAP_EVENTS,...eK.APM_EVENTS,...eK.TOPOLOGY_EVENTS,...eK.HEARTBEAT_EVENTS]);eK.LEGACY_HELLO_COMMAND="ismaster";eK.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";eK.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");eK.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var _6=z((kU)=>{Object.defineProperty(kU,"__esModule",{value:!0});kU.ReadConcern=kU.ReadConcernLevel=void 0;kU.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});class $7{constructor(F){this.level=kU.ReadConcernLevel[F]??F}static fromOptions(F){if(F==null)return;if(F.readConcern){let{readConcern:A}=F;if(A instanceof $7)return A;else if(typeof A==="string")return new $7(A);else if("level"in A&&A.level)return new $7(A.level)}if(F.level)return new $7(F.level);return}static get MAJORITY(){return kU.ReadConcernLevel.majority}static get AVAILABLE(){return kU.ReadConcernLevel.available}static get LINEARIZABLE(){return kU.ReadConcernLevel.linearizable}static get SNAPSHOT(){return kU.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}}kU.ReadConcern=$7});var f0=z((OU)=>{Object.defineProperty(OU,"__esModule",{value:!0});OU.ReadPreference=OU.ReadPreferenceMode=void 0;var e4=l();OU.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});class p1{static{this.PRIMARY=OU.ReadPreferenceMode.primary}static{this.PRIMARY_PREFERRED=OU.ReadPreferenceMode.primaryPreferred}static{this.SECONDARY=OU.ReadPreferenceMode.secondary}static{this.SECONDARY_PREFERRED=OU.ReadPreferenceMode.secondaryPreferred}static{this.NEAREST=OU.ReadPreferenceMode.nearest}static{this.primary=new p1(OU.ReadPreferenceMode.primary)}static{this.primaryPreferred=new p1(OU.ReadPreferenceMode.primaryPreferred)}static{this.secondary=new p1(OU.ReadPreferenceMode.secondary)}static{this.secondaryPreferred=new p1(OU.ReadPreferenceMode.secondaryPreferred)}static{this.nearest=new p1(OU.ReadPreferenceMode.nearest)}constructor(F,A,B){if(!p1.isValid(F))throw new e4.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(F)}`);if(B==null&&typeof A==="object"&&!Array.isArray(A))B=A,A=void 0;else if(A&&!Array.isArray(A))throw new e4.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=F,this.tags=A,this.hedge=B?.hedge,this.maxStalenessSeconds=void 0,B=B??{},B.maxStalenessSeconds!=null){if(B.maxStalenessSeconds<=0)throw new e4.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=B.maxStalenessSeconds}if(this.mode===p1.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new e4.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new e4.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new e4.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(F){return new p1(F)}static fromOptions(F){if(!F)return;let A=F.readPreference??F.session?.transaction.options.readPreference,B=F.readPreferenceTags;if(A==null)return;if(typeof A==="string")return new p1(A,B,{maxStalenessSeconds:F.maxStalenessSeconds,hedge:F.hedge});else if(!(A instanceof p1)&&typeof A==="object"){let D=A.mode||A.preference;if(D&&typeof D==="string")return new p1(D,A.tags??B,{maxStalenessSeconds:A.maxStalenessSeconds,hedge:F.hedge})}if(B)A.tags=B;return A}static translate(F){if(F.readPreference==null)return F;let A=F.readPreference;if(typeof A==="string")F.readPreference=new p1(A);else if(A&&!(A instanceof p1)&&typeof A==="object"){let B=A.mode||A.preference;if(B&&typeof B==="string")F.readPreference=new p1(B,A.tags,{maxStalenessSeconds:A.maxStalenessSeconds})}else if(!(A instanceof p1))throw new e4.MongoInvalidArgumentError(`Invalid read preference: ${A}`);return F}static isValid(F){return new Set([p1.PRIMARY,p1.PRIMARY_PREFERRED,p1.SECONDARY,p1.SECONDARY_PREFERRED,p1.NEAREST,null]).has(F)}isValid(F){return p1.isValid(typeof F==="string"?F:this.mode)}secondaryOk(){return new Set([p1.PRIMARY_PREFERRED,p1.SECONDARY,p1.SECONDARY_PREFERRED,p1.NEAREST]).has(this.mode)}equals(F){return F.mode===this.mode}toJSON(){let F={mode:this.mode};if(Array.isArray(this.tags))F.tags=this.tags;if(this.maxStalenessSeconds)F.maxStalenessSeconds=this.maxStalenessSeconds;if(this.hedge)F.hedge=this.hedge;return F}}OU.ReadPreference=p1});var F6=z((xU)=>{Object.defineProperty(xU,"__esModule",{value:!0});xU.ServerType=xU.TopologyType=xU.STATE_CONNECTED=xU.STATE_CONNECTING=xU.STATE_CLOSED=xU.STATE_CLOSING=void 0;xU._advanceClusterTime=pa;xU.STATE_CLOSING="closing";xU.STATE_CLOSED="closed";xU.STATE_CONNECTING="connecting";xU.STATE_CONNECTED="connected";xU.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});xU.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function pa(F,A){if(F.clusterTime==null)F.clusterTime=A;else if(A.clusterTime.greaterThan(F.clusterTime.clusterTime))F.clusterTime=A}});var P2=z((gU)=>{Object.defineProperty(gU,"__esModule",{value:!0});gU.WriteConcern=gU.WRITE_CONCERN_KEYS=void 0;gU.throwIfWriteConcernError=ea;var fU=f1(),oa=l();gU.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];class A5{constructor(F,A,B,D){if(F!=null)if(!Number.isNaN(Number(F)))this.w=Number(F);else this.w=F;if(A!=null)this.wtimeoutMS=this.wtimeout=A;if(B!=null)this.journal=this.j=B;if(D!=null)this.journal=this.j=D?!0:!1}static apply(F,A){let B={};if(A.w!=null)B.w=A.w;if(A.wtimeoutMS!=null)B.wtimeout=A.wtimeoutMS;if(A.journal!=null)B.j=A.j;return F.writeConcern=B,F}static fromOptions(F,A){if(F==null)return;A=A??{};let B;if(typeof F==="string"||typeof F==="number")B={w:F};else if(F instanceof A5)B=F;else B=F.writeConcern;let X={...A instanceof A5?A:A.writeConcern,...B},{w:Z=void 0,wtimeout:J=void 0,j:Y=void 0,fsync:$=void 0,journal:G=void 0,wtimeoutMS:E=void 0}=X;if(Z!=null||J!=null||E!=null||Y!=null||G!=null||$!=null)return new A5(Z,J??E,Y??G,$);return}}gU.WriteConcern=A5;function ea(F){if(typeof F==="object"&&F!=null){let A=fU.MongoDBResponse.is(F)&&F.has("writeConcernError")?F.toObject():!fU.MongoDBResponse.is(F)&&("writeConcernError"in F)?F:null;if(A!=null)throw new oa.MongoWriteConcernError(A)}}});var s=z((rU)=>{Object.defineProperty(rU,"__esModule",{value:!0});rU.kDispose=rU.randomBytes=rU.COSMOS_DB_MSG=rU.DOCUMENT_DB_MSG=rU.COSMOS_DB_CHECK=rU.DOCUMENT_DB_CHECK=rU.MONGODB_WARNING_CODE=rU.DEFAULT_PK_FACTORY=rU.HostAddress=rU.BufferPool=rU.List=rU.MongoDBCollectionNamespace=rU.MongoDBNamespace=rU.ByteUtils=void 0;rU.isUint8Array=Gs;rU.hostMatchesWildcards=Es;rU.normalizeHintField=Cs;rU.isObject=OJ;rU.mergeOptions=Hs;rU.filterOptions=qs;rU.isPromiseLike=zs;rU.decorateWithCollation=Qs;rU.decorateWithReadConcern=Ks;rU.getTopology=Us;rU.ns=Vs;rU.makeCounter=Ls;rU.uuidV4=ws;rU.maxWireVersion=Rs;rU.arrayStrictEqual=Is;rU.errorStrictEqual=Ps;rU.makeStateMachine=Ns;rU.now=cU;rU.calculateDurationInMs=Ms;rU.hasAtomicOperators=lU;rU.resolveTimeoutOptions=js;rU.resolveOptions=Ts;rU.isSuperset=pU;rU.isHello=ks;rU.setDifference=us;rU.isRecord=Ss;rU.emitWarning=nU;rU.emitWarningOnce=xs;rU.enumToString=_s;rU.supportsRetryableWrites=fs;rU.shuffle=gs;rU.commandSupportsReadConcern=bs;rU.compareObjectId=ys;rU.parseInteger=aU;rU.parseUnsignedInteger=hs;rU.checkParentDomainMatch=vs;rU.get=ms;rU.request=ds;rU.isHostMatch=cs;rU.promiseWithResolvers=fJ;rU.squashError=ls;rU.once=ps;rU.maybeAddIdToDocuments=is;rU.fileIsAccessible=ns;rU.csotMin=as;rU.noop=ss;rU.decorateDecryptionResult=sU;rU.addAbortListener=gJ;rU.abortable=ts;var mU=m("crypto"),Bs=m("fs"),dU=m("http"),uJ=m("timers"),Ds=m("url"),Xs=m("url"),Zs=m("util"),SJ=$1(),yU=P3(),vA=w0(),N2=l(),Js=_6(),Ys=f0(),$s=F6(),hU=P2();rU.ByteUtils={toLocalBufferType(F){return Buffer.isBuffer(F)?F:Buffer.from(F.buffer,F.byteOffset,F.byteLength)},equals(F,A){return rU.ByteUtils.toLocalBufferType(F).equals(A)},compare(F,A){return rU.ByteUtils.toLocalBufferType(F).compare(A)},toBase64(F){return rU.ByteUtils.toLocalBufferType(F).toString("base64")}};function Gs(F){return F!=null&&typeof F==="object"&&Symbol.toStringTag in F&&F[Symbol.toStringTag]==="Uint8Array"}function Es(F,A){for(let B of A)if(F===B||B.startsWith("*.")&&F?.endsWith(B.substring(2,B.length))||B.startsWith("*/")&&F?.endsWith(B.substring(2,B.length)))return!0;return!1}function Cs(F){let A=void 0;if(typeof F==="string")A=F;else if(Array.isArray(F))A={},F.forEach((B)=>{A[B]=1});else if(F!=null&&typeof F==="object"){A={};for(let B in F)A[B]=F[B]}return A}var Ws=(F)=>Object.prototype.toString.call(F);function OJ(F){return Ws(F)==="[object Object]"}function Hs(F,A){return{...F,...A}}function qs(F,A){let B={};for(let D in F)if(A.includes(D))B[D]=F[D];return B}function zs(F){return F!=null&&typeof F==="object"&&"then"in F&&typeof F.then==="function"}function Qs(F,A){if(A.collation&&typeof A.collation==="object")F.collation=A.collation}function Ks(F,A,B){if(B&&B.session&&B.session.inTransaction())return;let D=Object.assign({},F.readConcern||{});if(A.s.readConcern)Object.assign(D,A.s.readConcern);if(Object.keys(D).length>0)Object.assign(F,{readConcern:D})}function Us(F){if("topology"in F&&F.topology)return F.topology;else if("client"in F&&F.client.topology)return F.client.topology;throw new N2.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function Vs(F){return X5.fromString(F)}class X5{constructor(F,A){this.db=F,this.collection=A===""?void 0:A}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(F){return new xJ(this.db,F)}static fromString(F){if(typeof F!=="string"||F==="")throw new N2.MongoRuntimeError(`Cannot parse namespace from "${F}"`);let[A,...B]=F.split("."),D=B.join(".");return new X5(A,D===""?void 0:D)}}rU.MongoDBNamespace=X5;class xJ extends X5{constructor(F,A){super(F,A);this.collection=A}static fromString(F){return super.fromString(F)}}rU.MongoDBCollectionNamespace=xJ;function*Ls(F=0){let A=F;while(!0){let B=A;A+=1,yield B}}function ws(){let F=mU.randomBytes(16);return F[6]=F[6]&15|64,F[8]=F[8]&63|128,F}function Rs(F){if(F){if(F.hello)return F.hello.maxWireVersion;if(F.serverApi?.version)return yU.MAX_SUPPORTED_WIRE_VERSION;if(F.loadBalanced)return yU.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in F&&typeof F.lastHello==="function"){let A=F.lastHello();if(A)return A.maxWireVersion}if(F.description&&"maxWireVersion"in F.description&&F.description.maxWireVersion!=null)return F.description.maxWireVersion}return 0}function Is(F,A){if(!Array.isArray(F)||!Array.isArray(A))return!1;return F.length===A.length&&F.every((B,D)=>B===A[D])}function Ps(F,A){if(F===A)return!0;if(!F||!A)return F===A;if(F==null&&A!=null||F!=null&&A==null)return!1;if(F.constructor.name!==A.constructor.name)return!1;if(F.message!==A.message)return!1;return!0}function Ns(F){return function A(B,D){let X=F[B.s.state];if(X&&X.indexOf(D)<0)throw new N2.MongoRuntimeError(`illegal state transition from [${B.s.state}] => [${D}], allowed: [${X}]`);B.emit("stateChanged",B.s.state,D),B.s.state=D}}function cU(){let F=process.hrtime();return Math.floor(F[0]*1000+F[1]/1e6)}function Ms(F){if(typeof F!=="number")return-1;let A=cU()-F;return A<0?0:A}function lU(F,A){if(Array.isArray(F)){for(let D of F)if(lU(D))return!0;return!1}let B=Object.keys(F);if(A?.ignoreUndefined){let D=!0;for(let X of B)if(F[X]!==void 0){D=!1;break}if(D)throw new N2.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return B.length>0&&B[0][0]==="$"}function js(F,A){let{socketTimeoutMS:B,serverSelectionTimeoutMS:D,waitQueueTimeoutMS:X,timeoutMS:Z}=F.s.options;return{socketTimeoutMS:B,serverSelectionTimeoutMS:D,waitQueueTimeoutMS:X,timeoutMS:Z,...A}}function Ts(F,A){let B=Object.assign({},A,SJ.resolveBSONOptions(A,F)),D=A?.timeoutMS??F?.timeoutMS,X=A?.session;if(!X?.inTransaction()){let Y=Js.ReadConcern.fromOptions(A)??F?.readConcern;if(Y)B.readConcern=Y;let $=hU.WriteConcern.fromOptions(A)??F?.writeConcern;if($){if(D!=null)$=hU.WriteConcern.fromOptions({writeConcern:{...$,wtimeout:void 0,wtimeoutMS:void 0}});B.writeConcern=$}}B.timeoutMS=D;let Z=Ys.ReadPreference.fromOptions(A)??F?.readPreference;if(Z)B.readPreference=Z;if(X?.explicit&&X?.timeoutContext!=null&&A?.timeoutMS!=null)throw new N2.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return B}function pU(F,A){F=Array.isArray(F)?new Set(F):F,A=Array.isArray(A)?new Set(A):A;for(let B of A)if(!F.has(B))return!1;return!0}function ks(F){return F[vA.LEGACY_HELLO_COMMAND]||F.hello?!0:!1}function us(F,A){let B=new Set(F);for(let D of A)B.delete(D);return B}var Os=(F,A)=>Object.prototype.hasOwnProperty.call(F,A);function Ss(F,A=void 0){if(!OJ(F))return!1;let B=F.constructor;if(B&&B.prototype){if(!OJ(B.prototype))return!1;if(!Os(B.prototype,"isPrototypeOf"))return!1}if(A){let D=Object.keys(F);return pU(D,A)}return!0}class _J{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let F of this.nodes())yield F.value}*nodes(){let F=this.head.next;while(F!==this.head){let{next:A}=F;yield F,F=A}}push(F){this.count+=1;let A={next:this.head,prev:this.head.prev,value:F};this.head.prev.next=A,this.head.prev=A}pushMany(F){for(let A of F)this.push(A)}unshift(F){this.count+=1;let A={next:this.head.next,prev:this.head,value:F};this.head.next.prev=A,this.head.next=A}remove(F){if(F===this.head||this.length===0)return null;this.count-=1;let{prev:A,next:B}=F;return A.next=B,B.prev=A,F.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(F){for(let A of this.nodes())if(F(A.value))this.remove(A)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}}rU.List=_J;class iU{constructor(){this.buffers=new _J,this.totalByteLength=0}get length(){return this.totalByteLength}append(F){this.buffers.push(F),this.totalByteLength+=F.length}getInt32(){if(this.totalByteLength<4)return null;let F=this.buffers.first();if(F!=null&&F.byteLength>=4)return F.readInt32LE(0);let A=this.read(4),B=A.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(A),B}read(F){if(typeof F!=="number"||F<0)throw new N2.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(F>this.totalByteLength)return Buffer.alloc(0);let A=Buffer.allocUnsafe(F);for(let B=0;B<F;){let D=this.buffers.shift();if(D==null)break;let X=F-B,Z=Math.min(X,D.byteLength),J=D.subarray(0,Z);if(A.set(J,B),B+=Z,this.totalByteLength-=Z,Z<D.byteLength)this.buffers.unshift(D.subarray(Z))}return A}}rU.BufferPool=iU;class D5{constructor(F){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let A=F.split(" ").join("%20");if(A.endsWith(".sock")){this.socketPath=decodeURIComponent(A);return}let B=`iLoveJS://${A}`,D;try{D=new Xs.URL(B)}catch(Y){let $=new N2.MongoRuntimeError(`Unable to parse ${A} with URL`);throw $.cause=Y,$}let{hostname:X,port:Z}=D,J=decodeURIComponent(X).toLowerCase();if(J.startsWith("[")&&J.endsWith("]"))this.isIPv6=!0,J=J.substring(1,X.length-1);if(this.host=J.toLowerCase(),typeof Z==="number")this.port=Z;else if(typeof Z==="string"&&Z!=="")this.port=Number.parseInt(Z,10);else this.port=27017;if(this.port===0)throw new N2.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){if(typeof this.host==="string"){if(this.isIPv6)return`[${this.host}]:${this.port}`;return`${this.host}:${this.port}`}return`${this.socketPath}`}static fromString(F){return new D5(F)}static fromHostPort(F,A){if(F.includes(":"))F=`[${F}]`;return D5.fromString(`${F}:${A}`)}static fromSrvRecord({name:F,port:A}){return D5.fromHostPort(F,A)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let F=this.host??"",A=this.port??0;return{host:F,port:A}}}rU.HostAddress=D5;rU.DEFAULT_PK_FACTORY={createPk(){return new SJ.ObjectId}};rU.MONGODB_WARNING_CODE="MONGODB DRIVER";function nU(F){return process.emitWarning(F,{code:rU.MONGODB_WARNING_CODE})}var vU=new Set;function xs(F){if(!vU.has(F))return vU.add(F),nU(F)}function _s(F){return Object.values(F).join(", ")}function fs(F){if(!F)return!1;if(F.loadBalanced)return!0;if(F.description.logicalSessionTimeoutMinutes!=null){if(F.description.type!==$s.ServerType.Standalone)return!0}return!1}function gs(F,A=0){let B=Array.from(F);if(A>B.length)throw new N2.MongoRuntimeError("Limit must be less than the number of items");let D=B.length,X=A%B.length===0?1:B.length-A;while(D>X){let Z=Math.floor(Math.random()*D);D-=1;let J=B[D];B[D]=B[Z],B[Z]=J}return A%B.length===0?B:B.slice(X)}function bs(F){if(F.aggregate||F.count||F.distinct||F.find||F.geoNear)return!0;return!1}function ys(F,A){if(F==null&&A==null)return 0;if(F==null)return-1;if(A==null)return 1;return rU.ByteUtils.compare(F.id,A.id)}function aU(F){if(typeof F==="number")return Math.trunc(F);let A=Number.parseInt(String(F),10);return Number.isNaN(A)?null:A}function hs(F){let A=aU(F);return A!=null&&A>=0?A:null}function vs(F,A){let B=F.endsWith(".")?F.slice(0,F.length-1):F,D=A.endsWith(".")?A.slice(0,A.length-1):A,X=/^.*?\./,Z=D.split(".").length<3,J=`.${B.replace(X,"")}`,Y=Z?D:`.${D.replace(X,"")}`;if(!Y.startsWith("."))Y="."+Y;if(Z&&B.split(".").length<=D.split(".").length)throw new N2.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!J.endsWith(Y))throw new N2.MongoAPIError("Server record does not share hostname with parent URI")}function ms(F,A={}){return new Promise((B,D)=>{let X,Z=dU.get(F,A,(J)=>{J.setEncoding("utf8");let Y="";J.on("data",($)=>Y+=$),J.on("end",()=>{uJ.clearTimeout(X),B({status:J.statusCode,body:Y})})}).on("error",(J)=>{uJ.clearTimeout(X),D(J)}).end();X=uJ.setTimeout(()=>{Z.destroy(new N2.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function ds(F,A={}){return await new Promise((B,D)=>{let X={method:"GET",timeout:1e4,json:!0,...Ds.parse(F),...A},Z=dU.request(X,(J)=>{J.setEncoding("utf8");let Y="";J.on("data",($)=>{Y+=$}),J.once("end",()=>{if(A.json===!1){B(Y);return}try{let $=JSON.parse(Y);B($)}catch{D(new N2.MongoRuntimeError(`Invalid JSON response: "${Y}"`))}})});Z.once("timeout",()=>Z.destroy(new N2.MongoNetworkTimeoutError(`Network request to ${F} timed out after ${A.timeout} ms`))),Z.once("error",(J)=>D(J)),Z.end()})}rU.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;rU.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;rU.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";rU.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function cs(F,A){return A&&F.test(A.toLowerCase())?!0:!1}function fJ(){let F,A;return{promise:new Promise(function D(X,Z){F=X,A=Z}),resolve:F,reject:A}}function ls(F){return}rU.randomBytes=Zs.promisify(mU.randomBytes);async function ps(F,A,B){B?.signal?.throwIfAborted();let{promise:D,resolve:X,reject:Z}=fJ(),J=(G)=>X(G),Y=(G)=>Z(G),$=gJ(B?.signal,function(){Z(this.reason)});F.once(A,J).once("error",Y);try{return await D}finally{F.off(A,J),F.off("error",Y),$?.[rU.kDispose]()}}function is(F,A,B){if(B.forceServerObjectId??F.db.options?.forceServerObjectId??!1)return A;if(A._id==null)A._id=F.s.pkFactory.createPk();return A}async function ns(F,A){try{return await Bs.promises.access(F,A),!0}catch{return!1}}function as(F,A){if(F===0)return A;if(A===0)return F;return Math.min(F,A)}function ss(){return}function sU(F,A,B=!0){if(B){if(Buffer.isBuffer(A))A=SJ.deserialize(A);if(Buffer.isBuffer(F))throw new N2.MongoRuntimeError("Expected result of decryption to be deserialized BSON object")}if(!F||typeof F!=="object")return;for(let D of Object.keys(F)){let X=A[D];if(X&&X._bsontype==="Binary"&&X.sub_type===6){if(!F[vA.kDecoratedKeys])Object.defineProperty(F,vA.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1});F[vA.kDecoratedKeys].push(D);continue}sU(F[D],X,!1)}}rU.kDispose=Symbol.dispose??Symbol("dispose");function gJ(F,A){if(F==null)return;return F.addEventListener("abort",A,{once:!0}),{[rU.kDispose]:()=>F.removeEventListener("abort",A)}}async function ts(F,{signal:A}){if(A==null)return await F;let{promise:B,reject:D}=fJ(),X=A.aborted?D(A.reason):gJ(A,function(){D(this.reason)});try{return await Promise.race([F,B])}finally{X?.[rU.kDispose]()}}});var FV=z((oU)=>{Object.defineProperty(oU,"__esModule",{value:!0});oU.OnDemandDocument=void 0;var w1=$1(),J5={type:0,nameOffset:1,nameLength:2,offset:3,length:4};class mA{constructor(F,A=0,B=!1,D){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=F,this.offset=A,this.isArray=B,this.elements=D??w1.parseToElementsToArray(this.bson,A)}isElementName(F,A){let B=A[J5.nameLength],D=A[J5.nameOffset];if(F.length!==B)return!1;let X=D+B;for(let Z=D,J=0;J<F.length&&Z<X;J++,Z++)if(this.bson[Z]!==F.charCodeAt(J))return!1;return!0}getElement(F){let A=this.cache[F];if(A===!1)return null;if(A!=null)return A;if(typeof F==="number")if(this.isArray)if(F<this.elements.length){let D={element:this.elements[F],value:void 0};return this.cache[F]=D,this.indexFound[F]=!0,D}else return null;else return null;for(let B=0;B<this.elements.length;B++){let D=this.elements[B];if(!(B in this.indexFound)&&this.isElementName(F,D)){let X={element:D,value:void 0};return this.cache[F]=X,this.indexFound[B]=!0,X}}return this.cache[F]=!1,null}toJSValue(F,A){let B=F[J5.type],D=F[J5.offset],X=F[J5.length];if(A!==B)return null;switch(A){case w1.BSONType.null:case w1.BSONType.undefined:return null;case w1.BSONType.double:return w1.getFloat64LE(this.bson,D);case w1.BSONType.int:return w1.getInt32LE(this.bson,D);case w1.BSONType.long:return w1.getBigInt64LE(this.bson,D);case w1.BSONType.bool:return Boolean(this.bson[D]);case w1.BSONType.objectId:return new w1.ObjectId(this.bson.subarray(D,D+12));case w1.BSONType.timestamp:return new w1.Timestamp(w1.getBigInt64LE(this.bson,D));case w1.BSONType.string:return w1.toUTF8(this.bson,D+4,D+X-1,!1);case w1.BSONType.binData:{let Z=w1.getInt32LE(this.bson,D),J=this.bson[D+4];if(J===2){let Y=w1.getInt32LE(this.bson,D+1+4);if(Y<0)throw new w1.BSONError("Negative binary type element size found for subtype 0x02");if(Y>Z-4)throw new w1.BSONError("Binary type with subtype 0x02 contains too long binary size");if(Y<Z-4)throw new w1.BSONError("Binary type with subtype 0x02 contains too short binary size");return new w1.Binary(this.bson.subarray(D+1+4+4,D+1+4+4+Y),2)}return new w1.Binary(this.bson.subarray(D+1+4,D+1+4+Z),J)}case w1.BSONType.date:return new Date(Number(w1.getBigInt64LE(this.bson,D)));case w1.BSONType.object:return new mA(this.bson,D);case w1.BSONType.array:return new mA(this.bson,D,!0);default:throw new w1.BSONError(`Unsupported BSON type: ${A}`)}}size(){return this.elements.length}has(F){let A=this.cache[F];if(A===!1)return!1;if(A!=null)return!0;return this.getElement(F)!=null}get(F,A,B){let D=this.getElement(F);if(D==null)if(B===!0)throw new w1.BSONError(`BSON element "${F}" is missing`);else return null;if(D.value==null){let X=this.toJSValue(D.element,A);if(X==null)if(B===!0)throw new w1.BSONError(`BSON element "${F}" is missing`);else return null;D.value=X}return D.value}getNumber(F,A){let B=this.get(F,w1.BSONType.bool),D=B==null?null:B?1:0,X=this.get(F,w1.BSONType.long),Z=X==null?null:Number(X),J=D??Z??this.get(F,w1.BSONType.int)??this.get(F,w1.BSONType.double);if(A===!0&&J==null)throw new w1.BSONError(`BSON element "${F}" is missing`);return J}toObject(F){return w1.deserialize(this.bson,{...F,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let F=w1.getInt32LE(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+F)}}oU.OnDemandDocument=mA});var f1=z((ZV)=>{Object.defineProperty(ZV,"__esModule",{value:!0});ZV.ClientBulkWriteCursorResponse=ZV.ExplainedCursorResponse=ZV.CursorResponse=ZV.MongoDBResponse=void 0;ZV.isErrorResponse=BV;var P1=$1(),F9=l(),AV=s(),Xt=FV(),dA={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function BV(F,A){for(let B=0;B<A.length;B++){let D=A[B];if(D[dA.nameLength]===2){let X=D[dA.nameOffset];if(F[X]===111&&F[X+1]===107){let Z=D[dA.offset],J=D[dA.length];for(let Y=Z;Y<Z+J;Y++)if(F[Y]!==0)return!1;return!0}}}return!0}class G7 extends Xt.OnDemandDocument{get(F,A,B){try{return super.get(F,A,B)}catch(D){throw new F9.MongoUnexpectedServerResponseError(D.message,{cause:D})}}static is(F){return F instanceof G7}static make(F){let A=P1.parseToElementsToArray(F,0);return BV(F,A)?new G7(F,0,!1,A):new this(F,0,!1,A)}static{this.empty=new G7(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]))}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===F9.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",P1.BSONType.object)?.getNumber("code")===F9.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let B=this.get("writeErrors",P1.BSONType.array);if(B?.size()){for(let D=0;D<B.size();D++)if(B.get(D,P1.BSONType.object)?.getNumber("code")===F9.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",P1.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",P1.BSONType.object)?.get("atClusterTime",P1.BSONType.timestamp)??this.get("atClusterTime",P1.BSONType.timestamp)}get operationTime(){return this.get("operationTime",P1.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",P1.BSONType.string)}get errmsg(){return this.get("errmsg",P1.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let F=this.get("$clusterTime",P1.BSONType.object);if(F==null)return this.clusterTime=null,null;let A=F.get("clusterTime",P1.BSONType.timestamp,!0),B=F.get("signature",P1.BSONType.object)?.toObject();this.clusterTime={clusterTime:A,signature:B}}return this.clusterTime??null}toObject(F){let A={...P1.pluckBSONSerializeOptions(F??{}),validation:P1.parseUtf8ValidationOption(F)};return super.toObject(A)}}ZV.MongoDBResponse=G7;class A9 extends G7{constructor(){super(...arguments);this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new A9(P1.serialize({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(F){return F instanceof A9||F===A9.emptyGetMore}get cursor(){return this.get("cursor",P1.BSONType.object,!0)}get id(){try{return P1.Long.fromBigInt(this.cursor.get("id",P1.BSONType.long,!0))}catch(F){throw new F9.MongoUnexpectedServerResponseError(F.message,{cause:F})}}get ns(){let F=this.cursor.get("ns",P1.BSONType.string);if(F!=null)return AV.ns(F);return null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let F=this.encryptedResponse?.get("cursor",P1.BSONType.object);if(F?.has("firstBatch"))this._encryptedBatch=F.get("firstBatch",P1.BSONType.array,!0);else if(F?.has("nextBatch"))this._encryptedBatch=F.get("nextBatch",P1.BSONType.array,!0);else throw new F9.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let F=this.cursor;if(F.has("firstBatch"))this._batch=F.get("firstBatch",P1.BSONType.array,!0);else if(F.has("nextBatch"))this._batch=F.get("nextBatch",P1.BSONType.array,!0);else throw new F9.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",P1.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(F){if(this.iterated>=this.batchSize)return null;let A=this.batch.get(this.iterated,P1.BSONType.object,!0)??null,B=this.encryptedBatch?.get(this.iterated,P1.BSONType.object,!0)??null;if(this.iterated+=1,F?.raw)return A.toBytes();else{let D=A.toObject(F);if(B)AV.decorateDecryptionResult(D,B.toObject(F),!0);return D}}clear(){this.iterated=this.batchSize}}ZV.CursorResponse=A9;class DV extends A9{constructor(){super(...arguments);this.isExplain=!0,this._length=1}get id(){return P1.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(F){if(this._length===0)return null;return this._length-=1,this.toObject(F)}}ZV.ExplainedCursorResponse=DV;class XV extends A9{get insertedCount(){return this.get("nInserted",P1.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",P1.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",P1.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",P1.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",P1.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",P1.BSONType.object,!1)}}ZV.ClientBulkWriteCursorResponse=XV});var Y5=z((YV)=>{Object.defineProperty(YV,"__esModule",{value:!0});YV.Explain=YV.ExplainVerbosity=void 0;YV.validateExplainTimeoutOptions=Et;YV.decorateWithExplain=Ct;var Gt=l();YV.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});class cA{constructor(F,A){if(typeof F==="boolean")this.verbosity=F?YV.ExplainVerbosity.allPlansExecution:YV.ExplainVerbosity.queryPlanner;else this.verbosity=F;this.maxTimeMS=A}static fromOptions({explain:F}={}){if(F==null)return;if(typeof F==="boolean"||typeof F==="string")return new cA(F);let{verbosity:A,maxTimeMS:B}=F;return new cA(A,B)}}YV.Explain=cA;function Et(F,A){let{maxTimeMS:B,timeoutMS:D}=F;if(D!=null&&(B!=null||A?.maxTimeMS!=null))throw new Gt.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function Ct(F,A){let{verbosity:B,maxTimeMS:D}=A,X={explain:F,verbosity:B};if(typeof D==="number")X.maxTimeMS=D;return X}});var h1=z((EV)=>{Object.defineProperty(EV,"__esModule",{value:!0});EV.AbstractOperation=EV.Aspect=void 0;EV.defineAspects=zt;var qt=$1(),yJ=f0();EV.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};class GV{constructor(F={}){this.readPreference=this.hasAspect(EV.Aspect.WRITE_OPERATION)?yJ.ReadPreference.primary:yJ.ReadPreference.fromOptions(F)??yJ.ReadPreference.primary,this.bsonOptions=qt.resolveBSONOptions(F),this._session=F.session!=null?F.session:void 0,this.options=F,this.bypassPinningCheck=!!F.bypassPinningCheck}hasAspect(F){let A=this.constructor;if(A.aspects==null)return!1;return A.aspects.has(F)}get session(){return this._session}set session(F){this._session=F}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(EV.Aspect.RETRYABLE)&&this.hasAspect(EV.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(EV.Aspect.RETRYABLE)&&this.hasAspect(EV.Aspect.WRITE_OPERATION)}handleOk(F){return F.toObject(this.bsonOptions)}handleError(F){throw F}}EV.AbstractOperation=GV;function zt(F,A){if(!Array.isArray(A)&&!(A instanceof Set))A=[A];return A=new Set(A),Object.defineProperty(F,"aspects",{value:A,writable:!1}),A}});var G0=z((qV)=>{Object.defineProperty(qV,"__esModule",{value:!0});qV.CommandOperation=void 0;var Kt=P3(),Ut=l(),hJ=Y5(),Vt=_6(),lA=s(),WV=P2(),B9=h1();class HV extends B9.AbstractOperation{constructor(F,A){super(A);this.options=A??{};let B=A?.dbName||A?.authdb;if(B)this.ns=new lA.MongoDBNamespace(B,"$cmd");else this.ns=F?F.s.namespace.withCollection("$cmd"):new lA.MongoDBNamespace("admin","$cmd");if(this.readConcern=Vt.ReadConcern.fromOptions(A),this.writeConcern=WV.WriteConcern.fromOptions(A),this.hasAspect(B9.Aspect.EXPLAINABLE)){if(this.explain=hJ.Explain.fromOptions(A),this.explain)hJ.validateExplainTimeoutOptions(this.options,this.explain)}else if(A?.explain!=null)throw new Ut.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){if(this.hasAspect(B9.Aspect.EXPLAINABLE))return this.explain==null;return super.canRetryWrite}buildOptions(F){return{...this.options,...this.bsonOptions,timeoutContext:F,readPreference:this.readPreference,session:this.session}}buildCommand(F,A){let B=this.buildCommandDocument(F,A),D=this.session&&this.session.inTransaction();if(this.readConcern&&lA.commandSupportsReadConcern(B)&&!D)Object.assign(B,{readConcern:this.readConcern});if(this.writeConcern&&this.hasAspect(B9.Aspect.WRITE_OPERATION)&&!D)WV.WriteConcern.apply(B,this.writeConcern);if(this.options.collation&&typeof this.options.collation==="object"&&!this.hasAspect(B9.Aspect.SKIP_COLLATION))Object.assign(B,{collation:this.options.collation});if(typeof this.options.maxTimeMS==="number")B.maxTimeMS=this.options.maxTimeMS;if(this.options.rawData!=null&&this.hasAspect(B9.Aspect.SUPPORTS_RAW_DATA)&&lA.maxWireVersion(F)>=Kt.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION)B.rawData=this.options.rawData;if(this.hasAspect(B9.Aspect.EXPLAINABLE)&&this.explain)return hJ.decorateWithExplain(B,this.explain);return B}}qV.CommandOperation=HV});var cJ=z((QV)=>{Object.defineProperty(QV,"__esModule",{value:!0});QV.DeleteManyOperation=QV.DeleteOneOperation=QV.DeleteOperation=void 0;QV.makeDeleteStatement=dJ;var Lt=f1(),$5=l(),wt=s(),Rt=G0(),M2=h1();class G5 extends Rt.CommandOperation{constructor(F,A,B){super(void 0,B);this.SERVER_COMMAND_RESPONSE_TYPE=Lt.MongoDBResponse,this.options=B,this.ns=F,this.statements=A}get commandName(){return"delete"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((F)=>F.limit!=null?F.limit>0:!0)}buildCommandDocument(F,A){let B=this.options,D=typeof B.ordered==="boolean"?B.ordered:!0,X={delete:this.ns.collection,deletes:this.statements,ordered:D};if(B.let)X.let=B.let;if(B.comment!==void 0)X.comment=B.comment;if(this.writeConcern&&this.writeConcern.w===0&&wt.maxWireVersion(F)<9){if(this.statements.find((J)=>J.hint))throw new $5.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+")}return X}}QV.DeleteOperation=G5;class vJ extends G5{constructor(F,A,B){super(F,[dJ(A,{...B,limit:1})],B)}handleOk(F){let A=super.handleOk(F);if(this.explain)return A;if(A.code)throw new $5.MongoServerError(A);if(A.writeErrors)throw new $5.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:A.n}}}QV.DeleteOneOperation=vJ;class mJ extends G5{constructor(F,A,B){super(F,[dJ(A,B)],B)}handleOk(F){let A=super.handleOk(F);if(this.explain)return A;if(A.code)throw new $5.MongoServerError(A);if(A.writeErrors)throw new $5.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:A.n}}}QV.DeleteManyOperation=mJ;function dJ(F,A){let B={q:F,limit:typeof A.limit==="number"?A.limit:0};if(A.collation)B.collation=A.collation;if(A.hint)B.hint=A.hint;return B}M2.defineAspects(G5,[M2.Aspect.RETRYABLE,M2.Aspect.WRITE_OPERATION,M2.Aspect.SUPPORTS_RAW_DATA]);M2.defineAspects(vJ,[M2.Aspect.RETRYABLE,M2.Aspect.WRITE_OPERATION,M2.Aspect.EXPLAINABLE,M2.Aspect.SKIP_COLLATION,M2.Aspect.SUPPORTS_RAW_DATA]);M2.defineAspects(mJ,[M2.Aspect.WRITE_OPERATION,M2.Aspect.EXPLAINABLE,M2.Aspect.SKIP_COLLATION,M2.Aspect.SUPPORTS_RAW_DATA])});var C5=z((LV)=>{Object.defineProperty(LV,"__esModule",{value:!0});LV.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;LV.writableServerSelector=jt;LV.sameServerSelector=Tt;LV.secondaryWritableServerSelector=kt;LV.readPreferenceServerSelector=pJ;var lJ=l(),E5=f0(),A6=F6(),Mt=1e4,UV=90;LV.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function jt(){return function F(A,B){return pA(A,B.filter((D)=>D.isWritable))}}function Tt(F){return function A(B,D){if(!F)return[];return D.filter((X)=>{return X.address===F.address&&X.type!==A6.ServerType.Unknown})}}function kt(F,A){if(!A||!F||F&&F<LV.MIN_SECONDARY_WRITE_WIRE_VERSION)return pJ(E5.ReadPreference.primary);return pJ(A)}function ut(F,A,B){if(F.maxStalenessSeconds==null||F.maxStalenessSeconds<0)return B;let D=F.maxStalenessSeconds,X=(A.heartbeatFrequencyMS+Mt)/1000;if(D<X)throw new lJ.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${X} seconds`);if(D<UV)throw new lJ.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${UV} seconds`);if(A.type===A6.TopologyType.ReplicaSetWithPrimary){let Z=Array.from(A.servers.values()).filter(iA)[0];return B.reduce((J,Y)=>{let G=(Y.lastUpdateTime-Y.lastWriteDate-(Z.lastUpdateTime-Z.lastWriteDate)+A.heartbeatFrequencyMS)/1000,E=F.maxStalenessSeconds??0;if(G<=E)J.push(Y);return J},[])}if(A.type===A6.TopologyType.ReplicaSetNoPrimary){if(B.length===0)return B;let Z=B.reduce((J,Y)=>Y.lastWriteDate>J.lastWriteDate?Y:J);return B.reduce((J,Y)=>{let G=(Z.lastWriteDate-Y.lastWriteDate+A.heartbeatFrequencyMS)/1000,E=F.maxStalenessSeconds??0;if(G<=E)J.push(Y);return J},[])}return B}function Ot(F,A){let B=Object.keys(F),D=Object.keys(A);for(let X=0;X<B.length;++X){let Z=B[X];if(D.indexOf(Z)===-1||A[Z]!==F[Z])return!1}return!0}function St(F,A){if(F.tags==null||Array.isArray(F.tags)&&F.tags.length===0)return A;for(let B=0;B<F.tags.length;++B){let D=F.tags[B],X=A.reduce((Z,J)=>{if(Ot(D,J.tags))Z.push(J);return Z},[]);if(X.length)return X}return[]}function pA(F,A){let B=A.reduce((X,Z)=>Math.min(Z.roundTripTime,X),1/0),D=B+F.localThresholdMS;return A.reduce((X,Z)=>{if(Z.roundTripTime<=D&&Z.roundTripTime>=B)X.push(Z);return X},[])}function iA(F){return F.type===A6.ServerType.RSPrimary}function xt(F){return F.type===A6.ServerType.RSSecondary}function _t(F){return F.type===A6.ServerType.RSSecondary||F.type===A6.ServerType.RSPrimary}function VV(F){return F.type!==A6.ServerType.Unknown}function ft(F){return F.type===A6.ServerType.LoadBalancer}function pJ(F){if(!F.isValid())throw new lJ.MongoInvalidArgumentError("Invalid read preference specified");return function A(B,D,X=[]){if(B.type===A6.TopologyType.LoadBalanced)return D.filter(ft);if(B.type===A6.TopologyType.Unknown)return[];if(B.type===A6.TopologyType.Single)return pA(B,D.filter(VV));if(B.type===A6.TopologyType.Sharded){let $=D.filter((E)=>{return!X.includes(E)}),G=$.length>0?$:X;return pA(B,G.filter(VV))}let Z=F.mode;if(Z===E5.ReadPreference.PRIMARY)return D.filter(iA);if(Z===E5.ReadPreference.PRIMARY_PREFERRED){let $=D.filter(iA);if($.length)return $}let J=Z===E5.ReadPreference.NEAREST?_t:xt,Y=pA(B,St(F,ut(F,B,D.filter(J))));if(Z===E5.ReadPreference.SECONDARY_PREFERRED&&Y.length===0)return D.filter(iA);return Y}}});var g0=z((RV)=>{Object.defineProperty(RV,"__esModule",{value:!0});RV.LegacyTimeoutContext=RV.CSOTTimeoutContext=RV.TimeoutContext=RV.Timeout=RV.TimeoutError=void 0;var wV=m("timers"),D9=l(),nJ=s();class nA extends Error{get name(){return"TimeoutError"}constructor(F,A){super(F,A);this.duration=A.duration}static is(F){return F!=null&&typeof F==="object"&&"name"in F&&F.name==="TimeoutError"}}RV.TimeoutError=nA;class B6 extends Promise{get remainingTime(){if(this.timedOut)return 0;if(this.duration===0)return 1/0;return this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(F=()=>null,A){let B=A?.duration??0,D=!!A?.unref,X=A?.rejection;if(B<0)throw new D9.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let Z;super((J,Y)=>{Z=Y,F(nJ.noop,Y)});if(this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=B,this.start=Math.trunc(performance.now()),X==null&&this.duration>0){if(this.id=wV.setTimeout(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,Z(new nA(`Expired after ${B}ms`,{duration:B}))},this.duration),typeof this.id.unref==="function"&&D)this.id.unref()}else if(X!=null)this.ended=Math.trunc(performance.now()),this.timedOut=!0,Z(X)}clear(){wV.clearTimeout(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,nJ.squashError),new nA("Timed out",{duration:this.duration})}static expires(F,A){return new B6(void 0,{duration:F,unref:A})}static reject(F){return new B6(void 0,{duration:0,unref:!0,rejection:F})}}RV.Timeout=B6;function vt(F){return F!=null&&typeof F==="object"&&"serverSelectionTimeoutMS"in F&&typeof F.serverSelectionTimeoutMS==="number"&&"waitQueueTimeoutMS"in F&&typeof F.waitQueueTimeoutMS==="number"}function mt(F){return F!=null&&typeof F==="object"&&"serverSelectionTimeoutMS"in F&&typeof F.serverSelectionTimeoutMS==="number"&&"timeoutMS"in F&&typeof F.timeoutMS==="number"}class aA{static create(F){if(F.session?.timeoutContext!=null)return F.session?.timeoutContext;if(mt(F))return new W5(F);else if(vt(F))return new sA(F);else throw new D9.MongoRuntimeError("Unrecognized options")}}RV.TimeoutContext=aA;class W5 extends aA{constructor(F){super();this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=F.timeoutMS,this.serverSelectionTimeoutMS=F.serverSelectionTimeoutMS,this.socketTimeoutMS=F.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let F=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-F}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!=="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:F,serverSelectionTimeoutMS:A}=this;if(F<=0)return B6.reject(new D9.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));if(A!==0&&nJ.csotMin(F,A)===A)this._serverSelectionTimeout=B6.expires(A);else if(F>0&&Number.isFinite(F))this._serverSelectionTimeout=B6.expires(F);else this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!=="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout==="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new D9.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:F}=this;if(!Number.isFinite(F))return null;if(F>0)return B6.expires(F);return B6.reject(new D9.MongoOperationTimeoutError("Timed out before socket write"))}get timeoutForSocketRead(){let{remainingTimeMS:F}=this;if(!Number.isFinite(F))return null;if(F>0)return B6.expires(F);return B6.reject(new D9.MongoOperationTimeoutError("Timed out before socket read"))}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(F){let{remainingTimeMS:A}=this;if(A<=0)throw new D9.MongoOperationTimeoutError(F??`Expired after ${this.timeoutMS}ms`);return A}clone(){let F=new W5({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return F.start=this.start,F}refreshed(){return new W5(this)}addMaxTimeMSToCommand(F,A){if(A.omitMaxTimeMS)return;let B=this.remainingTimeMS-this.minRoundTripTime;if(B>0&&Number.isFinite(B))F.maxTimeMS=B}getSocketTimeoutMS(){return 0}}RV.CSOTTimeoutContext=W5;class sA extends aA{constructor(F){super();this.options=F,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){if(this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0)return B6.expires(this.options.serverSelectionTimeoutMS);return null}get connectionCheckoutTimeout(){if(this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0)return B6.expires(this.options.waitQueueTimeoutMS);return null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){return}clear(){return}get maxTimeMS(){return null}refreshed(){return new sA(this.options)}addMaxTimeMSToCommand(F,A){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}}RV.LegacyTimeoutContext=sA});var H5=z((PV)=>{Object.defineProperty(PV,"__esModule",{value:!0});PV.AggregateOperation=PV.DB_AGGREGATE_COLLECTION=void 0;var aJ=f1(),it=l(),nt=P2(),at=G0(),C7=h1();PV.DB_AGGREGATE_COLLECTION=1;class sJ extends at.CommandOperation{constructor(F,A,B){super(void 0,{...B,dbName:F.db});if(this.SERVER_COMMAND_RESPONSE_TYPE=aJ.CursorResponse,this.options={...B},this.target=F.collection||PV.DB_AGGREGATE_COLLECTION,this.pipeline=A,this.hasWriteStage=!1,typeof B?.out==="string")this.pipeline=this.pipeline.concat({$out:B.out}),this.hasWriteStage=!0;else if(A.length>0){let D=A[A.length-1];if(D.$out||D.$merge)this.hasWriteStage=!0}if(!this.hasWriteStage)delete this.options.writeConcern;if(B?.cursor!=null&&typeof B.cursor!=="object")throw new it.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?aJ.ExplainedCursorResponse:aJ.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(F){this.pipeline.push(F)}buildCommandDocument(){let F=this.options,A={aggregate:this.target,pipeline:this.pipeline};if(this.hasWriteStage&&this.writeConcern)nt.WriteConcern.apply(A,this.writeConcern);if(F.bypassDocumentValidation===!0)A.bypassDocumentValidation=F.bypassDocumentValidation;if(typeof F.allowDiskUse==="boolean")A.allowDiskUse=F.allowDiskUse;if(F.hint)A.hint=F.hint;if(F.let)A.let=F.let;if(F.comment!==void 0)A.comment=F.comment;if(A.cursor=F.cursor||{},F.batchSize&&!this.hasWriteStage)A.cursor.batchSize=F.batchSize;return A}handleOk(F){return F}}PV.AggregateOperation=sJ;C7.defineAspects(sJ,[C7.Aspect.READ_OPERATION,C7.Aspect.RETRYABLE,C7.Aspect.EXPLAINABLE,C7.Aspect.CURSOR_CREATING,C7.Aspect.SUPPORTS_RAW_DATA])});var d0=z((OV)=>{Object.defineProperty(OV,"__esModule",{value:!0});OV.executeOperation=et;OV.autoConnect=uV;var st=P3(),W2=l(),jV=f0(),TV=C5(),rt=g0(),rA=s(),tt=H5(),N3=h1(),ot=W2.MONGODB_ERROR_CODES.IllegalOperation,kV="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function et(F,A,B){if(!(A instanceof N3.AbstractOperation))throw new W2.MongoRuntimeError("This method requires a valid operation instance");let D=F.topology==null?await rA.abortable(uV(F),A.options):F.topology,X=A.session,Z;if(X==null)Z=Symbol(),X=F.startSession({owner:Z,explicit:!1});else if(X.hasEnded)throw new W2.MongoExpiredSessionError("Use of expired sessions is not permitted");else if(X.snapshotEnabled&&rA.maxWireVersion(D)<st.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION)throw new W2.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");else if(X.client!==F)throw new W2.MongoInvalidArgumentError("ClientSession must be from the same MongoClient");A.session??=X;let J=A.readPreference??jV.ReadPreference.primary,Y=!!X?.inTransaction(),$=A.hasAspect(N3.Aspect.READ_OPERATION);if(Y&&!J.equals(jV.ReadPreference.primary)&&($||A.commandName==="runCommand"))throw new W2.MongoTransactionError(`Read preference in a transaction must be primary, not: ${J.mode}`);if(X?.isPinned&&X.transaction.isCommitted&&!A.bypassPinningCheck)X.unpin();B??=rt.TimeoutContext.create({session:X,serverSelectionTimeoutMS:F.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.s.options.waitQueueTimeoutMS,timeoutMS:A.options.timeoutMS});try{return await Fo(A,{topology:D,timeoutContext:B,session:X,readPreference:J})}finally{if(X?.owner!=null&&X.owner===Z)await X.endSession()}}async function uV(F){if(F.topology==null){if(F.s.hasBeenClosed)throw new W2.MongoNotConnectedError("Client must be connected before running operations");F.s.options.__skipPingOnConnect=!0;try{if(await F.connect(),F.topology==null)throw new W2.MongoRuntimeError("client.connect did not create a topology but also did not throw");return F.topology}finally{delete F.s.options.__skipPingOnConnect}}return F.topology}async function Fo(F,{topology:A,timeoutContext:B,session:D,readPreference:X}){let Z;if(F.hasAspect(N3.Aspect.MUST_SELECT_SAME_SERVER))Z=TV.sameServerSelector(F.server?.description);else if(F instanceof tt.AggregateOperation&&F.hasWriteStage)Z=TV.secondaryWritableServerSelector(A.commonWireVersion,X);else Z=X;let J=await A.selectServer(Z,{session:D,operationName:F.commandName,timeoutContext:B,signal:F.options.signal}),Y=F.hasAspect(N3.Aspect.READ_OPERATION),$=F.hasAspect(N3.Aspect.WRITE_OPERATION),G=D?.inTransaction()??!1,E=A.s.options.retryReads&&!G&&F.canRetryRead,C=A.s.options.retryWrites&&!G&&rA.supportsRetryableWrites(J)&&F.canRetryWrite,W=F.hasAspect(N3.Aspect.RETRYABLE)&&D!=null&&(Y&&E||$&&C);if($&&C&&D!=null)F.options.willRetryWrite=!0,D.incrementTransactionNumber();let H=W?B.csotEnabled()?1/0:2:1,q,Q;for(let K=0;K<H;K++){if(q){if($&&q.code===ot)throw new W2.MongoServerError({message:kV,errmsg:kV,originalError:q});if(F.hasAspect(N3.Aspect.COMMAND_BATCHING)&&!F.canRetryWrite)throw q;if($&&!W2.isRetryableWriteError(q))throw q;if(Y&&!W2.isRetryableReadError(q))throw q;if(q instanceof W2.MongoNetworkError&&F.hasAspect(N3.Aspect.CURSOR_CREATING)&&D!=null&&D.isPinned&&!D.inTransaction())D.unpin({force:!0,forceClear:!0});if(J=await A.selectServer(Z,{session:D,operationName:F.commandName,previousServer:Q,signal:F.options.signal}),$&&!rA.supportsRetryableWrites(J))throw new W2.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}F.server=J;try{if(K>0&&F.hasAspect(N3.Aspect.COMMAND_BATCHING))F.resetBatch();try{let U=await J.command(F,B);return F.handleOk(U)}catch(U){return F.handleError(U)}}catch(U){if(!(U instanceof W2.MongoError))throw U;if(q!=null&&U.hasErrorLabel(W2.MongoErrorLabel.NoWritesPerformed))throw q;Q=J.description,q=U,B.clear()}}throw q??new W2.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var tJ=z((xV)=>{Object.defineProperty(xV,"__esModule",{value:!0});xV.InsertOneOperation=xV.InsertOperation=void 0;var Do=f1(),SV=l(),Xo=s(),Zo=G0(),D4=h1();class tA extends Zo.CommandOperation{constructor(F,A,B){super(void 0,B);this.SERVER_COMMAND_RESPONSE_TYPE=Do.MongoDBResponse,this.options={...B,checkKeys:B.checkKeys??!1},this.ns=F,this.documents=A}get commandName(){return"insert"}buildCommandDocument(F,A){let B=this.options??{},D=typeof B.ordered==="boolean"?B.ordered:!0,X={insert:this.ns.collection,documents:this.documents,ordered:D};if(typeof B.bypassDocumentValidation==="boolean")X.bypassDocumentValidation=B.bypassDocumentValidation;if(B.comment!==void 0)X.comment=B.comment;return X}}xV.InsertOperation=tA;class rJ extends tA{constructor(F,A,B){super(F.s.namespace,[Xo.maybeAddIdToDocuments(F,A,B)],B)}handleOk(F){let A=super.handleOk(F);if(A.code)throw new SV.MongoServerError(A);if(A.writeErrors)throw new SV.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}}xV.InsertOneOperation=rJ;D4.defineAspects(tA,[D4.Aspect.RETRYABLE,D4.Aspect.WRITE_OPERATION,D4.Aspect.SUPPORTS_RAW_DATA]);D4.defineAspects(rJ,[D4.Aspect.RETRYABLE,D4.Aspect.WRITE_OPERATION,D4.Aspect.SUPPORTS_RAW_DATA])});var H7=z((gV)=>{Object.defineProperty(gV,"__esModule",{value:!0});gV.formatSort=Ko;var fV=l();function W7(F=1){let A=`${F}`.toLowerCase();if(Yo(F))return F;switch(A){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new fV.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(F)}`)}}function Yo(F){return typeof F==="object"&&F!=null&&"$meta"in F&&typeof F.$meta==="string"}function $o(F){if(Array.isArray(F)&&F.length===2)try{return W7(F[1]),!0}catch{return!1}return!1}function Go(F){return Array.isArray(F)&&Array.isArray(F[0])}function Eo(F){return F instanceof Map&&F.size>0}function Co(F){return Array.isArray(F)}function Wo(F){return new Map([[`${F[0]}`,W7([F[1]])]])}function Ho(F){let A=F.map(([B,D])=>[`${B}`,W7(D)]);return new Map(A)}function qo(F){let A=F.map((B)=>[`${B}`,1]);return new Map(A)}function zo(F){let A=Object.entries(F).map(([B,D])=>[`${B}`,W7(D)]);return new Map(A)}function Qo(F){let A=Array.from(F).map(([B,D])=>[`${B}`,W7(D)]);return new Map(A)}function Ko(F,A){if(F==null)return;if(typeof F==="string")return new Map([[F,W7(A)]]);if(typeof F!=="object")throw new fV.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(F)} Sort must be a valid object`);if(!Co(F)){if(Eo(F))return Qo(F);if(Object.keys(F).length)return zo(F);return}if(!F.length)return;if(Go(F))return Ho(F);if($o(F))return Wo(F);return qo(F)}});var BY=z((bV)=>{Object.defineProperty(bV,"__esModule",{value:!0});bV.ReplaceOneOperation=bV.UpdateManyOperation=bV.UpdateOneOperation=bV.UpdateOperation=void 0;bV.makeUpdateStatement=oA;var Vo=f1(),g6=l(),Lo=H7(),oJ=s(),wo=G0(),R0=h1();class q7 extends wo.CommandOperation{constructor(F,A,B){super(void 0,B);this.SERVER_COMMAND_RESPONSE_TYPE=Vo.MongoDBResponse,this.options=B,this.ns=F,this.statements=A}get commandName(){return"update"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((F)=>F.multi==null||F.multi===!1)}buildCommandDocument(F,A){let B=this.options,D={update:this.ns.collection,updates:this.statements,ordered:B.ordered??!0};if(typeof B.bypassDocumentValidation==="boolean")D.bypassDocumentValidation=B.bypassDocumentValidation;if(B.let)D.let=B.let;if(B.comment!==void 0)D.comment=B.comment;return D}}bV.UpdateOperation=q7;class eJ extends q7{constructor(F,A,B,D){super(F,[oA(A,B,{...D,multi:!1})],D);if(!oJ.hasAtomicOperators(B,D))throw new g6.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new g6.MongoServerError(A);if(A.writeErrors)throw new g6.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}bV.UpdateOneOperation=eJ;class FY extends q7{constructor(F,A,B,D){super(F,[oA(A,B,{...D,multi:!0})],D);if(!oJ.hasAtomicOperators(B,D))throw new g6.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new g6.MongoServerError(A);if(A.writeErrors)throw new g6.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}bV.UpdateManyOperation=FY;class AY extends q7{constructor(F,A,B,D){super(F,[oA(A,B,{...D,multi:!1})],D);if(oJ.hasAtomicOperators(B))throw new g6.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new g6.MongoServerError(A);if(A.writeErrors)throw new g6.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}bV.ReplaceOneOperation=AY;function oA(F,A,B){if(F==null||typeof F!=="object")throw new g6.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(A==null||typeof A!=="object")throw new g6.MongoInvalidArgumentError("Document must be a valid JavaScript object");let D={q:F,u:A};if(typeof B.upsert==="boolean")D.upsert=B.upsert;if(B.multi)D.multi=B.multi;if(B.hint)D.hint=B.hint;if(B.arrayFilters)D.arrayFilters=B.arrayFilters;if(B.collation)D.collation=B.collation;if(!B.multi&&B.sort!=null)D.sort=Lo.formatSort(B.sort);return D}R0.defineAspects(q7,[R0.Aspect.RETRYABLE,R0.Aspect.WRITE_OPERATION,R0.Aspect.SKIP_COLLATION,R0.Aspect.SUPPORTS_RAW_DATA]);R0.defineAspects(eJ,[R0.Aspect.RETRYABLE,R0.Aspect.WRITE_OPERATION,R0.Aspect.EXPLAINABLE,R0.Aspect.SKIP_COLLATION,R0.Aspect.SUPPORTS_RAW_DATA]);R0.defineAspects(FY,[R0.Aspect.WRITE_OPERATION,R0.Aspect.EXPLAINABLE,R0.Aspect.SKIP_COLLATION,R0.Aspect.SUPPORTS_RAW_DATA]);R0.defineAspects(AY,[R0.Aspect.RETRYABLE,R0.Aspect.WRITE_OPERATION,R0.Aspect.SKIP_COLLATION,R0.Aspect.SUPPORTS_RAW_DATA])});var Q7=z((pV)=>{Object.defineProperty(pV,"__esModule",{value:!0});pV.BulkOperationBase=pV.FindOperators=pV.MongoBulkWriteError=pV.WriteError=pV.WriteConcernError=pV.BulkWriteResult=pV.Batch=pV.BatchType=void 0;pV.mergeBatchResults=DY;var mV=$1(),b0=l(),z5=cJ(),Mo=d0(),jo=tJ(),X9=BY(),To=g0(),D3=s(),hV=P2();pV.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});class dV{constructor(F,A){this.originalZeroIndex=A,this.currentIndex=0,this.originalIndexes=[],this.batchType=F,this.operations=[],this.size=0,this.sizeBytes=0}}pV.Batch=dV;class M3{static generateIdMap(F){let A={};for(let B of F)A[B.index]=B._id;return A}constructor(F,A){this.result=F,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=M3.generateIdMap(this.result.upserted),this.insertedIds=M3.generateIdMap(this.getSuccessfullyInsertedIds(F,A)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(F,A){if(F.writeErrors.length===0)return F.insertedIds;if(A)return F.insertedIds.slice(0,F.writeErrors[0].index);return F.insertedIds.filter(({index:B})=>!F.writeErrors.some((D)=>B===D.index))}getUpsertedIdAt(F){return this.result.upserted[F]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(F){return F<this.result.writeErrors.length?this.result.writeErrors[F]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return;else if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];else{let F="";for(let A=0;A<this.result.writeConcernErrors.length;A++){let B=this.result.writeConcernErrors[A];if(F=F+B.errmsg,A===0)F=F+" and "}return new Q5({errmsg:F,code:b0.MONGODB_ERROR_CODES.WriteConcernTimeout})}}toString(){return`BulkWriteResult(${mV.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}}pV.BulkWriteResult=M3;class Q5{constructor(F){this.serverError=F}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}}pV.WriteConcernError=Q5;class eA{constructor(F){this.err=F}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}}pV.WriteError=eA;function DY(F,A,B,D){if(B)D=B;else if(D&&D.result)D=D.result;if(D==null)return;if(D.ok===0&&A.ok===1){A.ok=0;let Z={index:0,code:D.code||0,errmsg:D.message,errInfo:D.errInfo,op:F.operations[0]};A.writeErrors.push(new eA(Z));return}else if(D.ok===0&&A.ok===0)return;if(lV(F)&&D.n)A.nInserted=A.nInserted+D.n;if(ZY(F)&&D.n)A.nRemoved=A.nRemoved+D.n;let X=0;if(Array.isArray(D.upserted)){X=D.upserted.length;for(let Z=0;Z<D.upserted.length;Z++)A.upserted.push({index:D.upserted[Z].index+F.originalZeroIndex,_id:D.upserted[Z]._id})}else if(D.upserted)X=1,A.upserted.push({index:F.originalZeroIndex,_id:D.upserted});if(XY(F)&&D.n){let Z=D.nModified;if(A.nUpserted=A.nUpserted+X,A.nMatched=A.nMatched+(D.n-X),typeof Z==="number")A.nModified=A.nModified+Z;else A.nModified=0}if(Array.isArray(D.writeErrors))for(let Z=0;Z<D.writeErrors.length;Z++){let J={index:F.originalIndexes[D.writeErrors[Z].index],code:D.writeErrors[Z].code,errmsg:D.writeErrors[Z].errmsg,errInfo:D.writeErrors[Z].errInfo,op:F.operations[D.writeErrors[Z].index]};A.writeErrors.push(new eA(J))}if(D.writeConcernError)A.writeConcernErrors.push(new Q5(D.writeConcernError))}async function vV(F,A){if(F.s.batches.length===0)return new M3(F.s.bulkResult,F.isOrdered);for(let D of F.s.batches){let X=D3.resolveOptions(F,{...A,ordered:F.isOrdered});if(X.bypassDocumentValidation!==!0)delete X.bypassDocumentValidation;if(F.s.bypassDocumentValidation===!0)X.bypassDocumentValidation=!0;if(F.s.checkKeys===!1)X.checkKeys=!1;if(F.retryWrites){if(XY(D))F.retryWrites=F.retryWrites&&!D.operations.some((G)=>G.multi);if(ZY(D))F.retryWrites=F.retryWrites&&!D.operations.some((G)=>G.limit===0)}let Z=lV(D)?new jo.InsertOperation(F.s.namespace,D.operations,X):XY(D)?new X9.UpdateOperation(F.s.namespace,D.operations,X):ZY(D)?new z5.DeleteOperation(F.s.namespace,D.operations,X):null;if(Z==null)throw new b0.MongoRuntimeError(`Unknown batchType: ${D.batchType}`);let J=null,Y;try{Y=await Mo.executeOperation(F.s.collection.client,Z,X.timeoutContext)}catch(G){J=G}if(J!=null)if(J instanceof b0.MongoWriteConcernError){DY(D,F.s.bulkResult,J,Y);let G=new M3(F.s.bulkResult,F.isOrdered);throw new z7({message:J.result.writeConcernError.errmsg,code:J.result.writeConcernError.code},G)}else throw new z7(J,new M3(F.s.bulkResult,F.isOrdered));DY(D,F.s.bulkResult,J,Y);let $=new M3(F.s.bulkResult,F.isOrdered);F.handleWriteError($)}F.s.batches.length=0;let B=new M3(F.s.bulkResult,F.isOrdered);return F.handleWriteError(B),B}class z7 extends b0.MongoServerError{constructor(F,A){super(F);if(this.writeErrors=[],F instanceof Q5)this.err=F;else if(!(F instanceof Error))this.message=F.message,this.code=F.code,this.writeErrors=F.writeErrors??[];this.result=A,Object.assign(this,F)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}}pV.MongoBulkWriteError=z7;class JY{constructor(F){this.bulkOperation=F}update(F){let A=q5(this.bulkOperation);return this.bulkOperation.addToOperationsList(pV.BatchType.UPDATE,X9.makeUpdateStatement(A.selector,F,{...A,multi:!0}))}updateOne(F){if(!D3.hasAtomicOperators(F,this.bulkOperation.bsonOptions))throw new b0.MongoInvalidArgumentError("Update document requires atomic operators");let A=q5(this.bulkOperation);return this.bulkOperation.addToOperationsList(pV.BatchType.UPDATE,X9.makeUpdateStatement(A.selector,F,{...A,multi:!1}))}replaceOne(F){if(D3.hasAtomicOperators(F))throw new b0.MongoInvalidArgumentError("Replacement document must not use atomic operators");let A=q5(this.bulkOperation);return this.bulkOperation.addToOperationsList(pV.BatchType.UPDATE,X9.makeUpdateStatement(A.selector,F,{...A,multi:!1}))}deleteOne(){let F=q5(this.bulkOperation);return this.bulkOperation.addToOperationsList(pV.BatchType.DELETE,z5.makeDeleteStatement(F.selector,{...F,limit:1}))}delete(){let F=q5(this.bulkOperation);return this.bulkOperation.addToOperationsList(pV.BatchType.DELETE,z5.makeDeleteStatement(F.selector,{...F,limit:0}))}upsert(){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.upsert=!0,this}collation(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.collation=F,this}arrayFilters(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.arrayFilters=F,this}hint(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.hint=F,this}}pV.FindOperators=JY;class cV{constructor(F,A,B){this.collection=F,this.retryWrites=F.db.options?.retryWrites,this.isOrdered=B;let D=D3.getTopology(F);A=A==null?{}:A;let X=F.s.namespace,Z=!1,J=void 0,Y=D.lastHello(),$=!!(D.s.options&&D.s.options.autoEncrypter),G=Y&&Y.maxBsonObjectSize?Y.maxBsonObjectSize:16777216,E=$?2097152:G,C=Y&&Y.maxWriteBatchSize?Y.maxWriteBatchSize:1000,W=(C-1).toString(10).length+2,H={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};if(this.s={bulkResult:H,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:hV.WriteConcern.fromOptions(A),maxBsonObjectSize:G,maxBatchSizeBytes:E,maxWriteBatchSize:C,maxKeySize:W,namespace:X,topology:D,options:A,bsonOptions:mV.resolveBSONOptions(A),currentOp:J,executed:Z,collection:F,err:void 0,checkKeys:typeof A.checkKeys==="boolean"?A.checkKeys:!1},A.bypassDocumentValidation===!0)this.s.bypassDocumentValidation=!0}insert(F){return D3.maybeAddIdToDocuments(this.collection,F,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(pV.BatchType.INSERT,F)}find(F){if(!F)throw new b0.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:F},new JY(this)}raw(F){if(F==null||typeof F!=="object")throw new b0.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in F){let A=this.shouldForceServerObjectId(),B=F.insertOne&&F.insertOne.document==null?F.insertOne:F.insertOne.document;return D3.maybeAddIdToDocuments(this.collection,B,{forceServerObjectId:A}),this.addToOperationsList(pV.BatchType.INSERT,B)}if("replaceOne"in F||"updateOne"in F||"updateMany"in F){if("replaceOne"in F){if("q"in F.replaceOne)throw new b0.MongoInvalidArgumentError("Raw operations are not allowed");let A=X9.makeUpdateStatement(F.replaceOne.filter,F.replaceOne.replacement,{...F.replaceOne,multi:!1});if(D3.hasAtomicOperators(A.u))throw new b0.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(pV.BatchType.UPDATE,A)}if("updateOne"in F){if("q"in F.updateOne)throw new b0.MongoInvalidArgumentError("Raw operations are not allowed");let A=X9.makeUpdateStatement(F.updateOne.filter,F.updateOne.update,{...F.updateOne,multi:!1});if(!D3.hasAtomicOperators(A.u,this.bsonOptions))throw new b0.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(pV.BatchType.UPDATE,A)}if("updateMany"in F){if("q"in F.updateMany)throw new b0.MongoInvalidArgumentError("Raw operations are not allowed");let A=X9.makeUpdateStatement(F.updateMany.filter,F.updateMany.update,{...F.updateMany,multi:!0});if(!D3.hasAtomicOperators(A.u,this.bsonOptions))throw new b0.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(pV.BatchType.UPDATE,A)}}if("deleteOne"in F){if("q"in F.deleteOne)throw new b0.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(pV.BatchType.DELETE,z5.makeDeleteStatement(F.deleteOne.filter,{...F.deleteOne,limit:1}))}if("deleteMany"in F){if("q"in F.deleteMany)throw new b0.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(pV.BatchType.DELETE,z5.makeDeleteStatement(F.deleteMany.filter,{...F.deleteMany,limit:0}))}throw new b0.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let F=[...this.s.batches];if(this.isOrdered){if(this.s.currentBatch)F.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)F.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)F.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)F.push(this.s.currentRemoveBatch)}return F}async execute(F={}){if(this.s.executed)throw new b0.MongoBatchReExecutionError;let A=hV.WriteConcern.fromOptions(F);if(A)this.s.writeConcern=A;if(this.isOrdered){if(this.s.currentBatch)this.s.batches.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)this.s.batches.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)this.s.batches.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)this.s.batches.push(this.s.currentRemoveBatch)}if(this.s.batches.length===0)throw new b0.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let B=D3.resolveOptions(this.collection,{...this.s.options,...F});if(B.timeoutContext??=To.TimeoutContext.create({session:B.session,timeoutMS:B.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),B.session==null)return await this.collection.client.withSession({explicit:!1},async(D)=>{return await vV(this,{...B,session:D})});return await vV(this,{...B})}handleWriteError(F){if(this.s.bulkResult.writeErrors.length>0){let B=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new z7({message:B,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},F)}let A=F.getWriteConcernError();if(A)throw new z7(A,F)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}}pV.BulkOperationBase=cV;function lV(F){return F.batchType===pV.BatchType.INSERT}function XY(F){return F.batchType===pV.BatchType.UPDATE}function ZY(F){return F.batchType===pV.BatchType.DELETE}function q5(F){let{currentOp:A}=F.s;if(F.s.currentOp=void 0,!A)A={};return A}});var aV=z((yw1,nV)=>{var go=Q7().BulkWriteResult;nV.exports=go});var K5=z((sV,rV)=>{/*!
 * Connection states
 */var j2=rV.exports=sV=Object.create(null);j2[0]="disconnected";j2[1]="connected";j2[2]="connecting";j2[3]="disconnecting";j2[99]="uninitialized";j2.disconnected=0;j2.connected=1;j2.connecting=2;j2.disconnecting=3;j2.uninitialized=99});var X4=z((hw1,tV)=>{/*!
 * Centralize this so we can more easily work around issues with people
 * stubbing out `process.nextTick()` in tests using sinon:
 * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
 * See gh-6074
 */var bo=typeof process!=="undefined"&&typeof process.nextTick==="function"?process.nextTick.bind(process):(F)=>setTimeout(F,0);tV.exports=function F(A){return bo(A)}});var YY=z((vw1,eV)=>{/*!
 * Module dependencies.
 */var yo=m("events").EventEmitter,ho=K5(),oV=X4();function g1(F,A,B){if(B===void 0)B={};if(this.opts=B,this.name=F,this.collectionName=F,this.conn=A,this.queue=[],this.buffer=!A?._hasOpened,this.emitter=new yo,ho.connected===this.conn.readyState)this.onOpen()}g1.prototype.name;g1.prototype.collectionName;g1.prototype.conn;g1.prototype.onOpen=function(){this.buffer=!1,oV(()=>this.doQueue())};g1.prototype.onClose=function(){};g1.prototype.addQueue=function(F,A){return this.queue.push([F,A]),this};g1.prototype.removeQueue=function(F,A){let B=this.queue.findIndex((D)=>D[0]===F&&D[1]===A);if(B===-1)return!1;return this.queue.splice(B,1),!0};g1.prototype.doQueue=function(){for(let A of this.queue)if(typeof A[0]==="function")A[0].apply(this,A[1]);else this[A[0]].apply(this,A[1]);this.queue=[];let F=this;return oV(function(){F.emitter.emit("queue")}),this};g1.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};g1.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};g1.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};g1.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};g1.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};g1.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};g1.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};g1.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};g1.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};g1.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};g1.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};g1.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};g1.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};g1.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};g1.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};g1.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};g1.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};g1.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};/*!
 * ignore
 */g1.prototype._shouldBufferCommands=function F(){let A=this.opts;if(A.bufferCommands!=null)return A.bufferCommands;if(A?.schemaUserProvidedOptions?.bufferCommands!=null)return A.schemaUserProvidedOptions.bufferCommands;return this.conn._shouldBufferCommands()};/*!
 * ignore
 */g1.prototype._getBufferTimeoutMS=function F(){let A=this.conn,B=this.opts;if(B.bufferTimeoutMS!=null)return B.bufferTimeoutMS;if(B?.schemaUserProvidedOptions?.bufferTimeoutMS!=null)return B.schemaUserProvidedOptions.bufferTimeoutMS;return A._getBufferTimeoutMS()};/*!
 * Module exports.
 */eV.exports=g1});var K1=z((mw1,FL)=>{/*!
 * ignore
 */class $Y extends Error{}Object.defineProperty($Y.prototype,"name",{value:"MongooseError"});FL.exports=$Y});var XL=z((BL)=>{Object.defineProperty(BL,"__esModule",{value:!0});BL.ListDatabasesOperation=void 0;var vo=f1(),AL=s(),mo=G0(),GY=h1();class EY extends mo.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=vo.MongoDBResponse,this.options=A??{},this.ns=new AL.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument(F,A){let B={listDatabases:1};if(typeof this.options.nameOnly==="boolean")B.nameOnly=this.options.nameOnly;if(this.options.filter)B.filter=this.options.filter;if(typeof this.options.authorizedDatabases==="boolean")B.authorizedDatabases=this.options.authorizedDatabases;if(AL.maxWireVersion(F)>=9&&this.options.comment!==void 0)B.comment=this.options.comment;return B}}BL.ListDatabasesOperation=EY;GY.defineAspects(EY,[GY.Aspect.READ_OPERATION,GY.Aspect.RETRYABLE])});var WY=z((JL)=>{Object.defineProperty(JL,"__esModule",{value:!0});JL.RemoveUserOperation=void 0;var co=f1(),lo=G0(),ZL=h1();class CY extends lo.CommandOperation{constructor(F,A,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=co.MongoDBResponse,this.options=B,this.username=A}get commandName(){return"dropUser"}buildCommandDocument(F){return{dropUser:this.username}}handleOk(F){return!0}}JL.RemoveUserOperation=CY;ZL.defineAspects(CY,[ZL.Aspect.WRITE_OPERATION])});var U5=z((EL)=>{Object.defineProperty(EL,"__esModule",{value:!0});EL.RunCursorCommandOperation=EL.RunCommandOperation=void 0;var $L=f1(),po=h1();class HY extends po.AbstractOperation{constructor(F,A,B){super(B);this.SERVER_COMMAND_RESPONSE_TYPE=$L.MongoDBResponse,this.command=A,this.options=B,this.ns=F.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand(F,A){return this.command}buildOptions(F){return{...this.options,session:this.session,timeoutContext:F,signal:this.options.signal,readPreference:this.options.readPreference}}}EL.RunCommandOperation=HY;class GL extends HY{constructor(){super(...arguments);this.SERVER_COMMAND_RESPONSE_TYPE=$L.CursorResponse}handleOk(F){return F}}EL.RunCursorCommandOperation=GL});var zL=z((HL)=>{Object.defineProperty(HL,"__esModule",{value:!0});HL.ValidateCollectionOperation=void 0;var no=f1(),qY=l(),ao=G0();class WL extends ao.CommandOperation{constructor(F,A,B){super(F.s.db,B);this.SERVER_COMMAND_RESPONSE_TYPE=no.MongoDBResponse,this.options=B,this.collectionName=A}get commandName(){return"validate"}buildCommandDocument(F,A){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter((B)=>B[0]!=="session"))}}handleOk(F){let A=super.handleOk(F);if(A.result!=null&&typeof A.result!=="string")throw new qY.MongoUnexpectedServerResponseError("Error with validation data");if(A.result!=null&&A.result.match(/exception|corrupt/)!=null)throw new qY.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(A.valid!=null&&!A.valid)throw new qY.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return F}}HL.ValidateCollectionOperation=WL});var zY=z((KL)=>{Object.defineProperty(KL,"__esModule",{value:!0});KL.Admin=void 0;var so=$1(),FB=d0(),ro=XL(),to=WY(),oo=U5(),eo=zL(),Fe=s();class QL{constructor(F){this.s={db:F}}async command(F,A){return await FB.executeOperation(this.s.db.client,new oo.RunCommandOperation(new Fe.MongoDBNamespace("admin"),F,{...so.resolveBSONOptions(A),session:A?.session,readPreference:A?.readPreference,timeoutMS:A?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(F){return await this.command({buildinfo:1},F)}async serverInfo(F){return await this.command({buildinfo:1},F)}async serverStatus(F){return await this.command({serverStatus:1},F)}async ping(F){return await this.command({ping:1},F)}async removeUser(F,A){return await FB.executeOperation(this.s.db.client,new to.RemoveUserOperation(this.s.db,F,{dbName:"admin",...A}))}async validateCollection(F,A={}){return await FB.executeOperation(this.s.db.client,new eo.ValidateCollectionOperation(this,F,A))}async listDatabases(F){return await FB.executeOperation(this.s.db.client,new ro.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...F}))}async replSetGetStatus(F){return await this.command({replSetGetStatus:1},F)}}KL.Admin=QL});var QY=z((wL)=>{Object.defineProperty(wL,"__esModule",{value:!0});wL.OrderedBulkOperation=void 0;var Ae=$1(),VL=l(),AB=Q7();class LL extends AB.BulkOperationBase{constructor(F,A){super(F,A,!0)}addToOperationsList(F,A){let B=Ae.calculateObjectSize(A,{checkKeys:!1,ignoreUndefined:!1});if(B>=this.s.maxBsonObjectSize)throw new VL.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch==null)this.s.currentBatch=new AB.Batch(F,this.s.currentIndex);let D=this.s.maxKeySize;if(this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+D+B>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==F)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new AB.Batch(F,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0;if(F===AB.BatchType.INSERT)this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:A._id});if(Array.isArray(A))throw new VL.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(A),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=D+B,this.s.currentIndex+=1,this}}wL.OrderedBulkOperation=LL});var KY=z((NL)=>{Object.defineProperty(NL,"__esModule",{value:!0});NL.UnorderedBulkOperation=void 0;var Be=$1(),IL=l(),j3=Q7();class PL extends j3.BulkOperationBase{constructor(F,A){super(F,A,!1)}handleWriteError(F){if(this.s.batches.length)return;return super.handleWriteError(F)}addToOperationsList(F,A){let B=Be.calculateObjectSize(A,{checkKeys:!1,ignoreUndefined:!1});if(B>=this.s.maxBsonObjectSize)throw new IL.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch=void 0,F===j3.BatchType.INSERT)this.s.currentBatch=this.s.currentInsertBatch;else if(F===j3.BatchType.UPDATE)this.s.currentBatch=this.s.currentUpdateBatch;else if(F===j3.BatchType.DELETE)this.s.currentBatch=this.s.currentRemoveBatch;let D=this.s.maxKeySize;if(this.s.currentBatch==null)this.s.currentBatch=new j3.Batch(F,this.s.currentIndex);if(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+D+B>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==F)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new j3.Batch(F,this.s.currentIndex);if(Array.isArray(A))throw new IL.MongoInvalidArgumentError("Operation passed in cannot be an Array");if(this.s.currentBatch.operations.push(A),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,F===j3.BatchType.INSERT)this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:A._id});else if(F===j3.BatchType.UPDATE)this.s.currentUpdateBatch=this.s.currentBatch;else if(F===j3.BatchType.DELETE)this.s.currentRemoveBatch=this.s.currentBatch;return this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=D+B,this}}NL.UnorderedBulkOperation=PL});var Y4=z((SL)=>{Object.defineProperty(SL,"__esModule",{value:!0});SL.MongoLogger=SL.MongoLoggableComponent=SL.SEVERITY_LEVEL_MAP=SL.DEFAULT_MAX_DOCUMENT_LENGTH=SL.SeverityLevel=void 0;SL.parseSeverityFromString=LY;SL.createStdioLogger=Z9;SL.stringifyWithMaxLen=J4;SL.defaultLogTransform=uL;var jL=m("util"),TL=$1(),a1=w0(),J9=s();SL.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});SL.DEFAULT_MAX_DOCUMENT_LENGTH=1000;class kL extends Map{constructor(F){let A=[];for(let[B,D]of F)A.push([D,B]);A.push(...F);super(A)}getNumericSeverityLevel(F){return this.get(F)}getSeverityLevelName(F){return this.get(F)}}SL.SEVERITY_LEVEL_MAP=new kL([[SL.SeverityLevel.OFF,-1/0],[SL.SeverityLevel.EMERGENCY,0],[SL.SeverityLevel.ALERT,1],[SL.SeverityLevel.CRITICAL,2],[SL.SeverityLevel.ERROR,3],[SL.SeverityLevel.WARNING,4],[SL.SeverityLevel.NOTICE,5],[SL.SeverityLevel.INFORMATIONAL,6],[SL.SeverityLevel.DEBUG,7],[SL.SeverityLevel.TRACE,8]]);SL.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function LY(F){let A=Object.values(SL.SeverityLevel),B=F?.toLowerCase();if(B!=null&&A.includes(B))return B;return null}function Z9(F){return{write:jL.promisify((A,B)=>{let D=jL.inspect(A,{compact:!0,breakLength:1/0});F.write(`${D}
`,"utf-8",B);return})}}function De({MONGODB_LOG_PATH:F},{mongodbLogPath:A}){if(typeof A==="string"&&/^stderr$/i.test(A))return{mongodbLogPath:Z9(process.stderr),mongodbLogPathIsStdErr:!0};if(typeof A==="string"&&/^stdout$/i.test(A))return{mongodbLogPath:Z9(process.stdout),mongodbLogPathIsStdErr:!1};if(typeof A==="object"&&typeof A?.write==="function")return{mongodbLogPath:A,mongodbLogPathIsStdErr:!1};if(F&&/^stderr$/i.test(F))return{mongodbLogPath:Z9(process.stderr),mongodbLogPathIsStdErr:!0};if(F&&/^stdout$/i.test(F))return{mongodbLogPath:Z9(process.stdout),mongodbLogPathIsStdErr:!1};return{mongodbLogPath:Z9(process.stderr),mongodbLogPathIsStdErr:!0}}function K7(F,A,B){return LY(F)??LY(A)??B}function Xe(F,A){let B=SL.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(F),D=SL.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(A);return B<D?-1:B>D?1:0}function J4(F,A,B={}){let D="",X=0,Z=function J(Y,$){if(X>=A)return;if(Y==="")return X+=1,$;if(X+=Y.length+4,$==null)return $;switch(typeof $){case"string":X+=$.length+2;break;case"number":case"bigint":X+=String($).length;break;case"boolean":X+=$?4:5;break;case"object":if(J9.isUint8Array($))X+=22+$.byteLength+$.byteLength*0.33+18|0;else if("_bsontype"in $){let G=$;switch(G._bsontype){case"Int32":X+=String(G.value).length;break;case"Double":X+=(G.value|0)===G.value?String(G.value).length+2:String(G.value).length;break;case"Long":X+=G.toString().length;break;case"ObjectId":X+=35;break;case"MaxKey":case"MinKey":X+=13;break;case"Binary":X+=22+$.position+$.position*0.33+18|0;break;case"Timestamp":X+=19+String(G.t).length+5+String(G.i).length+2;break;case"Code":if(G.scope==null)X+=G.code.length+10+2;else X+=G.code.length+10+11;break;case"BSONRegExp":X+=34+G.pattern.length+13+G.options.length+3;break}}}return $};if(typeof F==="string")D=F;else if(typeof F==="function")D=F.name;else try{if(A!==0)D=TL.EJSON.stringify(F,Z,0,B);else D=TL.EJSON.stringify(F,B)}catch(J){D=`Extended JSON serialization failed with: ${J.message}`}if(A!==0&&D.length>A&&D.charCodeAt(A-1)!==D.codePointAt(A-1)){if(A--,A===0)return""}return A!==0&&D.length>A?`${D.slice(0,A)}...`:D}function Ze(F){let A=F;return A.toLog!==void 0&&typeof A.toLog==="function"}function BB(F,A,B=SL.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:D,operation:X,topologyDescription:Z,message:J}=A;return F.selector=J4(D,B),F.operation=X,F.topologyDescription=J4(Z,B),F.message=J,F}function UY(F,A){F.commandName=A.commandName,F.requestId=A.requestId,F.driverConnectionId=A.connectionId;let{host:B,port:D}=J9.HostAddress.fromString(A.address).toHostPort();if(F.serverHost=B,F.serverPort=D,A?.serviceId)F.serviceId=A.serviceId.toHexString();return F.databaseName=A.databaseName,F.serverConnectionId=A.serverConnectionId,F}function D6(F,A){let{host:B,port:D}=J9.HostAddress.fromString(A.address).toHostPort();return F.serverHost=B,F.serverPort=D,F}function Z4(F,A){return F.topologyId=A.topologyId,F}function VY(F,A){let{awaited:B,connectionId:D}=A;F.awaited=B,F.driverConnectionId=A.connectionId;let{host:X,port:Z}=J9.HostAddress.fromString(D).toHostPort();return F.serverHost=X,F.serverPort=Z,F}function uL(F,A=SL.DEFAULT_MAX_DOCUMENT_LENGTH){let B=Object.create(null);switch(F.name){case a1.SERVER_SELECTION_STARTED:return B=BB(B,F,A),B;case a1.SERVER_SELECTION_FAILED:return B=BB(B,F,A),B.failure=F.failure?.message,B;case a1.SERVER_SELECTION_SUCCEEDED:return B=BB(B,F,A),B.serverHost=F.serverHost,B.serverPort=F.serverPort,B;case a1.WAITING_FOR_SUITABLE_SERVER:return B=BB(B,F,A),B.remainingTimeMS=F.remainingTimeMS,B;case a1.COMMAND_STARTED:return B=UY(B,F),B.message="Command started",B.command=J4(F.command,A,{relaxed:!0}),B.databaseName=F.databaseName,B;case a1.COMMAND_SUCCEEDED:return B=UY(B,F),B.message="Command succeeded",B.durationMS=F.duration,B.reply=J4(F.reply,A,{relaxed:!0}),B;case a1.COMMAND_FAILED:return B=UY(B,F),B.message="Command failed",B.durationMS=F.duration,B.failure=F.failure?.message??"(redacted)",B;case a1.CONNECTION_POOL_CREATED:if(B=D6(B,F),B.message="Connection pool created",F.options){let{maxIdleTimeMS:D,minPoolSize:X,maxPoolSize:Z,maxConnecting:J,waitQueueTimeoutMS:Y}=F.options;B={...B,maxIdleTimeMS:D,minPoolSize:X,maxPoolSize:Z,maxConnecting:J,waitQueueTimeoutMS:Y}}return B;case a1.CONNECTION_POOL_READY:return B=D6(B,F),B.message="Connection pool ready",B;case a1.CONNECTION_POOL_CLEARED:if(B=D6(B,F),B.message="Connection pool cleared",F.serviceId?._bsontype==="ObjectId")B.serviceId=F.serviceId?.toHexString();return B;case a1.CONNECTION_POOL_CLOSED:return B=D6(B,F),B.message="Connection pool closed",B;case a1.CONNECTION_CREATED:return B=D6(B,F),B.message="Connection created",B.driverConnectionId=F.connectionId,B;case a1.CONNECTION_READY:return B=D6(B,F),B.message="Connection ready",B.driverConnectionId=F.connectionId,B.durationMS=F.durationMS,B;case a1.CONNECTION_CLOSED:switch(B=D6(B,F),B.message="Connection closed",B.driverConnectionId=F.connectionId,F.reason){case"stale":B.reason="Connection became stale because the pool was cleared";break;case"idle":B.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":if(B.reason="An error occurred while using the connection",F.error)B.error=F.error;break;case"poolClosed":B.reason="Connection pool was closed";break;default:B.reason=`Unknown close reason: ${F.reason}`}return B;case a1.CONNECTION_CHECK_OUT_STARTED:return B=D6(B,F),B.message="Connection checkout started",B;case a1.CONNECTION_CHECK_OUT_FAILED:switch(B=D6(B,F),B.message="Connection checkout failed",F.reason){case"poolClosed":B.reason="Connection pool was closed";break;case"timeout":B.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":if(B.reason="An error occurred while trying to establish a new connection",F.error)B.error=F.error;break;default:B.reason=`Unknown close reason: ${F.reason}`}return B.durationMS=F.durationMS,B;case a1.CONNECTION_CHECKED_OUT:return B=D6(B,F),B.message="Connection checked out",B.driverConnectionId=F.connectionId,B.durationMS=F.durationMS,B;case a1.CONNECTION_CHECKED_IN:return B=D6(B,F),B.message="Connection checked in",B.driverConnectionId=F.connectionId,B;case a1.SERVER_OPENING:return B=Z4(B,F),B=D6(B,F),B.message="Starting server monitoring",B;case a1.SERVER_CLOSED:return B=Z4(B,F),B=D6(B,F),B.message="Stopped server monitoring",B;case a1.SERVER_HEARTBEAT_STARTED:return B=Z4(B,F),B=VY(B,F),B.message="Server heartbeat started",B;case a1.SERVER_HEARTBEAT_SUCCEEDED:return B=Z4(B,F),B=VY(B,F),B.message="Server heartbeat succeeded",B.durationMS=F.duration,B.serverConnectionId=F.serverConnectionId,B.reply=J4(F.reply,A,{relaxed:!0}),B;case a1.SERVER_HEARTBEAT_FAILED:return B=Z4(B,F),B=VY(B,F),B.message="Server heartbeat failed",B.durationMS=F.duration,B.failure=F.failure?.message,B;case a1.TOPOLOGY_OPENING:return B=Z4(B,F),B.message="Starting topology monitoring",B;case a1.TOPOLOGY_CLOSED:return B=Z4(B,F),B.message="Stopped topology monitoring",B;case a1.TOPOLOGY_DESCRIPTION_CHANGED:return B=Z4(B,F),B.message="Topology description changed",B.previousDescription=B.reply=J4(F.previousDescription,A),B.newDescription=B.reply=J4(F.newDescription,A),B;default:for(let[D,X]of Object.entries(F))if(X!=null)B[D]=X}return B}class OL{constructor(F){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=F.componentSeverities,this.maxDocumentLength=F.maxDocumentLength,this.logDestination=F.logDestination,this.logDestinationIsStdErr=F.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let F=Object();for(let A of Object.values(SL.MongoLoggableComponent)){F[A]={};for(let B of Object.values(SL.SeverityLevel))F[A][B]=Xe(B,this.componentSeverities[A])<=0}return F}turnOffSeverities(){for(let F of Object.values(SL.MongoLoggableComponent)){this.componentSeverities[F]=SL.SeverityLevel.OFF;for(let A of Object.values(SL.SeverityLevel))this.severities[F][A]=!1}}logWriteFailureHandler(F){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=Z9(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(SL.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:F.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(F,A){if(A===SL.SeverityLevel.OFF)return!1;return this.severities[F][A]}log(F,A,B){if(!this.willLog(A,F))return;let D={t:new Date,c:A,s:F};if(typeof B==="string")D.message=B;else if(typeof B==="object")if(Ze(B))D={...D,...B.toLog()};else D={...D,...uL(B,this.maxDocumentLength)};if(J9.isPromiseLike(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(D)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let X=this.logDestination.write(D);if(J9.isPromiseLike(X))this.pendingLog=X.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this))}catch(X){this.logWriteFailureHandler(X)}}static resolveOptions(F,A){let B=De(F,A),D={...F,...A,mongodbLogPath:B.mongodbLogPath,mongodbLogPathIsStdErr:B.mongodbLogPathIsStdErr},X=K7(D.mongodbLogComponentSeverities?.default,D.MONGODB_LOG_ALL,SL.SeverityLevel.OFF);return{componentSeverities:{command:K7(D.mongodbLogComponentSeverities?.command,D.MONGODB_LOG_COMMAND,X),topology:K7(D.mongodbLogComponentSeverities?.topology,D.MONGODB_LOG_TOPOLOGY,X),serverSelection:K7(D.mongodbLogComponentSeverities?.serverSelection,D.MONGODB_LOG_SERVER_SELECTION,X),connection:K7(D.mongodbLogComponentSeverities?.connection,D.MONGODB_LOG_CONNECTION,X),client:K7(D.mongodbLogComponentSeverities?.client,D.MONGODB_LOG_CLIENT,X),default:X},maxDocumentLength:D.mongodbLogMaxDocumentLength??J9.parseUnsignedInteger(D.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1000,logDestination:D.mongodbLogPath,logDestinationIsStdErr:D.mongodbLogPathIsStdErr}}}SL.MongoLogger=OL});var X6=z((fL)=>{Object.defineProperty(fL,"__esModule",{value:!0});fL.CancellationToken=fL.TypedEventEmitter=void 0;var Ee=m("events"),Ce=Y4(),We=s();class IY extends Ee.EventEmitter{emitAndLog(F,...A){if(this.emit(F,...A),this.component)this.mongoLogger?.debug(this.component,A[0])}emitAndLogHeartbeat(F,A,B,...D){if(this.emit(F,...D),this.component){let X={topologyId:A,serverConnectionId:B??null,...D[0]};this.mongoLogger?.debug(this.component,X)}}emitAndLogCommand(F,A,B,D,...X){if(F)this.emit(A,...X);if(D){let Z={databaseName:B,...X[0]};this.mongoLogger?.debug(Ce.MongoLoggableComponent.COMMAND,Z)}}}fL.TypedEventEmitter=IY;class _L extends IY{constructor(...F){super(...F);this.on("error",We.noop)}}fL.CancellationToken=_L});var NY=z((yL)=>{Object.defineProperty(yL,"__esModule",{value:!0});yL.GetMoreOperation=void 0;var qe=f1(),bL=l(),ze=s(),XB=h1();class PY extends XB.AbstractOperation{constructor(F,A,B,D){super(D);this.SERVER_COMMAND_RESPONSE_TYPE=qe.CursorResponse,this.options=D,this.ns=F,this.cursorId=A,this.server=B}get commandName(){return"getMore"}buildCommand(F){if(this.cursorId==null||this.cursorId.isZero())throw new bL.MongoRuntimeError("Unable to iterate cursor with no id");let A=this.ns.collection;if(A==null)throw new bL.MongoRuntimeError("A collection name must be determined before getMore");let B={getMore:this.cursorId,collection:A};if(typeof this.options.batchSize==="number")B.batchSize=Math.abs(this.options.batchSize);if(typeof this.options.maxAwaitTimeMS==="number")B.maxTimeMS=this.options.maxAwaitTimeMS;if(this.options.comment!==void 0&&ze.maxWireVersion(F)>=9)B.comment=this.options.comment;return B}buildOptions(F){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:F,...this.options}}handleOk(F){return F}}yL.GetMoreOperation=PY;XB.defineAspects(PY,[XB.Aspect.READ_OPERATION,XB.Aspect.MUST_SELECT_SAME_SERVER])});var dL=z((vL)=>{Object.defineProperty(vL,"__esModule",{value:!0});vL.KillCursorsOperation=void 0;var Qe=f1(),Ke=l(),MY=h1();class jY extends MY.AbstractOperation{constructor(F,A,B,D){super(D);this.SERVER_COMMAND_RESPONSE_TYPE=Qe.MongoDBResponse,this.ns=A,this.cursorId=F,this.server=B}get commandName(){return"killCursors"}buildCommand(F,A){let B=this.ns.collection;if(B==null)throw new Ke.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:B,cursors:[this.cursorId]}}buildOptions(F){return{session:this.session,timeoutContext:F}}handleError(F){}}vL.KillCursorsOperation=jY;MY.defineAspects(jY,[MY.Aspect.MUST_SELECT_SAME_SERVER])});var TY=z((cL)=>{Object.defineProperty(cL,"__esModule",{value:!0});cL.ConnectionPoolMetrics=void 0;class U7{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}static{this.TXN="txn"}static{this.CURSOR="cursor"}static{this.OTHER="other"}markPinned(F){if(F===U7.TXN)this.txnConnections+=1;else if(F===U7.CURSOR)this.cursorConnections+=1;else this.otherConnections+=1}markUnpinned(F){if(F===U7.TXN)this.txnConnections-=1;else if(F===U7.CURSOR)this.cursorConnections-=1;else this.otherConnections-=1}info(F){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${F}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}}cL.ConnectionPoolMetrics=U7});var kY=z((nL)=>{Object.defineProperty(nL,"__esModule",{value:!0});nL.Transaction=nL.TxnState=void 0;nL.isTransactionCommand=Pe;var pL=l(),Ue=_6(),Ve=f0(),Le=P2();nL.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var we={[nL.TxnState.NO_TRANSACTION]:[nL.TxnState.NO_TRANSACTION,nL.TxnState.STARTING_TRANSACTION],[nL.TxnState.STARTING_TRANSACTION]:[nL.TxnState.TRANSACTION_IN_PROGRESS,nL.TxnState.TRANSACTION_COMMITTED,nL.TxnState.TRANSACTION_COMMITTED_EMPTY,nL.TxnState.TRANSACTION_ABORTED],[nL.TxnState.TRANSACTION_IN_PROGRESS]:[nL.TxnState.TRANSACTION_IN_PROGRESS,nL.TxnState.TRANSACTION_COMMITTED,nL.TxnState.TRANSACTION_ABORTED],[nL.TxnState.TRANSACTION_COMMITTED]:[nL.TxnState.TRANSACTION_COMMITTED,nL.TxnState.TRANSACTION_COMMITTED_EMPTY,nL.TxnState.STARTING_TRANSACTION,nL.TxnState.NO_TRANSACTION],[nL.TxnState.TRANSACTION_ABORTED]:[nL.TxnState.STARTING_TRANSACTION,nL.TxnState.NO_TRANSACTION],[nL.TxnState.TRANSACTION_COMMITTED_EMPTY]:[nL.TxnState.TRANSACTION_COMMITTED_EMPTY,nL.TxnState.NO_TRANSACTION]},Re=new Set([nL.TxnState.STARTING_TRANSACTION,nL.TxnState.TRANSACTION_IN_PROGRESS]),Ie=new Set([nL.TxnState.TRANSACTION_COMMITTED,nL.TxnState.TRANSACTION_COMMITTED_EMPTY,nL.TxnState.TRANSACTION_ABORTED]);class iL{constructor(F){F=F??{},this.state=nL.TxnState.NO_TRANSACTION,this.options={};let A=Le.WriteConcern.fromOptions(F);if(A){if(A.w===0)throw new pL.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=A}if(F.readConcern)this.options.readConcern=Ue.ReadConcern.fromOptions(F);if(F.readPreference)this.options.readPreference=Ve.ReadPreference.fromOptions(F);if(F.maxCommitTimeMS)this.options.maxTimeMS=F.maxCommitTimeMS;this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===nL.TxnState.STARTING_TRANSACTION}get isActive(){return Re.has(this.state)}get isCommitted(){return Ie.has(this.state)}transition(F){let A=we[this.state];if(A&&A.includes(F)){if(this.state=F,this.state===nL.TxnState.NO_TRANSACTION||this.state===nL.TxnState.STARTING_TRANSACTION||this.state===nL.TxnState.TRANSACTION_ABORTED)this.unpinServer();return}throw new pL.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${F}]`)}pinServer(F){if(this.isActive)this._pinnedServer=F}unpinServer(){this._pinnedServer=void 0}}nL.Transaction=iL;function Pe(F){return!!(F.commitTransaction||F.abortTransaction)}});var V5=z((eL)=>{Object.defineProperty(eL,"__esModule",{value:!0});eL.ServerSessionPool=eL.ServerSession=eL.ClientSession=void 0;eL.maybeClearPinnedConnection=YB;eL.applySession=ke;eL.updateSessionFromResponse=ue;var JB=$1(),$B=TY(),tL=w0(),G1=l(),Me=X6(),ZB=d0(),uY=U5(),je=_6(),OY=f0(),xY=F6(),SY=g0(),v1=kY(),r0=s(),V7=P2();class _Y extends Me.TypedEventEmitter{constructor(F,A,B,D){super();if(this.timeoutContext=null,this.on("error",r0.noop),F==null)throw new G1.MongoRuntimeError("ClientSession requires a MongoClient");if(A==null||!(A instanceof fY))throw new G1.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(B=B??{},this.snapshotEnabled=B.snapshot===!0,B.causalConsistency===!0&&this.snapshotEnabled)throw new G1.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=F,this.sessionPool=A,this.hasEnded=!1,this.clientOptions=D,this.timeoutMS=B.defaultTimeoutMS??F.s.options?.timeoutMS,this.explicit=!!B.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let X=this.explicit&&B.snapshot!==!0;this.supports={causalConsistency:B.causalConsistency??X},this.clusterTime=B.initialClusterTime,this.operationTime=void 0,this.owner=B.owner,this.defaultTransactionOptions={...B.defaultTransactionOptions},this.transaction=new v1.Transaction}get id(){return this.serverSession?.id}get serverSession(){let F=this._serverSession;if(F==null){if(this.explicit)throw new G1.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new G1.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");F=this.sessionPool.acquire(),this._serverSession=F}return F}get loadBalanced(){return this.client.topology?.description.type===xY.TopologyType.LoadBalanced}pin(F){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=F,F.emit(tL.PINNED,this.inTransaction()?$B.ConnectionPoolMetrics.TXN:$B.ConnectionPoolMetrics.CURSOR)}unpin(F){if(this.loadBalanced)return YB(this,F);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(F){try{if(this.inTransaction())await this.abortTransaction({...F,throwTimeout:!0})}catch(A){if(A.name==="MongoOperationTimeoutError")throw A;r0.squashError(A)}finally{if(!this.hasEnded){let A=this.serverSession;if(A!=null)this.sessionPool.release(A),this._serverSession=new EB(A);this.hasEnded=!0,this.emit("ended",this)}YB(this,{force:!0,...F})}}async[Symbol.asyncDispose](){await this.endSession({force:!0})}advanceOperationTime(F){if(this.operationTime==null){this.operationTime=F;return}if(F.greaterThan(this.operationTime))this.operationTime=F}advanceClusterTime(F){if(!F||typeof F!=="object")throw new G1.MongoInvalidArgumentError("input cluster time must be an object");if(!F.clusterTime||F.clusterTime._bsontype!=="Timestamp")throw new G1.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!F.signature||F.signature.hash?._bsontype!=="Binary"||typeof F.signature.keyId!=="bigint"&&typeof F.signature.keyId!=="number"&&F.signature.keyId?._bsontype!=="Long")throw new G1.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');xY._advanceClusterTime(this,F)}equals(F){if(!(F instanceof _Y))return!1;if(this.id==null||F.id==null)return!1;return r0.ByteUtils.equals(this.id.id.buffer,F.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(F){if(this.snapshotEnabled)throw new G1.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new G1.MongoTransactionError("Transaction already in progress");if(this.isPinned&&this.transaction.isCommitted)this.unpin();this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new v1.Transaction({readConcern:F?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:F?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:F?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:F?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(v1.TxnState.STARTING_TRANSACTION)}async commitTransaction(F){if(this.transaction.state===v1.TxnState.NO_TRANSACTION)throw new G1.MongoTransactionError("No transaction started");if(this.transaction.state===v1.TxnState.STARTING_TRANSACTION||this.transaction.state===v1.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(v1.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===v1.TxnState.TRANSACTION_ABORTED)throw new G1.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let A={commitTransaction:1},B=typeof F?.timeoutMS==="number"?F.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,D=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(D!=null)if(B==null&&this.timeoutContext==null)V7.WriteConcern.apply(A,{wtimeoutMS:1e4,w:"majority",...D});else{let J=Object.keys(D);if(J.length>2||!J.includes("wtimeoutMS")&&!J.includes("wTimeoutMS"))V7.WriteConcern.apply(A,{...D,wtimeoutMS:void 0})}if(this.transaction.state===v1.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)if(B==null&&this.timeoutContext==null)V7.WriteConcern.apply(A,{wtimeoutMS:1e4,...D,w:"majority"});else V7.WriteConcern.apply(A,{w:"majority",...D,wtimeoutMS:void 0});if(typeof this.transaction.options.maxTimeMS==="number")A.maxTimeMS=this.transaction.options.maxTimeMS;if(this.transaction.recoveryToken)A.recoveryToken=this.transaction.recoveryToken;let X=new uY.RunCommandOperation(new r0.MongoDBNamespace("admin"),A,{session:this,readPreference:OY.ReadPreference.primary,bypassPinningCheck:!0}),Z=this.timeoutContext??(typeof B==="number"?SY.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:B}):null);try{await ZB.executeOperation(this.client,X,Z),this.commitAttempted=void 0;return}catch(J){if(this.commitAttempted=!0,J instanceof G1.MongoError&&G1.isRetryableWriteError(J)){V7.WriteConcern.apply(A,{wtimeoutMS:1e4,...D,w:"majority"}),this.unpin({force:!0});try{await ZB.executeOperation(this.client,new uY.RunCommandOperation(new r0.MongoDBNamespace("admin"),A,{session:this,readPreference:OY.ReadPreference.primary,bypassPinningCheck:!0}),Z);return}catch(Y){if(rL(Y))Y.addErrorLabel(G1.MongoErrorLabel.UnknownTransactionCommitResult);if(sL(Y))this.unpin({error:Y});throw Y}}if(rL(J))J.addErrorLabel(G1.MongoErrorLabel.UnknownTransactionCommitResult);if(sL(J))this.unpin({error:J});throw J}finally{this.transaction.transition(v1.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(F){if(this.transaction.state===v1.TxnState.NO_TRANSACTION)throw new G1.MongoTransactionError("No transaction started");if(this.transaction.state===v1.TxnState.STARTING_TRANSACTION){this.transaction.transition(v1.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===v1.TxnState.TRANSACTION_ABORTED)throw new G1.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===v1.TxnState.TRANSACTION_COMMITTED||this.transaction.state===v1.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new G1.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let A={abortTransaction:1},B=typeof F?.timeoutMS==="number"?F.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,D=B!=null?SY.TimeoutContext.create({timeoutMS:B,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,X=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(X!=null&&B==null)V7.WriteConcern.apply(A,{wtimeoutMS:1e4,w:"majority",...X});if(this.transaction.recoveryToken)A.recoveryToken=this.transaction.recoveryToken;let Z=new uY.RunCommandOperation(new r0.MongoDBNamespace("admin"),A,{session:this,readPreference:OY.ReadPreference.primary,bypassPinningCheck:!0});try{await ZB.executeOperation(this.client,Z,D),this.unpin();return}catch(J){if(this.unpin(),J.name==="MongoRuntimeError")throw J;if(F?.throwTimeout&&J.name==="MongoOperationTimeoutError")throw J;if(J instanceof G1.MongoError&&G1.isRetryableWriteError(J))try{await ZB.executeOperation(this.client,Z,D);return}catch(Y){if(Y.name==="MongoRuntimeError")throw Y;if(F?.throwTimeout&&Y.name==="MongoOperationTimeoutError")throw Y}}finally{if(this.transaction.transition(v1.TxnState.TRANSACTION_ABORTED),this.loadBalanced)YB(this,{force:!1})}}toBSON(){throw new G1.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(F,A){let D=A?.timeoutMS??this.timeoutMS??null;this.timeoutContext=D!=null?SY.TimeoutContext.create({timeoutMS:D,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let X=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:r0.now(),Z=!1,J;try{while(!Z){this.startTransaction(A);try{let Y=F(this);if(!r0.isPromiseLike(Y))throw new G1.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(J=await Y,this.transaction.state===v1.TxnState.NO_TRANSACTION||this.transaction.state===v1.TxnState.TRANSACTION_COMMITTED||this.transaction.state===v1.TxnState.TRANSACTION_ABORTED)return J}catch(Y){if(!(Y instanceof G1.MongoError)||Y instanceof G1.MongoInvalidArgumentError)throw await this.abortTransaction(),Y;if(this.transaction.state===v1.TxnState.STARTING_TRANSACTION||this.transaction.state===v1.TxnState.TRANSACTION_IN_PROGRESS)await this.abortTransaction();if(Y.hasErrorLabel(G1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||r0.now()-X<120000))continue;throw Y}while(!Z)try{await this.commitTransaction(),Z=!0}catch(Y){if(!GB(Y)&&Y.hasErrorLabel(G1.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||r0.now()-X<120000))continue;if(Y.hasErrorLabel(G1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||r0.now()-X<120000))break;throw Y}}return J}finally{this.timeoutContext=null}}}eL.ClientSession=_Y;var Te=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function sL(F){if(F instanceof G1.MongoError){if(G1.isRetryableWriteError(F)||F instanceof G1.MongoWriteConcernError||GB(F)){if(oL(F))return!0}else if(F.hasErrorLabel(G1.MongoErrorLabel.TransientTransactionError))return!0}return!1}function rL(F){let A=G1.isRetryableWriteError(F);return A||=F instanceof G1.MongoWriteConcernError,A||=GB(F),A&&=oL(F),A}function oL(F){let A=F instanceof G1.MongoServerError&&F.codeName&&Te.has(F.codeName);return GB(F)||!A&&F.code!==G1.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&F.code!==G1.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function YB(F,A){let B=F.pinnedConnection,D=A?.error;if(F.inTransaction()&&D&&D instanceof G1.MongoError&&D.hasErrorLabel(G1.MongoErrorLabel.TransientTransactionError))return;let X=F.client.topology;if(B&&X!=null){let J=Array.from(X.s.servers.values())[0];if(A?.error==null||A?.force){if(J.pool.checkIn(B),F.pinnedConnection=void 0,B.emit(tL.UNPINNED,F.transaction.state!==v1.TxnState.NO_TRANSACTION?$B.ConnectionPoolMetrics.TXN:$B.ConnectionPoolMetrics.CURSOR),A?.forceClear)J.pool.clear({serviceId:B.serviceId})}}}function GB(F){if(F==null||!(F instanceof G1.MongoServerError))return!1;return F.code===G1.MONGODB_ERROR_CODES.MaxTimeMSExpired||F.writeConcernError?.code===G1.MONGODB_ERROR_CODES.MaxTimeMSExpired}class EB{constructor(F){if(F!=null){let A=Buffer.allocUnsafe(16);A.set(F.id.id.buffer),this.id={id:new JB.Binary(A,F.id.id.sub_type)},this.lastUse=F.lastUse,this.txnNumber=F.txnNumber,this.isDirty=F.isDirty;return}this.id={id:new JB.Binary(r0.uuidV4(),JB.Binary.SUBTYPE_UUID)},this.lastUse=r0.now(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(F){return Math.round(r0.calculateDurationInMs(this.lastUse)%86400000%3600000/60000)>F-1}}eL.ServerSession=EB;class fY{constructor(F){if(F==null)throw new G1.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=F,this.sessions=new r0.List}acquire(){let F=this.client.topology?.logicalSessionTimeoutMinutes??10,A=null;while(this.sessions.length>0){let B=this.sessions.shift();if(B!=null&&(!!this.client.topology?.loadBalanced||!B.hasTimedOut(F))){A=B;break}}if(A==null)A=new EB;return A}release(F){let A=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!A)this.sessions.unshift(F);if(!A)return;if(this.sessions.prune((B)=>B.hasTimedOut(A)),!F.hasTimedOut(A)){if(F.isDirty)return;this.sessions.unshift(F)}}}eL.ServerSessionPool=fY;function ke(F,A,B){if(F.hasEnded)return new G1.MongoExpiredSessionError;let D=F.serverSession;if(D==null)return new G1.MongoRuntimeError("Unable to acquire server session");if(B.writeConcern?.w===0){if(F&&F.explicit)return new G1.MongoAPIError("Cannot have explicit session with unacknowledged writes");return}D.lastUse=r0.now(),A.lsid=D.id;let X=F.inTransaction()||v1.isTransactionCommand(A);if(!!B.willRetryWrite||X)D.txnNumber+=F.txnNumberIncrement,F.txnNumberIncrement=0,A.txnNumber=JB.Long.fromNumber(D.txnNumber);if(!X){if(F.transaction.state!==v1.TxnState.NO_TRANSACTION)F.transaction.transition(v1.TxnState.NO_TRANSACTION);if(F.supports.causalConsistency&&F.operationTime&&r0.commandSupportsReadConcern(A))A.readConcern=A.readConcern||{},Object.assign(A.readConcern,{afterClusterTime:F.operationTime});else if(F.snapshotEnabled){if(A.readConcern=A.readConcern||{level:je.ReadConcernLevel.snapshot},F.snapshotTime!=null)Object.assign(A.readConcern,{atClusterTime:F.snapshotTime})}return}if(A.autocommit=!1,F.transaction.state===v1.TxnState.STARTING_TRANSACTION){F.transaction.transition(v1.TxnState.TRANSACTION_IN_PROGRESS),A.startTransaction=!0;let J=F.transaction.options.readConcern||F?.clientOptions?.readConcern;if(J)A.readConcern=J;if(F.supports.causalConsistency&&F.operationTime)A.readConcern=A.readConcern||{},Object.assign(A.readConcern,{afterClusterTime:F.operationTime})}return}function ue(F,A){if(A.$clusterTime)xY._advanceClusterTime(F,A.$clusterTime);if(A.operationTime&&F&&F.supports.causalConsistency)F.advanceOperationTime(A.operationTime);if(A.recoveryToken&&F&&F.inTransaction())F.transaction._recoveryToken=A.recoveryToken;if(F?.snapshotEnabled&&F.snapshotTime==null){let B=A.atClusterTime;if(B)F.snapshotTime=B}}});var q2=z((Jw)=>{Object.defineProperty(Jw,"__esModule",{value:!0});Jw.CursorTimeoutContext=Jw.AbstractCursor=Jw.CursorTimeoutMode=Jw.CURSOR_FLAGS=void 0;var ge=m("stream"),L7=$1(),y0=l(),be=X6(),Aw=d0(),ye=NY(),he=dL(),Bw=_6(),CB=f0(),ve=V5(),gY=g0(),Z6=s();Jw.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function Dw(){this.client.s.activeCursors.delete(this)}Jw.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});class Xw extends be.TypedEventEmitter{static{this.CLOSE="close"}constructor(F,A,B={}){super();if(this.documents=null,this.hasEmittedClose=!1,this.on("error",Z6.noop),!F.s.isMongoClient)throw new y0.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=F,this.cursorNamespace=A,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:B.readPreference&&B.readPreference instanceof CB.ReadPreference?B.readPreference:CB.ReadPreference.primary,...L7.pluckBSONSerializeOptions(B),timeoutMS:B?.timeoutContext?.csotEnabled()?B.timeoutContext.timeoutMS:B.timeoutMS,tailable:B.tailable,awaitData:B.awaitData},this.cursorOptions.timeoutMS!=null)if(B.timeoutMode==null)if(B.tailable){if(B.awaitData){if(B.maxAwaitTimeMS!=null&&B.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new y0.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor")}this.cursorOptions.timeoutMode=Jw.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=Jw.CursorTimeoutMode.LIFETIME;else{if(B.tailable&&B.timeoutMode===Jw.CursorTimeoutMode.LIFETIME)throw new y0.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=B.timeoutMode}else if(B.timeoutMode!=null)throw new y0.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===Jw.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let D=Bw.ReadConcern.fromOptions(B);if(D)this.cursorOptions.readConcern=D;if(typeof B.batchSize==="number")this.cursorOptions.batchSize=B.batchSize;if(B.comment!==void 0)this.cursorOptions.comment=B.comment;if(typeof B.maxTimeMS==="number")this.cursorOptions.maxTimeMS=B.maxTimeMS;if(typeof B.maxAwaitTimeMS==="number")this.cursorOptions.maxAwaitTimeMS=B.maxAwaitTimeMS;this.cursorSession=B.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:B?.enableUtf8Validation===!1?!1:!0}},this.timeoutContext=B.timeoutContext,this.signal=B.signal,this.abortListener=Z6.addAbortListener(this.signal,()=>void this.close().then(void 0,Z6.squashError)),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(F){this.cursorSession=F}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async[Symbol.asyncDispose](){await this.close()}trackCursor(){if(this.cursorClient.s.activeCursors.add(this),!this.listeners("close").includes(Dw))this.once("close",Dw)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(F){let A=[],B=Math.min(F??this.documents?.length??0,this.documents?.length??0);for(let D=0;D<B;D++){let X=this.documents?.shift(this.deserializationOptions);if(X!=null)A.push(X)}return A}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),this.closed)return;try{while(!0){if(this.isKilled)return;if(this.closed)return;if(this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let F=await this.next();if(F===null)return;yield F,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(F){Z6.squashError(F)}}}stream(){let F=new Zw(this),A=Z6.addAbortListener(this.signal,function(){F.destroy(this.reason)});return F.once("end",()=>{A?.[Z6.kDispose]()}),F}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===L7.Long.ZERO)return!1;if(this.cursorOptions.timeoutMode===Jw.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===Jw.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===L7.Long.ZERO)throw new y0.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===Jw.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{let F=this.documents?.shift(this.deserializationOptions);if(F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===Jw.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===L7.Long.ZERO)throw new y0.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===Jw.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{let F=this.documents?.shift(this.deserializationOptions);if(F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}if(await this.fetchBatch(),F=this.documents?.shift(this.deserializationOptions),F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}}finally{if(this.cursorOptions.timeoutMode===Jw.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async forEach(F){if(this.signal?.throwIfAborted(),typeof F!=="function")throw new y0.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let A of this)if(F(A)===!1)break}async close(F){await this.cleanup(F?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let F=[];for await(let A of this){F.push(A);let B=this.readBufferedDocuments();if(this.transform!=null)for(let D of B)F.push(await this.transformDocument(D));else for(let D of B)F.push(D)}return F}addCursorFlag(F,A){if(this.throwIfInitialized(),!Jw.CURSOR_FLAGS.includes(F))throw new y0.MongoInvalidArgumentError(`Flag ${F} is not one of ${Jw.CURSOR_FLAGS}`);if(typeof A!=="boolean")throw new y0.MongoInvalidArgumentError(`Flag ${F} must be a boolean value`);return this.cursorOptions[F]=A,this}map(F){this.throwIfInitialized();let A=this.transform;if(A)this.transform=(B)=>{return F(A(B))};else this.transform=F;return this}withReadPreference(F){if(this.throwIfInitialized(),F instanceof CB.ReadPreference)this.cursorOptions.readPreference=F;else if(typeof F==="string")this.cursorOptions.readPreference=CB.ReadPreference.fromString(F);else throw new y0.MongoInvalidArgumentError(`Invalid read preference: ${F}`);return this}withReadConcern(F){this.throwIfInitialized();let A=Bw.ReadConcern.fromOptions({readConcern:F});if(A)this.cursorOptions.readConcern=A;return this}maxTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new y0.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=F,this}batchSize(F){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new y0.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof F!=="number")throw new y0.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=F,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new y0.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");if(!this.initialized)return;if(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1){if(!this.cursorSession.hasEnded)this.cursorSession.endSession().then(void 0,Z6.squashError);this.cursorSession=null}}async getMore(){if(this.cursorId==null)throw new y0.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new y0.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new y0.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let F={...this.cursorOptions,session:this.cursorSession,batchSize:this.cursorOptions.batchSize},A=new ye.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,F);return await Aw.executeOperation(this.cursorClient,A,this.timeoutContext)}async cursorInit(){if(this.cursorOptions.timeoutMS!=null)this.timeoutContext??=new L5(gY.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this);try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let F=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let A=F.response;this.selectedServer=F.server,this.cursorId=A.id,this.cursorNamespace=A.ns??this.namespace,this.documents=A,this.initialized=!0}catch(F){throw this.initialized=!0,await this.cleanup(void 0,F),F}if(this.isDead)await this.cleanup();return}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null){if(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead)return}try{let F=await this.getMore();this.cursorId=F.id,this.documents=F}catch(F){try{await this.cleanup(void 0,F)}catch(A){Z6.squashError(A)}throw F}if(this.isDead)await this.cleanup()}async cleanup(F,A){this.abortListener?.[Z6.kDispose](),this.isClosed=!0;let B=()=>{if(F!=null)return this.timeoutContext?.clear(),new L5(gY.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:F}),this);else return this.timeoutContext?.refreshed()};await(async(Z)=>{try{await Z()}finally{this.emitClose()}})(async()=>{let Z=this.cursorSession;if(!Z)return;try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!Z.hasEnded){this.isKilled=!0;let J=this.cursorId;this.cursorId=L7.Long.ZERO,await Aw.executeOperation(this.cursorClient,new he.KillCursorsOperation(J,this.cursorNamespace,this.selectedServer,{session:Z}),B())}}catch(J){Z6.squashError(J)}finally{if(Z.owner===this)await Z.endSession({error:A});if(!Z.inTransaction())ve.maybeClearPinnedConnection(Z,{error:A})}})}emitClose(){try{if(!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed))this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(F){if(this.transform==null)return F;try{let A=this.transform(F);if(A===null)throw new y0.MongoAPIError("Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.");return A}catch(A){try{await this.close()}catch(B){Z6.squashError(B)}throw A}}throwIfInitialized(){if(this.initialized)throw new y0.MongoCursorInUseError}}Jw.AbstractCursor=Xw;class Zw extends ge.Readable{constructor(F){super({objectMode:!0,autoDestroy:!1,highWaterMark:1});this._readInProgress=!1,this._cursor=F}_read(F){if(!this._readInProgress)this._readInProgress=!0,this._readNext()}_destroy(F,A){this._cursor.close().then(()=>A(F),(B)=>A(B))}_readNext(){if(this._cursor.id===L7.Long.ZERO){this.push(null);return}this._cursor.next().then((F)=>{if(F==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,Z6.squashError);else{if(this.push(F))return this._readNext();this._readInProgress=!1}},(F)=>{if(F.message.match(/server is closed/))return this._cursor.close().then(void 0,Z6.squashError),this.push(null);if(F.message.match(/operation was interrupted/))return this.push(null);return this.destroy(F)}).catch((F)=>{this._readInProgress=!1,this.destroy(F)})}}class L5 extends gY.TimeoutContext{constructor(F,A){super();this.timeoutContext=F,this.owner=A}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!=="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!=="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new L5(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(F,A){this.timeoutContext.addMaxTimeMSToCommand(F,A)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}}Jw.CursorTimeoutContext=L5});var WB=z((Gw)=>{Object.defineProperty(Gw,"__esModule",{value:!0});Gw.ExplainableCursor=void 0;var de=q2();class $w extends de.AbstractCursor{resolveExplainTimeoutOptions(F,A){let B,D;if(F==null&&A==null)B=void 0,D=void 0;else if(F!=null&&A==null)B=typeof F!=="object"?F:("verbosity"in F)?F:void 0,D=typeof F==="object"&&"timeoutMS"in F?F:void 0;else B=F,D=A;return{timeout:D,explain:B}}}Gw.ExplainableCursor=$w});var w5=z((zw)=>{Object.defineProperty(zw,"__esModule",{value:!0});zw.AggregationCursor=void 0;var yY=l(),Cw=Y5(),Ww=H5(),Hw=d0(),ce=s(),qw=q2(),le=WB();class hY extends le.ExplainableCursor{constructor(F,A,B=[],D={}){super(F,A,D);this.pipeline=B,this.aggregateOptions=D;let X=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===qw.CursorTimeoutMode.ITERATION&&(X?.$merge!=null||X?.$out!=null))throw new yY.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let F=ce.mergeOptions({},this.aggregateOptions);return delete F.session,new hY(this.client,this.namespace,this.pipeline,{...F})}map(F){return super.map(F)}async _initialize(F){let A={...this.aggregateOptions,...this.cursorOptions,session:F,signal:this.signal};if(A.explain)try{Cw.validateExplainTimeoutOptions(A,Cw.Explain.fromOptions(A))}catch{throw new yY.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let B=new Ww.AggregateOperation(this.namespace,this.pipeline,A),D=await Hw.executeOperation(this.client,B,this.timeoutContext);return{server:B.server,session:F,response:D}}async explain(F,A){let{explain:B,timeout:D}=this.resolveExplainTimeoutOptions(F,A);return(await Hw.executeOperation(this.client,new Ww.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...D,explain:B??!0}))).shift(this.deserializationOptions)}addStage(F){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===qw.CursorTimeoutMode.ITERATION&&(F.$out!=null||F.$merge!=null))throw new yY.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(F),this}group(F){return this.addStage({$group:F})}limit(F){return this.addStage({$limit:F})}match(F){return this.addStage({$match:F})}out(F){return this.addStage({$out:F})}project(F){return this.addStage({$project:F})}lookup(F){return this.addStage({$lookup:F})}redact(F){return this.addStage({$redact:F})}skip(F){return this.addStage({$skip:F})}sort(F){return this.addStage({$sort:F})}unwind(F){return this.addStage({$unwind:F})}geoNear(F){return this.addStage({$geoNear:F})}}zw.AggregationCursor=hY});var mY=z((Kw)=>{Object.defineProperty(Kw,"__esModule",{value:!0});Kw.CountOperation=void 0;var pe=f1(),ie=G0(),HB=h1();class vY extends ie.CommandOperation{constructor(F,A,B){super({s:{namespace:F}},B);this.SERVER_COMMAND_RESPONSE_TYPE=pe.MongoDBResponse,this.options=B,this.collectionName=F.collection,this.query=A}get commandName(){return"count"}buildCommandDocument(F,A){let B=this.options,D={count:this.collectionName,query:this.query};if(typeof B.limit==="number")D.limit=B.limit;if(typeof B.skip==="number")D.skip=B.skip;if(B.hint!=null)D.hint=B.hint;if(typeof B.maxTimeMS==="number")D.maxTimeMS=B.maxTimeMS;return D}handleOk(F){return F.getNumber("n")??0}}Kw.CountOperation=vY;HB.defineAspects(vY,[HB.Aspect.READ_OPERATION,HB.Aspect.RETRYABLE,HB.Aspect.SUPPORTS_RAW_DATA])});var ww=z((Vw)=>{Object.defineProperty(Vw,"__esModule",{value:!0});Vw.FindOperation=void 0;var dY=f1(),ne=l(),ae=H7(),se=s(),re=G0(),w7=h1();class cY extends re.CommandOperation{constructor(F,A={},B={}){super(void 0,B);if(this.SERVER_COMMAND_RESPONSE_TYPE=dY.CursorResponse,this.options={...B},delete this.options.writeConcern,this.ns=F,typeof A!=="object"||Array.isArray(A))throw new ne.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=A!=null&&A._bsontype==="ObjectId"?{_id:A}:A,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?dY.ExplainedCursorResponse:dY.CursorResponse}get commandName(){return"find"}buildOptions(F){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:F}}handleOk(F){return F}buildCommandDocument(){return te(this.ns,this.filter,this.options)}}Vw.FindOperation=cY;function te(F,A,B){let D={find:F.collection,filter:A};if(B.sort)D.sort=ae.formatSort(B.sort);if(B.projection){let X=B.projection;if(X&&Array.isArray(X))X=X.length?X.reduce((Z,J)=>{return Z[J]=1,Z},{}):{_id:1};D.projection=X}if(B.hint)D.hint=se.normalizeHintField(B.hint);if(typeof B.skip==="number")D.skip=B.skip;if(typeof B.limit==="number")if(B.limit<0)D.limit=-B.limit,D.singleBatch=!0;else D.limit=B.limit;if(typeof B.batchSize==="number")if(B.batchSize<0)D.limit=-B.batchSize;else if(B.batchSize===B.limit)D.batchSize=B.batchSize+1;else D.batchSize=B.batchSize;if(typeof B.singleBatch==="boolean")D.singleBatch=B.singleBatch;if(B.comment!==void 0)D.comment=B.comment;if(B.max)D.max=B.max;if(B.min)D.min=B.min;if(typeof B.returnKey==="boolean")D.returnKey=B.returnKey;if(typeof B.showRecordId==="boolean")D.showRecordId=B.showRecordId;if(typeof B.tailable==="boolean")D.tailable=B.tailable;if(typeof B.oplogReplay==="boolean")D.oplogReplay=B.oplogReplay;if(typeof B.timeout==="boolean")D.noCursorTimeout=!B.timeout;else if(typeof B.noCursorTimeout==="boolean")D.noCursorTimeout=B.noCursorTimeout;if(typeof B.awaitData==="boolean")D.awaitData=B.awaitData;if(typeof B.allowPartialResults==="boolean")D.allowPartialResults=B.allowPartialResults;if(typeof B.allowDiskUse==="boolean")D.allowDiskUse=B.allowDiskUse;if(B.let)D.let=B.let;return D}w7.defineAspects(cY,[w7.Aspect.READ_OPERATION,w7.Aspect.RETRYABLE,w7.Aspect.EXPLAINABLE,w7.Aspect.CURSOR_CREATING,w7.Aspect.SUPPORTS_RAW_DATA])});var nY=z((Pw)=>{Object.defineProperty(Pw,"__esModule",{value:!0});Pw.FindCursor=Pw.FLAGS=void 0;var oe=f1(),U6=l(),Rw=Y5(),ee=mY(),lY=d0(),Iw=ww(),pY=H7(),qB=s(),F11=WB();Pw.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class iY extends F11.ExplainableCursor{constructor(F,A,B={},D={}){super(F,A,D);if(this.numReturned=0,this.cursorFilter=B,this.findOptions=D,D.sort!=null)this.findOptions.sort=pY.formatSort(D.sort)}clone(){let F=qB.mergeOptions({},this.findOptions);return delete F.session,new iY(this.client,this.namespace,this.cursorFilter,{...F})}map(F){return super.map(F)}async _initialize(F){let A={...this.findOptions,...this.cursorOptions,session:F,signal:this.signal};if(A.explain)try{Rw.validateExplainTimeoutOptions(A,Rw.Explain.fromOptions(A))}catch{throw new U6.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let B=new Iw.FindOperation(this.namespace,this.cursorFilter,A),D=await lY.executeOperation(this.client,B,this.timeoutContext);return this.numReturned=D.batchSize,{server:B.server,session:F,response:D}}async getMore(){let F=this.numReturned,A=this.findOptions.limit??1/0,B=A-F;if(F===A&&!this.id?.isZero()){try{await this.close()}catch(Z){qB.squashError(Z)}return oe.CursorResponse.emptyGetMore}let D=qB.noop,{batchSize:X}=this.cursorOptions;if(X!=null&&X>B)this.cursorOptions.batchSize=B,D=()=>{this.cursorOptions.batchSize=X};try{let Z=await super.getMore();return this.numReturned=this.numReturned+Z.batchSize,Z}finally{D?.()}}async count(F){if(qB.emitWarningOnce("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof F==="boolean")throw new U6.MongoInvalidArgumentError("Invalid first parameter to count");return await lY.executeOperation(this.client,new ee.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...F}))}async explain(F,A){let{explain:B,timeout:D}=this.resolveExplainTimeoutOptions(F,A);return(await lY.executeOperation(this.client,new Iw.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...D,explain:B??!0}))).shift(this.deserializationOptions)}filter(F){return this.throwIfInitialized(),this.cursorFilter=F,this}hint(F){return this.throwIfInitialized(),this.findOptions.hint=F,this}min(F){return this.throwIfInitialized(),this.findOptions.min=F,this}max(F){return this.throwIfInitialized(),this.findOptions.max=F,this}returnKey(F){return this.throwIfInitialized(),this.findOptions.returnKey=F,this}showRecordId(F){return this.throwIfInitialized(),this.findOptions.showRecordId=F,this}addQueryModifier(F,A){if(this.throwIfInitialized(),F[0]!=="$")throw new U6.MongoInvalidArgumentError(`${F} is not a valid query modifier`);switch(F.substr(1)){case"comment":this.findOptions.comment=A;break;case"explain":this.findOptions.explain=A;break;case"hint":this.findOptions.hint=A;break;case"max":this.findOptions.max=A;break;case"maxTimeMS":this.findOptions.maxTimeMS=A;break;case"min":this.findOptions.min=A;break;case"orderby":this.findOptions.sort=pY.formatSort(A);break;case"query":this.cursorFilter=A;break;case"returnKey":this.findOptions.returnKey=A;break;case"showDiskLoc":this.findOptions.showRecordId=A;break;default:throw new U6.MongoInvalidArgumentError(`Invalid query modifier: ${F}`)}return this}comment(F){return this.throwIfInitialized(),this.findOptions.comment=F,this}maxAwaitTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new U6.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=F,this}maxTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new U6.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=F,this}project(F){return this.throwIfInitialized(),this.findOptions.projection=F,this}sort(F,A){if(this.throwIfInitialized(),this.findOptions.tailable)throw new U6.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=pY.formatSort(F,A),this}allowDiskUse(F=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new U6.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');if(!F)return this.findOptions.allowDiskUse=!1,this;return this.findOptions.allowDiskUse=!0,this}collation(F){return this.throwIfInitialized(),this.findOptions.collation=F,this}limit(F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new U6.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof F!=="number")throw new U6.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=F,this}skip(F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new U6.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof F!=="number")throw new U6.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=F,this}}Pw.FindCursor=iY});var I5=z((Mw)=>{Object.defineProperty(Mw,"__esModule",{value:!0});Mw.ListIndexesOperation=Mw.DropIndexOperation=Mw.CreateIndexesOperation=void 0;var aY=f1(),B11=l(),sY=s(),rY=G0(),y6=h1(),D11=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function X11(F){return typeof F==="number"||F==="2d"||F==="2dsphere"||F==="text"||F==="geoHaystack"}function Z11(F){return Array.isArray(F)&&F.length===2&&X11(F[1])}function J11(F){let A=new Map,B=!Array.isArray(F)||Z11(F)?[F]:F;for(let D of B)if(typeof D==="string")A.set(D,1);else if(Array.isArray(D))A.set(D[0],D[1]??1);else if(D instanceof Map)for(let[X,Z]of D)A.set(X,Z);else if(sY.isObject(D))for(let[X,Z]of Object.entries(D))A.set(X,Z);return A}function Y11(F){let A=Object.entries(F).filter(([B])=>D11.has(B));return Object.fromEntries(A.map(([B,D])=>B==="version"?["v",D]:[B,D]))}class R5 extends rY.CommandOperation{constructor(F,A,B,D){super(F,D);this.SERVER_COMMAND_RESPONSE_TYPE=aY.MongoDBResponse,this.options=D??{},this.options.collation=void 0,this.collectionName=A,this.indexes=B.map((X)=>{let Z=X.key instanceof Map?X.key:new Map(Object.entries(X.key)),J=X.name??Array.from(Z).flat().join("_");return{...Y11(X),name:J,key:Z}}),this.ns=F.s.namespace}static fromIndexDescriptionArray(F,A,B,D){return new R5(F,A,B,D)}static fromIndexSpecification(F,A,B,D={}){let X=J11(B),Z={...D,key:X};return new R5(F,A,[Z],D)}get commandName(){return"createIndexes"}buildCommandDocument(F){let A=this.options,B=this.indexes,D=sY.maxWireVersion(F),X={createIndexes:this.collectionName,indexes:B};if(A.commitQuorum!=null){if(D<9)throw new B11.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");X.commitQuorum=A.commitQuorum}return X}handleOk(F){return this.indexes.map((B)=>B.name||"")}}Mw.CreateIndexesOperation=R5;class tY extends rY.CommandOperation{constructor(F,A,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=aY.MongoDBResponse,this.options=B??{},this.collection=F,this.indexName=A,this.ns=F.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument(F){return{dropIndexes:this.collection.collectionName,index:this.indexName}}}Mw.DropIndexOperation=tY;class oY extends rY.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=aY.CursorResponse,this.options={...A},delete this.options.writeConcern,this.collectionNamespace=F.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument(F){let A=sY.maxWireVersion(F),B=this.options.batchSize?{batchSize:this.options.batchSize}:{},D={listIndexes:this.collectionNamespace.collection,cursor:B};if(A>=9&&this.options.comment!==void 0)D.comment=this.options.comment;return D}handleOk(F){return F}}Mw.ListIndexesOperation=oY;y6.defineAspects(oY,[y6.Aspect.READ_OPERATION,y6.Aspect.RETRYABLE,y6.Aspect.CURSOR_CREATING,y6.Aspect.SUPPORTS_RAW_DATA]);y6.defineAspects(R5,[y6.Aspect.WRITE_OPERATION,y6.Aspect.SUPPORTS_RAW_DATA]);y6.defineAspects(tY,[y6.Aspect.WRITE_OPERATION,y6.Aspect.SUPPORTS_RAW_DATA])});var F$=z((Tw)=>{Object.defineProperty(Tw,"__esModule",{value:!0});Tw.ListIndexesCursor=void 0;var E11=d0(),C11=I5(),W11=q2();class eY extends W11.AbstractCursor{constructor(F,A){super(F.client,F.s.namespace,A);this.parent=F,this.options=A}clone(){return new eY(this.parent,{...this.options,...this.cursorOptions})}async _initialize(F){let A=new C11.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:F}),B=await E11.executeOperation(this.parent.client,A,this.timeoutContext);return{server:A.server,session:F,response:B}}}Tw.ListIndexesCursor=eY});var xw=z((Ow)=>{Object.defineProperty(Ow,"__esModule",{value:!0});Ow.ListSearchIndexesCursor=void 0;var H11=w5();class uw extends H11.AggregationCursor{constructor({fullNamespace:F,client:A},B,D={}){let X=B==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:B}}];super(A,F,X,D)}}Ow.ListSearchIndexesCursor=uw});var gw=z((_w)=>{Object.defineProperty(_w,"__esModule",{value:!0});_w.DistinctOperation=void 0;var q11=f1(),z11=G0(),P5=h1();class A$ extends z11.CommandOperation{constructor(F,A,B,D){super(F,D);this.SERVER_COMMAND_RESPONSE_TYPE=q11.MongoDBResponse,this.options=D??{},this.collection=F,this.key=A,this.query=B}get commandName(){return"distinct"}buildCommandDocument(F){let A={distinct:this.collection.collectionName,key:this.key,query:this.query};if(this.options.comment!==void 0)A.comment=this.options.comment;if(this.options.hint!=null)A.hint=this.options.hint;return A}handleOk(F){if(this.explain)return F.toObject(this.bsonOptions);return F.toObject(this.bsonOptions).values}}_w.DistinctOperation=A$;P5.defineAspects(A$,[P5.Aspect.READ_OPERATION,P5.Aspect.RETRYABLE,P5.Aspect.EXPLAINABLE,P5.Aspect.SUPPORTS_RAW_DATA])});var hw=z((bw)=>{Object.defineProperty(bw,"__esModule",{value:!0});bw.EstimatedDocumentCountOperation=void 0;var Q11=f1(),K11=G0(),N5=h1();class B$ extends K11.CommandOperation{constructor(F,A={}){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=Q11.MongoDBResponse,this.options=A,this.collectionName=F.collectionName}get commandName(){return"count"}buildCommandDocument(F,A){let B={count:this.collectionName};if(typeof this.options.maxTimeMS==="number")B.maxTimeMS=this.options.maxTimeMS;if(this.options.comment!==void 0)B.comment=this.options.comment;return B}handleOk(F){return F.getNumber("n")??0}}bw.EstimatedDocumentCountOperation=B$;N5.defineAspects(B$,[N5.Aspect.READ_OPERATION,N5.Aspect.RETRYABLE,N5.Aspect.CURSOR_CREATING,N5.Aspect.SUPPORTS_RAW_DATA])});var D$=z((lw)=>{Object.defineProperty(lw,"__esModule",{value:!0});lw.FindOneAndUpdateOperation=lw.FindOneAndReplaceOperation=lw.FindOneAndDeleteOperation=lw.FindAndModifyOperation=lw.ReturnDocument=void 0;var U11=f1(),$4=l(),V11=f0(),L11=H7(),zB=s(),w11=G0(),M5=h1();lw.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function vw(F,A){if(F.new=A.returnDocument===lw.ReturnDocument.AFTER,F.upsert=A.upsert===!0,A.bypassDocumentValidation===!0)F.bypassDocumentValidation=A.bypassDocumentValidation;return F}class R7 extends w11.CommandOperation{constructor(F,A,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=U11.MongoDBResponse,this.options=B,this.readPreference=V11.ReadPreference.primary,this.collection=F,this.query=A}get commandName(){return"findAndModify"}buildCommandDocument(F,A){let B=this.options,D={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};B.includeResultMetadata??=!1;let X=L11.formatSort(B.sort);if(X)D.sort=X;if(B.projection)D.fields=B.projection;if(B.maxTimeMS)D.maxTimeMS=B.maxTimeMS;if(B.writeConcern)D.writeConcern=B.writeConcern;if(B.let)D.let=B.let;if(B.comment!==void 0)D.comment=B.comment;if(zB.decorateWithCollation(D,B),B.hint){if(this.writeConcern?.w===0&&zB.maxWireVersion(F)<9)throw new $4.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");D.hint=B.hint}return D}handleOk(F){let A=super.handleOk(F);return this.options.includeResultMetadata?A:A.value??null}}lw.FindAndModifyOperation=R7;class mw extends R7{constructor(F,A,B){if(A==null||typeof A!=="object")throw new $4.MongoInvalidArgumentError('Argument "filter" must be an object');super(F,A,B)}buildCommandDocument(F,A){let B=super.buildCommandDocument(F,A);return B.remove=!0,B}}lw.FindOneAndDeleteOperation=mw;class dw extends R7{constructor(F,A,B,D){if(A==null||typeof A!=="object")throw new $4.MongoInvalidArgumentError('Argument "filter" must be an object');if(B==null||typeof B!=="object")throw new $4.MongoInvalidArgumentError('Argument "replacement" must be an object');if(zB.hasAtomicOperators(B))throw new $4.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(F,A,D);this.replacement=B}buildCommandDocument(F,A){let B=super.buildCommandDocument(F,A);return B.update=this.replacement,vw(B,this.options),B}}lw.FindOneAndReplaceOperation=dw;class cw extends R7{constructor(F,A,B,D){if(A==null||typeof A!=="object")throw new $4.MongoInvalidArgumentError('Argument "filter" must be an object');if(B==null||typeof B!=="object")throw new $4.MongoInvalidArgumentError('Argument "update" must be an object');if(!zB.hasAtomicOperators(B,D))throw new $4.MongoInvalidArgumentError("Update document requires atomic operators");super(F,A,D);this.update=B,this.options=D}buildCommandDocument(F,A){let B=super.buildCommandDocument(F,A);if(B.update=this.update,vw(B,this.options),this.options.arrayFilters)B.arrayFilters=this.options.arrayFilters;return B}}lw.FindOneAndUpdateOperation=cw;M5.defineAspects(R7,[M5.Aspect.WRITE_OPERATION,M5.Aspect.RETRYABLE,M5.Aspect.EXPLAINABLE,M5.Aspect.SUPPORTS_RAW_DATA])});var Z$=z((aw)=>{Object.defineProperty(aw,"__esModule",{value:!0});aw.RenameOperation=void 0;var N11=f1(),M11=I7(),j11=s(),T11=G0(),nw=h1();class X$ extends T11.CommandOperation{constructor(F,A,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=N11.MongoDBResponse,this.collection=F,this.newName=A,this.options=B,this.ns=new j11.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument(F,A){let B=this.collection.namespace,D=this.collection.s.namespace.withCollection(this.newName).toString(),X=typeof this.options.dropTarget==="boolean"?this.options.dropTarget:!1;return{renameCollection:B,to:D,dropTarget:X}}handleOk(F){return new M11.Collection(this.collection.db,this.newName,this.collection.s.options)}}aw.RenameOperation=X$;nw.defineAspects(X$,[nw.Aspect.WRITE_OPERATION])});var ew=z((tw)=>{Object.defineProperty(tw,"__esModule",{value:!0});tw.CreateSearchIndexesOperation=void 0;var k11=f1(),u11=h1();class rw extends u11.AbstractOperation{constructor(F,A){super();this.SERVER_COMMAND_RESPONSE_TYPE=k11.MongoDBResponse,this.collection=F,this.descriptions=A,this.ns=F.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand(F,A){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk(F){return super.handleOk(F).indexesCreated.map((A)=>A.name)}buildOptions(F){return{session:this.session,timeoutContext:F}}}tw.CreateSearchIndexesOperation=rw});var XR=z((BR)=>{Object.defineProperty(BR,"__esModule",{value:!0});BR.DropSearchIndexOperation=void 0;var O11=f1(),FR=l(),S11=h1();class AR extends S11.AbstractOperation{constructor(F,A){super();this.SERVER_COMMAND_RESPONSE_TYPE=O11.MongoDBResponse,this.collection=F,this.name=A,this.ns=F.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand(F,A){let D={dropSearchIndex:this.collection.fullNamespace.collection};if(typeof this.name==="string")D.name=this.name;return D}handleOk(F){}buildOptions(F){return{session:this.session,timeoutContext:F}}handleError(F){if(!(F instanceof FR.MongoServerError&&F.code===FR.MONGODB_ERROR_CODES.NamespaceNotFound))throw F}}BR.DropSearchIndexOperation=AR});var $R=z((JR)=>{Object.defineProperty(JR,"__esModule",{value:!0});JR.UpdateSearchIndexOperation=void 0;var x11=f1(),_11=h1();class ZR extends _11.AbstractOperation{constructor(F,A,B){super();this.SERVER_COMMAND_RESPONSE_TYPE=x11.MongoDBResponse,this.collection=F,this.name=A,this.definition=B,this.ns=F.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand(F,A){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk(F){}buildOptions(F){return{session:this.session,timeoutContext:F}}}JR.UpdateSearchIndexOperation=ZR});var I7=z((WR)=>{Object.defineProperty(WR,"__esModule",{value:!0});WR.Collection=void 0;var f11=$1(),g11=QY(),b11=KY(),y11=N7(),h11=w5(),v11=nY(),m11=F$(),d11=xw(),P7=l(),c11=mY(),GR=cJ(),l11=gw(),p11=hw(),I0=d0(),J$=D$(),QB=I5(),i11=tJ(),n11=Z$(),a11=ew(),s11=XR(),r11=$R(),Y$=BY(),t11=_6(),$$=f0(),b1=s(),ER=P2();class CR{constructor(F,A,B){this.db=F,this.s={db:F,options:B,namespace:new b1.MongoDBCollectionNamespace(F.databaseName,A),pkFactory:F.options?.pkFactory??b1.DEFAULT_PK_FACTORY,readPreference:$$.ReadPreference.fromOptions(B),bsonOptions:f11.resolveBSONOptions(B,F),readConcern:t11.ReadConcern.fromOptions(B),writeConcern:ER.WriteConcern.fromOptions(B)},this.client=F.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){if(this.s.readConcern==null)return this.db.readConcern;return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.db.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){if(this.s.writeConcern==null)return this.db.writeConcern;return this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(F){this.s.collectionHint=b1.normalizeHintField(F)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(F,A){return await I0.executeOperation(this.client,new i11.InsertOneOperation(this,F,b1.resolveOptions(this,A)))}async insertMany(F,A){if(!Array.isArray(F))throw new P7.MongoInvalidArgumentError('Argument "docs" must be an array of documents');A=b1.resolveOptions(this,A??{});let B=ER.WriteConcern.fromOptions(A)?.w!==0;try{let D=await this.bulkWrite(F.map((X)=>({insertOne:{document:X}})),A);return{acknowledged:B,insertedCount:D.insertedCount,insertedIds:D.insertedIds}}catch(D){if(D&&D.message==="Operation must be an object with an operation key")throw new P7.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values");throw D}}async bulkWrite(F,A){if(!Array.isArray(F))throw new P7.MongoInvalidArgumentError('Argument "operations" must be an array of documents');if(A=b1.resolveOptions(this,A??{}),this.client.topology==null)await I0.autoConnect(this.client);let D=A.ordered===!1?this.initializeUnorderedBulkOp(A):this.initializeOrderedBulkOp(A);for(let X of F)D.raw(X);return await D.execute({...A})}async updateOne(F,A,B){return await I0.executeOperation(this.client,new Y$.UpdateOneOperation(this.s.namespace,F,A,b1.resolveOptions(this,B)))}async replaceOne(F,A,B){return await I0.executeOperation(this.client,new Y$.ReplaceOneOperation(this.s.namespace,F,A,b1.resolveOptions(this,B)))}async updateMany(F,A,B){return await I0.executeOperation(this.client,new Y$.UpdateManyOperation(this.s.namespace,F,A,b1.resolveOptions(this,B)))}async deleteOne(F={},A={}){return await I0.executeOperation(this.client,new GR.DeleteOneOperation(this.s.namespace,F,b1.resolveOptions(this,A)))}async deleteMany(F={},A={}){return await I0.executeOperation(this.client,new GR.DeleteManyOperation(this.s.namespace,F,b1.resolveOptions(this,A)))}async rename(F,A){return await I0.executeOperation(this.client,new n11.RenameOperation(this,F,b1.resolveOptions(void 0,{...A,readPreference:$$.ReadPreference.PRIMARY})))}async drop(F){return await this.db.dropCollection(this.collectionName,F)}async findOne(F={},A={}){let{...B}=A;B.singleBatch=!0;let D=this.find(F,B).limit(1),X=await D.next();return await D.close(),X}find(F={},A={}){return new v11.FindCursor(this.client,this.s.namespace,F,b1.resolveOptions(this,A))}async options(F){F=b1.resolveOptions(this,F);let[A]=await this.db.listCollections({name:this.collectionName},{...F,nameOnly:!1}).toArray();if(A==null||A.options==null)throw new P7.MongoAPIError(`collection ${this.namespace} not found`);return A.options}async isCapped(F){let{capped:A}=await this.options(F);return Boolean(A)}async createIndex(F,A){return(await I0.executeOperation(this.client,QB.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,F,b1.resolveOptions(this,A))))[0]}async createIndexes(F,A){return await I0.executeOperation(this.client,QB.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,F,b1.resolveOptions(this,{...A,maxTimeMS:void 0})))}async dropIndex(F,A){return await I0.executeOperation(this.client,new QB.DropIndexOperation(this,F,{...b1.resolveOptions(this,A),readPreference:$$.ReadPreference.primary}))}async dropIndexes(F){try{return await I0.executeOperation(this.client,new QB.DropIndexOperation(this,"*",b1.resolveOptions(this,F))),!0}catch(A){if(A instanceof P7.MongoOperationTimeoutError)throw A;return!1}}listIndexes(F){return new m11.ListIndexesCursor(this,b1.resolveOptions(this,F))}async indexExists(F,A){let B=Array.isArray(F)?F:[F],D=new Set(await this.listIndexes(A).map(({name:X})=>X).toArray());return B.every((X)=>D.has(X))}async indexInformation(F){return await this.indexes({...F,full:F?.full??!1})}async estimatedDocumentCount(F){return await I0.executeOperation(this.client,new p11.EstimatedDocumentCountOperation(this,b1.resolveOptions(this,F)))}async countDocuments(F={},A={}){let B=[];if(B.push({$match:F}),typeof A.skip==="number")B.push({$skip:A.skip});if(typeof A.limit==="number")B.push({$limit:A.limit});B.push({$group:{_id:1,n:{$sum:1}}});let D=this.aggregate(B,A),X=await D.next();return await D.close(),X?.n??0}async distinct(F,A={},B={}){return await I0.executeOperation(this.client,new l11.DistinctOperation(this,F,A,b1.resolveOptions(this,B)))}async indexes(F){let A=await this.listIndexes(F).toArray();if(F?.full??!0)return A;return Object.fromEntries(A.map(({name:X,key:Z})=>[X,Object.entries(Z)]))}async findOneAndDelete(F,A){return await I0.executeOperation(this.client,new J$.FindOneAndDeleteOperation(this,F,b1.resolveOptions(this,A)))}async findOneAndReplace(F,A,B){return await I0.executeOperation(this.client,new J$.FindOneAndReplaceOperation(this,F,A,b1.resolveOptions(this,B)))}async findOneAndUpdate(F,A,B){return await I0.executeOperation(this.client,new J$.FindOneAndUpdateOperation(this,F,A,b1.resolveOptions(this,B)))}aggregate(F=[],A){if(!Array.isArray(F))throw new P7.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new h11.AggregationCursor(this.client,this.s.namespace,F,b1.resolveOptions(this,A))}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new y11.ChangeStream(this,F,b1.resolveOptions(this,A))}initializeUnorderedBulkOp(F){return new b11.UnorderedBulkOperation(this,b1.resolveOptions(this,F))}initializeOrderedBulkOp(F){return new g11.OrderedBulkOperation(this,b1.resolveOptions(this,F))}async count(F={},A={}){return await I0.executeOperation(this.client,new c11.CountOperation(this.fullNamespace,F,b1.resolveOptions(this,A)))}listSearchIndexes(F,A){A=typeof F==="object"?F:A==null?{}:A;let B=F==null?null:typeof F==="object"?null:F;return new d11.ListSearchIndexesCursor(this,B,A)}async createSearchIndex(F){let[A]=await this.createSearchIndexes([F]);return A}async createSearchIndexes(F){return await I0.executeOperation(this.client,new a11.CreateSearchIndexesOperation(this,F))}async dropSearchIndex(F){return await I0.executeOperation(this.client,new s11.DropSearchIndexOperation(this,F))}async updateSearchIndex(F,A){return await I0.executeOperation(this.client,new r11.UpdateSearchIndexOperation(this,F,A))}}WR.Collection=CR});var C$=z((QR)=>{Object.defineProperty(QR,"__esModule",{value:!0});QR.ChangeStreamCursor=void 0;var G$=N7(),qR=w0(),o11=H5(),e11=d0(),zR=s(),F01=q2();class E$ extends F01.AbstractCursor{constructor(F,A,B=[],D={}){super(F,A,{...D,tailable:!0,awaitData:!0});if(this.pipeline=B,this.changeStreamCursorOptions=D,this._resumeToken=null,this.startAtOperationTime=D.startAtOperationTime??null,D.startAfter)this.resumeToken=D.startAfter;else if(D.resumeAfter)this.resumeToken=D.resumeAfter}set resumeToken(F){this._resumeToken=F,this.emit(G$.ChangeStream.RESUME_TOKEN_CHANGED,F)}get resumeToken(){return this._resumeToken}get resumeOptions(){let F={...this.changeStreamCursorOptions};for(let A of["resumeAfter","startAfter","startAtOperationTime"])delete F[A];if(this.resumeToken!=null)if(this.changeStreamCursorOptions.startAfter&&!this.hasReceived)F.startAfter=this.resumeToken;else F.resumeAfter=this.resumeToken;else if(this.startAtOperationTime!=null)F.startAtOperationTime=this.startAtOperationTime;return F}cacheResumeToken(F){if(this.bufferedCount()===0&&this.postBatchResumeToken)this.resumeToken=this.postBatchResumeToken;else this.resumeToken=F;this.hasReceived=!0}_processBatch(F){let{postBatchResumeToken:A}=F;if(A){if(this.postBatchResumeToken=A,F.batchSize===0)this.resumeToken=A}}clone(){return new E$(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(F){let A=new o11.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:F}),B=await e11.executeOperation(F.client,A,this.timeoutContext),D=A.server;if(this.maxWireVersion=zR.maxWireVersion(D),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null)this.startAtOperationTime=B.operationTime;return this._processBatch(B),this.emit(qR.INIT,B),this.emit(qR.RESPONSE),{server:D,session:F,response:B}}async getMore(){let F=await super.getMore();return this.maxWireVersion=zR.maxWireVersion(this.server),this._processBatch(F),this.emit(G$.ChangeStream.MORE,F),this.emit(G$.ChangeStream.RESPONSE),F}}QR.ChangeStreamCursor=E$});var LR=z((UR)=>{Object.defineProperty(UR,"__esModule",{value:!0});UR.ListCollectionsOperation=void 0;var W$=f1(),A01=s(),B01=G0(),j5=h1();class H$ extends B01.CommandOperation{constructor(F,A,B){super(F,B);if(this.SERVER_COMMAND_RESPONSE_TYPE=W$.CursorResponse,this.options={...B},delete this.options.writeConcern,this.db=F,this.filter=A,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize==="number")this.batchSize=this.options.batchSize;this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?W$.ExplainedCursorResponse:W$.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument(F){let A={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};if(A01.maxWireVersion(F)>=9&&this.options.comment!==void 0)A.comment=this.options.comment;return A}handleOk(F){return F}}UR.ListCollectionsOperation=H$;j5.defineAspects(H$,[j5.Aspect.READ_OPERATION,j5.Aspect.RETRYABLE,j5.Aspect.CURSOR_CREATING,j5.Aspect.SUPPORTS_RAW_DATA])});var z$=z((wR)=>{Object.defineProperty(wR,"__esModule",{value:!0});wR.ListCollectionsCursor=void 0;var D01=d0(),X01=LR(),Z01=q2();class q$ extends Z01.AbstractCursor{constructor(F,A,B){super(F.client,F.s.namespace,B);this.parent=F,this.filter=A,this.options=B}clone(){return new q$(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(F){let A=new X01.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:F,signal:this.signal}),B=await D01.executeOperation(this.parent.client,A,this.timeoutContext);return{server:A.server,session:F,response:B}}}wR.ListCollectionsCursor=q$});var jR=z((NR)=>{Object.defineProperty(NR,"__esModule",{value:!0});NR.RunCommandCursor=void 0;var M7=l(),IR=d0(),J01=NY(),Y01=U5(),$01=s(),G01=q2();class PR extends G01.AbstractCursor{setComment(F){return this.getMoreOptions.comment=F,this}setMaxTimeMS(F){return this.getMoreOptions.maxAwaitTimeMS=F,this}setBatchSize(F){return this.getMoreOptions.batchSize=F,this}clone(){throw new M7.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(F){throw new M7.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(F,A){throw new M7.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(F){throw new M7.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(F){throw new M7.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(F,A,B={}){super(F.client,$01.ns(F.namespace),B);this.getMoreOptions={},this.db=F,this.command=Object.freeze({...A})}async _initialize(F){let A=new Y01.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:F,readPreference:this.cursorOptions.readPreference}),B=await IR.executeOperation(this.client,A,this.timeoutContext);return{server:A.server,session:F,response:B}}async getMore(){if(!this.session)throw new M7.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let F=new J01.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await IR.executeOperation(this.client,F,this.timeoutContext)}}NR.RunCommandCursor=PR});var SR=z((uR)=>{Object.defineProperty(uR,"__esModule",{value:!0});uR.CreateCollectionOperation=void 0;uR.createCollections=V01;var TR=P3(),E01=f1(),C01=I7(),W01=l(),H01=g0(),q01=s(),z01=G0(),Q$=d0(),Q01=I5(),kR=h1(),K01=new Set(["w","wtimeout","timeoutMS","j","fsync","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),U01="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.";class T5 extends z01.CommandOperation{constructor(F,A,B={}){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=E01.MongoDBResponse,this.options=B,this.db=F,this.name=A}get commandName(){return"create"}buildCommandDocument(F,A){let B=([D,X])=>X!=null&&typeof X!=="function"&&!K01.has(D);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter(B))}}handleOk(F){return new C01.Collection(this.db,this.name,this.options)}}uR.CreateCollectionOperation=T5;async function V01(F,A,B){let D=H01.TimeoutContext.create({session:B.session,serverSelectionTimeoutMS:F.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.client.s.options.waitQueueTimeoutMS,timeoutMS:B.timeoutMS}),X=B.encryptedFields??F.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${F.databaseName}.${A}`];if(X){class J extends T5{buildCommandDocument(G,E){if(!G.description.loadBalanced&&q01.maxWireVersion(G)<TR.MIN_SUPPORTED_QE_WIRE_VERSION)throw new W01.MongoCompatibilityError(`${U01} The minimum server version required is ${TR.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(G,E)}}let Y=X.escCollection??`enxcol_.${A}.esc`,$=X.ecocCollection??`enxcol_.${A}.ecoc`;for(let G of[Y,$]){let E=new J(F,G,{clusteredIndex:{key:{_id:1},unique:!0},session:B.session});await Q$.executeOperation(F.client,E,D)}if(!B.encryptedFields)B={...B,encryptedFields:X}}let Z=await Q$.executeOperation(F.client,new T5(F,A,B),D);if(X){let J=Q01.CreateIndexesOperation.fromIndexSpecification(F,A,{__safeContent__:1},{session:B.session});await Q$.executeOperation(F.client,J,D)}return Z}kR.defineAspects(T5,[kR.Aspect.WRITE_OPERATION])});var yR=z((gR)=>{Object.defineProperty(gR,"__esModule",{value:!0});gR.DropDatabaseOperation=gR.DropCollectionOperation=void 0;gR.dropCollections=N01;var w01=G4(),_R=f1(),R01=q2(),I01=l(),P01=g0(),fR=G0(),xR=d0(),KB=h1();class k5 extends fR.CommandOperation{constructor(F,A,B={}){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=_R.MongoDBResponse,this.options=B,this.name=A}get commandName(){return"drop"}buildCommandDocument(F,A){return{drop:this.name}}handleOk(F){return!0}handleError(F){if(!(F instanceof w01.MongoServerError))throw F;if(Number(F.code)!==I01.MONGODB_ERROR_CODES.NamespaceNotFound)throw F;return!1}}gR.DropCollectionOperation=k5;async function N01(F,A,B){let D=P01.TimeoutContext.create({session:B.session,serverSelectionTimeoutMS:F.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.client.s.options.waitQueueTimeoutMS,timeoutMS:B.timeoutMS}),X=F.client.s.options.autoEncryption?.encryptedFieldsMap,Z=B.encryptedFields??X?.[`${F.databaseName}.${A}`];if(!Z&&X)Z=(await F.listCollections({name:A},{nameOnly:!1,session:B.session,timeoutContext:new R01.CursorTimeoutContext(D,Symbol())}).toArray())?.[0]?.options?.encryptedFields;if(Z){let J=Z.escCollection||`enxcol_.${A}.esc`,Y=Z.ecocCollection||`enxcol_.${A}.ecoc`;for(let $ of[J,Y]){let G=new k5(F,$,B);await xR.executeOperation(F.client,G,D)}}return await xR.executeOperation(F.client,new k5(F,A,B),D)}class K$ extends fR.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=_R.MongoDBResponse,this.options=A}get commandName(){return"dropDatabase"}buildCommandDocument(F,A){return{dropDatabase:1}}handleOk(F){return!0}}gR.DropDatabaseOperation=K$;KB.defineAspects(k5,[KB.Aspect.WRITE_OPERATION]);KB.defineAspects(K$,[KB.Aspect.WRITE_OPERATION])});var lR=z((dR)=>{Object.defineProperty(dR,"__esModule",{value:!0});dR.ProfilingLevelOperation=void 0;var T01=$1(),k01=f1(),hR=l(),u01=G0();class vR extends k01.MongoDBResponse{get was(){return this.get("was",T01.BSONType.int,!0)}}class mR extends u01.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=vR,this.options=A}get commandName(){return"profile"}buildCommandDocument(F){return{profile:-1}}handleOk(F){if(F.ok===1){let A=F.was;if(A===0)return"off";if(A===1)return"slow_only";if(A===2)return"all";throw new hR.MongoUnexpectedServerResponseError(`Illegal profiling level value ${A}`)}else throw new hR.MongoUnexpectedServerResponseError("Error with profile command")}}dR.ProfilingLevelOperation=mR});var U$=z((iR)=>{Object.defineProperty(iR,"__esModule",{value:!0});iR.SetProfilingLevelOperation=iR.ProfilingLevel=void 0;var O01=f1(),S01=l(),x01=s(),_01=G0(),f01=new Set(["off","slow_only","all"]);iR.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});class pR extends _01.CommandOperation{constructor(F,A,B){super(F,B);switch(this.SERVER_COMMAND_RESPONSE_TYPE=O01.MongoDBResponse,this.options=B,A){case iR.ProfilingLevel.off:this.profile=0;break;case iR.ProfilingLevel.slowOnly:this.profile=1;break;case iR.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=A}get commandName(){return"profile"}buildCommandDocument(F){let A=this.level;if(!f01.has(A))throw new S01.MongoInvalidArgumentError(`Profiling level must be one of "${x01.enumToString(iR.ProfilingLevel)}"`);return{profile:this.profile}}handleOk(F){return this.level}}iR.SetProfilingLevelOperation=pR});var tR=z((sR)=>{Object.defineProperty(sR,"__esModule",{value:!0});sR.DbStatsOperation=void 0;var g01=f1(),b01=G0(),aR=h1();class V$ extends b01.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=g01.MongoDBResponse,this.options=A}get commandName(){return"dbStats"}buildCommandDocument(F){let A={dbStats:!0};if(this.options.scale!=null)A.scale=this.options.scale;return A}}sR.DbStatsOperation=V$;aR.defineAspects(V$,[aR.Aspect.READ_OPERATION])});var UB=z((XI)=>{Object.defineProperty(XI,"__esModule",{value:!0});XI.Db=void 0;var y01=zY(),oR=$1(),h01=N7(),eR=I7(),j7=w0(),v01=w5(),m01=z$(),d01=jR(),FI=l(),c01=SR(),AI=yR(),E4=d0(),l01=I5(),p01=lR(),i01=WY(),n01=Z$(),a01=U5(),s01=U$(),r01=tR(),t01=_6(),BI=f0(),c0=s(),o01=P2(),e01=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"];class DI{static{this.SYSTEM_NAMESPACE_COLLECTION=j7.SYSTEM_NAMESPACE_COLLECTION}static{this.SYSTEM_INDEX_COLLECTION=j7.SYSTEM_INDEX_COLLECTION}static{this.SYSTEM_PROFILE_COLLECTION=j7.SYSTEM_PROFILE_COLLECTION}static{this.SYSTEM_USER_COLLECTION=j7.SYSTEM_USER_COLLECTION}static{this.SYSTEM_COMMAND_COLLECTION=j7.SYSTEM_COMMAND_COLLECTION}static{this.SYSTEM_JS_COLLECTION=j7.SYSTEM_JS_COLLECTION}constructor(F,A,B){if(B=B??{},B=c0.filterOptions(B,e01),typeof A==="string"&&A.includes("."))throw new FI.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:B,readPreference:BI.ReadPreference.fromOptions(B),bsonOptions:oR.resolveBSONOptions(B,F),pkFactory:B?.pkFactory??c0.DEFAULT_PK_FACTORY,readConcern:t01.ReadConcern.fromOptions(B),writeConcern:o01.WriteConcern.fromOptions(B),namespace:new c0.MongoDBNamespace(A)},this.client=F}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.client.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(F,A){return A=c0.resolveOptions(this,A),await c01.createCollections(this,F,A)}async command(F,A){return await E4.executeOperation(this.client,new a01.RunCommandOperation(this.s.namespace,F,c0.resolveOptions(void 0,{...oR.resolveBSONOptions(A),timeoutMS:A?.timeoutMS??this.timeoutMS,session:A?.session,readPreference:A?.readPreference,signal:A?.signal})))}aggregate(F=[],A){return new v01.AggregationCursor(this.client,this.s.namespace,F,c0.resolveOptions(this,A))}admin(){return new y01.Admin(this)}collection(F,A={}){if(typeof A==="function")throw new FI.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new eR.Collection(this,F,c0.resolveOptions(this,A))}async stats(F){return await E4.executeOperation(this.client,new r01.DbStatsOperation(this,c0.resolveOptions(this,F)))}listCollections(F={},A={}){return new m01.ListCollectionsCursor(this,F,c0.resolveOptions(this,A))}async renameCollection(F,A,B){return await E4.executeOperation(this.client,new n01.RenameOperation(this.collection(F),A,c0.resolveOptions(void 0,{...B,new_collection:!0,readPreference:BI.ReadPreference.primary})))}async dropCollection(F,A){return A=c0.resolveOptions(this,A),await AI.dropCollections(this,F,A)}async dropDatabase(F){return await E4.executeOperation(this.client,new AI.DropDatabaseOperation(this,c0.resolveOptions(this,F)))}async collections(F){return F=c0.resolveOptions(this,F),(await this.listCollections({},{...F,nameOnly:!0}).toArray()).filter(({name:B})=>!B.includes("$")).map(({name:B})=>new eR.Collection(this,B,this.s.options))}async createIndex(F,A,B){return(await E4.executeOperation(this.client,l01.CreateIndexesOperation.fromIndexSpecification(this,F,A,B)))[0]}async removeUser(F,A){return await E4.executeOperation(this.client,new i01.RemoveUserOperation(this,F,c0.resolveOptions(this,A)))}async setProfilingLevel(F,A){return await E4.executeOperation(this.client,new s01.SetProfilingLevelOperation(this,F,c0.resolveOptions(this,A)))}async profilingLevel(F){return await E4.executeOperation(this.client,new p01.ProfilingLevelOperation(this,c0.resolveOptions(this,F)))}async indexInformation(F,A){return await this.collection(F).indexInformation(c0.resolveOptions(this,A))}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new h01.ChangeStream(this,F,c0.resolveOptions(this,A))}runCursorCommand(F,A){return new d01.RunCommandCursor(this,F,A)}}XI.Db=DI});var YI=z((JI)=>{var X1=JI,VB=m("buffer").Buffer,F21=m("os");X1.toBuffer=function(F,A,B){B=~~B;var D;if(this.isV4Format(F))D=A||new VB(B+4),F.split(/\./g).map(function(E){D[B++]=parseInt(E,10)&255});else if(this.isV6Format(F)){var X=F.split(":",8),Z;for(Z=0;Z<X.length;Z++){var J=this.isV4Format(X[Z]),Y;if(J)Y=this.toBuffer(X[Z]),X[Z]=Y.slice(0,2).toString("hex");if(Y&&++Z<8)X.splice(Z,0,Y.slice(2,4).toString("hex"))}if(X[0]==="")while(X.length<8)X.unshift("0");else if(X[X.length-1]==="")while(X.length<8)X.push("0");else if(X.length<8){for(Z=0;Z<X.length&&X[Z]!=="";Z++);var $=[Z,1];for(Z=9-X.length;Z>0;Z--)$.push("0");X.splice.apply(X,$)}D=A||new VB(B+16);for(Z=0;Z<X.length;Z++){var G=parseInt(X[Z],16);D[B++]=G>>8&255,D[B++]=G&255}}if(!D)throw Error("Invalid ip address: "+F);return D};X1.toString=function(F,A,B){A=~~A,B=B||F.length-A;var D=[];if(B===4){for(var X=0;X<B;X++)D.push(F[A+X]);D=D.join(".")}else if(B===16){for(var X=0;X<B;X+=2)D.push(F.readUInt16BE(A+X).toString(16));D=D.join(":"),D=D.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),D=D.replace(/:{3,4}/,"::")}return D};var A21=/^(\d{1,3}\.){3,3}\d{1,3}$/,B21=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;X1.isV4Format=function(F){return A21.test(F)};X1.isV6Format=function(F){return B21.test(F)};function L$(F){return F?F.toLowerCase():"ipv4"}X1.fromPrefixLen=function(F,A){if(F>32)A="ipv6";else A=L$(A);var B=4;if(A==="ipv6")B=16;var D=new VB(B);for(var X=0,Z=D.length;X<Z;++X){var J=8;if(F<8)J=F;F-=J,D[X]=~(255>>J)&255}return X1.toString(D)};X1.mask=function(F,A){F=X1.toBuffer(F),A=X1.toBuffer(A);var B=new VB(Math.max(F.length,A.length)),D=0;if(F.length===A.length)for(D=0;D<F.length;D++)B[D]=F[D]&A[D];else if(A.length===4)for(D=0;D<A.length;D++)B[D]=F[F.length-4+D]&A[D];else{for(var D=0;D<B.length-6;D++)B[D]=0;B[10]=255,B[11]=255;for(D=0;D<F.length;D++)B[D+12]=F[D]&A[D+12];D=D+12}for(;D<B.length;D++)B[D]=0;return X1.toString(B)};X1.cidr=function(F){var A=F.split("/"),B=A[0];if(A.length!==2)throw new Error("invalid CIDR subnet: "+B);var D=X1.fromPrefixLen(parseInt(A[1],10));return X1.mask(B,D)};X1.subnet=function(F,A){var B=X1.toLong(X1.mask(F,A)),D=X1.toBuffer(A),X=0;for(var Z=0;Z<D.length;Z++)if(D[Z]===255)X+=8;else{var J=D[Z]&255;while(J)J=J<<1&255,X++}var Y=Math.pow(2,32-X);return{networkAddress:X1.fromLong(B),firstAddress:Y<=2?X1.fromLong(B):X1.fromLong(B+1),lastAddress:Y<=2?X1.fromLong(B+Y-1):X1.fromLong(B+Y-2),broadcastAddress:X1.fromLong(B+Y-1),subnetMask:A,subnetMaskLength:X,numHosts:Y<=2?Y:Y-2,length:Y,contains:function($){return B===X1.toLong(X1.mask($,A))}}};X1.cidrSubnet=function(F){var A=F.split("/"),B=A[0];if(A.length!==2)throw new Error("invalid CIDR subnet: "+B);var D=X1.fromPrefixLen(parseInt(A[1],10));return X1.subnet(B,D)};X1.not=function(F){var A=X1.toBuffer(F);for(var B=0;B<A.length;B++)A[B]=255^A[B];return X1.toString(A)};X1.or=function(F,A){if(F=X1.toBuffer(F),A=X1.toBuffer(A),F.length===A.length){for(var B=0;B<F.length;++B)F[B]|=A[B];return X1.toString(F)}else{var D=F,X=A;if(A.length>F.length)D=A,X=F;var Z=D.length-X.length;for(var B=Z;B<D.length;++B)D[B]|=X[B-Z];return X1.toString(D)}};X1.isEqual=function(F,A){if(F=X1.toBuffer(F),A=X1.toBuffer(A),F.length===A.length){for(var B=0;B<F.length;B++)if(F[B]!==A[B])return!1;return!0}if(A.length===4){var D=A;A=F,F=D}for(var B=0;B<10;B++)if(A[B]!==0)return!1;var X=A.readUInt16BE(10);if(X!==0&&X!==65535)return!1;for(var B=0;B<4;B++)if(F[B]!==A[B+12])return!1;return!0};X1.isPrivate=function(F){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(F)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(F)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(F)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(F)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(F)||/^f[cd][0-9a-f]{2}:/i.test(F)||/^fe80:/i.test(F)||/^::1$/.test(F)||/^::$/.test(F)};X1.isPublic=function(F){return!X1.isPrivate(F)};X1.isLoopback=function(F){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(F)||/^fe80::1$/.test(F)||/^::1$/.test(F)||/^::$/.test(F)};X1.loopback=function(F){if(F=L$(F),F!=="ipv4"&&F!=="ipv6")throw new Error("family must be ipv4 or ipv6");return F==="ipv4"?"127.0.0.1":"fe80::1"};X1.address=function(F,A){var B=F21.networkInterfaces(),X;if(A=L$(A),F&&F!=="private"&&F!=="public"){var D=B[F].filter(function(Z){var J=Z.family.toLowerCase();return J===A});if(D.length===0)return;return D[0].address}var X=Object.keys(B).map(function(Z){var J=B[Z].filter(function(Y){if(Y.family=Y.family.toLowerCase(),Y.family!==A||X1.isLoopback(Y.address))return!1;else if(!F)return!0;return F==="public"?X1.isPrivate(Y.address):X1.isPublic(Y.address)});return J.length?J[0].address:void 0}).filter(Boolean);return!X.length?X1.loopback(A):X[0]};X1.toLong=function(F){var A=0;return F.split(".").forEach(function(B){A<<=8,A+=parseInt(B)}),A>>>0};X1.fromLong=function(F){return(F>>>24)+"."+(F>>16&255)+"."+(F>>8&255)+"."+(F&255)}});var WI=z((CI)=>{Object.defineProperty(CI,"__esModule",{value:!0});var $I=m("buffer"),Y9={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};CI.ERRORS=Y9;function D21(F){if(!$I.Buffer.isEncoding(F))throw new Error(Y9.INVALID_ENCODING)}CI.checkEncoding=D21;function GI(F){return typeof F==="number"&&isFinite(F)&&Y21(F)}CI.isFiniteInteger=GI;function EI(F,A){if(typeof F==="number"){if(!GI(F)||F<0)throw new Error(A?Y9.INVALID_OFFSET:Y9.INVALID_LENGTH)}else throw new Error(A?Y9.INVALID_OFFSET_NON_NUMBER:Y9.INVALID_LENGTH_NON_NUMBER)}function X21(F){EI(F,!1)}CI.checkLengthValue=X21;function Z21(F){EI(F,!0)}CI.checkOffsetValue=Z21;function J21(F,A){if(F<0||F>A.length)throw new Error(Y9.INVALID_TARGET_OFFSET)}CI.checkTargetOffset=J21;function Y21(F){return typeof F==="number"&&isFinite(F)&&Math.floor(F)===F}function $21(F){if(typeof BigInt==="undefined")throw new Error("Platform does not support JS BigInt type.");if(typeof $I.Buffer.prototype[F]==="undefined")throw new Error(`Platform does not support Buffer.prototype.${F}.`)}CI.bigIntAndBufferInt64Check=$21});var zI=z((qI)=>{Object.defineProperty(qI,"__esModule",{value:!0});var U1=WI(),HI=4096,Q21="utf8";class w${constructor(F){if(this.length=0,this._encoding=Q21,this._writeOffset=0,this._readOffset=0,w$.isSmartBufferOptions(F)){if(F.encoding)U1.checkEncoding(F.encoding),this._encoding=F.encoding;if(F.size)if(U1.isFiniteInteger(F.size)&&F.size>0)this._buff=Buffer.allocUnsafe(F.size);else throw new Error(U1.ERRORS.INVALID_SMARTBUFFER_SIZE);else if(F.buff)if(Buffer.isBuffer(F.buff))this._buff=F.buff,this.length=F.buff.length;else throw new Error(U1.ERRORS.INVALID_SMARTBUFFER_BUFFER);else this._buff=Buffer.allocUnsafe(HI)}else{if(typeof F!=="undefined")throw new Error(U1.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(HI)}}static fromSize(F,A){return new this({size:F,encoding:A})}static fromBuffer(F,A){return new this({buff:F,encoding:A})}static fromOptions(F){return new this(F)}static isSmartBufferOptions(F){let A=F;return A&&(A.encoding!==void 0||A.size!==void 0||A.buff!==void 0)}readInt8(F){return this._readNumberValue(Buffer.prototype.readInt8,1,F)}readInt16BE(F){return this._readNumberValue(Buffer.prototype.readInt16BE,2,F)}readInt16LE(F){return this._readNumberValue(Buffer.prototype.readInt16LE,2,F)}readInt32BE(F){return this._readNumberValue(Buffer.prototype.readInt32BE,4,F)}readInt32LE(F){return this._readNumberValue(Buffer.prototype.readInt32LE,4,F)}readBigInt64BE(F){return U1.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,F)}readBigInt64LE(F){return U1.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,F)}writeInt8(F,A){return this._writeNumberValue(Buffer.prototype.writeInt8,1,F,A),this}insertInt8(F,A){return this._insertNumberValue(Buffer.prototype.writeInt8,1,F,A)}writeInt16BE(F,A){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,F,A)}insertInt16BE(F,A){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,F,A)}writeInt16LE(F,A){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,F,A)}insertInt16LE(F,A){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,F,A)}writeInt32BE(F,A){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,F,A)}insertInt32BE(F,A){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,F,A)}writeInt32LE(F,A){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,F,A)}insertInt32LE(F,A){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,F,A)}writeBigInt64BE(F,A){return U1.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,F,A)}insertBigInt64BE(F,A){return U1.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,F,A)}writeBigInt64LE(F,A){return U1.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,F,A)}insertBigInt64LE(F,A){return U1.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,F,A)}readUInt8(F){return this._readNumberValue(Buffer.prototype.readUInt8,1,F)}readUInt16BE(F){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,F)}readUInt16LE(F){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,F)}readUInt32BE(F){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,F)}readUInt32LE(F){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,F)}readBigUInt64BE(F){return U1.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,F)}readBigUInt64LE(F){return U1.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,F)}writeUInt8(F,A){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,F,A)}insertUInt8(F,A){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,F,A)}writeUInt16BE(F,A){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,F,A)}insertUInt16BE(F,A){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,F,A)}writeUInt16LE(F,A){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,F,A)}insertUInt16LE(F,A){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,F,A)}writeUInt32BE(F,A){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,F,A)}insertUInt32BE(F,A){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,F,A)}writeUInt32LE(F,A){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,F,A)}insertUInt32LE(F,A){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,F,A)}writeBigUInt64BE(F,A){return U1.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,F,A)}insertBigUInt64BE(F,A){return U1.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,F,A)}writeBigUInt64LE(F,A){return U1.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,F,A)}insertBigUInt64LE(F,A){return U1.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,F,A)}readFloatBE(F){return this._readNumberValue(Buffer.prototype.readFloatBE,4,F)}readFloatLE(F){return this._readNumberValue(Buffer.prototype.readFloatLE,4,F)}writeFloatBE(F,A){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,F,A)}insertFloatBE(F,A){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,F,A)}writeFloatLE(F,A){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,F,A)}insertFloatLE(F,A){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,F,A)}readDoubleBE(F){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,F)}readDoubleLE(F){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,F)}writeDoubleBE(F,A){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,F,A)}insertDoubleBE(F,A){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,F,A)}writeDoubleLE(F,A){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,F,A)}insertDoubleLE(F,A){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,F,A)}readString(F,A){let B;if(typeof F==="number")U1.checkLengthValue(F),B=Math.min(F,this.length-this._readOffset);else A=F,B=this.length-this._readOffset;if(typeof A!=="undefined")U1.checkEncoding(A);let D=this._buff.slice(this._readOffset,this._readOffset+B).toString(A||this._encoding);return this._readOffset+=B,D}insertString(F,A,B){return U1.checkOffsetValue(A),this._handleString(F,!0,A,B)}writeString(F,A,B){return this._handleString(F,!1,A,B)}readStringNT(F){if(typeof F!=="undefined")U1.checkEncoding(F);let A=this.length;for(let D=this._readOffset;D<this.length;D++)if(this._buff[D]===0){A=D;break}let B=this._buff.slice(this._readOffset,A);return this._readOffset=A+1,B.toString(F||this._encoding)}insertStringNT(F,A,B){return U1.checkOffsetValue(A),this.insertString(F,A,B),this.insertUInt8(0,A+F.length),this}writeStringNT(F,A,B){return this.writeString(F,A,B),this.writeUInt8(0,typeof A==="number"?A+F.length:this.writeOffset),this}readBuffer(F){if(typeof F!=="undefined")U1.checkLengthValue(F);let A=typeof F==="number"?F:this.length,B=Math.min(this.length,this._readOffset+A),D=this._buff.slice(this._readOffset,B);return this._readOffset=B,D}insertBuffer(F,A){return U1.checkOffsetValue(A),this._handleBuffer(F,!0,A)}writeBuffer(F,A){return this._handleBuffer(F,!1,A)}readBufferNT(){let F=this.length;for(let B=this._readOffset;B<this.length;B++)if(this._buff[B]===0){F=B;break}let A=this._buff.slice(this._readOffset,F);return this._readOffset=F+1,A}insertBufferNT(F,A){return U1.checkOffsetValue(A),this.insertBuffer(F,A),this.insertUInt8(0,A+F.length),this}writeBufferNT(F,A){if(typeof A!=="undefined")U1.checkOffsetValue(A);return this.writeBuffer(F,A),this.writeUInt8(0,typeof A==="number"?A+F.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(F){U1.checkOffsetValue(F),U1.checkTargetOffset(F,this),this._readOffset=F}get writeOffset(){return this._writeOffset}set writeOffset(F){U1.checkOffsetValue(F),U1.checkTargetOffset(F,this),this._writeOffset=F}get encoding(){return this._encoding}set encoding(F){U1.checkEncoding(F),this._encoding=F}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(F){let A=typeof F==="string"?F:this._encoding;return U1.checkEncoding(A),this._buff.toString(A,0,this.length)}destroy(){return this.clear(),this}_handleString(F,A,B,D){let X=this._writeOffset,Z=this._encoding;if(typeof B==="number")X=B;else if(typeof B==="string")U1.checkEncoding(B),Z=B;if(typeof D==="string")U1.checkEncoding(D),Z=D;let J=Buffer.byteLength(F,Z);if(A)this.ensureInsertable(J,X);else this._ensureWriteable(J,X);if(this._buff.write(F,X,J,Z),A)this._writeOffset+=J;else if(typeof B==="number")this._writeOffset=Math.max(this._writeOffset,X+J);else this._writeOffset+=J;return this}_handleBuffer(F,A,B){let D=typeof B==="number"?B:this._writeOffset;if(A)this.ensureInsertable(F.length,D);else this._ensureWriteable(F.length,D);if(F.copy(this._buff,D),A)this._writeOffset+=F.length;else if(typeof B==="number")this._writeOffset=Math.max(this._writeOffset,D+F.length);else this._writeOffset+=F.length;return this}ensureReadable(F,A){let B=this._readOffset;if(typeof A!=="undefined")U1.checkOffsetValue(A),B=A;if(B<0||B+F>this.length)throw new Error(U1.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(F,A){if(U1.checkOffsetValue(A),this._ensureCapacity(this.length+F),A<this.length)this._buff.copy(this._buff,A+F,A,this._buff.length);if(A+F>this.length)this.length=A+F;else this.length+=F}_ensureWriteable(F,A){let B=typeof A==="number"?A:this._writeOffset;if(this._ensureCapacity(B+F),B+F>this.length)this.length=B+F}_ensureCapacity(F){let A=this._buff.length;if(F>A){let B=this._buff,D=A*3/2+1;if(D<F)D=F;this._buff=Buffer.allocUnsafe(D),B.copy(this._buff,0,0,A)}}_readNumberValue(F,A,B){this.ensureReadable(A,B);let D=F.call(this._buff,typeof B==="number"?B:this._readOffset);if(typeof B==="undefined")this._readOffset+=A;return D}_insertNumberValue(F,A,B,D){return U1.checkOffsetValue(D),this.ensureInsertable(A,D),F.call(this._buff,B,D),this._writeOffset+=A,this}_writeNumberValue(F,A,B,D){if(typeof D==="number"){if(D<0)throw new Error(U1.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);U1.checkOffsetValue(D)}let X=typeof D==="number"?D:this._writeOffset;if(this._ensureWriteable(A,X),F.call(this._buff,B,X),typeof D==="number")this._writeOffset=Math.max(this._writeOffset,X+A);else this._writeOffset+=A;return this}}qI.SmartBuffer=w$});var T$=z((QI)=>{Object.defineProperty(QI,"__esModule",{value:!0});var U21=30000;QI.DEFAULT_TIMEOUT=U21;var V21={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"};QI.ERRORS=V21;var L21={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:(F)=>F+7,Socks4Response:8};QI.SOCKS_INCOMING_PACKET_SIZES=L21;var R$;(function(F){F[F.connect=1]="connect",F[F.bind=2]="bind",F[F.associate=3]="associate"})(R$||(R$={}));QI.SocksCommand=R$;var I$;(function(F){F[F.Granted=90]="Granted",F[F.Failed=91]="Failed",F[F.Rejected=92]="Rejected",F[F.RejectedIdent=93]="RejectedIdent"})(I$||(I$={}));QI.Socks4Response=I$;var P$;(function(F){F[F.NoAuth=0]="NoAuth",F[F.GSSApi=1]="GSSApi",F[F.UserPass=2]="UserPass"})(P$||(P$={}));QI.Socks5Auth=P$;var N$;(function(F){F[F.Granted=0]="Granted",F[F.Failure=1]="Failure",F[F.NotAllowed=2]="NotAllowed",F[F.NetworkUnreachable=3]="NetworkUnreachable",F[F.HostUnreachable=4]="HostUnreachable",F[F.ConnectionRefused=5]="ConnectionRefused",F[F.TTLExpired=6]="TTLExpired",F[F.CommandNotSupported=7]="CommandNotSupported",F[F.AddressNotSupported=8]="AddressNotSupported"})(N$||(N$={}));QI.Socks5Response=N$;var M$;(function(F){F[F.IPv4=1]="IPv4",F[F.Hostname=3]="Hostname",F[F.IPv6=4]="IPv6"})(M$||(M$={}));QI.Socks5HostType=M$;var j$;(function(F){F[F.Created=0]="Created",F[F.Connecting=1]="Connecting",F[F.Connected=2]="Connected",F[F.SentInitialHandshake=3]="SentInitialHandshake",F[F.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",F[F.SentAuthentication=5]="SentAuthentication",F[F.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",F[F.SentFinalHandshake=7]="SentFinalHandshake",F[F.ReceivedFinalResponse=8]="ReceivedFinalResponse",F[F.BoundWaitingForConnection=9]="BoundWaitingForConnection",F[F.Established=10]="Established",F[F.Disconnected=11]="Disconnected",F[F.Error=99]="Error"})(j$||(j$={}));QI.SocksClientState=j$});var k$=z((UI)=>{Object.defineProperty(UI,"__esModule",{value:!0});class KI extends Error{constructor(F,A){super(F);this.options=A}}UI.SocksClientError=KI;function u21(F){for(let A=F.length-1;A>0;A--){let B=Math.floor(Math.random()*(A+1));[F[A],F[B]]=[F[B],F[A]]}}UI.shuffleArray=u21});var II=z((RI)=>{Object.defineProperty(RI,"__esModule",{value:!0});var h6=k$(),V6=T$(),x21=m("stream");function _21(F,A=["connect","bind","associate"]){if(!V6.SocksCommand[F.command])throw new h6.SocksClientError(V6.ERRORS.InvalidSocksCommand,F);if(A.indexOf(F.command)===-1)throw new h6.SocksClientError(V6.ERRORS.InvalidSocksCommandForOperation,F);if(!VI(F.destination))throw new h6.SocksClientError(V6.ERRORS.InvalidSocksClientOptionsDestination,F);if(!LI(F.proxy))throw new h6.SocksClientError(V6.ERRORS.InvalidSocksClientOptionsProxy,F);if(F.timeout&&!wI(F.timeout))throw new h6.SocksClientError(V6.ERRORS.InvalidSocksClientOptionsTimeout,F);if(F.existing_socket&&!(F.existing_socket instanceof x21.Duplex))throw new h6.SocksClientError(V6.ERRORS.InvalidSocksClientOptionsExistingSocket,F)}RI.validateSocksClientOptions=_21;function f21(F){if(F.command!=="connect")throw new h6.SocksClientError(V6.ERRORS.InvalidSocksCommandChain,F);if(!VI(F.destination))throw new h6.SocksClientError(V6.ERRORS.InvalidSocksClientOptionsDestination,F);if(!(F.proxies&&Array.isArray(F.proxies)&&F.proxies.length>=2))throw new h6.SocksClientError(V6.ERRORS.InvalidSocksClientOptionsProxiesLength,F);if(F.proxies.forEach((A)=>{if(!LI(A))throw new h6.SocksClientError(V6.ERRORS.InvalidSocksClientOptionsProxy,F)}),F.timeout&&!wI(F.timeout))throw new h6.SocksClientError(V6.ERRORS.InvalidSocksClientOptionsTimeout,F)}RI.validateSocksClientChainOptions=f21;function VI(F){return F&&typeof F.host==="string"&&typeof F.port==="number"&&F.port>=0&&F.port<=65535}function LI(F){return F&&(typeof F.host==="string"||typeof F.ipaddress==="string")&&typeof F.port==="number"&&F.port>=0&&F.port<=65535&&(F.type===4||F.type===5)}function wI(F){return typeof F==="number"&&F>0}});var MI=z((NI)=>{Object.defineProperty(NI,"__esModule",{value:!0});class PI{constructor(F=4096){this._buffer=Buffer.allocUnsafe(F),this._offset=0,this._originalSize=F}get length(){return this._offset}append(F){if(!Buffer.isBuffer(F))throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this._offset+F.length>=this._buffer.length){let A=this._buffer;this._buffer=Buffer.allocUnsafe(Math.max(this._buffer.length+this._originalSize,this._buffer.length+F.length)),A.copy(this._buffer)}return F.copy(this._buffer,this._offset),this._offset+=F.length}peek(F){if(F>this._offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");return this._buffer.slice(0,F)}get(F){if(F>this._offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");let A=Buffer.allocUnsafe(F);return this._buffer.slice(0,F).copy(A),this._buffer.copyWithin(0,F,F+this._offset-F),this._offset-=F,A}}NI.ReceiveBuffer=PI});var TI=z((O5)=>{var h21=O5&&O5.__awaiter||function(F,A,B,D){function X(Z){return Z instanceof B?Z:new B(function(J){J(Z)})}return new(B||(B=Promise))(function(Z,J){function Y(E){try{G(D.next(E))}catch(C){J(C)}}function $(E){try{G(D.throw(E))}catch(C){J(C)}}function G(E){E.done?Z(E.value):X(E.value).then(Y,$)}G((D=D.apply(F,A||[])).next())})};Object.defineProperty(O5,"__esModule",{value:!0});var v21=m("events"),T7=m("net"),J6=YI(),b2=zI(),p=T$(),u$=II(),m21=MI(),jI=k$();class LB extends v21.EventEmitter{constructor(F){super();this._options=Object.assign({},F),u$.validateSocksClientOptions(F),this.state=p.SocksClientState.Created}static createConnection(F,A){return u$.validateSocksClientOptions(F,["connect"]),new Promise((B,D)=>{let X=new LB(F);X.connect(F.existing_socket),X.once("established",(Z)=>{if(X.removeAllListeners(),typeof A==="function")A(null,Z),B();else B(Z)}),X.once("error",(Z)=>{if(X.removeAllListeners(),typeof A==="function")A(Z),B();else D(Z)})})}static createConnectionChain(F,A){if(u$.validateSocksClientChainOptions(F),F.randomizeChain)jI.shuffleArray(F.proxies);return new Promise((B,D)=>h21(this,void 0,void 0,function*(){let X;try{for(let Z=0;Z<F.proxies.length;Z++){let J=F.proxies[Z],Y=Z===F.proxies.length-1?F.destination:{host:F.proxies[Z+1].ipaddress,port:F.proxies[Z+1].port},$=yield LB.createConnection({command:"connect",proxy:J,destination:Y});if(!X)X=$.socket}if(typeof A==="function")A(null,{socket:X}),B();else B({socket:X})}catch(Z){if(typeof A==="function")A(Z),B();else D(Z)}}))}static createUDPFrame(F){let A=new b2.SmartBuffer;if(A.writeUInt16BE(0),A.writeUInt8(F.frameNumber||0),T7.isIPv4(F.remoteHost.host))A.writeUInt8(p.Socks5HostType.IPv4),A.writeUInt32BE(J6.toLong(F.remoteHost.host));else if(T7.isIPv6(F.remoteHost.host))A.writeUInt8(p.Socks5HostType.IPv6),A.writeBuffer(J6.toBuffer(F.remoteHost.host));else A.writeUInt8(p.Socks5HostType.Hostname),A.writeUInt8(Buffer.byteLength(F.remoteHost.host)),A.writeString(F.remoteHost.host);return A.writeUInt16BE(F.remoteHost.port),A.writeBuffer(F.data),A.toBuffer()}static parseUDPFrame(F){let A=b2.SmartBuffer.fromBuffer(F);A.readOffset=2;let B=A.readUInt8(),D=A.readUInt8(),X;if(D===p.Socks5HostType.IPv4)X=J6.fromLong(A.readUInt32BE());else if(D===p.Socks5HostType.IPv6)X=J6.toString(A.readBuffer(16));else X=A.readString(A.readUInt8());let Z=A.readUInt16BE();return{frameNumber:B,remoteHost:{host:X,port:Z},data:A.readBuffer()}}get state(){return this._state}set state(F){if(this._state!==p.SocksClientState.Error)this._state=F}connect(F){this._onDataReceived=(B)=>this.onDataReceived(B),this._onClose=()=>this.onClose(),this._onError=(B)=>this.onError(B),this._onConnect=()=>this.onConnect();let A=setTimeout(()=>this.onEstablishedTimeout(),this._options.timeout||p.DEFAULT_TIMEOUT);if(A.unref&&typeof A.unref==="function")A.unref();if(F)this._socket=F;else this._socket=new T7.Socket;if(this._socket.once("close",this._onClose),this._socket.once("error",this._onError),this._socket.once("connect",this._onConnect),this._socket.on("data",this._onDataReceived),this.state=p.SocksClientState.Connecting,this._receiveBuffer=new m21.ReceiveBuffer,F)this._socket.emit("connect");else if(this._socket.connect(this.getSocketOptions()),this._options.set_tcp_nodelay!==void 0&&this._options.set_tcp_nodelay!==null)this._socket.setNoDelay(!!this._options.set_tcp_nodelay);this.prependOnceListener("established",(B)=>{setImmediate(()=>{if(this._receiveBuffer.length>0){let D=this._receiveBuffer.get(this._receiveBuffer.length);B.socket.emit("data",D)}B.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this._options.socket_options),{host:this._options.proxy.host||this._options.proxy.ipaddress,port:this._options.proxy.port})}onEstablishedTimeout(){if(this.state!==p.SocksClientState.Established&&this.state!==p.SocksClientState.BoundWaitingForConnection)this._closeSocket(p.ERRORS.ProxyConnectionTimedOut)}onConnect(){if(this.state=p.SocksClientState.Connected,this._options.proxy.type===4)this.sendSocks4InitialHandshake();else this.sendSocks5InitialHandshake();this.state=p.SocksClientState.SentInitialHandshake}onDataReceived(F){this._receiveBuffer.append(F),this.processData()}processData(){if(this._receiveBuffer.length>=this._nextRequiredPacketBufferSize)if(this.state===p.SocksClientState.SentInitialHandshake)if(this._options.proxy.type===4)this.handleSocks4FinalHandshakeResponse();else this.handleInitialSocks5HandshakeResponse();else if(this.state===p.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===p.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else if(this.state===p.SocksClientState.BoundWaitingForConnection)if(this._options.proxy.type===4)this.handleSocks4IncomingConnectionResponse();else this.handleSocks5IncomingConnectionResponse();else if(this.state===p.SocksClientState.Established);else this._closeSocket(p.ERRORS.InternalError)}onClose(){this._closeSocket(p.ERRORS.SocketClosed)}onError(F){this._closeSocket(F.message)}removeInternalSocketHandlers(){this._socket.pause(),this._socket.removeListener("data",this._onDataReceived),this._socket.removeListener("close",this._onClose),this._socket.removeListener("error",this._onError),this._socket.removeListener("connect",this.onConnect)}_closeSocket(F){if(this.state!==p.SocksClientState.Error)this.state=p.SocksClientState.Error,this._socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new jI.SocksClientError(F,this._options))}sendSocks4InitialHandshake(){let F=this._options.proxy.userId||"",A=new b2.SmartBuffer;if(A.writeUInt8(4),A.writeUInt8(p.SocksCommand[this._options.command]),A.writeUInt16BE(this._options.destination.port),T7.isIPv4(this._options.destination.host))A.writeBuffer(J6.toBuffer(this._options.destination.host)),A.writeStringNT(F);else A.writeUInt8(0),A.writeUInt8(0),A.writeUInt8(0),A.writeUInt8(1),A.writeStringNT(F),A.writeStringNT(this._options.destination.host);this._nextRequiredPacketBufferSize=p.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this._socket.write(A.toBuffer())}handleSocks4FinalHandshakeResponse(){let F=this._receiveBuffer.get(8);if(F[1]!==p.Socks4Response.Granted)this._closeSocket(`${p.ERRORS.Socks4ProxyRejectedConnection} - (${p.Socks4Response[F[1]]})`);else if(p.SocksCommand[this._options.command]===p.SocksCommand.bind){let A=b2.SmartBuffer.fromBuffer(F);A.readOffset=2;let B={port:A.readUInt16BE(),host:J6.fromLong(A.readUInt32BE())};if(B.host==="0.0.0.0")B.host=this._options.proxy.ipaddress;this.state=p.SocksClientState.BoundWaitingForConnection,this.emit("bound",{socket:this._socket,remoteHost:B})}else this.state=p.SocksClientState.Established,this.removeInternalSocketHandlers(),this.emit("established",{socket:this._socket})}handleSocks4IncomingConnectionResponse(){let F=this._receiveBuffer.get(8);if(F[1]!==p.Socks4Response.Granted)this._closeSocket(`${p.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${p.Socks4Response[F[1]]})`);else{let A=b2.SmartBuffer.fromBuffer(F);A.readOffset=2;let B={port:A.readUInt16BE(),host:J6.fromLong(A.readUInt32BE())};this.state=p.SocksClientState.Established,this.removeInternalSocketHandlers(),this.emit("established",{socket:this._socket,remoteHost:B})}}sendSocks5InitialHandshake(){let F=new b2.SmartBuffer;if(F.writeUInt8(5),this._options.proxy.userId||this._options.proxy.password)F.writeUInt8(2),F.writeUInt8(p.Socks5Auth.NoAuth),F.writeUInt8(p.Socks5Auth.UserPass);else F.writeUInt8(1),F.writeUInt8(p.Socks5Auth.NoAuth);this._nextRequiredPacketBufferSize=p.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this._socket.write(F.toBuffer()),this.state=p.SocksClientState.SentInitialHandshake}handleInitialSocks5HandshakeResponse(){let F=this._receiveBuffer.get(2);if(F[0]!==5)this._closeSocket(p.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion);else if(F[1]===255)this._closeSocket(p.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType);else if(F[1]===p.Socks5Auth.NoAuth)this.sendSocks5CommandRequest();else if(F[1]===p.Socks5Auth.UserPass)this.sendSocks5UserPassAuthentication();else this._closeSocket(p.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){let F=this._options.proxy.userId||"",A=this._options.proxy.password||"",B=new b2.SmartBuffer;B.writeUInt8(1),B.writeUInt8(Buffer.byteLength(F)),B.writeString(F),B.writeUInt8(Buffer.byteLength(A)),B.writeString(A),this._nextRequiredPacketBufferSize=p.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this._socket.write(B.toBuffer()),this.state=p.SocksClientState.SentAuthentication}handleInitialSocks5AuthenticationHandshakeResponse(){if(this.state=p.SocksClientState.ReceivedAuthenticationResponse,this._receiveBuffer.get(2)[1]!==0)this._closeSocket(p.ERRORS.Socks5AuthenticationFailed);else this.sendSocks5CommandRequest()}sendSocks5CommandRequest(){let F=new b2.SmartBuffer;if(F.writeUInt8(5),F.writeUInt8(p.SocksCommand[this._options.command]),F.writeUInt8(0),T7.isIPv4(this._options.destination.host))F.writeUInt8(p.Socks5HostType.IPv4),F.writeBuffer(J6.toBuffer(this._options.destination.host));else if(T7.isIPv6(this._options.destination.host))F.writeUInt8(p.Socks5HostType.IPv6),F.writeBuffer(J6.toBuffer(this._options.destination.host));else F.writeUInt8(p.Socks5HostType.Hostname),F.writeUInt8(this._options.destination.host.length),F.writeString(this._options.destination.host);F.writeUInt16BE(this._options.destination.port),this._nextRequiredPacketBufferSize=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this._socket.write(F.toBuffer()),this.state=p.SocksClientState.SentFinalHandshake}handleSocks5FinalHandshakeResponse(){let F=this._receiveBuffer.peek(5);if(F[0]!==5||F[1]!==p.Socks5Response.Granted)this._closeSocket(`${p.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${p.Socks5Response[F[1]]}`);else{let A=F[3],B,D;if(A===p.Socks5HostType.IPv4){let X=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this._receiveBuffer.length<X){this._nextRequiredPacketBufferSize=X;return}if(D=b2.SmartBuffer.fromBuffer(this._receiveBuffer.get(X).slice(4)),B={host:J6.fromLong(D.readUInt32BE()),port:D.readUInt16BE()},B.host==="0.0.0.0")B.host=this._options.proxy.ipaddress}else if(A===p.Socks5HostType.Hostname){let X=F[4],Z=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(X);if(this._receiveBuffer.length<Z){this._nextRequiredPacketBufferSize=Z;return}D=b2.SmartBuffer.fromBuffer(this._receiveBuffer.get(Z).slice(5)),B={host:D.readString(X),port:D.readUInt16BE()}}else if(A===p.Socks5HostType.IPv6){let X=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this._receiveBuffer.length<X){this._nextRequiredPacketBufferSize=X;return}D=b2.SmartBuffer.fromBuffer(this._receiveBuffer.get(X).slice(4)),B={host:J6.toString(D.readBuffer(16)),port:D.readUInt16BE()}}if(this.state=p.SocksClientState.ReceivedFinalResponse,p.SocksCommand[this._options.command]===p.SocksCommand.connect)this.state=p.SocksClientState.Established,this.removeInternalSocketHandlers(),this.emit("established",{socket:this._socket});else if(p.SocksCommand[this._options.command]===p.SocksCommand.bind)this.state=p.SocksClientState.BoundWaitingForConnection,this._nextRequiredPacketBufferSize=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{socket:this._socket,remoteHost:B});else if(p.SocksCommand[this._options.command]===p.SocksCommand.associate)this.state=p.SocksClientState.Established,this.removeInternalSocketHandlers(),this.emit("established",{socket:this._socket,remoteHost:B})}}handleSocks5IncomingConnectionResponse(){let F=this._receiveBuffer.peek(5);if(F[0]!==5||F[1]!==p.Socks5Response.Granted)this._closeSocket(`${p.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${p.Socks5Response[F[1]]}`);else{let A=F[3],B,D;if(A===p.Socks5HostType.IPv4){let X=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this._receiveBuffer.length<X){this._nextRequiredPacketBufferSize=X;return}if(D=b2.SmartBuffer.fromBuffer(this._receiveBuffer.get(X).slice(4)),B={host:J6.fromLong(D.readUInt32BE()),port:D.readUInt16BE()},B.host==="0.0.0.0")B.host=this._options.proxy.ipaddress}else if(A===p.Socks5HostType.Hostname){let X=F[4],Z=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(X);if(this._receiveBuffer.length<Z){this._nextRequiredPacketBufferSize=Z;return}D=b2.SmartBuffer.fromBuffer(this._receiveBuffer.get(Z).slice(5)),B={host:D.readString(X),port:D.readUInt16BE()}}else if(A===p.Socks5HostType.IPv6){let X=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this._receiveBuffer.length<X){this._nextRequiredPacketBufferSize=X;return}D=b2.SmartBuffer.fromBuffer(this._receiveBuffer.get(X).slice(4)),B={host:J6.toString(D.readBuffer(16)),port:D.readUInt16BE()}}this.state=p.SocksClientState.Established,this.removeInternalSocketHandlers(),this.emit("established",{socket:this._socket,remoteHost:B})}}get socksClientOptions(){return Object.assign({},this._options)}}O5.SocksClient=LB});var kI=z((O$)=>{function d21(F){for(var A in F)if(!O$.hasOwnProperty(A))O$[A]=F[A]}Object.defineProperty(O$,"__esModule",{value:!0});d21(TI())});var v6=z((uI)=>{Object.defineProperty(uI,"__esModule",{value:!0});uI.aws4=void 0;uI.getKerberos=c21;uI.getZstdLibrary=l21;uI.getAwsCredentialProvider=p21;uI.getGcpMetadata=i21;uI.getSnappy=n21;uI.getSocks=a21;uI.getMongoDBClientEncryption=r21;var C4=l();function S5(F){return new Proxy(F?{kModuleError:F}:{},{get:(B,D)=>{if(D==="kModuleError")return F;throw F},set:()=>{throw F}})}function c21(){let F;try{F=(()=>{throw new Error("Cannot require module "+"kerberos");})()}catch(A){F=S5(new C4.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:A,dependencyName:"kerberos"}))}return F}function l21(){let F;try{F=(()=>{throw new Error("Cannot require module "+"@mongodb-js/zstd");})()}catch(A){F=S5(new C4.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:A,dependencyName:"zstd"}))}return F}function p21(){try{return (()=>{throw new Error("Cannot require module "+"@aws-sdk/credential-providers");})()}catch(F){return S5(new C4.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:F,dependencyName:"@aws-sdk/credential-providers"}))}}function i21(){try{return (()=>{throw new Error("Cannot require module "+"gcp-metadata");})()}catch(F){return S5(new C4.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:F,dependencyName:"gcp-metadata"}))}}function n21(){try{return (()=>{throw new Error("Cannot require module "+"snappy");})()}catch(F){return{kModuleError:new C4.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:F,dependencyName:"snappy"})}}}function a21(){try{return kI()}catch(F){return{kModuleError:new C4.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:F,dependencyName:"socks"})}}}uI.aws4=s21();function s21(){let F;try{F=(()=>{throw new Error("Cannot require module "+"aws4");})()}catch(A){F=S5(new C4.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:A,dependencyName:"aws4"}))}return F}function r21(){let F=null;try{F=(()=>{throw new Error("Cannot require module "+"mongodb-client-encryption");})()}catch(A){return{kModuleError:new C4.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:A,dependencyName:"mongodb-client-encryption"})}}return F}});var W4=z((_I)=>{Object.defineProperty(_I,"__esModule",{value:!0});_I.AuthProvider=_I.AuthContext=void 0;var X61=l();class SI{constructor(F,A,B){this.reauthenticating=!1,this.connection=F,this.credentials=A,this.options=B}}_I.AuthContext=SI;class xI{async prepare(F,A){return F}async reauth(F){if(F.reauthenticating)throw new X61.MongoRuntimeError("Reauthentication already in progress.");try{F.reauthenticating=!0,await this.auth(F)}finally{F.reauthenticating=!1}}}_I.AuthProvider=xI});var RB=z((vI)=>{Object.defineProperty(vI,"__esModule",{value:!0});vI.GSSAPI=vI.GSSAPICanonicalizationValue=void 0;vI.performGSSAPICanonicalizeHostName=hI;vI.resolveCname=_$;var x$=m("dns"),J61=v6(),gI=l(),Y61=s(),$61=W4();vI.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function S$(F,A){return await F.command(Y61.ns("$external.$cmd"),A)}var x5;class bI extends $61.AuthProvider{async auth(F){let{connection:A,credentials:B}=F;if(B==null)throw new gI.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:D}=B,X=await G61(F),Z=await X.step(""),J=await S$(A,E61(Z)),Y=await yI(X,10,J.payload),$=await S$(A,C61(Y,J.conversationId)),G=await W61(X,D,$.payload);await S$(A,{saslContinue:1,conversationId:$.conversationId,payload:G})}}vI.GSSAPI=bI;async function G61(F){let{hostAddress:A}=F.options,{credentials:B}=F;if(!A||typeof A.host!=="string"||!B)throw new gI.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(H61(),"kModuleError"in x5)throw x5.kModuleError;let{initializeClient:D}=x5,{username:X,password:Z}=B,J=B.mechanismProperties,Y=J.SERVICE_NAME??"mongodb",$=await hI(A.host,J),G={};if(Z!=null)Object.assign(G,{user:X,password:Z});let E=J.SERVICE_HOST??$,C=`${Y}${process.platform==="win32"?"/":"@"}${E}`;if("SERVICE_REALM"in J)C=`${C}@${J.SERVICE_REALM}`;return await D(C,G)}function E61(F){return{saslStart:1,mechanism:"GSSAPI",payload:F,autoAuthorize:1}}function C61(F,A){return{saslContinue:1,conversationId:A,payload:F}}async function yI(F,A,B){try{return await F.step(B)||""}catch(D){if(A===0)throw D;return await yI(F,A-1,B)}}async function W61(F,A,B){let D=await F.unwrap(B);return await F.wrap(D||"",{user:A})}async function hI(F,A){let B=A.CANONICALIZE_HOST_NAME;if(!B||B===vI.GSSAPICanonicalizationValue.none)return F;if(B===vI.GSSAPICanonicalizationValue.on||B===vI.GSSAPICanonicalizationValue.forwardAndReverse){let{address:D}=await x$.promises.lookup(F);try{let X=await x$.promises.resolvePtr(D);return X.length>0?X[0]:F}catch{return await _$(F)}}else return await _$(F)}async function _$(F){try{let A=await x$.promises.resolveCname(F);return A.length>0?A[0]:F}catch{return F}}function H61(){if(!x5)x5=J61.getKerberos()}});var X3=z((dI)=>{Object.defineProperty(dI,"__esModule",{value:!0});dI.AUTH_MECHS_AUTH_SRC_EXTERNAL=dI.AuthMechanism=void 0;dI.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});dI.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([dI.AuthMechanism.MONGODB_GSSAPI,dI.AuthMechanism.MONGODB_AWS,dI.AuthMechanism.MONGODB_OIDC,dI.AuthMechanism.MONGODB_X509])});var PB=z((iI)=>{Object.defineProperty(iI,"__esModule",{value:!0});iI.MongoCredentials=iI.DEFAULT_ALLOWED_HOSTS=void 0;var L6=l(),Q61=RB(),T2=X3();function K61(F){if(F){if(Array.isArray(F.saslSupportedMechs))return F.saslSupportedMechs.includes(T2.AuthMechanism.MONGODB_SCRAM_SHA256)?T2.AuthMechanism.MONGODB_SCRAM_SHA256:T2.AuthMechanism.MONGODB_SCRAM_SHA1}return T2.AuthMechanism.MONGODB_SCRAM_SHA256}var lI=["test","azure","gcp","k8s"],pI="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";iI.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var U61="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.";class IB{constructor(F){if(this.username=F.username??"",this.password=F.password,this.source=F.source,!this.source&&F.db)this.source=F.db;if(this.mechanism=F.mechanism||T2.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=F.mechanismProperties||{},this.mechanism===T2.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS)this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:iI.DEFAULT_ALLOWED_HOSTS};Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(F){return this.mechanism===F.mechanism&&this.username===F.username&&this.password===F.password&&this.source===F.source}resolveAuthMechanism(F){if(this.mechanism.match(/DEFAULT/i))return new IB({username:this.username,password:this.password,source:this.source,mechanism:K61(F),mechanismProperties:this.mechanismProperties});return this}validate(){if((this.mechanism===T2.AuthMechanism.MONGODB_GSSAPI||this.mechanism===T2.AuthMechanism.MONGODB_PLAIN||this.mechanism===T2.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===T2.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new L6.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===T2.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new L6.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new L6.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new L6.MongoInvalidArgumentError(U61);if(this.mechanismProperties.ENVIRONMENT&&!lI.includes(this.mechanismProperties.ENVIRONMENT))throw new L6.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${lI.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new L6.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let A=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(A))throw new L6.MongoInvalidArgumentError(pI);for(let B of A)if(typeof B!=="string")throw new L6.MongoInvalidArgumentError(pI)}}if(T2.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)){if(this.source!=null&&this.source!=="$external")throw new L6.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`)}if(this.mechanism===T2.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new L6.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===T2.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new L6.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let F=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(Q61.GSSAPICanonicalizationValue).includes(F))throw new L6.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${F}`)}static merge(F,A){return new IB({username:A.username??F?.username??"",password:A.password??F?.password??"",mechanism:A.mechanism??F?.mechanism??T2.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:A.mechanismProperties??F?.mechanismProperties??{},source:A.source??A.db??F?.source??"admin"})}}iI.MongoCredentials=IB});var sI=z((lR1,V61)=>{V61.exports={name:"mongodb",version:"7.0.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^7.0.0","mongodb-connection-string-url":"^7.0.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.806.0","@mongodb-js/zstd":"^7.0.0","gcp-metadata":"^7.0.1",kerberos:"^7.0.0","mongodb-client-encryption":">=7.0.0 <7.1.0",snappy:"^7.3.2",socks:"^2.8.6"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^7.0.0","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^7.0.1","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^7.0.0",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=20.19.0"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --target es2023 --module commonjs --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts test/integration/auth/mongodb_aws.prose.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var f$=z((eI)=>{Object.defineProperty(eI,"__esModule",{value:!0});eI.LimitedSizeDocument=void 0;eI.isDriverInfoEqual=R61;eI.makeClientMetadata=I61;eI.getFAASEnv=oI;var f5=m("os"),g5=m("process"),k7=$1(),rI=l(),L61=s(),w61=sI().version;function R61(F,A){let B=(D,X)=>{return D||=void 0,X||=void 0,D===X};return B(F.name,A.name)&&B(F.platform,A.platform)&&B(F.version,A.version)}class NB{constructor(F){this.document=new Map,this.documentSize=5,this.maxSize=F}ifItFitsItSits(F,A){let B=k7.BSON.serialize(new Map().set(F,A)).byteLength-5;if(B+this.documentSize>this.maxSize)return!1;return this.documentSize+=B,this.document.set(F,A),!0}toObject(){return k7.BSON.deserialize(k7.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}}eI.LimitedSizeDocument=NB;async function I61(F,{appName:A=""}){let B=new NB(512);if(A.length>0){let Y=Buffer.byteLength(A,"utf8")<=128?A:Buffer.from(A,"utf8").subarray(0,128).toString("utf8");B.ifItFitsItSits("application",{name:Y})}let D={name:"nodejs",version:w61};for(let{name:Y="",version:$=""}of F){if(Y.length>0)D.name=`${D.name}|${Y}`;if($.length>0)D.version=`${D.version}|${$}`}if(!B.ifItFitsItSits("driver",D))throw new rI.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let X=M61();for(let{platform:Y=""}of F)if(Y.length>0)X=`${X}|${Y}`;if(!B.ifItFitsItSits("platform",X))throw new rI.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let Z=new Map().set("name",g5.platform).set("architecture",g5.arch).set("version",f5.release()).set("type",f5.type());if(!B.ifItFitsItSits("os",Z))for(let Y of Z.keys()){if(Z.delete(Y),Z.size===0)break;if(B.ifItFitsItSits("os",Z))break}let J=oI();if(J!=null){if(!B.ifItFitsItSits("env",J))for(let Y of J.keys()){if(J.delete(Y),J.size===0)break;if(B.ifItFitsItSits("env",J))break}}return await N61(B.toObject())}var tI;async function P61(){tI??=L61.fileIsAccessible("/.dockerenv");let F=await tI,{KUBERNETES_SERVICE_HOST:A=""}=g5.env,B=A.length>0?!0:!1,D={};if(F)D.runtime="docker";if(B)D.orchestrator="kubernetes";return D}async function N61(F){let A=await P61();if(Object.keys(A).length===0)return F;let B=new NB(512),D={...F?.env,container:A};for(let[X,Z]of Object.entries(F))if(X!=="env")B.ifItFitsItSits(X,Z);else if(!B.ifItFitsItSits("env",D))B.ifItFitsItSits("env",Z);if(!("env"in F))B.ifItFitsItSits("env",D);return B.toObject()}function oI(){let{AWS_EXECUTION_ENV:F="",AWS_LAMBDA_RUNTIME_API:A="",FUNCTIONS_WORKER_RUNTIME:B="",K_SERVICE:D="",FUNCTION_NAME:X="",VERCEL:Z="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:J="",AWS_REGION:Y="",FUNCTION_MEMORY_MB:$="",FUNCTION_REGION:G="",FUNCTION_TIMEOUT_SEC:E="",VERCEL_REGION:C=""}=g5.env,W=F.startsWith("AWS_Lambda_")||A.length>0,H=B.length>0,q=D.length>0||X.length>0,Q=Z.length>0,K=new Map;if(Q&&!(H||q)){if(C.length>0)K.set("region",C);return K.set("name","vercel"),K}if(W&&!(H||q||Q)){if(Y.length>0)K.set("region",Y);if(J.length>0&&Number.isInteger(+J))K.set("memory_mb",new k7.Int32(J));return K.set("name","aws.lambda"),K}if(H&&!(q||W||Q))return K.set("name","azure.func"),K;if(q&&!(H||W||Q)){if(G.length>0)K.set("region",G);if($.length>0&&Number.isInteger(+$))K.set("memory_mb",new k7.Int32($));if(E.length>0&&Number.isInteger(+E))K.set("timeout_sec",new k7.Int32(E));return K.set("name","gcp.func"),K}return null}function M61(){if("Deno"in globalThis)return`Deno v${typeof Deno?.version?.deno==="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${f5.endianness()}`;if("Bun"in globalThis)return`Bun v${typeof Bun?.version==="string"?Bun?.version:"0.0.0-unknown"}, ${f5.endianness()}`;return`Node.js ${g5.version}, ${f5.endianness()}`}});var jB=z((XP)=>{function m1(F,A,B){if(B.globals)F=B.globals[F.name];return new F(`${B.context?B.context:"Value"} ${A}.`)}function S7(F,A){if(typeof F==="bigint")throw m1(TypeError,"is a BigInt which cannot be converted to a number",A);if(!A.globals)return Number(F);return A.globals.Number(F)}function BP(F){if(F>0&&F%1===0.5&&(F&1)===0||F<0&&F%1===-0.5&&(F&1)===1)return b5(Math.floor(F));return b5(Math.round(F))}function MB(F){return b5(Math.trunc(F))}function AP(F){return F<0?-1:1}function u61(F,A){let B=F%A;if(AP(A)!==AP(B))return B+A;return B}function b5(F){return F===0?0:F}function x7(F,{unsigned:A}){let B,D;if(A)B=0,D=2**F-1;else B=-(2**(F-1)),D=2**(F-1)-1;let X=2**F,Z=2**(F-1);return(J,Y={})=>{let $=S7(J,Y);if($=b5($),Y.enforceRange){if(!Number.isFinite($))throw m1(TypeError,"is not a finite number",Y);if($=MB($),$<B||$>D)throw m1(TypeError,`is outside the accepted range of ${B} to ${D}, inclusive`,Y);return $}if(!Number.isNaN($)&&Y.clamp)return $=Math.min(Math.max($,B),D),$=BP($),$;if(!Number.isFinite($)||$===0)return 0;if($=MB($),$>=B&&$<=D)return $;if($=u61($,X),!A&&$>=Z)return $-X;return $}}function DP(F,{unsigned:A}){let B=Number.MAX_SAFE_INTEGER,D=A?0:Number.MIN_SAFE_INTEGER,X=A?BigInt.asUintN:BigInt.asIntN;return(Z,J={})=>{let Y=S7(Z,J);if(Y=b5(Y),J.enforceRange){if(!Number.isFinite(Y))throw m1(TypeError,"is not a finite number",J);if(Y=MB(Y),Y<D||Y>B)throw m1(TypeError,`is outside the accepted range of ${D} to ${B}, inclusive`,J);return Y}if(!Number.isNaN(Y)&&J.clamp)return Y=Math.min(Math.max(Y,D),B),Y=BP(Y),Y;if(!Number.isFinite(Y)||Y===0)return 0;let $=BigInt(MB(Y));return $=X(F,$),Number($)}}XP.any=(F)=>{return F};XP.undefined=()=>{return};XP.boolean=(F)=>{return Boolean(F)};XP.byte=x7(8,{unsigned:!1});XP.octet=x7(8,{unsigned:!0});XP.short=x7(16,{unsigned:!1});XP["unsigned short"]=x7(16,{unsigned:!0});XP.long=x7(32,{unsigned:!1});XP["unsigned long"]=x7(32,{unsigned:!0});XP["long long"]=DP(64,{unsigned:!1});XP["unsigned long long"]=DP(64,{unsigned:!0});XP.double=(F,A={})=>{let B=S7(F,A);if(!Number.isFinite(B))throw m1(TypeError,"is not a finite floating-point value",A);return B};XP["unrestricted double"]=(F,A={})=>{return S7(F,A)};XP.float=(F,A={})=>{let B=S7(F,A);if(!Number.isFinite(B))throw m1(TypeError,"is not a finite floating-point value",A);if(Object.is(B,-0))return B;let D=Math.fround(B);if(!Number.isFinite(D))throw m1(TypeError,"is outside the range of a single-precision floating-point value",A);return D};XP["unrestricted float"]=(F,A={})=>{let B=S7(F,A);if(isNaN(B))return B;if(Object.is(B,-0))return B;return Math.fround(B)};XP.DOMString=(F,A={})=>{if(A.treatNullAsEmptyString&&F===null)return"";if(typeof F==="symbol")throw m1(TypeError,"is a symbol, which cannot be converted to a string",A);return(A.globals?A.globals.String:String)(F)};XP.ByteString=(F,A={})=>{let B=XP.DOMString(F,A),D;for(let X=0;(D=B.codePointAt(X))!==void 0;++X)if(D>255)throw m1(TypeError,"is not a valid ByteString",A);return B};XP.USVString=(F,A={})=>{let B=XP.DOMString(F,A),D=B.length,X=[];for(let Z=0;Z<D;++Z){let J=B.charCodeAt(Z);if(J<55296||J>57343)X.push(String.fromCodePoint(J));else if(56320<=J&&J<=57343)X.push(String.fromCodePoint(65533));else if(Z===D-1)X.push(String.fromCodePoint(65533));else{let Y=B.charCodeAt(Z+1);if(56320<=Y&&Y<=57343){let $=J&1023,G=Y&1023;X.push(String.fromCodePoint(65536+1024*$+G)),++Z}else X.push(String.fromCodePoint(65533))}}return X.join("")};XP.object=(F,A={})=>{if(F===null||typeof F!=="object"&&typeof F!=="function")throw m1(TypeError,"is not an object",A);return F};var O61=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,S61=typeof SharedArrayBuffer==="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function g$(F){try{return O61.call(F),!0}catch{return!1}}function u7(F){try{return S61.call(F),!0}catch{return!1}}function O7(F){try{return new Uint8Array(F),!1}catch{return!0}}XP.ArrayBuffer=(F,A={})=>{if(!g$(F)){if(A.allowShared&&!u7(F))throw m1(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",A);throw m1(TypeError,"is not an ArrayBuffer",A)}if(O7(F))throw m1(TypeError,"is a detached ArrayBuffer",A);return F};var x61=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;XP.DataView=(F,A={})=>{try{x61.call(F)}catch(B){throw m1(TypeError,"is not a DataView",A)}if(!A.allowShared&&u7(F.buffer))throw m1(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",A);if(O7(F.buffer))throw m1(TypeError,"is backed by a detached ArrayBuffer",A);return F};var _61=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach((F)=>{let{name:A}=F,B=/^[AEIOU]/u.test(A)?"an":"a";XP[A]=(D,X={})=>{if(!ArrayBuffer.isView(D)||_61.call(D)!==A)throw m1(TypeError,`is not ${B} ${A} object`,X);if(!X.allowShared&&u7(D.buffer))throw m1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",X);if(O7(D.buffer))throw m1(TypeError,"is a view on a detached ArrayBuffer",X);return D}});XP.ArrayBufferView=(F,A={})=>{if(!ArrayBuffer.isView(F))throw m1(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",A);if(!A.allowShared&&u7(F.buffer))throw m1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",A);if(O7(F.buffer))throw m1(TypeError,"is a view on a detached ArrayBuffer",A);return F};XP.BufferSource=(F,A={})=>{if(ArrayBuffer.isView(F)){if(!A.allowShared&&u7(F.buffer))throw m1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",A);if(O7(F.buffer))throw m1(TypeError,"is a view on a detached ArrayBuffer",A);return F}if(!A.allowShared&&!g$(F))throw m1(TypeError,"is not an ArrayBuffer or a view on one",A);if(A.allowShared&&!u7(F)&&!g$(F))throw m1(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",A);if(O7(F))throw m1(TypeError,"is a detached ArrayBuffer",A);return F};XP.DOMTimeStamp=XP["unsigned long long"]});var kB=z((WP,HP)=>{function D31(F){return typeof F==="object"&&F!==null||typeof F==="function"}var JP=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function X31(F,A){for(let B of Reflect.ownKeys(A)){let D=Reflect.getOwnPropertyDescriptor(A,B);if(D&&!Reflect.defineProperty(F,B,D))throw new TypeError(`Cannot redefine property: ${String(B)}`)}}function Z31(F,A){let B=GP(F);return Object.defineProperties(Object.create(B["%Object.prototype%"]),Object.getOwnPropertyDescriptors(A))}var YP=Symbol("wrapper"),$P=Symbol("impl"),_7=Symbol("SameObject caches"),TB=Symbol.for("[webidl2js] constructor registry"),J31=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function GP(F){if(JP(F,TB))return F[TB];let A=Object.create(null);A["%Object.prototype%"]=F.Object.prototype,A["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new F.Array()[Symbol.iterator]()));try{A["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(F.eval("(async function* () {})").prototype))}catch{A["%AsyncIteratorPrototype%"]=J31}return F[TB]=A,A}function Y31(F,A,B){if(!F[_7])F[_7]=Object.create(null);if(A in F[_7])return F[_7][A];return F[_7][A]=B(),F[_7][A]}function EP(F){return F?F[YP]:null}function CP(F){return F?F[$P]:null}function $31(F){let A=EP(F);return A?A:F}function G31(F){let A=CP(F);return A?A:F}var E31=Symbol("internal");function C31(F){if(typeof F!=="string")return!1;let A=F>>>0;if(A===4294967295)return!1;let B=`${A}`;if(F!==B)return!1;return!0}var W31=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function H31(F){try{return W31.call(F),!0}catch(A){return!1}}function q31([F,A],B){let D;switch(B){case"key":D=F;break;case"value":D=A;break;case"key+value":D=[F,A];break}return{value:D,done:!1}}var z31=Symbol("supports property index"),Q31=Symbol("supported property indices"),K31=Symbol("supports property name"),U31=Symbol("supported property names"),V31=Symbol("indexed property get"),L31=Symbol("indexed property set new"),w31=Symbol("indexed property set existing"),R31=Symbol("named property get"),I31=Symbol("named property set new"),P31=Symbol("named property set existing"),N31=Symbol("named property delete"),M31=Symbol("async iterator get the next iteration result"),j31=Symbol("async iterator return steps"),T31=Symbol("async iterator initialization steps"),k31=Symbol("async iterator end of iteration");HP.exports=WP={isObject:D31,hasOwn:JP,define:X31,newObjectInRealm:Z31,wrapperSymbol:YP,implSymbol:$P,getSameObject:Y31,ctorRegistrySymbol:TB,initCtorRegistry:GP,wrapperForImpl:EP,implForWrapper:CP,tryWrapperForImpl:$31,tryImplForWrapper:G31,iterInternalSymbol:E31,isArrayBuffer:H31,isArrayIndexPropName:C31,supportsPropertyIndex:z31,supportedPropertyIndices:Q31,supportsPropertyName:K31,supportedPropertyNames:U31,indexedGet:V31,indexedSetNew:L31,indexedSetExisting:w31,namedGet:R31,namedSetNew:I31,namedSetExisting:P31,namedDelete:N31,asyncIteratorNext:M31,asyncIteratorReturn:j31,asyncIteratorInit:T31,asyncIteratorEOI:k31,iteratorResult:q31}});var wP=z((nR1,LP)=>{var u31=/^xn--/,O31=/[^\0-\x7F]/,S31=/[\x2E\u3002\uFF0E\uFF61]/g,x31={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Z3=Math.floor,y$=String.fromCharCode;function H4(F){throw new RangeError(x31[F])}function _31(F,A){let B=[],D=F.length;while(D--)B[D]=A(F[D]);return B}function zP(F,A){let B=F.split("@"),D="";if(B.length>1)D=B[0]+"@",F=B[1];F=F.replace(S31,".");let X=F.split("."),Z=_31(X,A).join(".");return D+Z}function QP(F){let A=[],B=0,D=F.length;while(B<D){let X=F.charCodeAt(B++);if(X>=55296&&X<=56319&&B<D){let Z=F.charCodeAt(B++);if((Z&64512)==56320)A.push(((X&1023)<<10)+(Z&1023)+65536);else A.push(X),B--}else A.push(X)}return A}var f31=(F)=>String.fromCodePoint(...F),g31=function(F){if(F>=48&&F<58)return 26+(F-48);if(F>=65&&F<91)return F-65;if(F>=97&&F<123)return F-97;return 36},qP=function(F,A){return F+22+75*(F<26)-((A!=0)<<5)},KP=function(F,A,B){let D=0;F=B?Z3(F/700):F>>1,F+=Z3(F/A);for(;F>455;D+=36)F=Z3(F/35);return Z3(D+36*F/(F+38))},UP=function(F){let A=[],B=F.length,D=0,X=128,Z=72,J=F.lastIndexOf("-");if(J<0)J=0;for(let Y=0;Y<J;++Y){if(F.charCodeAt(Y)>=128)H4("not-basic");A.push(F.charCodeAt(Y))}for(let Y=J>0?J+1:0;Y<B;){let $=D;for(let E=1,C=36;;C+=36){if(Y>=B)H4("invalid-input");let W=g31(F.charCodeAt(Y++));if(W>=36)H4("invalid-input");if(W>Z3((2147483647-D)/E))H4("overflow");D+=W*E;let H=C<=Z?1:C>=Z+26?26:C-Z;if(W<H)break;let q=36-H;if(E>Z3(2147483647/q))H4("overflow");E*=q}let G=A.length+1;if(Z=KP(D-$,G,$==0),Z3(D/G)>2147483647-X)H4("overflow");X+=Z3(D/G),D%=G,A.splice(D++,0,X)}return String.fromCodePoint(...A)},VP=function(F){let A=[];F=QP(F);let B=F.length,D=128,X=0,Z=72;for(let $ of F)if($<128)A.push(y$($));let J=A.length,Y=J;if(J)A.push("-");while(Y<B){let $=2147483647;for(let E of F)if(E>=D&&E<$)$=E;let G=Y+1;if($-D>Z3((2147483647-X)/G))H4("overflow");X+=($-D)*G,D=$;for(let E of F){if(E<D&&++X>2147483647)H4("overflow");if(E===D){let C=X;for(let W=36;;W+=36){let H=W<=Z?1:W>=Z+26?26:W-Z;if(C<H)break;let q=C-H,Q=36-H;A.push(y$(qP(H+q%Q,0))),C=Z3(q/Q)}A.push(y$(qP(C,0))),Z=KP(X,G,Y===J),X=0,++Y}}++X,++D}return A.join("")},b31=function(F){return zP(F,function(A){return u31.test(A)?UP(A.slice(4).toLowerCase()):A})},y31=function(F){return zP(F,function(A){return O31.test(A)?"xn--"+VP(A):A})},h31={version:"2.3.1",ucs2:{decode:QP,encode:f31},decode:UP,encode:VP,toASCII:y31,toUnicode:b31};LP.exports=h31});var IP=z((aR1,RP)=>{var v31=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,m31=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,d31=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,c31=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,l31=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,p31=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,i31=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,n31=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,a31=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,s31=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,r31=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,t31=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;RP.exports={combiningMarks:v31,combiningClassVirama:m31,validZWNJ:d31,bidiDomain:c31,bidiS1LTR:l31,bidiS1RTL:p31,bidiS2:i31,bidiS3:n31,bidiS4EN:a31,bidiS4AN:s31,bidiS5:r31,bidiS6:t31}});var PP=z((sR1,o31)=>{o31.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," ̈"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," ̄"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," ́"],[181,1,"μ"],[182,2],[183,2],[184,1," ̧"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1⁄4"],[189,1,"1⁄2"],[190,1,"3⁄4"],[191,2],[192,1,"à"],[193,1,"á"],[194,1,"â"],[195,1,"ã"],[196,1,"ä"],[197,1,"å"],[198,1,"æ"],[199,1,"ç"],[200,1,"è"],[201,1,"é"],[202,1,"ê"],[203,1,"ë"],[204,1,"ì"],[205,1,"í"],[206,1,"î"],[207,1,"ï"],[208,1,"ð"],[209,1,"ñ"],[210,1,"ò"],[211,1,"ó"],[212,1,"ô"],[213,1,"õ"],[214,1,"ö"],[215,2],[216,1,"ø"],[217,1,"ù"],[218,1,"ú"],[219,1,"û"],[220,1,"ü"],[221,1,"ý"],[222,1,"þ"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"ā"],[257,2],[258,1,"ă"],[259,2],[260,1,"ą"],[261,2],[262,1,"ć"],[263,2],[264,1,"ĉ"],[265,2],[266,1,"ċ"],[267,2],[268,1,"č"],[269,2],[270,1,"ď"],[271,2],[272,1,"đ"],[273,2],[274,1,"ē"],[275,2],[276,1,"ĕ"],[277,2],[278,1,"ė"],[279,2],[280,1,"ę"],[281,2],[282,1,"ě"],[283,2],[284,1,"ĝ"],[285,2],[286,1,"ğ"],[287,2],[288,1,"ġ"],[289,2],[290,1,"ģ"],[291,2],[292,1,"ĥ"],[293,2],[294,1,"ħ"],[295,2],[296,1,"ĩ"],[297,2],[298,1,"ī"],[299,2],[300,1,"ĭ"],[301,2],[302,1,"į"],[303,2],[304,1,"i̇"],[305,2],[[306,307],1,"ij"],[308,1,"ĵ"],[309,2],[310,1,"ķ"],[[311,312],2],[313,1,"ĺ"],[314,2],[315,1,"ļ"],[316,2],[317,1,"ľ"],[318,2],[[319,320],1,"l·"],[321,1,"ł"],[322,2],[323,1,"ń"],[324,2],[325,1,"ņ"],[326,2],[327,1,"ň"],[328,2],[329,1,"ʼn"],[330,1,"ŋ"],[331,2],[332,1,"ō"],[333,2],[334,1,"ŏ"],[335,2],[336,1,"ő"],[337,2],[338,1,"œ"],[339,2],[340,1,"ŕ"],[341,2],[342,1,"ŗ"],[343,2],[344,1,"ř"],[345,2],[346,1,"ś"],[347,2],[348,1,"ŝ"],[349,2],[350,1,"ş"],[351,2],[352,1,"š"],[353,2],[354,1,"ţ"],[355,2],[356,1,"ť"],[357,2],[358,1,"ŧ"],[359,2],[360,1,"ũ"],[361,2],[362,1,"ū"],[363,2],[364,1,"ŭ"],[365,2],[366,1,"ů"],[367,2],[368,1,"ű"],[369,2],[370,1,"ų"],[371,2],[372,1,"ŵ"],[373,2],[374,1,"ŷ"],[375,2],[376,1,"ÿ"],[377,1,"ź"],[378,2],[379,1,"ż"],[380,2],[381,1,"ž"],[382,2],[383,1,"s"],[384,2],[385,1,"ɓ"],[386,1,"ƃ"],[387,2],[388,1,"ƅ"],[389,2],[390,1,"ɔ"],[391,1,"ƈ"],[392,2],[393,1,"ɖ"],[394,1,"ɗ"],[395,1,"ƌ"],[[396,397],2],[398,1,"ǝ"],[399,1,"ə"],[400,1,"ɛ"],[401,1,"ƒ"],[402,2],[403,1,"ɠ"],[404,1,"ɣ"],[405,2],[406,1,"ɩ"],[407,1,"ɨ"],[408,1,"ƙ"],[[409,411],2],[412,1,"ɯ"],[413,1,"ɲ"],[414,2],[415,1,"ɵ"],[416,1,"ơ"],[417,2],[418,1,"ƣ"],[419,2],[420,1,"ƥ"],[421,2],[422,1,"ʀ"],[423,1,"ƨ"],[424,2],[425,1,"ʃ"],[[426,427],2],[428,1,"ƭ"],[429,2],[430,1,"ʈ"],[431,1,"ư"],[432,2],[433,1,"ʊ"],[434,1,"ʋ"],[435,1,"ƴ"],[436,2],[437,1,"ƶ"],[438,2],[439,1,"ʒ"],[440,1,"ƹ"],[[441,443],2],[444,1,"ƽ"],[[445,451],2],[[452,454],1,"dž"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"ǎ"],[462,2],[463,1,"ǐ"],[464,2],[465,1,"ǒ"],[466,2],[467,1,"ǔ"],[468,2],[469,1,"ǖ"],[470,2],[471,1,"ǘ"],[472,2],[473,1,"ǚ"],[474,2],[475,1,"ǜ"],[[476,477],2],[478,1,"ǟ"],[479,2],[480,1,"ǡ"],[481,2],[482,1,"ǣ"],[483,2],[484,1,"ǥ"],[485,2],[486,1,"ǧ"],[487,2],[488,1,"ǩ"],[489,2],[490,1,"ǫ"],[491,2],[492,1,"ǭ"],[493,2],[494,1,"ǯ"],[[495,496],2],[[497,499],1,"dz"],[500,1,"ǵ"],[501,2],[502,1,"ƕ"],[503,1,"ƿ"],[504,1,"ǹ"],[505,2],[506,1,"ǻ"],[507,2],[508,1,"ǽ"],[509,2],[510,1,"ǿ"],[511,2],[512,1,"ȁ"],[513,2],[514,1,"ȃ"],[515,2],[516,1,"ȅ"],[517,2],[518,1,"ȇ"],[519,2],[520,1,"ȉ"],[521,2],[522,1,"ȋ"],[523,2],[524,1,"ȍ"],[525,2],[526,1,"ȏ"],[527,2],[528,1,"ȑ"],[529,2],[530,1,"ȓ"],[531,2],[532,1,"ȕ"],[533,2],[534,1,"ȗ"],[535,2],[536,1,"ș"],[537,2],[538,1,"ț"],[539,2],[540,1,"ȝ"],[541,2],[542,1,"ȟ"],[543,2],[544,1,"ƞ"],[545,2],[546,1,"ȣ"],[547,2],[548,1,"ȥ"],[549,2],[550,1,"ȧ"],[551,2],[552,1,"ȩ"],[553,2],[554,1,"ȫ"],[555,2],[556,1,"ȭ"],[557,2],[558,1,"ȯ"],[559,2],[560,1,"ȱ"],[561,2],[562,1,"ȳ"],[563,2],[[564,566],2],[[567,569],2],[570,1,"ⱥ"],[571,1,"ȼ"],[572,2],[573,1,"ƚ"],[574,1,"ⱦ"],[[575,576],2],[577,1,"ɂ"],[578,2],[579,1,"ƀ"],[580,1,"ʉ"],[581,1,"ʌ"],[582,1,"ɇ"],[583,2],[584,1,"ɉ"],[585,2],[586,1,"ɋ"],[587,2],[588,1,"ɍ"],[589,2],[590,1,"ɏ"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"ɦ"],[690,1,"j"],[691,1,"r"],[692,1,"ɹ"],[693,1,"ɻ"],[694,1,"ʁ"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," ̆"],[729,1," ̇"],[730,1," ̊"],[731,1," ̨"],[732,1," ̃"],[733,1," ̋"],[734,2],[735,2],[736,1,"ɣ"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"ʕ"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"̀"],[833,1,"́"],[834,2],[835,1,"̓"],[836,1,"̈́"],[837,1,"ι"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"ͱ"],[881,2],[882,1,"ͳ"],[883,2],[884,1,"ʹ"],[885,2],[886,1,"ͷ"],[887,2],[[888,889],3],[890,1," ι"],[[891,893],2],[894,1,";"],[895,1,"ϳ"],[[896,899],3],[900,1," ́"],[901,1," ̈́"],[902,1,"ά"],[903,1,"·"],[904,1,"έ"],[905,1,"ή"],[906,1,"ί"],[907,3],[908,1,"ό"],[909,3],[910,1,"ύ"],[911,1,"ώ"],[912,2],[913,1,"α"],[914,1,"β"],[915,1,"γ"],[916,1,"δ"],[917,1,"ε"],[918,1,"ζ"],[919,1,"η"],[920,1,"θ"],[921,1,"ι"],[922,1,"κ"],[923,1,"λ"],[924,1,"μ"],[925,1,"ν"],[926,1,"ξ"],[927,1,"ο"],[928,1,"π"],[929,1,"ρ"],[930,3],[931,1,"σ"],[932,1,"τ"],[933,1,"υ"],[934,1,"φ"],[935,1,"χ"],[936,1,"ψ"],[937,1,"ω"],[938,1,"ϊ"],[939,1,"ϋ"],[[940,961],2],[962,6,"σ"],[[963,974],2],[975,1,"ϗ"],[976,1,"β"],[977,1,"θ"],[978,1,"υ"],[979,1,"ύ"],[980,1,"ϋ"],[981,1,"φ"],[982,1,"π"],[983,2],[984,1,"ϙ"],[985,2],[986,1,"ϛ"],[987,2],[988,1,"ϝ"],[989,2],[990,1,"ϟ"],[991,2],[992,1,"ϡ"],[993,2],[994,1,"ϣ"],[995,2],[996,1,"ϥ"],[997,2],[998,1,"ϧ"],[999,2],[1000,1,"ϩ"],[1001,2],[1002,1,"ϫ"],[1003,2],[1004,1,"ϭ"],[1005,2],[1006,1,"ϯ"],[1007,2],[1008,1,"κ"],[1009,1,"ρ"],[1010,1,"σ"],[1011,2],[1012,1,"θ"],[1013,1,"ε"],[1014,2],[1015,1,"ϸ"],[1016,2],[1017,1,"σ"],[1018,1,"ϻ"],[1019,2],[1020,2],[1021,1,"ͻ"],[1022,1,"ͼ"],[1023,1,"ͽ"],[1024,1,"ѐ"],[1025,1,"ё"],[1026,1,"ђ"],[1027,1,"ѓ"],[1028,1,"є"],[1029,1,"ѕ"],[1030,1,"і"],[1031,1,"ї"],[1032,1,"ј"],[1033,1,"љ"],[1034,1,"њ"],[1035,1,"ћ"],[1036,1,"ќ"],[1037,1,"ѝ"],[1038,1,"ў"],[1039,1,"џ"],[1040,1,"а"],[1041,1,"б"],[1042,1,"в"],[1043,1,"г"],[1044,1,"д"],[1045,1,"е"],[1046,1,"ж"],[1047,1,"з"],[1048,1,"и"],[1049,1,"й"],[1050,1,"к"],[1051,1,"л"],[1052,1,"м"],[1053,1,"н"],[1054,1,"о"],[1055,1,"п"],[1056,1,"р"],[1057,1,"с"],[1058,1,"т"],[1059,1,"у"],[1060,1,"ф"],[1061,1,"х"],[1062,1,"ц"],[1063,1,"ч"],[1064,1,"ш"],[1065,1,"щ"],[1066,1,"ъ"],[1067,1,"ы"],[1068,1,"ь"],[1069,1,"э"],[1070,1,"ю"],[1071,1,"я"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"ѡ"],[1121,2],[1122,1,"ѣ"],[1123,2],[1124,1,"ѥ"],[1125,2],[1126,1,"ѧ"],[1127,2],[1128,1,"ѩ"],[1129,2],[1130,1,"ѫ"],[1131,2],[1132,1,"ѭ"],[1133,2],[1134,1,"ѯ"],[1135,2],[1136,1,"ѱ"],[1137,2],[1138,1,"ѳ"],[1139,2],[1140,1,"ѵ"],[1141,2],[1142,1,"ѷ"],[1143,2],[1144,1,"ѹ"],[1145,2],[1146,1,"ѻ"],[1147,2],[1148,1,"ѽ"],[1149,2],[1150,1,"ѿ"],[1151,2],[1152,1,"ҁ"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"ҋ"],[1163,2],[1164,1,"ҍ"],[1165,2],[1166,1,"ҏ"],[1167,2],[1168,1,"ґ"],[1169,2],[1170,1,"ғ"],[1171,2],[1172,1,"ҕ"],[1173,2],[1174,1,"җ"],[1175,2],[1176,1,"ҙ"],[1177,2],[1178,1,"қ"],[1179,2],[1180,1,"ҝ"],[1181,2],[1182,1,"ҟ"],[1183,2],[1184,1,"ҡ"],[1185,2],[1186,1,"ң"],[1187,2],[1188,1,"ҥ"],[1189,2],[1190,1,"ҧ"],[1191,2],[1192,1,"ҩ"],[1193,2],[1194,1,"ҫ"],[1195,2],[1196,1,"ҭ"],[1197,2],[1198,1,"ү"],[1199,2],[1200,1,"ұ"],[1201,2],[1202,1,"ҳ"],[1203,2],[1204,1,"ҵ"],[1205,2],[1206,1,"ҷ"],[1207,2],[1208,1,"ҹ"],[1209,2],[1210,1,"һ"],[1211,2],[1212,1,"ҽ"],[1213,2],[1214,1,"ҿ"],[1215,2],[1216,1,"ӏ"],[1217,1,"ӂ"],[1218,2],[1219,1,"ӄ"],[1220,2],[1221,1,"ӆ"],[1222,2],[1223,1,"ӈ"],[1224,2],[1225,1,"ӊ"],[1226,2],[1227,1,"ӌ"],[1228,2],[1229,1,"ӎ"],[1230,2],[1231,2],[1232,1,"ӑ"],[1233,2],[1234,1,"ӓ"],[1235,2],[1236,1,"ӕ"],[1237,2],[1238,1,"ӗ"],[1239,2],[1240,1,"ә"],[1241,2],[1242,1,"ӛ"],[1243,2],[1244,1,"ӝ"],[1245,2],[1246,1,"ӟ"],[1247,2],[1248,1,"ӡ"],[1249,2],[1250,1,"ӣ"],[1251,2],[1252,1,"ӥ"],[1253,2],[1254,1,"ӧ"],[1255,2],[1256,1,"ө"],[1257,2],[1258,1,"ӫ"],[1259,2],[1260,1,"ӭ"],[1261,2],[1262,1,"ӯ"],[1263,2],[1264,1,"ӱ"],[1265,2],[1266,1,"ӳ"],[1267,2],[1268,1,"ӵ"],[1269,2],[1270,1,"ӷ"],[1271,2],[1272,1,"ӹ"],[1273,2],[1274,1,"ӻ"],[1275,2],[1276,1,"ӽ"],[1277,2],[1278,1,"ӿ"],[1279,2],[1280,1,"ԁ"],[1281,2],[1282,1,"ԃ"],[1283,2],[1284,1,"ԅ"],[1285,2],[1286,1,"ԇ"],[1287,2],[1288,1,"ԉ"],[1289,2],[1290,1,"ԋ"],[1291,2],[1292,1,"ԍ"],[1293,2],[1294,1,"ԏ"],[1295,2],[1296,1,"ԑ"],[1297,2],[1298,1,"ԓ"],[1299,2],[1300,1,"ԕ"],[1301,2],[1302,1,"ԗ"],[1303,2],[1304,1,"ԙ"],[1305,2],[1306,1,"ԛ"],[1307,2],[1308,1,"ԝ"],[1309,2],[1310,1,"ԟ"],[1311,2],[1312,1,"ԡ"],[1313,2],[1314,1,"ԣ"],[1315,2],[1316,1,"ԥ"],[1317,2],[1318,1,"ԧ"],[1319,2],[1320,1,"ԩ"],[1321,2],[1322,1,"ԫ"],[1323,2],[1324,1,"ԭ"],[1325,2],[1326,1,"ԯ"],[1327,2],[1328,3],[1329,1,"ա"],[1330,1,"բ"],[1331,1,"գ"],[1332,1,"դ"],[1333,1,"ե"],[1334,1,"զ"],[1335,1,"է"],[1336,1,"ը"],[1337,1,"թ"],[1338,1,"ժ"],[1339,1,"ի"],[1340,1,"լ"],[1341,1,"խ"],[1342,1,"ծ"],[1343,1,"կ"],[1344,1,"հ"],[1345,1,"ձ"],[1346,1,"ղ"],[1347,1,"ճ"],[1348,1,"մ"],[1349,1,"յ"],[1350,1,"ն"],[1351,1,"շ"],[1352,1,"ո"],[1353,1,"չ"],[1354,1,"պ"],[1355,1,"ջ"],[1356,1,"ռ"],[1357,1,"ս"],[1358,1,"վ"],[1359,1,"տ"],[1360,1,"ր"],[1361,1,"ց"],[1362,1,"ւ"],[1363,1,"փ"],[1364,1,"ք"],[1365,1,"օ"],[1366,1,"ֆ"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"եւ"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"اٴ"],[1654,1,"وٴ"],[1655,1,"ۇٴ"],[1656,1,"يٴ"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"क़"],[2393,1,"ख़"],[2394,1,"ग़"],[2395,1,"ज़"],[2396,1,"ड़"],[2397,1,"ढ़"],[2398,1,"फ़"],[2399,1,"य़"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"ড়"],[2525,1,"ঢ়"],[2526,3],[2527,1,"য়"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"ਲ਼"],[2612,3],[2613,2],[2614,1,"ਸ਼"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"ਖ਼"],[2650,1,"ਗ਼"],[2651,1,"ਜ਼"],[2652,2],[2653,3],[2654,1,"ਫ਼"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"ଡ଼"],[2909,1,"ଢ଼"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"ํา"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"ໍາ"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"ຫນ"],[3805,1,"ຫມ"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"་"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"གྷ"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"ཌྷ"],[[3918,3921],2],[3922,1,"དྷ"],[[3923,3926],2],[3927,1,"བྷ"],[[3928,3931],2],[3932,1,"ཛྷ"],[[3933,3944],2],[3945,1,"ཀྵ"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"ཱི"],[3956,2],[3957,1,"ཱུ"],[3958,1,"ྲྀ"],[3959,1,"ྲཱྀ"],[3960,1,"ླྀ"],[3961,1,"ླཱྀ"],[[3962,3968],2],[3969,1,"ཱྀ"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"ྒྷ"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"ྜྷ"],[[3998,4001],2],[4002,1,"ྡྷ"],[[4003,4006],2],[4007,1,"ྦྷ"],[[4008,4011],2],[4012,1,"ྫྷ"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"ྐྵ"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,"ⴀ"],[4257,1,"ⴁ"],[4258,1,"ⴂ"],[4259,1,"ⴃ"],[4260,1,"ⴄ"],[4261,1,"ⴅ"],[4262,1,"ⴆ"],[4263,1,"ⴇ"],[4264,1,"ⴈ"],[4265,1,"ⴉ"],[4266,1,"ⴊ"],[4267,1,"ⴋ"],[4268,1,"ⴌ"],[4269,1,"ⴍ"],[4270,1,"ⴎ"],[4271,1,"ⴏ"],[4272,1,"ⴐ"],[4273,1,"ⴑ"],[4274,1,"ⴒ"],[4275,1,"ⴓ"],[4276,1,"ⴔ"],[4277,1,"ⴕ"],[4278,1,"ⴖ"],[4279,1,"ⴗ"],[4280,1,"ⴘ"],[4281,1,"ⴙ"],[4282,1,"ⴚ"],[4283,1,"ⴛ"],[4284,1,"ⴜ"],[4285,1,"ⴝ"],[4286,1,"ⴞ"],[4287,1,"ⴟ"],[4288,1,"ⴠ"],[4289,1,"ⴡ"],[4290,1,"ⴢ"],[4291,1,"ⴣ"],[4292,1,"ⴤ"],[4293,1,"ⴥ"],[4294,3],[4295,1,"ⴧ"],[[4296,4300],3],[4301,1,"ⴭ"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"ნ"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"Ᏸ"],[5113,1,"Ᏹ"],[5114,1,"Ᏺ"],[5115,1,"Ᏻ"],[5116,1,"Ᏼ"],[5117,1,"Ᏽ"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6000],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"в"],[7297,1,"д"],[7298,1,"о"],[7299,1,"с"],[[7300,7301],1,"т"],[7302,1,"ъ"],[7303,1,"ѣ"],[7304,1,"ꙋ"],[7305,1,"ᲊ"],[7306,2],[[7307,7311],3],[7312,1,"ა"],[7313,1,"ბ"],[7314,1,"გ"],[7315,1,"დ"],[7316,1,"ე"],[7317,1,"ვ"],[7318,1,"ზ"],[7319,1,"თ"],[7320,1,"ი"],[7321,1,"კ"],[7322,1,"ლ"],[7323,1,"მ"],[7324,1,"ნ"],[7325,1,"ო"],[7326,1,"პ"],[7327,1,"ჟ"],[7328,1,"რ"],[7329,1,"ს"],[7330,1,"ტ"],[7331,1,"უ"],[7332,1,"ფ"],[7333,1,"ქ"],[7334,1,"ღ"],[7335,1,"ყ"],[7336,1,"შ"],[7337,1,"ჩ"],[7338,1,"ც"],[7339,1,"ძ"],[7340,1,"წ"],[7341,1,"ჭ"],[7342,1,"ხ"],[7343,1,"ჯ"],[7344,1,"ჰ"],[7345,1,"ჱ"],[7346,1,"ჲ"],[7347,1,"ჳ"],[7348,1,"ჴ"],[7349,1,"ჵ"],[7350,1,"ჶ"],[7351,1,"ჷ"],[7352,1,"ჸ"],[7353,1,"ჹ"],[7354,1,"ჺ"],[[7355,7356],3],[7357,1,"ჽ"],[7358,1,"ჾ"],[7359,1,"ჿ"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"æ"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"ǝ"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"ȣ"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"ɐ"],[7493,1,"ɑ"],[7494,1,"ᴂ"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"ə"],[7499,1,"ɛ"],[7500,1,"ɜ"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"ŋ"],[7506,1,"o"],[7507,1,"ɔ"],[7508,1,"ᴖ"],[7509,1,"ᴗ"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"ᴝ"],[7514,1,"ɯ"],[7515,1,"v"],[7516,1,"ᴥ"],[7517,1,"β"],[7518,1,"γ"],[7519,1,"δ"],[7520,1,"φ"],[7521,1,"χ"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"β"],[7527,1,"γ"],[7528,1,"ρ"],[7529,1,"φ"],[7530,1,"χ"],[7531,2],[[7532,7543],2],[7544,1,"н"],[[7545,7578],2],[7579,1,"ɒ"],[7580,1,"c"],[7581,1,"ɕ"],[7582,1,"ð"],[7583,1,"ɜ"],[7584,1,"f"],[7585,1,"ɟ"],[7586,1,"ɡ"],[7587,1,"ɥ"],[7588,1,"ɨ"],[7589,1,"ɩ"],[7590,1,"ɪ"],[7591,1,"ᵻ"],[7592,1,"ʝ"],[7593,1,"ɭ"],[7594,1,"ᶅ"],[7595,1,"ʟ"],[7596,1,"ɱ"],[7597,1,"ɰ"],[7598,1,"ɲ"],[7599,1,"ɳ"],[7600,1,"ɴ"],[7601,1,"ɵ"],[7602,1,"ɸ"],[7603,1,"ʂ"],[7604,1,"ʃ"],[7605,1,"ƫ"],[7606,1,"ʉ"],[7607,1,"ʊ"],[7608,1,"ᴜ"],[7609,1,"ʋ"],[7610,1,"ʌ"],[7611,1,"z"],[7612,1,"ʐ"],[7613,1,"ʑ"],[7614,1,"ʒ"],[7615,1,"θ"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"ḁ"],[7681,2],[7682,1,"ḃ"],[7683,2],[7684,1,"ḅ"],[7685,2],[7686,1,"ḇ"],[7687,2],[7688,1,"ḉ"],[7689,2],[7690,1,"ḋ"],[7691,2],[7692,1,"ḍ"],[7693,2],[7694,1,"ḏ"],[7695,2],[7696,1,"ḑ"],[7697,2],[7698,1,"ḓ"],[7699,2],[7700,1,"ḕ"],[7701,2],[7702,1,"ḗ"],[7703,2],[7704,1,"ḙ"],[7705,2],[7706,1,"ḛ"],[7707,2],[7708,1,"ḝ"],[7709,2],[7710,1,"ḟ"],[7711,2],[7712,1,"ḡ"],[7713,2],[7714,1,"ḣ"],[7715,2],[7716,1,"ḥ"],[7717,2],[7718,1,"ḧ"],[7719,2],[7720,1,"ḩ"],[7721,2],[7722,1,"ḫ"],[7723,2],[7724,1,"ḭ"],[7725,2],[7726,1,"ḯ"],[7727,2],[7728,1,"ḱ"],[7729,2],[7730,1,"ḳ"],[7731,2],[7732,1,"ḵ"],[7733,2],[7734,1,"ḷ"],[7735,2],[7736,1,"ḹ"],[7737,2],[7738,1,"ḻ"],[7739,2],[7740,1,"ḽ"],[7741,2],[7742,1,"ḿ"],[7743,2],[7744,1,"ṁ"],[7745,2],[7746,1,"ṃ"],[7747,2],[7748,1,"ṅ"],[7749,2],[7750,1,"ṇ"],[7751,2],[7752,1,"ṉ"],[7753,2],[7754,1,"ṋ"],[7755,2],[7756,1,"ṍ"],[7757,2],[7758,1,"ṏ"],[7759,2],[7760,1,"ṑ"],[7761,2],[7762,1,"ṓ"],[7763,2],[7764,1,"ṕ"],[7765,2],[7766,1,"ṗ"],[7767,2],[7768,1,"ṙ"],[7769,2],[7770,1,"ṛ"],[7771,2],[7772,1,"ṝ"],[7773,2],[7774,1,"ṟ"],[7775,2],[7776,1,"ṡ"],[7777,2],[7778,1,"ṣ"],[7779,2],[7780,1,"ṥ"],[7781,2],[7782,1,"ṧ"],[7783,2],[7784,1,"ṩ"],[7785,2],[7786,1,"ṫ"],[7787,2],[7788,1,"ṭ"],[7789,2],[7790,1,"ṯ"],[7791,2],[7792,1,"ṱ"],[7793,2],[7794,1,"ṳ"],[7795,2],[7796,1,"ṵ"],[7797,2],[7798,1,"ṷ"],[7799,2],[7800,1,"ṹ"],[7801,2],[7802,1,"ṻ"],[7803,2],[7804,1,"ṽ"],[7805,2],[7806,1,"ṿ"],[7807,2],[7808,1,"ẁ"],[7809,2],[7810,1,"ẃ"],[7811,2],[7812,1,"ẅ"],[7813,2],[7814,1,"ẇ"],[7815,2],[7816,1,"ẉ"],[7817,2],[7818,1,"ẋ"],[7819,2],[7820,1,"ẍ"],[7821,2],[7822,1,"ẏ"],[7823,2],[7824,1,"ẑ"],[7825,2],[7826,1,"ẓ"],[7827,2],[7828,1,"ẕ"],[[7829,7833],2],[7834,1,"aʾ"],[7835,1,"ṡ"],[[7836,7837],2],[7838,1,"ß"],[7839,2],[7840,1,"ạ"],[7841,2],[7842,1,"ả"],[7843,2],[7844,1,"ấ"],[7845,2],[7846,1,"ầ"],[7847,2],[7848,1,"ẩ"],[7849,2],[7850,1,"ẫ"],[7851,2],[7852,1,"ậ"],[7853,2],[7854,1,"ắ"],[7855,2],[7856,1,"ằ"],[7857,2],[7858,1,"ẳ"],[7859,2],[7860,1,"ẵ"],[7861,2],[7862,1,"ặ"],[7863,2],[7864,1,"ẹ"],[7865,2],[7866,1,"ẻ"],[7867,2],[7868,1,"ẽ"],[7869,2],[7870,1,"ế"],[7871,2],[7872,1,"ề"],[7873,2],[7874,1,"ể"],[7875,2],[7876,1,"ễ"],[7877,2],[7878,1,"ệ"],[7879,2],[7880,1,"ỉ"],[7881,2],[7882,1,"ị"],[7883,2],[7884,1,"ọ"],[7885,2],[7886,1,"ỏ"],[7887,2],[7888,1,"ố"],[7889,2],[7890,1,"ồ"],[7891,2],[7892,1,"ổ"],[7893,2],[7894,1,"ỗ"],[7895,2],[7896,1,"ộ"],[7897,2],[7898,1,"ớ"],[7899,2],[7900,1,"ờ"],[7901,2],[7902,1,"ở"],[7903,2],[7904,1,"ỡ"],[7905,2],[7906,1,"ợ"],[7907,2],[7908,1,"ụ"],[7909,2],[7910,1,"ủ"],[7911,2],[7912,1,"ứ"],[7913,2],[7914,1,"ừ"],[7915,2],[7916,1,"ử"],[7917,2],[7918,1,"ữ"],[7919,2],[7920,1,"ự"],[7921,2],[7922,1,"ỳ"],[7923,2],[7924,1,"ỵ"],[7925,2],[7926,1,"ỷ"],[7927,2],[7928,1,"ỹ"],[7929,2],[7930,1,"ỻ"],[7931,2],[7932,1,"ỽ"],[7933,2],[7934,1,"ỿ"],[7935,2],[[7936,7943],2],[7944,1,"ἀ"],[7945,1,"ἁ"],[7946,1,"ἂ"],[7947,1,"ἃ"],[7948,1,"ἄ"],[7949,1,"ἅ"],[7950,1,"ἆ"],[7951,1,"ἇ"],[[7952,7957],2],[[7958,7959],3],[7960,1,"ἐ"],[7961,1,"ἑ"],[7962,1,"ἒ"],[7963,1,"ἓ"],[7964,1,"ἔ"],[7965,1,"ἕ"],[[7966,7967],3],[[7968,7975],2],[7976,1,"ἠ"],[7977,1,"ἡ"],[7978,1,"ἢ"],[7979,1,"ἣ"],[7980,1,"ἤ"],[7981,1,"ἥ"],[7982,1,"ἦ"],[7983,1,"ἧ"],[[7984,7991],2],[7992,1,"ἰ"],[7993,1,"ἱ"],[7994,1,"ἲ"],[7995,1,"ἳ"],[7996,1,"ἴ"],[7997,1,"ἵ"],[7998,1,"ἶ"],[7999,1,"ἷ"],[[8000,8005],2],[[8006,8007],3],[8008,1,"ὀ"],[8009,1,"ὁ"],[8010,1,"ὂ"],[8011,1,"ὃ"],[8012,1,"ὄ"],[8013,1,"ὅ"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"ὑ"],[8026,3],[8027,1,"ὓ"],[8028,3],[8029,1,"ὕ"],[8030,3],[8031,1,"ὗ"],[[8032,8039],2],[8040,1,"ὠ"],[8041,1,"ὡ"],[8042,1,"ὢ"],[8043,1,"ὣ"],[8044,1,"ὤ"],[8045,1,"ὥ"],[8046,1,"ὦ"],[8047,1,"ὧ"],[8048,2],[8049,1,"ά"],[8050,2],[8051,1,"έ"],[8052,2],[8053,1,"ή"],[8054,2],[8055,1,"ί"],[8056,2],[8057,1,"ό"],[8058,2],[8059,1,"ύ"],[8060,2],[8061,1,"ώ"],[[8062,8063],3],[8064,1,"ἀι"],[8065,1,"ἁι"],[8066,1,"ἂι"],[8067,1,"ἃι"],[8068,1,"ἄι"],[8069,1,"ἅι"],[8070,1,"ἆι"],[8071,1,"ἇι"],[8072,1,"ἀι"],[8073,1,"ἁι"],[8074,1,"ἂι"],[8075,1,"ἃι"],[8076,1,"ἄι"],[8077,1,"ἅι"],[8078,1,"ἆι"],[8079,1,"ἇι"],[8080,1,"ἠι"],[8081,1,"ἡι"],[8082,1,"ἢι"],[8083,1,"ἣι"],[8084,1,"ἤι"],[8085,1,"ἥι"],[8086,1,"ἦι"],[8087,1,"ἧι"],[8088,1,"ἠι"],[8089,1,"ἡι"],[8090,1,"ἢι"],[8091,1,"ἣι"],[8092,1,"ἤι"],[8093,1,"ἥι"],[8094,1,"ἦι"],[8095,1,"ἧι"],[8096,1,"ὠι"],[8097,1,"ὡι"],[8098,1,"ὢι"],[8099,1,"ὣι"],[8100,1,"ὤι"],[8101,1,"ὥι"],[8102,1,"ὦι"],[8103,1,"ὧι"],[8104,1,"ὠι"],[8105,1,"ὡι"],[8106,1,"ὢι"],[8107,1,"ὣι"],[8108,1,"ὤι"],[8109,1,"ὥι"],[8110,1,"ὦι"],[8111,1,"ὧι"],[[8112,8113],2],[8114,1,"ὰι"],[8115,1,"αι"],[8116,1,"άι"],[8117,3],[8118,2],[8119,1,"ᾶι"],[8120,1,"ᾰ"],[8121,1,"ᾱ"],[8122,1,"ὰ"],[8123,1,"ά"],[8124,1,"αι"],[8125,1," ̓"],[8126,1,"ι"],[8127,1," ̓"],[8128,1," ͂"],[8129,1," ̈͂"],[8130,1,"ὴι"],[8131,1,"ηι"],[8132,1,"ήι"],[8133,3],[8134,2],[8135,1,"ῆι"],[8136,1,"ὲ"],[8137,1,"έ"],[8138,1,"ὴ"],[8139,1,"ή"],[8140,1,"ηι"],[8141,1," ̓̀"],[8142,1," ̓́"],[8143,1," ̓͂"],[[8144,8146],2],[8147,1,"ΐ"],[[8148,8149],3],[[8150,8151],2],[8152,1,"ῐ"],[8153,1,"ῑ"],[8154,1,"ὶ"],[8155,1,"ί"],[8156,3],[8157,1," ̔̀"],[8158,1," ̔́"],[8159,1," ̔͂"],[[8160,8162],2],[8163,1,"ΰ"],[[8164,8167],2],[8168,1,"ῠ"],[8169,1,"ῡ"],[8170,1,"ὺ"],[8171,1,"ύ"],[8172,1,"ῥ"],[8173,1," ̈̀"],[8174,1," ̈́"],[8175,1,"`"],[[8176,8177],3],[8178,1,"ὼι"],[8179,1,"ωι"],[8180,1,"ώι"],[8181,3],[8182,2],[8183,1,"ῶι"],[8184,1,"ὸ"],[8185,1,"ό"],[8186,1,"ὼ"],[8187,1,"ώ"],[8188,1,"ωι"],[8189,1," ́"],[8190,1," ̔"],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"‐"],[[8210,8214],2],[8215,1," ̳"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,"′′"],[8244,1,"′′′"],[8245,2],[8246,1,"‵‵"],[8247,1,"‵‵‵"],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," ̅"],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"′′′′"],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,"−"],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,"−"],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"ə"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"°c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,"ɛ"],[8456,2],[8457,1,"°f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"ħ"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"ω"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"å"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,"ⅎ"],[8499,1,"m"],[8500,1,"o"],[8501,1,"א"],[8502,1,"ב"],[8503,1,"ג"],[8504,1,"ד"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"π"],[[8509,8510],1,"γ"],[8511,1,"π"],[8512,1,"∑"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1⁄7"],[8529,1,"1⁄9"],[8530,1,"1⁄10"],[8531,1,"1⁄3"],[8532,1,"2⁄3"],[8533,1,"1⁄5"],[8534,1,"2⁄5"],[8535,1,"3⁄5"],[8536,1,"4⁄5"],[8537,1,"1⁄6"],[8538,1,"5⁄6"],[8539,1,"1⁄8"],[8540,1,"3⁄8"],[8541,1,"5⁄8"],[8542,1,"7⁄8"],[8543,1,"1⁄"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,"ↄ"],[8580,2],[[8581,8584],2],[8585,1,"0⁄3"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"∫∫"],[8749,1,"∫∫∫"],[8750,2],[8751,1,"∮∮"],[8752,1,"∮∮∮"],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9000],2],[9001,1,"〈"],[9002,1,"〉"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"∫∫∫∫"],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,"⫝̸"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"ⰰ"],[11265,1,"ⰱ"],[11266,1,"ⰲ"],[11267,1,"ⰳ"],[11268,1,"ⰴ"],[11269,1,"ⰵ"],[11270,1,"ⰶ"],[11271,1,"ⰷ"],[11272,1,"ⰸ"],[11273,1,"ⰹ"],[11274,1,"ⰺ"],[11275,1,"ⰻ"],[11276,1,"ⰼ"],[11277,1,"ⰽ"],[11278,1,"ⰾ"],[11279,1,"ⰿ"],[11280,1,"ⱀ"],[11281,1,"ⱁ"],[11282,1,"ⱂ"],[11283,1,"ⱃ"],[11284,1,"ⱄ"],[11285,1,"ⱅ"],[11286,1,"ⱆ"],[11287,1,"ⱇ"],[11288,1,"ⱈ"],[11289,1,"ⱉ"],[11290,1,"ⱊ"],[11291,1,"ⱋ"],[11292,1,"ⱌ"],[11293,1,"ⱍ"],[11294,1,"ⱎ"],[11295,1,"ⱏ"],[11296,1,"ⱐ"],[11297,1,"ⱑ"],[11298,1,"ⱒ"],[11299,1,"ⱓ"],[11300,1,"ⱔ"],[11301,1,"ⱕ"],[11302,1,"ⱖ"],[11303,1,"ⱗ"],[11304,1,"ⱘ"],[11305,1,"ⱙ"],[11306,1,"ⱚ"],[11307,1,"ⱛ"],[11308,1,"ⱜ"],[11309,1,"ⱝ"],[11310,1,"ⱞ"],[11311,1,"ⱟ"],[[11312,11358],2],[11359,2],[11360,1,"ⱡ"],[11361,2],[11362,1,"ɫ"],[11363,1,"ᵽ"],[11364,1,"ɽ"],[[11365,11366],2],[11367,1,"ⱨ"],[11368,2],[11369,1,"ⱪ"],[11370,2],[11371,1,"ⱬ"],[11372,2],[11373,1,"ɑ"],[11374,1,"ɱ"],[11375,1,"ɐ"],[11376,1,"ɒ"],[11377,2],[11378,1,"ⱳ"],[11379,2],[11380,2],[11381,1,"ⱶ"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"ȿ"],[11391,1,"ɀ"],[11392,1,"ⲁ"],[11393,2],[11394,1,"ⲃ"],[11395,2],[11396,1,"ⲅ"],[11397,2],[11398,1,"ⲇ"],[11399,2],[11400,1,"ⲉ"],[11401,2],[11402,1,"ⲋ"],[11403,2],[11404,1,"ⲍ"],[11405,2],[11406,1,"ⲏ"],[11407,2],[11408,1,"ⲑ"],[11409,2],[11410,1,"ⲓ"],[11411,2],[11412,1,"ⲕ"],[11413,2],[11414,1,"ⲗ"],[11415,2],[11416,1,"ⲙ"],[11417,2],[11418,1,"ⲛ"],[11419,2],[11420,1,"ⲝ"],[11421,2],[11422,1,"ⲟ"],[11423,2],[11424,1,"ⲡ"],[11425,2],[11426,1,"ⲣ"],[11427,2],[11428,1,"ⲥ"],[11429,2],[11430,1,"ⲧ"],[11431,2],[11432,1,"ⲩ"],[11433,2],[11434,1,"ⲫ"],[11435,2],[11436,1,"ⲭ"],[11437,2],[11438,1,"ⲯ"],[11439,2],[11440,1,"ⲱ"],[11441,2],[11442,1,"ⲳ"],[11443,2],[11444,1,"ⲵ"],[11445,2],[11446,1,"ⲷ"],[11447,2],[11448,1,"ⲹ"],[11449,2],[11450,1,"ⲻ"],[11451,2],[11452,1,"ⲽ"],[11453,2],[11454,1,"ⲿ"],[11455,2],[11456,1,"ⳁ"],[11457,2],[11458,1,"ⳃ"],[11459,2],[11460,1,"ⳅ"],[11461,2],[11462,1,"ⳇ"],[11463,2],[11464,1,"ⳉ"],[11465,2],[11466,1,"ⳋ"],[11467,2],[11468,1,"ⳍ"],[11469,2],[11470,1,"ⳏ"],[11471,2],[11472,1,"ⳑ"],[11473,2],[11474,1,"ⳓ"],[11475,2],[11476,1,"ⳕ"],[11477,2],[11478,1,"ⳗ"],[11479,2],[11480,1,"ⳙ"],[11481,2],[11482,1,"ⳛ"],[11483,2],[11484,1,"ⳝ"],[11485,2],[11486,1,"ⳟ"],[11487,2],[11488,1,"ⳡ"],[11489,2],[11490,1,"ⳣ"],[[11491,11492],2],[[11493,11498],2],[11499,1,"ⳬ"],[11500,2],[11501,1,"ⳮ"],[[11502,11505],2],[11506,1,"ⳳ"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"ⵡ"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"母"],[[11936,12018],2],[12019,1,"龟"],[[12020,12031],3],[12032,1,"一"],[12033,1,"丨"],[12034,1,"丶"],[12035,1,"丿"],[12036,1,"乙"],[12037,1,"亅"],[12038,1,"二"],[12039,1,"亠"],[12040,1,"人"],[12041,1,"儿"],[12042,1,"入"],[12043,1,"八"],[12044,1,"冂"],[12045,1,"冖"],[12046,1,"冫"],[12047,1,"几"],[12048,1,"凵"],[12049,1,"刀"],[12050,1,"力"],[12051,1,"勹"],[12052,1,"匕"],[12053,1,"匚"],[12054,1,"匸"],[12055,1,"十"],[12056,1,"卜"],[12057,1,"卩"],[12058,1,"厂"],[12059,1,"厶"],[12060,1,"又"],[12061,1,"口"],[12062,1,"囗"],[12063,1,"土"],[12064,1,"士"],[12065,1,"夂"],[12066,1,"夊"],[12067,1,"夕"],[12068,1,"大"],[12069,1,"女"],[12070,1,"子"],[12071,1,"宀"],[12072,1,"寸"],[12073,1,"小"],[12074,1,"尢"],[12075,1,"尸"],[12076,1,"屮"],[12077,1,"山"],[12078,1,"巛"],[12079,1,"工"],[12080,1,"己"],[12081,1,"巾"],[12082,1,"干"],[12083,1,"幺"],[12084,1,"广"],[12085,1,"廴"],[12086,1,"廾"],[12087,1,"弋"],[12088,1,"弓"],[12089,1,"彐"],[12090,1,"彡"],[12091,1,"彳"],[12092,1,"心"],[12093,1,"戈"],[12094,1,"戶"],[12095,1,"手"],[12096,1,"支"],[12097,1,"攴"],[12098,1,"文"],[12099,1,"斗"],[12100,1,"斤"],[12101,1,"方"],[12102,1,"无"],[12103,1,"日"],[12104,1,"曰"],[12105,1,"月"],[12106,1,"木"],[12107,1,"欠"],[12108,1,"止"],[12109,1,"歹"],[12110,1,"殳"],[12111,1,"毋"],[12112,1,"比"],[12113,1,"毛"],[12114,1,"氏"],[12115,1,"气"],[12116,1,"水"],[12117,1,"火"],[12118,1,"爪"],[12119,1,"父"],[12120,1,"爻"],[12121,1,"爿"],[12122,1,"片"],[12123,1,"牙"],[12124,1,"牛"],[12125,1,"犬"],[12126,1,"玄"],[12127,1,"玉"],[12128,1,"瓜"],[12129,1,"瓦"],[12130,1,"甘"],[12131,1,"生"],[12132,1,"用"],[12133,1,"田"],[12134,1,"疋"],[12135,1,"疒"],[12136,1,"癶"],[12137,1,"白"],[12138,1,"皮"],[12139,1,"皿"],[12140,1,"目"],[12141,1,"矛"],[12142,1,"矢"],[12143,1,"石"],[12144,1,"示"],[12145,1,"禸"],[12146,1,"禾"],[12147,1,"穴"],[12148,1,"立"],[12149,1,"竹"],[12150,1,"米"],[12151,1,"糸"],[12152,1,"缶"],[12153,1,"网"],[12154,1,"羊"],[12155,1,"羽"],[12156,1,"老"],[12157,1,"而"],[12158,1,"耒"],[12159,1,"耳"],[12160,1,"聿"],[12161,1,"肉"],[12162,1,"臣"],[12163,1,"自"],[12164,1,"至"],[12165,1,"臼"],[12166,1,"舌"],[12167,1,"舛"],[12168,1,"舟"],[12169,1,"艮"],[12170,1,"色"],[12171,1,"艸"],[12172,1,"虍"],[12173,1,"虫"],[12174,1,"血"],[12175,1,"行"],[12176,1,"衣"],[12177,1,"襾"],[12178,1,"見"],[12179,1,"角"],[12180,1,"言"],[12181,1,"谷"],[12182,1,"豆"],[12183,1,"豕"],[12184,1,"豸"],[12185,1,"貝"],[12186,1,"赤"],[12187,1,"走"],[12188,1,"足"],[12189,1,"身"],[12190,1,"車"],[12191,1,"辛"],[12192,1,"辰"],[12193,1,"辵"],[12194,1,"邑"],[12195,1,"酉"],[12196,1,"釆"],[12197,1,"里"],[12198,1,"金"],[12199,1,"長"],[12200,1,"門"],[12201,1,"阜"],[12202,1,"隶"],[12203,1,"隹"],[12204,1,"雨"],[12205,1,"靑"],[12206,1,"非"],[12207,1,"面"],[12208,1,"革"],[12209,1,"韋"],[12210,1,"韭"],[12211,1,"音"],[12212,1,"頁"],[12213,1,"風"],[12214,1,"飛"],[12215,1,"食"],[12216,1,"首"],[12217,1,"香"],[12218,1,"馬"],[12219,1,"骨"],[12220,1,"高"],[12221,1,"髟"],[12222,1,"鬥"],[12223,1,"鬯"],[12224,1,"鬲"],[12225,1,"鬼"],[12226,1,"魚"],[12227,1,"鳥"],[12228,1,"鹵"],[12229,1,"鹿"],[12230,1,"麥"],[12231,1,"麻"],[12232,1,"黃"],[12233,1,"黍"],[12234,1,"黑"],[12235,1,"黹"],[12236,1,"黽"],[12237,1,"鼎"],[12238,1,"鼓"],[12239,1,"鼠"],[12240,1,"鼻"],[12241,1,"齊"],[12242,1,"齒"],[12243,1,"龍"],[12244,1,"龜"],[12245,1,"龠"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"〒"],[12343,2],[12344,1,"十"],[12345,1,"卄"],[12346,1,"卅"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," ゙"],[12444,1," ゚"],[[12445,12446],2],[12447,1,"より"],[12448,2],[[12449,12542],2],[12543,1,"コト"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"ᄀ"],[12594,1,"ᄁ"],[12595,1,"ᆪ"],[12596,1,"ᄂ"],[12597,1,"ᆬ"],[12598,1,"ᆭ"],[12599,1,"ᄃ"],[12600,1,"ᄄ"],[12601,1,"ᄅ"],[12602,1,"ᆰ"],[12603,1,"ᆱ"],[12604,1,"ᆲ"],[12605,1,"ᆳ"],[12606,1,"ᆴ"],[12607,1,"ᆵ"],[12608,1,"ᄚ"],[12609,1,"ᄆ"],[12610,1,"ᄇ"],[12611,1,"ᄈ"],[12612,1,"ᄡ"],[12613,1,"ᄉ"],[12614,1,"ᄊ"],[12615,1,"ᄋ"],[12616,1,"ᄌ"],[12617,1,"ᄍ"],[12618,1,"ᄎ"],[12619,1,"ᄏ"],[12620,1,"ᄐ"],[12621,1,"ᄑ"],[12622,1,"ᄒ"],[12623,1,"ᅡ"],[12624,1,"ᅢ"],[12625,1,"ᅣ"],[12626,1,"ᅤ"],[12627,1,"ᅥ"],[12628,1,"ᅦ"],[12629,1,"ᅧ"],[12630,1,"ᅨ"],[12631,1,"ᅩ"],[12632,1,"ᅪ"],[12633,1,"ᅫ"],[12634,1,"ᅬ"],[12635,1,"ᅭ"],[12636,1,"ᅮ"],[12637,1,"ᅯ"],[12638,1,"ᅰ"],[12639,1,"ᅱ"],[12640,1,"ᅲ"],[12641,1,"ᅳ"],[12642,1,"ᅴ"],[12643,1,"ᅵ"],[12644,7],[12645,1,"ᄔ"],[12646,1,"ᄕ"],[12647,1,"ᇇ"],[12648,1,"ᇈ"],[12649,1,"ᇌ"],[12650,1,"ᇎ"],[12651,1,"ᇓ"],[12652,1,"ᇗ"],[12653,1,"ᇙ"],[12654,1,"ᄜ"],[12655,1,"ᇝ"],[12656,1,"ᇟ"],[12657,1,"ᄝ"],[12658,1,"ᄞ"],[12659,1,"ᄠ"],[12660,1,"ᄢ"],[12661,1,"ᄣ"],[12662,1,"ᄧ"],[12663,1,"ᄩ"],[12664,1,"ᄫ"],[12665,1,"ᄬ"],[12666,1,"ᄭ"],[12667,1,"ᄮ"],[12668,1,"ᄯ"],[12669,1,"ᄲ"],[12670,1,"ᄶ"],[12671,1,"ᅀ"],[12672,1,"ᅇ"],[12673,1,"ᅌ"],[12674,1,"ᇱ"],[12675,1,"ᇲ"],[12676,1,"ᅗ"],[12677,1,"ᅘ"],[12678,1,"ᅙ"],[12679,1,"ᆄ"],[12680,1,"ᆅ"],[12681,1,"ᆈ"],[12682,1,"ᆑ"],[12683,1,"ᆒ"],[12684,1,"ᆔ"],[12685,1,"ᆞ"],[12686,1,"ᆡ"],[12687,3],[[12688,12689],2],[12690,1,"一"],[12691,1,"二"],[12692,1,"三"],[12693,1,"四"],[12694,1,"上"],[12695,1,"中"],[12696,1,"下"],[12697,1,"甲"],[12698,1,"乙"],[12699,1,"丙"],[12700,1,"丁"],[12701,1,"天"],[12702,1,"地"],[12703,1,"人"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"(ᄀ)"],[12801,1,"(ᄂ)"],[12802,1,"(ᄃ)"],[12803,1,"(ᄅ)"],[12804,1,"(ᄆ)"],[12805,1,"(ᄇ)"],[12806,1,"(ᄉ)"],[12807,1,"(ᄋ)"],[12808,1,"(ᄌ)"],[12809,1,"(ᄎ)"],[12810,1,"(ᄏ)"],[12811,1,"(ᄐ)"],[12812,1,"(ᄑ)"],[12813,1,"(ᄒ)"],[12814,1,"(가)"],[12815,1,"(나)"],[12816,1,"(다)"],[12817,1,"(라)"],[12818,1,"(마)"],[12819,1,"(바)"],[12820,1,"(사)"],[12821,1,"(아)"],[12822,1,"(자)"],[12823,1,"(차)"],[12824,1,"(카)"],[12825,1,"(타)"],[12826,1,"(파)"],[12827,1,"(하)"],[12828,1,"(주)"],[12829,1,"(오전)"],[12830,1,"(오후)"],[12831,3],[12832,1,"(一)"],[12833,1,"(二)"],[12834,1,"(三)"],[12835,1,"(四)"],[12836,1,"(五)"],[12837,1,"(六)"],[12838,1,"(七)"],[12839,1,"(八)"],[12840,1,"(九)"],[12841,1,"(十)"],[12842,1,"(月)"],[12843,1,"(火)"],[12844,1,"(水)"],[12845,1,"(木)"],[12846,1,"(金)"],[12847,1,"(土)"],[12848,1,"(日)"],[12849,1,"(株)"],[12850,1,"(有)"],[12851,1,"(社)"],[12852,1,"(名)"],[12853,1,"(特)"],[12854,1,"(財)"],[12855,1,"(祝)"],[12856,1,"(労)"],[12857,1,"(代)"],[12858,1,"(呼)"],[12859,1,"(学)"],[12860,1,"(監)"],[12861,1,"(企)"],[12862,1,"(資)"],[12863,1,"(協)"],[12864,1,"(祭)"],[12865,1,"(休)"],[12866,1,"(自)"],[12867,1,"(至)"],[12868,1,"問"],[12869,1,"幼"],[12870,1,"文"],[12871,1,"箏"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"ᄀ"],[12897,1,"ᄂ"],[12898,1,"ᄃ"],[12899,1,"ᄅ"],[12900,1,"ᄆ"],[12901,1,"ᄇ"],[12902,1,"ᄉ"],[12903,1,"ᄋ"],[12904,1,"ᄌ"],[12905,1,"ᄎ"],[12906,1,"ᄏ"],[12907,1,"ᄐ"],[12908,1,"ᄑ"],[12909,1,"ᄒ"],[12910,1,"가"],[12911,1,"나"],[12912,1,"다"],[12913,1,"라"],[12914,1,"마"],[12915,1,"바"],[12916,1,"사"],[12917,1,"아"],[12918,1,"자"],[12919,1,"차"],[12920,1,"카"],[12921,1,"타"],[12922,1,"파"],[12923,1,"하"],[12924,1,"참고"],[12925,1,"주의"],[12926,1,"우"],[12927,2],[12928,1,"一"],[12929,1,"二"],[12930,1,"三"],[12931,1,"四"],[12932,1,"五"],[12933,1,"六"],[12934,1,"七"],[12935,1,"八"],[12936,1,"九"],[12937,1,"十"],[12938,1,"月"],[12939,1,"火"],[12940,1,"水"],[12941,1,"木"],[12942,1,"金"],[12943,1,"土"],[12944,1,"日"],[12945,1,"株"],[12946,1,"有"],[12947,1,"社"],[12948,1,"名"],[12949,1,"特"],[12950,1,"財"],[12951,1,"祝"],[12952,1,"労"],[12953,1,"秘"],[12954,1,"男"],[12955,1,"女"],[12956,1,"適"],[12957,1,"優"],[12958,1,"印"],[12959,1,"注"],[12960,1,"項"],[12961,1,"休"],[12962,1,"写"],[12963,1,"正"],[12964,1,"上"],[12965,1,"中"],[12966,1,"下"],[12967,1,"左"],[12968,1,"右"],[12969,1,"医"],[12970,1,"宗"],[12971,1,"学"],[12972,1,"監"],[12973,1,"企"],[12974,1,"資"],[12975,1,"協"],[12976,1,"夜"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1月"],[12993,1,"2月"],[12994,1,"3月"],[12995,1,"4月"],[12996,1,"5月"],[12997,1,"6月"],[12998,1,"7月"],[12999,1,"8月"],[13000,1,"9月"],[13001,1,"10月"],[13002,1,"11月"],[13003,1,"12月"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"ア"],[13009,1,"イ"],[13010,1,"ウ"],[13011,1,"エ"],[13012,1,"オ"],[13013,1,"カ"],[13014,1,"キ"],[13015,1,"ク"],[13016,1,"ケ"],[13017,1,"コ"],[13018,1,"サ"],[13019,1,"シ"],[13020,1,"ス"],[13021,1,"セ"],[13022,1,"ソ"],[13023,1,"タ"],[13024,1,"チ"],[13025,1,"ツ"],[13026,1,"テ"],[13027,1,"ト"],[13028,1,"ナ"],[13029,1,"ニ"],[13030,1,"ヌ"],[13031,1,"ネ"],[13032,1,"ノ"],[13033,1,"ハ"],[13034,1,"ヒ"],[13035,1,"フ"],[13036,1,"ヘ"],[13037,1,"ホ"],[13038,1,"マ"],[13039,1,"ミ"],[13040,1,"ム"],[13041,1,"メ"],[13042,1,"モ"],[13043,1,"ヤ"],[13044,1,"ユ"],[13045,1,"ヨ"],[13046,1,"ラ"],[13047,1,"リ"],[13048,1,"ル"],[13049,1,"レ"],[13050,1,"ロ"],[13051,1,"ワ"],[13052,1,"ヰ"],[13053,1,"ヱ"],[13054,1,"ヲ"],[13055,1,"令和"],[13056,1,"アパート"],[13057,1,"アルファ"],[13058,1,"アンペア"],[13059,1,"アール"],[13060,1,"イニング"],[13061,1,"インチ"],[13062,1,"ウォン"],[13063,1,"エスクード"],[13064,1,"エーカー"],[13065,1,"オンス"],[13066,1,"オーム"],[13067,1,"カイリ"],[13068,1,"カラット"],[13069,1,"カロリー"],[13070,1,"ガロン"],[13071,1,"ガンマ"],[13072,1,"ギガ"],[13073,1,"ギニー"],[13074,1,"キュリー"],[13075,1,"ギルダー"],[13076,1,"キロ"],[13077,1,"キログラム"],[13078,1,"キロメートル"],[13079,1,"キロワット"],[13080,1,"グラム"],[13081,1,"グラムトン"],[13082,1,"クルゼイロ"],[13083,1,"クローネ"],[13084,1,"ケース"],[13085,1,"コルナ"],[13086,1,"コーポ"],[13087,1,"サイクル"],[13088,1,"サンチーム"],[13089,1,"シリング"],[13090,1,"センチ"],[13091,1,"セント"],[13092,1,"ダース"],[13093,1,"デシ"],[13094,1,"ドル"],[13095,1,"トン"],[13096,1,"ナノ"],[13097,1,"ノット"],[13098,1,"ハイツ"],[13099,1,"パーセント"],[13100,1,"パーツ"],[13101,1,"バーレル"],[13102,1,"ピアストル"],[13103,1,"ピクル"],[13104,1,"ピコ"],[13105,1,"ビル"],[13106,1,"ファラッド"],[13107,1,"フィート"],[13108,1,"ブッシェル"],[13109,1,"フラン"],[13110,1,"ヘクタール"],[13111,1,"ペソ"],[13112,1,"ペニヒ"],[13113,1,"ヘルツ"],[13114,1,"ペンス"],[13115,1,"ページ"],[13116,1,"ベータ"],[13117,1,"ポイント"],[13118,1,"ボルト"],[13119,1,"ホン"],[13120,1,"ポンド"],[13121,1,"ホール"],[13122,1,"ホーン"],[13123,1,"マイクロ"],[13124,1,"マイル"],[13125,1,"マッハ"],[13126,1,"マルク"],[13127,1,"マンション"],[13128,1,"ミクロン"],[13129,1,"ミリ"],[13130,1,"ミリバール"],[13131,1,"メガ"],[13132,1,"メガトン"],[13133,1,"メートル"],[13134,1,"ヤード"],[13135,1,"ヤール"],[13136,1,"ユアン"],[13137,1,"リットル"],[13138,1,"リラ"],[13139,1,"ルピー"],[13140,1,"ルーブル"],[13141,1,"レム"],[13142,1,"レントゲン"],[13143,1,"ワット"],[13144,1,"0点"],[13145,1,"1点"],[13146,1,"2点"],[13147,1,"3点"],[13148,1,"4点"],[13149,1,"5点"],[13150,1,"6点"],[13151,1,"7点"],[13152,1,"8点"],[13153,1,"9点"],[13154,1,"10点"],[13155,1,"11点"],[13156,1,"12点"],[13157,1,"13点"],[13158,1,"14点"],[13159,1,"15点"],[13160,1,"16点"],[13161,1,"17点"],[13162,1,"18点"],[13163,1,"19点"],[13164,1,"20点"],[13165,1,"21点"],[13166,1,"22点"],[13167,1,"23点"],[13168,1,"24点"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"平成"],[13180,1,"昭和"],[13181,1,"大正"],[13182,1,"明治"],[13183,1,"株式会社"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"μa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"μf"],[13197,1,"μg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"μl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"μm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m∕s"],[13224,1,"m∕s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad∕s"],[13231,1,"rad∕s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"μs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"μv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"μw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"kω"],[13249,1,"mω"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c∕kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v∕m"],[13279,1,"a∕m"],[13280,1,"1日"],[13281,1,"2日"],[13282,1,"3日"],[13283,1,"4日"],[13284,1,"5日"],[13285,1,"6日"],[13286,1,"7日"],[13287,1,"8日"],[13288,1,"9日"],[13289,1,"10日"],[13290,1,"11日"],[13291,1,"12日"],[13292,1,"13日"],[13293,1,"14日"],[13294,1,"15日"],[13295,1,"16日"],[13296,1,"17日"],[13297,1,"18日"],[13298,1,"19日"],[13299,1,"20日"],[13300,1,"21日"],[13301,1,"22日"],[13302,1,"23日"],[13303,1,"24日"],[13304,1,"25日"],[13305,1,"26日"],[13306,1,"27日"],[13307,1,"28日"],[13308,1,"29日"],[13309,1,"30日"],[13310,1,"31日"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"ꙁ"],[42561,2],[42562,1,"ꙃ"],[42563,2],[42564,1,"ꙅ"],[42565,2],[42566,1,"ꙇ"],[42567,2],[42568,1,"ꙉ"],[42569,2],[42570,1,"ꙋ"],[42571,2],[42572,1,"ꙍ"],[42573,2],[42574,1,"ꙏ"],[42575,2],[42576,1,"ꙑ"],[42577,2],[42578,1,"ꙓ"],[42579,2],[42580,1,"ꙕ"],[42581,2],[42582,1,"ꙗ"],[42583,2],[42584,1,"ꙙ"],[42585,2],[42586,1,"ꙛ"],[42587,2],[42588,1,"ꙝ"],[42589,2],[42590,1,"ꙟ"],[42591,2],[42592,1,"ꙡ"],[42593,2],[42594,1,"ꙣ"],[42595,2],[42596,1,"ꙥ"],[42597,2],[42598,1,"ꙧ"],[42599,2],[42600,1,"ꙩ"],[42601,2],[42602,1,"ꙫ"],[42603,2],[42604,1,"ꙭ"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"ꚁ"],[42625,2],[42626,1,"ꚃ"],[42627,2],[42628,1,"ꚅ"],[42629,2],[42630,1,"ꚇ"],[42631,2],[42632,1,"ꚉ"],[42633,2],[42634,1,"ꚋ"],[42635,2],[42636,1,"ꚍ"],[42637,2],[42638,1,"ꚏ"],[42639,2],[42640,1,"ꚑ"],[42641,2],[42642,1,"ꚓ"],[42643,2],[42644,1,"ꚕ"],[42645,2],[42646,1,"ꚗ"],[42647,2],[42648,1,"ꚙ"],[42649,2],[42650,1,"ꚛ"],[42651,2],[42652,1,"ъ"],[42653,1,"ь"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"ꜣ"],[42787,2],[42788,1,"ꜥ"],[42789,2],[42790,1,"ꜧ"],[42791,2],[42792,1,"ꜩ"],[42793,2],[42794,1,"ꜫ"],[42795,2],[42796,1,"ꜭ"],[42797,2],[42798,1,"ꜯ"],[[42799,42801],2],[42802,1,"ꜳ"],[42803,2],[42804,1,"ꜵ"],[42805,2],[42806,1,"ꜷ"],[42807,2],[42808,1,"ꜹ"],[42809,2],[42810,1,"ꜻ"],[42811,2],[42812,1,"ꜽ"],[42813,2],[42814,1,"ꜿ"],[42815,2],[42816,1,"ꝁ"],[42817,2],[42818,1,"ꝃ"],[42819,2],[42820,1,"ꝅ"],[42821,2],[42822,1,"ꝇ"],[42823,2],[42824,1,"ꝉ"],[42825,2],[42826,1,"ꝋ"],[42827,2],[42828,1,"ꝍ"],[42829,2],[42830,1,"ꝏ"],[42831,2],[42832,1,"ꝑ"],[42833,2],[42834,1,"ꝓ"],[42835,2],[42836,1,"ꝕ"],[42837,2],[42838,1,"ꝗ"],[42839,2],[42840,1,"ꝙ"],[42841,2],[42842,1,"ꝛ"],[42843,2],[42844,1,"ꝝ"],[42845,2],[42846,1,"ꝟ"],[42847,2],[42848,1,"ꝡ"],[42849,2],[42850,1,"ꝣ"],[42851,2],[42852,1,"ꝥ"],[42853,2],[42854,1,"ꝧ"],[42855,2],[42856,1,"ꝩ"],[42857,2],[42858,1,"ꝫ"],[42859,2],[42860,1,"ꝭ"],[42861,2],[42862,1,"ꝯ"],[42863,2],[42864,1,"ꝯ"],[[42865,42872],2],[42873,1,"ꝺ"],[42874,2],[42875,1,"ꝼ"],[42876,2],[42877,1,"ᵹ"],[42878,1,"ꝿ"],[42879,2],[42880,1,"ꞁ"],[42881,2],[42882,1,"ꞃ"],[42883,2],[42884,1,"ꞅ"],[42885,2],[42886,1,"ꞇ"],[[42887,42888],2],[[42889,42890],2],[42891,1,"ꞌ"],[42892,2],[42893,1,"ɥ"],[42894,2],[42895,2],[42896,1,"ꞑ"],[42897,2],[42898,1,"ꞓ"],[42899,2],[[42900,42901],2],[42902,1,"ꞗ"],[42903,2],[42904,1,"ꞙ"],[42905,2],[42906,1,"ꞛ"],[42907,2],[42908,1,"ꞝ"],[42909,2],[42910,1,"ꞟ"],[42911,2],[42912,1,"ꞡ"],[42913,2],[42914,1,"ꞣ"],[42915,2],[42916,1,"ꞥ"],[42917,2],[42918,1,"ꞧ"],[42919,2],[42920,1,"ꞩ"],[42921,2],[42922,1,"ɦ"],[42923,1,"ɜ"],[42924,1,"ɡ"],[42925,1,"ɬ"],[42926,1,"ɪ"],[42927,2],[42928,1,"ʞ"],[42929,1,"ʇ"],[42930,1,"ʝ"],[42931,1,"ꭓ"],[42932,1,"ꞵ"],[42933,2],[42934,1,"ꞷ"],[42935,2],[42936,1,"ꞹ"],[42937,2],[42938,1,"ꞻ"],[42939,2],[42940,1,"ꞽ"],[42941,2],[42942,1,"ꞿ"],[42943,2],[42944,1,"ꟁ"],[42945,2],[42946,1,"ꟃ"],[42947,2],[42948,1,"ꞔ"],[42949,1,"ʂ"],[42950,1,"ᶎ"],[42951,1,"ꟈ"],[42952,2],[42953,1,"ꟊ"],[42954,2],[42955,1,"ɤ"],[42956,1,"ꟍ"],[42957,2],[[42958,42959],3],[42960,1,"ꟑ"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"ꟗ"],[42967,2],[42968,1,"ꟙ"],[42969,2],[42970,1,"ꟛ"],[42971,2],[42972,1,"ƛ"],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"ꟶ"],[42998,2],[42999,2],[43000,1,"ħ"],[43001,1,"œ"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"ꜧ"],[43869,1,"ꬷ"],[43870,1,"ɫ"],[43871,1,"ꭒ"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"ʍ"],[[43882,43883],2],[[43884,43887],3],[43888,1,"Ꭰ"],[43889,1,"Ꭱ"],[43890,1,"Ꭲ"],[43891,1,"Ꭳ"],[43892,1,"Ꭴ"],[43893,1,"Ꭵ"],[43894,1,"Ꭶ"],[43895,1,"Ꭷ"],[43896,1,"Ꭸ"],[43897,1,"Ꭹ"],[43898,1,"Ꭺ"],[43899,1,"Ꭻ"],[43900,1,"Ꭼ"],[43901,1,"Ꭽ"],[43902,1,"Ꭾ"],[43903,1,"Ꭿ"],[43904,1,"Ꮀ"],[43905,1,"Ꮁ"],[43906,1,"Ꮂ"],[43907,1,"Ꮃ"],[43908,1,"Ꮄ"],[43909,1,"Ꮅ"],[43910,1,"Ꮆ"],[43911,1,"Ꮇ"],[43912,1,"Ꮈ"],[43913,1,"Ꮉ"],[43914,1,"Ꮊ"],[43915,1,"Ꮋ"],[43916,1,"Ꮌ"],[43917,1,"Ꮍ"],[43918,1,"Ꮎ"],[43919,1,"Ꮏ"],[43920,1,"Ꮐ"],[43921,1,"Ꮑ"],[43922,1,"Ꮒ"],[43923,1,"Ꮓ"],[43924,1,"Ꮔ"],[43925,1,"Ꮕ"],[43926,1,"Ꮖ"],[43927,1,"Ꮗ"],[43928,1,"Ꮘ"],[43929,1,"Ꮙ"],[43930,1,"Ꮚ"],[43931,1,"Ꮛ"],[43932,1,"Ꮜ"],[43933,1,"Ꮝ"],[43934,1,"Ꮞ"],[43935,1,"Ꮟ"],[43936,1,"Ꮠ"],[43937,1,"Ꮡ"],[43938,1,"Ꮢ"],[43939,1,"Ꮣ"],[43940,1,"Ꮤ"],[43941,1,"Ꮥ"],[43942,1,"Ꮦ"],[43943,1,"Ꮧ"],[43944,1,"Ꮨ"],[43945,1,"Ꮩ"],[43946,1,"Ꮪ"],[43947,1,"Ꮫ"],[43948,1,"Ꮬ"],[43949,1,"Ꮭ"],[43950,1,"Ꮮ"],[43951,1,"Ꮯ"],[43952,1,"Ꮰ"],[43953,1,"Ꮱ"],[43954,1,"Ꮲ"],[43955,1,"Ꮳ"],[43956,1,"Ꮴ"],[43957,1,"Ꮵ"],[43958,1,"Ꮶ"],[43959,1,"Ꮷ"],[43960,1,"Ꮸ"],[43961,1,"Ꮹ"],[43962,1,"Ꮺ"],[43963,1,"Ꮻ"],[43964,1,"Ꮼ"],[43965,1,"Ꮽ"],[43966,1,"Ꮾ"],[43967,1,"Ꮿ"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"豈"],[63745,1,"更"],[63746,1,"車"],[63747,1,"賈"],[63748,1,"滑"],[63749,1,"串"],[63750,1,"句"],[[63751,63752],1,"龜"],[63753,1,"契"],[63754,1,"金"],[63755,1,"喇"],[63756,1,"奈"],[63757,1,"懶"],[63758,1,"癩"],[63759,1,"羅"],[63760,1,"蘿"],[63761,1,"螺"],[63762,1,"裸"],[63763,1,"邏"],[63764,1,"樂"],[63765,1,"洛"],[63766,1,"烙"],[63767,1,"珞"],[63768,1,"落"],[63769,1,"酪"],[63770,1,"駱"],[63771,1,"亂"],[63772,1,"卵"],[63773,1,"欄"],[63774,1,"爛"],[63775,1,"蘭"],[63776,1,"鸞"],[63777,1,"嵐"],[63778,1,"濫"],[63779,1,"藍"],[63780,1,"襤"],[63781,1,"拉"],[63782,1,"臘"],[63783,1,"蠟"],[63784,1,"廊"],[63785,1,"朗"],[63786,1,"浪"],[63787,1,"狼"],[63788,1,"郎"],[63789,1,"來"],[63790,1,"冷"],[63791,1,"勞"],[63792,1,"擄"],[63793,1,"櫓"],[63794,1,"爐"],[63795,1,"盧"],[63796,1,"老"],[63797,1,"蘆"],[63798,1,"虜"],[63799,1,"路"],[63800,1,"露"],[63801,1,"魯"],[63802,1,"鷺"],[63803,1,"碌"],[63804,1,"祿"],[63805,1,"綠"],[63806,1,"菉"],[63807,1,"錄"],[63808,1,"鹿"],[63809,1,"論"],[63810,1,"壟"],[63811,1,"弄"],[63812,1,"籠"],[63813,1,"聾"],[63814,1,"牢"],[63815,1,"磊"],[63816,1,"賂"],[63817,1,"雷"],[63818,1,"壘"],[63819,1,"屢"],[63820,1,"樓"],[63821,1,"淚"],[63822,1,"漏"],[63823,1,"累"],[63824,1,"縷"],[63825,1,"陋"],[63826,1,"勒"],[63827,1,"肋"],[63828,1,"凜"],[63829,1,"凌"],[63830,1,"稜"],[63831,1,"綾"],[63832,1,"菱"],[63833,1,"陵"],[63834,1,"讀"],[63835,1,"拏"],[63836,1,"樂"],[63837,1,"諾"],[63838,1,"丹"],[63839,1,"寧"],[63840,1,"怒"],[63841,1,"率"],[63842,1,"異"],[63843,1,"北"],[63844,1,"磻"],[63845,1,"便"],[63846,1,"復"],[63847,1,"不"],[63848,1,"泌"],[63849,1,"數"],[63850,1,"索"],[63851,1,"參"],[63852,1,"塞"],[63853,1,"省"],[63854,1,"葉"],[63855,1,"說"],[63856,1,"殺"],[63857,1,"辰"],[63858,1,"沈"],[63859,1,"拾"],[63860,1,"若"],[63861,1,"掠"],[63862,1,"略"],[63863,1,"亮"],[63864,1,"兩"],[63865,1,"凉"],[63866,1,"梁"],[63867,1,"糧"],[63868,1,"良"],[63869,1,"諒"],[63870,1,"量"],[63871,1,"勵"],[63872,1,"呂"],[63873,1,"女"],[63874,1,"廬"],[63875,1,"旅"],[63876,1,"濾"],[63877,1,"礪"],[63878,1,"閭"],[63879,1,"驪"],[63880,1,"麗"],[63881,1,"黎"],[63882,1,"力"],[63883,1,"曆"],[63884,1,"歷"],[63885,1,"轢"],[63886,1,"年"],[63887,1,"憐"],[63888,1,"戀"],[63889,1,"撚"],[63890,1,"漣"],[63891,1,"煉"],[63892,1,"璉"],[63893,1,"秊"],[63894,1,"練"],[63895,1,"聯"],[63896,1,"輦"],[63897,1,"蓮"],[63898,1,"連"],[63899,1,"鍊"],[63900,1,"列"],[63901,1,"劣"],[63902,1,"咽"],[63903,1,"烈"],[63904,1,"裂"],[63905,1,"說"],[63906,1,"廉"],[63907,1,"念"],[63908,1,"捻"],[63909,1,"殮"],[63910,1,"簾"],[63911,1,"獵"],[63912,1,"令"],[63913,1,"囹"],[63914,1,"寧"],[63915,1,"嶺"],[63916,1,"怜"],[63917,1,"玲"],[63918,1,"瑩"],[63919,1,"羚"],[63920,1,"聆"],[63921,1,"鈴"],[63922,1,"零"],[63923,1,"靈"],[63924,1,"領"],[63925,1,"例"],[63926,1,"禮"],[63927,1,"醴"],[63928,1,"隸"],[63929,1,"惡"],[63930,1,"了"],[63931,1,"僚"],[63932,1,"寮"],[63933,1,"尿"],[63934,1,"料"],[63935,1,"樂"],[63936,1,"燎"],[63937,1,"療"],[63938,1,"蓼"],[63939,1,"遼"],[63940,1,"龍"],[63941,1,"暈"],[63942,1,"阮"],[63943,1,"劉"],[63944,1,"杻"],[63945,1,"柳"],[63946,1,"流"],[63947,1,"溜"],[63948,1,"琉"],[63949,1,"留"],[63950,1,"硫"],[63951,1,"紐"],[63952,1,"類"],[63953,1,"六"],[63954,1,"戮"],[63955,1,"陸"],[63956,1,"倫"],[63957,1,"崙"],[63958,1,"淪"],[63959,1,"輪"],[63960,1,"律"],[63961,1,"慄"],[63962,1,"栗"],[63963,1,"率"],[63964,1,"隆"],[63965,1,"利"],[63966,1,"吏"],[63967,1,"履"],[63968,1,"易"],[63969,1,"李"],[63970,1,"梨"],[63971,1,"泥"],[63972,1,"理"],[63973,1,"痢"],[63974,1,"罹"],[63975,1,"裏"],[63976,1,"裡"],[63977,1,"里"],[63978,1,"離"],[63979,1,"匿"],[63980,1,"溺"],[63981,1,"吝"],[63982,1,"燐"],[63983,1,"璘"],[63984,1,"藺"],[63985,1,"隣"],[63986,1,"鱗"],[63987,1,"麟"],[63988,1,"林"],[63989,1,"淋"],[63990,1,"臨"],[63991,1,"立"],[63992,1,"笠"],[63993,1,"粒"],[63994,1,"狀"],[63995,1,"炙"],[63996,1,"識"],[63997,1,"什"],[63998,1,"茶"],[63999,1,"刺"],[64000,1,"切"],[64001,1,"度"],[64002,1,"拓"],[64003,1,"糖"],[64004,1,"宅"],[64005,1,"洞"],[64006,1,"暴"],[64007,1,"輻"],[64008,1,"行"],[64009,1,"降"],[64010,1,"見"],[64011,1,"廓"],[64012,1,"兀"],[64013,1,"嗀"],[[64014,64015],2],[64016,1,"塚"],[64017,2],[64018,1,"晴"],[[64019,64020],2],[64021,1,"凞"],[64022,1,"猪"],[64023,1,"益"],[64024,1,"礼"],[64025,1,"神"],[64026,1,"祥"],[64027,1,"福"],[64028,1,"靖"],[64029,1,"精"],[64030,1,"羽"],[64031,2],[64032,1,"蘒"],[64033,2],[64034,1,"諸"],[[64035,64036],2],[64037,1,"逸"],[64038,1,"都"],[[64039,64041],2],[64042,1,"飯"],[64043,1,"飼"],[64044,1,"館"],[64045,1,"鶴"],[64046,1,"郞"],[64047,1,"隷"],[64048,1,"侮"],[64049,1,"僧"],[64050,1,"免"],[64051,1,"勉"],[64052,1,"勤"],[64053,1,"卑"],[64054,1,"喝"],[64055,1,"嘆"],[64056,1,"器"],[64057,1,"塀"],[64058,1,"墨"],[64059,1,"層"],[64060,1,"屮"],[64061,1,"悔"],[64062,1,"慨"],[64063,1,"憎"],[64064,1,"懲"],[64065,1,"敏"],[64066,1,"既"],[64067,1,"暑"],[64068,1,"梅"],[64069,1,"海"],[64070,1,"渚"],[64071,1,"漢"],[64072,1,"煮"],[64073,1,"爫"],[64074,1,"琢"],[64075,1,"碑"],[64076,1,"社"],[64077,1,"祉"],[64078,1,"祈"],[64079,1,"祐"],[64080,1,"祖"],[64081,1,"祝"],[64082,1,"禍"],[64083,1,"禎"],[64084,1,"穀"],[64085,1,"突"],[64086,1,"節"],[64087,1,"練"],[64088,1,"縉"],[64089,1,"繁"],[64090,1,"署"],[64091,1,"者"],[64092,1,"臭"],[[64093,64094],1,"艹"],[64095,1,"著"],[64096,1,"褐"],[64097,1,"視"],[64098,1,"謁"],[64099,1,"謹"],[64100,1,"賓"],[64101,1,"贈"],[64102,1,"辶"],[64103,1,"逸"],[64104,1,"難"],[64105,1,"響"],[64106,1,"頻"],[64107,1,"恵"],[64108,1,"\uD850\uDEEE"],[64109,1,"舘"],[[64110,64111],3],[64112,1,"並"],[64113,1,"况"],[64114,1,"全"],[64115,1,"侀"],[64116,1,"充"],[64117,1,"冀"],[64118,1,"勇"],[64119,1,"勺"],[64120,1,"喝"],[64121,1,"啕"],[64122,1,"喙"],[64123,1,"嗢"],[64124,1,"塚"],[64125,1,"墳"],[64126,1,"奄"],[64127,1,"奔"],[64128,1,"婢"],[64129,1,"嬨"],[64130,1,"廒"],[64131,1,"廙"],[64132,1,"彩"],[64133,1,"徭"],[64134,1,"惘"],[64135,1,"慎"],[64136,1,"愈"],[64137,1,"憎"],[64138,1,"慠"],[64139,1,"懲"],[64140,1,"戴"],[64141,1,"揄"],[64142,1,"搜"],[64143,1,"摒"],[64144,1,"敖"],[64145,1,"晴"],[64146,1,"朗"],[64147,1,"望"],[64148,1,"杖"],[64149,1,"歹"],[64150,1,"殺"],[64151,1,"流"],[64152,1,"滛"],[64153,1,"滋"],[64154,1,"漢"],[64155,1,"瀞"],[64156,1,"煮"],[64157,1,"瞧"],[64158,1,"爵"],[64159,1,"犯"],[64160,1,"猪"],[64161,1,"瑱"],[64162,1,"甆"],[64163,1,"画"],[64164,1,"瘝"],[64165,1,"瘟"],[64166,1,"益"],[64167,1,"盛"],[64168,1,"直"],[64169,1,"睊"],[64170,1,"着"],[64171,1,"磌"],[64172,1,"窱"],[64173,1,"節"],[64174,1,"类"],[64175,1,"絛"],[64176,1,"練"],[64177,1,"缾"],[64178,1,"者"],[64179,1,"荒"],[64180,1,"華"],[64181,1,"蝹"],[64182,1,"襁"],[64183,1,"覆"],[64184,1,"視"],[64185,1,"調"],[64186,1,"諸"],[64187,1,"請"],[64188,1,"謁"],[64189,1,"諾"],[64190,1,"諭"],[64191,1,"謹"],[64192,1,"變"],[64193,1,"贈"],[64194,1,"輸"],[64195,1,"遲"],[64196,1,"醙"],[64197,1,"鉶"],[64198,1,"陼"],[64199,1,"難"],[64200,1,"靖"],[64201,1,"韛"],[64202,1,"響"],[64203,1,"頋"],[64204,1,"頻"],[64205,1,"鬒"],[64206,1,"龜"],[64207,1,"\uD84A\uDC4A"],[64208,1,"\uD84A\uDC44"],[64209,1,"\uD84C\uDFD5"],[64210,1,"㮝"],[64211,1,"䀘"],[64212,1,"䀹"],[64213,1,"\uD854\uDE49"],[64214,1,"\uD857\uDCD0"],[64215,1,"\uD85F\uDED3"],[64216,1,"齃"],[64217,1,"龎"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"մն"],[64276,1,"մե"],[64277,1,"մի"],[64278,1,"վն"],[64279,1,"մխ"],[[64280,64284],3],[64285,1,"יִ"],[64286,2],[64287,1,"ײַ"],[64288,1,"ע"],[64289,1,"א"],[64290,1,"ד"],[64291,1,"ה"],[64292,1,"כ"],[64293,1,"ל"],[64294,1,"ם"],[64295,1,"ר"],[64296,1,"ת"],[64297,1,"+"],[64298,1,"שׁ"],[64299,1,"שׂ"],[64300,1,"שּׁ"],[64301,1,"שּׂ"],[64302,1,"אַ"],[64303,1,"אָ"],[64304,1,"אּ"],[64305,1,"בּ"],[64306,1,"גּ"],[64307,1,"דּ"],[64308,1,"הּ"],[64309,1,"וּ"],[64310,1,"זּ"],[64311,3],[64312,1,"טּ"],[64313,1,"יּ"],[64314,1,"ךּ"],[64315,1,"כּ"],[64316,1,"לּ"],[64317,3],[64318,1,"מּ"],[64319,3],[64320,1,"נּ"],[64321,1,"סּ"],[64322,3],[64323,1,"ףּ"],[64324,1,"פּ"],[64325,3],[64326,1,"צּ"],[64327,1,"קּ"],[64328,1,"רּ"],[64329,1,"שּ"],[64330,1,"תּ"],[64331,1,"וֹ"],[64332,1,"בֿ"],[64333,1,"כֿ"],[64334,1,"פֿ"],[64335,1,"אל"],[[64336,64337],1,"ٱ"],[[64338,64341],1,"ٻ"],[[64342,64345],1,"پ"],[[64346,64349],1,"ڀ"],[[64350,64353],1,"ٺ"],[[64354,64357],1,"ٿ"],[[64358,64361],1,"ٹ"],[[64362,64365],1,"ڤ"],[[64366,64369],1,"ڦ"],[[64370,64373],1,"ڄ"],[[64374,64377],1,"ڃ"],[[64378,64381],1,"چ"],[[64382,64385],1,"ڇ"],[[64386,64387],1,"ڍ"],[[64388,64389],1,"ڌ"],[[64390,64391],1,"ڎ"],[[64392,64393],1,"ڈ"],[[64394,64395],1,"ژ"],[[64396,64397],1,"ڑ"],[[64398,64401],1,"ک"],[[64402,64405],1,"گ"],[[64406,64409],1,"ڳ"],[[64410,64413],1,"ڱ"],[[64414,64415],1,"ں"],[[64416,64419],1,"ڻ"],[[64420,64421],1,"ۀ"],[[64422,64425],1,"ہ"],[[64426,64429],1,"ھ"],[[64430,64431],1,"ے"],[[64432,64433],1,"ۓ"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"ڭ"],[[64471,64472],1,"ۇ"],[[64473,64474],1,"ۆ"],[[64475,64476],1,"ۈ"],[64477,1,"ۇٴ"],[[64478,64479],1,"ۋ"],[[64480,64481],1,"ۅ"],[[64482,64483],1,"ۉ"],[[64484,64487],1,"ې"],[[64488,64489],1,"ى"],[[64490,64491],1,"ئا"],[[64492,64493],1,"ئە"],[[64494,64495],1,"ئو"],[[64496,64497],1,"ئۇ"],[[64498,64499],1,"ئۆ"],[[64500,64501],1,"ئۈ"],[[64502,64504],1,"ئې"],[[64505,64507],1,"ئى"],[[64508,64511],1,"ی"],[64512,1,"ئج"],[64513,1,"ئح"],[64514,1,"ئم"],[64515,1,"ئى"],[64516,1,"ئي"],[64517,1,"بج"],[64518,1,"بح"],[64519,1,"بخ"],[64520,1,"بم"],[64521,1,"بى"],[64522,1,"بي"],[64523,1,"تج"],[64524,1,"تح"],[64525,1,"تخ"],[64526,1,"تم"],[64527,1,"تى"],[64528,1,"تي"],[64529,1,"ثج"],[64530,1,"ثم"],[64531,1,"ثى"],[64532,1,"ثي"],[64533,1,"جح"],[64534,1,"جم"],[64535,1,"حج"],[64536,1,"حم"],[64537,1,"خج"],[64538,1,"خح"],[64539,1,"خم"],[64540,1,"سج"],[64541,1,"سح"],[64542,1,"سخ"],[64543,1,"سم"],[64544,1,"صح"],[64545,1,"صم"],[64546,1,"ضج"],[64547,1,"ضح"],[64548,1,"ضخ"],[64549,1,"ضم"],[64550,1,"طح"],[64551,1,"طم"],[64552,1,"ظم"],[64553,1,"عج"],[64554,1,"عم"],[64555,1,"غج"],[64556,1,"غم"],[64557,1,"فج"],[64558,1,"فح"],[64559,1,"فخ"],[64560,1,"فم"],[64561,1,"فى"],[64562,1,"في"],[64563,1,"قح"],[64564,1,"قم"],[64565,1,"قى"],[64566,1,"قي"],[64567,1,"كا"],[64568,1,"كج"],[64569,1,"كح"],[64570,1,"كخ"],[64571,1,"كل"],[64572,1,"كم"],[64573,1,"كى"],[64574,1,"كي"],[64575,1,"لج"],[64576,1,"لح"],[64577,1,"لخ"],[64578,1,"لم"],[64579,1,"لى"],[64580,1,"لي"],[64581,1,"مج"],[64582,1,"مح"],[64583,1,"مخ"],[64584,1,"مم"],[64585,1,"مى"],[64586,1,"مي"],[64587,1,"نج"],[64588,1,"نح"],[64589,1,"نخ"],[64590,1,"نم"],[64591,1,"نى"],[64592,1,"ني"],[64593,1,"هج"],[64594,1,"هم"],[64595,1,"هى"],[64596,1,"هي"],[64597,1,"يج"],[64598,1,"يح"],[64599,1,"يخ"],[64600,1,"يم"],[64601,1,"يى"],[64602,1,"يي"],[64603,1,"ذٰ"],[64604,1,"رٰ"],[64605,1,"ىٰ"],[64606,1," ٌّ"],[64607,1," ٍّ"],[64608,1," َّ"],[64609,1," ُّ"],[64610,1," ِّ"],[64611,1," ّٰ"],[64612,1,"ئر"],[64613,1,"ئز"],[64614,1,"ئم"],[64615,1,"ئن"],[64616,1,"ئى"],[64617,1,"ئي"],[64618,1,"بر"],[64619,1,"بز"],[64620,1,"بم"],[64621,1,"بن"],[64622,1,"بى"],[64623,1,"بي"],[64624,1,"تر"],[64625,1,"تز"],[64626,1,"تم"],[64627,1,"تن"],[64628,1,"تى"],[64629,1,"تي"],[64630,1,"ثر"],[64631,1,"ثز"],[64632,1,"ثم"],[64633,1,"ثن"],[64634,1,"ثى"],[64635,1,"ثي"],[64636,1,"فى"],[64637,1,"في"],[64638,1,"قى"],[64639,1,"قي"],[64640,1,"كا"],[64641,1,"كل"],[64642,1,"كم"],[64643,1,"كى"],[64644,1,"كي"],[64645,1,"لم"],[64646,1,"لى"],[64647,1,"لي"],[64648,1,"ما"],[64649,1,"مم"],[64650,1,"نر"],[64651,1,"نز"],[64652,1,"نم"],[64653,1,"نن"],[64654,1,"نى"],[64655,1,"ني"],[64656,1,"ىٰ"],[64657,1,"ير"],[64658,1,"يز"],[64659,1,"يم"],[64660,1,"ين"],[64661,1,"يى"],[64662,1,"يي"],[64663,1,"ئج"],[64664,1,"ئح"],[64665,1,"ئخ"],[64666,1,"ئم"],[64667,1,"ئه"],[64668,1,"بج"],[64669,1,"بح"],[64670,1,"بخ"],[64671,1,"بم"],[64672,1,"به"],[64673,1,"تج"],[64674,1,"تح"],[64675,1,"تخ"],[64676,1,"تم"],[64677,1,"ته"],[64678,1,"ثم"],[64679,1,"جح"],[64680,1,"جم"],[64681,1,"حج"],[64682,1,"حم"],[64683,1,"خج"],[64684,1,"خم"],[64685,1,"سج"],[64686,1,"سح"],[64687,1,"سخ"],[64688,1,"سم"],[64689,1,"صح"],[64690,1,"صخ"],[64691,1,"صم"],[64692,1,"ضج"],[64693,1,"ضح"],[64694,1,"ضخ"],[64695,1,"ضم"],[64696,1,"طح"],[64697,1,"ظم"],[64698,1,"عج"],[64699,1,"عم"],[64700,1,"غج"],[64701,1,"غم"],[64702,1,"فج"],[64703,1,"فح"],[64704,1,"فخ"],[64705,1,"فم"],[64706,1,"قح"],[64707,1,"قم"],[64708,1,"كج"],[64709,1,"كح"],[64710,1,"كخ"],[64711,1,"كل"],[64712,1,"كم"],[64713,1,"لج"],[64714,1,"لح"],[64715,1,"لخ"],[64716,1,"لم"],[64717,1,"له"],[64718,1,"مج"],[64719,1,"مح"],[64720,1,"مخ"],[64721,1,"مم"],[64722,1,"نج"],[64723,1,"نح"],[64724,1,"نخ"],[64725,1,"نم"],[64726,1,"نه"],[64727,1,"هج"],[64728,1,"هم"],[64729,1,"هٰ"],[64730,1,"يج"],[64731,1,"يح"],[64732,1,"يخ"],[64733,1,"يم"],[64734,1,"يه"],[64735,1,"ئم"],[64736,1,"ئه"],[64737,1,"بم"],[64738,1,"به"],[64739,1,"تم"],[64740,1,"ته"],[64741,1,"ثم"],[64742,1,"ثه"],[64743,1,"سم"],[64744,1,"سه"],[64745,1,"شم"],[64746,1,"شه"],[64747,1,"كل"],[64748,1,"كم"],[64749,1,"لم"],[64750,1,"نم"],[64751,1,"نه"],[64752,1,"يم"],[64753,1,"يه"],[64754,1,"ـَّ"],[64755,1,"ـُّ"],[64756,1,"ـِّ"],[64757,1,"طى"],[64758,1,"طي"],[64759,1,"عى"],[64760,1,"عي"],[64761,1,"غى"],[64762,1,"غي"],[64763,1,"سى"],[64764,1,"سي"],[64765,1,"شى"],[64766,1,"شي"],[64767,1,"حى"],[64768,1,"حي"],[64769,1,"جى"],[64770,1,"جي"],[64771,1,"خى"],[64772,1,"خي"],[64773,1,"صى"],[64774,1,"صي"],[64775,1,"ضى"],[64776,1,"ضي"],[64777,1,"شج"],[64778,1,"شح"],[64779,1,"شخ"],[64780,1,"شم"],[64781,1,"شر"],[64782,1,"سر"],[64783,1,"صر"],[64784,1,"ضر"],[64785,1,"طى"],[64786,1,"طي"],[64787,1,"عى"],[64788,1,"عي"],[64789,1,"غى"],[64790,1,"غي"],[64791,1,"سى"],[64792,1,"سي"],[64793,1,"شى"],[64794,1,"شي"],[64795,1,"حى"],[64796,1,"حي"],[64797,1,"جى"],[64798,1,"جي"],[64799,1,"خى"],[64800,1,"خي"],[64801,1,"صى"],[64802,1,"صي"],[64803,1,"ضى"],[64804,1,"ضي"],[64805,1,"شج"],[64806,1,"شح"],[64807,1,"شخ"],[64808,1,"شم"],[64809,1,"شر"],[64810,1,"سر"],[64811,1,"صر"],[64812,1,"ضر"],[64813,1,"شج"],[64814,1,"شح"],[64815,1,"شخ"],[64816,1,"شم"],[64817,1,"سه"],[64818,1,"شه"],[64819,1,"طم"],[64820,1,"سج"],[64821,1,"سح"],[64822,1,"سخ"],[64823,1,"شج"],[64824,1,"شح"],[64825,1,"شخ"],[64826,1,"طم"],[64827,1,"ظم"],[[64828,64829],1,"اً"],[[64830,64831],2],[[64832,64847],2],[64848,1,"تجم"],[[64849,64850],1,"تحج"],[64851,1,"تحم"],[64852,1,"تخم"],[64853,1,"تمج"],[64854,1,"تمح"],[64855,1,"تمخ"],[[64856,64857],1,"جمح"],[64858,1,"حمي"],[64859,1,"حمى"],[64860,1,"سحج"],[64861,1,"سجح"],[64862,1,"سجى"],[[64863,64864],1,"سمح"],[64865,1,"سمج"],[[64866,64867],1,"سمم"],[[64868,64869],1,"صحح"],[64870,1,"صمم"],[[64871,64872],1,"شحم"],[64873,1,"شجي"],[[64874,64875],1,"شمخ"],[[64876,64877],1,"شمم"],[64878,1,"ضحى"],[[64879,64880],1,"ضخم"],[[64881,64882],1,"طمح"],[64883,1,"طمم"],[64884,1,"طمي"],[64885,1,"عجم"],[[64886,64887],1,"عمم"],[64888,1,"عمى"],[64889,1,"غمم"],[64890,1,"غمي"],[64891,1,"غمى"],[[64892,64893],1,"فخم"],[64894,1,"قمح"],[64895,1,"قمم"],[64896,1,"لحم"],[64897,1,"لحي"],[64898,1,"لحى"],[[64899,64900],1,"لجج"],[[64901,64902],1,"لخم"],[[64903,64904],1,"لمح"],[64905,1,"محج"],[64906,1,"محم"],[64907,1,"محي"],[64908,1,"مجح"],[64909,1,"مجم"],[64910,1,"مخج"],[64911,1,"مخم"],[[64912,64913],3],[64914,1,"مجخ"],[64915,1,"همج"],[64916,1,"همم"],[64917,1,"نحم"],[64918,1,"نحى"],[[64919,64920],1,"نجم"],[64921,1,"نجى"],[64922,1,"نمي"],[64923,1,"نمى"],[[64924,64925],1,"يمم"],[64926,1,"بخي"],[64927,1,"تجي"],[64928,1,"تجى"],[64929,1,"تخي"],[64930,1,"تخى"],[64931,1,"تمي"],[64932,1,"تمى"],[64933,1,"جمي"],[64934,1,"جحى"],[64935,1,"جمى"],[64936,1,"سخى"],[64937,1,"صحي"],[64938,1,"شحي"],[64939,1,"ضحي"],[64940,1,"لجي"],[64941,1,"لمي"],[64942,1,"يحي"],[64943,1,"يجي"],[64944,1,"يمي"],[64945,1,"ممي"],[64946,1,"قمي"],[64947,1,"نحي"],[64948,1,"قمح"],[64949,1,"لحم"],[64950,1,"عمي"],[64951,1,"كمي"],[64952,1,"نجح"],[64953,1,"مخي"],[64954,1,"لجم"],[64955,1,"كمم"],[64956,1,"لجم"],[64957,1,"نجح"],[64958,1,"جحي"],[64959,1,"حجي"],[64960,1,"مجي"],[64961,1,"فمي"],[64962,1,"بحي"],[64963,1,"كمم"],[64964,1,"عجم"],[64965,1,"صمم"],[64966,1,"سخي"],[64967,1,"نجي"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"صلے"],[65009,1,"قلے"],[65010,1,"الله"],[65011,1,"اكبر"],[65012,1,"محمد"],[65013,1,"صلعم"],[65014,1,"رسول"],[65015,1,"عليه"],[65016,1,"وسلم"],[65017,1,"صلى"],[65018,1,"صلى الله عليه وسلم"],[65019,1,"جل جلاله"],[65020,1,"ریال"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,"、"],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,"〖"],[65048,1,"〗"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"—"],[65074,1,"–"],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,"〔"],[65082,1,"〕"],[65083,1,"【"],[65084,1,"】"],[65085,1,"《"],[65086,1,"》"],[65087,1,"〈"],[65088,1,"〉"],[65089,1,"「"],[65090,1,"」"],[65091,1,"『"],[65092,1,"』"],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," ̅"],[[65101,65103],1,"_"],[65104,1,","],[65105,1,"、"],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,"—"],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,"〔"],[65118,1,"〕"],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," ً"],[65137,1,"ـً"],[65138,1," ٌ"],[65139,2],[65140,1," ٍ"],[65141,3],[65142,1," َ"],[65143,1,"ـَ"],[65144,1," ُ"],[65145,1,"ـُ"],[65146,1," ِ"],[65147,1,"ـِ"],[65148,1," ّ"],[65149,1,"ـّ"],[65150,1," ْ"],[65151,1,"ـْ"],[65152,1,"ء"],[[65153,65154],1,"آ"],[[65155,65156],1,"أ"],[[65157,65158],1,"ؤ"],[[65159,65160],1,"إ"],[[65161,65164],1,"ئ"],[[65165,65166],1,"ا"],[[65167,65170],1,"ب"],[[65171,65172],1,"ة"],[[65173,65176],1,"ت"],[[65177,65180],1,"ث"],[[65181,65184],1,"ج"],[[65185,65188],1,"ح"],[[65189,65192],1,"خ"],[[65193,65194],1,"د"],[[65195,65196],1,"ذ"],[[65197,65198],1,"ر"],[[65199,65200],1,"ز"],[[65201,65204],1,"س"],[[65205,65208],1,"ش"],[[65209,65212],1,"ص"],[[65213,65216],1,"ض"],[[65217,65220],1,"ط"],[[65221,65224],1,"ظ"],[[65225,65228],1,"ع"],[[65229,65232],1,"غ"],[[65233,65236],1,"ف"],[[65237,65240],1,"ق"],[[65241,65244],1,"ك"],[[65245,65248],1,"ل"],[[65249,65252],1,"م"],[[65253,65256],1,"ن"],[[65257,65260],1,"ه"],[[65261,65262],1,"و"],[[65263,65264],1,"ى"],[[65265,65268],1,"ي"],[[65269,65270],1,"لآ"],[[65271,65272],1,"لأ"],[[65273,65274],1,"لإ"],[[65275,65276],1,"لا"],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,"⦅"],[65376,1,"⦆"],[65377,1,"."],[65378,1,"「"],[65379,1,"」"],[65380,1,"、"],[65381,1,"・"],[65382,1,"ヲ"],[65383,1,"ァ"],[65384,1,"ィ"],[65385,1,"ゥ"],[65386,1,"ェ"],[65387,1,"ォ"],[65388,1,"ャ"],[65389,1,"ュ"],[65390,1,"ョ"],[65391,1,"ッ"],[65392,1,"ー"],[65393,1,"ア"],[65394,1,"イ"],[65395,1,"ウ"],[65396,1,"エ"],[65397,1,"オ"],[65398,1,"カ"],[65399,1,"キ"],[65400,1,"ク"],[65401,1,"ケ"],[65402,1,"コ"],[65403,1,"サ"],[65404,1,"シ"],[65405,1,"ス"],[65406,1,"セ"],[65407,1,"ソ"],[65408,1,"タ"],[65409,1,"チ"],[65410,1,"ツ"],[65411,1,"テ"],[65412,1,"ト"],[65413,1,"ナ"],[65414,1,"ニ"],[65415,1,"ヌ"],[65416,1,"ネ"],[65417,1,"ノ"],[65418,1,"ハ"],[65419,1,"ヒ"],[65420,1,"フ"],[65421,1,"ヘ"],[65422,1,"ホ"],[65423,1,"マ"],[65424,1,"ミ"],[65425,1,"ム"],[65426,1,"メ"],[65427,1,"モ"],[65428,1,"ヤ"],[65429,1,"ユ"],[65430,1,"ヨ"],[65431,1,"ラ"],[65432,1,"リ"],[65433,1,"ル"],[65434,1,"レ"],[65435,1,"ロ"],[65436,1,"ワ"],[65437,1,"ン"],[65438,1,"゙"],[65439,1,"゚"],[65440,7],[65441,1,"ᄀ"],[65442,1,"ᄁ"],[65443,1,"ᆪ"],[65444,1,"ᄂ"],[65445,1,"ᆬ"],[65446,1,"ᆭ"],[65447,1,"ᄃ"],[65448,1,"ᄄ"],[65449,1,"ᄅ"],[65450,1,"ᆰ"],[65451,1,"ᆱ"],[65452,1,"ᆲ"],[65453,1,"ᆳ"],[65454,1,"ᆴ"],[65455,1,"ᆵ"],[65456,1,"ᄚ"],[65457,1,"ᄆ"],[65458,1,"ᄇ"],[65459,1,"ᄈ"],[65460,1,"ᄡ"],[65461,1,"ᄉ"],[65462,1,"ᄊ"],[65463,1,"ᄋ"],[65464,1,"ᄌ"],[65465,1,"ᄍ"],[65466,1,"ᄎ"],[65467,1,"ᄏ"],[65468,1,"ᄐ"],[65469,1,"ᄑ"],[65470,1,"ᄒ"],[[65471,65473],3],[65474,1,"ᅡ"],[65475,1,"ᅢ"],[65476,1,"ᅣ"],[65477,1,"ᅤ"],[65478,1,"ᅥ"],[65479,1,"ᅦ"],[[65480,65481],3],[65482,1,"ᅧ"],[65483,1,"ᅨ"],[65484,1,"ᅩ"],[65485,1,"ᅪ"],[65486,1,"ᅫ"],[65487,1,"ᅬ"],[[65488,65489],3],[65490,1,"ᅭ"],[65491,1,"ᅮ"],[65492,1,"ᅯ"],[65493,1,"ᅰ"],[65494,1,"ᅱ"],[65495,1,"ᅲ"],[[65496,65497],3],[65498,1,"ᅳ"],[65499,1,"ᅴ"],[65500,1,"ᅵ"],[[65501,65503],3],[65504,1,"¢"],[65505,1,"£"],[65506,1,"¬"],[65507,1," ̄"],[65508,1,"¦"],[65509,1,"¥"],[65510,1,"₩"],[65511,3],[65512,1,"│"],[65513,1,"←"],[65514,1,"↑"],[65515,1,"→"],[65516,1,"↓"],[65517,1,"■"],[65518,1,"○"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66000,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\uD801\uDC28"],[66561,1,"\uD801\uDC29"],[66562,1,"\uD801\uDC2A"],[66563,1,"\uD801\uDC2B"],[66564,1,"\uD801\uDC2C"],[66565,1,"\uD801\uDC2D"],[66566,1,"\uD801\uDC2E"],[66567,1,"\uD801\uDC2F"],[66568,1,"\uD801\uDC30"],[66569,1,"\uD801\uDC31"],[66570,1,"\uD801\uDC32"],[66571,1,"\uD801\uDC33"],[66572,1,"\uD801\uDC34"],[66573,1,"\uD801\uDC35"],[66574,1,"\uD801\uDC36"],[66575,1,"\uD801\uDC37"],[66576,1,"\uD801\uDC38"],[66577,1,"\uD801\uDC39"],[66578,1,"\uD801\uDC3A"],[66579,1,"\uD801\uDC3B"],[66580,1,"\uD801\uDC3C"],[66581,1,"\uD801\uDC3D"],[66582,1,"\uD801\uDC3E"],[66583,1,"\uD801\uDC3F"],[66584,1,"\uD801\uDC40"],[66585,1,"\uD801\uDC41"],[66586,1,"\uD801\uDC42"],[66587,1,"\uD801\uDC43"],[66588,1,"\uD801\uDC44"],[66589,1,"\uD801\uDC45"],[66590,1,"\uD801\uDC46"],[66591,1,"\uD801\uDC47"],[66592,1,"\uD801\uDC48"],[66593,1,"\uD801\uDC49"],[66594,1,"\uD801\uDC4A"],[66595,1,"\uD801\uDC4B"],[66596,1,"\uD801\uDC4C"],[66597,1,"\uD801\uDC4D"],[66598,1,"\uD801\uDC4E"],[66599,1,"\uD801\uDC4F"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\uD801\uDCD8"],[66737,1,"\uD801\uDCD9"],[66738,1,"\uD801\uDCDA"],[66739,1,"\uD801\uDCDB"],[66740,1,"\uD801\uDCDC"],[66741,1,"\uD801\uDCDD"],[66742,1,"\uD801\uDCDE"],[66743,1,"\uD801\uDCDF"],[66744,1,"\uD801\uDCE0"],[66745,1,"\uD801\uDCE1"],[66746,1,"\uD801\uDCE2"],[66747,1,"\uD801\uDCE3"],[66748,1,"\uD801\uDCE4"],[66749,1,"\uD801\uDCE5"],[66750,1,"\uD801\uDCE6"],[66751,1,"\uD801\uDCE7"],[66752,1,"\uD801\uDCE8"],[66753,1,"\uD801\uDCE9"],[66754,1,"\uD801\uDCEA"],[66755,1,"\uD801\uDCEB"],[66756,1,"\uD801\uDCEC"],[66757,1,"\uD801\uDCED"],[66758,1,"\uD801\uDCEE"],[66759,1,"\uD801\uDCEF"],[66760,1,"\uD801\uDCF0"],[66761,1,"\uD801\uDCF1"],[66762,1,"\uD801\uDCF2"],[66763,1,"\uD801\uDCF3"],[66764,1,"\uD801\uDCF4"],[66765,1,"\uD801\uDCF5"],[66766,1,"\uD801\uDCF6"],[66767,1,"\uD801\uDCF7"],[66768,1,"\uD801\uDCF8"],[66769,1,"\uD801\uDCF9"],[66770,1,"\uD801\uDCFA"],[66771,1,"\uD801\uDCFB"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\uD801\uDD97"],[66929,1,"\uD801\uDD98"],[66930,1,"\uD801\uDD99"],[66931,1,"\uD801\uDD9A"],[66932,1,"\uD801\uDD9B"],[66933,1,"\uD801\uDD9C"],[66934,1,"\uD801\uDD9D"],[66935,1,"\uD801\uDD9E"],[66936,1,"\uD801\uDD9F"],[66937,1,"\uD801\uDDA0"],[66938,1,"\uD801\uDDA1"],[66939,3],[66940,1,"\uD801\uDDA3"],[66941,1,"\uD801\uDDA4"],[66942,1,"\uD801\uDDA5"],[66943,1,"\uD801\uDDA6"],[66944,1,"\uD801\uDDA7"],[66945,1,"\uD801\uDDA8"],[66946,1,"\uD801\uDDA9"],[66947,1,"\uD801\uDDAA"],[66948,1,"\uD801\uDDAB"],[66949,1,"\uD801\uDDAC"],[66950,1,"\uD801\uDDAD"],[66951,1,"\uD801\uDDAE"],[66952,1,"\uD801\uDDAF"],[66953,1,"\uD801\uDDB0"],[66954,1,"\uD801\uDDB1"],[66955,3],[66956,1,"\uD801\uDDB3"],[66957,1,"\uD801\uDDB4"],[66958,1,"\uD801\uDDB5"],[66959,1,"\uD801\uDDB6"],[66960,1,"\uD801\uDDB7"],[66961,1,"\uD801\uDDB8"],[66962,1,"\uD801\uDDB9"],[66963,3],[66964,1,"\uD801\uDDBB"],[66965,1,"\uD801\uDDBC"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"ː"],[67458,1,"ˑ"],[67459,1,"æ"],[67460,1,"ʙ"],[67461,1,"ɓ"],[67462,3],[67463,1,"ʣ"],[67464,1,"ꭦ"],[67465,1,"ʥ"],[67466,1,"ʤ"],[67467,1,"ɖ"],[67468,1,"ɗ"],[67469,1,"ᶑ"],[67470,1,"ɘ"],[67471,1,"ɞ"],[67472,1,"ʩ"],[67473,1,"ɤ"],[67474,1,"ɢ"],[67475,1,"ɠ"],[67476,1,"ʛ"],[67477,1,"ħ"],[67478,1,"ʜ"],[67479,1,"ɧ"],[67480,1,"ʄ"],[67481,1,"ʪ"],[67482,1,"ʫ"],[67483,1,"ɬ"],[67484,1,"\uD837\uDF04"],[67485,1,"ꞎ"],[67486,1,"ɮ"],[67487,1,"\uD837\uDF05"],[67488,1,"ʎ"],[67489,1,"\uD837\uDF06"],[67490,1,"ø"],[67491,1,"ɶ"],[67492,1,"ɷ"],[67493,1,"q"],[67494,1,"ɺ"],[67495,1,"\uD837\uDF08"],[67496,1,"ɽ"],[67497,1,"ɾ"],[67498,1,"ʀ"],[67499,1,"ʨ"],[67500,1,"ʦ"],[67501,1,"ꭧ"],[67502,1,"ʧ"],[67503,1,"ʈ"],[67504,1,"ⱱ"],[67505,3],[67506,1,"ʏ"],[67507,1,"ʡ"],[67508,1,"ʢ"],[67509,1,"ʘ"],[67510,1,"ǀ"],[67511,1,"ǁ"],[67512,1,"ǂ"],[67513,1,"\uD837\uDF0A"],[67514,1,"\uD837\uDF1E"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\uD803\uDCC0"],[68737,1,"\uD803\uDCC1"],[68738,1,"\uD803\uDCC2"],[68739,1,"\uD803\uDCC3"],[68740,1,"\uD803\uDCC4"],[68741,1,"\uD803\uDCC5"],[68742,1,"\uD803\uDCC6"],[68743,1,"\uD803\uDCC7"],[68744,1,"\uD803\uDCC8"],[68745,1,"\uD803\uDCC9"],[68746,1,"\uD803\uDCCA"],[68747,1,"\uD803\uDCCB"],[68748,1,"\uD803\uDCCC"],[68749,1,"\uD803\uDCCD"],[68750,1,"\uD803\uDCCE"],[68751,1,"\uD803\uDCCF"],[68752,1,"\uD803\uDCD0"],[68753,1,"\uD803\uDCD1"],[68754,1,"\uD803\uDCD2"],[68755,1,"\uD803\uDCD3"],[68756,1,"\uD803\uDCD4"],[68757,1,"\uD803\uDCD5"],[68758,1,"\uD803\uDCD6"],[68759,1,"\uD803\uDCD7"],[68760,1,"\uD803\uDCD8"],[68761,1,"\uD803\uDCD9"],[68762,1,"\uD803\uDCDA"],[68763,1,"\uD803\uDCDB"],[68764,1,"\uD803\uDCDC"],[68765,1,"\uD803\uDCDD"],[68766,1,"\uD803\uDCDE"],[68767,1,"\uD803\uDCDF"],[68768,1,"\uD803\uDCE0"],[68769,1,"\uD803\uDCE1"],[68770,1,"\uD803\uDCE2"],[68771,1,"\uD803\uDCE3"],[68772,1,"\uD803\uDCE4"],[68773,1,"\uD803\uDCE5"],[68774,1,"\uD803\uDCE6"],[68775,1,"\uD803\uDCE7"],[68776,1,"\uD803\uDCE8"],[68777,1,"\uD803\uDCE9"],[68778,1,"\uD803\uDCEA"],[68779,1,"\uD803\uDCEB"],[68780,1,"\uD803\uDCEC"],[68781,1,"\uD803\uDCED"],[68782,1,"\uD803\uDCEE"],[68783,1,"\uD803\uDCEF"],[68784,1,"\uD803\uDCF0"],[68785,1,"\uD803\uDCF1"],[68786,1,"\uD803\uDCF2"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\uD803\uDD70"],[68945,1,"\uD803\uDD71"],[68946,1,"\uD803\uDD72"],[68947,1,"\uD803\uDD73"],[68948,1,"\uD803\uDD74"],[68949,1,"\uD803\uDD75"],[68950,1,"\uD803\uDD76"],[68951,1,"\uD803\uDD77"],[68952,1,"\uD803\uDD78"],[68953,1,"\uD803\uDD79"],[68954,1,"\uD803\uDD7A"],[68955,1,"\uD803\uDD7B"],[68956,1,"\uD803\uDD7C"],[68957,1,"\uD803\uDD7D"],[68958,1,"\uD803\uDD7E"],[68959,1,"\uD803\uDD7F"],[68960,1,"\uD803\uDD80"],[68961,1,"\uD803\uDD81"],[68962,1,"\uD803\uDD82"],[68963,1,"\uD803\uDD83"],[68964,1,"\uD803\uDD84"],[68965,1,"\uD803\uDD85"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\uD806\uDCC0"],[71841,1,"\uD806\uDCC1"],[71842,1,"\uD806\uDCC2"],[71843,1,"\uD806\uDCC3"],[71844,1,"\uD806\uDCC4"],[71845,1,"\uD806\uDCC5"],[71846,1,"\uD806\uDCC6"],[71847,1,"\uD806\uDCC7"],[71848,1,"\uD806\uDCC8"],[71849,1,"\uD806\uDCC9"],[71850,1,"\uD806\uDCCA"],[71851,1,"\uD806\uDCCB"],[71852,1,"\uD806\uDCCC"],[71853,1,"\uD806\uDCCD"],[71854,1,"\uD806\uDCCE"],[71855,1,"\uD806\uDCCF"],[71856,1,"\uD806\uDCD0"],[71857,1,"\uD806\uDCD1"],[71858,1,"\uD806\uDCD2"],[71859,1,"\uD806\uDCD3"],[71860,1,"\uD806\uDCD4"],[71861,1,"\uD806\uDCD5"],[71862,1,"\uD806\uDCD6"],[71863,1,"\uD806\uDCD7"],[71864,1,"\uD806\uDCD8"],[71865,1,"\uD806\uDCD9"],[71866,1,"\uD806\uDCDA"],[71867,1,"\uD806\uDCDB"],[71868,1,"\uD806\uDCDC"],[71869,1,"\uD806\uDCDD"],[71870,1,"\uD806\uDCDE"],[71871,1,"\uD806\uDCDF"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\uD81B\uDE60"],[93761,1,"\uD81B\uDE61"],[93762,1,"\uD81B\uDE62"],[93763,1,"\uD81B\uDE63"],[93764,1,"\uD81B\uDE64"],[93765,1,"\uD81B\uDE65"],[93766,1,"\uD81B\uDE66"],[93767,1,"\uD81B\uDE67"],[93768,1,"\uD81B\uDE68"],[93769,1,"\uD81B\uDE69"],[93770,1,"\uD81B\uDE6A"],[93771,1,"\uD81B\uDE6B"],[93772,1,"\uD81B\uDE6C"],[93773,1,"\uD81B\uDE6D"],[93774,1,"\uD81B\uDE6E"],[93775,1,"\uD81B\uDE6F"],[93776,1,"\uD81B\uDE70"],[93777,1,"\uD81B\uDE71"],[93778,1,"\uD81B\uDE72"],[93779,1,"\uD81B\uDE73"],[93780,1,"\uD81B\uDE74"],[93781,1,"\uD81B\uDE75"],[93782,1,"\uD81B\uDE76"],[93783,1,"\uD81B\uDE77"],[93784,1,"\uD81B\uDE78"],[93785,1,"\uD81B\uDE79"],[93786,1,"\uD81B\uDE7A"],[93787,1,"\uD81B\uDE7B"],[93788,1,"\uD81B\uDE7C"],[93789,1,"\uD81B\uDE7D"],[93790,1,"\uD81B\uDE7E"],[93791,1,"\uD81B\uDE7F"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118000,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\uD834\uDD57\uD834\uDD65"],[119135,1,"\uD834\uDD58\uD834\uDD65"],[119136,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6E"],[119137,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6F"],[119138,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD70"],[119139,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD71"],[119140,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD72"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\uD834\uDDB9\uD834\uDD65"],[119228,1,"\uD834\uDDBA\uD834\uDD65"],[119229,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6E"],[119230,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6E"],[119231,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6F"],[119232,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6F"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[120000,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"ı"],[120485,1,"ȷ"],[[120486,120487],3],[120488,1,"α"],[120489,1,"β"],[120490,1,"γ"],[120491,1,"δ"],[120492,1,"ε"],[120493,1,"ζ"],[120494,1,"η"],[120495,1,"θ"],[120496,1,"ι"],[120497,1,"κ"],[120498,1,"λ"],[120499,1,"μ"],[120500,1,"ν"],[120501,1,"ξ"],[120502,1,"ο"],[120503,1,"π"],[120504,1,"ρ"],[120505,1,"θ"],[120506,1,"σ"],[120507,1,"τ"],[120508,1,"υ"],[120509,1,"φ"],[120510,1,"χ"],[120511,1,"ψ"],[120512,1,"ω"],[120513,1,"∇"],[120514,1,"α"],[120515,1,"β"],[120516,1,"γ"],[120517,1,"δ"],[120518,1,"ε"],[120519,1,"ζ"],[120520,1,"η"],[120521,1,"θ"],[120522,1,"ι"],[120523,1,"κ"],[120524,1,"λ"],[120525,1,"μ"],[120526,1,"ν"],[120527,1,"ξ"],[120528,1,"ο"],[120529,1,"π"],[120530,1,"ρ"],[[120531,120532],1,"σ"],[120533,1,"τ"],[120534,1,"υ"],[120535,1,"φ"],[120536,1,"χ"],[120537,1,"ψ"],[120538,1,"ω"],[120539,1,"∂"],[120540,1,"ε"],[120541,1,"θ"],[120542,1,"κ"],[120543,1,"φ"],[120544,1,"ρ"],[120545,1,"π"],[120546,1,"α"],[120547,1,"β"],[120548,1,"γ"],[120549,1,"δ"],[120550,1,"ε"],[120551,1,"ζ"],[120552,1,"η"],[120553,1,"θ"],[120554,1,"ι"],[120555,1,"κ"],[120556,1,"λ"],[120557,1,"μ"],[120558,1,"ν"],[120559,1,"ξ"],[120560,1,"ο"],[120561,1,"π"],[120562,1,"ρ"],[120563,1,"θ"],[120564,1,"σ"],[120565,1,"τ"],[120566,1,"υ"],[120567,1,"φ"],[120568,1,"χ"],[120569,1,"ψ"],[120570,1,"ω"],[120571,1,"∇"],[120572,1,"α"],[120573,1,"β"],[120574,1,"γ"],[120575,1,"δ"],[120576,1,"ε"],[120577,1,"ζ"],[120578,1,"η"],[120579,1,"θ"],[120580,1,"ι"],[120581,1,"κ"],[120582,1,"λ"],[120583,1,"μ"],[120584,1,"ν"],[120585,1,"ξ"],[120586,1,"ο"],[120587,1,"π"],[120588,1,"ρ"],[[120589,120590],1,"σ"],[120591,1,"τ"],[120592,1,"υ"],[120593,1,"φ"],[120594,1,"χ"],[120595,1,"ψ"],[120596,1,"ω"],[120597,1,"∂"],[120598,1,"ε"],[120599,1,"θ"],[120600,1,"κ"],[120601,1,"φ"],[120602,1,"ρ"],[120603,1,"π"],[120604,1,"α"],[120605,1,"β"],[120606,1,"γ"],[120607,1,"δ"],[120608,1,"ε"],[120609,1,"ζ"],[120610,1,"η"],[120611,1,"θ"],[120612,1,"ι"],[120613,1,"κ"],[120614,1,"λ"],[120615,1,"μ"],[120616,1,"ν"],[120617,1,"ξ"],[120618,1,"ο"],[120619,1,"π"],[120620,1,"ρ"],[120621,1,"θ"],[120622,1,"σ"],[120623,1,"τ"],[120624,1,"υ"],[120625,1,"φ"],[120626,1,"χ"],[120627,1,"ψ"],[120628,1,"ω"],[120629,1,"∇"],[120630,1,"α"],[120631,1,"β"],[120632,1,"γ"],[120633,1,"δ"],[120634,1,"ε"],[120635,1,"ζ"],[120636,1,"η"],[120637,1,"θ"],[120638,1,"ι"],[120639,1,"κ"],[120640,1,"λ"],[120641,1,"μ"],[120642,1,"ν"],[120643,1,"ξ"],[120644,1,"ο"],[120645,1,"π"],[120646,1,"ρ"],[[120647,120648],1,"σ"],[120649,1,"τ"],[120650,1,"υ"],[120651,1,"φ"],[120652,1,"χ"],[120653,1,"ψ"],[120654,1,"ω"],[120655,1,"∂"],[120656,1,"ε"],[120657,1,"θ"],[120658,1,"κ"],[120659,1,"φ"],[120660,1,"ρ"],[120661,1,"π"],[120662,1,"α"],[120663,1,"β"],[120664,1,"γ"],[120665,1,"δ"],[120666,1,"ε"],[120667,1,"ζ"],[120668,1,"η"],[120669,1,"θ"],[120670,1,"ι"],[120671,1,"κ"],[120672,1,"λ"],[120673,1,"μ"],[120674,1,"ν"],[120675,1,"ξ"],[120676,1,"ο"],[120677,1,"π"],[120678,1,"ρ"],[120679,1,"θ"],[120680,1,"σ"],[120681,1,"τ"],[120682,1,"υ"],[120683,1,"φ"],[120684,1,"χ"],[120685,1,"ψ"],[120686,1,"ω"],[120687,1,"∇"],[120688,1,"α"],[120689,1,"β"],[120690,1,"γ"],[120691,1,"δ"],[120692,1,"ε"],[120693,1,"ζ"],[120694,1,"η"],[120695,1,"θ"],[120696,1,"ι"],[120697,1,"κ"],[120698,1,"λ"],[120699,1,"μ"],[120700,1,"ν"],[120701,1,"ξ"],[120702,1,"ο"],[120703,1,"π"],[120704,1,"ρ"],[[120705,120706],1,"σ"],[120707,1,"τ"],[120708,1,"υ"],[120709,1,"φ"],[120710,1,"χ"],[120711,1,"ψ"],[120712,1,"ω"],[120713,1,"∂"],[120714,1,"ε"],[120715,1,"θ"],[120716,1,"κ"],[120717,1,"φ"],[120718,1,"ρ"],[120719,1,"π"],[120720,1,"α"],[120721,1,"β"],[120722,1,"γ"],[120723,1,"δ"],[120724,1,"ε"],[120725,1,"ζ"],[120726,1,"η"],[120727,1,"θ"],[120728,1,"ι"],[120729,1,"κ"],[120730,1,"λ"],[120731,1,"μ"],[120732,1,"ν"],[120733,1,"ξ"],[120734,1,"ο"],[120735,1,"π"],[120736,1,"ρ"],[120737,1,"θ"],[120738,1,"σ"],[120739,1,"τ"],[120740,1,"υ"],[120741,1,"φ"],[120742,1,"χ"],[120743,1,"ψ"],[120744,1,"ω"],[120745,1,"∇"],[120746,1,"α"],[120747,1,"β"],[120748,1,"γ"],[120749,1,"δ"],[120750,1,"ε"],[120751,1,"ζ"],[120752,1,"η"],[120753,1,"θ"],[120754,1,"ι"],[120755,1,"κ"],[120756,1,"λ"],[120757,1,"μ"],[120758,1,"ν"],[120759,1,"ξ"],[120760,1,"ο"],[120761,1,"π"],[120762,1,"ρ"],[[120763,120764],1,"σ"],[120765,1,"τ"],[120766,1,"υ"],[120767,1,"φ"],[120768,1,"χ"],[120769,1,"ψ"],[120770,1,"ω"],[120771,1,"∂"],[120772,1,"ε"],[120773,1,"θ"],[120774,1,"κ"],[120775,1,"φ"],[120776,1,"ρ"],[120777,1,"π"],[[120778,120779],1,"ϝ"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"а"],[122929,1,"б"],[122930,1,"в"],[122931,1,"г"],[122932,1,"д"],[122933,1,"е"],[122934,1,"ж"],[122935,1,"з"],[122936,1,"и"],[122937,1,"к"],[122938,1,"л"],[122939,1,"м"],[122940,1,"о"],[122941,1,"п"],[122942,1,"р"],[122943,1,"с"],[122944,1,"т"],[122945,1,"у"],[122946,1,"ф"],[122947,1,"х"],[122948,1,"ц"],[122949,1,"ч"],[122950,1,"ш"],[122951,1,"ы"],[122952,1,"э"],[122953,1,"ю"],[122954,1,"ꚉ"],[122955,1,"ә"],[122956,1,"і"],[122957,1,"ј"],[122958,1,"ө"],[122959,1,"ү"],[122960,1,"ӏ"],[122961,1,"а"],[122962,1,"б"],[122963,1,"в"],[122964,1,"г"],[122965,1,"д"],[122966,1,"е"],[122967,1,"ж"],[122968,1,"з"],[122969,1,"и"],[122970,1,"к"],[122971,1,"л"],[122972,1,"о"],[122973,1,"п"],[122974,1,"с"],[122975,1,"у"],[122976,1,"ф"],[122977,1,"х"],[122978,1,"ц"],[122979,1,"ч"],[122980,1,"ш"],[122981,1,"ъ"],[122982,1,"ы"],[122983,1,"ґ"],[122984,1,"і"],[122985,1,"ѕ"],[122986,1,"џ"],[122987,1,"ҫ"],[122988,1,"ꙑ"],[122989,1,"ұ"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\uD83A\uDD22"],[125185,1,"\uD83A\uDD23"],[125186,1,"\uD83A\uDD24"],[125187,1,"\uD83A\uDD25"],[125188,1,"\uD83A\uDD26"],[125189,1,"\uD83A\uDD27"],[125190,1,"\uD83A\uDD28"],[125191,1,"\uD83A\uDD29"],[125192,1,"\uD83A\uDD2A"],[125193,1,"\uD83A\uDD2B"],[125194,1,"\uD83A\uDD2C"],[125195,1,"\uD83A\uDD2D"],[125196,1,"\uD83A\uDD2E"],[125197,1,"\uD83A\uDD2F"],[125198,1,"\uD83A\uDD30"],[125199,1,"\uD83A\uDD31"],[125200,1,"\uD83A\uDD32"],[125201,1,"\uD83A\uDD33"],[125202,1,"\uD83A\uDD34"],[125203,1,"\uD83A\uDD35"],[125204,1,"\uD83A\uDD36"],[125205,1,"\uD83A\uDD37"],[125206,1,"\uD83A\uDD38"],[125207,1,"\uD83A\uDD39"],[125208,1,"\uD83A\uDD3A"],[125209,1,"\uD83A\uDD3B"],[125210,1,"\uD83A\uDD3C"],[125211,1,"\uD83A\uDD3D"],[125212,1,"\uD83A\uDD3E"],[125213,1,"\uD83A\uDD3F"],[125214,1,"\uD83A\uDD40"],[125215,1,"\uD83A\uDD41"],[125216,1,"\uD83A\uDD42"],[125217,1,"\uD83A\uDD43"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"ا"],[126465,1,"ب"],[126466,1,"ج"],[126467,1,"د"],[126468,3],[126469,1,"و"],[126470,1,"ز"],[126471,1,"ح"],[126472,1,"ط"],[126473,1,"ي"],[126474,1,"ك"],[126475,1,"ل"],[126476,1,"م"],[126477,1,"ن"],[126478,1,"س"],[126479,1,"ع"],[126480,1,"ف"],[126481,1,"ص"],[126482,1,"ق"],[126483,1,"ر"],[126484,1,"ش"],[126485,1,"ت"],[126486,1,"ث"],[126487,1,"خ"],[126488,1,"ذ"],[126489,1,"ض"],[126490,1,"ظ"],[126491,1,"غ"],[126492,1,"ٮ"],[126493,1,"ں"],[126494,1,"ڡ"],[126495,1,"ٯ"],[126496,3],[126497,1,"ب"],[126498,1,"ج"],[126499,3],[126500,1,"ه"],[[126501,126502],3],[126503,1,"ح"],[126504,3],[126505,1,"ي"],[126506,1,"ك"],[126507,1,"ل"],[126508,1,"م"],[126509,1,"ن"],[126510,1,"س"],[126511,1,"ع"],[126512,1,"ف"],[126513,1,"ص"],[126514,1,"ق"],[126515,3],[126516,1,"ش"],[126517,1,"ت"],[126518,1,"ث"],[126519,1,"خ"],[126520,3],[126521,1,"ض"],[126522,3],[126523,1,"غ"],[[126524,126529],3],[126530,1,"ج"],[[126531,126534],3],[126535,1,"ح"],[126536,3],[126537,1,"ي"],[126538,3],[126539,1,"ل"],[126540,3],[126541,1,"ن"],[126542,1,"س"],[126543,1,"ع"],[126544,3],[126545,1,"ص"],[126546,1,"ق"],[126547,3],[126548,1,"ش"],[[126549,126550],3],[126551,1,"خ"],[126552,3],[126553,1,"ض"],[126554,3],[126555,1,"غ"],[126556,3],[126557,1,"ں"],[126558,3],[126559,1,"ٯ"],[126560,3],[126561,1,"ب"],[126562,1,"ج"],[126563,3],[126564,1,"ه"],[[126565,126566],3],[126567,1,"ح"],[126568,1,"ط"],[126569,1,"ي"],[126570,1,"ك"],[126571,3],[126572,1,"م"],[126573,1,"ن"],[126574,1,"س"],[126575,1,"ع"],[126576,1,"ف"],[126577,1,"ص"],[126578,1,"ق"],[126579,3],[126580,1,"ش"],[126581,1,"ت"],[126582,1,"ث"],[126583,1,"خ"],[126584,3],[126585,1,"ض"],[126586,1,"ظ"],[126587,1,"غ"],[126588,1,"ٮ"],[126589,3],[126590,1,"ڡ"],[126591,3],[126592,1,"ا"],[126593,1,"ب"],[126594,1,"ج"],[126595,1,"د"],[126596,1,"ه"],[126597,1,"و"],[126598,1,"ز"],[126599,1,"ح"],[126600,1,"ط"],[126601,1,"ي"],[126602,3],[126603,1,"ل"],[126604,1,"م"],[126605,1,"ن"],[126606,1,"س"],[126607,1,"ع"],[126608,1,"ف"],[126609,1,"ص"],[126610,1,"ق"],[126611,1,"ر"],[126612,1,"ش"],[126613,1,"ت"],[126614,1,"ث"],[126615,1,"خ"],[126616,1,"ذ"],[126617,1,"ض"],[126618,1,"ظ"],[126619,1,"غ"],[[126620,126624],3],[126625,1,"ب"],[126626,1,"ج"],[126627,1,"د"],[126628,3],[126629,1,"و"],[126630,1,"ز"],[126631,1,"ح"],[126632,1,"ط"],[126633,1,"ي"],[126634,3],[126635,1,"ل"],[126636,1,"م"],[126637,1,"ن"],[126638,1,"س"],[126639,1,"ع"],[126640,1,"ف"],[126641,1,"ص"],[126642,1,"ق"],[126643,1,"ر"],[126644,1,"ش"],[126645,1,"ت"],[126646,1,"ث"],[126647,1,"خ"],[126648,1,"ذ"],[126649,1,"ض"],[126650,1,"ظ"],[126651,1,"غ"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"〔s〕"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"ほか"],[127489,1,"ココ"],[127490,1,"サ"],[[127491,127503],3],[127504,1,"手"],[127505,1,"字"],[127506,1,"双"],[127507,1,"デ"],[127508,1,"二"],[127509,1,"多"],[127510,1,"解"],[127511,1,"天"],[127512,1,"交"],[127513,1,"映"],[127514,1,"無"],[127515,1,"料"],[127516,1,"前"],[127517,1,"後"],[127518,1,"再"],[127519,1,"新"],[127520,1,"初"],[127521,1,"終"],[127522,1,"生"],[127523,1,"販"],[127524,1,"声"],[127525,1,"吹"],[127526,1,"演"],[127527,1,"投"],[127528,1,"捕"],[127529,1,"一"],[127530,1,"三"],[127531,1,"遊"],[127532,1,"左"],[127533,1,"中"],[127534,1,"右"],[127535,1,"指"],[127536,1,"走"],[127537,1,"打"],[127538,1,"禁"],[127539,1,"空"],[127540,1,"合"],[127541,1,"満"],[127542,1,"有"],[127543,1,"月"],[127544,1,"申"],[127545,1,"割"],[127546,1,"営"],[127547,1,"配"],[[127548,127551],3],[127552,1,"〔本〕"],[127553,1,"〔三〕"],[127554,1,"〔二〕"],[127555,1,"〔安〕"],[127556,1,"〔点〕"],[127557,1,"〔打〕"],[127558,1,"〔盗〕"],[127559,1,"〔勝〕"],[127560,1,"〔敗〕"],[[127561,127567],3],[127568,1,"得"],[127569,1,"可"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128000,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,"丽"],[194561,1,"丸"],[194562,1,"乁"],[194563,1,"\uD840\uDD22"],[194564,1,"你"],[194565,1,"侮"],[194566,1,"侻"],[194567,1,"倂"],[194568,1,"偺"],[194569,1,"備"],[194570,1,"僧"],[194571,1,"像"],[194572,1,"㒞"],[194573,1,"\uD841\uDE3A"],[194574,1,"免"],[194575,1,"兔"],[194576,1,"兤"],[194577,1,"具"],[194578,1,"\uD841\uDD1C"],[194579,1,"㒹"],[194580,1,"內"],[194581,1,"再"],[194582,1,"\uD841\uDD4B"],[194583,1,"冗"],[194584,1,"冤"],[194585,1,"仌"],[194586,1,"冬"],[194587,1,"况"],[194588,1,"\uD864\uDDDF"],[194589,1,"凵"],[194590,1,"刃"],[194591,1,"㓟"],[194592,1,"刻"],[194593,1,"剆"],[194594,1,"割"],[194595,1,"剷"],[194596,1,"㔕"],[194597,1,"勇"],[194598,1,"勉"],[194599,1,"勤"],[194600,1,"勺"],[194601,1,"包"],[194602,1,"匆"],[194603,1,"北"],[194604,1,"卉"],[194605,1,"卑"],[194606,1,"博"],[194607,1,"即"],[194608,1,"卽"],[[194609,194611],1,"卿"],[194612,1,"\uD842\uDE2C"],[194613,1,"灰"],[194614,1,"及"],[194615,1,"叟"],[194616,1,"\uD842\uDF63"],[194617,1,"叫"],[194618,1,"叱"],[194619,1,"吆"],[194620,1,"咞"],[194621,1,"吸"],[194622,1,"呈"],[194623,1,"周"],[194624,1,"咢"],[194625,1,"哶"],[194626,1,"唐"],[194627,1,"啓"],[194628,1,"啣"],[[194629,194630],1,"善"],[194631,1,"喙"],[194632,1,"喫"],[194633,1,"喳"],[194634,1,"嗂"],[194635,1,"圖"],[194636,1,"嘆"],[194637,1,"圗"],[194638,1,"噑"],[194639,1,"噴"],[194640,1,"切"],[194641,1,"壮"],[194642,1,"城"],[194643,1,"埴"],[194644,1,"堍"],[194645,1,"型"],[194646,1,"堲"],[194647,1,"報"],[194648,1,"墬"],[194649,1,"\uD845\uDCE4"],[194650,1,"売"],[194651,1,"壷"],[194652,1,"夆"],[194653,1,"多"],[194654,1,"夢"],[194655,1,"奢"],[194656,1,"\uD845\uDEA8"],[194657,1,"\uD845\uDEEA"],[194658,1,"姬"],[194659,1,"娛"],[194660,1,"娧"],[194661,1,"姘"],[194662,1,"婦"],[194663,1,"㛮"],[194664,1,"㛼"],[194665,1,"嬈"],[[194666,194667],1,"嬾"],[194668,1,"\uD846\uDDC8"],[194669,1,"寃"],[194670,1,"寘"],[194671,1,"寧"],[194672,1,"寳"],[194673,1,"\uD846\uDF18"],[194674,1,"寿"],[194675,1,"将"],[194676,1,"当"],[194677,1,"尢"],[194678,1,"㞁"],[194679,1,"屠"],[194680,1,"屮"],[194681,1,"峀"],[194682,1,"岍"],[194683,1,"\uD847\uDDE4"],[194684,1,"嵃"],[194685,1,"\uD847\uDDE6"],[194686,1,"嵮"],[194687,1,"嵫"],[194688,1,"嵼"],[194689,1,"巡"],[194690,1,"巢"],[194691,1,"㠯"],[194692,1,"巽"],[194693,1,"帨"],[194694,1,"帽"],[194695,1,"幩"],[194696,1,"㡢"],[194697,1,"\uD848\uDD83"],[194698,1,"㡼"],[194699,1,"庰"],[194700,1,"庳"],[194701,1,"庶"],[194702,1,"廊"],[194703,1,"\uD868\uDF92"],[194704,1,"廾"],[[194705,194706],1,"\uD848\uDF31"],[194707,1,"舁"],[[194708,194709],1,"弢"],[194710,1,"㣇"],[194711,1,"\uD84C\uDEB8"],[194712,1,"\uD858\uDDDA"],[194713,1,"形"],[194714,1,"彫"],[194715,1,"㣣"],[194716,1,"徚"],[194717,1,"忍"],[194718,1,"志"],[194719,1,"忹"],[194720,1,"悁"],[194721,1,"㤺"],[194722,1,"㤜"],[194723,1,"悔"],[194724,1,"\uD849\uDED4"],[194725,1,"惇"],[194726,1,"慈"],[194727,1,"慌"],[194728,1,"慎"],[194729,1,"慌"],[194730,1,"慺"],[194731,1,"憎"],[194732,1,"憲"],[194733,1,"憤"],[194734,1,"憯"],[194735,1,"懞"],[194736,1,"懲"],[194737,1,"懶"],[194738,1,"成"],[194739,1,"戛"],[194740,1,"扝"],[194741,1,"抱"],[194742,1,"拔"],[194743,1,"捐"],[194744,1,"\uD84A\uDF0C"],[194745,1,"挽"],[194746,1,"拼"],[194747,1,"捨"],[194748,1,"掃"],[194749,1,"揤"],[194750,1,"\uD84A\uDFF1"],[194751,1,"搢"],[194752,1,"揅"],[194753,1,"掩"],[194754,1,"㨮"],[194755,1,"摩"],[194756,1,"摾"],[194757,1,"撝"],[194758,1,"摷"],[194759,1,"㩬"],[194760,1,"敏"],[194761,1,"敬"],[194762,1,"\uD84C\uDC0A"],[194763,1,"旣"],[194764,1,"書"],[194765,1,"晉"],[194766,1,"㬙"],[194767,1,"暑"],[194768,1,"㬈"],[194769,1,"㫤"],[194770,1,"冒"],[194771,1,"冕"],[194772,1,"最"],[194773,1,"暜"],[194774,1,"肭"],[194775,1,"䏙"],[194776,1,"朗"],[194777,1,"望"],[194778,1,"朡"],[194779,1,"杞"],[194780,1,"杓"],[194781,1,"\uD84C\uDFC3"],[194782,1,"㭉"],[194783,1,"柺"],[194784,1,"枅"],[194785,1,"桒"],[194786,1,"梅"],[194787,1,"\uD84D\uDC6D"],[194788,1,"梎"],[194789,1,"栟"],[194790,1,"椔"],[194791,1,"㮝"],[194792,1,"楂"],[194793,1,"榣"],[194794,1,"槪"],[194795,1,"檨"],[194796,1,"\uD84D\uDEA3"],[194797,1,"櫛"],[194798,1,"㰘"],[194799,1,"次"],[194800,1,"\uD84E\uDCA7"],[194801,1,"歔"],[194802,1,"㱎"],[194803,1,"歲"],[194804,1,"殟"],[194805,1,"殺"],[194806,1,"殻"],[194807,1,"\uD84E\uDE8D"],[194808,1,"\uD847\uDD0B"],[194809,1,"\uD84E\uDEFA"],[194810,1,"汎"],[194811,1,"\uD84F\uDCBC"],[194812,1,"沿"],[194813,1,"泍"],[194814,1,"汧"],[194815,1,"洖"],[194816,1,"派"],[194817,1,"海"],[194818,1,"流"],[194819,1,"浩"],[194820,1,"浸"],[194821,1,"涅"],[194822,1,"\uD84F\uDD1E"],[194823,1,"洴"],[194824,1,"港"],[194825,1,"湮"],[194826,1,"㴳"],[194827,1,"滋"],[194828,1,"滇"],[194829,1,"\uD84F\uDED1"],[194830,1,"淹"],[194831,1,"潮"],[194832,1,"\uD84F\uDF5E"],[194833,1,"\uD84F\uDF8E"],[194834,1,"濆"],[194835,1,"瀹"],[194836,1,"瀞"],[194837,1,"瀛"],[194838,1,"㶖"],[194839,1,"灊"],[194840,1,"災"],[194841,1,"灷"],[194842,1,"炭"],[194843,1,"\uD841\uDD25"],[194844,1,"煅"],[194845,1,"\uD850\uDE63"],[194846,1,"熜"],[194847,1,"\uD850\uDFAB"],[194848,1,"爨"],[194849,1,"爵"],[194850,1,"牐"],[194851,1,"\uD851\uDE08"],[194852,1,"犀"],[194853,1,"犕"],[194854,1,"\uD851\uDF35"],[194855,1,"\uD852\uDC14"],[194856,1,"獺"],[194857,1,"王"],[194858,1,"㺬"],[194859,1,"玥"],[[194860,194861],1,"㺸"],[194862,1,"瑇"],[194863,1,"瑜"],[194864,1,"瑱"],[194865,1,"璅"],[194866,1,"瓊"],[194867,1,"㼛"],[194868,1,"甤"],[194869,1,"\uD853\uDC36"],[194870,1,"甾"],[194871,1,"\uD853\uDC92"],[194872,1,"異"],[194873,1,"\uD848\uDD9F"],[194874,1,"瘐"],[194875,1,"\uD853\uDFA1"],[194876,1,"\uD853\uDFB8"],[194877,1,"\uD854\uDC44"],[194878,1,"㿼"],[194879,1,"䀈"],[194880,1,"直"],[194881,1,"\uD854\uDCF3"],[194882,1,"\uD854\uDCF2"],[194883,1,"\uD854\uDD19"],[194884,1,"\uD854\uDD33"],[194885,1,"眞"],[[194886,194887],1,"真"],[194888,1,"睊"],[194889,1,"䀹"],[194890,1,"瞋"],[194891,1,"䁆"],[194892,1,"䂖"],[194893,1,"\uD855\uDC1D"],[194894,1,"硎"],[194895,1,"碌"],[194896,1,"磌"],[194897,1,"䃣"],[194898,1,"\uD855\uDE26"],[194899,1,"祖"],[194900,1,"\uD855\uDE9A"],[194901,1,"\uD855\uDEC5"],[194902,1,"福"],[194903,1,"秫"],[194904,1,"䄯"],[194905,1,"穀"],[194906,1,"穊"],[194907,1,"穏"],[194908,1,"\uD856\uDD7C"],[[194909,194910],1,"\uD856\uDEA7"],[194911,1,"竮"],[194912,1,"䈂"],[194913,1,"\uD856\uDFAB"],[194914,1,"篆"],[194915,1,"築"],[194916,1,"䈧"],[194917,1,"\uD857\uDC80"],[194918,1,"糒"],[194919,1,"䊠"],[194920,1,"糨"],[194921,1,"糣"],[194922,1,"紀"],[194923,1,"\uD857\uDF86"],[194924,1,"絣"],[194925,1,"䌁"],[194926,1,"緇"],[194927,1,"縂"],[194928,1,"繅"],[194929,1,"䌴"],[194930,1,"\uD858\uDE28"],[194931,1,"\uD858\uDE47"],[194932,1,"䍙"],[194933,1,"\uD858\uDED9"],[194934,1,"罺"],[194935,1,"\uD858\uDF3E"],[194936,1,"羕"],[194937,1,"翺"],[194938,1,"者"],[194939,1,"\uD859\uDCDA"],[194940,1,"\uD859\uDD23"],[194941,1,"聠"],[194942,1,"\uD859\uDDA8"],[194943,1,"聰"],[194944,1,"\uD84C\uDF5F"],[194945,1,"䏕"],[194946,1,"育"],[194947,1,"脃"],[194948,1,"䐋"],[194949,1,"脾"],[194950,1,"媵"],[194951,1,"\uD859\uDFA7"],[194952,1,"\uD859\uDFB5"],[194953,1,"\uD84C\uDF93"],[194954,1,"\uD84C\uDF9C"],[194955,1,"舁"],[194956,1,"舄"],[194957,1,"辞"],[194958,1,"䑫"],[194959,1,"芑"],[194960,1,"芋"],[194961,1,"芝"],[194962,1,"劳"],[194963,1,"花"],[194964,1,"芳"],[194965,1,"芽"],[194966,1,"苦"],[194967,1,"\uD85A\uDF3C"],[194968,1,"若"],[194969,1,"茝"],[194970,1,"荣"],[194971,1,"莭"],[194972,1,"茣"],[194973,1,"莽"],[194974,1,"菧"],[194975,1,"著"],[194976,1,"荓"],[194977,1,"菊"],[194978,1,"菌"],[194979,1,"菜"],[194980,1,"\uD85B\uDC36"],[194981,1,"\uD85B\uDD6B"],[194982,1,"\uD85B\uDCD5"],[194983,1,"䔫"],[194984,1,"蓱"],[194985,1,"蓳"],[194986,1,"蔖"],[194987,1,"\uD85C\uDFCA"],[194988,1,"蕤"],[194989,1,"\uD85B\uDF2C"],[194990,1,"䕝"],[194991,1,"䕡"],[194992,1,"\uD85B\uDFB1"],[194993,1,"\uD85C\uDCD2"],[194994,1,"䕫"],[194995,1,"虐"],[194996,1,"虜"],[194997,1,"虧"],[194998,1,"虩"],[194999,1,"蚩"],[195000,1,"蚈"],[195001,1,"蜎"],[195002,1,"蛢"],[195003,1,"蝹"],[195004,1,"蜨"],[195005,1,"蝫"],[195006,1,"螆"],[195007,1,"䗗"],[195008,1,"蟡"],[195009,1,"蠁"],[195010,1,"䗹"],[195011,1,"衠"],[195012,1,"衣"],[195013,1,"\uD85D\uDE67"],[195014,1,"裗"],[195015,1,"裞"],[195016,1,"䘵"],[195017,1,"裺"],[195018,1,"㒻"],[195019,1,"\uD85E\uDCAE"],[195020,1,"\uD85E\uDD66"],[195021,1,"䚾"],[195022,1,"䛇"],[195023,1,"誠"],[195024,1,"諭"],[195025,1,"變"],[195026,1,"豕"],[195027,1,"\uD85F\uDCA8"],[195028,1,"貫"],[195029,1,"賁"],[195030,1,"贛"],[195031,1,"起"],[195032,1,"\uD85F\uDF2F"],[195033,1,"\uD842\uDC04"],[195034,1,"跋"],[195035,1,"趼"],[195036,1,"跰"],[195037,1,"\uD842\uDCDE"],[195038,1,"軔"],[195039,1,"輸"],[195040,1,"\uD861\uDDD2"],[195041,1,"\uD861\uDDED"],[195042,1,"邔"],[195043,1,"郱"],[195044,1,"鄑"],[195045,1,"\uD861\uDF2E"],[195046,1,"鄛"],[195047,1,"鈸"],[195048,1,"鋗"],[195049,1,"鋘"],[195050,1,"鉼"],[195051,1,"鏹"],[195052,1,"鐕"],[195053,1,"\uD862\uDFFA"],[195054,1,"開"],[195055,1,"䦕"],[195056,1,"閷"],[195057,1,"\uD863\uDD77"],[195058,1,"䧦"],[195059,1,"雃"],[195060,1,"嶲"],[195061,1,"霣"],[195062,1,"\uD864\uDD45"],[195063,1,"\uD864\uDE1A"],[195064,1,"䩮"],[195065,1,"䩶"],[195066,1,"韠"],[195067,1,"\uD865\uDC0A"],[195068,1,"䪲"],[195069,1,"\uD865\uDC96"],[[195070,195071],1,"頋"],[195072,1,"頩"],[195073,1,"\uD865\uDDB6"],[195074,1,"飢"],[195075,1,"䬳"],[195076,1,"餩"],[195077,1,"馧"],[195078,1,"駂"],[195079,1,"駾"],[195080,1,"䯎"],[195081,1,"\uD866\uDF30"],[195082,1,"鬒"],[195083,1,"鱀"],[195084,1,"鳽"],[195085,1,"䳎"],[195086,1,"䳭"],[195087,1,"鵧"],[195088,1,"\uD868\uDCCE"],[195089,1,"䳸"],[195090,1,"\uD868\uDD05"],[195091,1,"\uD868\uDE0E"],[195092,1,"\uD868\uDE91"],[195093,1,"麻"],[195094,1,"䵖"],[195095,1,"黹"],[195096,1,"黾"],[195097,1,"鼅"],[195098,1,"鼏"],[195099,1,"鼖"],[195100,1,"鼻"],[195101,1,"\uD869\uDE00"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918000,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var MP=z((e31,NP)=>{e31.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var OP=z((rR1,uP)=>{var v$=wP(),w6=IP(),jP=PP(),{STATUS_MAPPING:q4}=MP();function h$(F){return/[^\x00-\x7F]/u.test(F)}function TP(F){let A=0,B=jP.length-1;while(A<=B){let D=Math.floor((A+B)/2),X=jP[D],Z=Array.isArray(X[0])?X[0][0]:X[0],J=Array.isArray(X[0])?X[0][1]:X[0];if(Z<=F&&J>=F)return X.slice(1);else if(Z>F)B=D-1;else A=D+1}return null}function A41(F,{transitionalProcessing:A}){let B="";for(let D of F){let[X,Z]=TP(D.codePointAt(0));switch(X){case q4.disallowed:B+=D;break;case q4.ignored:break;case q4.mapped:if(A&&D==="ẞ")B+="ss";else B+=Z;break;case q4.deviation:if(A)B+=Z;else B+=D;break;case q4.valid:B+=D;break}}return B}function B41(F,{checkHyphens:A,checkBidi:B,checkJoiners:D,transitionalProcessing:X,useSTD3ASCIIRules:Z,isBidi:J}){if(F.length===0)return!0;if(F.normalize("NFC")!==F)return!1;let Y=Array.from(F);if(A){if(Y[2]==="-"&&Y[3]==="-"||(F.startsWith("-")||F.endsWith("-")))return!1}if(!A){if(F.startsWith("xn--"))return!1}if(F.includes("."))return!1;if(w6.combiningMarks.test(Y[0]))return!1;for(let $ of Y){let G=$.codePointAt(0),[E]=TP(G);if(X){if(E!==q4.valid)return!1}else if(E!==q4.valid&&E!==q4.deviation)return!1;if(Z&&G<=127){if(!/^(?:[a-z]|[0-9]|-)$/u.test($))return!1}}if(D){let $=0;for(let[G,E]of Y.entries())if(E==="‌"||E==="‍"){if(G>0){if(w6.combiningClassVirama.test(Y[G-1]))continue;if(E==="‌"){let C=Y.indexOf("‌",G+1),W=C<0?Y.slice($):Y.slice($,C);if(w6.validZWNJ.test(W.join(""))){$=G+1;continue}}}return!1}}if(B&&J){let $;if(w6.bidiS1LTR.test(Y[0]))$=!1;else if(w6.bidiS1RTL.test(Y[0]))$=!0;else return!1;if($){if(!w6.bidiS2.test(F)||!w6.bidiS3.test(F)||w6.bidiS4EN.test(F)&&w6.bidiS4AN.test(F))return!1}else if(!w6.bidiS5.test(F)||!w6.bidiS6.test(F))return!1}return!0}function D41(F){let A=F.map((B)=>{if(B.startsWith("xn--"))try{return v$.decode(B.substring(4))}catch{return""}return B}).join(".");return w6.bidiDomain.test(A)}function kP(F,A){let B=A41(F,A);B=B.normalize("NFC");let D=B.split("."),X=D41(D),Z=!1;for(let[J,Y]of D.entries()){let $=Y,G=A.transitionalProcessing;if($.startsWith("xn--")){if(h$($)){Z=!0;continue}try{$=v$.decode($.substring(4))}catch{if(!A.ignoreInvalidPunycode){Z=!0;continue}}if(D[J]=$,$===""||!h$($))Z=!0;G=!1}if(Z)continue;if(!B41($,{...A,transitionalProcessing:G,isBidi:X}))Z=!0}return{string:D.join("."),error:Z}}function X41(F,{checkHyphens:A=!1,checkBidi:B=!1,checkJoiners:D=!1,useSTD3ASCIIRules:X=!1,verifyDNSLength:Z=!1,transitionalProcessing:J=!1,ignoreInvalidPunycode:Y=!1}={}){let $=kP(F,{checkHyphens:A,checkBidi:B,checkJoiners:D,useSTD3ASCIIRules:X,transitionalProcessing:J,ignoreInvalidPunycode:Y}),G=$.string.split(".");if(G=G.map((E)=>{if(h$(E))try{return`xn--${v$.encode(E)}`}catch{$.error=!0}return E}),Z){let E=G.join(".").length;if(E>253||E===0)$.error=!0;for(let C=0;C<G.length;++C)if(G[C].length>63||G[C].length===0){$.error=!0;break}}if($.error)return null;return G.join(".")}function Z41(F,{checkHyphens:A=!1,checkBidi:B=!1,checkJoiners:D=!1,useSTD3ASCIIRules:X=!1,transitionalProcessing:Z=!1,ignoreInvalidPunycode:J=!1}={}){let Y=kP(F,{checkHyphens:A,checkBidi:B,checkJoiners:D,useSTD3ASCIIRules:X,transitionalProcessing:Z,ignoreInvalidPunycode:J});return{domain:Y.string,error:Y.error}}uP.exports={toASCII:X41,toUnicode:Z41}});var d$=z((tR1,xP)=>{function m$(F){return F>=48&&F<=57}function SP(F){return F>=65&&F<=90||F>=97&&F<=122}function J41(F){return SP(F)||m$(F)}function Y41(F){return m$(F)||F>=65&&F<=70||F>=97&&F<=102}xP.exports={isASCIIDigit:m$,isASCIIAlpha:SP,isASCIIAlphanumeric:J41,isASCIIHex:Y41}});var uB=z((oR1,_P)=>{var $41=new TextEncoder,G41=new TextDecoder("utf-8",{ignoreBOM:!0});function E41(F){return $41.encode(F)}function C41(F){return G41.decode(F)}_P.exports={utf8Encode:E41,utf8DecodeWithoutBOM:C41}});var OB=z((eR1,mP)=>{var{isASCIIHex:fP}=d$(),{utf8Encode:gP}=uB();function M1(F){return F.codePointAt(0)}function W41(F){let A=F.toString(16).toUpperCase();if(A.length===1)A=`0${A}`;return`%${A}`}function bP(F){let A=new Uint8Array(F.byteLength),B=0;for(let D=0;D<F.byteLength;++D){let X=F[D];if(X!==37)A[B++]=X;else if(X===37&&(!fP(F[D+1])||!fP(F[D+2])))A[B++]=X;else{let Z=parseInt(String.fromCodePoint(F[D+1],F[D+2]),16);A[B++]=Z,D+=2}}return A.slice(0,B)}function H41(F){let A=gP(F);return bP(A)}function c$(F){return F<=31||F>126}var q41=new Set([M1(" "),M1('"'),M1("<"),M1(">"),M1("`")]);function z41(F){return c$(F)||q41.has(F)}var Q41=new Set([M1(" "),M1('"'),M1("#"),M1("<"),M1(">")]);function l$(F){return c$(F)||Q41.has(F)}function K41(F){return l$(F)||F===M1("'")}var U41=new Set([M1("?"),M1("`"),M1("{"),M1("}"),M1("^")]);function yP(F){return l$(F)||U41.has(F)}var V41=new Set([M1("/"),M1(":"),M1(";"),M1("="),M1("@"),M1("["),M1("\\"),M1("]"),M1("|")]);function hP(F){return yP(F)||V41.has(F)}var L41=new Set([M1("$"),M1("%"),M1("&"),M1("+"),M1(",")]);function w41(F){return hP(F)||L41.has(F)}var R41=new Set([M1("!"),M1("'"),M1("("),M1(")"),M1("~")]);function I41(F){return w41(F)||R41.has(F)}function vP(F,A){let B=gP(F),D="";for(let X of B)if(!A(X))D+=String.fromCharCode(X);else D+=W41(X);return D}function P41(F,A){return vP(String.fromCodePoint(F),A)}function N41(F,A,B=!1){let D="";for(let X of F)if(B&&X===" ")D+="+";else D+=vP(X,A);return D}mP.exports={isC0ControlPercentEncode:c$,isFragmentPercentEncode:z41,isQueryPercentEncode:l$,isSpecialQueryPercentEncode:K41,isPathPercentEncode:yP,isUserinfoPercentEncode:hP,isURLEncodedPercentEncode:I41,percentDecodeString:H41,percentDecodeBytes:bP,utf8PercentEncodeString:N41,utf8PercentEncodeCodePoint:P41}});var r$=z((o41,k2)=>{var M41=OP(),o0=d$(),{utf8DecodeWithoutBOM:j41}=uB(),{percentDecodeString:T41,utf8PercentEncodeCodePoint:xB,utf8PercentEncodeString:_B,isC0ControlPercentEncode:iP,isFragmentPercentEncode:k41,isQueryPercentEncode:u41,isSpecialQueryPercentEncode:O41,isPathPercentEncode:S41,isUserinfoPercentEncode:n$}=OB();function c(F){return F.codePointAt(0)}var nP={ftp:21,file:null,http:80,https:443,ws:80,wss:443},z1=Symbol("failure");function dP(F){return[...F].length}function cP(F,A){let B=F[A];return isNaN(B)?void 0:String.fromCodePoint(B)}function lP(F){return F==="."||F.toLowerCase()==="%2e"}function x41(F){return F=F.toLowerCase(),F===".."||F==="%2e."||F===".%2e"||F==="%2e%2e"}function _41(F,A){return o0.isASCIIAlpha(F)&&(A===c(":")||A===c("|"))}function aP(F){return F.length===2&&o0.isASCIIAlpha(F.codePointAt(0))&&(F[1]===":"||F[1]==="|")}function f41(F){return F.length===2&&o0.isASCIIAlpha(F.codePointAt(0))&&F[1]===":"}function sP(F){return F.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function g41(F){return sP(F)||F.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function SB(F){return nP[F]!==void 0}function t0(F){return SB(F.scheme)}function p$(F){return!SB(F.scheme)}function rP(F){return nP[F]}function tP(F){if(F==="")return z1;let A=10;if(F.length>=2&&F.charAt(0)==="0"&&F.charAt(1).toLowerCase()==="x")F=F.substring(2),A=16;else if(F.length>=2&&F.charAt(0)==="0")F=F.substring(1),A=8;if(F==="")return 0;let B=/[^0-7]/u;if(A===10)B=/[^0-9]/u;if(A===16)B=/[^0-9A-Fa-f]/u;if(B.test(F))return z1;return parseInt(F,A)}function b41(F){let A=F.split(".");if(A[A.length-1]===""){if(A.length>1)A.pop()}if(A.length>4)return z1;let B=[];for(let Z of A){let J=tP(Z);if(J===z1)return z1;B.push(J)}for(let Z=0;Z<B.length-1;++Z)if(B[Z]>255)return z1;if(B[B.length-1]>=256**(5-B.length))return z1;let D=B.pop(),X=0;for(let Z of B)D+=Z*256**(3-X),++X;return D}function y41(F){let A="",B=F;for(let D=1;D<=4;++D){if(A=String(B%256)+A,D!==4)A=`.${A}`;B=Math.floor(B/256)}return A}function h41(F){let A=[0,0,0,0,0,0,0,0],B=0,D=null,X=0;if(F=Array.from(F,(Z)=>Z.codePointAt(0)),F[X]===c(":")){if(F[X+1]!==c(":"))return z1;X+=2,++B,D=B}while(X<F.length){if(B===8)return z1;if(F[X]===c(":")){if(D!==null)return z1;++X,++B,D=B;continue}let Z=0,J=0;while(J<4&&o0.isASCIIHex(F[X]))Z=Z*16+parseInt(cP(F,X),16),++X,++J;if(F[X]===c(".")){if(J===0)return z1;if(X-=J,B>6)return z1;let Y=0;while(F[X]!==void 0){let $=null;if(Y>0)if(F[X]===c(".")&&Y<4)++X;else return z1;if(!o0.isASCIIDigit(F[X]))return z1;while(o0.isASCIIDigit(F[X])){let G=parseInt(cP(F,X));if($===null)$=G;else if($===0)return z1;else $=$*10+G;if($>255)return z1;++X}if(A[B]=A[B]*256+$,++Y,Y===2||Y===4)++B}if(Y!==4)return z1;break}else if(F[X]===c(":")){if(++X,F[X]===void 0)return z1}else if(F[X]!==void 0)return z1;A[B]=Z,++B}if(D!==null){let Z=B-D;B=7;while(B!==0&&Z>0){let J=A[D+Z-1];A[D+Z-1]=A[B],A[B]=J,--B,--Z}}else if(D===null&&B!==8)return z1;return A}function v41(F){let A="",B=c41(F),D=!1;for(let X=0;X<=7;++X){if(D&&F[X]===0)continue;else if(D)D=!1;if(B===X){A+=X===0?"::":":",D=!0;continue}if(A+=F[X].toString(16),X!==7)A+=":"}return A}function i$(F,A=!1){if(F[0]==="["){if(F[F.length-1]!=="]")return z1;return h41(F.substring(1,F.length-1))}if(A)return d41(F);let B=j41(T41(F)),D=l41(B);if(D===z1)return z1;if(m41(D))return b41(D);return D}function m41(F){let A=F.split(".");if(A[A.length-1]===""){if(A.length===1)return!1;A.pop()}let B=A[A.length-1];if(tP(B)!==z1)return!0;if(/^[0-9]+$/u.test(B))return!0;return!1}function d41(F){if(sP(F))return z1;return _B(F,iP)}function c41(F){let A=null,B=1,D=null,X=0;for(let Z=0;Z<F.length;++Z)if(F[Z]!==0){if(X>B)A=D,B=X;D=null,X=0}else{if(D===null)D=Z;++X}if(X>B)return D;return A}function a$(F){if(typeof F==="number")return y41(F);if(F instanceof Array)return`[${v41(F)}]`;return F}function l41(F,A=!1){let B=M41.toASCII(F,{checkHyphens:A,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:A,transitionalProcessing:!1,verifyDNSLength:A,ignoreInvalidPunycode:!1});if(B===null)return z1;if(!A){if(B==="")return z1;if(g41(B))return z1}return B}function p41(F){let A=0,B=F.length;for(;A<B;++A)if(F.charCodeAt(A)>32)break;for(;B>A;--B)if(F.charCodeAt(B-1)>32)break;return F.substring(A,B)}function i41(F){return F.replace(/\u0009|\u000A|\u000D/ug,"")}function oP(F){let{path:A}=F;if(A.length===0)return;if(F.scheme==="file"&&A.length===1&&a41(A[0]))return;A.pop()}function eP(F){return F.username!==""||F.password!==""}function n41(F){return F.host===null||F.host===""||F.scheme==="file"}function y5(F){return typeof F.path==="string"}function a41(F){return/^[A-Za-z]:$/u.test(F)}function q0(F,A,B,D,X){if(this.pointer=0,this.input=F,this.base=A||null,this.encodingOverride=B||"utf-8",this.stateOverride=X,this.url=D,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let J=p41(this.input);if(J!==this.input)this.parseError=!0;this.input=J}let Z=i41(this.input);if(Z!==this.input)this.parseError=!0;this.input=Z,this.state=X||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,(J)=>J.codePointAt(0));for(;this.pointer<=this.input.length;++this.pointer){let J=this.input[this.pointer],Y=isNaN(J)?void 0:String.fromCodePoint(J),$=this[`parse ${this.state}`](J,Y);if(!$)break;else if($===z1){this.failure=!0;break}}}q0.prototype["parse scheme start"]=function F(A,B){if(o0.isASCIIAlpha(A))this.buffer+=B.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,z1;return!0};q0.prototype["parse scheme"]=function F(A,B){if(o0.isASCIIAlphanumeric(A)||A===c("+")||A===c("-")||A===c("."))this.buffer+=B.toLowerCase();else if(A===c(":")){if(this.stateOverride){if(t0(this.url)&&!SB(this.buffer))return!1;if(!t0(this.url)&&SB(this.buffer))return!1;if((eP(this.url)||this.url.port!==null)&&this.buffer==="file")return!1;if(this.url.scheme==="file"&&this.url.host==="")return!1}if(this.url.scheme=this.buffer,this.stateOverride){if(this.url.port===rP(this.url.scheme))this.url.port=null;return!1}if(this.buffer="",this.url.scheme==="file"){if(this.input[this.pointer+1]!==c("/")||this.input[this.pointer+2]!==c("/"))this.parseError=!0;this.state="file"}else if(t0(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme)this.state="special relative or authority";else if(t0(this.url))this.state="special authority slashes";else if(this.input[this.pointer+1]===c("/"))this.state="path or authority",++this.pointer;else this.url.path="",this.state="opaque path"}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,z1;return!0};q0.prototype["parse no scheme"]=function F(A){if(this.base===null||y5(this.base)&&A!==c("#"))return z1;else if(y5(this.base)&&A===c("#"))this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment";else if(this.base.scheme==="file")this.state="file",--this.pointer;else this.state="relative",--this.pointer;return!0};q0.prototype["parse special relative or authority"]=function F(A){if(A===c("/")&&this.input[this.pointer+1]===c("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="relative",--this.pointer;return!0};q0.prototype["parse path or authority"]=function F(A){if(A===c("/"))this.state="authority";else this.state="path",--this.pointer;return!0};q0.prototype["parse relative"]=function F(A){if(this.url.scheme=this.base.scheme,A===c("/"))this.state="relative slash";else if(t0(this.url)&&A===c("\\"))this.parseError=!0,this.state="relative slash";else if(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,A===c("?"))this.url.query="",this.state="query";else if(A===c("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(A))this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer;return!0};q0.prototype["parse relative slash"]=function F(A){if(t0(this.url)&&(A===c("/")||A===c("\\"))){if(A===c("\\"))this.parseError=!0;this.state="special authority ignore slashes"}else if(A===c("/"))this.state="authority";else this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer;return!0};q0.prototype["parse special authority slashes"]=function F(A){if(A===c("/")&&this.input[this.pointer+1]===c("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="special authority ignore slashes",--this.pointer;return!0};q0.prototype["parse special authority ignore slashes"]=function F(A){if(A!==c("/")&&A!==c("\\"))this.state="authority",--this.pointer;else this.parseError=!0;return!0};q0.prototype["parse authority"]=function F(A,B){if(A===c("@")){if(this.parseError=!0,this.atFlag)this.buffer=`%40${this.buffer}`;this.atFlag=!0;let D=dP(this.buffer);for(let X=0;X<D;++X){let Z=this.buffer.codePointAt(X);if(Z===c(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let J=xB(Z,n$);if(this.passwordTokenSeenFlag)this.url.password+=J;else this.url.username+=J}this.buffer=""}else if(isNaN(A)||A===c("/")||A===c("?")||A===c("#")||t0(this.url)&&A===c("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,z1;this.pointer-=dP(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=B;return!0};q0.prototype["parse hostname"]=q0.prototype["parse host"]=function F(A,B){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(A===c(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,z1;if(this.stateOverride==="hostname")return!1;let D=i$(this.buffer,p$(this.url));if(D===z1)return z1;this.url.host=D,this.buffer="",this.state="port"}else if(isNaN(A)||A===c("/")||A===c("?")||A===c("#")||t0(this.url)&&A===c("\\")){if(--this.pointer,t0(this.url)&&this.buffer==="")return this.parseError=!0,z1;else if(this.stateOverride&&this.buffer===""&&(eP(this.url)||this.url.port!==null))return this.parseError=!0,!1;let D=i$(this.buffer,p$(this.url));if(D===z1)return z1;if(this.url.host=D,this.buffer="",this.state="path start",this.stateOverride)return!1}else{if(A===c("["))this.arrFlag=!0;else if(A===c("]"))this.arrFlag=!1;this.buffer+=B}return!0};q0.prototype["parse port"]=function F(A,B){if(o0.isASCIIDigit(A))this.buffer+=B;else if(isNaN(A)||A===c("/")||A===c("?")||A===c("#")||t0(this.url)&&A===c("\\")||this.stateOverride){if(this.buffer!==""){let D=parseInt(this.buffer);if(D>65535)return this.parseError=!0,z1;this.url.port=D===rP(this.url.scheme)?null:D,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,z1;return!0};var s41=new Set([c("/"),c("\\"),c("?"),c("#")]);function FN(F,A){let B=F.length-A;return B>=2&&_41(F[A],F[A+1])&&(B===2||s41.has(F[A+2]))}q0.prototype["parse file"]=function F(A){if(this.url.scheme="file",this.url.host="",A===c("/")||A===c("\\")){if(A===c("\\"))this.parseError=!0;this.state="file slash"}else if(this.base!==null&&this.base.scheme==="file"){if(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,A===c("?"))this.url.query="",this.state="query";else if(A===c("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(A)){if(this.url.query=null,!FN(this.input,this.pointer))oP(this.url);else this.parseError=!0,this.url.path=[];this.state="path",--this.pointer}}else this.state="path",--this.pointer;return!0};q0.prototype["parse file slash"]=function F(A){if(A===c("/")||A===c("\\")){if(A===c("\\"))this.parseError=!0;this.state="file host"}else{if(this.base!==null&&this.base.scheme==="file"){if(!FN(this.input,this.pointer)&&f41(this.base.path[0]))this.url.path.push(this.base.path[0]);this.url.host=this.base.host}this.state="path",--this.pointer}return!0};q0.prototype["parse file host"]=function F(A,B){if(isNaN(A)||A===c("/")||A===c("\\")||A===c("?")||A===c("#"))if(--this.pointer,!this.stateOverride&&aP(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let D=i$(this.buffer,p$(this.url));if(D===z1)return z1;if(D==="localhost")D="";if(this.url.host=D,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=B;return!0};q0.prototype["parse path start"]=function F(A){if(t0(this.url)){if(A===c("\\"))this.parseError=!0;if(this.state="path",A!==c("/")&&A!==c("\\"))--this.pointer}else if(!this.stateOverride&&A===c("?"))this.url.query="",this.state="query";else if(!this.stateOverride&&A===c("#"))this.url.fragment="",this.state="fragment";else if(A!==void 0){if(this.state="path",A!==c("/"))--this.pointer}else if(this.stateOverride&&this.url.host===null)this.url.path.push("");return!0};q0.prototype["parse path"]=function F(A){if(isNaN(A)||A===c("/")||t0(this.url)&&A===c("\\")||!this.stateOverride&&(A===c("?")||A===c("#"))){if(t0(this.url)&&A===c("\\"))this.parseError=!0;if(x41(this.buffer)){if(oP(this.url),A!==c("/")&&!(t0(this.url)&&A===c("\\")))this.url.path.push("")}else if(lP(this.buffer)&&A!==c("/")&&!(t0(this.url)&&A===c("\\")))this.url.path.push("");else if(!lP(this.buffer)){if(this.url.scheme==="file"&&this.url.path.length===0&&aP(this.buffer))this.buffer=`${this.buffer[0]}:`;this.url.path.push(this.buffer)}if(this.buffer="",A===c("?"))this.url.query="",this.state="query";if(A===c("#"))this.url.fragment="",this.state="fragment"}else{if(A===c("%")&&(!o0.isASCIIHex(this.input[this.pointer+1])||!o0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=xB(A,S41)}return!0};q0.prototype["parse opaque path"]=function F(A){if(A===c("?"))this.url.query="",this.state="query";else if(A===c("#"))this.url.fragment="",this.state="fragment";else if(A===c(" ")){let B=this.input[this.pointer+1];if(B===c("?")||B===c("#"))this.url.path+="%20";else this.url.path+=" "}else{if(!isNaN(A)&&A!==c("%"))this.parseError=!0;if(A===c("%")&&(!o0.isASCIIHex(this.input[this.pointer+1])||!o0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;if(!isNaN(A))this.url.path+=xB(A,iP)}return!0};q0.prototype["parse query"]=function F(A,B){if(!t0(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")this.encodingOverride="utf-8";if(!this.stateOverride&&A===c("#")||isNaN(A)){let D=t0(this.url)?O41:u41;if(this.url.query+=_B(this.buffer,D),this.buffer="",A===c("#"))this.url.fragment="",this.state="fragment"}else if(!isNaN(A)){if(A===c("%")&&(!o0.isASCIIHex(this.input[this.pointer+1])||!o0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=B}return!0};q0.prototype["parse fragment"]=function F(A){if(!isNaN(A)){if(A===c("%")&&(!o0.isASCIIHex(this.input[this.pointer+1])||!o0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.url.fragment+=xB(A,k41)}return!0};function r41(F,A){let B=`${F.scheme}:`;if(F.host!==null){if(B+="//",F.username!==""||F.password!==""){if(B+=F.username,F.password!=="")B+=`:${F.password}`;B+="@"}if(B+=a$(F.host),F.port!==null)B+=`:${F.port}`}if(F.host===null&&!y5(F)&&F.path.length>1&&F.path[0]==="")B+="/.";if(B+=s$(F),F.query!==null)B+=`?${F.query}`;if(!A&&F.fragment!==null)B+=`#${F.fragment}`;return B}function t41(F){let A=`${F.scheme}://`;if(A+=a$(F.host),F.port!==null)A+=`:${F.port}`;return A}function s$(F){if(y5(F))return F.path;let A="";for(let B of F.path)A+=`/${B}`;return A}o41.serializeURL=r41;o41.serializePath=s$;o41.serializeURLOrigin=function(F){switch(F.scheme){case"blob":{let A=o41.parseURL(s$(F));if(A===null)return"null";if(A.scheme!=="http"&&A.scheme!=="https")return"null";return o41.serializeURLOrigin(A)}case"ftp":case"http":case"https":case"ws":case"wss":return t41({scheme:F.scheme,host:F.host,port:F.port});case"file":return"null";default:return"null"}};o41.basicURLParse=function(F,A){if(A===void 0)A={};let B=new q0(F,A.baseURL,A.encodingOverride,A.url,A.stateOverride);if(B.failure)return null;return B.url};o41.setTheUsername=function(F,A){F.username=_B(A,n$)};o41.setThePassword=function(F,A){F.password=_B(A,n$)};o41.serializeHost=a$;o41.cannotHaveAUsernamePasswordPort=n41;o41.hasAnOpaquePath=y5;o41.serializeInteger=function(F){return String(F)};o41.parseURL=function(F,A){if(A===void 0)A={};return o41.basicURLParse(F,{baseURL:A.baseURL,encodingOverride:A.encodingOverride})}});var t$=z((FI1,$N)=>{var{utf8Encode:$91,utf8DecodeWithoutBOM:BN}=uB(),{percentDecodeBytes:DN,utf8PercentEncodeString:XN,isURLEncodedPercentEncode:ZN}=OB();function JN(F){return F.codePointAt(0)}function G91(F){let A=W91(F,JN("&")),B=[];for(let D of A){if(D.length===0)continue;let X,Z,J=D.indexOf(JN("="));if(J>=0)X=D.slice(0,J),Z=D.slice(J+1);else X=D,Z=new Uint8Array(0);X=YN(X,43,32),Z=YN(Z,43,32);let Y=BN(DN(X)),$=BN(DN(Z));B.push([Y,$])}return B}function E91(F){return G91($91(F))}function C91(F){let A="";for(let[B,D]of F.entries()){let X=XN(D[0],ZN,!0),Z=XN(D[1],ZN,!0);if(B!==0)A+="&";A+=`${X}=${Z}`}return A}function W91(F,A){let B=[],D=0,X=F.indexOf(A);while(X>=0)B.push(F.slice(D,X)),D=X+1,X=F.indexOf(A,D);if(D!==F.length)B.push(F.slice(D));return B}function YN(F,A,B){let D=F.indexOf(A);while(D>=0)F[D]=B,D=F.indexOf(A,D+1);return F}$N.exports={parseUrlencodedString:E91,serializeUrlencoded:C91}});var EN=z((H91)=>{var GN=jB(),fB=kB();H91.convert=(F,A,{context:B="The provided value"}={})=>{if(typeof A!=="function")throw new F.TypeError(B+" is not a function");function D(...X){let Z=fB.tryWrapperForImpl(this),J;for(let Y=0;Y<X.length;Y++)X[Y]=fB.tryWrapperForImpl(X[Y]);return J=Reflect.apply(A,Z,X),J=GN.any(J,{context:B,globals:F}),J}return D.construct=(...X)=>{for(let J=0;J<X.length;J++)X[J]=fB.tryWrapperForImpl(X[J]);let Z=Reflect.construct(A,X);return Z=GN.any(Z,{context:B,globals:F}),Z},D[fB.wrapperSymbol]=A,D.objectReference=A,D}});var CN=z((z91)=>{var o$=t$();z91.implementation=class F{constructor(A,B,{doNotStripQMark:D=!1}){let X=B[0];if(this._list=[],this._url=null,!D&&typeof X==="string"&&X[0]==="?")X=X.slice(1);if(Array.isArray(X))for(let Z of X){if(Z.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([Z[0],Z[1]])}else if(typeof X==="object"&&Object.getPrototypeOf(X)===null)for(let Z of Object.keys(X)){let J=X[Z];this._list.push([Z,J])}else this._list=o$.parseUrlencodedString(X)}_updateSteps(){if(this._url!==null){let A=o$.serializeUrlencoded(this._list);if(A==="")A=null;this._url._url.query=A}}get size(){return this._list.length}append(A,B){this._list.push([A,B]),this._updateSteps()}delete(A,B){let D=0;while(D<this._list.length)if(this._list[D][0]===A&&(B===void 0||this._list[D][1]===B))this._list.splice(D,1);else D++;this._updateSteps()}get(A){for(let B of this._list)if(B[0]===A)return B[1];return null}getAll(A){let B=[];for(let D of this._list)if(D[0]===A)B.push(D[1]);return B}has(A,B){for(let D of this._list)if(D[0]===A&&(B===void 0||D[1]===B))return!0;return!1}set(A,B){let D=!1,X=0;while(X<this._list.length)if(this._list[X][0]===A)if(D)this._list.splice(X,1);else D=!0,this._list[X][1]=B,X++;else X++;if(!D)this._list.push([A,B]);this._updateSteps()}sort(){this._list.sort((A,B)=>{if(A[0]<B[0])return-1;if(A[0]>B[0])return 1;return 0}),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return o$.serializeUrlencoded(this._list)}}});var FG=z((V91)=>{var y2=jB(),i1=kB(),K91=EN(),WN=i1.newObjectInRealm,P0=i1.implSymbol,HN=i1.ctorRegistrySymbol;V91.is=(F)=>{return i1.isObject(F)&&i1.hasOwn(F,P0)&&F[P0]instanceof z4.implementation};V91.isImpl=(F)=>{return i1.isObject(F)&&F instanceof z4.implementation};V91.convert=(F,A,{context:B="The provided value"}={})=>{if(V91.is(A))return i1.implForWrapper(A);throw new F.TypeError(`${B} is not of type 'URLSearchParams'.`)};V91.createDefaultIterator=(F,A,B)=>{let X=F[HN]["URLSearchParams Iterator"],Z=Object.create(X);return Object.defineProperty(Z,i1.iterInternalSymbol,{value:{target:A,kind:B,index:0},configurable:!0}),Z};function qN(F,A){let B;if(A!==void 0)B=A.prototype;if(!i1.isObject(B))B=F[HN].URLSearchParams.prototype;return Object.create(B)}V91.create=(F,A,B)=>{let D=qN(F);return V91.setup(D,F,A,B)};V91.createImpl=(F,A,B)=>{let D=V91.create(F,A,B);return i1.implForWrapper(D)};V91._internalSetup=(F,A)=>{};V91.setup=(F,A,B=[],D={})=>{if(D.wrapper=F,V91._internalSetup(F,A),Object.defineProperty(F,P0,{value:new z4.implementation(A,B,D),configurable:!0}),F[P0][i1.wrapperSymbol]=F,z4.init)z4.init(F[P0]);return F};V91.new=(F,A)=>{let B=qN(F,A);if(V91._internalSetup(B,F),Object.defineProperty(B,P0,{value:Object.create(z4.implementation.prototype),configurable:!0}),B[P0][i1.wrapperSymbol]=B,z4.init)z4.init(B[P0]);return B[P0]};var U91=new Set(["Window","Worker"]);V91.install=(F,A)=>{if(!A.some((X)=>U91.has(X)))return;let B=i1.initCtorRegistry(F);class D{constructor(){let X=[];{let Z=arguments[0];if(Z!==void 0)if(i1.isObject(Z))if(Z[Symbol.iterator]!==void 0)if(!i1.isObject(Z))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else{let J=[],Y=Z;for(let $ of Y){if(!i1.isObject($))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");else{let G=[],E=$;for(let C of E)C=y2.USVString(C,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:F}),G.push(C);$=G}J.push($)}Z=J}else if(!i1.isObject(Z))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else{let J=Object.create(null);for(let Y of Reflect.ownKeys(Z)){let $=Object.getOwnPropertyDescriptor(Z,Y);if($&&$.enumerable){let G=Y;G=y2.USVString(G,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:F});let E=Z[Y];E=y2.USVString(E,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:F}),J[G]=E}}Z=J}else Z=y2.USVString(Z,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:F});else Z="";X.push(Z)}return V91.setup(Object.create(new.target.prototype),F,X)}append(X,Z){let J=this!==null&&this!==void 0?this:F;if(!V91.is(J))throw new F.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new F.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let Y=[];{let $=arguments[0];$=y2.USVString($,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:F}),Y.push($)}{let $=arguments[1];$=y2.USVString($,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:F}),Y.push($)}return i1.tryWrapperForImpl(J[P0].append(...Y))}delete(X){let Z=this!==null&&this!==void 0?this:F;if(!V91.is(Z))throw new F.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let J=[];{let Y=arguments[0];Y=y2.USVString(Y,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:F}),J.push(Y)}{let Y=arguments[1];if(Y!==void 0)Y=y2.USVString(Y,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:F});J.push(Y)}return i1.tryWrapperForImpl(Z[P0].delete(...J))}get(X){let Z=this!==null&&this!==void 0?this:F;if(!V91.is(Z))throw new F.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let J=[];{let Y=arguments[0];Y=y2.USVString(Y,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:F}),J.push(Y)}return Z[P0].get(...J)}getAll(X){let Z=this!==null&&this!==void 0?this:F;if(!V91.is(Z))throw new F.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let J=[];{let Y=arguments[0];Y=y2.USVString(Y,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:F}),J.push(Y)}return i1.tryWrapperForImpl(Z[P0].getAll(...J))}has(X){let Z=this!==null&&this!==void 0?this:F;if(!V91.is(Z))throw new F.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let J=[];{let Y=arguments[0];Y=y2.USVString(Y,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:F}),J.push(Y)}{let Y=arguments[1];if(Y!==void 0)Y=y2.USVString(Y,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:F});J.push(Y)}return Z[P0].has(...J)}set(X,Z){let J=this!==null&&this!==void 0?this:F;if(!V91.is(J))throw new F.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new F.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let Y=[];{let $=arguments[0];$=y2.USVString($,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:F}),Y.push($)}{let $=arguments[1];$=y2.USVString($,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:F}),Y.push($)}return i1.tryWrapperForImpl(J[P0].set(...Y))}sort(){let X=this!==null&&this!==void 0?this:F;if(!V91.is(X))throw new F.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return i1.tryWrapperForImpl(X[P0].sort())}toString(){let X=this!==null&&this!==void 0?this:F;if(!V91.is(X))throw new F.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return X[P0].toString()}keys(){if(!V91.is(this))throw new F.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return V91.createDefaultIterator(F,this,"key")}values(){if(!V91.is(this))throw new F.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return V91.createDefaultIterator(F,this,"value")}entries(){if(!V91.is(this))throw new F.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return V91.createDefaultIterator(F,this,"key+value")}forEach(X){if(!V91.is(this))throw new F.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");X=K91.convert(F,X,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let Z=arguments[1],J=Array.from(this[P0]),Y=0;while(Y<J.length){let[$,G]=J[Y].map(i1.tryWrapperForImpl);X.call(Z,G,$,this),J=Array.from(this[P0]),Y++}}get size(){let X=this!==null&&this!==void 0?this:F;if(!V91.is(X))throw new F.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return X[P0].size}}Object.defineProperties(D.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:D.prototype.entries,configurable:!0,writable:!0}}),B.URLSearchParams=D,B["URLSearchParams Iterator"]=Object.create(B["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),i1.define(B["URLSearchParams Iterator"],{next(){let X=this&&this[i1.iterInternalSymbol];if(!X)throw new F.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:Z,kind:J,index:Y}=X,$=Array.from(Z[P0]),G=$.length;if(Y>=G)return WN(F,{value:void 0,done:!0});let E=$[Y];return X.index=Y+1,WN(F,i1.iteratorResult(E.map(i1.tryWrapperForImpl),J))}}),Object.defineProperty(F,"URLSearchParams",{configurable:!0,writable:!0,value:D})};var z4=CN()});var UN=z((M91)=>{var d1=r$(),KN=t$(),N91=FG();M91.implementation=class F{constructor(A,[B,D]){let X=null;if(D!==void 0){if(X=d1.basicURLParse(D),X===null)throw new TypeError(`Invalid base URL: ${D}`)}let Z=d1.basicURLParse(B,{baseURL:X});if(Z===null)throw new TypeError(`Invalid URL: ${B}`);let J=Z.query!==null?Z.query:"";this._url=Z,this._query=N91.createImpl(A,[J],{doNotStripQMark:!0}),this._query._url=this}static parse(A,B,D){try{return new F(A,[B,D])}catch{return null}}static canParse(A,B){let D=null;if(B!==void 0){if(D=d1.basicURLParse(B),D===null)return!1}if(d1.basicURLParse(A,{baseURL:D})===null)return!1;return!0}get href(){return d1.serializeURL(this._url)}set href(A){let B=d1.basicURLParse(A);if(B===null)throw new TypeError(`Invalid URL: ${A}`);this._url=B,this._query._list.splice(0);let{query:D}=B;if(D!==null)this._query._list=KN.parseUrlencodedString(D)}get origin(){return d1.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(A){d1.basicURLParse(`${A}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(A){if(d1.cannotHaveAUsernamePasswordPort(this._url))return;d1.setTheUsername(this._url,A)}get password(){return this._url.password}set password(A){if(d1.cannotHaveAUsernamePasswordPort(this._url))return;d1.setThePassword(this._url,A)}get host(){let A=this._url;if(A.host===null)return"";if(A.port===null)return d1.serializeHost(A.host);return`${d1.serializeHost(A.host)}:${d1.serializeInteger(A.port)}`}set host(A){if(d1.hasAnOpaquePath(this._url))return;d1.basicURLParse(A,{url:this._url,stateOverride:"host"})}get hostname(){if(this._url.host===null)return"";return d1.serializeHost(this._url.host)}set hostname(A){if(d1.hasAnOpaquePath(this._url))return;d1.basicURLParse(A,{url:this._url,stateOverride:"hostname"})}get port(){if(this._url.port===null)return"";return d1.serializeInteger(this._url.port)}set port(A){if(d1.cannotHaveAUsernamePasswordPort(this._url))return;if(A==="")this._url.port=null;else d1.basicURLParse(A,{url:this._url,stateOverride:"port"})}get pathname(){return d1.serializePath(this._url)}set pathname(A){if(d1.hasAnOpaquePath(this._url))return;this._url.path=[],d1.basicURLParse(A,{url:this._url,stateOverride:"path start"})}get search(){if(this._url.query===null||this._url.query==="")return"";return`?${this._url.query}`}set search(A){let B=this._url;if(A===""){B.query=null,this._query._list=[];return}let D=A[0]==="?"?A.substring(1):A;B.query="",d1.basicURLParse(D,{url:B,stateOverride:"query"}),this._query._list=KN.parseUrlencodedString(D)}get searchParams(){return this._query}get hash(){if(this._url.fragment===null||this._url.fragment==="")return"";return`#${this._url.fragment}`}set hash(A){if(A===""){this._url.fragment=null;return}let B=A[0]==="#"?A.substring(1):A;this._url.fragment="",d1.basicURLParse(B,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var RN=z((u91)=>{var z2=jB(),h2=kB(),x1=h2.implSymbol,T91=h2.ctorRegistrySymbol;u91.is=(F)=>{return h2.isObject(F)&&h2.hasOwn(F,x1)&&F[x1]instanceof J3.implementation};u91.isImpl=(F)=>{return h2.isObject(F)&&F instanceof J3.implementation};u91.convert=(F,A,{context:B="The provided value"}={})=>{if(u91.is(A))return h2.implForWrapper(A);throw new F.TypeError(`${B} is not of type 'URL'.`)};function VN(F,A){let B;if(A!==void 0)B=A.prototype;if(!h2.isObject(B))B=F[T91].URL.prototype;return Object.create(B)}u91.create=(F,A,B)=>{let D=VN(F);return u91.setup(D,F,A,B)};u91.createImpl=(F,A,B)=>{let D=u91.create(F,A,B);return h2.implForWrapper(D)};u91._internalSetup=(F,A)=>{};u91.setup=(F,A,B=[],D={})=>{if(D.wrapper=F,u91._internalSetup(F,A),Object.defineProperty(F,x1,{value:new J3.implementation(A,B,D),configurable:!0}),F[x1][h2.wrapperSymbol]=F,J3.init)J3.init(F[x1]);return F};u91.new=(F,A)=>{let B=VN(F,A);if(u91._internalSetup(B,F),Object.defineProperty(B,x1,{value:Object.create(J3.implementation.prototype),configurable:!0}),B[x1][h2.wrapperSymbol]=B,J3.init)J3.init(B[x1]);return B[x1]};var k91=new Set(["Window","Worker"]);u91.install=(F,A)=>{if(!A.some((X)=>k91.has(X)))return;let B=h2.initCtorRegistry(F);class D{constructor(X){if(arguments.length<1)throw new F.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let Z=[];{let J=arguments[0];J=z2.USVString(J,{context:"Failed to construct 'URL': parameter 1",globals:F}),Z.push(J)}{let J=arguments[1];if(J!==void 0)J=z2.USVString(J,{context:"Failed to construct 'URL': parameter 2",globals:F});Z.push(J)}return u91.setup(Object.create(new.target.prototype),F,Z)}toJSON(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return X[x1].toJSON()}get href(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get href' called on an object that is not a valid instance of URL.");return X[x1].href}set href(X){let Z=this!==null&&this!==void 0?this:F;if(!u91.is(Z))throw new F.TypeError("'set href' called on an object that is not a valid instance of URL.");X=z2.USVString(X,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:F}),Z[x1].href=X}toString(){let X=this;if(!u91.is(X))throw new F.TypeError("'toString' called on an object that is not a valid instance of URL.");return X[x1].href}get origin(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get origin' called on an object that is not a valid instance of URL.");return X[x1].origin}get protocol(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return X[x1].protocol}set protocol(X){let Z=this!==null&&this!==void 0?this:F;if(!u91.is(Z))throw new F.TypeError("'set protocol' called on an object that is not a valid instance of URL.");X=z2.USVString(X,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:F}),Z[x1].protocol=X}get username(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get username' called on an object that is not a valid instance of URL.");return X[x1].username}set username(X){let Z=this!==null&&this!==void 0?this:F;if(!u91.is(Z))throw new F.TypeError("'set username' called on an object that is not a valid instance of URL.");X=z2.USVString(X,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:F}),Z[x1].username=X}get password(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get password' called on an object that is not a valid instance of URL.");return X[x1].password}set password(X){let Z=this!==null&&this!==void 0?this:F;if(!u91.is(Z))throw new F.TypeError("'set password' called on an object that is not a valid instance of URL.");X=z2.USVString(X,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:F}),Z[x1].password=X}get host(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get host' called on an object that is not a valid instance of URL.");return X[x1].host}set host(X){let Z=this!==null&&this!==void 0?this:F;if(!u91.is(Z))throw new F.TypeError("'set host' called on an object that is not a valid instance of URL.");X=z2.USVString(X,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:F}),Z[x1].host=X}get hostname(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return X[x1].hostname}set hostname(X){let Z=this!==null&&this!==void 0?this:F;if(!u91.is(Z))throw new F.TypeError("'set hostname' called on an object that is not a valid instance of URL.");X=z2.USVString(X,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:F}),Z[x1].hostname=X}get port(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get port' called on an object that is not a valid instance of URL.");return X[x1].port}set port(X){let Z=this!==null&&this!==void 0?this:F;if(!u91.is(Z))throw new F.TypeError("'set port' called on an object that is not a valid instance of URL.");X=z2.USVString(X,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:F}),Z[x1].port=X}get pathname(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return X[x1].pathname}set pathname(X){let Z=this!==null&&this!==void 0?this:F;if(!u91.is(Z))throw new F.TypeError("'set pathname' called on an object that is not a valid instance of URL.");X=z2.USVString(X,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:F}),Z[x1].pathname=X}get search(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get search' called on an object that is not a valid instance of URL.");return X[x1].search}set search(X){let Z=this!==null&&this!==void 0?this:F;if(!u91.is(Z))throw new F.TypeError("'set search' called on an object that is not a valid instance of URL.");X=z2.USVString(X,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:F}),Z[x1].search=X}get searchParams(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return h2.getSameObject(this,"searchParams",()=>{return h2.tryWrapperForImpl(X[x1].searchParams)})}get hash(){let X=this!==null&&this!==void 0?this:F;if(!u91.is(X))throw new F.TypeError("'get hash' called on an object that is not a valid instance of URL.");return X[x1].hash}set hash(X){let Z=this!==null&&this!==void 0?this:F;if(!u91.is(Z))throw new F.TypeError("'set hash' called on an object that is not a valid instance of URL.");X=z2.USVString(X,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:F}),Z[x1].hash=X}static parse(X){if(arguments.length<1)throw new F.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let Z=[];{let J=arguments[0];J=z2.USVString(J,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:F}),Z.push(J)}{let J=arguments[1];if(J!==void 0)J=z2.USVString(J,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:F});Z.push(J)}return h2.tryWrapperForImpl(J3.implementation.parse(F,...Z))}static canParse(X){if(arguments.length<1)throw new F.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let Z=[];{let J=arguments[0];J=z2.USVString(J,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:F}),Z.push(J)}{let J=arguments[1];if(J!==void 0)J=z2.USVString(J,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:F});Z.push(J)}return J3.implementation.canParse(...Z)}}if(Object.defineProperties(D.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(D,{parse:{enumerable:!0},canParse:{enumerable:!0}}),B.URL=D,Object.defineProperty(F,"URL",{configurable:!0,writable:!0,value:D}),A.includes("Window"))Object.defineProperty(F,"webkitURL",{configurable:!0,writable:!0,value:D})};var J3=UN()});var IN=z((y91)=>{var g91=RN(),b91=FG();y91.URL=g91;y91.URLSearchParams=b91});var NN=z((c91)=>{var{URL:m91,URLSearchParams:d91}=IN(),m6=r$(),PN=OB(),bB={Array,Object,Promise,String,TypeError};m91.install(bB,["Window"]);d91.install(bB,["Window"]);c91.URL=bB.URL;c91.URLSearchParams=bB.URLSearchParams;c91.parseURL=m6.parseURL;c91.basicURLParse=m6.basicURLParse;c91.serializeURL=m6.serializeURL;c91.serializePath=m6.serializePath;c91.serializeHost=m6.serializeHost;c91.serializeInteger=m6.serializeInteger;c91.serializeURLOrigin=m6.serializeURLOrigin;c91.setTheUsername=m6.setTheUsername;c91.setThePassword=m6.setThePassword;c91.cannotHaveAUsernamePasswordPort=m6.cannotHaveAUsernamePasswordPort;c91.hasAnOpaquePath=m6.hasAnOpaquePath;c91.percentDecodeString=PN.percentDecodeString;c91.percentDecodeBytes=PN.percentDecodeBytes});var jN=z((Y3)=>{var Z71=Y3&&Y3.__createBinding||(Object.create?function(F,A,B,D){if(D===void 0)D=B;var X=Object.getOwnPropertyDescriptor(A,B);if(!X||("get"in X?!A.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return A[B]}};Object.defineProperty(F,D,X)}:function(F,A,B,D){if(D===void 0)D=B;F[D]=A[B]}),J71=Y3&&Y3.__setModuleDefault||(Object.create?function(F,A){Object.defineProperty(F,"default",{enumerable:!0,value:A})}:function(F,A){F.default=A}),Y71=Y3&&Y3.__importStar||function(){var F=function(A){return F=Object.getOwnPropertyNames||function(B){var D=[];for(var X in B)if(Object.prototype.hasOwnProperty.call(B,X))D[D.length]=X;return D},F(A)};return function(A){if(A&&A.__esModule)return A;var B={};if(A!=null){for(var D=F(A),X=0;X<D.length;X++)if(D[X]!=="default")Z71(B,A,D[X])}return J71(B,A),B}}();Object.defineProperty(Y3,"__esModule",{value:!0});Y3.redactValidConnectionString=$71;Y3.redactConnectionString=G71;var MN=Y71(BG());function $71(F,A){let B=F.clone(),D=A?.replacementString??"_credentials_",X=A?.redactUsernames??!0;if((B.username||B.password)&&X)B.username=D,B.password="";else if(B.password)B.password=D;if(B.searchParams.has("authMechanismProperties")){let Z=new MN.CommaAndColonSeparatedRecord(B.searchParams.get("authMechanismProperties"));if(Z.get("AWS_SESSION_TOKEN"))Z.set("AWS_SESSION_TOKEN",D),B.searchParams.set("authMechanismProperties",Z.toString())}if(B.searchParams.has("tlsCertificateKeyFilePassword"))B.searchParams.set("tlsCertificateKeyFilePassword",D);if(B.searchParams.has("proxyUsername")&&X)B.searchParams.set("proxyUsername",D);if(B.searchParams.has("proxyPassword"))B.searchParams.set("proxyPassword",D);return B}function G71(F,A){let B=A?.replacementString??"<credentials>",D=A?.redactUsernames??!0,X;try{X=new MN.default(F)}catch{}if(X)return A={...A,replacementString:"___credentials___"},X.redact(A).toString().replace(/___credentials___/g,B);let Z=B,J=[(Y)=>Y.replace(D?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${Z}$3`),(Y)=>Y.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${Z}`),(Y)=>Y.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${Z}`),(Y)=>D?Y.replace(/(proxyUsername=)([^&]+)/gi,`$1${Z}`):Y,(Y)=>Y.replace(/(proxyPassword=)([^&]+)/gi,`$1${Z}`)];for(let Y of J)F=Y(F);return F}});var BG=z((XG)=>{Object.defineProperty(XG,"__esModule",{value:!0});XG.CommaAndColonSeparatedRecord=XG.ConnectionString=XG.redactConnectionString=void 0;var E71=NN(),TN=jN();Object.defineProperty(XG,"redactConnectionString",{enumerable:!0,get:function(){return TN.redactConnectionString}});var h5="__this_is_a_placeholder__";function C71(F){return F.startsWith("mongodb://")||F.startsWith("mongodb+srv://")}var W71=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/;class DG extends Map{delete(F){return super.delete(this._normalizeKey(F))}get(F){return super.get(this._normalizeKey(F))}has(F){return super.has(this._normalizeKey(F))}set(F,A){return super.set(this._normalizeKey(F),A)}_normalizeKey(F){F=`${F}`;for(let A of this.keys())if(A.toLowerCase()===F.toLowerCase()){F=A;break}return F}}function H71(F){return class A extends F{append(B,D){return super.append(this._normalizeKey(B),D)}delete(B){return super.delete(this._normalizeKey(B))}get(B){return super.get(this._normalizeKey(B))}getAll(B){return super.getAll(this._normalizeKey(B))}has(B){return super.has(this._normalizeKey(B))}set(B,D){return super.set(this._normalizeKey(B),D)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(B){return DG.prototype._normalizeKey.call(this,B)}}}class kN extends E71.URL{}class $3 extends Error{get name(){return"MongoParseError"}}class v5 extends kN{_hosts;constructor(F,A={}){let{looseValidation:B}=A;if(!B&&!C71(F))throw new $3('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let D=F.match(W71);if(!D)throw new $3(`Invalid connection string "${F}"`);let{protocol:X,username:Z,password:J,hosts:Y,rest:$}=D.groups??{};if(!B){if(!X||!Y)throw new $3(`Protocol and host list are required in "${F}"`);try{decodeURIComponent(Z??""),decodeURIComponent(J??"")}catch(C){throw new $3(C.message)}let E=/[:/?#[\]@]/gi;if(Z?.match(E))throw new $3(`Username contains unescaped characters ${Z}`);if(!Z||!J){let C=F.replace(`${X}://`,"");if(C.startsWith("@")||C.startsWith(":"))throw new $3("URI contained empty userinfo section")}if(J?.match(E))throw new $3("Password contains unescaped characters")}let G="";if(typeof Z==="string")G+=Z;if(typeof J==="string")G+=`:${J}`;if(G)G+="@";try{super(`${X.toLowerCase()}://${G}${h5}${$}`)}catch(E){if(B)new v5(F,{...A,looseValidation:!1});if(typeof E.message==="string")E.message=E.message.replace(h5,Y);throw E}if(this._hosts=Y.split(","),!B){if(this.isSRV&&this.hosts.length!==1)throw new $3("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some((E)=>E.includes(":")))throw new $3("mongodb+srv URI cannot have port number")}if(!this.pathname)this.pathname="/";Object.setPrototypeOf(this.searchParams,H71(this.searchParams.constructor).prototype)}get host(){return h5}set host(F){throw new Error("No single host for connection string")}get hostname(){return h5}set hostname(F){throw new Error("No single host for connection string")}get port(){return""}set port(F){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(F){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(F){this._hosts=F}toString(){return super.toString().replace(h5,this.hosts.join(","))}clone(){return new v5(this.toString(),{looseValidation:!0})}redact(F){return TN.redactValidConnectionString(this,F)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:F,origin:A,protocol:B,username:D,password:X,hosts:Z,pathname:J,search:Y,searchParams:$,hash:G}=this;return{href:F,origin:A,protocol:B,username:D,password:X,hosts:Z,pathname:J,search:Y,searchParams:$,hash:G}}}XG.ConnectionString=v5;class uN extends DG{constructor(F){super();for(let A of(F??"").split(",")){if(!A)continue;let B=A.indexOf(":");if(B===-1)this.set(A,"");else this.set(A.slice(0,B),A.slice(B+1))}}toString(){return[...this].map((F)=>F.join(":")).join(",")}}XG.CommaAndColonSeparatedRecord=uN;XG.default=v5});var d5=z((hN)=>{Object.defineProperty(hN,"__esModule",{value:!0});hN.OpCompressedRequest=hN.OpMsgResponse=hN.OpMsgRequest=hN.DocumentSequence=hN.OpReply=hN.OpQueryRequest=void 0;var b7=$1(),m5=l(),ZG=c5(),f7=P3(),g7=0,Q71=2,K71=4,U71=8,V71=16,L71=32,w71=64,R71=128,I71=1,P71=2,N71=4,M71=8,j71=b7.BSON.onDemand.ByteUtils.encodeUTF8Into;class YG{constructor(F,A,B){this.moreToCome=!1;let D=`${F}.$cmd`;if(typeof F!=="string")throw new m5.MongoRuntimeError("Database name must be a string for a query");if(A==null)throw new m5.MongoRuntimeError("A query document must be specified for query");if(D.indexOf("\x00")!==-1)throw new m5.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=F,this.query=A,this.ns=D,this.numberToSkip=B.numberToSkip||0,this.numberToReturn=B.numberToReturn||0,this.returnFieldSelector=B.returnFieldSelector||void 0,this.requestId=B.requestId??YG.getRequestId(),this.pre32Limit=B.pre32Limit,this.serializeFunctions=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,this.ignoreUndefined=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!1,this.maxBsonSize=B.maxBsonSize||16777216,this.checkKeys=typeof B.checkKeys==="boolean"?B.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof B.secondaryOk==="boolean"?B.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=g7++}nextRequestId(){return g7+1}static getRequestId(){return++g7}toBin(){let F=[],A=null,B=0;if(this.tailable)B|=Q71;if(this.secondaryOk)B|=K71;if(this.oplogReplay)B|=U71;if(this.noCursorTimeout)B|=V71;if(this.awaitData)B|=L71;if(this.exhaust)B|=w71;if(this.partial)B|=R71;if(this.batchSize!==this.numberToReturn)this.numberToReturn=this.batchSize;let D=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);F.push(D);let X=b7.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});if(F.push(X),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0)A=b7.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),F.push(A);let Z=D.length+X.length+(A?A.length:0),J=4;return D[3]=Z>>24&255,D[2]=Z>>16&255,D[1]=Z>>8&255,D[0]=Z&255,D[J+3]=this.requestId>>24&255,D[J+2]=this.requestId>>16&255,D[J+1]=this.requestId>>8&255,D[J]=this.requestId&255,J=J+4,D[J+3]=0,D[J+2]=0,D[J+1]=0,D[J]=0,J=J+4,D[J+3]=f7.OP_QUERY>>24&255,D[J+2]=f7.OP_QUERY>>16&255,D[J+1]=f7.OP_QUERY>>8&255,D[J]=f7.OP_QUERY&255,J=J+4,D[J+3]=B>>24&255,D[J+2]=B>>16&255,D[J+1]=B>>8&255,D[J]=B&255,J=J+4,J=J+D.write(this.ns,J,"utf8")+1,D[J-1]=0,D[J+3]=this.numberToSkip>>24&255,D[J+2]=this.numberToSkip>>16&255,D[J+1]=this.numberToSkip>>8&255,D[J]=this.numberToSkip&255,J=J+4,D[J+3]=this.numberToReturn>>24&255,D[J+2]=this.numberToReturn>>16&255,D[J+1]=this.numberToReturn>>8&255,D[J]=this.numberToReturn&255,J=J+4,F}}hN.OpQueryRequest=YG;class xN{constructor(F,A,B,D){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=F,this.data=B,this.opts=D??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=A.length,this.requestId=A.requestId,this.responseTo=A.responseTo,this.opCode=A.opCode,this.fromCompressed=A.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new b7.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>4294967295)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&I71)!==0,this.queryFailure=(this.responseFlags&P71)!==0,this.shardConfigStale=(this.responseFlags&N71)!==0,this.awaitCapable=(this.responseFlags&M71)!==0;for(let F=0;F<this.numberReturned;F++){let A=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,B=this.data.subarray(this.index,this.index+A);this.sections.push(B),this.index=this.index+A}return this.parsed=!0,this.sections[0]}}hN.OpReply=xN;var _N=1,fN=2,gN=65536;class $G{constructor(F,A){this.field=F,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let B=Buffer.allocUnsafe(5+this.field.length+1);if(B[0]=1,j71(B,`${this.field}\x00`,5),this.chunks.push(B),this.header=B,A)for(let D of A)this.push(D,b7.serialize(D))}push(F,A){return this.serializedDocumentsLength+=A.length,this.documents.push(F),this.chunks.push(A),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}}hN.DocumentSequence=$G;class yB{constructor(F,A,B){if(A==null)throw new m5.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=F,this.command=A,this.command.$db=F,this.options=B??{},this.requestId=B.requestId?B.requestId:yB.getRequestId(),this.serializeFunctions=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,this.ignoreUndefined=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!1,this.checkKeys=typeof B.checkKeys==="boolean"?B.checkKeys:!1,this.maxBsonSize=B.maxBsonSize||16777216,this.checksumPresent=!1,this.moreToCome=B.moreToCome??A.writeConcern?.w===0,this.exhaustAllowed=typeof B.exhaustAllowed==="boolean"?B.exhaustAllowed:!1}toBin(){let F=[],A=0;if(this.checksumPresent)A|=_N;if(this.moreToCome)A|=fN;if(this.exhaustAllowed)A|=gN;let B=Buffer.alloc(20);F.push(B);let D=B.length,X=this.command;return D+=this.makeSections(F,X),B.writeInt32LE(D,0),B.writeInt32LE(this.requestId,4),B.writeInt32LE(0,8),B.writeInt32LE(f7.OP_MSG,12),B.writeUInt32LE(A,16),F}makeSections(F,A){let B=this.extractDocumentSequences(A),D=Buffer.allocUnsafe(1);D[0]=0;let X=this.serializeBson(A);return F.push(D),F.push(X),F.push(B),D.length+X.length+B.length}extractDocumentSequences(F){let A=[];for(let[B,D]of Object.entries(F))if(D instanceof $G)A.push(D.toBin()),delete F[B];if(A.length>0)return Buffer.concat(A);return Buffer.alloc(0)}serializeBson(F){return b7.serialize(F,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return g7=g7+1&2147483647,g7}}hN.OpMsgRequest=yB;class bN{constructor(F,A,B,D){this.index=0,this.sections=[],this.parsed=!1,this.raw=F,this.data=B,this.opts=D??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=A.length,this.requestId=A.requestId,this.responseTo=A.responseTo,this.opCode=A.opCode,this.fromCompressed=A.fromCompressed,this.responseFlags=B.readInt32LE(0),this.checksumPresent=(this.responseFlags&_N)!==0,this.moreToCome=(this.responseFlags&fN)!==0,this.exhaustAllowed=(this.responseFlags&gN)!==0,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];this.index=4;while(this.index<this.data.length){let F=this.data.readUInt8(this.index++);if(F===0){let A=this.data.readUInt32LE(this.index),B=this.data.subarray(this.index,this.index+A);this.sections.push(B),this.index+=A}else if(F===1)throw new m5.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}}hN.OpMsgResponse=bN;var JG=16,SN=9;class yN{constructor(F,A){this.command=F,this.options={zlibCompressionLevel:A.zlibCompressionLevel,agreedCompressor:A.agreedCompressor}}static canCompress(F){let A=F instanceof yB?F.command:F.query,B=Object.keys(A)[0];return!ZG.uncompressibleCommands.has(B)}async toBin(){let F=Buffer.concat(this.command.toBin()),A=F.slice(JG),B=F.readInt32LE(12),D=await ZG.compress(this.options,A),X=Buffer.alloc(JG);X.writeInt32LE(JG+SN+D.length,0),X.writeInt32LE(this.command.requestId,4),X.writeInt32LE(0,8),X.writeInt32LE(f7.OP_COMPRESSED,12);let Z=Buffer.alloc(SN);return Z.writeInt32LE(B,0),Z.writeInt32LE(A.length,4),Z.writeUInt8(ZG.Compressor[this.options.agreedCompressor],8),[X,Z,D]}}hN.OpCompressedRequest=yN});var c5=z((iN)=>{Object.defineProperty(iN,"__esModule",{value:!0});iN.uncompressibleCommands=iN.Compressor=void 0;iN.compress=b71;iN.decompress=lN;iN.compressCommand=y71;iN.decompressResponse=h71;var mN=m("util"),hB=m("zlib"),x71=w0(),dN=v6(),EG=l(),y7=d5(),GG=P3();iN.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});iN.uncompressibleCommands=new Set([x71.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var _71=3,f71=mN.promisify(hB.inflate.bind(hB)),g71=mN.promisify(hB.deflate.bind(hB)),K4,$9=null;function cN(){if($9==null){let F=dN.getSnappy();if("kModuleError"in F)throw F.kModuleError;$9=F}return $9}async function b71(F,A){let B={};switch(F.agreedCompressor){case"snappy":return $9??=cN(),await $9.compress(A);case"zstd":{if(pN(),"kModuleError"in K4)throw K4.kModuleError;return await K4.compress(A,_71)}case"zlib":{if(F.zlibCompressionLevel)B.level=F.zlibCompressionLevel;return await g71(A,B)}default:throw new EG.MongoInvalidArgumentError(`Unknown compressor ${F.agreedCompressor} failed to compress`)}}async function lN(F,A){if(F!==iN.Compressor.snappy&&F!==iN.Compressor.zstd&&F!==iN.Compressor.zlib&&F!==iN.Compressor.none)throw new EG.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${F})`);switch(F){case iN.Compressor.snappy:return $9??=cN(),await $9.uncompress(A,{asBuffer:!0});case iN.Compressor.zstd:{if(pN(),"kModuleError"in K4)throw K4.kModuleError;return await K4.decompress(A)}case iN.Compressor.zlib:return await f71(A);default:return A}}function pN(){if(!K4)K4=dN.getZstdLibrary()}var l5=16;async function y71(F,A){let D=await(A.agreedCompressor==="none"||!y7.OpCompressedRequest.canCompress(F)?F:new y7.OpCompressedRequest(F,{agreedCompressor:A.agreedCompressor??"none",zlibCompressionLevel:A.zlibCompressionLevel??0})).toBin();return Buffer.concat(D)}async function h71(F){let A={length:F.readInt32LE(0),requestId:F.readInt32LE(4),responseTo:F.readInt32LE(8),opCode:F.readInt32LE(12)};if(A.opCode!==GG.OP_COMPRESSED){let Y=A.opCode===GG.OP_MSG?y7.OpMsgResponse:y7.OpReply,$=F.subarray(l5);return new Y(F,A,$)}let B={...A,fromCompressed:!0,opCode:F.readInt32LE(l5),length:F.readInt32LE(l5+4)},D=F[l5+8],X=F.slice(l5+9),Z=B.opCode===GG.OP_MSG?y7.OpMsgResponse:y7.OpReply,J=await lN(D,X);if(J.length!==B.length)throw new EG.MongoDecompressionError("Message body and message header must be the same length");return new Z(F,B,J)}});var h7=z((eN)=>{Object.defineProperty(eN,"__esModule",{value:!0});eN.MongoCryptKMSRequestNetworkTimeoutError=eN.MongoCryptAzureKMSRequestError=eN.MongoCryptCreateEncryptedCollectionError=eN.MongoCryptCreateDataKeyError=eN.MongoCryptInvalidArgumentError=eN.defaultErrorWrapper=eN.MongoCryptError=void 0;var l71=l();class U4 extends l71.MongoError{constructor(F,A={}){super(F,A)}get name(){return"MongoCryptError"}}eN.MongoCryptError=U4;var p71=(F)=>new U4(F.message,{cause:F});eN.defaultErrorWrapper=p71;class aN extends U4{constructor(F){super(F)}get name(){return"MongoCryptInvalidArgumentError"}}eN.MongoCryptInvalidArgumentError=aN;class sN extends U4{constructor(F,{cause:A}){super(`Unable to complete creating data keys: ${A.message}`,{cause:A});this.encryptedFields=F}get name(){return"MongoCryptCreateDataKeyError"}}eN.MongoCryptCreateDataKeyError=sN;class rN extends U4{constructor(F,{cause:A}){super(`Unable to create collection: ${A.message}`,{cause:A});this.encryptedFields=F}get name(){return"MongoCryptCreateEncryptedCollectionError"}}eN.MongoCryptCreateEncryptedCollectionError=rN;class tN extends U4{constructor(F,A){super(F);this.body=A}get name(){return"MongoCryptAzureKMSRequestError"}}eN.MongoCryptAzureKMSRequestError=tN;class oN extends U4{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}}eN.MongoCryptKMSRequestNetworkTimeoutError=oN});var CG=z((AM)=>{Object.defineProperty(AM,"__esModule",{value:!0});AM.AWSSDKCredentialProvider=void 0;var o71=v6(),e71=l();class V4{constructor(F){if(F)this._provider=F}static get awsSDK(){return V4._awsSDK??=o71.getAwsCredentialProvider(),V4._awsSDK}get provider(){if("kModuleError"in V4.awsSDK)throw V4.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:F="",AWS_REGION:A=""}=process.env;F=F.toLowerCase(),A=A.toLowerCase();let B=A.length!==0&&F.length!==0,X=F==="regional"||F==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(A);return this._provider=B&&X?V4.awsSDK.fromNodeProviderChain({clientConfig:{region:A}}):V4.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let F=await this.provider();return{AccessKeyId:F.accessKeyId,SecretAccessKey:F.secretAccessKey,Token:F.sessionToken,Expiration:F.expiration}}catch(F){throw new e71.MongoAWSError(F.message,{cause:F})}}}AM.AWSSDKCredentialProvider=V4});var XM=z((DM)=>{Object.defineProperty(DM,"__esModule",{value:!0});DM.loadAWSCredentials=A81;var F81=CG();async function A81(F,A){let B=new F81.AWSSDKCredentialProvider(A),{SecretAccessKey:D="",AccessKeyId:X="",Token:Z}=await B.getCredentials(),J={secretAccessKey:D,accessKeyId:X};return Z!=null&&(J.sessionToken=Z),{...F,aws:J}}});var qG=z(($M)=>{Object.defineProperty($M,"__esModule",{value:!0});$M.tokenCache=$M.AzureCredentialCache=$M.AZURE_BASE_URL=void 0;$M.addAzureParams=ZM;$M.prepareRequest=JM;$M.fetchAzureKMSToken=YM;$M.loadAzureCredentials=Y81;var D81=l(),X81=s(),v7=h7(),Z81=6000;$M.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";class WG{constructor(){this.cachedToken=null}async getToken(){if(this.cachedToken==null||this.needsRefresh(this.cachedToken))this.cachedToken=await this._getToken();return{accessToken:this.cachedToken.accessToken}}needsRefresh(F){return F.expiresOnTimestamp-Date.now()<=Z81}resetCache(){this.cachedToken=null}_getToken(){return YM()}}$M.AzureCredentialCache=WG;$M.tokenCache=new WG;async function J81(F){let{status:A,body:B}=F,D=(()=>{try{return JSON.parse(B)}catch{throw new v7.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(A!==200)throw new v7.MongoCryptAzureKMSRequestError("Unable to complete request.",D);if(!D.access_token)throw new v7.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!D.expires_in)throw new v7.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let X=Number(D.expires_in)*1000;if(Number.isNaN(X))throw new v7.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:D.access_token,expiresOnTimestamp:Date.now()+X}}function ZM(F,A,B){if(F.searchParams.append("api-version","2018-02-01"),F.searchParams.append("resource",A),B)F.searchParams.append("client_id",B);return F}function JM(F){let A=new URL(F.url?.toString()??$M.AZURE_BASE_URL);return ZM(A,"https://vault.azure.net"),{headers:{...F.headers,"Content-Type":"application/json",Metadata:!0},url:A}}async function YM(F={}){let{headers:A,url:B}=JM(F);try{let D=await X81.get(B,{headers:A});return await J81(D)}catch(D){if(D instanceof D81.MongoNetworkTimeoutError)throw new v7.MongoCryptAzureKMSRequestError(`[Azure KMS] ${D.message}`);throw D}}async function Y81(F){let A=await $M.tokenCache.getToken();return{...F,azure:A}}});var CM=z((EM)=>{Object.defineProperty(EM,"__esModule",{value:!0});EM.loadGCPCredentials=q81;var H81=v6();async function q81(F){let A=H81.getGcpMetadata();if("kModuleError"in A)return F;let{access_token:B}=await A.instance({property:"service-accounts/default/token"});return{...F,gcp:{accessToken:B}}}});var zG=z((WM)=>{Object.defineProperty(WM,"__esModule",{value:!0});WM.isEmptyCredentials=vB;WM.refreshKMSCredentials=V81;var Q81=XM(),K81=qG(),U81=CM();function vB(F,A){let B=A[F];if(B==null)return!1;return typeof B==="object"&&Object.keys(B).length===0}async function V81(F,A){let B=F;if(vB("aws",F))B=await Q81.loadAWSCredentials(B,A?.aws);if(vB("gcp",F))B=await U81.loadGCPCredentials(B);if(vB("azure",F))B=await K81.loadAzureCredentials(B);return B}});var QG=z((NM)=>{Object.defineProperty(NM,"__esModule",{value:!0});NM.StateMachine=void 0;var HM=m("fs/promises"),R81=m("net"),I81=m("tls"),T3=$1(),qM=q2(),P81=v6(),N81=l(),zM=g0(),L4=s(),M81=mB(),w4=h7(),p5=null;function j81(){if(p5==null){let F=P81.getSocks();if("kModuleError"in F)throw F.kModuleError;p5=F}return p5}var G9=0,KM=1,UM=2,VM=3,LM=7,wM=4,RM=5,IM=6,T81=443,k81=new Map([[G9,"MONGOCRYPT_CTX_ERROR"],[KM,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[UM,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[VM,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[LM,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[wM,"MONGOCRYPT_CTX_NEED_KMS"],[RM,"MONGOCRYPT_CTX_READY"],[IM,"MONGOCRYPT_CTX_DONE"]]),u81=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function QM(F){if(process.env.MONGODB_CRYPT_DEBUG)console.error(F)}var O81;class PM{constructor(F,A=T3.pluckBSONSerializeOptions(F)){this.options=F,this.bsonOptions=A}async execute(F,A,B){let{_keyVaultNamespace:D,_keyVaultClient:X,_metaDataClient:Z,_mongocryptdClient:J,_mongocryptdManager:Y}=F,$=null,G=()=>A.status,E=()=>A.state;while(E()!==IM&&E()!==G9)switch(B.signal?.throwIfAborted(),QM(`[context#${A.id}] ${k81.get(E())||E()}`),E()){case KM:{let C=T3.deserialize(A.nextMongoOperation());if(!Z)throw new w4.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let W=this.fetchCollectionInfo(Z,A.ns,C,B);for await(let H of W)if(A.addMongoOperationResponse(T3.serialize(H)),E()===G9)break;if(E()===G9)break;A.finishMongoOperation();break}case UM:{let C=A.nextMongoOperation();if(E()===G9)break;if(!J)throw new w4.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let W=Y?await Y.withRespawn(this.markCommand.bind(this,J,A.ns,C,B)):await this.markCommand(J,A.ns,C,B);A.addMongoOperationResponse(W),A.finishMongoOperation();break}case VM:{let C=A.nextMongoOperation(),W=await this.fetchKeys(X,D,C,B);if(W.length===0)$=O81??=T3.serialize({v:[]});for(let H of W)A.addMongoOperationResponse(T3.serialize(H));A.finishMongoOperation();break}case LM:{let C=await F.askForKMSCredentials();A.provideKMSProviders(T3.serialize(C));break}case wM:{await Promise.all(this.requests(A,B)),A.finishKMSRequests();break}case RM:{let C=A.finalize();if(E()===G9){let W=G().message||"Finalization error";throw new w4.MongoCryptError(W)}$=C;break}default:throw new w4.MongoCryptError(`Unknown state: ${E()}`)}if(E()===G9||$==null){let C=G().message;if(!C)QM("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.");throw new w4.MongoCryptError(C??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return $}async kmsRequest(F,A){let B=F.endpoint.split(":"),D=B[1]!=null?Number.parseInt(B[1],10):T81,X={host:B[0],servername:B[0],port:D,...M81.autoSelectSocketOptions(this.options.socketOptions||{})},Z=F.message,J=new L4.BufferPool,Y,$;function G(){for(let q of[$,Y])if(q)q.destroy()}function E(q){return new w4.MongoCryptError("KMS request failed",{cause:q})}function C(){return new w4.MongoCryptError("KMS request closed")}let W=this.options.tlsOptions;if(W){let q=F.kmsProvider,Q=W[q];if(Q){let K=this.validateTlsOptions(q,Q);if(K)throw K;try{await this.setTlsOptions(Q,X)}catch(U){throw E(U)}}}let H;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){Y=new R81.Socket;let{promise:U,reject:R,resolve:w}=L4.promiseWithResolvers();Y.once("error",(N)=>R(E(N))).once("close",()=>R(C())).once("connect",()=>w());let V={...X,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};Y.connect(V),await U;try{p5??=j81(),X.socket=(await p5.SocksClient.createConnection({existing_socket:Y,command:"connect",destination:{host:X.host,port:X.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(N){throw E(N)}}$=I81.connect(X,()=>{$.write(Z)});let{promise:q,reject:Q,resolve:K}=L4.promiseWithResolvers();H=L4.addAbortListener(A?.signal,function(){G(),Q(this.reason)}),$.once("error",(U)=>Q(E(U))).once("close",()=>Q(C())).on("data",(U)=>{J.append(U);while(F.bytesNeeded>0&&J.length){let R=Math.min(F.bytesNeeded,J.length);F.addResponse(J.read(R))}if(F.bytesNeeded<=0)K()}),await(A?.timeoutContext?.csotEnabled()?Promise.all([q,zM.Timeout.expires(A.timeoutContext?.remainingTimeMS)]):q)}catch(q){if(q instanceof zM.TimeoutError)throw new N81.MongoOperationTimeoutError("KMS request timed out");throw q}finally{G(),H?.[L4.kDispose]()}}*requests(F,A){for(let B=F.nextKMSRequest();B!=null;B=F.nextKMSRequest())yield this.kmsRequest(B,A)}validateTlsOptions(F,A){let B=Object.keys(A);for(let D of u81)if(B.includes(D))return new w4.MongoCryptError(`Insecure TLS options prohibited for ${F}: ${D}`)}async setTlsOptions(F,A){if(F.secureContext)A.secureContext=F.secureContext;if(F.tlsCertificateKeyFile){let B=await HM.readFile(F.tlsCertificateKeyFile);A.cert=A.key=B}if(F.tlsCAFile)A.ca=await HM.readFile(F.tlsCAFile);if(F.tlsCertificateKeyFilePassword)A.passphrase=F.tlsCertificateKeyFilePassword}fetchCollectionInfo(F,A,B,D){let{db:X}=L4.MongoDBCollectionNamespace.fromString(A);return F.db(X).listCollections(B,{promoteLongs:!1,promoteValues:!1,timeoutContext:D?.timeoutContext&&new qM.CursorTimeoutContext(D?.timeoutContext,Symbol()),signal:D?.signal,nameOnly:!1})}async markCommand(F,A,B,D){let{db:X}=L4.MongoDBCollectionNamespace.fromString(A),Z={promoteLongs:!1,promoteValues:!1},J=T3.deserialize(B,Z),Y={timeoutMS:void 0,signal:void 0};if(D?.timeoutContext?.csotEnabled())Y.timeoutMS=D.timeoutContext.remainingTimeMS;if(D?.signal)Y.signal=D.signal;let $=await F.db(X).command(J,{...Z,...Y});return T3.serialize($,this.bsonOptions)}fetchKeys(F,A,B,D){let{db:X,collection:Z}=L4.MongoDBCollectionNamespace.fromString(A),J={timeoutContext:void 0,signal:void 0};if(D?.timeoutContext!=null)J.timeoutContext=new qM.CursorTimeoutContext(D.timeoutContext,Symbol());if(D?.signal!=null)J.signal=D.signal;return F.db(X).collection(Z,{readConcern:{level:"majority"}}).find(T3.deserialize(B),J).toArray()}}NM.StateMachine=PM});var mB=z((TM)=>{Object.defineProperty(TM,"__esModule",{value:!0});TM.ClientEncryption=void 0;TM.autoSelectSocketOptions=n5;var O2=$1(),S81=v6(),i5=g0(),v2=s(),k3=h7(),jM=zG(),dB=QG();class cB{static getMongoCrypt(){let F=S81.getMongoDBClientEncryption();if("kModuleError"in F)throw F.kModuleError;return F.MongoCrypt}constructor(F,A){this._client=F,this._proxyOptions=A.proxyOptions??{},this._tlsOptions=A.tlsOptions??{},this._kmsProviders=A.kmsProviders||{};let{timeoutMS:B}=v2.resolveTimeoutOptions(F,A);if(this._timeoutMS=B,this._credentialProviders=A.credentialProviders,A.credentialProviders?.aws&&!jM.isEmptyCredentials("aws",this._kmsProviders))throw new k3.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(A.keyVaultNamespace==null)throw new k3.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let D={...A,kmsProviders:!Buffer.isBuffer(this._kmsProviders)?O2.serialize(this._kmsProviders):this._kmsProviders,errorWrapper:k3.defaultErrorWrapper};this._keyVaultNamespace=A.keyVaultNamespace,this._keyVaultClient=A.keyVaultClient||F;let X=cB.getMongoCrypt();this._mongoCrypt=new X(D)}async createDataKey(F,A={}){if(A.keyAltNames&&!Array.isArray(A.keyAltNames))throw new k3.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof A.keyAltNames}.`);let B=void 0;if(A.keyAltNames&&A.keyAltNames.length>0)B=A.keyAltNames.map((W,H)=>{if(typeof W!=="string")throw new k3.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${H} was of type ${typeof W}`);return O2.serialize({keyAltName:W})});let D=void 0;if(A.keyMaterial)D=O2.serialize({keyMaterial:A.keyMaterial});let X=O2.serialize({provider:F,...A.masterKey}),Z=this._mongoCrypt.makeDataKeyContext(X,{keyAltNames:B,keyMaterial:D}),J=new dB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:n5(this._client.s.options)}),Y=A?.timeoutContext??i5.TimeoutContext.create(v2.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})),$=O2.deserialize(await J.execute(this,Z,{timeoutContext:Y})),{db:G,collection:E}=v2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:C}=await this._keyVaultClient.db(G).collection(E).insertOne($,{writeConcern:{w:"majority"},timeoutMS:Y?.csotEnabled()?Y?.getRemainingTimeMSOrThrow():void 0});return C}async rewrapManyDataKey(F,A){let B=void 0;if(A){let W=Object.assign({provider:A.provider},A.masterKey);B=O2.serialize(W)}let D=O2.serialize(F),X=this._mongoCrypt.makeRewrapManyDataKeyContext(D,B),Z=new dB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:n5(this._client.s.options)}),J=i5.TimeoutContext.create(v2.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})),{v:Y}=O2.deserialize(await Z.execute(this,X,{timeoutContext:J}));if(Y.length===0)return{};let{db:$,collection:G}=v2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),E=Y.map((W)=>({updateOne:{filter:{_id:W._id},update:{$set:{masterKey:W.masterKey,keyMaterial:W.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db($).collection(G).bulkWrite(E,{writeConcern:{w:"majority"},timeoutMS:J.csotEnabled()?J?.remainingTimeMS:void 0})}}async deleteKey(F){let{db:A,collection:B}=v2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection(B).deleteOne({_id:F},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:F,collection:A}=v2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(F).collection(A).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(F){let{db:A,collection:B}=v2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection(B).findOne({_id:F},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(F){let{db:A,collection:B}=v2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection(B).findOne({keyAltNames:F},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(F,A){let{db:B,collection:D}=v2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(B).collection(D).findOneAndUpdate({_id:F},{$addToSet:{keyAltNames:A}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(F,A){let{db:B,collection:D}=v2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),X=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[A]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",A]}}}]}}}];return await this._keyVaultClient.db(B).collection(D).findOneAndUpdate({_id:F},X,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(F,A,B){let{provider:D,masterKey:X,createCollectionOptions:{encryptedFields:{...Z},...J}}=B,Y=this._timeoutMS!=null?i5.TimeoutContext.create(v2.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(Z.fields)){let $=Z.fields.map(async(C)=>C==null||typeof C!=="object"||C.keyId!=null?C:{...C,keyId:await this.createDataKey(D,{masterKey:X,timeoutContext:Y?.csotEnabled()?Y?.clone():void 0})}),G=await Promise.allSettled($);Z.fields=G.map((C,W)=>C.status==="fulfilled"?C.value:Z.fields[W]);let E=G.find((C)=>C.status==="rejected");if(E!=null)throw new k3.MongoCryptCreateDataKeyError(Z,{cause:E.reason})}try{return{collection:await F.createCollection(A,{...J,encryptedFields:Z,timeoutMS:Y?.csotEnabled()?Y?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:Z}}catch($){throw new k3.MongoCryptCreateEncryptedCollectionError(Z,{cause:$})}}async encrypt(F,A){return await this._encrypt(F,!1,A)}async encryptExpression(F,A){return await this._encrypt(F,!0,A)}async decrypt(F){let A=O2.serialize({v:F}),B=this._mongoCrypt.makeExplicitDecryptionContext(A),D=new dB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:n5(this._client.s.options)}),X=this._timeoutMS!=null?i5.TimeoutContext.create(v2.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:Z}=O2.deserialize(await D.execute(this,B,{timeoutContext:X}));return Z}async askForKMSCredentials(){return await jM.refreshKMSCredentials(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return cB.getMongoCrypt().libmongocryptVersion}async _encrypt(F,A,B){let{algorithm:D,keyId:X,keyAltName:Z,contentionFactor:J,queryType:Y,rangeOptions:$,textOptions:G}=B,E={expressionMode:A,algorithm:D};if(X)E.keyId=X.buffer;if(Z){if(X)throw new k3.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof Z!=="string")throw new k3.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof Z}`);E.keyAltName=O2.serialize({keyAltName:Z})}if(typeof J==="number"||typeof J==="bigint")E.contentionFactor=J;if(typeof Y==="string")E.queryType=Y;if(typeof $==="object")E.rangeOptions=O2.serialize($);if(typeof G==="object")E.textOptions=O2.serialize(G);let C=O2.serialize({v:F}),W=new dB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:n5(this._client.s.options)}),H=this._mongoCrypt.makeExplicitEncryptionContext(C,E),q=this._timeoutMS!=null?i5.TimeoutContext.create(v2.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:Q}=O2.deserialize(await W.execute(this,H,{timeoutContext:q}));return Q}}TM.ClientEncryption=cB;function n5(F){let A={autoSelectFamily:!0};if("autoSelectFamily"in F)A.autoSelectFamily=F.autoSelectFamily;if("autoSelectFamilyAttemptTimeout"in F)A.autoSelectFamilyAttemptTimeout=F.autoSelectFamilyAttemptTimeout;return A}});var SM=z((uM)=>{Object.defineProperty(uM,"__esModule",{value:!0});uM.MongocryptdManager=void 0;var _81=l();class KG{static{this.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"}constructor(F={}){if(this.spawnPath="",this.spawnArgs=[],this.uri=typeof F.mongocryptdURI==="string"&&F.mongocryptdURI.length>0?F.mongocryptdURI:KG.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!F.mongocryptdBypassSpawn,Object.hasOwn(F,"mongocryptdSpawnPath")&&F.mongocryptdSpawnPath)this.spawnPath=F.mongocryptdSpawnPath;if(Object.hasOwn(F,"mongocryptdSpawnArgs")&&Array.isArray(F.mongocryptdSpawnArgs))this.spawnArgs=this.spawnArgs.concat(F.mongocryptdSpawnArgs);if(this.spawnArgs.filter((A)=>typeof A==="string").every((A)=>A.indexOf("--idleShutdownTimeoutSecs")<0))this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let F=this.spawnPath||"mongocryptd",{spawn:A}=m("child_process");this._child=A(F,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(F){try{return await F()}catch(B){if(!(B instanceof _81.MongoNetworkTimeoutError&&!this.bypassSpawn))throw B}return await this.spawn(),await F()}}uM.MongocryptdManager=KG});var wG=z((bM)=>{var xM;Object.defineProperty(bM,"__esModule",{value:!0});bM.AutoEncrypter=bM.AutoEncryptionLoggerLevel=void 0;var _M=m("net"),a5=$1(),f81=w0(),g81=v6(),UG=l(),b81=E9(),y81=s(),VG=mB(),LG=h7(),h81=SM(),fM=zG(),gM=QG();bM.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});class lB{static{xM=f81.kDecorateResult}static getMongoCrypt(){let F=g81.getMongoDBClientEncryption();if("kModuleError"in F)throw F.kModuleError;return F.MongoCrypt}constructor(F,A){if(this[xM]=!1,this._client=F,this._bypassEncryption=A.bypassAutoEncryption===!0,this._keyVaultNamespace=A.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=A.keyVaultClient||F,this._metaDataClient=A.metadataClient||F,this._proxyOptions=A.proxyOptions||{},this._tlsOptions=A.tlsOptions||{},this._kmsProviders=A.kmsProviders||{},this._credentialProviders=A.credentialProviders,A.credentialProviders?.aws&&!fM.isEmptyCredentials("aws",this._kmsProviders))throw new LG.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let B={errorWrapper:LG.defaultErrorWrapper};if(A.schemaMap)B.schemaMap=Buffer.isBuffer(A.schemaMap)?A.schemaMap:a5.serialize(A.schemaMap);if(A.encryptedFieldsMap)B.encryptedFieldsMap=Buffer.isBuffer(A.encryptedFieldsMap)?A.encryptedFieldsMap:a5.serialize(A.encryptedFieldsMap);if(B.kmsProviders=!Buffer.isBuffer(this._kmsProviders)?a5.serialize(this._kmsProviders):this._kmsProviders,A.options?.logger)B.logger=A.options.logger;if(A.extraOptions&&A.extraOptions.cryptSharedLibPath)B.cryptSharedLibPath=A.extraOptions.cryptSharedLibPath;if(A.bypassQueryAnalysis)B.bypassQueryAnalysis=A.bypassQueryAnalysis;if(A.keyExpirationMS!=null)B.keyExpirationMS=A.keyExpirationMS;if(this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!A.bypassQueryAnalysis,A.extraOptions&&A.extraOptions.cryptSharedLibSearchPaths)B.cryptSharedLibSearchPaths=A.extraOptions.cryptSharedLibSearchPaths;else if(!this._bypassMongocryptdAndCryptShared)B.cryptSharedLibSearchPaths=["$SYSTEM"];let D=lB.getMongoCrypt();if(this._mongocrypt=new D(B),this._contextCounter=0,A.extraOptions&&A.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new LG.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new h81.MongocryptdManager(A.extraOptions);let X={serverSelectionTimeoutMS:1e4};if((A.extraOptions==null||typeof A.extraOptions.mongocryptdURI!=="string")&&!_M.getDefaultAutoSelectFamily)X.family=4;if(_M.getDefaultAutoSelectFamily)Object.assign(X,VG.autoSelectSocketOptions(this._client.s?.options??{}));this._mongocryptdClient=new b81.MongoClient(this._mongocryptdManager.uri,X)}}async init(){if(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)return;if(!this._mongocryptdManager)throw new UG.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new UG.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdManager.bypassSpawn)await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(F){throw new UG.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:F})}}async close(){await this._mongocryptdClient?.close()}async encrypt(F,A,B={}){if(B.signal?.throwIfAborted(),this._bypassEncryption)return A;let D=Buffer.isBuffer(A)?A:a5.serialize(A,B),X=this._mongocrypt.makeEncryptionContext(y81.MongoDBCollectionNamespace.fromString(F).db,D);X.id=this._contextCounter++,X.ns=F,X.document=A;let Z=new gM.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:VG.autoSelectSocketOptions(this._client.s.options)});return a5.deserialize(await Z.execute(this,X,B),{promoteValues:!1,promoteLongs:!1})}async decrypt(F,A={}){A.signal?.throwIfAborted();let B=this._mongocrypt.makeDecryptionContext(F);return B.id=this._contextCounter++,await new gM.StateMachine({...A,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:VG.autoSelectSocketOptions(this._client.s.options)}).execute(this,B,A)}async askForKMSCredentials(){return await fM.refreshKMSCredentials(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return lB.getMongoCrypt().libmongocryptVersion}}bM.AutoEncrypter=lB});var cM=z((mM)=>{Object.defineProperty(mM,"__esModule",{value:!0});mM.Encrypter=void 0;var m81=wG(),d81=w0(),c81=v6(),hM=l(),l81=E9();class vM{constructor(F,A,B){if(typeof B.autoEncryption!=="object")throw new hM.MongoInvalidArgumentError('Option "autoEncryption" must be specified');if(this.internalClient=null,this.bypassAutoEncryption=!!B.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,B.maxPoolSize===0&&B.autoEncryption.keyVaultClient==null)B.autoEncryption.keyVaultClient=F;else if(B.autoEncryption.keyVaultClient==null)B.autoEncryption.keyVaultClient=this.getInternalClient(F,A,B);if(this.bypassAutoEncryption)B.autoEncryption.metadataClient=void 0;else if(B.maxPoolSize===0)B.autoEncryption.metadataClient=F;else B.autoEncryption.metadataClient=this.getInternalClient(F,A,B);if(B.proxyHost)B.autoEncryption.proxyOptions={proxyHost:B.proxyHost,proxyPort:B.proxyPort,proxyUsername:B.proxyUsername,proxyPassword:B.proxyPassword};this.autoEncrypter=new m81.AutoEncrypter(F,B.autoEncryption)}getInternalClient(F,A,B){let D=this.internalClient;if(D==null){let X={};for(let Z of[...Object.getOwnPropertyNames(B),...Object.getOwnPropertySymbols(B)]){if(["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(Z))continue;Reflect.set(X,Z,Reflect.get(B,Z))}X.minPoolSize=0,D=new l81.MongoClient(A,X),this.internalClient=D;for(let Z of d81.MONGO_CLIENT_EVENTS)for(let J of F.listeners(Z))D.on(Z,J);F.on("newListener",(Z,J)=>{D?.on(Z,J)}),this.needsConnecting=!0}return D}async connectInternalClient(){let F=this.internalClient;if(this.needsConnecting&&F!=null)this.needsConnecting=!1,await F.connect()}async close(F){let A;try{await this.autoEncrypter.close()}catch(D){A=D}let B=this.internalClient;if(B!=null&&F!==B)return await B.close();if(A!=null)throw A}static checkForMongoCrypt(){let F=c81.getMongoDBClientEncryption();if("kModuleError"in F)throw new hM.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:F.kModuleError,dependencyName:"mongodb-client-encryption"})}}mM.Encrypter=vM});var jG=z((rM)=>{Object.defineProperty(rM,"__esModule",{value:!0});rM.SENSITIVE_COMMANDS=rM.CommandFailedEvent=rM.CommandSucceededEvent=rM.CommandStartedEvent=void 0;var s5=w0(),iM=s(),RG=d5();class nM{constructor(F,A,B){this.name=s5.COMMAND_STARTED;let D=NG(A),X=IG(D),{address:Z,connectionId:J,serviceId:Y}=MG(F);if(rM.SENSITIVE_COMMANDS.has(X))this.commandObj={},this.commandObj[X]=!0;this.address=Z,this.connectionId=J,this.serviceId=Y,this.requestId=A.requestId,this.databaseName=A.databaseName,this.commandName=X,this.command=PG(X,D,D),this.serverConnectionId=B}get hasServiceId(){return!!this.serviceId}}rM.CommandStartedEvent=nM;class aM{constructor(F,A,B,D,X){this.name=s5.COMMAND_SUCCEEDED;let Z=NG(A),J=IG(Z),{address:Y,connectionId:$,serviceId:G}=MG(F);this.address=Y,this.connectionId=$,this.serviceId=G,this.requestId=A.requestId,this.commandName=J,this.duration=iM.calculateDurationInMs(D),this.reply=PG(J,Z,n81(B)),this.serverConnectionId=X,this.databaseName=A.databaseName}get hasServiceId(){return!!this.serviceId}}rM.CommandSucceededEvent=aM;class sM{constructor(F,A,B,D,X){this.name=s5.COMMAND_FAILED;let Z=NG(A),J=IG(Z),{address:Y,connectionId:$,serviceId:G}=MG(F);this.address=Y,this.connectionId=$,this.serviceId=G,this.requestId=A.requestId,this.commandName=J,this.duration=iM.calculateDurationInMs(D),this.failure=PG(J,Z,B),this.serverConnectionId=X,this.databaseName=A.databaseName}get hasServiceId(){return!!this.serviceId}}rM.CommandFailedEvent=sM;rM.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var p81=new Set(["hello",s5.LEGACY_HELLO_COMMAND,s5.LEGACY_HELLO_COMMAND_CAMEL_CASE]),IG=(F)=>Object.keys(F)[0],i81=(F)=>F.ns.split(".")[1],PG=(F,A,B)=>rM.SENSITIVE_COMMANDS.has(F)||p81.has(F)&&A.speculativeAuthenticate?{}:B,lM={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},pM={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function NG(F){if(F instanceof RG.OpMsgRequest){let D={...F.command};if(D.ops instanceof RG.DocumentSequence)D.ops=D.ops.documents;if(D.nsInfo instanceof RG.DocumentSequence)D.nsInfo=D.nsInfo.documents;return D}if(F.query?.$query){let D;if(F.ns==="admin.$cmd")D=Object.assign({},F.query.$query);else D={find:i81(F)},Object.keys(lM).forEach((X)=>{if(F.query[X]!=null)D[lM[X]]={...F.query[X]}});return Object.keys(pM).forEach((X)=>{let Z=X;if(F[Z]!=null)D[pM[Z]]=F[Z]}),D}let A={},B={...F};if(F.query)A={...F.query},B.query=A;return F.query?A:B}function n81(F){if(!F)return F;return F.result?F.result:F}function MG(F){let A;if("id"in F)A=F.id;return{address:F.address,serviceId:F.serviceId,connectionId:A}}});var r5=z((Fj)=>{Object.defineProperty(Fj,"__esModule",{value:!0});Fj.ServerDescription=void 0;Fj.parseServerType=oM;Fj.compareTopologyVersion=eM;var m7=$1(),t81=l(),d7=s(),u0=F6(),o81=new Set([u0.ServerType.RSPrimary,u0.ServerType.Standalone,u0.ServerType.Mongos,u0.ServerType.LoadBalancer]),e81=new Set([u0.ServerType.RSPrimary,u0.ServerType.RSSecondary,u0.ServerType.Mongos,u0.ServerType.Standalone,u0.ServerType.LoadBalancer]);class tM{constructor(F,A,B={}){if(F==null||F==="")throw new t81.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof F==="string"?d7.HostAddress.fromString(F).toString():F.toString(),this.type=oM(A,B),this.hosts=A?.hosts?.map((D)=>D.toLowerCase())??[],this.passives=A?.passives?.map((D)=>D.toLowerCase())??[],this.arbiters=A?.arbiters?.map((D)=>D.toLowerCase())??[],this.tags=A?.tags??{},this.minWireVersion=A?.minWireVersion??0,this.maxWireVersion=A?.maxWireVersion??0,this.roundTripTime=B?.roundTripTime??-1,this.minRoundTripTime=B?.minRoundTripTime??0,this.lastUpdateTime=d7.now(),this.lastWriteDate=A?.lastWrite?.lastWriteDate??0,this.error=B.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??A?.topologyVersion??null,this.setName=A?.setName??null,this.setVersion=A?.setVersion??null,this.electionId=A?.electionId??null,this.logicalSessionTimeoutMinutes=A?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=A?.maxMessageSizeBytes??null,this.maxWriteBatchSize=A?.maxWriteBatchSize??null,this.maxBsonObjectSize=A?.maxBsonObjectSize??null,this.primary=A?.primary??null,this.me=A?.me?.toLowerCase()??null,this.$clusterTime=A?.$clusterTime??null,this.iscryptd=Boolean(A?.iscryptd)}get hostAddress(){return d7.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===u0.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return e81.has(this.type)}get isWritable(){return o81.has(this.type)}get host(){let F=`:${this.port}`.length;return this.address.slice(0,-F)}get port(){let F=this.address.split(":").pop();return F?Number.parseInt(F,10):27017}equals(F){let A=this.topologyVersion===F?.topologyVersion||eM(this.topologyVersion,F?.topologyVersion)===0,B=this.electionId!=null&&F?.electionId!=null?d7.compareObjectId(this.electionId,F.electionId)===0:this.electionId===F?.electionId;return F!=null&&F.iscryptd===this.iscryptd&&d7.errorStrictEqual(this.error,F.error)&&this.type===F.type&&this.minWireVersion===F.minWireVersion&&d7.arrayStrictEqual(this.hosts,F.hosts)&&F51(this.tags,F.tags)&&this.setName===F.setName&&this.setVersion===F.setVersion&&B&&this.primary===F.primary&&this.logicalSessionTimeoutMinutes===F.logicalSessionTimeoutMinutes&&A}}Fj.ServerDescription=tM;function oM(F,A){if(A?.loadBalanced)return u0.ServerType.LoadBalancer;if(!F||!F.ok)return u0.ServerType.Unknown;if(F.isreplicaset)return u0.ServerType.RSGhost;if(F.msg&&F.msg==="isdbgrid")return u0.ServerType.Mongos;if(F.setName)if(F.hidden)return u0.ServerType.RSOther;else if(F.isWritablePrimary)return u0.ServerType.RSPrimary;else if(F.secondary)return u0.ServerType.RSSecondary;else if(F.arbiterOnly)return u0.ServerType.RSArbiter;else return u0.ServerType.RSOther;return u0.ServerType.Standalone}function F51(F,A){let B=Object.keys(F),D=Object.keys(A);return B.length===D.length&&B.every((X)=>A[X]===F[X])}function eM(F,A){if(F==null||A==null)return-1;if(!F.processId.equals(A.processId))return-1;let B=typeof F.counter==="bigint"?m7.Long.fromBigInt(F.counter):m7.Long.isLong(F.counter)?F.counter:m7.Long.fromNumber(F.counter),D=typeof A.counter==="bigint"?m7.Long.fromBigInt(A.counter):m7.Long.isLong(A.counter)?A.counter:m7.Long.fromNumber(A.counter);return B.compare(D)}});var Zj=z((Dj)=>{Object.defineProperty(Dj,"__esModule",{value:!0});Dj.StreamDescription=void 0;var D51=$1(),X51=F6(),Z51=r5(),J51=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"];class Bj{constructor(F,A){this.hello=null,this.address=F,this.type=X51.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48000000,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=A?.logicalSessionTimeoutMinutes,this.loadBalanced=!!A?.loadBalanced,this.compressors=A&&A.compressors&&Array.isArray(A.compressors)?A.compressors:[],this.serverConnectionId=null}receiveResponse(F){if(F==null)return;if(this.hello=F,this.type=Z51.parseServerType(F),"connectionId"in F)this.serverConnectionId=this.parseServerConnectionID(F.connectionId);else this.serverConnectionId=null;for(let A of J51){if(F[A]!=null)this[A]=F[A];if("__nodejs_mock_server__"in F)this.__nodejs_mock_server__=F.__nodejs_mock_server__}if(F.compression)this.compressor=this.compressors.filter((A)=>F.compression?.includes(A))[0]}parseServerConnectionID(F){return D51.Long.isLong(F)?F.toBigInt():BigInt(F)}}Dj.StreamDescription=Bj});var Yj=z((Jj)=>{Object.defineProperty(Jj,"__esModule",{value:!0});Jj.onData=Y51;var t5=s();function Y51(F,{timeoutContext:A,signal:B}){B?.throwIfAborted();let D=new t5.List,X=new t5.List,Z=null,J=!1,Y={next(){let H=D.shift();if(H!=null)return Promise.resolve({value:H,done:!1});if(Z!=null){let U=Promise.reject(Z);return Z=null,U}if(J)return W();let{promise:q,resolve:Q,reject:K}=t5.promiseWithResolvers();return X.push({resolve:Q,reject:K}),q},return(){return W()},throw(H){return C(H),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await W()}};F.on("data",E),F.on("error",C);let $=t5.addAbortListener(B,function(){C(this.reason)}),G=A?.timeoutForSocketRead;return G?.throwIfExpired(),G?.then(void 0,C),Y;function E(H){let q=X.shift();if(q!=null)q.resolve({value:H,done:!1});else D.push(H)}function C(H){let q=X.shift();if(q!=null)q.reject(H);else Z=H;W()}function W(){F.off("data",E),F.off("error",C),$?.[t5.kDispose](),J=!0,G?.clear();let H={value:void 0,done:J};for(let q of X)q.resolve(H);return Promise.resolve(H)}}});var kG=z((Hj)=>{Object.defineProperty(Hj,"__esModule",{value:!0});Hj.TopologyDescription=void 0;var G51=$1(),nB=P3(),iB=l(),TG=s(),N1=F6(),R4=r5(),E51=nB.MIN_SUPPORTED_SERVER_VERSION,C51=nB.MAX_SUPPORTED_SERVER_VERSION,$j=nB.MIN_SUPPORTED_WIRE_VERSION,Gj=nB.MAX_SUPPORTED_WIRE_VERSION,W51=new Set([N1.ServerType.Mongos,N1.ServerType.Unknown]),Ej=new Set([N1.ServerType.Mongos,N1.ServerType.Standalone]),Cj=new Set([N1.ServerType.RSSecondary,N1.ServerType.RSArbiter,N1.ServerType.RSOther]);class o5{constructor(F,A=null,B=null,D=null,X=null,Z=null,J=null){J=J??{},this.type=F??N1.TopologyType.Unknown,this.servers=A??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=J.heartbeatFrequencyMS??0,this.localThresholdMS=J.localThresholdMS??15,this.setName=B??null,this.maxElectionId=X??null,this.maxSetVersion=D??null,this.commonWireVersion=Z??0;for(let Y of this.servers.values()){if(Y.type===N1.ServerType.Unknown||Y.type===N1.ServerType.LoadBalancer)continue;if(Y.minWireVersion>Gj)this.compatible=!1,this.compatibilityError=`Server at ${Y.address} requires wire version ${Y.minWireVersion}, but this version of the driver only supports up to ${Gj} (MongoDB ${C51})`;if(Y.maxWireVersion<$j){this.compatible=!1,this.compatibilityError=`Server at ${Y.address} reports wire version ${Y.maxWireVersion}, but this version of the driver requires at least ${$j} (MongoDB ${E51}).`;break}}this.logicalSessionTimeoutMinutes=null;for(let[,Y]of this.servers)if(Y.isReadable){if(Y.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=Y.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,Y.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(F,A=0){let B=F.hostnames(),D=new Set(this.servers.keys()),X=new Set(B),Z=new Set;for(let Y of D)if(X.delete(Y),!B.has(Y))Z.add(Y);if(X.size===0&&Z.size===0)return this;let J=new Map(this.servers);for(let Y of Z)J.delete(Y);if(X.size>0){if(A===0)for(let Y of X)J.set(Y,new R4.ServerDescription(Y));else if(J.size<A){let Y=TG.shuffle(X,A-J.size);for(let $ of Y)J.set($,new R4.ServerDescription($))}}return new o5(this.type,J,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(F){let A=F.address,{type:B,setName:D,maxSetVersion:X,maxElectionId:Z,commonWireVersion:J}=this,Y=F.type,$=new Map(this.servers);if(F.maxWireVersion!==0)if(J==null)J=F.maxWireVersion;else J=Math.min(J,F.maxWireVersion);if(typeof F.setName==="string"&&typeof D==="string"&&F.setName!==D)if(B===N1.TopologyType.Single)F=new R4.ServerDescription(A);else $.delete(A);if($.set(A,F),B===N1.TopologyType.Single)return new o5(N1.TopologyType.Single,$,D,X,Z,J,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(B===N1.TopologyType.Unknown)if(Y===N1.ServerType.Standalone&&this.servers.size!==1)$.delete(A);else B=H51(Y);if(B===N1.TopologyType.Sharded){if(!W51.has(Y))$.delete(A)}if(B===N1.TopologyType.ReplicaSetNoPrimary){if(Ej.has(Y))$.delete(A);if(Y===N1.ServerType.RSPrimary){let G=Wj($,F,D,X,Z);B=G[0],D=G[1],X=G[2],Z=G[3]}else if(Cj.has(Y)){let G=z51($,F,D);B=G[0],D=G[1]}}if(B===N1.TopologyType.ReplicaSetWithPrimary)if(Ej.has(Y))$.delete(A),B=C9($);else if(Y===N1.ServerType.RSPrimary){let G=Wj($,F,D,X,Z);B=G[0],D=G[1],X=G[2],Z=G[3]}else if(Cj.has(Y))B=q51($,F,D);else B=C9($);return new o5(B,$,D,X,Z,J,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let F=Array.from(this.servers.values()).filter((A)=>A.error);if(F.length>0)return F[0].error;return null}get hasKnownServers(){return Array.from(this.servers.values()).some((F)=>F.type!==N1.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some((F)=>F.isDataBearing)}hasServer(F){return this.servers.has(F)}toJSON(){return G51.EJSON.serialize(this)}}Hj.TopologyDescription=o5;function H51(F){switch(F){case N1.ServerType.Standalone:return N1.TopologyType.Single;case N1.ServerType.Mongos:return N1.TopologyType.Sharded;case N1.ServerType.RSPrimary:return N1.TopologyType.ReplicaSetWithPrimary;case N1.ServerType.RSOther:case N1.ServerType.RSSecondary:return N1.TopologyType.ReplicaSetNoPrimary;default:return N1.TopologyType.Unknown}}function Wj(F,A,B=null,D=null,X=null){let Z=($,G,E)=>{return`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${$.setVersion}, server electionId: ${$.electionId}, topology setVersion: ${G}, topology electionId: ${E}`};if(B=B||A.setName,B!==A.setName)return F.delete(A.address),[C9(F),B,D,X];if(A.maxWireVersion>=17){let $=TG.compareObjectId(X,A.electionId),G=$===0,E=$===-1,C=(D??-1)<=(A.setVersion??-1);if(E||G&&C)X=A.electionId,D=A.setVersion;else return F.set(A.address,new R4.ServerDescription(A.address,void 0,{error:new iB.MongoStalePrimaryError(Z(A,D,X))})),[C9(F),B,D,X]}else{let $=A.electionId?A.electionId:null;if(A.setVersion&&$){if(D&&X){if(D>A.setVersion||TG.compareObjectId(X,$)>0)return F.set(A.address,new R4.ServerDescription(A.address,void 0,{error:new iB.MongoStalePrimaryError(Z(A,D,X))})),[C9(F),B,D,X]}X=A.electionId}if(A.setVersion!=null&&(D==null||A.setVersion>D))D=A.setVersion}for(let[$,G]of F)if(G.type===N1.ServerType.RSPrimary&&G.address!==A.address){F.set($,new R4.ServerDescription(G.address,void 0,{error:new iB.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}A.allHosts.forEach(($)=>{if(!F.has($))F.set($,new R4.ServerDescription($))});let J=Array.from(F.keys()),Y=A.allHosts;return J.filter(($)=>Y.indexOf($)===-1).forEach(($)=>{F.delete($)}),[C9(F),B,D,X]}function q51(F,A,B=null){if(B==null)throw new iB.MongoRuntimeError('Argument "setName" is required if connected to a replica set');if(B!==A.setName||A.me&&A.address!==A.me)F.delete(A.address);return C9(F)}function z51(F,A,B=null){let D=N1.TopologyType.ReplicaSetNoPrimary;if(B=B??A.setName,B!==A.setName)return F.delete(A.address),[D,B];if(A.allHosts.forEach((X)=>{if(!F.has(X))F.set(X,new R4.ServerDescription(X))}),A.me&&A.address!==A.me)F.delete(A.address);return[D,B]}function C9(F){for(let A of F.values())if(A.type===N1.ServerType.RSPrimary)return N1.TopologyType.ReplicaSetWithPrimary;return N1.TopologyType.ReplicaSetNoPrimary}});var Kj=z((Qj)=>{Object.defineProperty(Qj,"__esModule",{value:!0});Qj.getReadPreference=U51;Qj.isSharded=V51;var Q51=l(),uG=f0(),zj=F6(),K51=kG();function U51(F){let A=F?.readPreference??uG.ReadPreference.primary;if(typeof A==="string")A=uG.ReadPreference.fromString(A);if(!(A instanceof uG.ReadPreference))throw new Q51.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return A}function V51(F){if(F==null)return!1;if(F.description&&F.description.type===zj.ServerType.Mongos)return!0;if(F.description&&F.description instanceof K51.TopologyDescription)return Array.from(F.description.servers.values()).some((B)=>B.type===zj.ServerType.Mongos);return!1}});var sB=z((Ij)=>{Object.defineProperty(Ij,"__esModule",{value:!0});Ij.CryptoConnection=Ij.SizedMessageTransform=Ij.Connection=void 0;Ij.hasSessionSupport=u51;var R51=m("stream"),wj=m("timers"),I51=$1(),I4=w0(),D0=l(),Uj=Y4(),P51=X6(),N51=f0(),M51=F6(),Vj=V5(),Lj=g0(),Y6=s(),OG=jG(),aB=d5(),j51=Zj(),T51=c5(),k51=Yj(),e5=f1(),SG=Kj();function u51(F){return F.description.logicalSessionTimeoutMinutes!=null}function O51(F,A){if(A.proxyHost)return A.hostAddress.toString();let{remoteAddress:B,remotePort:D}=F;if(typeof B==="string"&&typeof D==="number")return Y6.HostAddress.fromHostPort(B,D).toString();return Y6.uuidV4().toString("hex")}class G3 extends P51.TypedEventEmitter{static{this.COMMAND_STARTED=I4.COMMAND_STARTED}static{this.COMMAND_SUCCEEDED=I4.COMMAND_SUCCEEDED}static{this.COMMAND_FAILED=I4.COMMAND_FAILED}static{this.CLUSTER_TIME_RECEIVED=I4.CLUSTER_TIME_RECEIVED}static{this.CLOSE=I4.CLOSE}static{this.PINNED=I4.PINNED}static{this.UNPINNED=I4.UNPINNED}constructor(F,A){super();this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",Y6.noop),this.socket=F,this.id=A.id,this.address=O51(F,A),this.socketTimeoutMS=A.socketTimeoutMS??0,this.monitorCommands=A.monitorCommands,this.serverApi=A.serverApi,this.mongoLogger=A.mongoLogger,this.established=!1,this.description=new j51.StreamDescription(this.address,A),this.generation=A.generation,this.lastUseTime=Y6.now(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new xG({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(F){this.description.receiveResponse(F),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return Y6.calculateDurationInMs(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&Y6.maxWireVersion(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(Uj.MongoLoggableComponent.COMMAND,Uj.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=Y6.now()}onSocketError(F){this.onError(new D0.MongoNetworkError(F.message,{cause:F}))}onTransformError(F){this.onError(F)}onError(F){this.cleanup(F)}onClose(){let F=`connection ${this.id} to ${this.address} closed`;this.cleanup(new D0.MongoNetworkError(F))}onTimeout(){this.delayedTimeoutId=wj.setTimeout(()=>{let F=`connection ${this.id} to ${this.address} timed out`,A=this.hello==null;this.cleanup(new D0.MongoNetworkTimeoutError(F,{beforeHandshake:A}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(G3.PINNED),this.removeAllListeners(G3.UNPINNED);let F=`connection ${this.id} to ${this.address} closed`;this.cleanup(new D0.MongoNetworkError(F))}cleanup(F){if(this.closed)return;this.socket.destroy(),this.error=F,this.dataEvents?.throw(F).then(void 0,Y6.squashError),this.closed=!0,this.emit(G3.CLOSE)}prepareCommand(F,A,B){let D={...A},X=SG.getReadPreference(B),Z=B?.session,J=this.clusterTime;if(this.serverApi){let{version:G,strict:E,deprecationErrors:C}=this.serverApi;if(D.apiVersion=G,E!=null)D.apiStrict=E;if(C!=null)D.apiDeprecationErrors=C}if(this.hasSessionSupport&&Z){if(Z.clusterTime&&J&&Z.clusterTime.clusterTime.greaterThan(J.clusterTime))J=Z.clusterTime;let G=Vj.applySession(Z,D,B);if(G)throw G}else if(Z?.explicit)throw new D0.MongoCompatibilityError("Current topology does not support sessions");if(J)D.$clusterTime=J;if(this.description.type!==M51.ServerType.Standalone){if(!SG.isSharded(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&B.directConnection===!0&&X?.mode==="primary")D.$readPreference=N51.ReadPreference.primaryPreferred.toJSON();else if(SG.isSharded(this)&&!this.supportsOpMsg&&X?.mode!=="primary")D={$query:D,$readPreference:X.toJSON()};else if(X?.mode!=="primary")D.$readPreference=X.toJSON()}let Y={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:X.secondaryOk(),...B};return B.timeoutContext?.addMaxTimeMSToCommand(D,B),this.supportsOpMsg?new aB.OpMsgRequest(F,D,Y):new aB.OpQueryRequest(F,D,Y)}async*sendWire(F,A,B){this.throwIfAborted();let D=A.socketTimeoutMS??A?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(D);try{if(await this.writeCommand(F,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:A.timeoutContext,signal:A.signal}),F.moreToCome){yield e5.MongoDBResponse.empty;return}if(this.throwIfAborted(),A.timeoutContext?.csotEnabled()&&A.timeoutContext.minRoundTripTime!=null&&A.timeoutContext.remainingTimeMS<A.timeoutContext.minRoundTripTime)throw new D0.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let X of this.readMany(A)){this.socket.setTimeout(0);let Z=X.parse();yield(B??e5.MongoDBResponse).make(Z),this.throwIfAborted(),this.socket.setTimeout(D)}}finally{this.socket.setTimeout(0)}}async*sendCommand(F,A,B,D){B?.signal?.throwIfAborted();let X=this.prepareCommand(F.db,A,B),Z=0;if(this.shouldEmitAndLogCommand)Z=Y6.now(),this.emitAndLogCommand(this.monitorCommands,G3.COMMAND_STARTED,X.databaseName,this.established,new OG.CommandStartedEvent(this,X,this.description.serverConnectionId));let J=B.documentsReturnedIn==null||!B.raw?B:{...B,raw:!1,fieldsAsRaw:{[B.documentsReturnedIn]:!0}},Y=void 0,$=void 0;try{this.throwIfAborted();for await(Y of this.sendWire(X,B,D)){if($=void 0,B.session!=null)Vj.updateSessionFromResponse(B.session,Y);if(Y.$clusterTime)this.clusterTime=Y.$clusterTime,this.emit(G3.CLUSTER_TIME_RECEIVED,Y.$clusterTime);if(Y.ok===0){if(B.timeoutContext?.csotEnabled()&&Y.isMaxTimeExpiredError)throw new D0.MongoOperationTimeoutError("Server reported a timeout error",{cause:new D0.MongoServerError($??=Y.toObject(J))});throw new D0.MongoServerError($??=Y.toObject(J))}if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,G3.COMMAND_SUCCEEDED,X.databaseName,this.established,new OG.CommandSucceededEvent(this,X,X.moreToCome?{ok:1}:$??=Y.toObject(J),Z,this.description.serverConnectionId));if(D==null)yield $??=Y.toObject(J);else yield Y;this.throwIfAborted()}}catch(G){if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,G3.COMMAND_FAILED,X.databaseName,this.established,new OG.CommandFailedEvent(this,X,G,Z,this.description.serverConnectionId));throw G}}async command(F,A,B={},D){this.throwIfAborted(),B.signal?.throwIfAborted();for await(let X of this.sendCommand(F,A,B,D)){if(B.timeoutContext?.csotEnabled()){if(e5.MongoDBResponse.is(X)){if(X.isMaxTimeExpiredError)throw new D0.MongoOperationTimeoutError("Server reported a timeout error",{cause:new D0.MongoServerError(X.toObject())})}else if(Array.isArray(X?.writeErrors)&&X.writeErrors.some((Z)=>Z?.code===D0.MONGODB_ERROR_CODES.MaxTimeMSExpired)||X?.writeConcernError?.code===D0.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new D0.MongoOperationTimeoutError("Server reported a timeout error",{cause:new D0.MongoServerError(X)})}return X}throw new D0.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(F,A,B,D){(async()=>{this.throwIfAborted();for await(let Z of this.sendCommand(F,A,B))D(void 0,Z),this.throwIfAborted();throw new D0.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,D)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(F,A){let B=A.agreedCompressor==="none"||!aB.OpCompressedRequest.canCompress(F)?F:new aB.OpCompressedRequest(F,{agreedCompressor:A.agreedCompressor??"none",zlibCompressionLevel:A.zlibCompressionLevel??0}),D=Buffer.concat(await B.toBin());if(A.timeoutContext?.csotEnabled()){if(A.timeoutContext.minRoundTripTime!=null&&A.timeoutContext.remainingTimeMS<A.timeoutContext.minRoundTripTime)throw new D0.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining")}try{if(this.socket.write(D))return}catch(Y){let $=new D0.MongoNetworkError("unexpected error writing to socket",{cause:Y});throw this.onError($),$}let X=Y6.once(this.socket,"drain",A),Z=A?.timeoutContext?.timeoutForSocketWrite,J=Z?Promise.race([X,Z]):X;try{return await J}catch(Y){if(Lj.TimeoutError.is(Y)){let $=new D0.MongoOperationTimeoutError("Timed out at socket write");throw this.onError($),$}else if(Y===A.signal?.reason)this.onError(Y);throw Y}finally{Z?.clear()}}async*readMany(F){try{this.dataEvents=k51.onData(this.messageStream,F),this.messageStream.resume();for await(let A of this.dataEvents){let B=await T51.decompressResponse(A);if(yield B,!B.moreToCome)return}}catch(A){if(Lj.TimeoutError.is(A)){let B=new D0.MongoOperationTimeoutError(`Timed out during socket read (${A.duration}ms)`);throw this.dataEvents=null,this.onError(B),B}else if(A===F.signal?.reason)this.onError(A);throw A}finally{this.dataEvents=null,this.messageStream.pause()}}}Ij.Connection=G3;class xG extends R51.Transform{constructor({connection:F}){super({writableObjectMode:!1,readableObjectMode:!0});this.bufferPool=new Y6.BufferPool,this.connection=F}_transform(F,A,B){if(this.connection.delayedTimeoutId!=null)wj.clearTimeout(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null;this.bufferPool.append(F);while(this.bufferPool.length){let D=this.bufferPool.getInt32();if(D==null)break;if(D<0)return B(new D0.MongoParseError(`Message size cannot be negative: ${D}`));if(D>this.bufferPool.length)break;let X=this.bufferPool.read(D);if(!this.push(X))return B(new D0.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}B()}}Ij.SizedMessageTransform=xG;class Rj extends G3{constructor(F,A){super(F,A);this.autoEncrypter=A.autoEncrypter}async command(F,A,B,D){let{autoEncrypter:X}=this;if(!X)throw new D0.MongoRuntimeError("No AutoEncrypter available for encryption");if(Y6.maxWireVersion(this)===0)return await super.command(F,A,B,D);let J=A.find||A.findAndModify?A.sort:null,Y=A.createIndexes?A.indexes.map((W)=>W.key):null,$=await X.encrypt(F.toString(),A,B);if(J!=null&&(A.find||A.findAndModify))$.sort=J;if(Y!=null&&A.createIndexes)for(let[W,H]of Y.entries())$.indexes[W].key=H;let G=await super.command(F,$,B,D??e5.MongoDBResponse),E=await X.decrypt(G.toBytes(),B),C=D?.make(E)??I51.deserialize(E,B);if(X[I4.kDecorateResult]){if(D==null)Y6.decorateDecryptionResult(C,G.toObject(),!0);else if(C instanceof e5.CursorResponse)C.encryptedResponse=G}return C}}Ij.CryptoConnection=Rj});var bG=z((Oj)=>{Object.defineProperty(Oj,"__esModule",{value:!0});Oj.LEGAL_TCP_SOCKET_OPTIONS=Oj.LEGAL_TLS_SOCKET_OPTIONS=void 0;Oj.connect=y51;Oj.makeConnection=Tj;Oj.performInitialHandshake=kj;Oj.prepareHandshakeDocument=uj;Oj.makeSocket=tB;var Mj=m("net"),f51=m("tls"),jj=w0(),g51=v6(),E0=l(),_G=s(),b51=W4(),rB=X3(),Nj=sB(),c7=P3();async function y51(F){let A=null;try{let B=await tB(F);return A=Tj(F,B),await kj(A,F),A}catch(B){throw A?.destroy(),B}}function Tj(F,A){let B=F.connectionType??Nj.Connection;if(F.autoEncrypter)B=Nj.CryptoConnection;return new B(A,F)}function h51(F,A){let B=Number(F.maxWireVersion),D=Number(F.minWireVersion),X=!Number.isNaN(B)&&B>=c7.MIN_SUPPORTED_WIRE_VERSION,Z=!Number.isNaN(D)&&D<=c7.MAX_SUPPORTED_WIRE_VERSION;if(X){if(Z)return null;let Y=`Server at ${A.hostAddress} reports minimum wire version ${JSON.stringify(F.minWireVersion)}, but this version of the Node.js Driver requires at most ${c7.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${c7.MAX_SUPPORTED_SERVER_VERSION})`;return new E0.MongoCompatibilityError(Y)}let J=`Server at ${A.hostAddress} reports maximum wire version ${JSON.stringify(F.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${c7.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${c7.MIN_SUPPORTED_SERVER_VERSION})`;return new E0.MongoCompatibilityError(J)}async function kj(F,A){let B=A.credentials;if(B){if(B.mechanism!==rB.AuthMechanism.MONGODB_DEFAULT&&!A.authProviders.getOrCreateProvider(B.mechanism,B.mechanismProperties))throw new E0.MongoInvalidArgumentError(`AuthMechanism '${B.mechanism}' not supported`)}let D=new b51.AuthContext(F,B,A);F.authContext=D;let X=await uj(D),Z={...A,raw:!1};if(typeof A.connectTimeoutMS==="number")Z.socketTimeoutMS=A.connectTimeoutMS;let J=new Date().getTime(),Y=await G(X,Z);if(!("isWritablePrimary"in Y))Y.isWritablePrimary=Y[jj.LEGACY_HELLO_COMMAND];if(Y.helloOk)F.helloOk=!0;let $=h51(Y,A);if($)throw $;if(A.loadBalanced){if(!Y.serviceId)throw new E0.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.")}if(F.hello=Y,F.lastHelloMS=new Date().getTime()-J,!Y.arbiterOnly&&B){D.response=Y;let E=B.resolveAuthMechanism(Y),C=A.authProviders.getOrCreateProvider(E.mechanism,E.mechanismProperties);if(!C)throw new E0.MongoInvalidArgumentError(`No AuthProvider for ${E.mechanism} defined.`);try{await C.auth(D)}catch(W){if(W instanceof E0.MongoError){if(W.addErrorLabel(E0.MongoErrorLabel.HandshakeError),E0.needsRetryableWriteLabel(W,Y.maxWireVersion,F.description.type))W.addErrorLabel(E0.MongoErrorLabel.RetryableWriteError)}throw W}}F.established=!0;async function G(E,C){try{return await F.command(_G.ns("admin.$cmd"),E,C)}catch(W){if(W instanceof E0.MongoError)W.addErrorLabel(E0.MongoErrorLabel.HandshakeError);throw W}}}async function uj(F){let A=F.options,B=A.compressors?A.compressors:[],{serverApi:D}=F.connection,X=await A.metadata,Z={[D?.version||A.loadBalanced===!0?"hello":jj.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:X,compression:B};if(A.loadBalanced===!0)Z.loadBalanced=!0;let J=F.credentials;if(J){if(J.mechanism===rB.AuthMechanism.MONGODB_DEFAULT&&J.username){Z.saslSupportedMechs=`${J.source}.${J.username}`;let $=F.options.authProviders.getOrCreateProvider(rB.AuthMechanism.MONGODB_SCRAM_SHA256,J.mechanismProperties);if(!$)throw new E0.MongoInvalidArgumentError(`No AuthProvider for ${rB.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await $.prepare(Z,F)}let Y=F.options.authProviders.getOrCreateProvider(J.mechanism,J.mechanismProperties);if(!Y)throw new E0.MongoInvalidArgumentError(`No AuthProvider for ${J.mechanism} defined.`);return await Y.prepare(Z,F)}return Z}Oj.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];Oj.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function fG(F){let A=F.hostAddress;if(!A)throw new E0.MongoInvalidArgumentError('Option "hostAddress" is required');let B={};for(let D of Oj.LEGAL_TCP_SOCKET_OPTIONS)if(F[D]!=null)B[D]=F[D];if(B.keepAliveInitialDelay??=120000,B.keepAlive=!0,B.noDelay=F.noDelay??!0,typeof A.socketPath==="string")return B.path=A.socketPath,B;else if(typeof A.host==="string")return B.host=A.host,B.port=A.port,B;else throw new E0.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(A)}`)}function v51(F){let A=fG(F);for(let B of Oj.LEGAL_TLS_SOCKET_OPTIONS)if(F[B]!=null)A[B]=F[B];if(F.existingSocket)A.socket=F.existingSocket;if(A.servername==null&&A.host&&!Mj.isIP(A.host))A.servername=A.host;return A}async function tB(F){let A=F.tls??!1,B=F.connectTimeoutMS??30000,D=F.existingSocket,X;if(F.proxyHost!=null)return await d51({...F,connectTimeoutMS:B});if(A){let G=f51.connect(v51(F));if(typeof G.disableRenegotiation==="function")G.disableRenegotiation();X=G}else if(D)X=D;else X=Mj.createConnection(fG(F));X.setTimeout(B);let Z=null,{promise:J,resolve:Y,reject:$}=_G.promiseWithResolvers();if(D)Y(X);else{let G=performance.now(),E=A?"secureConnect":"connect";if(X.once(E,()=>Y(X)).once("error",(C)=>$(new E0.MongoNetworkError(E0.MongoError.buildErrorMessage(C),{cause:C}))).once("timeout",()=>{$(new E0.MongoNetworkTimeoutError(`Socket '${E}' timed out after ${performance.now()-G|0}ms (connectTimeoutMS: ${B})`))}).once("close",()=>$(new E0.MongoNetworkError(`Socket closed after ${performance.now()-G|0} during connection establishment`))),F.cancellationToken!=null)Z=()=>$(new E0.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-G|0}`)),F.cancellationToken.once("cancel",Z)}try{return X=await J,X}catch(G){throw X.destroy(),G}finally{if(X.setTimeout(0),Z!=null)F.cancellationToken?.removeListener("cancel",Z)}}var FF=null;function m51(){if(FF==null){let F=g51.getSocks();if("kModuleError"in F)throw F.kModuleError;FF=F}return FF}async function d51(F){let A=_G.HostAddress.fromHostPort(F.proxyHost??"",F.proxyPort??1080),B=await tB({...F,hostAddress:A,tls:!1,proxyHost:void 0}),D=fG(F);if(typeof D.host!=="string"||typeof D.port!=="number")throw new E0.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");FF??=m51();let X;try{X=(await FF.SocksClient.createConnection({existing_socket:B,timeout:F.connectTimeoutMS,command:"connect",destination:{host:D.host,port:D.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:F.proxyUsername||void 0,password:F.proxyPassword||void 0}})).socket}catch(Z){throw new E0.MongoNetworkError(E0.MongoError.buildErrorMessage(Z),{cause:Z})}return await tB({...F,existingSocket:X,proxyHost:void 0})}});var oB=z((dj)=>{Object.defineProperty(dj,"__esModule",{value:!0});dj.ServerHeartbeatFailedEvent=dj.ServerHeartbeatSucceededEvent=dj.ServerHeartbeatStartedEvent=dj.TopologyClosedEvent=dj.TopologyOpeningEvent=dj.TopologyDescriptionChangedEvent=dj.ServerClosedEvent=dj.ServerOpeningEvent=dj.ServerDescriptionChangedEvent=void 0;var u3=w0();class xj{constructor(F,A,B,D){this.name=u3.SERVER_DESCRIPTION_CHANGED,this.topologyId=F,this.address=A,this.previousDescription=B,this.newDescription=D}}dj.ServerDescriptionChangedEvent=xj;class _j{constructor(F,A){this.name=u3.SERVER_OPENING,this.topologyId=F,this.address=A}}dj.ServerOpeningEvent=_j;class fj{constructor(F,A){this.name=u3.SERVER_CLOSED,this.topologyId=F,this.address=A}}dj.ServerClosedEvent=fj;class gj{constructor(F,A,B){this.name=u3.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=F,this.previousDescription=A,this.newDescription=B}}dj.TopologyDescriptionChangedEvent=gj;class bj{constructor(F){this.name=u3.TOPOLOGY_OPENING,this.topologyId=F}}dj.TopologyOpeningEvent=bj;class yj{constructor(F){this.name=u3.TOPOLOGY_CLOSED,this.topologyId=F}}dj.TopologyClosedEvent=yj;class hj{constructor(F,A){this.name=u3.SERVER_HEARTBEAT_STARTED,this.connectionId=F,this.awaited=A}}dj.ServerHeartbeatStartedEvent=hj;class vj{constructor(F,A,B,D){this.name=u3.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=F,this.duration=A,this.reply=B??{},this.awaited=D}}dj.ServerHeartbeatSucceededEvent=vj;class mj{constructor(F,A,B,D){this.name=u3.SERVER_HEARTBEAT_FAILED,this.connectionId=F,this.duration=A,this.failure=B,this.awaited=D}}dj.ServerHeartbeatFailedEvent=mj});var hG=z((AT)=>{Object.defineProperty(AT,"__esModule",{value:!0});AT.ConnectionPoolClearedEvent=AT.ConnectionCheckedInEvent=AT.ConnectionCheckedOutEvent=AT.ConnectionCheckOutFailedEvent=AT.ConnectionCheckOutStartedEvent=AT.ConnectionClosedEvent=AT.ConnectionReadyEvent=AT.ConnectionCreatedEvent=AT.ConnectionPoolClosedEvent=AT.ConnectionPoolReadyEvent=AT.ConnectionPoolCreatedEvent=AT.ConnectionPoolMonitoringEvent=void 0;var d6=w0(),yG=s();class $6{constructor(F){this.time=new Date,this.address=F.address}}AT.ConnectionPoolMonitoringEvent=$6;class lj extends $6{constructor(F){super(F);this.name=d6.CONNECTION_POOL_CREATED;let{maxConnecting:A,maxPoolSize:B,minPoolSize:D,maxIdleTimeMS:X,waitQueueTimeoutMS:Z}=F.options;this.options={maxConnecting:A,maxPoolSize:B,minPoolSize:D,maxIdleTimeMS:X,waitQueueTimeoutMS:Z}}}AT.ConnectionPoolCreatedEvent=lj;class pj extends $6{constructor(F){super(F);this.name=d6.CONNECTION_POOL_READY}}AT.ConnectionPoolReadyEvent=pj;class ij extends $6{constructor(F){super(F);this.name=d6.CONNECTION_POOL_CLOSED}}AT.ConnectionPoolClosedEvent=ij;class nj extends $6{constructor(F,A){super(F);this.name=d6.CONNECTION_CREATED,this.connectionId=A.id}}AT.ConnectionCreatedEvent=nj;class aj extends $6{constructor(F,A,B){super(F);this.name=d6.CONNECTION_READY,this.durationMS=yG.now()-B,this.connectionId=A.id}}AT.ConnectionReadyEvent=aj;class sj extends $6{constructor(F,A,B,D){super(F);this.name=d6.CONNECTION_CLOSED,this.connectionId=A.id,this.reason=B,this.serviceId=A.serviceId,this.error=D??null}}AT.ConnectionClosedEvent=sj;class rj extends $6{constructor(F){super(F);this.name=d6.CONNECTION_CHECK_OUT_STARTED}}AT.ConnectionCheckOutStartedEvent=rj;class tj extends $6{constructor(F,A,B,D){super(F);this.name=d6.CONNECTION_CHECK_OUT_FAILED,this.durationMS=yG.now()-B,this.reason=A,this.error=D}}AT.ConnectionCheckOutFailedEvent=tj;class oj extends $6{constructor(F,A,B){super(F);this.name=d6.CONNECTION_CHECKED_OUT,this.durationMS=yG.now()-B,this.connectionId=A.id}}AT.ConnectionCheckedOutEvent=oj;class ej extends $6{constructor(F,A){super(F);this.name=d6.CONNECTION_CHECKED_IN,this.connectionId=A.id}}AT.ConnectionCheckedInEvent=ej;class FT extends $6{constructor(F,A={}){super(F);this.name=d6.CONNECTION_POOL_CLEARED,this.serviceId=A.serviceId,this.interruptInUseConnections=A.interruptInUseConnections}}AT.ConnectionPoolClearedEvent=FT});var mG=z((JT)=>{Object.defineProperty(JT,"__esModule",{value:!0});JT.WaitQueueTimeoutError=JT.PoolClearedOnNetworkError=JT.PoolClearedError=JT.PoolClosedError=void 0;var eB=l();class DT extends eB.MongoDriverError{constructor(F){super("Attempted to check out a connection from closed connection pool");this.address=F.address}get name(){return"MongoPoolClosedError"}}JT.PoolClosedError=DT;class vG extends eB.MongoNetworkError{constructor(F,A){let B=A?A:`Connection pool for ${F.address} was cleared because another operation failed with: "${F.serverError?.message}"`;super(B,F.serverError?{cause:F.serverError}:void 0);this.address=F.address,this.addErrorLabel(eB.MongoErrorLabel.PoolRequestedRetry)}get name(){return"MongoPoolClearedError"}}JT.PoolClearedError=vG;class XT extends vG{constructor(F){super(F,`Connection to ${F.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}}JT.PoolClearedOnNetworkError=XT;class ZT extends eB.MongoDriverError{constructor(F,A){super(F);this.address=A}get name(){return"MongoWaitQueueTimeoutError"}}JT.WaitQueueTimeoutError=ZT});var CT=z((GT)=>{Object.defineProperty(GT,"__esModule",{value:!0});GT.ConnectionPool=GT.PoolState=void 0;var l7=m("timers"),R6=w0(),c6=l(),$T=X6(),QF1=g0(),O3=s(),KF1=bG(),FD=sB(),e0=hG(),p7=mG(),UF1=TY();GT.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});class h0 extends $T.TypedEventEmitter{static{this.CONNECTION_POOL_CREATED=R6.CONNECTION_POOL_CREATED}static{this.CONNECTION_POOL_CLOSED=R6.CONNECTION_POOL_CLOSED}static{this.CONNECTION_POOL_CLEARED=R6.CONNECTION_POOL_CLEARED}static{this.CONNECTION_POOL_READY=R6.CONNECTION_POOL_READY}static{this.CONNECTION_CREATED=R6.CONNECTION_CREATED}static{this.CONNECTION_READY=R6.CONNECTION_READY}static{this.CONNECTION_CLOSED=R6.CONNECTION_CLOSED}static{this.CONNECTION_CHECK_OUT_STARTED=R6.CONNECTION_CHECK_OUT_STARTED}static{this.CONNECTION_CHECK_OUT_FAILED=R6.CONNECTION_CHECK_OUT_FAILED}static{this.CONNECTION_CHECKED_OUT=R6.CONNECTION_CHECKED_OUT}static{this.CONNECTION_CHECKED_IN=R6.CONNECTION_CHECKED_IN}constructor(F,A){super();if(this.on("error",O3.noop),this.options=Object.freeze({connectionType:FD.Connection,...A,maxPoolSize:A.maxPoolSize??100,minPoolSize:A.minPoolSize??0,maxConnecting:A.maxConnecting??2,maxIdleTimeMS:A.maxIdleTimeMS??0,waitQueueTimeoutMS:A.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:A.minPoolSizeCheckFrequencyMS??100,autoEncrypter:A.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new c6.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=GT.PoolState.paused,this.server=F,this.connections=new O3.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=O3.makeCounter(1),this.cancellationToken=new $T.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new O3.List,this.metrics=new UF1.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(h0.CONNECTION_POOL_CREATED,new e0.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===GT.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){if(this.poolState!==GT.PoolState.paused)return;this.poolState=GT.PoolState.ready,this.emitAndLog(h0.CONNECTION_POOL_READY,new e0.ConnectionPoolReadyEvent(this)),l7.clearTimeout(this.minPoolSizeTimer),this.ensureMinPoolSize()}async checkOut(F){let A=O3.now();this.emitAndLog(h0.CONNECTION_CHECK_OUT_STARTED,new e0.ConnectionCheckOutStartedEvent(this));let{promise:B,resolve:D,reject:X}=O3.promiseWithResolvers(),Z=F.timeoutContext.connectionCheckoutTimeout,J={resolve:D,reject:X,cancelled:!1,checkoutTime:A},Y=O3.addAbortListener(F.signal,function(){J.cancelled=!0,X(this.reason)});this.waitQueue.push(J),process.nextTick(()=>this.processWaitQueue());try{return Z?.throwIfExpired(),await(Z?Promise.race([B,Z]):B)}catch($){if(QF1.TimeoutError.is($)){Z?.clear(),J.cancelled=!0,this.emitAndLog(h0.CONNECTION_CHECK_OUT_FAILED,new e0.ConnectionCheckOutFailedEvent(this,"timeout",J.checkoutTime));let G=new p7.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);if(F.timeoutContext.csotEnabled())throw new c6.MongoOperationTimeoutError("Timed out during connection checkout",{cause:G});throw G}throw $}finally{Y?.[O3.kDispose](),Z?.clear()}}checkIn(F){if(!this.checkedOut.has(F))return;let A=this.closed,B=this.connectionIsStale(F),D=!!(A||B||F.closed);if(!D)F.markAvailable(),this.connections.unshift(F);if(this.checkedOut.delete(F),this.emitAndLog(h0.CONNECTION_CHECKED_IN,new e0.ConnectionCheckedInEvent(this,F)),D){let X=F.closed?"error":A?"poolClosed":"stale";this.destroyConnection(F,X)}process.nextTick(()=>this.processWaitQueue())}clear(F={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:X}=F;if(!X)throw new c6.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let Z=X.toHexString(),J=this.serviceGenerations.get(Z);if(J==null)throw new c6.MongoRuntimeError("Service generations are required in load balancer mode.");else this.serviceGenerations.set(Z,J+1);this.emitAndLog(h0.CONNECTION_POOL_CLEARED,new e0.ConnectionPoolClearedEvent(this,{serviceId:X}));return}let A=F.interruptInUseConnections??!1,B=this.generation;this.generation+=1;let D=this.poolState===GT.PoolState.paused;if(this.poolState=GT.PoolState.paused,this.clearMinPoolSizeTimer(),!D)this.emitAndLog(h0.CONNECTION_POOL_CLEARED,new e0.ConnectionPoolClearedEvent(this,{interruptInUseConnections:A}));if(A)process.nextTick(()=>this.interruptInUseConnections(B));this.processWaitQueue()}interruptInUseConnections(F){for(let A of this.checkedOut)if(A.generation<=F)A.onError(new p7.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let F of this.checkedOut)F.onError(new c6.MongoClientClosedError)}close(){if(this.closed)return;if(this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return==="function")this.connectionCounter.return(void 0);this.poolState=GT.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let F of this.connections)this.emitAndLog(h0.CONNECTION_CLOSED,new e0.ConnectionClosedEvent(this,F,"poolClosed")),F.destroy();this.connections.clear(),this.emitAndLog(h0.CONNECTION_POOL_CLOSED,new e0.ConnectionPoolClosedEvent(this))}async reauthenticate(F){let A=F.authContext;if(!A)throw new c6.MongoRuntimeError("No auth context found on connection.");let B=A.credentials;if(!B)throw new c6.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let D=B.resolveAuthMechanism(F.hello),X=this.server.topology.client.s.authProviders.getOrCreateProvider(D.mechanism,D.mechanismProperties);if(!X)throw new c6.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${B.mechanism}`);await X.reauth(A);return}clearMinPoolSizeTimer(){let F=this.minPoolSizeTimer;if(F)l7.clearTimeout(F)}destroyConnection(F,A){this.emitAndLog(h0.CONNECTION_CLOSED,new e0.ConnectionClosedEvent(this,F,A)),F.destroy()}connectionIsStale(F){let A=F.serviceId;if(this.loadBalanced&&A){let B=A.toHexString(),D=this.serviceGenerations.get(B);return F.generation!==D}return F.generation!==this.generation}connectionIsIdle(F){return!!(this.options.maxIdleTimeMS&&F.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(F){let A=this.connectionIsStale(F),B=this.connectionIsIdle(F);if(!A&&!B&&!F.closed)return!1;let D=F.closed?"error":A?"stale":"idle";return this.destroyConnection(F,D),!0}createConnection(F){let A={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,metadata:this.server.topology.client.options.metadata};this.pending++;let B=O3.now();this.emitAndLog(h0.CONNECTION_CREATED,new e0.ConnectionCreatedEvent(this,{id:A.id})),KF1.connect(A).then((D)=>{if(this.poolState!==GT.PoolState.ready){this.pending--,D.destroy(),F(this.closed?new p7.PoolClosedError(this):new p7.PoolClearedError(this));return}for(let X of[...R6.APM_EVENTS,FD.Connection.CLUSTER_TIME_RECEIVED])D.on(X,(Z)=>this.emit(X,Z));if(this.loadBalanced){D.on(FD.Connection.PINNED,(Z)=>this.metrics.markPinned(Z)),D.on(FD.Connection.UNPINNED,(Z)=>this.metrics.markUnpinned(Z));let X=D.serviceId;if(X){let Z,J=X.toHexString();if(Z=this.serviceGenerations.get(J))D.generation=Z;else this.serviceGenerations.set(J,0),D.generation=0}}D.markAvailable(),this.emitAndLog(h0.CONNECTION_READY,new e0.ConnectionReadyEvent(this,D,B)),this.pending--,F(void 0,D)},(D)=>{if(this.pending--,this.server.handleError(D),this.emitAndLog(h0.CONNECTION_CLOSED,new e0.ConnectionClosedEvent(this,{id:A.id,serviceId:void 0},"error",D)),D instanceof c6.MongoNetworkError||D instanceof c6.MongoServerError)D.connectionGeneration=A.generation;F(D??new c6.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let F=this.options.minPoolSize;if(this.poolState!==GT.PoolState.ready)return;if(this.connections.prune((A)=>this.destroyConnectionIfPerished(A)),this.totalConnectionCount<F&&this.pendingConnectionCount<this.options.maxConnecting)this.createConnection((A,B)=>{if(!A&&B)this.connections.push(B),process.nextTick(()=>this.processWaitQueue());if(this.poolState===GT.PoolState.ready)l7.clearTimeout(this.minPoolSizeTimer),this.minPoolSizeTimer=l7.setTimeout(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)});else l7.clearTimeout(this.minPoolSizeTimer),this.minPoolSizeTimer=l7.setTimeout(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)}processWaitQueue(){if(this.processingWaitQueue)return;this.processingWaitQueue=!0;while(this.waitQueueSize){let B=this.waitQueue.first();if(!B){this.waitQueue.shift();continue}if(B.cancelled){this.waitQueue.shift();continue}if(this.poolState!==GT.PoolState.ready){let X=this.closed?"poolClosed":"connectionError",Z=this.closed?new p7.PoolClosedError(this):new p7.PoolClearedError(this);this.emitAndLog(h0.CONNECTION_CHECK_OUT_FAILED,new e0.ConnectionCheckOutFailedEvent(this,X,B.checkoutTime,Z)),this.waitQueue.shift(),B.reject(Z);continue}if(!this.availableConnectionCount)break;let D=this.connections.shift();if(!D)break;if(!this.destroyConnectionIfPerished(D))this.checkedOut.add(D),this.emitAndLog(h0.CONNECTION_CHECKED_OUT,new e0.ConnectionCheckedOutEvent(this,D,B.checkoutTime)),this.waitQueue.shift(),B.resolve(D)}let{maxPoolSize:F,maxConnecting:A}=this.options;while(this.waitQueueSize>0&&this.pendingConnectionCount<A&&(F===0||this.totalConnectionCount<F)){let B=this.waitQueue.shift();if(!B||B.cancelled)continue;this.createConnection((D,X)=>{if(B.cancelled){if(!D&&X)this.connections.push(X)}else if(D)this.emitAndLog(h0.CONNECTION_CHECK_OUT_FAILED,new e0.ConnectionCheckOutFailedEvent(this,"connectionError",B.checkoutTime,D)),B.reject(D);else if(X)this.checkedOut.add(X),this.emitAndLog(h0.CONNECTION_CHECKED_OUT,new e0.ConnectionCheckedOutEvent(this,X,B.checkoutTime)),B.resolve(X);process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}}GT.ConnectionPool=h0});var iG=z((qT)=>{Object.defineProperty(qT,"__esModule",{value:!0});qT.Server=void 0;var VF1=sB(),LF1=CT(),wF1=mG(),E3=w0(),X0=l(),RF1=X6(),IF1=H5(),lG=kY(),W9=s(),WT=P2(),n1=F6(),PF1=nG(),pG=r5(),NF1=C5(),AF=W9.makeStateMachine({[n1.STATE_CLOSED]:[n1.STATE_CLOSED,n1.STATE_CONNECTING],[n1.STATE_CONNECTING]:[n1.STATE_CONNECTING,n1.STATE_CLOSING,n1.STATE_CONNECTED,n1.STATE_CLOSED],[n1.STATE_CONNECTED]:[n1.STATE_CONNECTED,n1.STATE_CLOSING,n1.STATE_CLOSED],[n1.STATE_CLOSING]:[n1.STATE_CLOSING,n1.STATE_CLOSED]});class H9 extends RF1.TypedEventEmitter{static{this.SERVER_HEARTBEAT_STARTED=E3.SERVER_HEARTBEAT_STARTED}static{this.SERVER_HEARTBEAT_SUCCEEDED=E3.SERVER_HEARTBEAT_SUCCEEDED}static{this.SERVER_HEARTBEAT_FAILED=E3.SERVER_HEARTBEAT_FAILED}static{this.CONNECT=E3.CONNECT}static{this.DESCRIPTION_RECEIVED=E3.DESCRIPTION_RECEIVED}static{this.CLOSED=E3.CLOSED}static{this.ENDED=E3.ENDED}constructor(F,A,B){super();this.on("error",W9.noop),this.serverApi=B.serverApi;let D={hostAddress:A.hostAddress,...B};this.topology=F,this.pool=new LF1.ConnectionPool(this,D),this.s={description:A,options:B,state:n1.STATE_CLOSED,operationCount:0};for(let X of[...E3.CMAP_EVENTS,...E3.APM_EVENTS])this.pool.on(X,(Z)=>this.emit(X,Z));if(this.pool.on(VF1.Connection.CLUSTER_TIME_RECEIVED,(X)=>{this.clusterTime=X}),this.loadBalanced){this.monitor=null;return}this.monitor=new PF1.Monitor(this,this.s.options);for(let X of E3.HEARTBEAT_EVENTS)this.monitor.on(X,(Z)=>this.emit(X,Z));this.monitor.on("resetServer",(X)=>dG(this,X)),this.monitor.on(H9.SERVER_HEARTBEAT_SUCCEEDED,(X)=>{if(this.emit(H9.DESCRIPTION_RECEIVED,new pG.ServerDescription(this.description.hostAddress,X.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===n1.STATE_CONNECTING)AF(this,n1.STATE_CONNECTED),this.emit(H9.CONNECT,this)})}get clusterTime(){return this.topology.clusterTime}set clusterTime(F){this.topology.clusterTime=F}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter;return}get loadBalanced(){return this.topology.description.type===n1.TopologyType.LoadBalanced}connect(){if(this.s.state!==n1.STATE_CLOSED)return;if(AF(this,n1.STATE_CONNECTING),!this.loadBalanced)this.monitor?.connect();else AF(this,n1.STATE_CONNECTED),this.emit(H9.CONNECT,this)}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){if(this.s.state===n1.STATE_CLOSED)return;if(AF(this,n1.STATE_CLOSING),!this.loadBalanced)this.monitor?.close();this.pool.close(),AF(this,n1.STATE_CLOSED),this.emit("closed")}requestCheck(){if(!this.loadBalanced)this.monitor?.requestCheck()}async command(F,A){if(this.s.state===n1.STATE_CLOSING||this.s.state===n1.STATE_CLOSED)throw new X0.MongoServerClosedError;let B=F.session,D=B?.pinnedConnection;if(this.incrementOperationCount(),D==null)try{D=await this.pool.checkOut({timeoutContext:A,signal:F.options.signal})}catch(E){if(this.decrementOperationCount(),!(E instanceof wF1.PoolClearedError))this.handleError(E);throw E}let X=null,Z=()=>{if(this.decrementOperationCount(),B?.pinnedConnection!==D)if(X!=null){let E=()=>{this.pool.checkIn(D)};X.then(E,E)}else this.pool.checkIn(D)},J;try{J=F.buildCommand(D,B)}catch(E){throw Z(),E}let Y=F.buildOptions(A),$=F.ns;if(this.loadBalanced&&MF1(J,B)&&!B?.pinnedConnection)B?.pin(D);if(Y.directConnection=this.topology.s.options.directConnection,F instanceof IF1.AggregateOperation&&F.hasWriteStage&&W9.maxWireVersion(D)<NF1.MIN_SECONDARY_WRITE_WIRE_VERSION)delete Y.readPreference;if(this.description.iscryptd)Y.omitMaxTimeMS=!0;try{try{let E=await D.command($,J,Y,F.SERVER_COMMAND_RESPONSE_TYPE);return WT.throwIfWriteConcernError(E),E}catch(E){throw this.decorateCommandError(D,J,Y,E)}}catch(E){if(E instanceof X0.MongoError&&E.code===X0.MONGODB_ERROR_CODES.Reauthenticate){X=this.pool.reauthenticate(D),X.then(void 0,(C)=>{X=null,W9.squashError(C)}),await W9.abortable(X,Y),X=null;try{let C=await D.command($,J,Y,F.SERVER_COMMAND_RESPONSE_TYPE);return WT.throwIfWriteConcernError(C),C}catch(C){throw this.decorateCommandError(D,J,Y,C)}}else throw E}finally{Z()}}handleError(F,A){if(!(F instanceof X0.MongoError))return;if(F.connectionGeneration&&F.connectionGeneration<this.pool.generation)return;let D=F instanceof X0.MongoNetworkError&&!(F instanceof X0.MongoNetworkTimeoutError),X=F instanceof X0.MongoNetworkError&&F.beforeHandshake,Z=F.hasErrorLabel(X0.MongoErrorLabel.HandshakeError);if(D||X||Z){if(!this.loadBalanced)F.addErrorLabel(X0.MongoErrorLabel.ResetPool),dG(this,F);else if(A)this.pool.clear({serviceId:A.serviceId})}else if(X0.isSDAMUnrecoverableError(F)){if(TF1(this,F)){let J=X0.isNodeShuttingDownError(F);if(this.loadBalanced&&A&&J)this.pool.clear({serviceId:A.serviceId});if(!this.loadBalanced){if(J)F.addErrorLabel(X0.MongoErrorLabel.ResetPool);dG(this,F),process.nextTick(()=>this.requestCheck())}}}}decorateCommandError(F,A,B,D){if(typeof D!=="object"||D==null||!("name"in D))throw new X0.MongoRuntimeError("An unexpected error type: "+typeof D);if(D.name==="AbortError"&&"cause"in D&&D.cause instanceof X0.MongoError)D=D.cause;if(!(D instanceof X0.MongoError))return D;if(jF1(this.pool,F))return D;let X=B?.session;if(D instanceof X0.MongoNetworkError){if(X&&!X.hasEnded&&X.serverSession)X.serverSession.isDirty=!0;if(cG(X,A)&&!D.hasErrorLabel(X0.MongoErrorLabel.TransientTransactionError))D.addErrorLabel(X0.MongoErrorLabel.TransientTransactionError);if((HT(this.topology)||lG.isTransactionCommand(A))&&W9.supportsRetryableWrites(this)&&!cG(X,A))D.addErrorLabel(X0.MongoErrorLabel.RetryableWriteError)}else if((HT(this.topology)||lG.isTransactionCommand(A))&&X0.needsRetryableWriteLabel(D,W9.maxWireVersion(this),this.description.type)&&!cG(X,A))D.addErrorLabel(X0.MongoErrorLabel.RetryableWriteError);if(X&&X.isPinned&&D.hasErrorLabel(X0.MongoErrorLabel.TransientTransactionError))X.unpin({force:!0});return this.handleError(D,F),D}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}}qT.Server=H9;function dG(F,A){if(F.loadBalanced)return;if(A instanceof X0.MongoNetworkError&&!(A instanceof X0.MongoNetworkTimeoutError))F.monitor?.reset();F.emit(H9.DESCRIPTION_RECEIVED,new pG.ServerDescription(F.description.hostAddress,void 0,{error:A}))}function MF1(F,A){if(A)return A.inTransaction()||A.transaction.isCommitted&&"commitTransaction"in F||"aggregate"in F||"find"in F||"getMore"in F||"listCollections"in F||"listIndexes"in F||"bulkWrite"in F;return!1}function jF1(F,A){if(A.serviceId)return A.generation!==F.serviceGenerations.get(A.serviceId.toHexString());return A.generation!==F.generation}function TF1(F,A){let B=A.topologyVersion,D=F.description.topologyVersion;return pG.compareTopologyVersion(D,B)<0}function cG(F,A){return F&&F.inTransaction()&&!lG.isTransactionCommand(A)}function HT(F){return F.s.options.retryWrites!==!1}});var nG=z((wT)=>{Object.defineProperty(wT,"__esModule",{value:!0});wT.RTTSampler=wT.MonitorInterval=wT.RTTPinger=wT.Monitor=wT.ServerMonitoringMode=void 0;var P4=m("timers"),QT=$1(),AD=bG(),kF1=f$(),aG=w0(),i7=l(),uF1=Y4(),KT=X6(),F2=s(),A2=F6(),BF=oB(),DF=iG(),n7="idle",q9="monitoring",a7=F2.makeStateMachine({[A2.STATE_CLOSING]:[A2.STATE_CLOSING,n7,A2.STATE_CLOSED],[A2.STATE_CLOSED]:[A2.STATE_CLOSED,q9],[n7]:[n7,q9,A2.STATE_CLOSING],[q9]:[q9,n7,A2.STATE_CLOSING]}),OF1=new Set([A2.STATE_CLOSING,A2.STATE_CLOSED,q9]);function XF(F){return F.s.state===A2.STATE_CLOSED||F.s.state===A2.STATE_CLOSING}wT.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});class LT extends KT.TypedEventEmitter{constructor(F,A){super();this.component=uF1.MongoLoggableComponent.TOPOLOGY,this.on("error",F2.noop),this.server=F,this.connection=null,this.cancellationToken=new KT.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:A2.STATE_CLOSED},this.address=F.description.address,this.options=Object.freeze({connectTimeoutMS:A.connectTimeoutMS??1e4,heartbeatFrequencyMS:A.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:A.minHeartbeatFrequencyMS??500,serverMonitoringMode:A.serverMonitoringMode}),this.isRunningInFaasEnv=kF1.getFAASEnv()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new oG(10);let B=this.cancellationToken,D={id:"<monitor>",generation:F.pool.generation,cancellationToken:B,hostAddress:F.description.hostAddress,...A,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};if(delete D.credentials,D.autoEncrypter)delete D.autoEncrypter;this.connectOptions=Object.freeze(D)}connect(){if(this.s.state!==A2.STATE_CLOSED)return;let F=this.options.heartbeatFrequencyMS,A=this.options.minHeartbeatFrequencyMS;this.monitorId=new BD(VT(this),{heartbeatFrequencyMS:F,minHeartbeatFrequencyMS:A,immediate:!0})}requestCheck(){if(OF1.has(this.s.state))return;this.monitorId?.wake()}reset(){let F=this.server.description.topologyVersion;if(XF(this)||F==null)return;a7(this,A2.STATE_CLOSING),UT(this),a7(this,n7);let A=this.options.heartbeatFrequencyMS,B=this.options.minHeartbeatFrequencyMS;this.monitorId=new BD(VT(this),{heartbeatFrequencyMS:A,minHeartbeatFrequencyMS:B})}close(){if(XF(this))return;a7(this,A2.STATE_CLOSING),UT(this),this.emit("close"),a7(this,A2.STATE_CLOSED)}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(F){this.rttSampler.addSample(F)}clearRttSamples(){this.rttSampler.clear()}}wT.Monitor=LT;function UT(F){F.monitorId?.stop(),F.monitorId=void 0,F.rttPinger?.close(),F.rttPinger=void 0,F.cancellationToken.emit("cancel"),F.connection?.destroy(),F.connection=null,F.clearRttSamples()}function sG(F,A){if(A==null)return!1;let B=F.options.serverMonitoringMode;if(B===wT.ServerMonitoringMode.poll)return!1;if(B===wT.ServerMonitoringMode.stream)return!0;if(F.isRunningInFaasEnv)return!1;return!0}function SF1(F,A){let B,D,X=F.server.description.topologyVersion,Z=sG(F,X);F.emitAndLogHeartbeat(DF.Server.SERVER_HEARTBEAT_STARTED,F.server.topology.s.id,void 0,new BF.ServerHeartbeatStartedEvent(F.address,Z));function J(G){F.connection?.destroy(),F.connection=null,F.emitAndLogHeartbeat(DF.Server.SERVER_HEARTBEAT_FAILED,F.server.topology.s.id,void 0,new BF.ServerHeartbeatFailedEvent(F.address,F2.calculateDurationInMs(B),G,D));let E=!(G instanceof i7.MongoError)?new i7.MongoError(i7.MongoError.buildErrorMessage(G),{cause:G}):G;if(E.addErrorLabel(i7.MongoErrorLabel.ResetPool),E instanceof i7.MongoNetworkTimeoutError)E.addErrorLabel(i7.MongoErrorLabel.InterruptInUseConnections);F.emit("resetServer",E),A(G)}function Y(G){if(!("isWritablePrimary"in G))G.isWritablePrimary=G[aG.LEGACY_HELLO_COMMAND];let E=Z&&F.rttPinger?F.rttPinger.latestRtt??F2.calculateDurationInMs(B):F2.calculateDurationInMs(B);if(F.addRttSample(E),F.emitAndLogHeartbeat(DF.Server.SERVER_HEARTBEAT_SUCCEEDED,F.server.topology.s.id,G.connectionId,new BF.ServerHeartbeatSucceededEvent(F.address,E,G,Z)),Z)F.emitAndLogHeartbeat(DF.Server.SERVER_HEARTBEAT_STARTED,F.server.topology.s.id,void 0,new BF.ServerHeartbeatStartedEvent(F.address,!0)),B=F2.now();else F.rttPinger?.close(),F.rttPinger=void 0,A(void 0,G)}let{connection:$}=F;if($&&!$.closed){let{serverApi:G,helloOk:E}=$,C=F.options.connectTimeoutMS,W=F.options.heartbeatFrequencyMS,H={[G?.version||E?"hello":aG.LEGACY_HELLO_COMMAND]:1,...Z&&X?{maxAwaitTimeMS:W,topologyVersion:xF1(X)}:{}},q=Z?{socketTimeoutMS:C?C+W:0,exhaustAllowed:!0}:{socketTimeoutMS:C};if(Z&&F.rttPinger==null)F.rttPinger=new tG(F);if(B=F2.now(),Z)return D=!0,$.exhaustCommand(F2.ns("admin.$cmd"),H,q,(Q,K)=>{if(Q)return J(Q);return Y(K)});D=!1,$.command(F2.ns("admin.$cmd"),H,q).then(Y,J);return}(async()=>{let G=await AD.makeSocket(F.connectOptions),E=AD.makeConnection(F.connectOptions,G);B=F2.now();try{return await AD.performInitialHandshake(E,F.connectOptions),E}catch(C){throw E.destroy(),C}})().then((G)=>{if(XF(F)){G.destroy();return}let E=F2.calculateDurationInMs(B);F.addRttSample(E),F.connection=G,F.emitAndLogHeartbeat(DF.Server.SERVER_HEARTBEAT_SUCCEEDED,F.server.topology.s.id,G.hello?.connectionId,new BF.ServerHeartbeatSucceededEvent(F.address,E,G.hello,sG(F,G.hello?.topologyVersion))),A(void 0,G.hello)},(G)=>{F.connection=null,D=!1,J(G)})}function VT(F){return(A)=>{if(F.s.state===q9){process.nextTick(A);return}a7(F,q9);function B(){if(!XF(F))a7(F,n7);A()}SF1(F,(D,X)=>{if(D){if(F.server.description.type===A2.ServerType.Unknown)return B()}if(sG(F,X?.topologyVersion))P4.setTimeout(()=>{if(!XF(F))F.monitorId?.wake()},0);B()})}}function xF1(F){return{processId:F.processId,counter:QT.Long.isLong(F.counter)?F.counter:QT.Long.fromNumber(F.counter)}}class tG{constructor(F){this.connection=void 0,this.cancellationToken=F.cancellationToken,this.closed=!1,this.monitor=F,this.latestRtt=F.latestRtt??void 0;let A=F.options.heartbeatFrequencyMS;this.monitorId=P4.setTimeout(()=>this.measureRoundTripTime(),A)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,P4.clearTimeout(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(F,A){if(this.closed){A?.destroy();return}if(this.connection==null)this.connection=A;this.latestRtt=F2.calculateDurationInMs(F),this.monitorId=P4.setTimeout(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let F=F2.now();if(this.closed)return;let A=this.connection;if(A==null){AD.connect(this.monitor.connectOptions).then((D)=>{this.measureAndReschedule(F,D)},()=>{this.connection=void 0});return}let B=A.serverApi?.version||A.helloOk?"hello":aG.LEGACY_HELLO_COMMAND;A.command(F2.ns("admin.$cmd"),{[B]:1},void 0).then(()=>this.measureAndReschedule(F),()=>{this.connection?.destroy(),this.connection=void 0;return})}}wT.RTTPinger=tG;class BD{constructor(F,A={}){if(this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{if(this.stopped)return;if(this.timerId)P4.clearTimeout(this.timerId);this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=F2.now(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)})},this.fn=F,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=A.heartbeatFrequencyMS??1000,this.minHeartbeatFrequencyMS=A.minHeartbeatFrequencyMS??500,A.immediate)this._executeAndReschedule();else this._reschedule(void 0)}wake(){let A=F2.now()-this.lastExecutionEnded;if(A<0)return this._executeAndReschedule();if(this.isExecutionInProgress)return;if(this.isExpeditedCallToFnScheduled)return;if(A<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-A);return}this._executeAndReschedule()}stop(){if(this.stopped=!0,this.timerId)P4.clearTimeout(this.timerId),this.timerId=void 0;this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let F=F2.now(),A=F-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:F,timeSinceLastCall:A}}_reschedule(F){if(this.stopped)return;if(this.timerId)P4.clearTimeout(this.timerId);this.timerId=P4.setTimeout(this._executeAndReschedule,F||this.heartbeatFrequencyMS)}}wT.MonitorInterval=BD;class oG{constructor(F=10){this.rttSamples=new Float64Array(F),this.length=0,this.writeIndex=0}addSample(F){if(this.rttSamples[this.writeIndex++]=F,this.length<this.rttSamples.length)this.length++;this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let F=this.rttSamples[0];for(let A=1;A<this.length;A++)if(this.rttSamples[A]<F)F=this.rttSamples[A];return F}average(){if(this.length===0)return 0;let F=0;for(let A=0;A<this.length;A++)F+=this.rttSamples[A];return F/this.length}get last(){if(this.length===0)return null;return this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}}wT.RTTSampler=oG});var ZE=z((TT)=>{Object.defineProperty(TT,"__esModule",{value:!0});TT.DEFAULT_OPTIONS=TT.OPTIONS=void 0;TT.resolveSRVRecord=pF1;TT.parseOptions=nF1;var eG=m("dns"),bF1=BG(),yF1=m("url"),s7=PB(),C3=X3(),IT=c5(),PT=cM(),r=l(),DD=E9(),BE=Y4(),FE=_6(),N4=f0(),hF1=nG(),Q2=s(),S3=P2(),AE=["authSource","replicaSet","loadBalanced"],vF1="loadBalanced option only supported with a single host in the URI",mF1="loadBalanced option not supported with a replicaSet option",dF1="loadBalanced option not supported when directConnection is provided";function jT(F){return async function A(B){try{return await eG.promises[F](B)}catch(D){if(D.code===eG.TIMEOUT)return await eG.promises[F](B);else throw D}}}var cF1=jT("resolveSrv"),lF1=jT("resolveTxt");async function pF1(F){if(typeof F.srvHost!=="string")throw new r.MongoAPIError('Option "srvHost" must not be empty');let A=F.srvHost,B=lF1(A);B.then(void 0,Q2.squashError);let D=`_${F.srvServiceName}._tcp.${A}`,X=await cF1(D);if(X.length===0)throw new r.MongoAPIError("No addresses found at host");for(let{name:W}of X)Q2.checkParentDomainMatch(W,A);let Z=X.map((W)=>Q2.HostAddress.fromString(`${W.name}:${W.port??27017}`));DE(Z,F,!0);let J;try{J=await B}catch(W){if(W.code!=="ENODATA"&&W.code!=="ENOTFOUND")throw W;return Z}if(J.length>1)throw new r.MongoParseError("Multiple text records not allowed");let Y=new yF1.URLSearchParams(J[0].join(""));if([...Y.keys()].some((W)=>!AE.includes(W)))throw new r.MongoParseError(`Text record may only set any of: ${AE.join(", ")}`);if(AE.some((W)=>Y.get(W)===""))throw new r.MongoParseError("Cannot have empty URI params in DNS TXT Record");let G=Y.get("authSource")??void 0,E=Y.get("replicaSet")??void 0,C=Y.get("loadBalanced")??void 0;if(!F.userSpecifiedAuthSource&&G&&F.credentials&&!C3.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(F.credentials.mechanism))F.credentials=s7.MongoCredentials.merge(F.credentials,{source:G});if(!F.userSpecifiedReplicaSet&&E)F.replicaSet=E;if(C==="true")F.loadBalanced=!0;if(F.replicaSet&&F.srvMaxHosts>0)throw new r.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return DE(Z,F,!0),Z}function iF1(F){if(!F)return;let A=(B,D)=>{if(F.has(B)&&F.has(D))throw new r.MongoAPIError(`The '${B}' option cannot be used with the '${D}' option`)};A("tlsInsecure","tlsAllowInvalidCertificates"),A("tlsInsecure","tlsAllowInvalidHostnames")}function x3(F,A){if(typeof A==="boolean")return A;switch(A){case"true":return!0;case"false":return!1;default:throw new r.MongoParseError(`${F} must be either "true" or "false"`)}}function XE(F,A){let B=Q2.parseInteger(A);if(B!=null)return B;throw new r.MongoParseError(`Expected ${F} to be stringified int value, got: ${A}`)}function ZF(F,A){let B=XE(F,A);if(B<0)throw new r.MongoParseError(`${F} can only be a positive int value, got: ${A}`);return B}function*NT(F){if(F==="")return;let A=F.split(",");for(let B of A){let[D,X]=B.split(/:(.*)/);if(X==null)throw new r.MongoParseError("Cannot have undefined values in key value pairs");yield[D,X]}}class JF extends Map{constructor(F=[]){super(F.map(([A,B])=>[A.toLowerCase(),B]))}has(F){return super.has(F.toLowerCase())}get(F){return super.get(F.toLowerCase())}set(F,A){return super.set(F.toLowerCase(),A)}delete(F){return super.delete(F.toLowerCase())}}function nF1(F,A=void 0,B={}){if(A!=null&&!(A instanceof DD.MongoClient))B=A,A=void 0;if(B.useBigInt64&&typeof B.promoteLongs==="boolean"&&!B.promoteLongs)throw new r.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(B.useBigInt64&&typeof B.promoteValues==="boolean"&&!B.promoteValues)throw new r.MongoAPIError("Must request either bigint or Long for int64 deserialization");let D=new bF1.default(F),{hosts:X,isSRV:Z}=D,J=Object.create(null);J.hosts=Z?[]:X.map(Q2.HostAddress.fromString);let Y=new JF;if(D.pathname!=="/"&&D.pathname!==""){let q=decodeURIComponent(D.pathname[0]==="/"?D.pathname.slice(1):D.pathname);if(q)Y.set("dbName",[q])}if(D.username!==""){let q={username:decodeURIComponent(D.username)};if(typeof D.password==="string")q.password=decodeURIComponent(D.password);Y.set("auth",[q])}for(let q of D.searchParams.keys()){let Q=D.searchParams.getAll(q),K=/readPreferenceTags/i.test(q);if(!K&&Q.length>1)throw new r.MongoInvalidArgumentError(`URI option "${q}" cannot appear more than once in the connection string`);if(!K&&Q.includes(""))throw new r.MongoAPIError(`URI option "${q}" cannot be specified with no value`);if(!Y.has(q))Y.set(q,Q)}let $=new JF(Object.entries(B).filter(([,q])=>q!=null));if(Y.has("serverApi"))throw new r.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let G=Y.get("authMechanismProperties");if(G){for(let q of G)if(/(^|,)ALLOWED_HOSTS:/.test(q))throw new r.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if($.has("loadBalanced"))throw new r.MongoParseError("loadBalanced is only a valid option in the URI");let E=new JF,C=new Set([...Y.keys(),...$.keys()]);for(let q of C){let Q=[],K=$.get(q);if(K!=null)Q.push(K);let U=Y.get(q)??[];Q.push(...U),E.set(q,Q)}if(E.has("tls")||E.has("ssl")){let q=(E.get("tls")||[]).concat(E.get("ssl")||[]).map(x3.bind(null,"tls/ssl"));if(new Set(q).size!==1)throw new r.MongoParseError("All values of tls/ssl must be the same.")}iF1(E);let W=Q2.setDifference(C,Array.from(Object.keys(TT.OPTIONS)).map((q)=>q.toLowerCase()));if(W.size!==0){let q=W.size>1?"options":"option",Q=W.size>1?"are":"is";throw new r.MongoParseError(`${q} ${Array.from(W).join(", ")} ${Q} not supported`)}for(let[q,Q]of Object.entries(TT.OPTIONS)){let K=E.get(q);if(!K||K.length===0){if(TT.DEFAULT_OPTIONS.has(q))MT(J,q,Q,[TT.DEFAULT_OPTIONS.get(q)])}else{let{deprecated:U}=Q;if(U){let R=typeof U==="string"?`: ${U}`:"";Q2.emitWarning(`${q} is a deprecated option${R}`)}MT(J,q,Q,K)}}if(J.credentials){let q=J.credentials.mechanism===C3.AuthMechanism.MONGODB_GSSAPI,Q=J.credentials.mechanism===C3.AuthMechanism.MONGODB_X509,K=J.credentials.mechanism===C3.AuthMechanism.MONGODB_AWS,U=J.credentials.mechanism===C3.AuthMechanism.MONGODB_OIDC;if((q||Q)&&E.has("authSource")&&J.credentials.source!=="$external")throw new r.MongoParseError(`authMechanism ${J.credentials.mechanism} requires an authSource of '$external'`);if(!(q||Q||K||U)&&J.dbName&&!E.has("authSource"))J.credentials=s7.MongoCredentials.merge(J.credentials,{source:J.dbName});if(K){let{username:R,password:w}=J.credentials;if(R||w)throw new r.MongoAPIError("username and password cannot be provided when using MONGODB-AWS. Credentials must be provided in a manner that can be read by the AWS SDK.");if(J.credentials.mechanismProperties.AWS_SESSION_TOKEN)throw new r.MongoAPIError("AWS_SESSION_TOKEN cannot be provided when using MONGODB-AWS. Credentials must be provided in a manner that can be read by the AWS SDK.")}if(J.credentials.validate(),J.credentials.password===""&&J.credentials.username===""&&J.credentials.mechanism===C3.AuthMechanism.MONGODB_DEFAULT&&Object.keys(J.credentials.mechanismProperties).length===0)delete J.credentials}if(!J.dbName)J.dbName="test";if(DE(X,J,Z),A&&J.autoEncryption)PT.Encrypter.checkForMongoCrypt(),J.encrypter=new PT.Encrypter(A,F,B),J.autoEncrypter=J.encrypter.autoEncrypter;if(J.userSpecifiedAuthSource=$.has("authSource")||Y.has("authSource"),J.userSpecifiedReplicaSet=$.has("replicaSet")||Y.has("replicaSet"),Z){if(J.srvHost=X[0],J.directConnection)throw new r.MongoAPIError("SRV URI does not support directConnection");if(J.srvMaxHosts>0&&typeof J.replicaSet==="string")throw new r.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let q=!$.has("tls")&&!Y.has("tls"),Q=!$.has("ssl")&&!Y.has("ssl");if(q&&Q)J.tls=!0}else if(Y.has("srvMaxHosts")||$.has("srvMaxHosts")||Y.has("srvServiceName")||$.has("srvServiceName"))throw new r.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(J.directConnection&&J.hosts.length!==1)throw new r.MongoParseError("directConnection option requires exactly one host");if(!J.proxyHost&&(J.proxyPort||J.proxyUsername||J.proxyPassword))throw new r.MongoParseError("Must specify proxyHost if other proxy options are passed");if(J.proxyUsername&&!J.proxyPassword||!J.proxyUsername&&J.proxyPassword)throw new r.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map((q)=>Y.get(q)??[]).some((q)=>q.length>1))throw new r.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return J.mongoLoggerOptions=BE.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:J.mongodbLogPath,mongodbLogComponentSeverities:J.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:J.mongodbLogMaxDocumentLength}),J}function DE(F,A,B){if(A.loadBalanced){if(F.length>1)throw new r.MongoParseError(vF1);if(A.replicaSet)throw new r.MongoParseError(mF1);if(A.directConnection)throw new r.MongoParseError(dF1);if(B&&A.srvMaxHosts>0)throw new r.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}return}function MT(F,A,B,D){let{target:X,type:Z,transform:J}=B,Y=X??A;switch(Z){case"boolean":F[Y]=x3(Y,D[0]);break;case"int":F[Y]=XE(Y,D[0]);break;case"uint":F[Y]=ZF(Y,D[0]);break;case"string":if(D[0]==null)break;F[Y]=String(D[0]);break;case"record":if(!Q2.isRecord(D[0]))throw new r.MongoParseError(`${Y} must be an object`);F[Y]=D[0];break;case"any":F[Y]=D[0];break;default:{if(!J)throw new r.MongoParseError("Descriptors missing a type must define a transform");let $=J({name:Y,options:F,values:D});F[Y]=$;break}}}TT.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:F,options:A,values:[B]}){if(!Q2.isRecord(B,["username","password"]))throw new r.MongoParseError(`${F} must be an object with 'username' and 'password' properties`);return s7.MongoCredentials.merge(A.credentials,{username:B.username,password:B.password})}},authMechanism:{target:"credentials",transform({options:F,values:[A]}){let B=Object.values(C3.AuthMechanism),[D]=B.filter((J)=>J.match(RegExp(String.raw`\b${A}\b`,"i")));if(!D)throw new r.MongoParseError(`authMechanism one of ${B}, got ${A}`);let X=F.credentials?.source;if(D===C3.AuthMechanism.MONGODB_PLAIN||C3.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(D))X="$external";let Z=F.credentials?.password;if(D===C3.AuthMechanism.MONGODB_X509&&Z==="")Z=void 0;return s7.MongoCredentials.merge(F.credentials,{mechanism:D,source:X,password:Z})}},authMechanismProperties:{target:"credentials",transform({options:F,values:A}){let B=Object.create(null);for(let D of A)if(typeof D==="string")for(let[X,Z]of NT(D))try{B[X]=x3(X,Z)}catch{B[X]=Z}else{if(!Q2.isRecord(D))throw new r.MongoParseError("AuthMechanismProperties must be an object");B={...D}}return s7.MongoCredentials.merge(F.credentials,{mechanismProperties:B})}},authSource:{target:"credentials",transform({options:F,values:[A]}){let B=String(A);return s7.MongoCredentials.merge(F.credentials,{source:B})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[F]}){let A=typeof F==="string"?{version:F}:F,B=A&&A.version;if(!B)throw new r.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(DD.ServerApiVersion).join('", "')}"]`);if(!Object.values(DD.ServerApiVersion).some((D)=>D===B))throw new r.MongoParseError(`Invalid server API version=${B}; must be in the following enum: ["${Object.values(DD.ServerApiVersion).join('", "')}"]`);return A}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:F}){let A=new Set;for(let B of F){let D=typeof B==="string"?B.split(","):B;if(!Array.isArray(D))throw new r.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let X of D)if(Object.keys(IT.Compressor).includes(String(X)))A.add(String(X));else throw new r.MongoInvalidArgumentError(`${X} is not a valid compression mechanism. Must be one of: ${Object.keys(IT.Compressor)}.`)}return[...A]}},connectTimeoutMS:{default:30000,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:F,values:[A]}){let B=XE(F,A);if(B===4||B===6)return B;throw new r.MongoParseError(`Option 'family' must be 4 or 6 got ${B}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:F,options:A,values:[B]}){let D=S3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,fsync:x3(F,B)}});if(!D)throw new r.MongoParseError(`Unable to make a writeConcern from fsync=${B}`);return D}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:F,options:A,values:[B]}){let D=S3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,journal:x3(F,B)}});if(!D)throw new r.MongoParseError(`Unable to make a writeConcern from journal=${B}`);return D}},journal:{target:"writeConcern",transform({name:F,options:A,values:[B]}){let D=S3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,journal:x3(F,B)}});if(!D)throw new r.MongoParseError(`Unable to make a writeConcern from journal=${B}`);return D}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:F,values:[A]}){let B=ZF(F,A);if(B===0)throw new r.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return B}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:F,options:A,values:[B]}){let D=ZF(F,B);if(A.readPreference)return N4.ReadPreference.fromOptions({readPreference:{...A.readPreference,maxStalenessSeconds:D}});else return new N4.ReadPreference("secondary",void 0,{maxStalenessSeconds:D})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[F],options:A}){return{...A.driverInfo,name:String(F)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:Q2.DEFAULT_PK_FACTORY,transform({values:[F]}){if(Q2.isRecord(F,["createPk"])&&typeof F.createPk==="function")return F;throw new r.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${F}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[F],options:A}){if(F instanceof FE.ReadConcern||Q2.isRecord(F,["level"]))return FE.ReadConcern.fromOptions({...A.readConcern,...F});throw new r.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(F)}`)}},readConcernLevel:{target:"readConcern",transform({values:[F],options:A}){return FE.ReadConcern.fromOptions({...A.readConcern,level:F})}},readPreference:{default:N4.ReadPreference.primary,transform({values:[F],options:A}){if(F instanceof N4.ReadPreference)return N4.ReadPreference.fromOptions({readPreference:{...A.readPreference,...F},...F});if(Q2.isRecord(F,["mode"])){let B=N4.ReadPreference.fromOptions({readPreference:{...A.readPreference,...F},...F});if(B)return B;else throw new r.MongoParseError(`Cannot make read preference from ${JSON.stringify(F)}`)}if(typeof F==="string"){let B={hedge:A.readPreference?.hedge,maxStalenessSeconds:A.readPreference?.maxStalenessSeconds};return new N4.ReadPreference(F,A.readPreference?.tags,B)}throw new r.MongoParseError(`Unknown ReadPreference value: ${F}`)}},readPreferenceTags:{target:"readPreference",transform({values:F,options:A}){let B=Array.isArray(F[0])?F[0]:F,D=[];for(let X of B){let Z=Object.create(null);if(typeof X==="string")for(let[J,Y]of NT(X))Z[J]=Y;if(Q2.isRecord(X))for(let[J,Y]of Object.entries(X))Z[J]=Y;D.push(Z)}return N4.ReadPreference.fromOptions({readPreference:A.readPreference,readPreferenceTags:D})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[F]}){if(!Object.values(hF1.ServerMonitoringMode).includes(F))throw new r.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return F}},serverSelectionTimeoutMS:{default:30000,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:F,values:[A]}){return!x3(F,A)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:F,values:[A]}){return x3(F,A)?()=>{return}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:F,options:A,values:[B]}){let D=x3(F,B);if(D)A.checkServerIdentity=()=>{return},A.rejectUnauthorized=!1;else A.checkServerIdentity=A.tlsAllowInvalidHostnames?()=>{return}:void 0,A.rejectUnauthorized=A.tlsAllowInvalidCertificates?!1:!0;return D}},w:{target:"writeConcern",transform({values:[F],options:A}){return S3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,w:F}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[F],options:A}){if(Q2.isRecord(F)||F instanceof S3.WriteConcern)return S3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,...F}});else if(F==="majority"||typeof F==="number")return S3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,w:F}});throw new r.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(F)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[F],options:A}){let B=S3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,wtimeout:ZF("wtimeout",F)}});if(B)return B;throw new r.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[F],options:A}){let B=S3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,wtimeoutMS:ZF("wtimeoutMS",F)}});if(B)return B;throw new r.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[F]}){if(!(typeof F==="string"&&["stderr","stdout"].includes(F)||F&&typeof F==="object"&&("write"in F)&&typeof F.write==="function"))throw new r.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return F}},mongodbLogComponentSeverities:{transform({values:[F]}){if(typeof F!=="object"||!F)throw new r.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[A,B]of Object.entries(F)){if(typeof B!=="string"||typeof A!=="string")throw new r.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(BE.MongoLoggableComponent).some((D)=>D===A)&&A!=="default")throw new r.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${A}`);if(!Object.values(BE.SeverityLevel).some((D)=>D===B))throw new r.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${B} as a value for ${A}`)}return F}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},__skipPingOnConnect:{type:"boolean"}};TT.DEFAULT_OPTIONS=new JF(Object.entries(TT.OPTIONS).filter(([,F])=>F.default!=null).map(([F,A])=>[F,A.default]))});var ST=z((uT)=>{Object.defineProperty(uT,"__esModule",{value:!0});uT.MongoDBAWS=void 0;var JE=$1(),YE=v6(),t7=l(),r7=s(),rF1=W4(),tF1=CG(),oF1=PB(),eF1=X3(),FA1=110,$E={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1};class kT extends rF1.AuthProvider{constructor(F){super();this.credentialFetcher=new tF1.AWSSDKCredentialProvider(F)}async auth(F){let{connection:A}=F;if(!F.credentials)throw new t7.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in YE.aws4)throw YE.aws4.kModuleError;let{sign:B}=YE.aws4;if(r7.maxWireVersion(A)<9)throw new t7.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");F.credentials=await AA1(F.credentials,this.credentialFetcher);let{credentials:D}=F,X=D.username,Z=D.password,J=D.mechanismProperties.AWS_SESSION_TOKEN,Y=X&&Z&&J?{accessKeyId:X,secretAccessKey:Z,sessionToken:J}:X&&Z?{accessKeyId:X,secretAccessKey:Z}:void 0,$=D.source,G=await r7.randomBytes(32),E={saslStart:1,mechanism:"MONGODB-AWS",payload:JE.serialize({r:G,p:FA1},$E)},C=await A.command(r7.ns(`${$}.$cmd`),E,void 0),W=JE.deserialize(C.payload.buffer,$E),H=W.h,q=W.s.buffer;if(q.length!==64)throw new t7.MongoRuntimeError(`Invalid server nonce length ${q.length}, expected 64`);if(!r7.ByteUtils.equals(q.subarray(0,G.byteLength),G))throw new t7.MongoRuntimeError("Server nonce does not begin with client nonce");if(H.length<1||H.length>255||H.indexOf("..")!==-1)throw new t7.MongoRuntimeError(`Server returned an invalid host: "${H}"`);let Q="Action=GetCallerIdentity&Version=2011-06-15",K=B({method:"POST",host:H,region:BA1(W.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":Q.length,"X-MongoDB-Server-Nonce":r7.ByteUtils.toBase64(q),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:Q},Y),U={a:K.headers.Authorization,d:K.headers["X-Amz-Date"]};if(J)U.t=J;let R={saslContinue:1,conversationId:C.conversationId,payload:JE.serialize(U,$E)};await A.command(r7.ns(`${$}.$cmd`),R,void 0)}}uT.MongoDBAWS=kT;async function AA1(F,A){function B(X){if(!X.AccessKeyId||!X.SecretAccessKey)throw new t7.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new oF1.MongoCredentials({username:X.AccessKeyId,password:X.SecretAccessKey,source:F.source,mechanism:eF1.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:X.Token}})}let D=await A.getCredentials();return B(D)}function BA1(F){let A=F.split(".");if(A.length===1||A[1]==="amazonaws")return"us-east-1";return A[1]}});var fT=z((_T)=>{Object.defineProperty(_T,"__esModule",{value:!0});_T.finishCommandDocument=DA1;_T.startCommandDocument=XA1;var o7=$1(),xT=X3();function DA1(F,A){if(A!=null)return{saslContinue:1,conversationId:A,payload:new o7.Binary(o7.BSON.serialize({jwt:F}))};return{saslStart:1,mechanism:xT.AuthMechanism.MONGODB_OIDC,payload:new o7.Binary(o7.BSON.serialize({jwt:F}))}}function XA1(F){let A={};if(F.username)A.n=F.username;return{saslStart:1,autoAuthorize:1,mechanism:xT.AuthMechanism.MONGODB_OIDC,payload:new o7.Binary(o7.BSON.serialize(A))}}});var CE=z((yT)=>{Object.defineProperty(yT,"__esModule",{value:!0});yT.CallbackWorkflow=yT.AUTOMATED_TIMEOUT_MS=yT.HUMAN_TIMEOUT_MS=void 0;var YA1=m("timers/promises"),$A1=l(),gT=s(),GE=fT();yT.HUMAN_TIMEOUT_MS=300000;yT.AUTOMATED_TIMEOUT_MS=60000;var GA1=["accessToken","expiresInSeconds","refreshToken"],EA1="User provided OIDC callbacks must return a valid object with an accessToken.",EE=100;class bT{constructor(F,A){this.cache=F,this.callback=this.withLock(A),this.lastExecutionTime=Date.now()-EE}async speculativeAuth(F,A){if(this.cache.hasAccessToken){let B=this.cache.getAccessToken();F.accessToken=B;let D=GE.finishCommandDocument(B);return D.db=A.source,{speculativeAuthenticate:D}}return{}}async reauthenticate(F,A){if(this.cache.hasAccessToken)if(F.accessToken===this.cache.getAccessToken())this.cache.removeAccessToken(),delete F.accessToken;else F.accessToken=this.cache.getAccessToken();await this.execute(F,A)}async startAuthentication(F,A,B){let D;if(B?.speculativeAuthenticate)D=B.speculativeAuthenticate;else D=await F.command(gT.ns(A.source),GE.startCommandDocument(A),void 0);return D}async finishAuthentication(F,A,B,D){await F.command(gT.ns(A.source),GE.finishCommandDocument(B,D),void 0)}async executeAndValidateCallback(F){let A=await this.callback(F);if(CA1(A))throw new $A1.MongoMissingCredentialsError(EA1);return A}withLock(F){let A=Promise.resolve();return async(B)=>{return await A,A=A.catch(()=>null).then(async()=>{let D=Date.now()-this.lastExecutionTime;if(D<=EE)await YA1.setTimeout(EE-D,{signal:B.timeoutContext});return this.lastExecutionTime=Date.now(),await F(B)}),await A}}}yT.CallbackWorkflow=bT;function CA1(F){if(F==null||typeof F!=="object")return!0;if(!("accessToken"in F))return!0;return!Object.getOwnPropertyNames(F).every((A)=>GA1.includes(A))}});var qE=z((dT)=>{Object.defineProperty(dT,"__esModule",{value:!0});dT.AutomatedCallbackWorkflow=void 0;var WE=l(),vT=g0(),qA1=JD(),HE=CE();class mT extends HE.CallbackWorkflow{constructor(F,A){super(F,A)}async execute(F,A){if(this.cache.hasAccessToken){let D=this.cache.getAccessToken();if(!F.accessToken)F.accessToken=D;try{return await this.finishAuthentication(F,A,D)}catch(X){if(X instanceof WE.MongoError&&X.code===WE.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(F,A);else throw X}}let B=await this.fetchAccessToken(A);this.cache.put(B),F.accessToken=B.accessToken,await this.finishAuthentication(F,A,B.accessToken)}async fetchAccessToken(F){let A=new AbortController,B={timeoutContext:A.signal,version:qA1.OIDC_VERSION};if(F.username)B.username=F.username;if(F.mechanismProperties.TOKEN_RESOURCE)B.tokenAudience=F.mechanismProperties.TOKEN_RESOURCE;let D=vT.Timeout.expires(HE.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(B),D])}catch(X){if(vT.TimeoutError.is(X))throw A.abort(),new WE.MongoOIDCError(`OIDC callback timed out after ${HE.AUTOMATED_TIMEOUT_MS}ms.`);throw X}finally{D.clear()}}}dT.AutomatedCallbackWorkflow=mT});var nT=z((pT)=>{Object.defineProperty(pT,"__esModule",{value:!0});pT.callback=void 0;var lT=qG(),zE=l(),zA1=s(),QA1=Object.freeze({Metadata:"true",Accept:"application/json"}),KA1="Azure endpoint did not return a value with only access_token and expires_in properties",UA1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",VA1=async(F)=>{let{tokenAudience:A,username:B}=F;if(!A)throw new zE.MongoAzureError(UA1);let D=await LA1(A,B);if(!wA1(D))throw new zE.MongoAzureError(KA1);return D};pT.callback=VA1;async function LA1(F,A){let B=new URL(lT.AZURE_BASE_URL);lT.addAzureParams(B,F,A);let D=await zA1.get(B,{headers:QA1});if(D.status!==200)throw new zE.MongoAzureError(`Status code ${D.status} returned from the Azure endpoint. Response body: ${D.body}`);let X=JSON.parse(D.body);return{accessToken:X.access_token,expiresInSeconds:Number(X.expires_in)}}function wA1(F){if(F==null||typeof F!=="object")return!1;return"accessToken"in F&&typeof F.accessToken==="string"&&"expiresInSeconds"in F&&typeof F.expiresInSeconds==="number"}});var tT=z((sT)=>{Object.defineProperty(sT,"__esModule",{value:!0});sT.callback=void 0;var aT=l(),RA1=s(),IA1="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",PA1=Object.freeze({"Metadata-Flavor":"Google"}),NA1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",MA1=async(F)=>{let A=F.tokenAudience;if(!A)throw new aT.MongoGCPError(NA1);return await jA1(A)};sT.callback=MA1;async function jA1(F){let A=new URL(IA1);A.searchParams.append("audience",F);let B=await RA1.get(A,{headers:PA1});if(B.status!==200)throw new aT.MongoGCPError(`Status code ${B.status} returned from the GCP endpoint. Response body: ${B.body}`);return{accessToken:B.body}}});var Bk=z((Fk)=>{Object.defineProperty(Fk,"__esModule",{value:!0});Fk.callback=void 0;var TA1=m("fs/promises"),kA1="/var/run/secrets/kubernetes.io/serviceaccount/token",oT="AZURE_FEDERATED_TOKEN_FILE",eT="AWS_WEB_IDENTITY_TOKEN_FILE",uA1=async()=>{let F;if(process.env[oT])F=process.env[oT];else if(process.env[eT])F=process.env[eT];else F=kA1;return{accessToken:await TA1.readFile(F,"utf8")}};Fk.callback=uA1});var QE=z((Xk)=>{Object.defineProperty(Xk,"__esModule",{value:!0});Xk.TokenCache=void 0;var OA1=l();class YD extends OA1.MongoDriverError{}class Dk{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new YD("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new YD("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new YD("Attempted to get IDP information when none exists.");return this.idpInfo}put(F,A){if(this.accessToken=F.accessToken,this.refreshToken=F.refreshToken,this.expiresInSeconds=F.expiresInSeconds,A)this.idpInfo=A}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}}Xk.TokenCache=Dk});var $k=z((Jk)=>{Object.defineProperty(Jk,"__esModule",{value:!0});Jk.callback=void 0;var SA1=m("fs"),xA1=l(),_A1="OIDC_TOKEN_FILE must be set in the environment.",fA1=async()=>{let F=process.env.OIDC_TOKEN_FILE;if(!F)throw new xA1.MongoAWSError(_A1);return{accessToken:await SA1.promises.readFile(F,"utf8")}};Jk.callback=fA1});var JD=z((Wk)=>{Object.defineProperty(Wk,"__esModule",{value:!0});Wk.MongoDBOIDC=Wk.OIDC_WORKFLOWS=Wk.OIDC_VERSION=void 0;var Ek=l(),gA1=W4(),$D=qE(),bA1=nT(),yA1=tT(),hA1=Bk(),GD=QE(),vA1=$k(),mA1="AuthContext must provide credentials.";Wk.OIDC_VERSION=1;Wk.OIDC_WORKFLOWS=new Map;Wk.OIDC_WORKFLOWS.set("test",()=>new $D.AutomatedCallbackWorkflow(new GD.TokenCache,vA1.callback));Wk.OIDC_WORKFLOWS.set("azure",()=>new $D.AutomatedCallbackWorkflow(new GD.TokenCache,bA1.callback));Wk.OIDC_WORKFLOWS.set("gcp",()=>new $D.AutomatedCallbackWorkflow(new GD.TokenCache,yA1.callback));Wk.OIDC_WORKFLOWS.set("k8s",()=>new $D.AutomatedCallbackWorkflow(new GD.TokenCache,hA1.callback));class Ck extends gA1.AuthProvider{constructor(F){super();if(!F)throw new Ek.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=F}async auth(F){let{connection:A,reauthenticating:B,response:D}=F;if(D?.speculativeAuthenticate?.done&&!B)return;let X=Gk(F);if(B)await this.workflow.reauthenticate(A,X);else await this.workflow.execute(A,X,D)}async prepare(F,A){let{connection:B}=A,D=Gk(A),X=await this.workflow.speculativeAuth(B,D);return{...F,...X}}}Wk.MongoDBOIDC=Ck;function Gk(F){let{credentials:A}=F;if(!A)throw new Ek.MongoMissingCredentialsError(mA1);return A}});var Uk=z((Qk)=>{Object.defineProperty(Qk,"__esModule",{value:!0});Qk.HumanCallbackWorkflow=void 0;var cA1=$1(),$F=l(),qk=g0(),lA1=JD(),KE=CE();class zk extends KE.CallbackWorkflow{constructor(F,A){super(F,A)}async execute(F,A){if(this.cache.hasAccessToken){let J=this.cache.getAccessToken();F.accessToken=J;try{return await this.finishAuthentication(F,A,J)}catch(Y){if(Y instanceof $F.MongoError&&Y.code===$F.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete F.accessToken,await this.execute(F,A);else throw Y}}if(this.cache.hasRefreshToken){let J=this.cache.getRefreshToken(),Y=await this.fetchAccessToken(this.cache.getIdpInfo(),A,J);this.cache.put(Y),F.accessToken=Y.accessToken;try{return await this.finishAuthentication(F,A,Y.accessToken)}catch($){if($ instanceof $F.MongoError&&$.code===$F.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete F.accessToken,await this.execute(F,A);else throw $}}let B=await this.startAuthentication(F,A),D=B.conversationId,X=cA1.BSON.deserialize(B.payload.buffer),Z=await this.fetchAccessToken(X,A);return this.cache.put(Z,X),F.accessToken=Z.accessToken,await this.finishAuthentication(F,A,Z.accessToken,D)}async fetchAccessToken(F,A,B){let D=new AbortController,X={timeoutContext:D.signal,version:lA1.OIDC_VERSION,idpInfo:F};if(A.username)X.username=A.username;if(B)X.refreshToken=B;let Z=qk.Timeout.expires(KE.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(X),Z])}catch(J){if(qk.TimeoutError.is(J))throw D.abort(),new $F.MongoOIDCError(`OIDC callback timed out after ${KE.HUMAN_TIMEOUT_MS}ms.`);throw J}finally{Z.clear()}}}Qk.HumanCallbackWorkflow=zk});var Rk=z((Lk)=>{Object.defineProperty(Lk,"__esModule",{value:!0});Lk.Plain=void 0;var pA1=$1(),iA1=l(),nA1=s(),aA1=W4();class Vk extends aA1.AuthProvider{async auth(F){let{connection:A,credentials:B}=F;if(!B)throw new iA1.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:D,password:X}=B,J={saslStart:1,mechanism:"PLAIN",payload:new pA1.Binary(Buffer.from(`\x00${D}\x00${X}`)),autoAuthorize:1};await A.command(nA1.ns("$external.$cmd"),J,void 0)}}Lk.Plain=Vk});var Mk=z((tI1,Nk)=>{var Ik=(F)=>F.codePointAt(0),sA1=(F)=>F[0],rA1=(F)=>F[F.length-1];function Pk(F){let A=[],B=F.length;for(let D=0;D<B;D+=1){let X=F.charCodeAt(D);if(X>=55296&&X<=56319&&B>D+1){let Z=F.charCodeAt(D+1);if(Z>=56320&&Z<=57343){A.push((X-55296)*1024+Z-56320+65536),D+=1;continue}}A.push(X)}return A}function GF({unassigned_code_points:F,commonly_mapped_to_nothing:A,non_ASCII_space_characters:B,prohibited_characters:D,bidirectional_r_al:X,bidirectional_l:Z},J,Y={}){let $=B,G=A;if(typeof J!=="string")throw new TypeError("Expected string.");if(J.length===0)return"";let E=Pk(J).map((R)=>$.get(R)?32:R).filter((R)=>!G.get(R)),C=String.fromCodePoint.apply(null,E).normalize("NFKC"),W=Pk(C);if(W.some((R)=>D.get(R)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(Y.allowUnassigned!==!0){if(W.some((w)=>F.get(w)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5")}let q=W.some((R)=>X.get(R)),Q=W.some((R)=>Z.get(R));if(q&&Q)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let K=X.get(Ik(sA1(C))),U=X.get(Ik(rA1(C)));if(q&&!(K&&U))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return C}GF.saslprep=GF;GF.default=GF;Nk.exports=GF});var kk=z((oI1,Tk)=>{Tk.exports=_3;function _3(F,A){if(!(this instanceof _3))return new _3(F,A);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=F||1024,this.deduplicate=A?A.deduplicate:null,this.zeros=this.deduplicate?ED(this.deduplicate.length):null}_3.prototype.updated=function(F){while(this.deduplicate&&F.buffer[F.deduplicate]===this.deduplicate[F.deduplicate])if(F.deduplicate++,F.deduplicate===this.deduplicate.length){if(F.deduplicate=0,F.buffer.equals&&F.buffer.equals(this.deduplicate))F.buffer=this.deduplicate;break}if(F.updated||!this.updates)return;F.updated=!0,this.updates.push(F)};_3.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var F=this.updates.pop();return F.updated=!1,F};_3.prototype._array=function(F,A){if(F>=this.maxPages){if(A)return;tA1(this,F)}FB1(F,this.path);var B=this.pages;for(var D=this.level;D>0;D--){var X=this.path[D],Z=B[X];if(!Z){if(A)return;Z=B[X]=new Array(32768)}B=Z}return B};_3.prototype.get=function(F,A){var B=this._array(F,A),D=this.path[0],X=B&&B[D];if(!X&&!A){if(X=B[D]=new jk(F,ED(this.pageSize)),F>=this.length)this.length=F+1}if(X&&X.buffer===this.deduplicate&&this.deduplicate&&!A)X.buffer=eA1(X.buffer),X.deduplicate=0;return X};_3.prototype.set=function(F,A){var B=this._array(F,!1),D=this.path[0];if(F>=this.length)this.length=F+1;if(!A||this.zeros&&A.equals&&A.equals(this.zeros)){B[D]=void 0;return}if(this.deduplicate&&A.equals&&A.equals(this.deduplicate))A=this.deduplicate;var X=B[D],Z=oA1(A,this.pageSize);if(X)X.buffer=Z;else B[D]=new jk(F,Z)};_3.prototype.toBuffer=function(){var F=new Array(this.length),A=ED(this.pageSize),B=0;while(B<F.length){var D=this._array(B,!0);for(var X=0;X<32768&&B<F.length;X++)F[B++]=D&&D[X]?D[X].buffer:A}return Buffer.concat(F)};function tA1(F,A){while(F.maxPages<A){var B=F.pages;F.pages=new Array(32768),F.pages[0]=B,F.level++,F.maxPages*=32768}}function oA1(F,A){if(F.length===A)return F;if(F.length>A)return F.slice(0,A);var B=ED(A);return F.copy(B),B}function ED(F){if(Buffer.alloc)return Buffer.alloc(F);var A=new Buffer(F);return A.fill(0),A}function eA1(F){var A=Buffer.allocUnsafe?Buffer.allocUnsafe(F.length):new Buffer(F.length);return F.copy(A),A}function jk(F,A){this.offset=F*A.length,this.buffer=A,this.updated=!1,this.deduplicate=0}function FB1(F,A){F=(F-(A[0]=F&32767))/32768,F=(F-(A[1]=F&32767))/32768,A[3]=(F-(A[2]=F&32767))/32768&32767}});var Ok=z((eI1,uk)=>{var AB1=kk();uk.exports=M4;function M4(F){if(!(this instanceof M4))return new M4(F);if(!F)F={};if(Buffer.isBuffer(F))F={buffer:F};if(this.pageOffset=F.pageOffset||0,this.pageSize=F.pageSize||1024,this.pages=F.pages||AB1(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!DB1(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!F.trackUpdates,this._pageMask=this.pageSize-1,F.buffer){for(var A=0;A<F.buffer.length;A+=this.pageSize)this.pages.set(A/this.pageSize,F.buffer.slice(A,A+this.pageSize));this.byteLength=F.buffer.length,this.length=8*this.byteLength}}M4.prototype.get=function(F){var A=F&7,B=(F-A)/8;return!!(this.getByte(B)&128>>A)};M4.prototype.getByte=function(F){var A=F&this._pageMask,B=(F-A)/this.pageSize,D=this.pages.get(B,!0);return D?D.buffer[A+this.pageOffset]:0};M4.prototype.set=function(F,A){var B=F&7,D=(F-B)/8,X=this.getByte(D);return this.setByte(D,A?X|128>>B:X&(255^128>>B))};M4.prototype.toBuffer=function(){var F=BB1(this.pages.length*this.pageSize);for(var A=0;A<this.pages.length;A++){var B=this.pages.get(A,!0),D=A*this.pageSize;if(B)B.buffer.copy(F,D,this.pageOffset,this.pageOffset+this.pageSize)}return F};M4.prototype.setByte=function(F,A){var B=F&this._pageMask,D=(F-B)/this.pageSize,X=this.pages.get(D,!1);if(B+=this.pageOffset,X.buffer[B]===A)return!1;if(X.buffer[B]=A,F>=this.byteLength)this.byteLength=F+1,this.length=this.byteLength*8;if(this._trackUpdates)this.pages.updated(X);return!0};function BB1(F){if(Buffer.alloc)return Buffer.alloc(F);var A=new Buffer(F);return A.fill(0),A}function DB1(F){return!(F&F-1)}});var Sk=z((EF)=>{var XB1=EF&&EF.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(EF,"__esModule",{value:!0});EF.createMemoryCodePoints=JB1;var ZB1=XB1(Ok());function JB1(F){let A=0;function B(){let G=F.readUInt32BE(A);A+=4;let E=F.slice(A,A+G);return A+=G,ZB1.default({buffer:E})}let D=B(),X=B(),Z=B(),J=B(),Y=B(),$=B();return{unassigned_code_points:D,commonly_mapped_to_nothing:X,non_ASCII_space_characters:Z,prohibited_characters:J,bidirectional_r_al:Y,bidirectional_l:$}}});var _k=z((xk)=>{Object.defineProperty(xk,"__esModule",{value:!0});var YB1=m("zlib");xk.default=YB1.gunzipSync(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var bk=z((UE,gk)=>{var fk=UE&&UE.__importDefault||function(F){return F&&F.__esModule?F:{default:F}},GB1=fk(Mk()),EB1=Sk(),CB1=fk(_k()),WB1=EB1.createMemoryCodePoints(CB1.default);function CF(F,A){return GB1.default(WB1,F,A)}CF.saslprep=CF;CF.default=CF;gk.exports=CF});var ak=z((ik)=>{Object.defineProperty(ik,"__esModule",{value:!0});ik.ScramSHA256=ik.ScramSHA1=void 0;var HB1=bk(),z9=m("crypto"),VE=$1(),l6=l(),HD=s(),qB1=W4(),yk=X3();class wE extends qB1.AuthProvider{constructor(F){super();this.cryptoMethod=F||"sha1"}async prepare(F,A){let B=this.cryptoMethod,D=A.credentials;if(!D)throw new l6.MongoMissingCredentialsError("AuthContext must provide credentials.");let X=await HD.randomBytes(24);return A.nonce=X,{...F,speculativeAuthenticate:{...dk(B,D,X),db:D.source}}}async auth(F){let{reauthenticating:A,response:B}=F;if(B?.speculativeAuthenticate&&!A)return await ck(this.cryptoMethod,B.speculativeAuthenticate,F);return await zB1(this.cryptoMethod,F)}}function vk(F){return F.replace("=","=3D").replace(",","=2C")}function mk(F,A){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(F,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(A.toString("base64"),"utf8")])}function dk(F,A,B){let D=vk(A.username);return{saslStart:1,mechanism:F==="sha1"?yk.AuthMechanism.MONGODB_SCRAM_SHA1:yk.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new VE.Binary(Buffer.concat([Buffer.from("n,,","utf8"),mk(D,B)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function zB1(F,A){let{connection:B,credentials:D}=A;if(!D)throw new l6.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!A.nonce)throw new l6.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let X=A.nonce,Z=D.source,J=dk(F,D,X),Y=await B.command(HD.ns(`${Z}.$cmd`),J,void 0);await ck(F,Y,A)}async function ck(F,A,B){let{connection:D,credentials:X}=B;if(!X)throw new l6.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!B.nonce)throw new l6.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let Z=B.nonce,J=X.source,Y=vk(X.username),$=X.password,G=F==="sha256"?HB1.saslprep($):QB1(Y,$),E=Buffer.isBuffer(A.payload)?new VE.Binary(A.payload):A.payload,C=hk(E),W=parseInt(C.i,10);if(W&&W<4096)throw new l6.MongoRuntimeError(`Server returned an invalid iteration count ${W}`);let{s:H,r:q}=C;if(q.startsWith("nonce"))throw new l6.MongoRuntimeError(`Server returned an invalid nonce: ${q}`);let Q=`c=biws,r=${q}`,K=wB1(G,Buffer.from(H,"base64"),W,F),U=CD(F,K,"Client Key"),R=CD(F,K,"Server Key"),w=UB1(F,U),V=[mk(Y,Z),E.toString("utf8"),Q].join(","),N=CD(F,w,V),T=`p=${KB1(U,N)}`,P=[Q,T].join(","),u=CD(F,R,V),O={saslContinue:1,conversationId:A.conversationId,payload:new VE.Binary(Buffer.from(P))},k=await D.command(HD.ns(`${J}.$cmd`),O,void 0),d=hk(k.payload);if(!RB1(Buffer.from(d.v,"base64"),u))throw new l6.MongoRuntimeError("Server returned an invalid signature");if(k.done!==!1)return;let h={saslContinue:1,conversationId:k.conversationId,payload:Buffer.alloc(0)};await D.command(HD.ns(`${J}.$cmd`),h,void 0)}function hk(F){let A=F.toString("utf8"),B={},D=A.split(",");for(let X=0;X<D.length;X++){let Z=(D[X].match(/^([^=]*)=(.*)$/)??[]).slice(1);B[Z[0]]=Z[1]}return B}function QB1(F,A){if(typeof F!=="string")throw new l6.MongoInvalidArgumentError("Username must be a string");if(typeof A!=="string")throw new l6.MongoInvalidArgumentError("Password must be a string");if(A.length===0)throw new l6.MongoInvalidArgumentError("Password cannot be empty");let B;try{B=z9.createHash("md5")}catch(D){if(z9.getFips())throw new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode");throw D}return B.update(`${F}:mongo:${A}`,"utf8"),B.digest("hex")}function KB1(F,A){if(!Buffer.isBuffer(F))F=Buffer.from(F);if(!Buffer.isBuffer(A))A=Buffer.from(A);let B=Math.max(F.length,A.length),D=[];for(let X=0;X<B;X+=1)D.push(F[X]^A[X]);return Buffer.from(D).toString("base64")}function UB1(F,A){return z9.createHash(F).update(A).digest()}function CD(F,A,B){return z9.createHmac(F,A).update(B).digest()}var WD={},LE=0;function VB1(){WD={},LE=0}var LB1={sha256:32,sha1:20};function wB1(F,A,B,D){let X=[F,A.toString("base64"),B].join("_");if(WD[X]!=null)return WD[X];let Z=z9.pbkdf2Sync(F,A,B,LB1[D],D);if(LE>=200)VB1();return WD[X]=Z,LE+=1,Z}function RB1(F,A){if(F.length!==A.length)return!1;if(typeof z9.timingSafeEqual==="function")return z9.timingSafeEqual(F,A);let B=0;for(let D=0;D<F.length;D++)B|=F[D]^A[D];return B===0}class lk extends wE{constructor(){super("sha1")}}ik.ScramSHA1=lk;class pk extends wE{constructor(){super("sha256")}}ik.ScramSHA256=pk});var Fu=z((ok)=>{Object.defineProperty(ok,"__esModule",{value:!0});ok.X509=void 0;var sk=l(),PB1=s(),NB1=W4();class tk extends NB1.AuthProvider{async prepare(F,A){let{credentials:B}=A;if(!B)throw new sk.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...F,speculativeAuthenticate:rk(B)}}async auth(F){let{connection:A,credentials:B}=F;if(!B)throw new sk.MongoMissingCredentialsError("AuthContext must provide credentials.");if(F.response?.speculativeAuthenticate)return;await A.command(PB1.ns("$external.$cmd"),rk(B),void 0)}}ok.X509=tk;function rk(F){let A={authenticate:1,mechanism:"MONGODB-X509"};if(F.username)A.user=F.username;return A}});var RE=z((Ju)=>{Object.defineProperty(Ju,"__esModule",{value:!0});Ju.MongoClientAuthProviders=void 0;var MB1=RB(),jB1=ST(),Du=JD(),TB1=qE(),kB1=Uk(),Au=QE(),uB1=Rk(),Q9=X3(),Bu=ak(),OB1=Fu(),Xu=l(),SB1=new Map([[Q9.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:F})=>new jB1.MongoDBAWS(F)],[Q9.AuthMechanism.MONGODB_GSSAPI,()=>new MB1.GSSAPI],[Q9.AuthMechanism.MONGODB_OIDC,(F)=>new Du.MongoDBOIDC(xB1(F))],[Q9.AuthMechanism.MONGODB_PLAIN,()=>new uB1.Plain],[Q9.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new Bu.ScramSHA1],[Q9.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new Bu.ScramSHA256],[Q9.AuthMechanism.MONGODB_X509,()=>new OB1.X509]]);class Zu{constructor(){this.existingProviders=new Map}getOrCreateProvider(F,A){let B=this.existingProviders.get(F);if(B)return B;let D=SB1.get(F);if(!D)throw new Xu.MongoInvalidArgumentError(`authMechanism ${F} not supported`);let X=D(A);return this.existingProviders.set(F,X),X}}Ju.MongoClientAuthProviders=Zu;function xB1(F){if(F.OIDC_HUMAN_CALLBACK)return new kB1.HumanCallbackWorkflow(new Au.TokenCache,F.OIDC_HUMAN_CALLBACK);else if(F.OIDC_CALLBACK)return new TB1.AutomatedCallbackWorkflow(new Au.TokenCache,F.OIDC_CALLBACK);else{let A=F.ENVIRONMENT,B=Du.OIDC_WORKFLOWS.get(A)?.();if(!B)throw new Xu.MongoInvalidArgumentError(`Could not load workflow for environment ${F.ENVIRONMENT}`);return B}}});var PE=z(($u)=>{Object.defineProperty($u,"__esModule",{value:!0});$u.ClientBulkWriteOperation=void 0;var _B1=f1(),fB1=s(),gB1=G0(),K9=h1();class IE extends gB1.CommandOperation{get commandName(){return"bulkWrite"}constructor(F,A){super(void 0,A);this.SERVER_COMMAND_RESPONSE_TYPE=_B1.ClientBulkWriteCursorResponse,this.commandBuilder=F,this.options=A,this.ns=new fB1.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk(F){return F}buildCommandDocument(F,A){let B=this.commandBuilder.buildBatch(F.description.maxMessageSizeBytes,F.description.maxWriteBatchSize,F.description.maxBsonObjectSize);if(!this.canRetryWrite)this.options.willRetryWrite=!1;return B}}$u.ClientBulkWriteOperation=IE;K9.defineAspects(IE,[K9.Aspect.WRITE_OPERATION,K9.Aspect.SKIP_COLLATION,K9.Aspect.CURSOR_CREATING,K9.Aspect.RETRYABLE,K9.Aspect.COMMAND_BATCHING,K9.Aspect.SUPPORTS_RAW_DATA])});var Hu=z((Cu)=>{Object.defineProperty(Cu,"__esModule",{value:!0});Cu.ClientBulkWriteCursor=void 0;var bB1=PE(),yB1=d0(),Eu=s(),hB1=q2();class NE extends hB1.AbstractCursor{constructor(F,A,B={}){super(F,new Eu.MongoDBNamespace("admin","$cmd"),B);this.commandBuilder=A,this.clientBulkWriteOptions=B}get response(){if(this.cursorResponse)return this.cursorResponse;return null}get operations(){return this.commandBuilder.lastOperations}clone(){let F=Eu.mergeOptions({},this.clientBulkWriteOptions);return delete F.session,new NE(this.client,this.commandBuilder,{...F})}async _initialize(F){let A=new bB1.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:F}),B=await yB1.executeOperation(this.client,A,this.timeoutContext);return this.cursorResponse=B,{server:A.server,session:F,response:B}}}Cu.ClientBulkWriteCursor=NE});var Mu=z((Lu)=>{Object.defineProperty(Lu,"__esModule",{value:!0});Lu.buildReplaceOneOperation=Lu.buildUpdateManyOperation=Lu.buildUpdateOneOperation=Lu.buildDeleteManyOperation=Lu.buildDeleteOneOperation=Lu.buildInsertOneOperation=Lu.ClientBulkWriteCommandBuilder=void 0;Lu.buildOperation=TE;var ME=$1(),qu=d5(),WF=l(),Qu=H7(),kE=s(),zu=1000;class Ku{constructor(F,A,B){this.models=F,this.options=A,this.pkFactory=B??kE.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){if("verboseResults"in this.options)return!this.options.verboseResults;return!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(F,A,B){this.isBatchRetryable=!0;let D=0,X=0,Z=this.baseCommand(),J=new Map;this.previousModelIndex=this.currentModelIndex;while(this.currentModelIndex<this.models.length){let Y=this.models[this.currentModelIndex],$=Y.namespace,G=J.get($);if(Y.name==="deleteMany"||Y.name==="updateMany")this.isBatchRetryable=!1;if(G!=null){let E=TE(Y,G,this.pkFactory,this.options),C;try{C=ME.BSON.serialize(E)}catch(W){throw new WF.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:W})}if(jE("ops",C,B),D+C.length<F&&Z.ops.documents.length<A)D=zu+Z.ops.push(E,C),this.currentModelIndex++;else break}else{J.set($,X);let E={ns:$},C=TE(Y,X,this.pkFactory,this.options),W,H;try{W=ME.BSON.serialize(E),H=ME.BSON.serialize(C)}catch(q){throw new WF.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:q})}if(jE("nsInfo",W,B),jE("ops",H,B),D+W.length+H.length<F&&Z.ops.documents.length<A)D=zu+Z.nsInfo.push(E,W)+Z.ops.push(C,H),X++,this.currentModelIndex++;else break}}return this.lastOperations=Z.ops.documents,Z}baseCommand(){let F={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new qu.DocumentSequence("ops"),nsInfo:new qu.DocumentSequence("nsInfo")};if(this.options.bypassDocumentValidation!=null)F.bypassDocumentValidation=this.options.bypassDocumentValidation;if(this.options.let)F.let=this.options.let;if(this.options.comment!==void 0)F.comment=this.options.comment;return F}}Lu.ClientBulkWriteCommandBuilder=Ku;function jE(F,A,B){if(A.length>B)throw new WF.MongoInvalidArgumentError(`Client bulk write operation ${F} of length ${A.length} exceeds the max bson object size of ${B}`)}var vB1=(F,A,B)=>{let D={insert:A,document:F.document};return D.document._id=F.document._id??B.createPk(),D};Lu.buildInsertOneOperation=vB1;var mB1=(F,A)=>{return Uu(F,A,!1)};Lu.buildDeleteOneOperation=mB1;var dB1=(F,A)=>{return Uu(F,A,!0)};Lu.buildDeleteManyOperation=dB1;function Uu(F,A,B){let D={delete:A,multi:B,filter:F.filter};if(F.hint)D.hint=F.hint;if(F.collation)D.collation=F.collation;return D}var cB1=(F,A,B)=>{return Vu(F,A,!1,B)};Lu.buildUpdateOneOperation=cB1;var lB1=(F,A,B)=>{return Vu(F,A,!0,B)};Lu.buildUpdateManyOperation=lB1;function pB1(F,A){if(!kE.hasAtomicOperators(F,A))throw new WF.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function Vu(F,A,B,D){pB1(F.update,D);let X={update:A,multi:B,filter:F.filter,updateMods:F.update};if(F.hint)X.hint=F.hint;if(F.upsert)X.upsert=F.upsert;if(F.arrayFilters)X.arrayFilters=F.arrayFilters;if(F.collation)X.collation=F.collation;if(!B&&"sort"in F&&F.sort!=null)X.sort=Qu.formatSort(F.sort);return X}var iB1=(F,A)=>{if(kE.hasAtomicOperators(F.replacement))throw new WF.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let B={update:A,multi:!1,filter:F.filter,updateMods:F.replacement};if(F.hint)B.hint=F.hint;if(F.upsert)B.upsert=F.upsert;if(F.collation)B.collation=F.collation;if(F.sort!=null)B.sort=Qu.formatSort(F.sort);return B};Lu.buildReplaceOneOperation=iB1;function TE(F,A,B,D){switch(F.name){case"insertOne":return Lu.buildInsertOneOperation(F,A,B);case"deleteOne":return Lu.buildDeleteOneOperation(F,A);case"deleteMany":return Lu.buildDeleteManyOperation(F,A);case"updateOne":return Lu.buildUpdateOneOperation(F,A,D);case"updateMany":return Lu.buildUpdateManyOperation(F,A,D);case"replaceOne":return Lu.buildReplaceOneOperation(F,A)}}});var uu=z((Tu)=>{Object.defineProperty(Tu,"__esModule",{value:!0});Tu.ClientBulkWriteResultsMerger=void 0;var sB1=G4(),rB1=l(),tB1={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0};class ju{static unacknowledged(){return tB1}constructor(F){if(this.options=F,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},F.verboseResults)this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(F){let A;try{for await(let B of F)if(B.ok===1){if(this.options.verboseResults)this.processDocument(F,B)}else if(this.options.ordered){let D=new rB1.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw D.writeErrors.set(B.idx+this.currentBatchOffset,{code:B.code,message:B.errmsg}),D.partialResult=this.result,D}else this.writeErrors.set(B.idx+this.currentBatchOffset,{code:B.code,message:B.errmsg})}catch(B){if(B instanceof sB1.MongoWriteConcernError){let D=B.result;if(A={insertedCount:D.nInserted,upsertedCount:D.nUpserted,matchedCount:D.nMatched,modifiedCount:D.nModified,deletedCount:D.nDeleted,writeConcernError:D.writeConcernError},this.options.verboseResults&&D.cursor.firstBatch){for(let X of D.cursor.firstBatch)if(X.ok===1)this.processDocument(F,X)}}else throw B}finally{if(F.response){let B=F.response;this.incrementCounts(B)}this.currentBatchOffset+=F.operations.length}if(A){let B=A.writeConcernError;this.incrementCounts(A),this.writeConcernErrors.push({code:B.code,message:B.errmsg})}return this.result}processDocument(F,A){let B=F.operations[A.idx];if("insert"in B)this.result.insertResults?.set(A.idx+this.currentBatchOffset,{insertedId:B.document._id});if("update"in B){let D={matchedCount:A.n,modifiedCount:A.nModified??0,didUpsert:A.upserted!=null};if(A.upserted)D.upsertedId=A.upserted._id;this.result.updateResults?.set(A.idx+this.currentBatchOffset,D)}if("delete"in B)this.result.deleteResults?.set(A.idx+this.currentBatchOffset,{deletedCount:A.n})}incrementCounts(F){this.result.insertedCount+=F.insertedCount,this.result.upsertedCount+=F.upsertedCount,this.result.matchedCount+=F.matchedCount,this.result.modifiedCount+=F.modifiedCount,this.result.deletedCount+=F.deletedCount}}Tu.ClientBulkWriteResultsMerger=ju});var gu=z((_u)=>{Object.defineProperty(_u,"__esModule",{value:!0});_u.ClientBulkWriteExecutor=void 0;var Ou=q2(),oB1=Hu(),U9=l(),eB1=g0(),FD1=s(),AD1=P2(),BD1=d0(),DD1=PE(),XD1=Mu(),Su=uu();class xu{constructor(F,A,B){if(A.length===0)throw new U9.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=F,this.operations=A,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...B},!this.options.writeConcern)this.options.writeConcern=AD1.WriteConcern.fromOptions(this.client.s.options);if(this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new U9.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new U9.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let F=this.client.s.options.pkFactory,A=new XD1.ClientBulkWriteCommandBuilder(this.operations,this.options,F),B=FD1.resolveTimeoutOptions(this.client,this.options),D=eB1.TimeoutContext.create(B);if(this.options.writeConcern?.w===0){while(A.hasNextBatch()){let X=new DD1.ClientBulkWriteOperation(A,this.options);await BD1.executeOperation(this.client,X,D)}return Su.ClientBulkWriteResultsMerger.unacknowledged()}else{let X=new Su.ClientBulkWriteResultsMerger(this.options);while(A.hasNextBatch()){let Z=new Ou.CursorTimeoutContext(D,Symbol()),J={...this.options,timeoutContext:Z,...B.timeoutMS!=null&&{timeoutMode:Ou.CursorTimeoutMode.LIFETIME}},Y=new oB1.ClientBulkWriteCursor(this.client,A,J);try{await X.merge(Y)}catch($){if($ instanceof U9.MongoServerError&&!($ instanceof U9.MongoClientBulkWriteError)){let G=new U9.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw G.cause=$,G.partialResult=X.bulkWriteResult,G}else throw $}}if(X.writeConcernErrors.length>0||X.writeErrors.size>0){let Z=new U9.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw Z.writeConcernErrors=X.writeConcernErrors,Z.writeErrors=X.writeErrors,Z.partialResult=X.bulkWriteResult,Z}return X.bulkWriteResult}}}_u.ClientBulkWriteExecutor=xu});var vu=z((yu)=>{Object.defineProperty(yu,"__esModule",{value:!0});yu.EndSessionsOperation=void 0;var ZD1=f1(),JD1=G0(),YD1=f0(),$D1=s(),bu=h1();class OE extends JD1.CommandOperation{constructor(F){super();this.writeConcern={w:0},this.ns=$D1.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=ZD1.MongoDBResponse,this.sessions=F}buildCommandDocument(F,A){return{endSessions:this.sessions}}buildOptions(F){return{timeoutContext:F,readPreference:YD1.ReadPreference.primaryPreferred}}get commandName(){return"endSessions"}}yu.EndSessionsOperation=OE;bu.defineAspects(OE,bu.Aspect.WRITE_OPERATION)});var SE=z((pu)=>{Object.defineProperty(pu,"__esModule",{value:!0});pu.WaitingForSuitableServerEvent=pu.ServerSelectionSucceededEvent=pu.ServerSelectionFailedEvent=pu.ServerSelectionStartedEvent=pu.ServerSelectionEvent=void 0;var GD1=s(),qD=w0();class e7{constructor(F,A,B){this.selector=F,this.operation=B,this.topologyDescription=A}}pu.ServerSelectionEvent=e7;class mu extends e7{constructor(F,A,B){super(F,A,B);this.name=qD.SERVER_SELECTION_STARTED,this.message="Server selection started"}}pu.ServerSelectionStartedEvent=mu;class du extends e7{constructor(F,A,B,D){super(F,A,D);this.name=qD.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=B}}pu.ServerSelectionFailedEvent=du;class cu extends e7{constructor(F,A,B,D){super(F,A,D);this.name=qD.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:X,port:Z}=GD1.HostAddress.fromString(B).toHostPort();this.serverHost=X,this.serverPort=Z}}pu.ServerSelectionSucceededEvent=cu;class lu extends e7{constructor(F,A,B,D){super(F,A,D);this.name=qD.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=B}}pu.WaitingForSuitableServerEvent=lu});var gE=z((nu)=>{Object.defineProperty(nu,"__esModule",{value:!0});nu.SrvPoller=nu.SrvPollingEvent=void 0;var qD1=m("dns"),xE=m("timers"),zD1=l(),QD1=X6(),HF=s();class _E{constructor(F){this.srvRecords=F}hostnames(){return new Set(this.srvRecords.map((F)=>HF.HostAddress.fromSrvRecord(F).toString()))}}nu.SrvPollingEvent=_E;class fE extends QD1.TypedEventEmitter{static{this.SRV_RECORD_DISCOVERY="srvRecordDiscovery"}constructor(F){super();if(this.on("error",HF.noop),!F||!F.srvHost)throw new zD1.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=F.srvHost,this.srvMaxHosts=F.srvMaxHosts??0,this.srvServiceName=F.srvServiceName??"mongodb",this.rescanSrvIntervalMS=60000,this.heartbeatFrequencyMS=F.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){if(!this._timeout)this.schedule()}stop(){if(this._timeout)xE.clearTimeout(this._timeout),this.generation+=1,this._timeout=void 0}schedule(){if(this._timeout)xE.clearTimeout(this._timeout);this._timeout=xE.setTimeout(()=>{this._poll().then(void 0,HF.squashError)},this.intervalMS)}success(F){this.haMode=!1,this.schedule(),this.emit(fE.SRV_RECORD_DISCOVERY,new _E(F))}failure(){this.haMode=!0,this.schedule()}async _poll(){let F=this.generation,A;try{A=await qD1.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(F!==this.generation)return;let B=[];for(let D of A)try{HF.checkParentDomainMatch(D.name,this.srvHost),B.push(D)}catch(X){HF.squashError(X)}if(!B.length){this.failure();return}this.success(B)}}nu.SrvPoller=fE});var XO=z((BO)=>{Object.defineProperty(BO,"__esModule",{value:!0});BO.Topology=void 0;var UD1=ZE(),m2=w0(),W3=l(),Z0=Y4(),VD1=X6(),qF=f0(),bE=g0(),d2=s(),V1=F6(),j4=oB(),su=iG(),hE=r5(),yE=C5(),T4=SE(),zD=gE(),ru=kG(),LD1=0,zF=d2.makeStateMachine({[V1.STATE_CLOSED]:[V1.STATE_CLOSED,V1.STATE_CONNECTING],[V1.STATE_CONNECTING]:[V1.STATE_CONNECTING,V1.STATE_CLOSING,V1.STATE_CONNECTED,V1.STATE_CLOSED],[V1.STATE_CONNECTED]:[V1.STATE_CONNECTED,V1.STATE_CLOSING,V1.STATE_CLOSED],[V1.STATE_CLOSING]:[V1.STATE_CLOSING,V1.STATE_CLOSED]});class B2 extends VD1.TypedEventEmitter{static{this.SERVER_OPENING=m2.SERVER_OPENING}static{this.SERVER_CLOSED=m2.SERVER_CLOSED}static{this.SERVER_DESCRIPTION_CHANGED=m2.SERVER_DESCRIPTION_CHANGED}static{this.TOPOLOGY_OPENING=m2.TOPOLOGY_OPENING}static{this.TOPOLOGY_CLOSED=m2.TOPOLOGY_CLOSED}static{this.TOPOLOGY_DESCRIPTION_CHANGED=m2.TOPOLOGY_DESCRIPTION_CHANGED}static{this.ERROR=m2.ERROR}static{this.OPEN=m2.OPEN}static{this.CONNECT=m2.CONNECT}static{this.CLOSE=m2.CLOSE}static{this.TIMEOUT=m2.TIMEOUT}constructor(F,A,B){super();if(this.on("error",d2.noop),this.client=F,B=B??{hosts:[d2.HostAddress.fromString("localhost:27017")],...Object.fromEntries(UD1.DEFAULT_OPTIONS.entries())},typeof A==="string")A=[d2.HostAddress.fromString(A)];else if(!Array.isArray(A))A=[A];let D=[];for(let $ of A)if(typeof $==="string")D.push(d2.HostAddress.fromString($));else if($ instanceof d2.HostAddress)D.push($);else throw new W3.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify($)}`);let X=wD1(B),Z=LD1++,J=B.srvMaxHosts==null||B.srvMaxHosts===0||B.srvMaxHosts>=D.length?D:d2.shuffle(D,B.srvMaxHosts),Y=new Map;for(let $ of J)Y.set($.toString(),new hE.ServerDescription($));if(this.waitQueue=new d2.List,this.s={id:Z,options:B,seedlist:D,state:V1.STATE_CLOSED,description:new ru.TopologyDescription(X,Y,B.replicaSet,void 0,void 0,void 0,B),serverSelectionTimeoutMS:B.serverSelectionTimeoutMS,heartbeatFrequencyMS:B.heartbeatFrequencyMS,minHeartbeatFrequencyMS:B.minHeartbeatFrequencyMS,servers:new Map,credentials:B?.credentials,clusterTime:void 0,detectShardedTopology:($)=>this.detectShardedTopology($),detectSrvRecords:($)=>this.detectSrvRecords($)},this.mongoLogger=F.mongoLogger,this.component="topology",B.srvHost&&!B.loadBalanced)this.s.srvPoller=B.srvPoller??new zD.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:B.srvHost,srvMaxHosts:B.srvMaxHosts,srvServiceName:B.srvServiceName}),this.on(B2.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology);this.connectionLock=void 0}detectShardedTopology(F){let A=F.previousDescription.type,B=F.newDescription.type,D=A!==V1.TopologyType.Sharded&&B===V1.TopologyType.Sharded,Z=!!this.s.srvPoller?.listeners(zD.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);if(D&&!Z)this.s.srvPoller?.on(zD.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start()}detectSrvRecords(F){let A=this.s.description;if(this.s.description=this.s.description.updateFromSrvPollingEvent(F,this.s.options.srvMaxHosts),this.s.description===A)return;tu(this),this.emitAndLog(B2.TOPOLOGY_DESCRIPTION_CHANGED,new j4.TopologyDescriptionChangedEvent(this.s.id,A,this.s.description))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}async connect(F){this.connectionLock??=this._connect(F);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(F){if(F=F??{},this.s.state===V1.STATE_CONNECTED)return this;zF(this,V1.STATE_CONNECTING),this.emitAndLog(B2.TOPOLOGY_OPENING,new j4.TopologyOpeningEvent(this.s.id)),this.emitAndLog(B2.TOPOLOGY_DESCRIPTION_CHANGED,new j4.TopologyDescriptionChangedEvent(this.s.id,new ru.TopologyDescription(V1.TopologyType.Unknown),this.s.description));let A=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(A.map((J)=>[J.address,FO(this,J)])),this.s.options.loadBalanced)for(let J of A){let Y=new hE.ServerDescription(J.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(Y)}let B=this.client.s.options.serverSelectionTimeoutMS,D=F.readPreference??qF.ReadPreference.primary,X=bE.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:B,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),Z={operationName:"handshake",...F,timeoutContext:X};try{let J=await this.selectServer(yE.readPreferenceServerSelector(D),Z);if(this.s.options.__skipPingOnConnect!==!0){let $=await J.pool.checkOut({timeoutContext:X});return J.pool.checkIn($),zF(this,V1.STATE_CONNECTED),this.emit(B2.OPEN,this),this.emit(B2.CONNECT,this),this}return zF(this,V1.STATE_CONNECTED),this.emit(B2.OPEN,this),this.emit(B2.CONNECT,this),this}catch(J){throw this.close(),J}}closeCheckedOutConnections(){for(let F of this.s.servers.values())return F.closeCheckedOutConnections()}close(){if(this.s.state===V1.STATE_CLOSED||this.s.state===V1.STATE_CLOSING)return;for(let F of this.s.servers.values())eu(F,this);if(this.s.servers.clear(),zF(this,V1.STATE_CLOSING),AO(this.waitQueue,new W3.MongoTopologyClosedError),this.s.srvPoller)this.s.srvPoller.stop(),this.s.srvPoller.removeListener(zD.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords);this.removeListener(B2.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),zF(this,V1.STATE_CLOSED),this.emitAndLog(B2.TOPOLOGY_CLOSED,new j4.TopologyClosedEvent(this.s.id))}async selectServer(F,A){let B;if(typeof F!=="function")if(typeof F==="string")B=yE.readPreferenceServerSelector(qF.ReadPreference.fromString(F));else{let W;if(F instanceof qF.ReadPreference)W=F;else qF.ReadPreference.translate(A),W=A.readPreference||qF.ReadPreference.primary;B=yE.readPreferenceServerSelector(W)}else B=F;if(A={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...A},this.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new T4.ServerSelectionStartedEvent(F,this.description,A.operationName));let D;if(A.timeoutContext)D=A.timeoutContext.serverSelectionTimeout;else D=bE.Timeout.expires(A.serverSelectionTimeoutMS??0);let X=this.description.type===V1.TopologyType.Sharded,Z=A.session,J=Z&&Z.transaction;if(X&&J&&J.server){if(this.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new T4.ServerSelectionSucceededEvent(F,this.description,J.server.pool.address,A.operationName));if(A.timeoutContext?.clearServerSelectionTimeout)D?.clear();return J.server}let{promise:Y,resolve:$,reject:G}=d2.promiseWithResolvers(),E={serverSelector:B,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:J,resolve:$,reject:G,cancelled:!1,startTime:d2.now(),operationName:A.operationName,waitingLogged:!1,previousServer:A.previousServer},C=d2.addAbortListener(A.signal,function(){E.cancelled=!0,G(this.reason)});this.waitQueue.push(E),ou(this);try{D?.throwIfExpired();let W=await(D?Promise.race([Y,D]):Y);if(A.timeoutContext?.csotEnabled()&&W.description.minRoundTripTime!==0)A.timeoutContext.minRoundTripTime=W.description.minRoundTripTime;return W}catch(W){if(bE.TimeoutError.is(W)){E.cancelled=!0;let H=new W3.MongoServerSelectionError(`Server selection timed out after ${D?.duration} ms`,this.description);if(this.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new T4.ServerSelectionFailedEvent(F,this.description,H,A.operationName));if(A.timeoutContext?.csotEnabled())throw new W3.MongoOperationTimeoutError("Timed out during server selection",{cause:H});throw H}throw W}finally{if(C?.[d2.kDispose](),A.timeoutContext?.clearServerSelectionTimeout)D?.clear()}}serverUpdateHandler(F){if(!this.s.description.hasServer(F.address))return;if(RD1(this.s.description,F))return;let A=this.s.description,B=this.s.description.servers.get(F.address);if(!B)return;let D=F.$clusterTime;if(D)V1._advanceClusterTime(this,D);let X=B&&B.equals(F);if(this.s.description=this.s.description.update(F),this.s.description.compatibilityError){this.emit(B2.ERROR,new W3.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!X){let Z=this.s.description.servers.get(F.address);if(Z)this.emit(B2.SERVER_DESCRIPTION_CHANGED,new j4.ServerDescriptionChangedEvent(this.s.id,F.address,B,Z))}if(tu(this,F),this.waitQueue.length>0)ou(this);if(!X)this.emitAndLog(B2.TOPOLOGY_DESCRIPTION_CHANGED,new j4.TopologyDescriptionChangedEvent(this.s.id,A,this.s.description))}auth(F,A){if(typeof F==="function")A=F,F=void 0;if(typeof A==="function")A(void 0,!0)}isConnected(){return this.s.state===V1.STATE_CONNECTED}isDestroyed(){return this.s.state===V1.STATE_CLOSED}lastHello(){let F=Array.from(this.description.servers.values());if(F.length===0)return{};return F.filter((D)=>D.type!==V1.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(F){this.s.clusterTime=F}}BO.Topology=B2;function eu(F,A){for(let B of m2.LOCAL_SERVER_EVENTS)F.removeAllListeners(B);F.close(),A.emitAndLog(B2.SERVER_CLOSED,new j4.ServerClosedEvent(A.s.id,F.description.address));for(let B of m2.SERVER_RELAY_EVENTS)F.removeAllListeners(B)}function wD1(F){if(F?.directConnection)return V1.TopologyType.Single;if(F?.replicaSet)return V1.TopologyType.ReplicaSetNoPrimary;if(F?.loadBalanced)return V1.TopologyType.LoadBalanced;return V1.TopologyType.Unknown}function FO(F,A){F.emitAndLog(B2.SERVER_OPENING,new j4.ServerOpeningEvent(F.s.id,A.address));let B=new su.Server(F,A,F.s.options);for(let D of m2.SERVER_RELAY_EVENTS)B.on(D,(X)=>F.emit(D,X));return B.on(su.Server.DESCRIPTION_RECEIVED,(D)=>F.serverUpdateHandler(D)),B.connect(),B}function tu(F,A){if(A&&F.s.servers.has(A.address)){let B=F.s.servers.get(A.address);if(B){if(B.s.description=A,A.error instanceof W3.MongoError&&A.error.hasErrorLabel(W3.MongoErrorLabel.ResetPool)){let D=A.error.hasErrorLabel(W3.MongoErrorLabel.InterruptInUseConnections);B.pool.clear({interruptInUseConnections:D})}else if(A.error==null){let D=F.s.description.type;if(A.isDataBearing||A.type!==V1.ServerType.Unknown&&D===V1.TopologyType.Single)B.pool.ready()}}}for(let B of F.description.servers.values())if(!F.s.servers.has(B.address)){let D=FO(F,B);F.s.servers.set(B.address,D)}for(let B of F.s.servers){let D=B[0];if(F.description.hasServer(D))continue;if(!F.s.servers.has(D))continue;let X=F.s.servers.get(D);if(F.s.servers.delete(D),X)eu(X,F)}}function AO(F,A){while(F.length){let B=F.shift();if(!B)continue;if(!B.cancelled){if(B.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))B.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new T4.ServerSelectionFailedEvent(B.serverSelector,B.topologyDescription,A,B.operationName));B.reject(A)}}}function ou(F){if(F.s.state===V1.STATE_CLOSED){AO(F.waitQueue,new W3.MongoTopologyClosedError);return}let A=F.description.type===V1.TopologyType.Sharded,B=Array.from(F.description.servers.values()),D=F.waitQueue.length;for(let X=0;X<D;++X){let Z=F.waitQueue.shift();if(!Z)continue;if(Z.cancelled)continue;let J;try{let{serverSelector:G,previousServer:E}=Z;J=G?G(F.description,B,E?[E]:[]):B}catch(G){if(F.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new T4.ServerSelectionFailedEvent(Z.serverSelector,F.description,G,Z.operationName));Z.reject(G);continue}let Y;if(J.length===0){if(!Z.waitingLogged){if(F.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.INFORMATIONAL))F.client.mongoLogger?.info(Z0.MongoLoggableComponent.SERVER_SELECTION,new T4.WaitingForSuitableServerEvent(Z.serverSelector,F.description,F.s.serverSelectionTimeoutMS!==0?F.s.serverSelectionTimeoutMS-(d2.now()-Z.startTime):-1,Z.operationName));Z.waitingLogged=!0}F.waitQueue.push(Z);continue}else if(J.length===1)Y=F.s.servers.get(J[0].address);else{let G=d2.shuffle(J,2),E=F.s.servers.get(G[0].address),C=F.s.servers.get(G[1].address);Y=E&&C&&E.s.operationCount<C.s.operationCount?E:C}if(!Y){let G=new W3.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",F.description);if(F.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new T4.ServerSelectionFailedEvent(Z.serverSelector,F.description,G,Z.operationName));Z.reject(G);return}let $=Z.transaction;if(A&&$&&$.isActive&&Y)$.pinServer(Y);if(F.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new T4.ServerSelectionSucceededEvent(Z.serverSelector,Z.topologyDescription,Y.pool.address,Z.operationName));Z.resolve(Y)}if(F.waitQueue.length>0)for(let[,X]of F.s.servers)process.nextTick(function Z(){return X.requestCheck()})}function RD1(F,A){let D=F.servers.get(A.address)?.topologyVersion;return hE.compareTopologyVersion(D,A.topologyVersion)>0}});var E9=z((CO)=>{Object.defineProperty(CO,"__esModule",{value:!0});CO.MongoClient=CO.ServerApiVersion=void 0;var vE=m("fs"),ID1=G4(),PD1=$1(),ND1=N7(),MD1=PB(),jD1=X3(),ZO=f$(),JO=ZE(),TD1=w0(),kD1=UB(),mE=l(),uD1=RE(),YO=Y4(),OD1=X6(),SD1=gu(),xD1=vu(),_D1=d0(),fD1=f0(),gD1=C5(),$O=XO(),GO=V5(),l0=s();CO.ServerApiVersion=Object.freeze({v1:"1"});class EO extends OD1.TypedEventEmitter{constructor(F,A){super();this.driverInfoList=[],this.on("error",l0.noop),this.options=JO.parseOptions(F,this,A),this.appendMetadata(this.options.driverInfo);let B=Object.values(this.options.mongoLoggerOptions.componentSeverities).some((X)=>X!==YO.SeverityLevel.OFF);this.mongoLogger=B?new YO.MongoLogger(this.options.mongoLoggerOptions):void 0;let D=this;this.s={url:F,bsonOptions:PD1.resolveBSONOptions(this.options),namespace:l0.ns("admin"),hasBeenClosed:!1,sessionPool:new GO.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new uD1.MongoClientAuthProviders,get options(){return D.options},get readConcern(){return D.options.readConcern},get writeConcern(){return D.options.writeConcern},get readPreference(){return D.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async[Symbol.asyncDispose](){await this.close()}appendMetadata(F){if(this.driverInfoList.some((B)=>ZO.isDriverInfoEqual(B,F)))return;this.driverInfoList.push(F),this.options.metadata=ZO.makeClientMetadata(this.driverInfoList,this.options).then(void 0,l0.squashError).then((B)=>B??{})}checkForNonGenuineHosts(){let F=this.options.hosts.filter((X)=>l0.isHostMatch(l0.DOCUMENT_DB_CHECK,X.host)),A=l0.isHostMatch(l0.DOCUMENT_DB_CHECK,this.options.srvHost),B=this.options.hosts.filter((X)=>l0.isHostMatch(l0.COSMOS_DB_CHECK,X.host)),D=l0.isHostMatch(l0.COSMOS_DB_CHECK,this.options.srvHost);if(F.length!==0||A)this.mongoLogger?.info("client",l0.DOCUMENT_DB_MSG);else if(B.length!==0||D)this.mongoLogger?.info("client",l0.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(F){this.options.monitorCommands=F}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(F,A){if(this.autoEncrypter)throw new mE.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new SD1.ClientBulkWriteExecutor(this,F,l0.resolveOptions(this,A)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let F=this.options;if(F.tls){if(typeof F.tlsCAFile==="string")F.ca??=await vE.promises.readFile(F.tlsCAFile);if(typeof F.tlsCRLFile==="string")F.crl??=await vE.promises.readFile(F.tlsCRLFile);if(typeof F.tlsCertificateKeyFile==="string"){if(!F.key||!F.cert){let B=await vE.promises.readFile(F.tlsCertificateKeyFile);F.key??=B,F.cert??=B}}}if(typeof F.srvHost==="string"){let B=await JO.resolveSRVRecord(F);for(let[D,X]of B.entries())F.hosts[D]=X}if(F.credentials?.mechanism===jD1.AuthMechanism.MONGODB_OIDC){let B=F.credentials?.mechanismProperties?.ALLOWED_HOSTS||MD1.DEFAULT_ALLOWED_HOSTS;if(!F.credentials?.mechanismProperties?.ENVIRONMENT){for(let X of F.hosts)if(!l0.hostMatchesWildcards(X.toHostPort().host,B))throw new mE.MongoInvalidArgumentError(`Host '${X}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${B.join(",")}'`)}}this.topology=new $O.Topology(this,F.hosts,F),this.topology.once($O.Topology.OPEN,()=>this.emit("open",this));for(let B of TD1.MONGO_CLIENT_EVENTS)this.topology.on(B,(...D)=>this.emit(B,...D));let A=async()=>{try{await this.topology?.connect(F)}catch(B){throw this.topology?.close(),B}};if(this.autoEncrypter)await this.autoEncrypter?.init(),await A(),await F.encrypter.connectInternalClient();else await A();return this}async close(F=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let F=Array.from(this.s.activeCursors,(J)=>J.close());this.s.activeCursors.clear(),await Promise.all(F);let A=Array.from(this.s.activeSessions,(J)=>J.endSession());if(this.s.activeSessions.clear(),await Promise.all(A),this.topology==null)return;if(this.topology.description.type===ID1.TopologyType.LoadBalanced||this.topology.description.logicalSessionTimeoutMinutes!=null)await Z(this,this.topology);let D=this.topology;this.topology=void 0,D.close();let{encrypter:X}=this.options;if(X)await X.close(this);async function Z(J,{description:Y}){let $=gD1.readPreferenceServerSelector(fD1.ReadPreference.primaryPreferred),G=Array.from(Y.servers.values());if($(Y,G).length!==0){let C=Array.from(J.s.sessionPool.sessions,({id:W})=>W);if(C.length!==0)try{await _D1.executeOperation(J,new xD1.EndSessionsOperation(C))}catch(W){l0.squashError(W)}}}}db(F,A){if(A=A??{},!F)F=this.s.options.dbName;let B=Object.assign({},this.options,A);return new kD1.Db(this,F,B)}static async connect(F,A){return await new this(F,A).connect()}startSession(F){let A=new GO.ClientSession(this,this.s.sessionPool,{explicit:!0,...F},this.options);return this.s.activeSessions.add(A),A.once("ended",()=>{this.s.activeSessions.delete(A)}),A}async withSession(F,A){let B={owner:Symbol(),...typeof F==="object"?F:{}},D=typeof F==="function"?F:A;if(D==null)throw new mE.MongoInvalidArgumentError("Missing required callback parameter");let X=this.startSession(B);try{return await D(X)}finally{try{await X.endSession()}catch(Z){l0.squashError(Z)}}}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new ND1.ChangeStream(this,F,l0.resolveOptions(this,A))}}CO.MongoClient=EO});var N7=z((qO)=>{Object.defineProperty(qO,"__esModule",{value:!0});qO.ChangeStream=void 0;qO.filterOutOptions=HO;var yD1=I7(),p6=w0(),hD1=q2(),vD1=C$(),mD1=UB(),p0=l(),dD1=E9(),cD1=X6(),lD1=g0(),f3=s(),V9={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},pD1=[p6.RESUME_TOKEN_CHANGED,p6.END,p6.CLOSE],iD1="A change stream document has been received that lacks a resume token (_id).",QD="ChangeStream is closed",nD1=aD1();function HO(F){return Object.fromEntries(Object.entries(F).filter(([A,B])=>!nD1.has(A)))}class L9 extends cD1.TypedEventEmitter{async[Symbol.asyncDispose](){await this.close()}static{this.RESPONSE=p6.RESPONSE}static{this.MORE=p6.MORE}static{this.INIT=p6.INIT}static{this.CLOSE=p6.CLOSE}static{this.CHANGE=p6.CHANGE}static{this.END=p6.END}static{this.ERROR=p6.ERROR}static{this.RESUME_TOKEN_CHANGED=p6.RESUME_TOKEN_CHANGED}constructor(F,A=[],B={}){super();this.pipeline=A,this.options={...B};let D;if(delete this.options.writeConcern,F instanceof yD1.Collection)this.type=V9.COLLECTION,D=F.s.db.client.options.serverSelectionTimeoutMS;else if(F instanceof mD1.Db)this.type=V9.DATABASE,D=F.client.options.serverSelectionTimeoutMS;else if(F instanceof dD1.MongoClient)this.type=V9.CLUSTER,D=F.options.serverSelectionTimeoutMS;else throw new p0.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");if(this.contextOwner=Symbol(),this.parent=F,this.namespace=F.s.namespace,!this.options.readPreference&&F.readPreference)this.options.readPreference=F.readPreference;if(this.cursor=this._createChangeStreamCursor(B),this.isClosed=!1,this.mode=!1,this.on("newListener",(X)=>{if(X==="change"&&this.cursor&&this.listenerCount("change")===0)this._streamEvents(this.cursor)}),this.on("removeListener",(X)=>{if(X==="change"&&this.listenerCount("change")===0&&this.cursor)this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null)this.timeoutContext=new lD1.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:D})}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{return await this.cursor.hasNext()}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof p0.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch(B){f3.squashError(B)}throw A}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let F=await this.cursor.next();return this._processChange(F??null)}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof p0.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch(B){f3.squashError(B)}throw A}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let F=await this.cursor.tryNext();if(!F)return null;return this._processChange(F)}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof p0.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch(B){f3.squashError(B)}throw A}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0)yield await this.next()}finally{try{await this.close()}catch(F){f3.squashError(F)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let F=this.cursor;try{await F.close()}finally{this._endStream()}}stream(){if(this.closed)throw new p0.MongoChangeStreamError(QD);return this.cursor.stream()}_setIsEmitter(){if(this.mode==="iterator")throw new p0.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new p0.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(F){let A=HO(F);if(this.type===V9.CLUSTER)A.allChangesForCluster=!0;let B=[{$changeStream:A},...this.pipeline],D=this.type===V9.CLUSTER?this.parent:this.type===V9.DATABASE?this.parent.client:this.type===V9.COLLECTION?this.parent.client:null;if(D==null)throw new p0.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let X=new vD1.ChangeStreamCursor(D,this.namespace,B,{...F,timeoutContext:this.timeoutContext?new hD1.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let Z of pD1)X.on(Z,(J)=>this.emit(Z,J));if(this.listenerCount(L9.CHANGE)>0)this._streamEvents(X);return X}_closeEmitterModeWithError(F){this.emit(L9.ERROR,F),this.close().then(void 0,f3.squashError)}_streamEvents(F){this._setIsEmitter();let A=this.cursorStream??F.stream();this.cursorStream=A,A.on("data",(B)=>{try{let D=this._processChange(B);this.emit(L9.CHANGE,D)}catch(D){this.emit(L9.ERROR,D)}this.timeoutContext?.refresh()}),A.on("error",(B)=>this._processErrorStreamMode(B,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(F){if(this.isClosed)throw new p0.MongoAPIError(QD);if(F==null)throw new p0.MongoRuntimeError(QD);if(F&&!F._id)throw new p0.MongoChangeStreamError(iD1);return this.cursor.cacheResumeToken(F._id),this.options.startAtOperationTime=void 0,F}_processErrorStreamMode(F,A){if(this.isClosed)return;if(A&&(p0.isResumableError(F,this.cursor.maxWireVersion)||F instanceof p0.MongoOperationTimeoutError))this._endStream(),this.cursor.close().then(()=>this._resume(F),(B)=>{return f3.squashError(B),this._resume(F)}).then(()=>{if(F instanceof p0.MongoOperationTimeoutError)this.emit(L9.ERROR,F)},()=>this._closeEmitterModeWithError(F));else this._closeEmitterModeWithError(F)}async _processErrorIteratorMode(F,A){if(this.isClosed)throw new p0.MongoAPIError(QD);if(A&&(p0.isResumableError(F,this.cursor.maxWireVersion)||F instanceof p0.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(B){f3.squashError(B)}if(await this._resume(F),F instanceof p0.MongoOperationTimeoutError)throw F}else{try{await this.close()}catch(B){f3.squashError(B)}throw F}}async _resume(F){this.timeoutContext?.refresh();let A=f3.getTopology(this.parent);try{await A.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),F}}}qO.ChangeStream=L9;function aD1(){return new Set(Object.keys({allowDiskUse:"",authdb:"",batchSize:"",bsonRegExp:"",bypassDocumentValidation:"",bypassPinningCheck:"",checkKeys:"",collation:"",comment:"",cursor:"",dbName:"",enableUtf8Validation:"",explain:"",fieldsAsRaw:"",hint:"",ignoreUndefined:"",let:"",maxAwaitTimeMS:"",maxTimeMS:"",omitMaxTimeMS:"",out:"",promoteBuffers:"",promoteLongs:"",promoteValues:"",raw:"",rawData:"",readConcern:"",readPreference:"",serializeFunctions:"",session:"",timeoutContext:"",timeoutMS:"",timeoutMode:"",useBigInt64:"",willRetryWrite:"",writeConcern:""}))}});var cE=z((KO)=>{Object.defineProperty(KO,"__esModule",{value:!0});KO.GridFSBucketReadStream=void 0;var rD1=m("stream"),tD1=q2(),G6=l(),oD1=g0();class dE extends rD1.Readable{static{this.FILE="file"}constructor(F,A,B,D,X){super({emitClose:!0});this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:F,expected:0,files:A,filter:D,init:!1,expectedEnd:0,options:{start:0,end:0,...X},readPreference:B,timeoutContext:X?.timeoutMS!=null?new oD1.CSOTTimeoutContext({timeoutMS:X.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){if(this.destroyed)return;AX1(this,()=>eD1(this))}start(F=0){return QO(this),this.s.options.start=F,this}end(F=0){return QO(this),this.s.options.end=F,this}async abort(){this.push(null),this.destroy();let F=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:F})}}KO.GridFSBucketReadStream=dE;function QO(F){if(F.s.init)throw new G6.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function eD1(F){if(F.destroyed)return;if(!F.s.cursor)return;if(!F.s.file)return;let A=(B)=>{if(F.destroyed)return;if(!B){F.push(null),F.s.cursor?.close().then(void 0,(C)=>F.destroy(C));return}if(!F.s.file)return;let D=F.s.file.length-F.s.bytesRead,X=F.s.expected++,Z=Math.min(F.s.file.chunkSize,D);if(B.n>X)return F.destroy(new G6.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${B.n}, expected: ${X}`));if(B.n<X)return F.destroy(new G6.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${B.n}, expected: ${X}`));let J=Buffer.isBuffer(B.data)?B.data:B.data.buffer;if(J.byteLength!==Z){if(D<=0)return F.destroy(new G6.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${B.n}, expected file length ${F.s.file.length} bytes but already read ${F.s.bytesRead} bytes`));return F.destroy(new G6.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${J.byteLength}, expected: ${Z}`))}if(F.s.bytesRead+=J.byteLength,J.byteLength===0)return F.push(null);let Y=null,$=null;if(F.s.bytesToSkip!=null)Y=F.s.bytesToSkip,F.s.bytesToSkip=0;let G=X===F.s.expectedEnd-1,E=F.s.options.end-F.s.bytesToSkip;if(G&&F.s.bytesToTrim!=null)$=F.s.file.chunkSize-F.s.bytesToTrim;else if(F.s.options.end&&E<B.data.byteLength)$=E;if(Y!=null||$!=null)J=J.slice(Y||0,$||J.byteLength);F.push(J);return};F.s.cursor.next().then(A,(B)=>{if(F.destroyed)return;F.destroy(B)})}function FX1(F){let A={};if(F.s.readPreference)A.readPreference=F.s.readPreference;if(F.s.options&&F.s.options.sort)A.sort=F.s.options.sort;if(F.s.options&&F.s.options.skip)A.skip=F.s.options.skip;let B=(X)=>{if(F.destroyed)return;if(!X){let $=`FileNotFound: file ${F.s.filter._id?F.s.filter._id.toString():F.s.filter.filename} was not found`,G=new G6.MongoRuntimeError($);return G.code="ENOENT",F.destroy(G)}if(X.length<=0){F.push(null);return}if(F.destroyed){F.destroy();return}try{F.s.bytesToSkip=BX1(F,X,F.s.options)}catch(Y){return F.destroy(Y)}let Z={files_id:X._id};if(F.s.options&&F.s.options.start!=null){let Y=Math.floor(F.s.options.start/X.chunkSize);if(Y>0)Z.n={$gte:Y}}let J;try{J=F.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${F.s.timeoutContext?.timeoutMS}ms`)}catch(Y){return F.destroy(Y)}if(F.s.cursor=F.s.chunks.find(Z,{timeoutMode:F.s.options.timeoutMS!=null?tD1.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:J}).sort({n:1}),F.s.readPreference)F.s.cursor.withReadPreference(F.s.readPreference);F.s.expectedEnd=Math.ceil(X.length/X.chunkSize),F.s.file=X;try{F.s.bytesToTrim=DX1(F,X,F.s.cursor,F.s.options)}catch(Y){return F.destroy(Y)}F.emit(dE.FILE,X);return},D;try{D=F.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${F.s.timeoutContext?.timeoutMS}ms`)}catch(X){if(!F.destroyed)F.destroy(X);return}A.timeoutMS=D,F.s.files.findOne(F.s.filter,A).then(B,(X)=>{if(F.destroyed)return;F.destroy(X)})}function AX1(F,A){if(F.s.file)return A();if(!F.s.init)FX1(F),F.s.init=!0;F.once("file",()=>{A()})}function BX1(F,A,B){if(B&&B.start!=null){if(B.start>A.length)throw new G6.MongoInvalidArgumentError(`Stream start (${B.start}) must not be more than the length of the file (${A.length})`);if(B.start<0)throw new G6.MongoInvalidArgumentError(`Stream start (${B.start}) must not be negative`);if(B.end!=null&&B.end<B.start)throw new G6.MongoInvalidArgumentError(`Stream start (${B.start}) must not be greater than stream end (${B.end})`);return F.s.bytesRead=Math.floor(B.start/A.chunkSize)*A.chunkSize,F.s.expected=Math.floor(B.start/A.chunkSize),B.start-F.s.bytesRead}throw new G6.MongoInvalidArgumentError("Start option must be defined")}function DX1(F,A,B,D){if(D&&D.end!=null){if(D.end>A.length)throw new G6.MongoInvalidArgumentError(`Stream end (${D.end}) must not be more than the length of the file (${A.length})`);if(D.start==null||D.start<0)throw new G6.MongoInvalidArgumentError(`Stream end (${D.end}) must not be negative`);let X=D.start!=null?Math.floor(D.start/A.chunkSize):0;return B.limit(Math.ceil(D.end/A.chunkSize)-X),F.s.expectedEnd=Math.ceil(D.end/A.chunkSize),Math.ceil(D.end/A.chunkSize)*A.chunkSize-D.end}throw new G6.MongoInvalidArgumentError("End option must be defined")}});var pE=z((PO)=>{Object.defineProperty(PO,"__esModule",{value:!0});PO.GridFSBucketWriteStream=void 0;var XX1=m("stream"),LO=$1(),wO=q2(),i6=l(),ZX1=g0(),VO=s(),JX1=P2();class RO extends XX1.Writable{constructor(F,A,B){super();if(this.gridFSFile=null,B=B??{},this.bucket=F,this.chunks=F.s._chunksCollection,this.filename=A,this.files=F.s._filesCollection,this.options=B,this.writeConcern=JX1.WriteConcern.fromOptions(B)||F.s.options.writeConcern,this.done=!1,this.id=B.id?B.id:new LO.ObjectId,this.chunkSizeBytes=B.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},B.timeoutMS!=null)this.timeoutContext=new ZX1.CSOTTimeoutContext({timeoutMS:B.timeoutMS,serverSelectionTimeoutMS:VO.resolveTimeoutOptions(this.bucket.s.db.client,{}).serverSelectionTimeoutMS})}_construct(F){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,$X1(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),F()},(A)=>{if(A instanceof i6.MongoOperationTimeoutError)return w9(this,A,F);VO.squashError(A),F()});else return process.nextTick(F)}_write(F,A,B){EX1(this,F,A,B)}_final(F){if(this.state.streamEnd)return process.nextTick(F);this.state.streamEnd=!0,CX1(this,F)}async abort(){if(this.state.streamEnd)throw new i6.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new i6.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let F=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:F})}}PO.GridFSBucketWriteStream=RO;function w9(F,A,B){if(F.state.errored){process.nextTick(B);return}F.state.errored=!0,process.nextTick(B,A)}function IO(F,A,B){return{_id:new LO.ObjectId,files_id:F,n:A,data:B}}async function YX1(F){let A={files_id:1,n:1},B;B=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);let D;try{D=await F.chunks.listIndexes({timeoutMode:B!=null?wO.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:B}).toArray()}catch(Z){if(Z instanceof i6.MongoError&&Z.code===i6.MONGODB_ERROR_CODES.NamespaceNotFound)D=[];else throw Z}if(!D.find((Z)=>{if(Object.keys(Z.key).length===2&&Z.key.files_id===1&&Z.key.n===1)return!0;return!1}))B=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),await F.chunks.createIndex(A,{...F.writeConcern,background:!0,unique:!0,timeoutMS:B})}function lE(F,A){if(F.done)return process.nextTick(A);if(F.state.streamEnd&&F.state.outstandingRequests===0&&!F.state.errored){F.done=!0;let B=GX1(F.id,F.length,F.chunkSizeBytes,F.filename,F.options.metadata);if(KD(F,A))return;let D=F.timeoutContext?.remainingTimeMS;if(D!=null&&D<=0)return w9(F,new i6.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),A);F.files.insertOne(B,{writeConcern:F.writeConcern,timeoutMS:D}).then(()=>{F.gridFSFile=B,A()},(X)=>{return w9(F,X,A)});return}process.nextTick(A)}async function $X1(F){let A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);if(await F.files.findOne({},{projection:{_id:1},timeoutMS:A})!=null)return;let D={filename:1,uploadDate:1},X;A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);let Z={timeoutMode:A!=null?wO.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:A};try{X=await F.files.listIndexes(Z).toArray()}catch(Y){if(Y instanceof i6.MongoError&&Y.code===i6.MONGODB_ERROR_CODES.NamespaceNotFound)X=[];else throw Y}if(!X.find((Y)=>{if(Object.keys(Y.key).length===2&&Y.key.filename===1&&Y.key.uploadDate===1)return!0;return!1}))A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),await F.files.createIndex(D,{background:!1,timeoutMS:A});await YX1(F)}function GX1(F,A,B,D,X){let Z={_id:F,length:A,chunkSize:B,uploadDate:new Date,filename:D};if(X)Z.metadata=X;return Z}function EX1(F,A,B,D){if(KD(F,D))return;let X=Buffer.isBuffer(A)?A:Buffer.from(A,B);if(F.length+=X.length,F.pos+X.length<F.chunkSizeBytes){X.copy(F.bufToStore,F.pos),F.pos+=X.length,process.nextTick(D);return}let Z=X.length,J=F.chunkSizeBytes-F.pos,Y=Math.min(J,X.length),$=0;while(Z>0){let G=X.length-Z;X.copy(F.bufToStore,F.pos,G,G+Y),F.pos+=Y,J-=Y;let E;if(J===0){E=IO(F.id,F.n,Buffer.from(F.bufToStore));let C=F.timeoutContext?.remainingTimeMS;if(C!=null&&C<=0)return w9(F,new i6.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),D);if(++F.state.outstandingRequests,++$,KD(F,D))return;F.chunks.insertOne(E,{writeConcern:F.writeConcern,timeoutMS:C}).then(()=>{if(--F.state.outstandingRequests,--$,!$)lE(F,D)},(W)=>{return w9(F,W,D)}),J=F.chunkSizeBytes,F.pos=0,++F.n}Z-=Y,Y=Math.min(J,Z)}}function CX1(F,A){if(F.pos===0)return lE(F,A);let B=Buffer.alloc(F.pos);F.bufToStore.copy(B,0,0,F.pos);let D=IO(F.id,F.n,B);if(KD(F,A))return;let X=F.timeoutContext?.remainingTimeMS;if(X!=null&&X<=0)return w9(F,new i6.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),A);++F.state.outstandingRequests,F.chunks.insertOne(D,{writeConcern:F.writeConcern,timeoutMS:X}).then(()=>{--F.state.outstandingRequests,lE(F,A)},(Z)=>{return w9(F,Z,A)})}function KD(F,A){if(F.state.aborted)return process.nextTick(A,new i6.MongoAPIError("Stream has been aborted")),!0;return!1}});var SO=z((uO)=>{Object.defineProperty(uO,"__esModule",{value:!0});uO.GridFSBucket=void 0;var iE=l(),WX1=X6(),MO=g0(),UD=s(),HX1=P2(),jO=cE(),TO=pE(),qX1={bucketName:"fs",chunkSizeBytes:261120};class kO extends WX1.TypedEventEmitter{static{this.INDEX="index"}constructor(F,A){super();this.on("error",UD.noop),this.setMaxListeners(0);let B=UD.resolveOptions(F,{...qX1,...A,writeConcern:HX1.WriteConcern.fromOptions(A)});this.s={db:F,options:B,_chunksCollection:F.collection(B.bucketName+".chunks"),_filesCollection:F.collection(B.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(F,A){return new TO.GridFSBucketWriteStream(this,F,{timeoutMS:this.s.options.timeoutMS,...A})}openUploadStreamWithId(F,A,B){return new TO.GridFSBucketWriteStream(this,A,{timeoutMS:this.s.options.timeoutMS,...B,id:F})}openDownloadStream(F,A){return new jO.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:F},{timeoutMS:this.s.options.timeoutMS,...A})}async delete(F,A){let{timeoutMS:B}=UD.resolveOptions(this.s.db,A),D=void 0;if(B)D=new MO.CSOTTimeoutContext({timeoutMS:B,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});let{deletedCount:X}=await this.s._filesCollection.deleteOne({_id:F},{timeoutMS:D?.remainingTimeMS}),Z=D?.remainingTimeMS;if(Z!=null&&Z<=0)throw new iE.MongoOperationTimeoutError(`Timed out after ${B}ms`);if(await this.s._chunksCollection.deleteMany({files_id:F},{timeoutMS:Z}),X===0)throw new iE.MongoRuntimeError(`File not found for id ${F}`)}find(F={},A={}){return this.s._filesCollection.find(F,A)}openDownloadStreamByName(F,A){let B={uploadDate:-1},D=void 0;if(A&&A.revision!=null)if(A.revision>=0)B={uploadDate:1},D=A.revision;else D=-A.revision-1;return new jO.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:F},{timeoutMS:this.s.options.timeoutMS,...A,sort:B,skip:D})}async rename(F,A,B){let D={_id:F},X={$set:{filename:A}},{matchedCount:Z}=await this.s._filesCollection.updateOne(D,X,B);if(Z===0)throw new iE.MongoRuntimeError(`File with id ${F} not found`)}async drop(F){let{timeoutMS:A}=UD.resolveOptions(this.s.db,F),B=void 0;if(A)B=new MO.CSOTTimeoutContext({timeoutMS:A,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});if(B){await this.s._filesCollection.drop({timeoutMS:B.remainingTimeMS});let D=B.getRemainingTimeMSOrThrow(`Timed out after ${A}ms`);await this.s._chunksCollection.drop({timeoutMS:D})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}}uO.GridFSBucket=kO});var G4=z((S)=>{Object.defineProperty(S,"__esModule",{value:!0});S.MongoRuntimeError=S.MongoParseError=S.MongoOperationTimeoutError=S.MongoOIDCError=S.MongoNotConnectedError=S.MongoNetworkTimeoutError=S.MongoNetworkError=S.MongoMissingDependencyError=S.MongoMissingCredentialsError=S.MongoKerberosError=S.MongoInvalidArgumentError=S.MongoGridFSStreamError=S.MongoGridFSChunkError=S.MongoGCPError=S.MongoExpiredSessionError=S.MongoError=S.MongoDriverError=S.MongoDecompressionError=S.MongoCursorInUseError=S.MongoCursorExhaustedError=S.MongoCompatibilityError=S.MongoClientClosedError=S.MongoClientBulkWriteExecutionError=S.MongoClientBulkWriteError=S.MongoClientBulkWriteCursorError=S.MongoChangeStreamError=S.MongoBatchReExecutionError=S.MongoAzureError=S.MongoAWSError=S.MongoAPIError=S.ExplainableCursor=S.ChangeStreamCursor=S.ClientEncryption=S.MongoBulkWriteError=S.UUID=S.Timestamp=S.ObjectId=S.MinKey=S.MaxKey=S.Long=S.Int32=S.Double=S.Decimal128=S.DBRef=S.Code=S.BSONType=S.BSONSymbol=S.BSONRegExp=S.Binary=S.BSON=void 0;S.CommandStartedEvent=S.CommandFailedEvent=S.WriteConcern=S.ReadPreference=S.ReadConcern=S.TopologyType=S.ServerType=S.ReadPreferenceMode=S.ReadConcernLevel=S.ProfilingLevel=S.ReturnDocument=S.SeverityLevel=S.MongoLoggableComponent=S.ServerApiVersion=S.ExplainVerbosity=S.MongoErrorLabel=S.CursorTimeoutMode=S.CURSOR_FLAGS=S.Compressor=S.AuthMechanism=S.GSSAPICanonicalizationValue=S.AutoEncryptionLoggerLevel=S.BatchType=S.UnorderedBulkOperation=S.OrderedBulkOperation=S.MongoClient=S.ListIndexesCursor=S.ListCollectionsCursor=S.GridFSBucketWriteStream=S.GridFSBucketReadStream=S.GridFSBucket=S.FindCursor=S.Db=S.Collection=S.ClientSession=S.ChangeStream=S.CancellationToken=S.AggregationCursor=S.Admin=S.AbstractCursor=S.MongoWriteConcernError=S.MongoUnexpectedServerResponseError=S.MongoTransactionError=S.MongoTopologyClosedError=S.MongoTailableCursorError=S.MongoSystemError=S.MongoStalePrimaryError=S.MongoServerSelectionError=S.MongoServerError=S.MongoServerClosedError=void 0;S.MongoClientAuthProviders=S.MongoCryptKMSRequestNetworkTimeoutError=S.MongoCryptInvalidArgumentError=S.MongoCryptError=S.MongoCryptCreateEncryptedCollectionError=S.MongoCryptCreateDataKeyError=S.MongoCryptAzureKMSRequestError=S.SrvPollingEvent=S.WaitingForSuitableServerEvent=S.ServerSelectionSucceededEvent=S.ServerSelectionStartedEvent=S.ServerSelectionFailedEvent=S.ServerSelectionEvent=S.TopologyOpeningEvent=S.TopologyDescriptionChangedEvent=S.TopologyClosedEvent=S.ServerOpeningEvent=S.ServerHeartbeatSucceededEvent=S.ServerHeartbeatStartedEvent=S.ServerHeartbeatFailedEvent=S.ServerDescriptionChangedEvent=S.ServerClosedEvent=S.ConnectionReadyEvent=S.ConnectionPoolReadyEvent=S.ConnectionPoolMonitoringEvent=S.ConnectionPoolCreatedEvent=S.ConnectionPoolClosedEvent=S.ConnectionPoolClearedEvent=S.ConnectionCreatedEvent=S.ConnectionClosedEvent=S.ConnectionCheckOutStartedEvent=S.ConnectionCheckOutFailedEvent=S.ConnectionCheckedOutEvent=S.ConnectionCheckedInEvent=S.CommandSucceededEvent=void 0;var zX1=zY();Object.defineProperty(S,"Admin",{enumerable:!0,get:function(){return zX1.Admin}});var QX1=QY();Object.defineProperty(S,"OrderedBulkOperation",{enumerable:!0,get:function(){return QX1.OrderedBulkOperation}});var KX1=KY();Object.defineProperty(S,"UnorderedBulkOperation",{enumerable:!0,get:function(){return KX1.UnorderedBulkOperation}});var UX1=N7();Object.defineProperty(S,"ChangeStream",{enumerable:!0,get:function(){return UX1.ChangeStream}});var VX1=I7();Object.defineProperty(S,"Collection",{enumerable:!0,get:function(){return VX1.Collection}});var LX1=q2();Object.defineProperty(S,"AbstractCursor",{enumerable:!0,get:function(){return LX1.AbstractCursor}});var wX1=w5();Object.defineProperty(S,"AggregationCursor",{enumerable:!0,get:function(){return wX1.AggregationCursor}});var RX1=nY();Object.defineProperty(S,"FindCursor",{enumerable:!0,get:function(){return RX1.FindCursor}});var IX1=z$();Object.defineProperty(S,"ListCollectionsCursor",{enumerable:!0,get:function(){return IX1.ListCollectionsCursor}});var PX1=F$();Object.defineProperty(S,"ListIndexesCursor",{enumerable:!0,get:function(){return PX1.ListIndexesCursor}});var NX1=UB();Object.defineProperty(S,"Db",{enumerable:!0,get:function(){return NX1.Db}});var MX1=SO();Object.defineProperty(S,"GridFSBucket",{enumerable:!0,get:function(){return MX1.GridFSBucket}});var jX1=cE();Object.defineProperty(S,"GridFSBucketReadStream",{enumerable:!0,get:function(){return jX1.GridFSBucketReadStream}});var TX1=pE();Object.defineProperty(S,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return TX1.GridFSBucketWriteStream}});var kX1=E9();Object.defineProperty(S,"MongoClient",{enumerable:!0,get:function(){return kX1.MongoClient}});var uX1=X6();Object.defineProperty(S,"CancellationToken",{enumerable:!0,get:function(){return uX1.CancellationToken}});var OX1=V5();Object.defineProperty(S,"ClientSession",{enumerable:!0,get:function(){return OX1.ClientSession}});var SX1=$1();Object.defineProperty(S,"BSON",{enumerable:!0,get:function(){return SX1.BSON}});var S2=$1();Object.defineProperty(S,"Binary",{enumerable:!0,get:function(){return S2.Binary}});Object.defineProperty(S,"BSONRegExp",{enumerable:!0,get:function(){return S2.BSONRegExp}});Object.defineProperty(S,"BSONSymbol",{enumerable:!0,get:function(){return S2.BSONSymbol}});Object.defineProperty(S,"BSONType",{enumerable:!0,get:function(){return S2.BSONType}});Object.defineProperty(S,"Code",{enumerable:!0,get:function(){return S2.Code}});Object.defineProperty(S,"DBRef",{enumerable:!0,get:function(){return S2.DBRef}});Object.defineProperty(S,"Decimal128",{enumerable:!0,get:function(){return S2.Decimal128}});Object.defineProperty(S,"Double",{enumerable:!0,get:function(){return S2.Double}});Object.defineProperty(S,"Int32",{enumerable:!0,get:function(){return S2.Int32}});Object.defineProperty(S,"Long",{enumerable:!0,get:function(){return S2.Long}});Object.defineProperty(S,"MaxKey",{enumerable:!0,get:function(){return S2.MaxKey}});Object.defineProperty(S,"MinKey",{enumerable:!0,get:function(){return S2.MinKey}});Object.defineProperty(S,"ObjectId",{enumerable:!0,get:function(){return S2.ObjectId}});Object.defineProperty(S,"Timestamp",{enumerable:!0,get:function(){return S2.Timestamp}});Object.defineProperty(S,"UUID",{enumerable:!0,get:function(){return S2.UUID}});var xX1=Q7();Object.defineProperty(S,"MongoBulkWriteError",{enumerable:!0,get:function(){return xX1.MongoBulkWriteError}});var _X1=mB();Object.defineProperty(S,"ClientEncryption",{enumerable:!0,get:function(){return _X1.ClientEncryption}});var fX1=C$();Object.defineProperty(S,"ChangeStreamCursor",{enumerable:!0,get:function(){return fX1.ChangeStreamCursor}});var gX1=WB();Object.defineProperty(S,"ExplainableCursor",{enumerable:!0,get:function(){return gX1.ExplainableCursor}});var L1=l();Object.defineProperty(S,"MongoAPIError",{enumerable:!0,get:function(){return L1.MongoAPIError}});Object.defineProperty(S,"MongoAWSError",{enumerable:!0,get:function(){return L1.MongoAWSError}});Object.defineProperty(S,"MongoAzureError",{enumerable:!0,get:function(){return L1.MongoAzureError}});Object.defineProperty(S,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return L1.MongoBatchReExecutionError}});Object.defineProperty(S,"MongoChangeStreamError",{enumerable:!0,get:function(){return L1.MongoChangeStreamError}});Object.defineProperty(S,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return L1.MongoClientBulkWriteCursorError}});Object.defineProperty(S,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return L1.MongoClientBulkWriteError}});Object.defineProperty(S,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return L1.MongoClientBulkWriteExecutionError}});Object.defineProperty(S,"MongoClientClosedError",{enumerable:!0,get:function(){return L1.MongoClientClosedError}});Object.defineProperty(S,"MongoCompatibilityError",{enumerable:!0,get:function(){return L1.MongoCompatibilityError}});Object.defineProperty(S,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return L1.MongoCursorExhaustedError}});Object.defineProperty(S,"MongoCursorInUseError",{enumerable:!0,get:function(){return L1.MongoCursorInUseError}});Object.defineProperty(S,"MongoDecompressionError",{enumerable:!0,get:function(){return L1.MongoDecompressionError}});Object.defineProperty(S,"MongoDriverError",{enumerable:!0,get:function(){return L1.MongoDriverError}});Object.defineProperty(S,"MongoError",{enumerable:!0,get:function(){return L1.MongoError}});Object.defineProperty(S,"MongoExpiredSessionError",{enumerable:!0,get:function(){return L1.MongoExpiredSessionError}});Object.defineProperty(S,"MongoGCPError",{enumerable:!0,get:function(){return L1.MongoGCPError}});Object.defineProperty(S,"MongoGridFSChunkError",{enumerable:!0,get:function(){return L1.MongoGridFSChunkError}});Object.defineProperty(S,"MongoGridFSStreamError",{enumerable:!0,get:function(){return L1.MongoGridFSStreamError}});Object.defineProperty(S,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return L1.MongoInvalidArgumentError}});Object.defineProperty(S,"MongoKerberosError",{enumerable:!0,get:function(){return L1.MongoKerberosError}});Object.defineProperty(S,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return L1.MongoMissingCredentialsError}});Object.defineProperty(S,"MongoMissingDependencyError",{enumerable:!0,get:function(){return L1.MongoMissingDependencyError}});Object.defineProperty(S,"MongoNetworkError",{enumerable:!0,get:function(){return L1.MongoNetworkError}});Object.defineProperty(S,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return L1.MongoNetworkTimeoutError}});Object.defineProperty(S,"MongoNotConnectedError",{enumerable:!0,get:function(){return L1.MongoNotConnectedError}});Object.defineProperty(S,"MongoOIDCError",{enumerable:!0,get:function(){return L1.MongoOIDCError}});Object.defineProperty(S,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return L1.MongoOperationTimeoutError}});Object.defineProperty(S,"MongoParseError",{enumerable:!0,get:function(){return L1.MongoParseError}});Object.defineProperty(S,"MongoRuntimeError",{enumerable:!0,get:function(){return L1.MongoRuntimeError}});Object.defineProperty(S,"MongoServerClosedError",{enumerable:!0,get:function(){return L1.MongoServerClosedError}});Object.defineProperty(S,"MongoServerError",{enumerable:!0,get:function(){return L1.MongoServerError}});Object.defineProperty(S,"MongoServerSelectionError",{enumerable:!0,get:function(){return L1.MongoServerSelectionError}});Object.defineProperty(S,"MongoStalePrimaryError",{enumerable:!0,get:function(){return L1.MongoStalePrimaryError}});Object.defineProperty(S,"MongoSystemError",{enumerable:!0,get:function(){return L1.MongoSystemError}});Object.defineProperty(S,"MongoTailableCursorError",{enumerable:!0,get:function(){return L1.MongoTailableCursorError}});Object.defineProperty(S,"MongoTopologyClosedError",{enumerable:!0,get:function(){return L1.MongoTopologyClosedError}});Object.defineProperty(S,"MongoTransactionError",{enumerable:!0,get:function(){return L1.MongoTransactionError}});Object.defineProperty(S,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return L1.MongoUnexpectedServerResponseError}});Object.defineProperty(S,"MongoWriteConcernError",{enumerable:!0,get:function(){return L1.MongoWriteConcernError}});var bX1=Q7();Object.defineProperty(S,"BatchType",{enumerable:!0,get:function(){return bX1.BatchType}});var yX1=wG();Object.defineProperty(S,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return yX1.AutoEncryptionLoggerLevel}});var hX1=RB();Object.defineProperty(S,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return hX1.GSSAPICanonicalizationValue}});var vX1=X3();Object.defineProperty(S,"AuthMechanism",{enumerable:!0,get:function(){return vX1.AuthMechanism}});var mX1=c5();Object.defineProperty(S,"Compressor",{enumerable:!0,get:function(){return mX1.Compressor}});var xO=q2();Object.defineProperty(S,"CURSOR_FLAGS",{enumerable:!0,get:function(){return xO.CURSOR_FLAGS}});Object.defineProperty(S,"CursorTimeoutMode",{enumerable:!0,get:function(){return xO.CursorTimeoutMode}});var dX1=l();Object.defineProperty(S,"MongoErrorLabel",{enumerable:!0,get:function(){return dX1.MongoErrorLabel}});var cX1=Y5();Object.defineProperty(S,"ExplainVerbosity",{enumerable:!0,get:function(){return cX1.ExplainVerbosity}});var lX1=E9();Object.defineProperty(S,"ServerApiVersion",{enumerable:!0,get:function(){return lX1.ServerApiVersion}});var _O=Y4();Object.defineProperty(S,"MongoLoggableComponent",{enumerable:!0,get:function(){return _O.MongoLoggableComponent}});Object.defineProperty(S,"SeverityLevel",{enumerable:!0,get:function(){return _O.SeverityLevel}});var pX1=D$();Object.defineProperty(S,"ReturnDocument",{enumerable:!0,get:function(){return pX1.ReturnDocument}});var iX1=U$();Object.defineProperty(S,"ProfilingLevel",{enumerable:!0,get:function(){return iX1.ProfilingLevel}});var nX1=_6();Object.defineProperty(S,"ReadConcernLevel",{enumerable:!0,get:function(){return nX1.ReadConcernLevel}});var aX1=f0();Object.defineProperty(S,"ReadPreferenceMode",{enumerable:!0,get:function(){return aX1.ReadPreferenceMode}});var fO=F6();Object.defineProperty(S,"ServerType",{enumerable:!0,get:function(){return fO.ServerType}});Object.defineProperty(S,"TopologyType",{enumerable:!0,get:function(){return fO.TopologyType}});var sX1=_6();Object.defineProperty(S,"ReadConcern",{enumerable:!0,get:function(){return sX1.ReadConcern}});var rX1=f0();Object.defineProperty(S,"ReadPreference",{enumerable:!0,get:function(){return rX1.ReadPreference}});var tX1=P2();Object.defineProperty(S,"WriteConcern",{enumerable:!0,get:function(){return tX1.WriteConcern}});var nE=jG();Object.defineProperty(S,"CommandFailedEvent",{enumerable:!0,get:function(){return nE.CommandFailedEvent}});Object.defineProperty(S,"CommandStartedEvent",{enumerable:!0,get:function(){return nE.CommandStartedEvent}});Object.defineProperty(S,"CommandSucceededEvent",{enumerable:!0,get:function(){return nE.CommandSucceededEvent}});var P6=hG();Object.defineProperty(S,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return P6.ConnectionCheckedInEvent}});Object.defineProperty(S,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return P6.ConnectionCheckedOutEvent}});Object.defineProperty(S,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return P6.ConnectionCheckOutFailedEvent}});Object.defineProperty(S,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return P6.ConnectionCheckOutStartedEvent}});Object.defineProperty(S,"ConnectionClosedEvent",{enumerable:!0,get:function(){return P6.ConnectionClosedEvent}});Object.defineProperty(S,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return P6.ConnectionCreatedEvent}});Object.defineProperty(S,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return P6.ConnectionPoolClearedEvent}});Object.defineProperty(S,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return P6.ConnectionPoolClosedEvent}});Object.defineProperty(S,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return P6.ConnectionPoolCreatedEvent}});Object.defineProperty(S,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return P6.ConnectionPoolMonitoringEvent}});Object.defineProperty(S,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return P6.ConnectionPoolReadyEvent}});Object.defineProperty(S,"ConnectionReadyEvent",{enumerable:!0,get:function(){return P6.ConnectionReadyEvent}});var g3=oB();Object.defineProperty(S,"ServerClosedEvent",{enumerable:!0,get:function(){return g3.ServerClosedEvent}});Object.defineProperty(S,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return g3.ServerDescriptionChangedEvent}});Object.defineProperty(S,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return g3.ServerHeartbeatFailedEvent}});Object.defineProperty(S,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return g3.ServerHeartbeatStartedEvent}});Object.defineProperty(S,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return g3.ServerHeartbeatSucceededEvent}});Object.defineProperty(S,"ServerOpeningEvent",{enumerable:!0,get:function(){return g3.ServerOpeningEvent}});Object.defineProperty(S,"TopologyClosedEvent",{enumerable:!0,get:function(){return g3.TopologyClosedEvent}});Object.defineProperty(S,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return g3.TopologyDescriptionChangedEvent}});Object.defineProperty(S,"TopologyOpeningEvent",{enumerable:!0,get:function(){return g3.TopologyOpeningEvent}});var QF=SE();Object.defineProperty(S,"ServerSelectionEvent",{enumerable:!0,get:function(){return QF.ServerSelectionEvent}});Object.defineProperty(S,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return QF.ServerSelectionFailedEvent}});Object.defineProperty(S,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return QF.ServerSelectionStartedEvent}});Object.defineProperty(S,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return QF.ServerSelectionSucceededEvent}});Object.defineProperty(S,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return QF.WaitingForSuitableServerEvent}});var oX1=gE();Object.defineProperty(S,"SrvPollingEvent",{enumerable:!0,get:function(){return oX1.SrvPollingEvent}});var F8=h7();Object.defineProperty(S,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return F8.MongoCryptAzureKMSRequestError}});Object.defineProperty(S,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return F8.MongoCryptCreateDataKeyError}});Object.defineProperty(S,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return F8.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(S,"MongoCryptError",{enumerable:!0,get:function(){return F8.MongoCryptError}});Object.defineProperty(S,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return F8.MongoCryptInvalidArgumentError}});Object.defineProperty(S,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return F8.MongoCryptKMSRequestNetworkTimeoutError}});var eX1=RE();Object.defineProperty(S,"MongoClientAuthProviders",{enumerable:!0,get:function(){return eX1.MongoClientAuthProviders}})});var t=z((DZ1)=>{DZ1.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");DZ1.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");DZ1.arrayParentSymbol=Symbol("mongoose#Array#_parent");DZ1.arrayPathSymbol=Symbol("mongoose#Array#_path");DZ1.arraySchemaSymbol=Symbol("mongoose#Array#_schema");DZ1.documentArrayParent=Symbol("mongoose#documentArrayParent");DZ1.documentIsSelected=Symbol("mongoose#Document#isSelected");DZ1.documentIsModified=Symbol("mongoose#Document#isModified");DZ1.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");DZ1.documentSchemaSymbol=Symbol("mongoose#Document#schema");DZ1.getSymbol=Symbol("mongoose#Document#get");DZ1.modelSymbol=Symbol("mongoose#Model");DZ1.objectIdSymbol=Symbol("mongoose#ObjectId");DZ1.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");DZ1.schemaTypeSymbol=Symbol("mongoose#schemaType");DZ1.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");DZ1.scopeSymbol=Symbol("mongoose#Document#scope");DZ1.validatorErrorSymbol=Symbol("mongoose#validatorError")});var k4=z((pM1,gO)=>{var KF=$1().ObjectId,RZ1=t().objectIdSymbol;Object.defineProperty(KF.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});/*!
 * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
 */if(!Object.hasOwn(KF.prototype,"valueOf"))KF.prototype.valueOf=function F(){return this.toString()};KF.prototype[RZ1]=!0;gO.exports=KF});var x2=z((iM1,bO)=>{bO.exports=function F(A){if(A==null)return;if(typeof A.constructor!=="function")return;return A.constructor.name}});var n6=z((IZ1)=>{/*!
 * ignore
 */IZ1.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var VD=z((aM1,yO)=>{yO.exports=$1().Decimal128});var R9=z((sM1,hO)=>{hO.exports=new Set(["__proto__","constructor","prototype"])});var LD=z((NZ1)=>{NZ1.isMongooseArray=function(F){return Array.isArray(F)&&F.isMongooseArray}});var UF=z((tM1,vO)=>{var jZ1=LD().isMongooseArray;vO.exports=function(F){return F!=null&&(jZ1(F)||F.$__!=null||F.isMongooseBuffer||F.$isMongooseMap)}});var aE=z((oM1,mO)=>{var TZ1=/^function\s*([^\s(]+)/;mO.exports=function(F){return F.name||(F.toString().trim().match(TZ1)||[])[1]}});var D2=z((eM1,dO)=>{function kZ1(F,A){return F!=null&&F._bsontype===A}dO.exports=kZ1});var I9=z((Fj1,cO)=>{cO.exports=function(F){return Buffer.isBuffer(F)||Object.prototype.toString.call(F)==="[object Object]"}});var A8=z((Aj1,lO)=>{lO.exports=function F(A){if(A==null||typeof A!=="object")return!1;let B=Object.getPrototypeOf(A);return!B||B.constructor.name==="Object"}});var B8=z((uZ1)=>{var pO=Symbol("mongoose#trustedSymbol");uZ1.trustedSymbol=pO;uZ1.trusted=function F(A){if(A==null||typeof A!=="object")return A;return A[pO]=!0,A}});var C0=z((Dj1,iO)=>{var xZ1=VD(),_Z1=k4(),fZ1=R9(),gZ1=UF(),bZ1=aE(),sE=D2(),yZ1=LD().isMongooseArray,hZ1=I9(),vZ1=A8(),mZ1=t(),rE=B8().trustedSymbol,dZ1=$1();function oE(F,A,B){if(F==null)return F;if(sE(F,"Double"))return new dZ1.Double(F.value);if(typeof F==="number"||typeof F==="string"||typeof F==="boolean"||typeof F==="bigint")return F;if(Array.isArray(F))return cZ1(F,A);if(gZ1(F)){if(A){if(A.retainDocuments&&F.$__!=null){let Z=F.$clone();if(F.__index!=null)Z.__index=F.__index;if(F.__parentArray!=null)Z.__parentArray=F.__parentArray;return Z.$__setParent(A.parentDoc??F.$__parent),Z}}if(vZ1(F)&&F.$__!=null&&F._doc!=null)return F._doc;let X;if(A?.json&&typeof F.toJSON==="function")X=F.toJSON(A);else X=F.toObject(A);return X}let D=F.constructor;if(D)switch(bZ1(D)){case"Object":return tE(F,A,B);case"Date":return new D(+F);case"RegExp":return lZ1(F);default:break}if(sE(F,"ObjectId")){if(A?.flattenObjectIds)return F.toJSON();return new _Z1(F.id)}if(sE(F,"Decimal128")){if(A?.flattenDecimals)return F.toJSON();return xZ1.fromString(F.toString())}if(!D&&hZ1(F))return tE(F,A,B);if(typeof F==="object"&&F[mZ1.schemaTypeSymbol])return F.clone();if(A?.bson&&typeof F.toBSON==="function")return F;if(typeof F.valueOf==="function")return F.valueOf();return tE(F,A,B)}iO.exports=oE;/*!
 * ignore
 */function tE(F,A,B){let D=A?.minimize,X=A?.omitUndefined,Z=A?._seen,J={},Y;if(Z&&Z.has(F))return Z.get(F);else if(Z)Z.set(F,J);if(rE in F&&A?.copyTrustedSymbol!==!1)J[rE]=F[rE];let $=Object.keys(F),G=$.length;for(let E=0;E<G;++E){let C=$[E];if(fZ1.has(C))continue;let W=oE(F[C],A,!1);if((D===!1||X)&&typeof W==="undefined")delete J[C];else if(D!==!0||typeof W!=="undefined")Y||(Y=!0),J[C]=W}return D&&!B?Y&&J:J}function cZ1(F,A){let B=0,D=F.length,X=null;if(A?.retainDocuments)if(F.isMongooseDocumentArray)X=new(F.$schemaType()).schema.base.Types.DocumentArray([],F.$path(),F.$parent(),F.$schemaType());else if(F.isMongooseArray)X=new(F.$parent()).schema.base.Types.Array([],F.$path(),F.$parent(),F.$schemaType());else X=new Array(D);else X=new Array(D);F=yZ1(F)?F.__array:F;for(B=0;B<D;++B)X[B]=oE(F[B],A,!0);return X}function lZ1(F){let A=new RegExp(F.source,F.flags);if(A.lastIndex!==F.lastIndex)A.lastIndex=F.lastIndex;return A}});var sO=z((Xj1,aO)=>{/*!
 * Module dependencies.
 */var wD=YY(),eE=K1(),FC=G4().Collection,pZ1=k4(),nO=x2(),iZ1=n6().internalToObjectOptions,nZ1=m("stream"),AC=m("util"),aZ1=Object.freeze({...iZ1,copyTrustedSymbol:!1});function a6(F,A,B){this.collection=null,this.Promise=B.Promise||Promise,this.modelName=B.modelName,delete B.modelName,this._closed=!1,wD.apply(this,arguments)}/*!
 * Inherit from abstract Collection.
 */Object.setPrototypeOf(a6.prototype,wD.prototype);a6.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),wD.prototype.onOpen.call(this),this.collection};a6.prototype.onClose=function(F){wD.prototype.onClose.call(this,F)};a6.prototype._getCollection=function F(){if(this.collection)return this.collection;if(this.conn.db!=null)return this.collection=this.conn.db.collection(this.name),this.collection;return null};function sZ1(F){a6.prototype[F]=function(){let A=this._getCollection(),B=Array.from(arguments),D=this,X=D?.conn?.base?.options?.debug,Z=D?.conn?.options?.debug,J=Z==null?X:Z,Y=new pZ1;if(this.conn.$wasForceClosed){let E=new eE("Connection was force closed");if(B.length>0&&typeof B[B.length-1]==="function"){B[B.length-1](E);return}else throw E}let $=null,G=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:Y,modelName:D.modelName,collectionName:D.name,method:F,args:B});let E=this._getBufferTimeoutMS();return G=new Promise((C,W)=>{this.addQueue(C),$=setTimeout(()=>{if(this.removeQueue(C)){let q="Operation `"+this.name+"."+F+"()` buffering timed out after "+E+"ms",Q=new eE(q);this.conn.emit("buffer-end",{_id:Y,modelName:D.modelName,collectionName:D.name,method:F,error:Q}),W(Q)}},E)}),G.then(()=>{if($)clearTimeout($);return this[F].apply(this,B)})}if(J)if(typeof J==="function"){let E=null;if(typeof B[B.length-1]=="function")E=B.slice(0,B.length-1);else E=B;J.apply(D,[D.name,F].concat(E))}else if(J instanceof nZ1.Writable)this.$printToStream(D.name,F,B,J);else{let E=J.color==null?!0:J.color,C=J.shell==null?!1:J.shell;this.$print(D.name,F,B,E,C)}this.conn.emit("operation-start",{_id:Y,modelName:D.modelName,collectionName:this.name,method:F,params:B});try{if(A==null){let C="Cannot call `"+this.name+"."+F+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new eE(C)}let E=A[F].apply(A,B);if(typeof E?.then==="function")return E.then((C)=>{if($!=null)clearTimeout($);return this.conn.emit("operation-end",{_id:Y,modelName:D.modelName,collectionName:this.name,method:F,result:C}),C},(C)=>{if($!=null)clearTimeout($);throw this.conn.emit("operation-end",{_id:Y,modelName:D.modelName,collectionName:this.name,method:F,error:C}),C});if(this.conn.emit("operation-end",{_id:Y,modelName:D.modelName,collectionName:this.name,method:F,result:E}),$!=null)clearTimeout($);return E}catch(E){if($!=null)clearTimeout($);throw this.conn.emit("operation-end",{_id:Y,modelName:D.modelName,collectionName:this.name,method:F,error:E}),E}}}for(let F of Object.getOwnPropertyNames(FC.prototype)){if(Object.getOwnPropertyDescriptor(FC.prototype,F).get!==void 0)continue;if(typeof FC.prototype[F]!=="function")continue;sZ1(F)}a6.prototype.$print=function(F,A,B,D,X){let Z=D?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",J=[F,A].join("."),Y=[];for(let G=B.length-1;G>=0;--G)if(this.$format(B[G])||Y.length)Y.unshift(this.$format(B[G],D,X));let $="("+Y.join(", ")+")";console.info(Z+J+$)};a6.prototype.$printToStream=function(F,A,B,D){let X=[F,A].join("."),Z=[];for(let Y=B.length-1;Y>=0;--Y)if(this.$format(B[Y])||Z.length)Z.unshift(this.$format(B[Y]));let J="("+Z.join(", ")+")";D.write(X+J,"utf8")};a6.prototype.$format=function(F,A,B){let D=typeof F;if(D==="function"||D==="undefined")return"";return BC(F,!1,A,B)};function D8(F){let A={inspect:function(){return F}};if(AC.inspect.custom)A[AC.inspect.custom]=A.inspect;return A}function rZ1(F){return BC(F,!0)}function tZ1(F,A){F[A]=D8('ObjectId("'+F[A].toHexString()+'")')}function oZ1(F,A,B){if(B)F[A]=D8('ISODate("'+F[A].toUTCString()+'")');else F[A]=D8('new Date("'+F[A].toUTCString()+'")')}function BC(F,A,B,D){if(typeof F?.toBSON==="function")F=F.toBSON();if(F==null)return F;let X=C0(),Z=A?F:X(F,aZ1),J=nO(Z);if(J==="Binary")Z="BinData("+Z.sub_type+', "'+Z.toString("base64")+'")';else if(J==="ObjectId")Z=D8('ObjectId("'+Z.toHexString()+'")');else if(J==="Date")Z=D8('new Date("'+Z.toUTCString()+'")');else if(J==="Object"){let Y=Object.keys(Z),$=Y.length,G;for(let E=0;E<$;++E)if(G=Y[E],Z[G]){let C;if(typeof Z[G].toBSON==="function")try{Z[G]=Z[G].toBSON()}catch(H){C=H}let W=nO(Z[G]);if(W==="Binary")Z[G]="BinData("+Z[G].sub_type+', "'+Z[G].buffer.toString("base64")+'")';else if(W==="Object")Z[G]=BC(Z[G],!0);else if(W==="ObjectId")tZ1(Z,G);else if(W==="Date")oZ1(Z,G,D);else if(W==="ClientSession")Z[G]=D8('ClientSession("'+(Z[G]?.id?.id?.buffer||"").toString("hex")+'")');else if(Array.isArray(Z[G]))Z[G]=Z[G].map(rZ1);else if(C!=null)throw C}}if(A)return Z;return AC.inspect(Z,!1,10,B).replace(/\n/g,"").replace(/\s{2,}/g," ")}a6.prototype.getIndexes=a6.prototype.indexInformation;/*!
 * Module exports.
 */aO.exports=a6});var DC=z((Zj1,oO)=>{/*!
 * Module dependencies.
 */var eZ1=m("events").EventEmitter,VF=K1();/*!
 * ignore
 */var rO=["close","change","end","error","resumeTokenChanged"];/*!
 * ignore
 */class tO extends eZ1{constructor(F,A,B){super();if(this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=A,this.options=B,this.errored=!1,B?.hydrate&&!B.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let D=null;if(this.$driverChangeStreamPromise=new Promise((X,Z)=>{try{F((J,Y)=>{if(J!=null)return this.errored=!0,this.emit("error",J),Z(J);this.driverChangeStream=Y,this.emit("ready"),X()})}catch(J){D=J,this.errored=!0,this.emit("error",J),Z(J)}}),D!=null)throw D}_bindEvents(){if(this.bindedEvents)return;if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),rO.forEach((F)=>{this.driverChangeStream.on(F,(A)=>{if(A?.fullDocument!=null&&this.options?.hydrate)A.fullDocument=this.options.model.hydrate(A.fullDocument);this.emit(F,A)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),rO.forEach((F)=>{this.driverChangeStream.on(F,(A)=>{if(A?.fullDocument!=null&&this.options?.hydrate)A.fullDocument=this.options.model.hydrate(A.fullDocument);this.emit(F,A)})})}hasNext(F){if(this.errored)throw new VF("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(F)}next(F){if(this.errored)throw new VF("Cannot call next() on errored ChangeStream");if(this.options?.hydrate){if(F!=null){let B=F;F=(D,X)=>{if(D!=null)return B(D);if(X.fullDocument!=null)X.fullDocument=this.options.model.hydrate(X.fullDocument);return B(null,X)}}let A=this.driverChangeStream.next(F);if(typeof A?.then==="function")A=A.then((B)=>{if(B.fullDocument!=null)B.fullDocument=this.options.model.hydrate(B.fullDocument);return B});return A}return this.driverChangeStream.next(F)}addListener(F,A){if(this.errored)throw new VF("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(F,A)}on(F,A){if(this.errored)throw new VF("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(F,A)}once(F,A){if(this.errored)throw new VF("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(F,A)}_queue(F){this.once("ready",()=>F())}close(){if(this.closed=!0,this.driverChangeStream)return this.driverChangeStream.close();else return this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}}/*!
 * ignore
 */oO.exports=tO});var P9=z((Jj1,FS)=>{function j1(){this._pres=new Map,this._posts=new Map}j1.skipWrappedFunction=function F(){if(!(this instanceof j1.skipWrappedFunction))return new j1.skipWrappedFunction(...arguments);this.args=[...arguments]};j1.overwriteResult=function F(){if(!(this instanceof j1.overwriteResult))return new j1.overwriteResult(...arguments);this.args=[...arguments]};j1.overwriteArguments=function F(){if(!(this instanceof j1.overwriteArguments))return new j1.overwriteArguments(...arguments);this.args=[...arguments]};j1.prototype.execPre=async function F(A,B,D){let X=this._pres.get(A)||[],Z=X.length,J=D,Y=null;if(!Z)return J;for(let $ of X){let G=[],E=[null].concat(J);for(let C=1;C<E.length;++C){if(C===E.length-1&&typeof E[C]==="function")continue;G.push(E[C])}try{let C=$.fn.apply(B,G);if(XC(C)){let W=await C;if(W instanceof j1.overwriteArguments)J=W.args}else if(C instanceof j1.overwriteArguments)J=C.args}catch(C){if(C instanceof j1.skipWrappedFunction){Y=C;continue}if(C instanceof j1.overwriteArguments){J=C.args;continue}throw C}}if(Y)throw Y;return J};j1.prototype.execPreSync=function(F,A,B){let D=this._pres.get(F)||[],X=D.length,Z=B||[];for(let J=0;J<X;++J){let Y=D[J].fn.apply(A,Z);if(Y instanceof j1.overwriteArguments)Z=Y.args}return Z};j1.prototype.execPost=async function F(A,B,D,X){let Z=this._posts.get(A)||[],J=Z.length,Y=null;if(X&&X.error)Y=X.error;if(!J){if(Y!=null)throw Y;return D}for(let $ of Z){let G=$.fn,E=0,C=[],W=D.length;for(let K=0;K<W;++K)if(!D[K]||!D[K]._kareemIgnore)E+=1,C.push(D[K]);if(X?.numCallbackParams!=null){E=X.numCallbackParams;for(let K=C.length;K<E;++K)C.push(null)}let H,q,Q=new Promise((K,U)=>{H=K,q=U});if(C.push(function K(U){if(U)q(U);else H()}),Y)if(eO($,E))try{let K=G.apply(B,[Y].concat(C));if(XC(K))await K;else if(G.length===E+2)await Q}catch(K){if(K instanceof j1.overwriteResult){D=K.args;continue}Y=K}else continue;else if(eO($,E))continue;else{let K=null;try{if(K=G.apply(B,C),XC(K))K=await K;else if(G.length===E+1)K=await Q}catch(U){if(U instanceof j1.overwriteResult){D=U.args;continue}Y=U;continue}if(K instanceof j1.overwriteResult){D=K.args;continue}}}if(Y!=null)throw Y;return D};j1.prototype.execPostSync=function(F,A,B){let D=this._posts.get(F)||[],X=D.length;for(let Z=0;Z<X;++Z){let J=D[Z].fn.apply(A,B||[]);if(J instanceof j1.overwriteResult)B=J.args}return B};j1.prototype.createWrapperSync=function(F,A){let B=this;return function D(){let X=B.execPreSync(F,this,Array.from(arguments)),Z=A.apply(this,X);return B.execPostSync(F,this,[Z])[0]}};j1.prototype.wrap=async function F(A,B,D,X,Z){let J,Y=!1,$=X;try{$=await this.execPre(A,D,X)}catch(G){if(G instanceof j1.skipWrappedFunction)J=G.args,Y=!0;else await this.execPost(A,D,X,{...Z,error:G})}if(!Y)J=await B.apply(D,$);return J=await this.execPost(A,D,[J],Z),J[0]};j1.prototype.filter=function(F){let A=this.clone(),B=Array.from(A._pres.keys());for(let X of B){let Z=this._pres.get(X).map((J)=>Object.assign({},J,{name:X})).filter(F);if(Z.length===0){A._pres.delete(X);continue}A._pres.set(X,Z)}let D=Array.from(A._posts.keys());for(let X of D){let Z=this._posts.get(X).map((J)=>Object.assign({},J,{name:X})).filter(F);if(Z.length===0){A._posts.delete(X);continue}A._posts.set(X,Z)}return A};j1.prototype.hasHooks=function(F){return this._pres.has(F)||this._posts.has(F)};j1.prototype.createWrapper=function(F,A,B,D){let X=this;if(!this.hasHooks(F))return A;return function Z(){let J=B||this;return X.wrap(F,A,J,Array.from(arguments),D)}};j1.prototype.pre=function(F,A,B,D,X){if(typeof A==="function")B=A,A={};else if(A==null)A={};let Z=this._pres.get(F)||[];if(this._pres.set(F,Z),typeof B!=="function")throw new Error('pre() requires a function, got "'+typeof B+'"');if(X)Z.unshift(Object.assign({},A,{fn:B}));else Z.push(Object.assign({},A,{fn:B}));return this};j1.prototype.post=function(F,A,B,D){let X=this._posts.get(F)||[];if(typeof A==="function")D=!!B,B=A,A={};if(typeof B!=="function")throw new Error('post() requires a function, got "'+typeof B+'"');if(D)X.unshift(Object.assign({},A,{fn:B}));else X.push(Object.assign({},A,{fn:B}));return this._posts.set(F,X),this};j1.prototype.postError=function F(A,B,D,X){if(typeof B==="function")X=!!D,D=B,B={};return this.post(A,{...B,errorHandler:!0},D,X)};j1.prototype.clone=function(){let F=new j1;for(let A of this._pres.keys()){let B=this._pres.get(A).slice();F._pres.set(A,B)}for(let A of this._posts.keys())F._posts.set(A,this._posts.get(A).slice());return F};j1.prototype.merge=function(F,A){A=arguments.length===1?!0:A;let B=A?this.clone():this;for(let D of F._pres.keys()){let X=B._pres.get(D)||[],Z=F._pres.get(D).filter((Y)=>X.map(($)=>$.fn).indexOf(Y.fn)===-1),J=X.concat(Z);B._pres.set(D,J)}for(let D of F._posts.keys()){let X=B._posts.get(D)||[],Z=F._posts.get(D).filter((J)=>X.indexOf(J)===-1);B._posts.set(D,X.concat(Z))}return B};function XC(F){return typeof F==="object"&&F!==null&&typeof F.then==="function"}function eO(F,A){if(F.errorHandler)return!0;return F.fn.length===A+2}FS.exports=j1});var DS=z((AS,BS)=>{var K2=BS.exports=AS={};K2.DocumentNotFoundError=null;K2.general={};K2.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";K2.general.required="Path `{PATH}` is required.";K2.Number={};K2.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";K2.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";K2.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";K2.Date={};K2.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";K2.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";K2.String={};K2.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";K2.String.match="Path `{PATH}` is invalid ({VALUE}).";K2.String.minlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).";K2.String.maxlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH})."});var U2=z((Yj1,JS)=>{/*!
 * Module dependencies.
 */var FJ1=K1(),AJ1=m("util");class YC extends FJ1{constructor(F,A,B,D,X){if(arguments.length>0){let Z=XS(A),J=ZS(X),Y=ZC(null,F,A,B,J,Z,D);super(Y);this.init(F,A,B,D,X)}else super(ZC())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(F,A,B,D,X){/*!
   * ignore
   */this.stringValue=JC(A),this.messageFormat=ZS(X),this.kind=F,this.value=A,this.path=B,this.reason=D,this.valueType=XS(A)}copy(F){this.messageFormat=F.messageFormat,this.stringValue=F.stringValue,this.kind=F.kind,this.value=F.value,this.path=F.path,this.reason=F.reason,this.message=F.message,this.valueType=F.valueType}setModel(F){/*!
   * ignore
   */this.message=ZC(F,this.kind,this.value,this.path,this.messageFormat,this.valueType)}}Object.defineProperty(YC.prototype,"name",{value:"CastError"});function JC(F){let A=AJ1.inspect(F);if(A=A.replace(/^'|'$/g,'"'),!A.startsWith('"'))A='"'+A+'"';return A}function XS(F){if(F==null)return""+F;let A=typeof F;if(A!=="object")return A;if(typeof F.constructor!=="function")return A;return F.constructor.name}function ZS(F){let A=F?._castErrorMessage||null;if(typeof A==="string"||typeof A==="function")return A}/*!
 * ignore
 */function ZC(F,A,B,D,X,Z,J){if(typeof X==="string"){let Y=JC(B),$=X.replace("{KIND}",A).replace("{VALUE}",Y).replace("{PATH}",D);if(F!=null)$=$.replace("{MODEL}",F.modelName);return $}else if(typeof X==="function")return X(B,D,F,A);else{let Y=JC(B),$=Z?" (type "+Z+")":"",G="Cast to "+A+" failed for value "+Y+$+' at path "'+D+'"';if(F!=null)G+=' for model "'+F.modelName+'"';if(J!=null&&typeof J.constructor==="function"&&J.constructor.name!=="AssertionError"&&J.constructor.name!=="Error")G+=' because of "'+J.constructor.name+'"';return G}}/*!
 * exports
 */JS.exports=YC});var RD=z(($j1,$S)=>{/*!
 * Module dependencies.
 */var YS=K1(),BJ1=m("util");class $C extends YS{constructor(F,A,B,D){let X,Z=YS.messages;if(Z.DocumentNotFoundError!=null)X=typeof Z.DocumentNotFoundError==="function"?Z.DocumentNotFoundError(F,A):Z.DocumentNotFoundError;else X='No document found for query "'+BJ1.inspect(F)+'" on model "'+A+'"';super(X);this.result=D,this.numAffected=B,this.filter=F,this.query=F}}Object.defineProperty($C.prototype,"name",{value:"DocumentNotFoundError"});/*!
 * exports
 */$S.exports=$C});var GC=z((Gj1,GS)=>{/*!
 * ignore
 */GS.exports=function F(A){let B=Object.keys(A.errors||{}),D=B.length,X=[],Z;for(let J=0;J<D;++J){if(Z=B[J],A===A.errors[Z])continue;X.push(Z+": "+A.errors[Z].message)}return X.join(", ")}});var M9=z((Ej1,WS)=>{/*!
 * Module requirements
 */var DJ1=K1(),XJ1=x2(),ES=m("util"),CS=GC();class N9 extends DJ1{constructor(F){let A;if(XJ1(F)==="model")A=F.constructor.modelName+" validation failed";else A="Validation failed";super(A);if(this.errors={},this._message=A,F)F.$errors=this.errors}toString(){return this.name+": "+CS(this)}addError(F,A){if(A instanceof N9){let{errors:B}=A;for(let D of Object.keys(B))this.addError(`${F}.${D}`,B[D]);return}this.errors[F]=A,this.message=this._message+": "+CS(this)}}if(ES.inspect.custom)N9.prototype[ES.inspect.custom]=N9.prototype.inspect;Object.defineProperty(N9.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(N9.prototype,"name",{value:"ValidationError"});/*!
 * Module exports
 */WS.exports=N9});var EC=z((Cj1,zS)=>{/*!
 * Module dependencies.
 */var HS=K1();class LF extends HS{constructor(F,A){let B=F.message;if(!B)B=HS.messages.general.default;let D=qS(B,F,A);super(D);F=Object.assign({},F,{message:D}),this.properties=F,this.kind=F.type,this.path=F.path,this.value=F.value,this.reason=F.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}}Object.defineProperty(LF.prototype,"name",{value:"ValidatorError"});Object.defineProperty(LF.prototype,"properties",{enumerable:!1,writable:!0,value:null});LF.prototype.formatMessage=qS;function qS(F,A,B){if(typeof F==="function")return F(A,B);let D=Object.keys(A);for(let X of D){if(X==="message")continue;F=F.replace("{"+X.toUpperCase()+"}",A[X])}return F}/*!
 * exports
 */zS.exports=LF});var WC=z((Wj1,QS)=>{/*!
 * Module dependencies.
 */var ZJ1=K1();class CC extends ZJ1{constructor(F,A,B){let D=B.join(", ");super('No matching document found for id "'+F._doc._id+'" version '+A+' modifiedPaths "'+D+'"');this.version=A,this.modifiedPaths=B}}Object.defineProperty(CC.prototype,"name",{value:"VersionError"});/*!
 * exports
 */QS.exports=CC});var qC=z((Hj1,KS)=>{/*!
 * Module dependencies.
 */var JJ1=K1();class HC extends JJ1{constructor(F){super("Can't save() the same doc multiple times in parallel. Document: "+F._doc._id)}}Object.defineProperty(HC.prototype,"name",{value:"ParallelSaveError"});/*!
 * exports
 */KS.exports=HC});var QC=z((qj1,US)=>{/*!
 * Module dependencies.
 */var YJ1=K1();class zC extends YJ1{constructor(F){super("Cannot overwrite `"+F+"` model once compiled.")}}Object.defineProperty(zC.prototype,"name",{value:"OverwriteModelError"});/*!
 * exports
 */US.exports=zC});var LS=z((zj1,VS)=>{/*!
 * Module dependencies.
 */var $J1=K1();class KC extends $J1{constructor(F){let A=`Schema hasn't been registered for model "`+F+`".
Use mongoose.model(name, schema)`;super(A)}}Object.defineProperty(KC.prototype,"name",{value:"MissingSchemaError"});/*!
 * exports
 */VS.exports=KC});var VC=z((Qj1,wS)=>{/*!
 * Module dependencies.
 */var GJ1=K1();class UC extends GJ1{constructor(F,A,B){let D=B?.matchedCount??0,X=B?.insertedCount??0,Z=A.map((Y)=>Y._id).join(", ");if(Z.length>100)Z=Z.slice(0,100)+"...";let J=A.length-D-X;super(`${F}.bulkSave() was not able to update ${J} of the given documents due to incorrect version or optimistic concurrency, document ids: ${Z}`);this.modelName=F,this.documents=A,this.bulkWriteResult=B,this.numDocumentsNotUpdated=J}}Object.defineProperty(UC.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});/*!
 * exports
 */wS.exports=UC});var IS=z((Kj1,RS)=>{var EJ1=x2();RS.exports=function F(A){if(EJ1(A)!=="TopologyDescription")return!1;let B=Array.from(A.servers.values());return B.length>0&&B.every((D)=>D.type==="Unknown")}});var NS=z((Uj1,PS)=>{var CJ1=x2();PS.exports=function F(A){if(CJ1(A)!=="TopologyDescription")return!1;if(A.servers.size===0)return!1;for(let B of A.servers.values())if(B.host.endsWith(".mongodb.net")===!1||B.port!==27017)return!1;return!0}});var jS=z((Vj1,MS)=>{var WJ1=x2(),HJ1="Client network socket disconnected before secure TLS connection was established";MS.exports=function F(A){if(WJ1(A)!=="TopologyDescription")return!1;let B=Array.from(A.servers.values());return B.length>0&&B.every((D)=>D.error&&D.error.message.indexOf(HJ1)!==-1)}});var wC=z((Lj1,TS)=>{/*!
 * Module dependencies.
 */var qJ1=K1(),zJ1=IS(),QJ1=NS(),KJ1=jS();/*!
 * ignore
 */var UJ1="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",VJ1="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html";class LC extends qJ1{assimilateError(F){let A=F.reason;if(QJ1(A)&&zJ1(A)&&F.message.indexOf("bad auth")===-1&&F.message.indexOf("Authentication failed")===-1)this.message=UJ1;else if(KJ1(A))this.message=VJ1;else this.message=F.message;for(let D in F)if(D!=="name")this[D]=F[D];return this.cause=A,this}}Object.defineProperty(LC.prototype,"name",{value:"MongooseServerSelectionError"});TS.exports=LC});var IC=z((wj1,kS)=>{/*!
 * Module dependencies.
 */var LJ1=K1();class RC extends LJ1{constructor(F){let A="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+F.join(`
  `)+`
Use Model.updateOne() to update these arrays instead. See https://mongoosejs.com/docs/faq.html#divergent-array-error for more information.`;super(A)}}Object.defineProperty(RC.prototype,"name",{value:"DivergentArrayError"});/*!
 * exports
 */kS.exports=RC});var u4=z((Rj1,uS)=>{/*!
 * Module dependencies.
 */var wJ1=K1();class PC extends wJ1{constructor(F,A,B){A=A||"Field `"+F+"` is not in schema and strict mode is set to throw.";super(A);this.isImmutableError=!!B,this.path=F}}Object.defineProperty(PC.prototype,"name",{value:"StrictModeError"});uS.exports=PC});var MC=z((Ij1,OS)=>{/*!
 * Module dependencies.
 */var RJ1=K1();class NC extends RJ1{constructor(F,A){A=A||"Cannot populate path `"+F+"` because it is not in your schema. Set the `strictPopulate` option to false to override.";super(A);this.path=F}}Object.defineProperty(NC.prototype,"name",{value:"StrictPopulateError"});OS.exports=NC});var E6=z((SS,xS)=>{var X2=K1();/*!
 * Module exports.
 */xS.exports=SS=X2;X2.messages=DS();X2.Messages=X2.messages;X2.CastError=U2();X2.DocumentNotFoundError=RD();X2.ValidationError=M9();X2.ValidatorError=EC();X2.VersionError=WC();X2.ParallelSaveError=qC();X2.OverwriteModelError=QC();X2.MissingSchemaError=LS();X2.MongooseBulkSaveIncompleteError=VC();X2.MongooseServerSelectionError=wC();X2.DivergentArrayError=IC();X2.StrictModeError=u4();X2.StrictPopulateError=MC()});var C6=z((Pj1,_S)=>{_S.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var l2=z((Nj1,fS)=>{var IJ1=C0();class V2{constructor(F){if(F==null)return this;Object.assign(this,IJ1(F))}}var c2=C6();Object.defineProperty(V2.prototype,"type",c2);Object.defineProperty(V2.prototype,"validate",c2);Object.defineProperty(V2.prototype,"cast",c2);Object.defineProperty(V2.prototype,"required",c2);Object.defineProperty(V2.prototype,"default",c2);Object.defineProperty(V2.prototype,"ref",c2);Object.defineProperty(V2.prototype,"refPath",c2);Object.defineProperty(V2.prototype,"select",c2);Object.defineProperty(V2.prototype,"index",c2);Object.defineProperty(V2.prototype,"unique",c2);Object.defineProperty(V2.prototype,"immutable",c2);Object.defineProperty(V2.prototype,"sparse",c2);Object.defineProperty(V2.prototype,"text",c2);Object.defineProperty(V2.prototype,"transform",c2);fS.exports=V2});var ID=z((Mj1,X8)=>{var PJ1=U2();X8.exports=function F(A,B){if(X8.exports.convertToTrue.has(A))return!0;if(X8.exports.convertToFalse.has(A))return!1;if(A==null)return A;throw new PJ1("boolean",A,B)};X8.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);X8.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var PD=z((jj1,gS)=>{var NJ1=ID();/*!
 * ignore
 */gS.exports=function(F){let A=this?.path??null;return NJ1(F,A)}});var jC=z((Tj1,bS)=>{/*!
 * ignore
 */bS.exports=function(F){if(Array.isArray(F)){if(!F.every((A)=>typeof A==="number"||typeof A==="string"))throw new Error("$type array values must be strings or numbers");return F}if(typeof F!=="number"&&typeof F!=="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return F}});var hS=z((kj1,yS)=>{var MJ1=u4();/*!
 * ignore
 */yS.exports=function(F){if(F.$immutable)F.$immutableSetter=jJ1(F.path,F.options.immutable),F.set(F.$immutableSetter);else if(F.$immutableSetter)F.setters=F.setters.filter((A)=>A!==F.$immutableSetter),delete F.$immutableSetter};function jJ1(F,A){return function B(D,X,Z,J){if(this==null||this.$__==null)return D;if(this.isNew)return D;if(J?.overwriteImmutable)return D;if(!(typeof A==="function"?A.call(this,this):A))return D;let $=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(F):this.$__getValue(F);if(this.$__.strictMode==="throw"&&D!==$)throw new MJ1(F,"Path `"+F+"` is immutable and strict mode is set to throw.",!0);return $}}});var mS=z((uj1,vS)=>{vS.exports=function F(A){return typeof A==="function"&&A.constructor&&A.constructor.name==="AsyncFunction"}});var cS=z((Oj1,dS)=>{dS.exports=function F(A){let B=Object.keys(A),D=!0;for(let X=0,Z=B.length;X<Z;++X)if(typeof A[B[X]]==="object"&&A[B[X]]!==null){D=!1;break}return D}});var pS=z((Sj1,lS)=>{var Z8=1000,J8=Z8*60,Y8=J8*60,j9=Y8*24,TJ1=j9*7,kJ1=j9*365.25;lS.exports=function(F,A){A=A||{};var B=typeof F;if(B==="string"&&F.length>0)return uJ1(F);else if(B==="number"&&isFinite(F))return A.long?SJ1(F):OJ1(F);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(F))};function uJ1(F){if(F=String(F),F.length>100)return;var A=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(!A)return;var B=parseFloat(A[1]),D=(A[2]||"ms").toLowerCase();switch(D){case"years":case"year":case"yrs":case"yr":case"y":return B*kJ1;case"weeks":case"week":case"w":return B*TJ1;case"days":case"day":case"d":return B*j9;case"hours":case"hour":case"hrs":case"hr":case"h":return B*Y8;case"minutes":case"minute":case"mins":case"min":case"m":return B*J8;case"seconds":case"second":case"secs":case"sec":case"s":return B*Z8;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return B;default:return}}function OJ1(F){var A=Math.abs(F);if(A>=j9)return Math.round(F/j9)+"d";if(A>=Y8)return Math.round(F/Y8)+"h";if(A>=J8)return Math.round(F/J8)+"m";if(A>=Z8)return Math.round(F/Z8)+"s";return F+"ms"}function SJ1(F){var A=Math.abs(F);if(A>=j9)return ND(F,A,j9,"day");if(A>=Y8)return ND(F,A,Y8,"hour");if(A>=J8)return ND(F,A,J8,"minute");if(A>=Z8)return ND(F,A,Z8,"second");return F+" ms"}function ND(F,A,B,D){var X=A>=B*1.5;return Math.round(F/B)+" "+D+(X?"s":"")}});var nS=z((xj1,iS)=>{iS.exports=function F(A){let B=[],D="",X="DEFAULT";for(let Z=0;Z<A.length;++Z){if(X==="IN_SQUARE_BRACKETS"&&!/\d/.test(A[Z])&&A[Z]!=="]")X="DEFAULT",D=B[B.length-1]+"["+D,B.splice(B.length-1,1);if(A[Z]==="["){if(X!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D),D="";X="IN_SQUARE_BRACKETS"}else if(A[Z]==="]")if(X==="IN_SQUARE_BRACKETS")X="IMMEDIATELY_AFTER_SQUARE_BRACKETS",B.push(D),D="";else X="DEFAULT",D+=A[Z];else if(A[Z]==="."){if(X!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D),D="";X="DEFAULT"}else D+=A[Z]}if(X!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D);return B}});var oS=z((xJ1)=>{var wF=nS(),sS=["__proto__","constructor","prototype"];xJ1.get=function(F,A,B,D){var X;if(typeof B=="function")if(B.length<2)D=B,B=void 0;else X=B,B=void 0;D||(D=tS);var Z=typeof F=="string"?wF(F):F;if(!Array.isArray(Z))throw new TypeError("Invalid `path`. Must be either string or array");var J=A,Y;for(var $=0;$<Z.length;++$){if(Y=Z[$],typeof Z[$]!=="string"&&typeof Z[$]!=="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof Z[$]);if(Array.isArray(J)&&!/^\d+$/.test(Y)){var G=Z.slice($);return[].concat(J).map(function(C){return C?xJ1.get(G,C,B||X,D):D(void 0)})}if(X)J=X(J,Y);else{var E=B&&J[B]?J[B]:J;J=E instanceof Map?E.get(Y):E[Y]}if(!J)return D(J)}return D(J)};xJ1.has=function(F,A){var B=typeof F==="string"?wF(F):F;if(!Array.isArray(B))throw new TypeError("Invalid `path`. Must be either string or array");var D=B.length,X=A;for(var Z=0;Z<D;++Z){if(typeof B[Z]!=="string"&&typeof B[Z]!=="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof B[Z]);if(X==null||typeof X!=="object"||!(B[Z]in X))return!1;X=X[B[Z]]}return!0};xJ1.unset=function(F,A){var B=typeof F==="string"?wF(F):F;if(!Array.isArray(B))throw new TypeError("Invalid `path`. Must be either string or array");var D=B.length,X=A;for(var Z=0;Z<D;++Z){if(X==null||typeof X!=="object"||!(B[Z]in X))return!1;if(typeof B[Z]!=="string"&&typeof B[Z]!=="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof B[Z]);if(sS.indexOf(B[Z])!==-1)return!1;if(Z===D-1)return delete X[B[Z]],!0;X=X instanceof Map?X.get(B[Z]):X[B[Z]]}return!0};xJ1.set=function(F,A,B,D,X,Z){var J;if(typeof D=="function")if(D.length<2)X=D,D=void 0;else J=D,D=void 0;X||(X=tS);var Y=typeof F=="string"?wF(F):F;if(!Array.isArray(Y))throw new TypeError("Invalid `path`. Must be either string or array");if(B==null)return;for(var $=0;$<Y.length;++$){if(typeof Y[$]!=="string"&&typeof Y[$]!=="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof Y[$]);if(sS.indexOf(Y[$])!==-1)return}var G=Z||/\$/.test(F)&&Z!==!1,E=B,C;for(var $=0,W=Y.length-1;$<W;++$){if(C=Y[$],C=="$")if($==W-1)break;else continue;if(Array.isArray(E)&&!/^\d+$/.test(C)){var H=Y.slice($);if(!G&&Array.isArray(A))for(var q=0;q<E.length&&q<A.length;++q)xJ1.set(H,A[q],E[q],D||J,X,G);else for(var q=0;q<E.length;++q)xJ1.set(H,A,E[q],D||J,X,G);return}if(J)E=J(E,C);else{var Q=D&&E[D]?E[D]:E;E=Q instanceof Map?Q.get(C):Q[C]}if(!E)return}if(C=Y[W],D&&E[D])E=E[D];if(Array.isArray(E)&&!/^\d+$/.test(C))if(!G&&Array.isArray(A))rS(E,A,C,J,D,X);else for(var q=0;q<E.length;++q){var K=E[q];if(K)if(J)J(K,C,X(A));else{if(K[D])K=K[D];K[C]=X(A)}}else if(J)J(E,C,X(A));else if(E instanceof Map)E.set(C,X(A));else E[C]=X(A)};/*!
 * Split a string path into components delimited by '.' or
 * '[\d+]'
 *
 * #### Example:
 *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
 */xJ1.stringToParts=wF;/*!
 * Recursively set nested arrays
 */function rS(F,A,B,D,X,Z){for(var J,Y=0;Y<F.length&&Y<A.length;++Y)if(J=F[Y],Array.isArray(J)&&Array.isArray(A[Y]))rS(J,A[Y],B,D,X,Z);else if(J)if(D)D(J,B,Z(A[Y]));else{if(J[X])J=J[X];J[B]=Z(A[Y])}}/*!
 * Returns the value passed to it.
 */function tS(F){return F}});var W6=z((eS,Fx)=>{Fx.exports=eS=oS()});var kC=z((fj1,Bx)=>{var bJ1=C0();class Ax{constructor(F){if(this._docs={},this._childDocs=[],F==null)return;if(F=bJ1(F),Object.assign(this,F),typeof F.subPopulate==="object")this.populate=F.subPopulate;if(F.perDocumentLimit!=null&&F.limit!=null)throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+F.path+"`.")}}Bx.exports=Ax});var Dx=z((yJ1)=>{yJ1.isMongooseDocumentArray=function(F){return Array.isArray(F)&&F.isMongooseDocumentArray}});var MD=z((bj1,Xx)=>{Xx.exports=function F(A,B,D){let X=Object.keys(B.tree),Z={};for(let J of X){if(D&&(A.paths[J]||A.nested[J]||A.singleNestedPaths[J]))continue;Z[J]=B.tree[J]}A.options._isMerging=!0,A.add(Z,null),delete A.options._isMerging,A.callQueue=A.callQueue.concat(B.callQueue),A.method(B.methods),A.static(B.statics);for(let[J,Y]of Object.entries(B._userProvidedOptions))if(!(J in A._userProvidedOptions))A.set(J,Y);for(let J in B.query)A.query[J]=B.query[J];for(let J in B.virtuals)A.virtuals[J]=B.virtuals[J].clone();A._indexes=A._indexes.concat(B._indexes||[]),A.s.hooks.merge(B.s.hooks,!1)}});var Yx=z((Zx,Jx)=>{/*!
 * Module dependencies.
 */var yj1=B1(),N6=Jx.exports=Zx=function F(){};N6.ctor=function(){let F=[...arguments],A=function(){N6.apply(this,arguments),this.paths={},this.states={}};return A.prototype=new N6,A.prototype.constructor=A,A.prototype.stateNames=F,F.forEach(function(B){A.prototype[B]=function(D){this._changeState(D,B)}}),A};N6.prototype._changeState=function F(A,B){let D=this.paths[A];if(D===B)return;let X=this.states[D];if(X)delete X[A];this.paths[A]=B,this.states[B]=this.states[B]||{},this.states[B][A]=!0};/*!
 * ignore
 */N6.prototype.clear=function F(A){if(this.states[A]==null)return;let B=Object.keys(this.states[A]),D=B.length,X;while(D--)X=B[D],delete this.states[A][X],delete this.paths[X]};/*!
 * ignore
 */N6.prototype.clearPath=function F(A){let B=this.paths[A];if(!B)return;delete this.paths[A],delete this.states[B][A]};N6.prototype.getStatePaths=function F(A){if(this.states[A]!=null)return this.states[A];return{}};N6.prototype.some=function F(){let A=this,B=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(B,function(D){if(A.states[D]==null)return!1;return Object.keys(A.states[D]).length})};N6.prototype._iter=function F(A){return function(){let B=[...arguments],D=B.pop();if(!B.length)B=this.stateNames;let X=this;return B.reduce(function(J,Y){if(X.states[Y]==null)return J;return J.concat(Object.keys(X.states[Y]))},[])[A](function(J,Y,$){return D(J,Y,$)})}};N6.prototype.forEach=function F(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};N6.prototype.map=function F(){return this.map=this._iter("map"),this.map.apply(this,arguments)};N6.prototype.clone=function F(){let A=new this.constructor;A.paths={...this.paths};for(let B of this.stateNames){if(!(B in this.states))continue;A.states[B]=this.states[B]==null?this.states[B]:{...this.states[B]}}return A}});var Ex=z(($x,Gx)=>{/*!
 * Dependencies
 */var vJ1=Yx(),mJ1=vJ1.ctor("require","modify","init","default","ignore");Gx.exports=$x=z0;function z0(){this.activePaths=new mJ1}z0.prototype.strictMode=!0;z0.prototype.fullPath=void 0;z0.prototype.selected=void 0;z0.prototype.shardval=void 0;z0.prototype.saveError=void 0;z0.prototype.validationError=void 0;z0.prototype.adhocPaths=void 0;z0.prototype.removing=void 0;z0.prototype.inserting=void 0;z0.prototype.saving=void 0;z0.prototype.version=void 0;z0.prototype._id=void 0;z0.prototype.ownerDocument=void 0;z0.prototype.populate=void 0;z0.prototype.populated=void 0;z0.prototype.primitiveAtomics=void 0;z0.prototype.wasPopulated=!1;z0.prototype.scope=void 0;z0.prototype.session=null;z0.prototype.pathsToScopes=null;z0.prototype.cachedRequired=null});var jD=z((hj1,Hx)=>{/*!
 * Module dependencies.
 */var uC=$1().Binary,dJ1=$1().UUID,Cx=B1();function _2(F,A,B){let D=F;if(F==null)D=0;let X,Z,J;if(Array.isArray(A))Z=A[0],J=A[1];else X=A;let Y;if(typeof D==="number"||D instanceof Number)Y=Buffer.alloc(D);else Y=Buffer.from(D,X,B);return Cx.decorate(Y,_2.mixin),Y.isMongooseBuffer=!0,Y[_2.pathSymbol]=Z,Y[Wx]=J,Y._subtype=0,Y}var cJ1=Symbol.for("mongoose#Buffer#_path"),Wx=Symbol.for("mongoose#Buffer#_parent");_2.pathSymbol=cJ1;/*!
 * Inherit from Buffer.
 */_2.mixin={_subtype:void 0,_markModified:function(){let F=this[Wx];if(F)F.markModified(this[_2.pathSymbol]);return this},write:function(){let F=Buffer.prototype.write.apply(this,arguments);if(F>0)this._markModified();return F},copy:function(F){let A=Buffer.prototype.copy.apply(this,arguments);if(F?.isMongooseBuffer)F._markModified();return A}};/*!
 * Compile other Buffer methods marking this buffer as modified.
 */Cx.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(F){if(!Buffer.prototype[F])return;_2.mixin[F]=function(){let A=Buffer.prototype[F].apply(this,arguments);return this._markModified(),A}});_2.mixin.toObject=function(F){let A=typeof F==="number"?F:this._subtype||0;return new uC(Buffer.from(this),A)};_2.mixin.$toObject=_2.mixin.toObject;_2.mixin.toBSON=function(){return new uC(this,this._subtype||0)};_2.mixin.toUUID=function(){if(this._subtype!==4)throw new Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new dJ1(this)};_2.mixin.equals=function(F){if(!Buffer.isBuffer(F))return!1;if(this.length!==F.length)return!1;for(let A=0;A<this.length;++A)if(this[A]!==F[A])return!1;return!0};_2.mixin.subtype=function(F){if(typeof F!=="number")throw new TypeError("Invalid subtype. Expected a number");if(this._subtype!==F)this._markModified();this._subtype=F};/*!
 * Module exports.
 */_2.Binary=uC;Hx.exports=_2});var T9=z((lJ1)=>{lJ1.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");lJ1.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var $8=z((mj1,zx)=>{/*!
 * Module dependencies.
 */var TD=Q0(),nJ1=T9(),aJ1=I9(),qx=B1();function M6(F,A,B,D){if(A?.default){let X=A.default;if(Array.isArray(X)&&X.length===0)A.default=Array;else if(!A.shared&&aJ1(X)&&qx.hasOwnKeys(X)===!1)A.default=function(){return{}}}TD.call(this,F,A,"Mixed",D),this[nJ1.schemaMixedSymbol]=!0}M6.schemaName="Mixed";M6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */M6.prototype=Object.create(TD.prototype);M6.prototype.constructor=M6;M6.get=TD.get;M6.set=TD.set;M6.setters=[];M6.prototype.cast=function(F){if(F instanceof Error)return qx.errorToPOJO(F);return F};M6.prototype.castForQuery=function(F,A){return A};M6.prototype.toJSONSchema=function F(A){return{}};/*!
 * Module exports.
 */zx.exports=M6});var Kx=z((dj1,Qx)=>{Qx.exports=class F{constructor(A,B,D){this.subdocSnapshot=A,this.activePaths=B,this.version=D}}});var kD=z((cj1,Ux)=>{/*!
 * Module dependencies.
 */var sJ1=K1();class OC extends sJ1{constructor(F,A){let B=Array.isArray(A)?"array":"primitive value";super("Tried to set nested object field `"+F+`\` to ${B} \``+A+"`");this.path=F}}Object.defineProperty(OC.prototype,"name",{value:"ObjectExpectedError"});Ux.exports=OC});var uD=z((lj1,Vx)=>{/*!
 * Module dependencies.
 */var rJ1=K1();class SC extends rJ1{constructor(F,A,B){super('Parameter "'+A+'" to '+B+'() must be an object, got "'+(F==null?F:F.toString())+'" (type '+typeof F+")")}}Object.defineProperty(SC.prototype,"name",{value:"ObjectParameterError"});Vx.exports=SC});var wx=z((pj1,Lx)=>{/*!
 * Module dependencies.
 */var tJ1=K1();class xC extends tJ1{constructor(F){super("Can't validate() the same doc multiple times in parallel. Document: "+F._doc._id)}}Object.defineProperty(xC.prototype,"name",{value:"ParallelValidateError"});/*!
 * exports
 */Lx.exports=xC});var _C=z((ij1,Rx)=>{Rx.exports=function F(A){let B={},D=Object.keys(A);for(let X of D){if(X.indexOf(".")===-1){B[X]=1;continue}let Z=X.split("."),J=Z[0];for(let Y=0;Y<Z.length;++Y)if(B[J]=1,Y+1<Z.length)J=J+"."+Z[Y+1]}return B}});var Px=z((nj1,Ix)=>{Ix.exports=function F(A){if(A==null||typeof A!=="object")return!1;return A.$slice==null&&A.$elemMatch==null&&A.$meta==null&&A.$==null}});var OD=z((aj1,Nx)=>{var oJ1=Px();Nx.exports=function F(A,B,D,X,Z,J,Y){let $=Object.keys(A.$__schema.paths),G=$.length,E=Y?.skipParentChangeTracking;for(let C=0;C<G;++C){let W,H="",q=$[C];if(q==="_id"&&A.$__.skipId)continue;let Q=A.$__schema.paths[q],K=Q.splitPath(),U=K.length;if(K[U-1]==="$*")continue;let R=!1,w=A._doc;for(let V=0;V<U;++V){if(w==null)break;let N=K[V];if(H+=(!H.length?"":".")+N,D===!0){if(H in B)break}else if(D===!1&&B&&!R){let T=Q.$isSingleNested||Q.$isMongooseDocumentArray;if(H in B&&!oJ1(B[H])||V===U-1&&T&&X!=null&&X[H])R=!0;else if(X!=null&&!X[H])break}if(V===U-1){if(w[N]!==void 0)break;if(Z!=null){if(typeof Q.defaultValue==="function"){if(!Q.defaultValue.$runBeforeSetters&&Z)break;if(Q.defaultValue.$runBeforeSetters&&!Z)break}else if(!Z)continue}if(J&&J[H])break;if(B&&D!==null){if(D===!0){if(q in B)continue;try{W=Q.getDefault(A,!1)}catch(T){A.invalidate(q,T);break}if(typeof W!=="undefined")w[N]=W,fC(A,q,E)}else if(R){try{W=Q.getDefault(A,!1)}catch(T){A.invalidate(q,T);break}if(typeof W!=="undefined")w[N]=W,fC(A,q,E)}}else{try{W=Q.getDefault(A,!1)}catch(T){A.invalidate(q,T);break}if(typeof W!=="undefined")w[N]=W,fC(A,q,E)}}else w=w[N]}}};/*!
 * ignore
 */function fC(F,A,B){if(F.$__.activePaths.default(A),!B&&F.$isSubdocument&&F.$isSingleNested&&F.$parent()!=null)F.$parent().$__.activePaths.default(F.$__pathRelativeToParent(A))}});var SD=z((sj1,jx)=>{/*!
 * ignore
 */jx.exports=function F(A,B,D){D=D||{};let X=D.skipDocArrays,Z=0;if(!A)return Z;for(let J of Object.keys(A.$__.activePaths.getStatePaths("modify"))){if(X){if(A.$__schema.path(J)?.$isMongooseDocumentArray)continue}if(J.startsWith(B+".")){if(A.$__.activePaths.clearPath(J),++Z,A.$isSubdocument)Mx(A,J)}}return Z};function Mx(F,A,B=new Set){if(B.has(F))throw new Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");let D=F.$parent(),X=F.$__pathRelativeToParent(void 0,!1)+"."+A;if(D.$__.activePaths.clearPath(X),D.$isSubdocument)Mx(D,X,B)}});var _D=z((JY1)=>{var eJ1=C0(),FY1=t().documentSchemaSymbol,AY1=n6().internalToObjectOptions,kx=B1(),G8,BY1=t().getSymbol,xD=t().scopeSymbol,Tx=kx.isPOJO;/*!
 * exports
 */JY1.compile=ux;JY1.defineKey=Ox;var DY1=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),XY1=Object.freeze({noDottedPath:!0});function ux(F,A,B,D){G8=G8||H3();let X=D.typeKey;for(let Z of Object.keys(F)){let J=F[Z],$=Tx(J)&&kx.hasOwnKeys(J)&&(!J[X]||X==="type"&&Tx(J.type)&&J.type.type)?J:null;Ox({prop:Z,subprops:$,prototype:A,prefix:B,options:D})}}function Ox({prop:F,subprops:A,prototype:B,prefix:D,options:X}){G8=G8||H3();let Z=(D?D+".":"")+F;D=D||"";let J=D?Object.freeze({}):XY1;if(A)Object.defineProperty(B,F,{enumerable:!0,configurable:!0,get:function(){let Y=this;if(!this.$__.getters)this.$__.getters={};if(!this.$__.getters[Z]){let $=Object.create(G8.prototype,ZY1(this));if(!D)$.$__[xD]=this;$.$__.nestedPath=Z,Object.defineProperty($,"schema",{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty($,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty($,FY1,{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty($,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return eJ1(Y.get(Z,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty($,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Y.get(Z,null,{virtuals:this?.schema?.options?.toObject?.virtuals||null})}}),Object.defineProperty($,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Y.get(Z,null,{virtuals:this?.schema?.options?.toJSON?.virtuals||null})}}),Object.defineProperty($,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty($,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(Z,null,DY1)||{}).length===0}}),Object.defineProperty($,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),ux(A,$,Z,X),this.$__.getters[Z]=$}return this.$__.getters[Z]},set:function(Y){if(Y?.$__isNested)Y=Y.$__get();else if(Y instanceof G8&&!Y.$__isNested)Y=Y.$toObject(AY1);(this.$__[xD]||this).$set(Z,Y)}});else Object.defineProperty(B,F,{enumerable:!0,configurable:!0,get:function(){return this[BY1].call(this.$__[xD]||this,Z,null,J)},set:function(Y){this.$set.call(this.$__[xD]||this,Z,Y)}})}function ZY1(F){let A={};return Object.getOwnPropertyNames(F).forEach(function(B){if(["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(B)===-1)return;A[B]=Object.getOwnPropertyDescriptor(F,B),A[B].enumerable=!1}),A}});var xx=z((tj1,Sx)=>{Sx.exports=function F(A){if(A==null)return null;return Object.keys(A)[0]}});var fD=z((WY1)=>{/*!
 * Module dependencies.
 */var GY1=$1().Binary,_x=D2(),fx=UF(),EY1=E6(),CY1=m("util");WY1.flatten=gx;WY1.modifiedPaths=bx;/*!
 * ignore
 */function gx(F,A,B,D){let X;if(F&&fx(F)&&!Buffer.isBuffer(F))X=Object.keys(F.toObject({transform:!1,virtuals:!1})||{});else X=Object.keys(F||{});let Z=X.length,J={};A=A?A+".":"";for(let Y=0;Y<Z;++Y){let $=X[Y],G=F[$];J[A+$]=G;let E=D?.path?.(A+$),C=D?.nested?.[A+$];if(E?.instance==="Mixed")continue;if(yx(G)){if(B?.skipArrays&&Array.isArray(G))continue;let W=gx(G,A+$,B,D);for(let H in W)J[H]=W[H];if(Array.isArray(G))J[A+$]=G}if(C){let W=Object.keys(D.paths);for(let H of W)if(H.startsWith(A+$+".")&&!Object.hasOwn(J,H))J[H]=void 0}}return J}/*!
 * ignore
 */function bx(F,A,B,D=null){if(F==null||typeof F!=="object")return;if(D==null)D={raw:{update:F,path:A},trace:new WeakSet};if(D.trace.has(F))throw new EY1(`a circular reference in the update value, updateValue:
${CY1.inspect(D.raw.update,{showHidden:!1,depth:1})}
updatePath: '${D.raw.path}'`);D.trace.add(F);let X=Object.keys(F||{}),Z=X.length;B=B||{},A=A?A+".":"";for(let J=0;J<Z;++J){let Y=X[J],$=F[Y],G=A+Y;if(B[G]=!0,!Buffer.isBuffer($)&&fx($))$=$.toObject({transform:!1,virtuals:!1});if(yx($))bx($,A+Y,B,D)}return D.trace.delete(F),B}/*!
 * ignore
 */function yx(F){return F&&typeof F==="object"&&!(F instanceof Date)&&!_x(F,"ObjectId")&&(!Array.isArray(F)||F.length!==0)&&!(F instanceof Buffer)&&!_x(F,"Decimal128")&&!(F instanceof GY1)}});var K0=z((ej1,hx)=>{hx.exports=function F(A,B,D){let X,Z=!1;if(typeof B==="string"){if(B.indexOf(".")===-1){let $=gC(A,B);if($==null)return D;return $}X=B.split(".")}else if(Z=!0,X=B,X.length===1){let $=gC(A,X[0]);if($==null)return D;return $}let J=B,Y=A;for(let $ of X){if(Y==null)return D;if(!Z&&Y[J]!=null)return Y[J];if(Y=gC(Y,$),!Z)J=J.substr($.length+1)}return Y==null?D:Y};function gC(F,A){if(F==null)return F;if(F instanceof Map)return F.get(A);return F[A]}});var bC=z((FT1,mx)=>{var vx=D2();mx.exports=function F(A,B){if(typeof A==="string"&&typeof B==="string")return A===B;if(typeof A==="number"&&typeof B==="number")return A===B;if(vx(A,"ObjectId")&&vx(B,"ObjectId"))return A.toString()===B.toString();return!1}});var gD=z((AT1,dx)=>{var zY1=bC();dx.exports=function F(A,B){if(A?.discriminators==null)return null;for(let D of Object.keys(A.discriminators)){let X=A.discriminators[D];if(X.discriminatorMapping==null)continue;if(zY1(X.discriminatorMapping.value,B))return X}return null}});var lx=z((BT1,cx)=>{var QY1=K0(),KY1=gD();cx.exports=function F(A,B,D){D=D||{};let X=D.typeOnly,Z=Array.isArray(B)?B:B.indexOf(".")===-1?[B]:B.split("."),J=null,Y="adhocOrUndefined",$=KY1(A.schema,A.get(A.schema.options.discriminatorKey))||A.schema;for(let G=0;G<Z.length;++G){let E=Z.slice(0,G+1).join(".");if(J=$.path(E),J==null){Y="adhocOrUndefined";continue}if(J.instance==="Mixed")return X?"real":J;if(Y=$.pathType(E),(J.$isSingleNested||J.$isMongooseDocumentArrayElement)&&J.schema.discriminators!=null){let C=J.schema.discriminators,W=A.get(E+"."+QY1(J,"schema.options.discriminatorKey"));if(W==null||C[W]==null)continue;let H=Z.slice(G+1).join(".");return F(A.get(E),H,D)}}return X?Y:J}});var ix=z((DT1,px)=>{var UY1=K0();px.exports=function F(A,B,D){let X=D!=null?Object.keys(UY1(A.tree,D,{})):Object.keys(A.tree),Z=new Set(Object.keys(B)),J;if(Z.size>1){J=new Set;for(let Y of X)if(Z.has(Y))J.add(Y);for(let Y of Z)if(!J.has(Y))J.add(Y);J=Array.from(J)}else J=Array.from(Z);return J}});var ax=z((XT1,nx)=>{nx.exports=function F(A,B){if(B.length===1)return;let D=B[0],X=void 0;for(let Z=0;Z<B.length-1;++Z){let J=A.path(D);if(J?.schema)X=J.schema.options.strict,A=J.schema,D=J.$isMongooseDocumentArray&&!isNaN(B[Z+1])?"":B[Z+1];else D+=D.length?"."+B[Z+1]:B[Z+1]}return X}});var bD=z((ZT1,sx)=>{var VY1=B1(),LY1=new Set(["__index","__parentArray","_doc"]);sx.exports=function F(A,B){if(VY1.isPOJO(A)&&A.$__!=null&&A._doc!=null){if(B){let D={};for(let X of Object.keys(A)){if(typeof X==="symbol")continue;if(X[0]==="$")continue;if(LY1.has(X))continue;D[X]=A[X]}return{...A._doc,...D}}return A._doc}return A}});var E8=z((JT1,rx)=>{/*!
 * ignore
 */rx.exports=function F(A){if(A==null)return!0;if(typeof A==="object")return!("$meta"in A)&&!("$slice"in A);return!0}});var C8=z((YT1,tx)=>{var wY1=E8(),RY1=A8();/*!
 * ignore
 */tx.exports=function F(A){if(A==null)return null;let B=Object.keys(A),D=null;if(B.length===1&&B[0]==="_id")D=!A._id;else for(let X=0;X<B.length;++X){let Z=B[X];if(Z!=="_id"&&wY1(A[Z])){if(D=RY1(A[Z])?F(A[Z])??D:!A[Z],D!=null)break}}return D}});var yC=z(($T1,ox)=>{var IY1=E8();ox.exports=function F(A,B){if(A==null)return!1;if(B==="_id")return A._id===0;let D=Object.keys(A),X=null;for(let Z of D)if(IY1(A[Z])){X=A[B]===1?"inclusive":"exclusive";break}if(X==="inclusive")return A[B]!==1;if(X==="exclusive")return A[B]===0;return!1}});var hC=z((GT1,ex)=>{var PY1=B1();ex.exports=function F(A,B){if(A._doc._id==null||B==null||B.length===0)return;let D=String(A._doc._id);for(let X of B){if(X.isVirtual)continue;let J=X.path.split(".");for(let Y=0;Y<J.length-1;++Y){let $=J.slice(0,Y+1).join("."),G=J.slice(Y+1).join("."),E=A.get($);if(E==null)continue;if(PY1.isMongooseDocumentArray(E)){for(let C=0;C<E.length;++C)if(E[C])E[C].populated(G,X._docs[D]==null?void 0:X._docs[D][C],X);break}}}}});var vC=z((ET1,A_)=>{var{isPOJO:NY1}=B1();A_.exports=F_;function F_(F){let A=Object.keys(F),B=A.length,D,X,Z;while(B--){if(X=A[B],Z=F[X],NY1(Z))F[X]=F_(Z);if(F[X]===void 0){delete F[X];continue}D=!0}return D?F:void 0}});var mC=z((CT1,B_)=>{var MY1=/\./g;B_.exports=function F(A){if(A.indexOf(".")===-1)return[A];let B=A.split(MY1),D=B.length,X=new Array(D),Z="";for(let J=0;J<D;++J)Z+=Z.length!==0?"."+B[J]:B[J],X[J]=Z;return X}});var X_=z((WT1,D_)=>{D_.exports=function F(A,B,D,X,Z){let J=Object.keys(A).reduce(($,G)=>$||G.startsWith(B+"."),!1),Y=B+"."+D.options.discriminatorKey;if(!J&&Z.length===1&&Z[0]===Y)X.splice(X.indexOf(Y),1)}});var j6=z((HT1,Z_)=>{var jY1=bC();Z_.exports=function F(A,B){if(A==null)return null;for(let D of Object.keys(A)){let X=A[D];if(X.schema&&X.schema.discriminatorMapping&&jY1(X.schema.discriminatorMapping.value,B))return X}return null}});var yD=z((qT1,J_)=>{/*!
 * ignore
 */J_.exports=function F(A,B){let D=B.split("."),X="",Z,J,Y;for(let $=0;$<D.length;++$)if(X+=X.length?".":""+D[$],A[X]){J=Object.keys(A),Y=J.length;for(Z=0;Z<Y;++Z)if(J[$].indexOf(X+".")===0&&J[$].indexOf(B)!==0)continue;return!0}return!1}});var RF=z((_Y1)=>{/*!
 * Module dependencies
 */var Y_=kC(),TY1=X_(),$_=K0(),kY1=j6(),uY1=E8(),OY1=C0(),SY1=yD();_Y1.preparePopulationOptionsMQ=function F(A,B){let D=A._mongooseOptions.populate,X=Object.keys(D).reduce((Y,$)=>Y.concat([D[$]]),[]);if(B.lean!=null)X.filter((Y)=>Y?.options?.lean==null).forEach(xY1(B.lean));let Z=A?.options?.session||null;if(Z!=null)X.forEach((Y)=>{if(Y.options==null){Y.options={session:Z};return}if(!("session"in Y.options))Y.options.session=Z});let J=A._fieldsForExec();for(let Y=0;Y<X.length;++Y)if(X[Y]instanceof Y_)X[Y]=new Y_({...X[Y],_queryProjection:J,_localModel:A.model});else X[Y]._queryProjection=J,X[Y]._localModel=A.model;return X};_Y1.createModel=function F(A,B,D,X,Z){A.hooks.execPreSync("createModel",B);let J=A.schema?A.schema.discriminatorMapping:null,Y=J?.isRoot?J.key:null,$=B[Y];if(Y&&$&&A.discriminators){let E=A.discriminators[$]||kY1(A.discriminators,$);if(E){let C=OY1(X);return _Y1.applyPaths(C,E.schema),new E(void 0,C,{skipId:!0})}}let G={skipId:!0,isNew:!1,willInit:!0};if(Z!=null&&"defaults"in Z)G.defaults=Z.defaults;return new A(void 0,D,G)};/*!
 * ignore
 */_Y1.createModelAndInit=function F(A,B,D,X,Z,J,Y){let $=J?{populated:J}:void 0,G=_Y1.createModel(A,B,D,X,Z);try{G.$init(B,$,Y)}catch(E){Y(E,G)}};/*!
 * ignore
 */_Y1.applyPaths=function F(A,B,D){let X,Z,J=new Set;if(A){Z=Object.keys(A);let W=[];for(let H=0;H<Z.length;++H){let q=Z[H];if(Z[H][0]!=="-")continue;if(delete A[q],q==="-_id")A._id=0;else W.push(q.slice(1))}Z=Object.keys(A);for(let H=0;H<Z.length;++H){if(Z[H][0]==="+")continue;let q=A[Z[H]];if(!uY1(q))continue;if(Z[H]==="_id"&&Z.length>1)continue;if(Z[H]===B.options.discriminatorKey&&Z.length>1&&q!=null&&!q)continue;X=!q;break}for(let H of W){let q=B.path(H);if(!q?.selected||X!==!1)A[H]=0,X=!0;else if(q?.selected&&X===!1)J.add(H)}}let Y=[],$=[],G=[];switch(E(B),X){case!0:for(let W of $)A[W]=0;break;case!1:if(B?.paths._id?.options?.select===!1)A._id=0;for(let W of Y){if(J.has(W))continue;if(SY1(A,W))continue;A[W]=A[W]||1}break;case void 0:if(A==null)break;for(let W of Object.keys(A||{}))if(W.startsWith("+"))delete A[W];for(let W of $){if(A[W]!=null)continue;A[W]=0}break}function E(W,H){if(H||(H=""),G.indexOf(W)!==-1)return[];G.push(W);let q=[];return W.eachPath(function(Q,K){if(H)Q=H+"."+Q;if(K.$isSchemaMap||Q.endsWith(".$*")){let R="+"+Q,w=A&&R in A;if(K.options?.select===!1&&!w)$.push(Q);return}let U=C(Q,K);if(U==null&&!Array.isArray(K)&&K.$isMongooseArray&&!K.$isMongooseDocumentArray)U=C(Q,K.embeddedSchemaType);if(U!=null)q.push(U);if(K.schema){let R=E(K.schema,Q);if(X===!1)TY1(A,Q,K.schema,Y,R)}}),G.pop(),q}function C(W,H){if(A==null)return;if(typeof H.selected!=="boolean")return;if(H.selected===!1&&A[W]){if(D)A[W]=0;return}if(!X&&H.selected&&W===B.options.discriminatorKey&&A[W]!=null&&!A[W]){delete A[W];return}if(X===!1&&H.selected&&A[W]!=null&&!A[W]){delete A[W];return}let q="+"+W;if(A&&q in A){if(delete A[q],X===!1&&Z.length>1&&!~Z.indexOf(W)&&!D)A[W]=1;else if(X==null&&D&&H.selected===!1)A[W]=0;return}let K=W.split("."),U="";for(let R=0;R<K.length;++R)if(U+=U.length?"."+K[R]:K[R],$.indexOf(U)!==-1)return;if(!X&&(H?.options?.$skipDiscriminatorCheck||!1)){let R="";for(let w=0;w<K.length;++w){R+=(R.length===0?"":".")+K[w];let V=$_(A,R,!1)||$_(A,R+".$",!1);if(V&&typeof V!=="object")return}}return(H.selected?Y:$).push(W),W}};function xY1(F){return function(A){if(A.options||(A.options={}),Array.isArray(F?.virtuals))F=Object.assign({},F),F.virtuals=F.virtuals.filter((B)=>typeof B==="string"&&B.startsWith(A.path+".")).map((B)=>B.slice(A.path.length+1));A.options.lean=F}}});var dC=z((QT1,E_)=>{function yY1(F){return!!F&&(typeof F==="object"||typeof F==="function")&&typeof F.then==="function"}E_.exports=yY1});var W_=z((KT1,C_)=>{C_.exports=function F(A,B,D){let X=B[0],Z=D,J=A;for(let Y=0;Y<B.length-1;++Y){let $=Z.path(X);if($?.schema){let G=J.get(X);if(Z=$.schema,X=B[Y+1],Array.isArray(G)&&!isNaN(X))G=G[X],X="";if(G==null)break;J=G}else X+=X.length?"."+B[Y+1]:B[Y+1]}return J}});var hD=z((UT1,z_)=>{var b3=H3(),hY1=n6().internalToObjectOptions,H_=m("util"),q_=B1();z_.exports=c1;function c1(F,A,B,D){if(B!=null){let Z={isNew:B.isNew};if("defaults"in B.$__)Z.defaults=B.$__.defaults;D=Object.assign(Z,D)}if(D?.path!=null)this.$basePath=D.path;if(D?.pathRelativeToParent!=null)this.$pathRelativeToParent=D.pathRelativeToParent;let X=D;if(D?.path!=null)X=Object.assign({},D),delete X.path;b3.call(this,F,A,X),delete this.$__.priorDoc}c1.prototype=Object.create(b3.prototype);Object.defineProperty(c1.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(c1.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});/*!
 * ignore
 */c1.prototype.toBSON=function(){return this.toObject(hY1)};c1.prototype.save=async function F(A){if(A=A||{},!A.suppressWarning)q_.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app.");return await this.$__save()};c1.prototype.$__fullPath=function(F){if(!this.$__.fullPath)this.ownerDocument();return F?this.$__.fullPath+"."+F:this.$__.fullPath};c1.prototype.$__pathRelativeToParent=function(F){if(this.$pathRelativeToParent!=null)return F==null?this.$pathRelativeToParent:this.$pathRelativeToParent+"."+F;if(F==null)return this.$basePath;if(!this.$basePath)return F;return[this.$basePath,F].join(".")};c1.prototype.$__save=async function F(){try{await this._execDocumentPreHooks("save")}catch(A){await this._execDocumentPostHooks("save",A);return}await this._execDocumentPostHooks("save")};/*!
 * ignore
 */c1.prototype.$isValid=function(F){let A=this.$parent(),B=this.$__pathRelativeToParent(F);if(A!=null&&B!=null)return A.$isValid(B);return b3.prototype.$isValid.call(this,F)};/*!
 * ignore
 */c1.prototype.markModified=function(F){b3.prototype.markModified.call(this,F);let A=this.$parent();if(A==null)return;let B=this.$__pathRelativeToParent(F);if(B==null)return;let D=this.$__pathRelativeToParent().replace(/\.$/,"");if(A.isDirectModified(D)||this.isNew)return;this.$__parent.markModified(B,this)};/*!
 * ignore
 */c1.prototype.isModified=function(F,A,B){let D=this.$parent();if(D!=null){if(Array.isArray(F)||typeof F==="string")F=Array.isArray(F)?F:F.split(" "),F=F.map((X)=>this.$__pathRelativeToParent(X)).filter((X)=>X!=null);else if(!F)F=this.$__pathRelativeToParent();return D.$isModified(F,A,B)}return b3.prototype.isModified.call(this,F,A,B)};c1.prototype.$markValid=function(F){b3.prototype.$markValid.call(this,F);let A=this.$parent(),B=this.$__pathRelativeToParent(F);if(A!=null&&B!=null)A.$markValid(B)};/*!
 * ignore
 */c1.prototype.invalidate=function(F,A,B){b3.prototype.invalidate.call(this,F,A,B);let D=this.$parent(),X=this.$__pathRelativeToParent(F);if(D!=null&&X!=null)D.invalidate(X,A,B);else if(A.kind==="cast"||A.name==="CastError"||X==null)throw A;return this.ownerDocument().$__.validationError};/*!
 * ignore
 */c1.prototype.$ignore=function(F){b3.prototype.$ignore.call(this,F);let A=this.$parent(),B=this.$__pathRelativeToParent(F);if(A!=null&&B!=null)A.$ignore(B)};c1.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let F=this,A=[],B=new Set([F]);while(!0){if(typeof F.$__pathRelativeToParent!=="function")break;A.unshift(F.$__pathRelativeToParent(void 0,!0));let D=F.$parent();if(D==null)break;if(F=D,B.has(F))throw new Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");B.add(F)}return this.$__.fullPath=A.join("."),this.$__.ownerDocument=F,this.$__.ownerDocument};/*!
 * ignore
 */c1.prototype.$__fullPathWithIndexes=function(){let F=this,A=[],B=new Set([F]);while(!0){if(typeof F.$__pathRelativeToParent!=="function")break;A.unshift(F.$__pathRelativeToParent(void 0,!1));let D=F.$parent();if(D==null)break;if(F=D,B.has(F))throw new Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");B.add(F)}return A.join(".")};c1.prototype.parent=function(){return this.$__parent};c1.prototype.$parent=c1.prototype.parent;/*!
 * Sets this sub-documents parent document.
 *
 * @api private
 */c1.prototype.$__setParent=function F(A){this.$__parent=A};c1.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};c1.prototype.deleteOne=function F(A){if(vY1(this),!A?.noop){this.$__removeFromParent();let B=this.ownerDocument();B.$__.removedSubdocs=B.$__.removedSubdocs||[],B.$__.removedSubdocs.push(this)}};/*!
 * ignore
 */c1.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};c1.prototype.inspect=function(){return this.toObject()};if(H_.inspect.custom)c1.prototype[H_.inspect.custom]=c1.prototype.inspect;c1.prototype.$toObject=function F(A,B){let D=b3.prototype.$toObject.call(this,A,B);if(q_.hasOwnKeys(D)===!1&&A?._calledWithOptions!=null){if((A._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??A.minimize)&&!this.constructor.$__required)return}return D};function vY1(F){let A=F.ownerDocument();function B(){A.$removeListener("save",B),A.$removeListener("deleteOne",B),F.emit("deleteOne",F),F.constructor.emit("deleteOne",F)}A.$on("save",B),A.$on("deleteOne",B)}});var H8=z((VT1,U_)=>{/*!
 * Module dependencies.
 */var Q_=m("events").EventEmitter,K_=hD(),mY1=B1(),W8=t().documentArrayParent;function f2(F,A,B,D,X){if(mY1.isMongooseDocumentArray(A))this.__parentArray=A,this[W8]=A.$parent();else this.__parentArray=void 0,this[W8]=void 0;this.$setIndex(X),this.$__parent=this[W8];let Z;if(typeof B==="object"&&B!=null)Z={isNew:!0,...B},B=void 0;else Z={isNew:!0};K_.call(this,F,D,this[W8],Z)}/*!
 * Inherit from Subdocument
 */f2.prototype=Object.create(K_.prototype);f2.prototype.constructor=f2;Object.defineProperty(f2.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(f2.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let F in Q_.prototype)f2[F]=Q_.prototype[F];/*!
 * ignore
 */f2.prototype.$setIndex=function(F){if(this.__index=F,this.$__?.validationError!=null){let A=Object.keys(this.$__.validationError.errors);for(let B of A)this.invalidate(B,this.$__.validationError.errors[B])}};/*!
 * ignore
 */f2.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};/*!
 * ignore
 */f2.prototype.$__removeFromParent=function(){let F=this._doc._id;if(!F)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:F})};f2.prototype.$__fullPath=function(F,A){if(this.__index==null)return null;if(!this.$__.fullPath)this.ownerDocument();if(A)return F?this.$__.fullPath+"."+F:this.$__.fullPath;return F?this.$__.fullPath+"."+this.__index+"."+F:this.$__.fullPath+"."+this.__index};f2.prototype.$__pathRelativeToParent=function(F,A){if(this.__index==null||!this.__parentArray?.$path)return null;if(A)return F==null?this.__parentArray.$path():this.__parentArray.$path()+"."+F;if(F==null)return this.__parentArray.$path()+"."+this.__index;return this.__parentArray.$path()+"."+this.__index+"."+F};f2.prototype.$parent=function(){return this[W8]};/*!
 * Sets this sub-documents parent document.
 *
 * @api private
 */f2.prototype.$__setParent=function F(A){this[W8]=A};f2.prototype.parentArray=function(){return this.__parentArray};/*!
 * Module exports.
 */U_.exports=f2});var dD=z((LT1,M_)=>{var pC=H3(),cC=H8(),dY1=K1(),V_=SD(),cY1=C0(),L_=n6().internalToObjectOptions,I_=W6(),i0=B1(),lC=D2(),lY1=t().arrayAtomicsBackupSymbol,s6=t().arrayAtomicsSymbol,O4=t().arrayParentSymbol,S4=t().arrayPathSymbol,y3=t().arraySchemaSymbol,P_=t().populateModelSymbol,pY1=Symbol("mongoose#Array#sliced"),w_=Array.prototype.push;/*!
 * ignore
 */var mD={$__getAtomics(){let F=[],A=Object.keys(this[s6]||{}),B=A.length,D=Object.assign({},L_,{_isNested:!0});if(B===0)return F[0]=["$set",this.toObject(D)],F;while(B--){let X=A[B],Z=this[s6][X];if(i0.isMongooseObject(Z))Z=Z.toObject(D);else if(Array.isArray(Z))Z=this.toObject.call(Z,D);else if(Array.isArray(Z?.$each))Z.$each=this.toObject.call(Z.$each,D);else if(typeof Z?.valueOf==="function")Z=Z.valueOf();if(X==="$addToSet")Z={$each:Z};F.push([X,Z])}return F},getAtomics(){return this.$__getAtomics()},clearAtomics(){this[lY1]=this[s6],this[s6]={}},$atomics(){/*!
   * ignore
   */return this[s6]},$parent(){/*!
   * ignore
   */return this[O4]},$path(){/*!
   * ignore
   */return this[S4]},$schemaType(){/*!
   * ignore
   */return this[y3]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let F=this.__array;if(F._shifted)return;return F._shifted=!0,[].shift.call(F)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),this._popped)return;return this._popped=!0,[].pop.call(this)},$schema(){/*!
   * ignore
   */return this[y3]},_cast(F){let A=!1,B,D=this[O4];if(D)A=D.$populated(this[S4],!0);if(A&&F!=null){if(B=A.options[P_],B==null)throw new dY1("No populated model found for path `"+this[S4]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");if(Buffer.isBuffer(F)||lC(F,"ObjectId")||!i0.isObject(F))F={_id:F};if(F.schema?.discriminatorMapping?.key===void 0)F=new B(F);return this[y3].embeddedSchemaType.applySetters(F,D,!0)}return this[y3].embeddedSchemaType.applySetters(F,D,!1)},_mapCast(F,A){return this._cast(F,this.length+A)},_markModified(F){let A=this[O4],B;if(A){if(B=this[S4],arguments.length)B=B+"."+F;if(B!=null&&B.endsWith(".$"))return this;A.markModified(B,arguments.length!==0?F:A)}return this},_registerAtomic(F,A){if(this[pY1])return;if(F==="$set")return this[s6]={$set:A},V_(this[O4],this[S4]),this._markModified(),this;let B=this[s6];if(F==="$pop"&&!("$pop"in B)){let X=this;this[O4].once("save",function(){X._popped=X._shifted=null})}if(B.$set||i0.hasOwnKeys(B)&&!(F in B))return this[s6]={$set:this},this;let D;if(F==="$pullAll"||F==="$addToSet")B[F]||(B[F]=[]),B[F]=B[F].concat(A);else if(F==="$pullDocs"){let X=B.$pull||(B.$pull={});if(A[0]instanceof cC)D=X.$or||(X.$or=[]),Array.prototype.push.apply(D,A.map((Z)=>{return Z.toObject({transform:(J,Y)=>{if(Z==null||Z.$__==null)return Y;return Object.keys(Z.$__.activePaths.getStatePaths("default")).forEach(($)=>{I_.unset($,Y),N_(Y,$)}),Y},virtuals:!1})}));else D=X._id||(X._id={$in:[]}),D.$in=D.$in.concat(A)}else if(F==="$push")if(B.$push=B.$push||{$each:[]},A!=null&&i0.hasUserDefinedProperty(A,"$each"))B.$push=A;else if(A.length===1)B.$push.$each.push(A[0]);else if(A.length<1e4)B.$push.$each.push(...A);else for(let X of A)B.$push.$each.push(X);else B[F]=A;return this},addToSet(){vD(this,arguments),R_(this,arguments);let F=[].map.call(arguments,this._mapCast,this),A=[],B="";if(F[0]instanceof cC)B="doc";else if(F[0]instanceof Date)B="date";else if(lC(F[0],"ObjectId"))B="ObjectId";let D=i0.isMongooseArray(F)?F.__array:F,X=i0.isMongooseArray(this)?this.__array:this;return D.forEach(function(Z){let J,Y=+Z;switch(B){case"doc":J=this.some(function($){return $.equals(Z)});break;case"date":J=this.some(function($){return+$===Y});break;case"ObjectId":J=this.find(($)=>$.toString()===Z.toString());break;default:J=~this.indexOf(Z);break}if(!J)this._markModified(),X.push(Z),this._registerAtomic("$addToSet",Z),[].push.call(A,Z)},this),A},hasAtomics(){if(!i0.isPOJO(this[s6]))return 0;return Object.keys(this[s6]).length},includes(F,A){return this.indexOf(F,A)!==-1},indexOf(F,A){if(lC(F,"ObjectId"))F=F.toString();A=A==null?0:A;let B=this.length;for(let D=A;D<B;++D)if(F==this[D])return D;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let F=[].map.call(arguments,this._mapCast,this);this._markModified();let A=[].push.apply(this,F);return this._registerAtomic("$set",this),A},pop(){this._markModified();let F=[].pop.call(this);return this._registerAtomic("$set",this),F},pull(){let F=[].map.call(arguments,(X,Z)=>this._cast(X,Z,{defaults:!1}),this),A=this;if(i0.isMongooseArray(A))A=A.__array;let B=A.length,D;this._markModified();while(B--)if(D=A[B],D instanceof pC){if(F.some(function(Z){return D.equals(Z)}))A.splice(B,1)}else if(~this.indexOf.call(F,D))A.splice(B,1);if(F[0]instanceof cC)this._registerAtomic("$pullDocs",F.map(function(X){let Z=X.$__getValue("_id");if(Z===void 0||X.$isDefault("_id"))return X;return Z}));else this._registerAtomic("$pullAll",F);if(V_(this[O4],this[S4])>0)this._registerAtomic("$set",this);return this},push(){let F=arguments,A=F,B=F[0]!=null&&i0.hasUserDefinedProperty(F[0],"$each"),D=i0.isMongooseArray(this)?this.__array:this;if(B)A=F[0],F=F[0].$each;if(this[y3]==null)return w_.apply(this,F);vD(this,F),R_(this,F),F=[].map.call(F,this._mapCast,this);let X,Z=this[s6];if(this._markModified(),B)if(A.$each=F,(Z.$push&&Z.$push.$each&&Z.$push.$each.length||0)!==0&&Z.$push.$position!=A.$position){if(A.$position!=null)[].splice.apply(D,[A.$position,0].concat(F)),X=D.length;else X=[].push.apply(D,F);this._registerAtomic("$set",this)}else if(A.$position!=null)[].splice.apply(D,[A.$position,0].concat(F)),X=this.length;else X=[].push.apply(D,F);else A=F,X=w_.apply(D,F);return this._registerAtomic("$push",A),X},remove(){return this.pull.apply(this,arguments)},set(F,A,B){let D=this.__array;if(B)return D[F]=A,this;let X=mD._cast.call(this,A,F);return mD._markModified.call(this,F),D[F]=X,this},shift(){let F=i0.isMongooseArray(this)?this.__array:this;this._markModified();let A=[].shift.call(F);return this._registerAtomic("$set",this),A},sort(){let F=i0.isMongooseArray(this)?this.__array:this,A=[].sort.apply(F,arguments);return this._registerAtomic("$set",this),A},splice(){let F,A=i0.isMongooseArray(this)?this.__array:this;if(this._markModified(),vD(this,Array.prototype.slice.call(arguments,2)),arguments.length){let B;if(this[y3]==null)B=arguments;else{B=[];for(let D=0;D<arguments.length;++D)B[D]=D<2?arguments[D]:this._cast(arguments[D],arguments[0]+(D-2))}F=[].splice.apply(A,B),this._registerAtomic("$set",this)}return F},toBSON(){/*!
   * ignore
   */return this.toObject(L_)},toObject(F){let A=i0.isMongooseArray(this)?this.__array:this;if(F?.depopulate)return F=cY1(F),F._isNested=!0,[].concat(A).map(function(B){return B instanceof pC?B.toObject(F):B});return[].concat(A)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){vD(this,arguments);let F;if(this[y3]==null)F=arguments;else F=[].map.call(arguments,this._cast,this);let A=i0.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(A,F),this._registerAtomic("$set",this),this.length}};/*!
 * ignore
 */function iY1(F,A){if(!A)return!1;for(let B of F){if(B==null)return!1;let D=B.constructor;if(!(B instanceof pC)||D.modelName!==A&&D.baseModelName!==A)return!1}return!0}/*!
 * Minimize _just_ empty objects along the path chain specified
 * by `parts`, ignoring all other paths. Useful in cases where
 * you want to minimize after unsetting a path.
 *
 * #### Example:
 *
 *     const obj = { foo: { bar: { baz: {} } }, a: {} };
 *     _minimizePath(obj, 'foo.bar.baz');
 *     obj; // { a: {} }
 */function N_(F,A,B){if(typeof A==="string"){if(A.indexOf(".")===-1)return;A=I_.stringToParts(A)}if(B=B||0,B>=A.length)return;if(F==null||typeof F!=="object")return;if(N_(F[A[0]],A,B+1),F[A[0]]!=null&&typeof F[A[0]]==="object"&&i0.hasOwnKeys(F[A[0]])===!1)delete F[A[0]]}/*!
 * ignore
 */function vD(F,A){let B=F==null?null:F[y3]?.embeddedSchemaType?.options?.ref||null;if(F.length===0&&A.length!==0){if(iY1(A,B))F[O4].$populated(F[S4],[],{[P_]:A[0].constructor})}}/*!
 * If `docs` isn't all instances of the right model, depopulate `arr`
 */function R_(F,A){let B=F==null?null:F[y3]?.embeddedSchemaType?.options?.ref||null,D=F[O4],X=F[S4];if(!B||!D.populated(X))return;for(let Z of A){if(Z==null)continue;if(typeof Z!=="object"||Z instanceof String||Z instanceof Number||Z instanceof Buffer||i0.isMongooseType(Z)){D.depopulate(X);break}}}var nY1=["filter","flat","flatMap","map","slice"];for(let F of nY1){if(Array.prototype[F]==null)continue;mD[F]=function(){let A=i0.isMongooseArray(this)?this.__array:this,B=[].concat(A);return B[F].apply(B,arguments)}}M_.exports=mD});var nC=z((O_,S_)=>{/*!
 * Module dependencies.
 */var iC=dD(),cD=t().arrayAtomicsSymbol,aY1=t().arrayAtomicsBackupSymbol,j_=t().arrayParentSymbol,sY1=t().arrayPathSymbol,T_=t().arraySchemaSymbol,k_=Array.prototype.push,u_=/^\d+$/;function rY1(F,A,B,D){let X;if(Array.isArray(F)){let Y=F.length;if(Y===0)X=new Array;else if(Y===1)X=new Array(1),X[0]=F[0];else if(Y<1e4)X=new Array,k_.apply(X,F);else{X=new Array;for(let $=0;$<Y;++$)k_.call(X,F[$])}}else X=[];let Z={[cD]:{},[aY1]:void 0,[sY1]:A,[T_]:D,[j_]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:X};if(F&&F[cD]!=null)Z[cD]=F[cD];if(B?.$__)Z[j_]=B,Z[T_]=D||B.schema.path(A);let J=new Proxy(X,{get:function(Y,$){if(Object.hasOwn(Z,$))return Z[$];if(Object.hasOwn(iC,$))return iC[$];if(D?.virtuals&&Object.hasOwn(D.virtuals,$))return D.virtuals[$].applyGetters(void 0,Y);if(typeof $==="string"&&u_.test($)&&D?.embeddedSchemaType!=null)return D.embeddedSchemaType.applyGetters(X[$],B);return X[$]},set:function(Y,$,G){if(typeof $==="string"&&u_.test($))iC.set.call(J,$,G,!1);else if(Object.hasOwn(Z,$))Z[$]=G;else if(D?.virtuals&&Object.hasOwn(D.virtuals,$))D.virtuals[$].applySetters(G,Y);else X[$]=G;return!0}});return J}/*!
 * Module exports.
 */S_.exports=O_=rY1});var g_=z((wT1,f_)=>{var lD=dD(),tY1=H3(),x_=j6(),oY1=n6().internalToObjectOptions,k9=B1(),eY1=D2(),iD=t().arrayParentSymbol,aC=t().arrayPathSymbol,IF=t().arraySchemaSymbol,__=t().documentArrayParent,F$1=Array.prototype.toString,sC={toBSON(){/*!
   * ignore
   */return this.toObject(oY1)},toString(){return F$1.call(this.__array.map((F)=>{if(F?.$__!=null)return F.toString();return F}))},getArrayParent(){/*!
   * ignore
   */return this[iD]},$schemaType(){/*!
   * ignore
   */return this[IF]},_cast(F,A,B){if(this[IF]==null)return F;let D=this[IF].Constructor;if((D.$isMongooseDocumentArray?k9.isMongooseDocumentArray(F):F instanceof D)||F?.constructor?.baseCasterConstructor===D){if(!(F[__]&&F.__parentArray))F[__]=this[iD],F.__parentArray=this;return F.$setIndex(A),F}if(F==null)return null;if(Buffer.isBuffer(F)||eY1(F,"ObjectId")||!k9.isObject(F))F={_id:F};if(F&&D.discriminators&&D.schema&&D.schema.options&&D.schema.options.discriminatorKey)if(typeof F[D.schema.options.discriminatorKey]==="string"&&D.discriminators[F[D.schema.options.discriminatorKey]])D=D.discriminators[F[D.schema.options.discriminatorKey]];else{let J=x_(D.discriminators,F[D.schema.options.discriminatorKey]);if(J)D=J}if(D.$isMongooseDocumentArray)return D.cast(F,this,void 0,void 0,A);let Z=new D(F,this,B,void 0,A);return Z.isNew=!0,Z},id(F){if(F==null)return null;let A=this[IF],B=null;if(A?.schema)B=A.schema.path("_id");else if(A?.casterConstructor?.schema)B=A.casterConstructor.schema.path("_id");let D=null;if(B)try{D=B.cast(F)}catch{}let X;for(let Z of this){if(!Z)continue;if(X=Z.get("_id"),X==null)continue;else if(X instanceof tY1){if(X=X.get("_id"),D!=null&&k9.deepEqual(D,X))return Z;else if(D==null&&(F==X||k9.deepEqual(F,X)))return Z}else if(D!=null&&k9.deepEqual(D,X))return Z;else if(D==null&&(X==F||k9.deepEqual(F,X)))return Z}return null},toObject(F){return[].concat(this.map(function(A){if(A==null)return null;if(typeof A.toObject!=="function")return A;return A.toObject(F)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let F=lD.push.apply(this,arguments);return pD(this),F},pull(){let F=lD.pull.apply(this,arguments);return pD(this),F},shift(){let F=lD.shift.apply(this,arguments);return pD(this),F},splice(){let F=lD.splice.apply(this,arguments);return pD(this),F},inspect(){return this.toObject()},create(F){let A=this[IF].Constructor;if(F&&A.discriminators&&A.schema&&A.schema.options&&A.schema.options.discriminatorKey)if(typeof F[A.schema.options.discriminatorKey]==="string"&&A.discriminators[F[A.schema.options.discriminatorKey]])A=A.discriminators[F[A.schema.options.discriminatorKey]];else{let B=x_(A.discriminators,F[A.schema.options.discriminatorKey]);if(B)A=B}return new A(F,this)},notify(F){/*!
   * ignore
   */let A=this;return function B(D,X){X=X||A;let Z=X.length;while(Z--){if(X[Z]==null)continue;switch(F){case"save":D=A[Z];break;default:break}if(k9.isMongooseArray(X[Z]))B(D,X[Z]);else if(X[Z])X[Z].emit(F,D)}}},set(F,A,B){let D=this.__array;if(B)return D[F]=A,this;let X=sC._cast.call(this,A,F);return sC._markModified.call(this,F),D[F]=X,this},_markModified(F,A){let B=this[iD],D;if(B){if(D=this[aC],arguments.length)if(A!=null){let X=F.__index;D=D+"."+X+"."+A}else D=D+"."+F;if(D!=null&&D.endsWith(".$"))return this;B.markModified(D,arguments.length!==0?F:B)}return this}};f_.exports=sC;function pD(F){let A=F[iD];if(!A||A.$__.populated==null)return;let B=Object.keys(A.$__.populated).filter((D)=>D.startsWith(F[aC]+"."));for(let D of B){let X=D.slice((F[aC]+".").length);if(!Array.isArray(A.$__.populated[D].value))continue;A.$__.populated[D].value=F.map((Z)=>Z.$populated(X))}}});var O9=z((RT1,y_)=>{/*!
 * Module dependencies.
 */var b_=dD(),rC=g_(),tC=t().arrayAtomicsSymbol,A$1=t().arrayAtomicsBackupSymbol,oC=t().arrayParentSymbol,eC=t().arrayPathSymbol,u9=t().arraySchemaSymbol,B$1=Array.prototype.push,D$1=/^\d+$/;function X$1(F,A,B,D){let X=[],Z={[tC]:{},[A$1]:void 0,[eC]:A,[u9]:void 0,[oC]:void 0};if(Array.isArray(F)){if(F[eC]===A&&F[oC]===B)Z[tC]=Object.assign({},F[tC]);F.forEach((Y)=>{B$1.call(X,Y)})}if(Z[eC]=A,Z.__array=X,B?.$__){Z[oC]=B,Z[u9]=B.$__schema.path(A);while(Z[u9]!=null&&Z[u9].$isMongooseArray&&!Z[u9].$isMongooseDocumentArray)Z[u9]=Z[u9].embeddedSchemaType}let J=new Proxy(X,{get:function(Y,$){if($==="isMongooseArray"||$==="isMongooseArrayProxy"||$==="isMongooseDocumentArray"||$==="isMongooseDocumentArrayProxy")return!0;if(Object.hasOwn(Z,$))return Z[$];if(Object.hasOwn(rC,$))return rC[$];if(D?.virtuals&&Object.hasOwn(D.virtuals,$))return D.virtuals[$].applyGetters(void 0,Y);if(Object.hasOwn(b_,$))return b_[$];return X[$]},set:function(Y,$,G){if(typeof $==="string"&&D$1.test($))rC.set.call(J,$,G,!1);else if(Object.hasOwn(Z,$))Z[$]=G;else if(D?.virtuals&&Object.hasOwn(D.virtuals,$))D.virtuals[$].applySetters(G,Y);else X[$]=G;return!0}});return J}/*!
 * Module exports.
 */y_.exports=X$1});var H3=z((Bf,Df)=>{/*!
 * Module dependencies.
 */var Z$1=IC(),AW=m("events").EventEmitter,J$1=Ex(),Y$1=jD(),p2=E6(),h_=$8(),$$1=Kx(),i_=kD(),ZW=uD(),G$1=wx(),E$1=S9(),BW=u4(),tD=M9(),n_=EC(),a_=_C(),DW=OD(),nD=SD(),r6=C0(),C$1=_D().compile,W$1=_D().defineKey,H$1=xx(),q$1=fD().flatten,FW=lx(),v_=ix(),z$1=ax(),Q$1=bD(),m_=D2(),s_=E8(),K$1=C8(),d_=yC(),XW=m("util").inspect,r_=n6().internalToObjectOptions,U$1=hC(),V$1=vC(),L$1=W6(),JW=mC(),w$1=RF(),Z1=B1(),R$1=dC(),sD=Z1.deepEqual,I$1=Z1.isMongooseObject,NF=t().arrayAtomicsBackupSymbol,i2=t().arrayAtomicsSymbol,P$1=t().documentArrayParent,N$1=t().documentIsModified,t_=t().documentModifiedPaths,M$1=t().documentSchemaSymbol,j$1=t().getSymbol,T$1=t().modelSymbol,c_=t().populateModelSymbol,k$1=t().scopeSymbol,u$1=T9().schemaMixedSymbol,O$1=W_(),aD=t().sessionNewDocuments,rD,l_,PF,o_=Z1.specialProperties;function g(F,A,B){if(typeof B==="boolean")throw new Error("The skipId parameter has been removed. Use { skipId: true } in the options parameter instead.");B=Object.assign({},B);let D=B.skipId;if(this.$__=new J$1,this.$__schema==null){let G=Z1.isObject(A)&&!A.instanceOfSchema?new E$1(A):A;this.$__setSchema(G),A=B,D=B.skipId}if(B.isNew!=null&&B.isNew!==!0)this.$isNew=B.isNew;if(B.priorDoc!=null)this.$__.priorDoc=B.priorDoc;if(D)this.$__.skipId=D;if(F!=null&&typeof F!=="object")throw new ZW(F,"obj","Document");let X=!0;if(B.defaults!==void 0)this.$__.defaults=B.defaults,X=B.defaults;let Z=this.$__schema;if(typeof A==="boolean"||A==="throw"){if(A!==!0)this.$__.strictMode=A;A=void 0}else if(Z.options.strict!==!0)this.$__.strictMode=Z.options.strict;let J=Z.requiredPaths(!0);for(let G of J)this.$__.activePaths.require(G);let Y=null;if(Z1.isPOJO(A)&&Z1.hasOwnKeys(A))Y=K$1(A),this.$__.selected=A,this.$__.exclude=Y;let $=Y===!1&&A?a_(A):null;if(this._doc==null){if(this.$__buildDoc(F,A,D,Y,$,!1),X)DW(this,A,Y,$,!0,null,{skipParentChangeTracking:!0})}if(F){if(this.$__original_set)this.$__original_set(F,void 0,!0,B);else this.$set(F,void 0,!0,B);if(F instanceof g)this.$isNew=F.$isNew}if(B.willInit&&X){if(B.skipDefaults)this.$__.skipDefaults=B.skipDefaults}else if(X)DW(this,A,Y,$,!1,B.skipDefaults);if(!this.$__.strictMode&&F){let G=this;Object.keys(this._doc).forEach(function(C){if(!(C in Z.tree)&&!(C in Z.methods)&&!(C in Z.virtuals)&&!C.startsWith("$"))W$1({prop:C,subprops:null,prototype:G})})}v$1(this)}g.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(g.prototype,"isNew",{get:function(){return this.$isNew},set:function(F){this.$isNew=F}});Object.defineProperty(g.prototype,"errors",{get:function(){return this.$errors},set:function(F){this.$errors=F}});/*!
 * ignore
 */g.prototype.$isNew=!0;/*!
 * Document exposes the NodeJS event emitter API, so you can use
 * `on`, `once`, etc.
 */Z1.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(F){g.prototype[F]=function(){if(!this.$__.emitter){if(F==="emit")return;this.$__.emitter=new AW,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[F].apply(this.$__.emitter,arguments)},g.prototype[`$${F}`]=g.prototype[F]});g.prototype.constructor=g;for(let F in AW.prototype)g[F]=AW.prototype[F];g.prototype.$__schema;g.prototype.schema;Object.defineProperty(g.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){if(this.$__.locals==null)this.$__.locals={};return this.$__.locals},set:function(F){this.$__.locals=F}});g.prototype.isNew;Object.defineProperty(g.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});g.prototype.id;g.prototype.$errors;Object.defineProperty(g.prototype,"$op",{get:function(){return this.$__.op||null},set:function(F){this.$__.op=F}});/*!
 * ignore
 */function S$1(F,A,B){if(F==null)return;let D=Object.keys(B.$__schema.paths),X=D.length,Z=A.indexOf(".")===-1?[A]:A.split(".");for(let J=0;J<X;++J){let Y="",$=D[J];if(!$.startsWith(A+"."))continue;let G=B.$__schema.paths[$],E=G.splitPath().slice(Z.length),C=E.length;if(G.defaultValue===void 0)continue;let W=F;for(let H=0;H<C;++H){if(W==null)break;let q=E[H];if(H===C-1){if(W[q]!==void 0)break;try{let Q=G.getDefault(B,!1);if(Q!==void 0)W[q]=Q}catch(Q){B.invalidate(A+"."+Y,Q);break}break}Y+=(!Y.length?"":".")+q,W[q]=W[q]||{},W=W[q]}}}g.prototype.$__buildDoc=function(F,A,B,D,X){let Z={},J=Object.keys(this.$__schema.paths).filter((G)=>!G.includes("$*")),Y=J.length,$=0;for(;$<Y;++$){let G=J[$];if(G==="_id"){if(B)continue;if(F&&"_id"in F)continue}let E=this.$__schema.paths[G].splitPath(),C=E.length,W=C-1,H="",q=Z,Q=!1;for(let K=0;K<C;++K){let U=E[K];if(!H.length)H=U;else H+="."+U;if(D===!0){if(H in A)break}else if(D===!1&&A&&!Q){if(H in A)Q=!0;else if(!X[H])break}if(K<W)q=q[U]||(q[U]={})}}this._doc=Z};/*!
 * Converts to POJO when you use the document for querying
 */g.prototype.toBSON=function(){return this.toObject(r_)};g.prototype.init=function(F,A,B){if(typeof A==="function")B=A,A=null;if(F==null)throw new ZW(F,"doc","init");if(this.$__init(F,A),B)B(null,this);return this};g.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};g.prototype.$__init=function(F,A){if(F==null)throw new ZW(F,"doc","init");if(this.$isNew=!1,A=A||{},F._id!=null&&A.populated&&A.populated.length){let D=String(F._id);for(let X of A.populated){if(X.isVirtual)this.$populated(X.path,Z1.getValue(X.path,F),X);else this.$populated(X.path,X._docs[D],X);if(X._childDocs==null)continue;for(let Z of X._childDocs){if(Z?.$__==null)continue;Z.$__.parent=this}X._childDocs=[]}}e_(this,F,this._doc,A),U$1(this,A.populated),this.$emit("init",this),this.constructor.emit("init",this);let B=this.$__.exclude===!1&&this.$__.selected?a_(this.$__.selected):null;return DW(this,this.$__.selected,this.$__.exclude,B,!1,this.$__.skipDefaults),this};function e_(F,A,B,D,X){if(X=X||"",typeof A!=="object"||Array.isArray(A))throw new i_(F.$basePath,A);if(A.$__!=null)A=A._doc;let Z=Object.keys(A),J=Z.length,Y,$,G,E=F.$__.strictMode,C=F.$__schema;for(let W=0;W<J;++W){if(G=Z[W],o_.has(G))continue;if($=X?X+G:G,Y=C.path($),C.$isRootDiscriminator&&!F.$__isSelected($))continue;let H=A[G];if(!Y&&Z1.isPOJO(H)){if(!B[G]){if(B[G]={},!E&&!(G in C.tree)&&!(G in C.methods)&&!(G in C.virtuals))F[G]=B[G];else if(D?.virtuals&&G in C.virtuals)F[G]=B[G]}e_(F,H,B[G],D,$+".")}else if(!Y){if(B[G]=H,!E&&!X)F[G]=H;else if(D?.virtuals&&G in C.virtuals)F[G]=H}else{if(Object.hasOwn(B,G)&&H!==void 0&&!D.hydratedPopulatedDocs)delete B[G];if(H===null)B[G]=Y._castNullish(null);else if(H!==void 0){let q=H.$__==null?null:H.$__.wasPopulated;if(Y&&!q&&!D.hydratedPopulatedDocs)try{if(D?.setters)B[G]=Y.applySetters(H,F,!1,null,D);else B[G]=Y.cast(H,F,!0,void 0,D)}catch(Q){F.invalidate(Q.path,new n_({path:Q.path,message:Q.message,type:"cast",value:Q.value,reason:Q}))}else if(Y&&D.hydratedPopulatedDocs){if(B[G]=Y.cast(H,F,!0,void 0,{hydratedPopulatedDocs:!0}),B[G]?.$__?.wasPopulated)F.$populated($,B[G].$__.wasPopulated.value,B[G].$__.wasPopulated.options);else if(Array.isArray(B[G])&&B[G].length&&B[G][0]?.$__?.wasPopulated)F.$populated($,B[G].map((Q)=>Q?.$__?.wasPopulated?.value).filter((Q)=>Q!=null),B[G][0].$__.wasPopulated.options)}else B[G]=H}if(!F.$isModified($))F.$__.activePaths.init($)}}}g.prototype.updateOne=function F(A,B){let D=this.constructor.updateOne(),X=this;return D.pre(async function Z(){let J=await X._execDocumentPreHooks("updateOne",X,A,B);if(J[0]!==X||J[1]!==A||J[2]!==B)throw new Error("Document updateOne pre hooks cannot overwrite arguments");if(D.updateOne({_id:X._doc._id},A,B),X.$where!=null)this.where(X.$where);if(X.$session()!=null){if(!("session"in D.options))D.options.session=X.$session()}return J}),D.post(function Z(){return X._execDocumentPostHooks("updateOne")}),D};g.prototype.replaceOne=function F(){let A=[...arguments];return A.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,A)};g.prototype.$session=function F(A){if(arguments.length===0){if(this.$__.session?.hasEnded)return this.$__.session=null,null;return this.$__.session}if(A?.hasEnded)throw new p2("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(A==null&&this.$__.session==null)return;if(this.$__.session=A,!this.$isSubdocument){let B=this.$getAllSubdocs();for(let D of B)D.$session(A)}return A};g.prototype.$timestamps=function F(A){if(arguments.length===0){if(this.$__.timestamps!=null)return this.$__.timestamps;if(this.$__schema)return this.$__schema.options.timestamps;return}let B=this.$timestamps();if(A!==B)this.$__.timestamps=A;return this};g.prototype.overwrite=function F(A){let B=new Set(Object.keys(this._doc));for(let X of Object.keys(A))B.add(X);let D=this.$__schema.options;for(let X of B){if(X==="_id")continue;if(D.versionKey&&X===D.versionKey)continue;if(D.discriminatorKey&&X===D.discriminatorKey)continue;this.$set(X,A[X])}return this};g.prototype.$set=function F(A,B,D,X){if(Z1.isPOJO(D))X=D,D=void 0;let Z=X?.merge,J=D&&D!==!0,Y=D===!0,$,G,E=0,C,W,H,q=X&&"strict"in X,Q=q?X.strict:this.$__.strictMode;if(J)$=this.$__.adhocPaths||(this.$__.adhocPaths={}),$[A]=this.$__schema.interpretAsType(A,D,this.$__schema.options);if(A==null)[A,B]=[B,A];else if(typeof A!=="string"){if(A instanceof g)if(A.$__isNested)A=A.toObject();else A=A.$__schema===this.$__schema?YW(A,{...A._doc}):A._doc;if(A==null)[A,B]=[B,A];H=B?B+".":"",G=v_(this.$__schema,A);let u=G.length,O=X?._skipMinimizeTopLevel||!1;if(u===0&&O){if(delete X._skipMinimizeTopLevel,B)this.$set(B,{});return this}X=Object.assign({},X,{_skipMinimizeTopLevel:!1});for(let h=0;h<u;++h){W=G[h];let o=H?H+W:W;C=this.$__schema.pathType(o);let A1=A[W];if(D===!0&&!H&&A1!=null&&C==="nested"&&this._doc[W]!=null)delete this._doc[W];if(Z1.isNonBuiltinObject(A1)&&C==="nested"){this.$set(o,A1,Y,X),S$1(this.$get(o),o,this);continue}else if(Q){if(Y&&A1===void 0&&this.$get(o)!==void 0)continue;if(C==="adhocOrUndefined")C=FW(this,o,{typeOnly:!0});if(C==="real"||C==="virtual")this.$set(o,A1,Y,X);else if(C==="nested"&&A1 instanceof g)this.$set(o,A1.toObject({transform:!1}),Y,X);else if(Q==="throw")if(C==="nested")throw new i_(W,A1);else throw new BW(W);else if(C==="nested"&&A1==null)this.$set(o,A1,Y,X)}else this.$set(o,A1,Y,X)}let k={},d=Object.keys(this.$__schema.tree);for(let h=0,o=d.length;h<o;++h)(W=d[h])&&Object.hasOwn(this._doc,W)&&(k[W]=void 0);return this._doc=Object.assign(k,this._doc),this}let K=this.$__schema.pathType(A),U=null;if(K==="adhocOrUndefined")U=A.indexOf(".")===-1?[A]:A.split("."),K=FW(this,U,{typeOnly:!0});if(K==="adhocOrUndefined"&&!q){if(U==null)U=A.indexOf(".")===-1?[A]:A.split(".");let u=z$1(this.$__schema,U);if(u!==void 0)Q=u}B=Q$1(B,!0);let R=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(A);if(Y)return;return this.$__getValue(A)})();if(K==="nested"&&B){if(typeof B==="object"&&B!=null){if(B.$__!=null)B=B.toObject(r_);if(B==null)return this.invalidate(A,new p2.CastError("Object",B,A)),this;let u=this.$isModified(A),O=this.$__.savedState!=null&&Object.hasOwn(this.$__.savedState,A);if(this.$__.savedState!=null&&!this.$isNew&&!Object.hasOwn(this.$__.savedState,A)){let d=this.$__getValue(A);this.$__.savedState[A]=d;let h=Object.keys(d||{});for(let o of h)this.$__.savedState[A+"."+o]=d[o]}if(!Z)this.$__setValue(A,null),nD(this,A);else return this.$set(B,A,Y,X);let k=v_(this.$__schema,B,A);this.$__setValue(A,{});for(let d of k)this.$set(A+"."+d,B[d],Y,{...X,_skipMarkModified:!0});if(R!=null&&(!u||O)&&Z1.deepEqual(O?this.$__.savedState[A]:R,B))this.unmarkModified(A);else this.markModified(A);return this}return this.invalidate(A,new p2.CastError("Object",B,A)),this}let w;if(U==null)U=A.indexOf(".")===-1?[A]:A.split(".");if(typeof this.$__schema.aliases[U[0]]==="string")U[0]=this.$__schema.aliases[U[0]];if(K==="adhocOrUndefined"&&Q){let u;for(E=0;E<U.length;++E){let O=U.slice(0,E+1).join(".");if(E+1<U.length&&this.$__schema.pathType(O)==="virtual")return L$1.set(A,B,this),this;if(w=this.$__schema.path(O),w==null)continue;if(w instanceof h_){u=!0;break}else if(w.$isSchemaMap&&w.$__schemaType instanceof h_&&E<U.length-1){u=!0,w=w.$__schemaType;break}}if(w==null)w=FW(this,A);if(!u&&!w){if(Q==="throw")throw new BW(A);return this}}else if(K==="virtual")return w=this.$__schema.virtualpath(A),w.applySetters(B,this),this;else w=this.$__path(A);let V=this._doc,N="";for(E=0;E<U.length-1;++E)if(V=V instanceof Map?V.get(U[E]):V[U[E]],N+=(N.length!==0?".":"")+U[E],!V){if(this.$set(N,{}),!this.$__isSelected(N))this.unmarkModified(N);V=this.$__getValue(N)}let T;if(U.length<=1)T=A;else{let u=U.length;for(E=0;E<u;++E){let O=U.slice(0,E+1).join(".");if(this.$get(O,null,{getters:!1})===null){T=O;break}}if(!T)T=A}if(!w){if(this.$__set(T,A,X,Y,U,w,B,R),K==="nested"&&B==null)nD(this,A);return this}if(w.$isSingleNested||w.$isMongooseArray)y$1(this,A);if(B!=null&&Z&&w.$isSingleNested){if(B instanceof g)B=B.toObject({virtuals:!1,transform:!1});let u=Object.keys(B);for(let O of u)this.$set(A+"."+O,B[O],Y,X);return this}let P=!0;try{let u=(()=>{if(w.options==null)return!1;if(!(B instanceof g))return!1;let h=B.constructor,o=typeof w.options.ref==="function"&&!w.options.ref[T$1]?w.options.ref.call(this,this):w.options.ref,A1=o?.modelName||o;if(A1!=null&&(A1===h.modelName||A1===h.baseModelName))return!0;let R2=w.options.refPath;if(R2==null)return!1;let Y2=B.get(R2);return Y2===h.modelName||Y2===h.baseModelName})(),O=!1;if(u&&B instanceof g&&(!B.$__.wasPopulated||Z1.deepEqual(B.$__.wasPopulated.value,B._doc._id))){let h=w?.$isSingleNested?w.cast(B,this):B._doc._id;this.$populated(A,h,{[c_]:B.constructor}),B.$__.wasPopulated={value:h},O=!0}let k,d=this.$__schema.options.typeKey;if(w.options&&Array.isArray(w.options[d])&&w.options[d].length&&w.options[d][0]&&w.options[d][0].ref&&x$1(B,w.options[d][0].ref)){k={[c_]:B[0].constructor},this.$populated(A,B.map(function(h){return h._doc._id}),k);for(let h of B)h.$__.wasPopulated={value:h._doc._id};O=!0}if(!u||!w.$isSingleNested||!B.$__){let h=this;if(this.$__schema.singleNestedPaths[A]!=null&&U.length>1)h=O$1(this,U,this.schema);if(X?.overwriteImmutable)B=w.applySetters(B,h,!1,R,{path:A,overwriteImmutable:!0});else B=w.applySetters(B,h,!1,R,{path:A})}if(Array.isArray(B)&&!Array.isArray(w)&&w.$isMongooseDocumentArray&&B.length!==0&&B[0]?.$__?.populated!=null){let h=Object.keys(B[0].$__.populated);for(let o of h)this.$populated(A+"."+o,B.map((A1)=>A1.$populated(o)),B[0].$__.populated[o].options);O=!0}if(!O&&this.$__.populated){if(Array.isArray(B)&&this.$__.populated[A]){for(let h=0;h<B.length;++h)if(B[h]instanceof g)B.set(h,B[h]._doc._id,!0)}delete this.$__.populated[A]}if(B!=null&&w.$isSingleNested)h$1(B,w,R);this.$markValid(A)}catch(u){if(u instanceof p2.StrictModeError&&u.isImmutableError)this.invalidate(A,u);else if(u instanceof p2.CastError){if(this.invalidate(u.path,u),u.$originalErrorPath)this.invalidate(A,new p2.CastError(w.instance,B,A,u.$originalErrorPath))}else this.invalidate(A,new p2.CastError(w.instance,B,A,u));P=!1}if(P){let u=null,O=null;if(!Y){let h=this.$isSubdocument?this.ownerDocument():this;u=h.$__.savedState,O=this.$isSubdocument?this.$__.fullPath+"."+A:A,h.$__saveInitialState(O)}this.$__set(T,A,X,Y,U,w,B,R);let k=!!this.$__.session?.transaction,d=this.$__.session&&this.$__.session[aD]&&this.$__.session[aD].has(this)&&this.$__.session[aD].get(this).modifiedPaths&&!this.$__.session[aD].get(this).modifiedPaths.has(O);if(u!=null&&Object.hasOwn(u,O)&&(!k||d)&&Z1.deepEqual(B,u[O]))this.unmarkModified(A)}if(w.$isSingleNested&&(this.isDirectModified(A)||B==null))nD(this,A);else if(w.$isSchemaMap&&B==null)nD(this,A);return this};/*!
 * ignore
 */function x$1(F,A){if(!Array.isArray(F))return!1;if(F.length===0)return!1;for(let B of F){if(!(B instanceof g))return!1;if(B.constructor.modelName==null)return!1;if(B.constructor.modelName!=A&&B.constructor.baseModelName!=A)return!1}return!0}g.prototype.set=g.prototype.$set;g.prototype.$__shouldModify=function(F,A,B,D,X,Z,J,Y){if(B?._skipMarkModified)return!1;if(this.$isNew)return!0;if(A in this.$__.activePaths.getStatePaths("modify"))return!0;if(J===void 0&&!this.$__isSelected(A))return!0;if(J===void 0&&A in this.$__.activePaths.getStatePaths("default"))return!1;if(this.$populated(A)&&J instanceof g&&sD(J._doc._id,Y))return!1;if(!sD(J,Y!==void 0?Y:Z1.getValue(A,this)))return!0;if(!D&&J!==null&&J!==void 0&&A in this.$__.activePaths.getStatePaths("default")&&sD(J,Z.getDefault(this,D)))return!0;return!1};g.prototype.$__set=function(F,A,B,D,X,Z,J,Y){PF=PF||H8();let $=this.$__shouldModify(F,A,B,D,X,Z,J,Y);if($){if(this.$__.primitiveAtomics?.[A]){if(delete this.$__.primitiveAtomics[A],Z1.hasOwnKeys(this.$__.primitiveAtomics)===!1)delete this.$__.primitiveAtomics}if(this.markModified(F),l_||(l_=nC()),J&&Z1.isMongooseArray(J)){if(J._registerAtomic("$set",J),Z1.isMongooseDocumentArray(J))J.forEach(function(H){H&&H.__parentArray&&(H.__parentArray=J)})}}else if(Array.isArray(J)&&Array.isArray(Y)&&Z1.isMongooseArray(J)&&Z1.isMongooseArray(Y)){if(J[i2]=Y[i2],J[NF]=Y[NF],Z1.isMongooseDocumentArray(J))J.forEach((H)=>{if(H!=null)H.$isNew=!1})}let G=this._doc,E=0,C=X.length,W="";for(;E<C;E++){let q=E+1===C;if(W+=W?"."+X[E]:X[E],o_.has(X[E]))continue;if(q)if(G instanceof Map)G.set(X[E],J);else if(G.$isSingleNested){if(!(X[E]in G))G[X[E]]=J,G._doc[X[E]]=J;else G._doc[X[E]]=J;if($)G.markModified(X[E])}else G[X[E]]=J;else{let Q=G instanceof Map,K=Q?G.get(X[E]):G[X[E]];if(Z1.isPOJO(K))G=K;else if(K&&K instanceof PF)G=K;else if(K&&!Array.isArray(K)&&K.$isSingleNested)G=K;else if(K&&Array.isArray(K))G=K;else if(K==null){if(K={},Q)G.set(X[E],K);else G[X[E]]=K;G=K}else G=K}}};g.prototype.$__getValue=function(F){if(typeof F!=="string"&&!Array.isArray(F))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${F}" (type ${typeof F})`);return Z1.getValue(F,this._doc)};g.prototype.$inc=function F(A,B){if(B==null)B=1;if(Array.isArray(A))return A.forEach(($)=>this.$inc($,B)),this;let D=this.$__path(A);if(D==null){if(this.$__.strictMode==="throw")throw new BW(A);else if(this.$__.strictMode===!0)return this}else if(D.instance!=="Number")return this.invalidate(A,new p2.CastError(D.instance,B,A)),this;let X=this.$__getValue(A)||0,Z=!1,J=null,Y=B;try{B=D.cast(B),J=D.applySetters(X+B,this),Y=J-X,Z=!0}catch($){this.invalidate(A,new p2.CastError("number",B,A,$))}if(Z){if(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[A]==null)this.$__.primitiveAtomics[A]={$inc:Y};else this.$__.primitiveAtomics[A].$inc+=Y;this.markModified(A),this.$__setValue(A,J)}return this};g.prototype.$__setValue=function(F,A){return Z1.setValue(F,A,this._doc),this};g.prototype.get=function(F,A,B){let D;if(B==null)B={};if(A)D=this.$__schema.interpretAsType(F,A,this.$__schema.options);let X=B.noDottedPath,Z=X?this.$__schema.paths[F]:this.$__path(F);if(Z==null){if(Z=this.$__schema.virtualpath(F),Z!=null)return Z.applyGetters(void 0,this)}if(X){let G=this._doc[F];if(D)G=D.cast(G);if(Z!=null&&B.getters!==!1)return Z.applyGetters(G,this);return G}if(Z?.instance==="Mixed"){let G=this.$__schema.virtualpath(F);if(G!=null)Z=G}let J=F.indexOf(".")!==-1,Y=this._doc,$=J?F.split("."):[F];if(typeof this.$__schema.aliases[$[0]]==="string")$[0]=this.$__schema.aliases[$[0]];for(let G=0,E=$.length;G<E;G++){if(Y?._doc)Y=Y._doc;if(Y==null)Y=void 0;else if(Y instanceof Map)Y=Y.get($[G],{getters:!1});else if(G===E-1)Y=Z1.getValue($[G],Y);else Y=Y[$[G]]}if(D)Y=D.cast(Y);if(Z!=null&&B.getters!==!1)Y=Z.applyGetters(Y,this);else if(this.$__schema.nested[F]&&B.virtuals)return YW(this,r6(Y)||{},{path:F});return Y};/*!
 * ignore
 */g.prototype[j$1]=g.prototype.get;g.prototype.$get=g.prototype.get;g.prototype.$__path=function(F){let A=this.$__.adhocPaths,B=A&&Object.hasOwn(A,F)?A[F]:null;if(B)return B;return this.$__schema.path(F)};g.prototype.markModified=function(F,A){if(this.$__saveInitialState(F),this.$__.activePaths.modify(F),A!=null&&!this.$isSubdocument)this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[F]=A};/*!
 * ignore
 */g.prototype.$__saveInitialState=function F(A){let B=this.$__.savedState,D=A;if(B!=null){let X=D.indexOf("."),Z=X===-1?D:D.slice(0,X);if(!Object.hasOwn(B,Z))B[Z]=r6(this.$__getValue(Z))}};g.prototype.unmarkModified=function(F){if(this.$__.activePaths.init(F),this.$__.pathsToScopes!=null)delete this.$__.pathsToScopes[F]};g.prototype.$ignore=function(F){this.$__.activePaths.ignore(F)};g.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};g.prototype.$isEmpty=function(F){let A={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let B=this.$get(F);if(B==null)return!0;if(typeof B!=="object")return!1;if(Z1.isPOJO(B))return Ff(B);return Object.keys(B.toObject(A)).length===0}return Object.keys(this.toObject(A)).length===0};/*!
 * ignore
 */function Ff(F){if(F==null)return!0;if(typeof F!=="object"||Array.isArray(F))return!1;for(let A of Object.keys(F))if(!Ff(F[A]))return!1;return!0}g.prototype.modifiedPaths=function(F){F=F||{};let A=Object.keys(this.$__.activePaths.getStatePaths("modify")),B=new Set,D=0,X=0,Z=A.length;for(D=0;D<Z;++D){let J=A[D],Y=JW(J),$=Y.length;for(X=0;X<$;++X)B.add(Y[X]);if(!F.includeChildren)continue;let G=0,E=this.$get(J);if(typeof E==="object"&&E!==null){if(E._doc)E=E._doc;let C=E.length;if(Array.isArray(E))for(G=0;G<C;++G){let W=J+"."+G;if(!B.has(W)){if(B.add(W),E[G]!=null&&E[G].$__){let H=E[G].modifiedPaths(),q=0,Q=H.length;for(q=0;q<Q;++q)B.add(W+"."+H[q])}}}else{let W=Object.keys(E),H=0,q=W.length;for(H=0;H<q;++H)B.add(J+"."+W[H])}}}return Array.from(B)};g.prototype[t_]=g.prototype.modifiedPaths;g.prototype.isModified=function(F,A,B){if(F){let D=A?.ignoreAtomics,X=this.$__.activePaths.states.modify;if(X==null)return!1;if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");for(let $ of F)if(X[$]!=null)return!0;let Z=B||this[t_](),J=F.some(function($){return!!~Z.indexOf($)}),Y=Object.keys(X);if(D)Y=Y.filter(($)=>{let G=this.$__getValue($);if(G?.[i2]!=null&&G[i2].$set===void 0)return!1;return!0});return J||F.some(function($){return Y.some(function(G){return G===$||$.startsWith(G+".")})})}return this.$__.activePaths.some("modify")};g.prototype.$isModified=g.prototype.isModified;g.prototype[N$1]=g.prototype.isModified;g.prototype.$isDefault=function(F){if(F==null)return this.$__.activePaths.some("default");if(typeof F==="string"&&F.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("default"),F);let A=F;if(!Array.isArray(A))A=A.split(" ");return A.some((B)=>Object.hasOwn(this.$__.activePaths.getStatePaths("default"),B))};g.prototype.$isDeleted=function(F){if(arguments.length===0)return!!this.$__.isDeleted;return this.$__.isDeleted=!!F,this};g.prototype.isDirectModified=function(F){if(F==null)return this.$__.activePaths.some("modify");if(typeof F==="string"&&F.indexOf(" ")===-1){let B=Object.hasOwn(this.$__.activePaths.getStatePaths("modify"),F);if(B||F.indexOf(".")===-1)return B;let D=F.split(".");for(let X=0;X<D.length-1;++X){let Z=D.slice(0,X+1).join("."),J=this.$get(Z);if(J?.$__!=null&&J.isDirectModified(D.slice(X+1).join(".")))return!0}return!1}let A=F;if(typeof A==="string")A=A.split(" ");return A.some((B)=>this.isDirectModified(B))};g.prototype.isInit=function(F){if(F==null)return this.$__.activePaths.some("init");if(typeof F==="string"&&F.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("init"),F);let A=F;if(!Array.isArray(A))A=A.split(" ");return A.some((B)=>Object.hasOwn(this.$__.activePaths.getStatePaths("init"),B))};g.prototype.isSelected=function F(A){if(this.$__.selected==null)return!0;if(!A)return!1;if(A==="_id")return this.$__.selected._id!==0;if(A.indexOf(" ")!==-1)A=A.split(" ");if(Array.isArray(A))return A.some((Z)=>this.$__isSelected(Z));let B=Object.keys(this.$__.selected),D=null;if(B.length===1&&B[0]==="_id")return this.$__.selected._id===0;for(let Z of B){if(Z==="_id")continue;if(!s_(this.$__.selected[Z]))continue;D=!!this.$__.selected[Z];break}if(D===null)return!0;if(A in this.$__.selected)return D;let X=A+".";for(let Z of B){if(Z==="_id")continue;if(Z.startsWith(X))return D||Z!==X;if(X.startsWith(Z+"."))return D}return!D};g.prototype.$__isSelected=g.prototype.isSelected;g.prototype.isDirectSelected=function F(A){if(this.$__.selected==null)return!0;if(A==="_id")return this.$__.selected._id!==0;if(A.indexOf(" ")!==-1)A=A.split(" ");if(Array.isArray(A))return A.some((X)=>this.isDirectSelected(X));let B=Object.keys(this.$__.selected),D=null;if(B.length===1&&B[0]==="_id")return this.$__.selected._id===0;for(let X of B){if(X==="_id")continue;if(!s_(this.$__.selected[X]))continue;D=!!this.$__.selected[X];break}if(D===null)return!0;if(Object.hasOwn(this.$__.selected,A))return D;return!D};g.prototype.validate=async function F(A,B){if(typeof A==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new p2("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1){if(typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))B=arguments[0],A=null}if(B&&typeof B.pathsToSkip==="string"){let X=B.pathsToSkip.indexOf(" ")===-1;B.pathsToSkip=X?[B.pathsToSkip]:B.pathsToSkip.split(" ")}let D=B?._skipParallelValidateCheck;if(this.$isSubdocument!=null);else if(this.$__.validating&&!D)throw new G$1(this);else if(!D)this.$__.validating=!0;try{await this.$__validate(A,B)}finally{this.$op=null,this.$__.validating=null}};g.prototype.$validate=g.prototype.validate;/*!
 * ignore
 */function _$1(F){let A=Object.keys(F.$__.activePaths.getStatePaths("require")),B=0,D=A.length;for(B=0;B<D;++B){let X=A[B],Z=F.$__schema.path(X);if(typeof Z?.originalRequiredValue==="function"){F.$__.cachedRequired=F.$__.cachedRequired||{};try{F.$__.cachedRequired[X]=Z.originalRequiredValue.call(F,F)}catch(J){F.invalidate(X,J)}}}}/*!
 * ignore
 */function Af(F,A,B,D){let X={};_$1(F);let Z=new Set(Object.keys(F.$__.activePaths.getStatePaths("require")).filter(function($){if(!F.$__isSelected($)&&!F.$isModified($))return!1;if($.endsWith(".$*"))return!1;if(F.$__.cachedRequired!=null&&$ in F.$__.cachedRequired)return F.$__.cachedRequired[$];return!0}));Object.keys(F.$__.activePaths.getStatePaths("init")).forEach(J),Object.keys(F.$__.activePaths.getStatePaths("modify")).forEach(J),Object.keys(F.$__.activePaths.getStatePaths("default")).forEach(J);function J($){if($.endsWith(".$*"))return;Z.add($)}if(!D){let $=[];for(let E of Object.keys(F.$__schema.paths)){let C=F.$__schema.path(E);if(C.$isSingleNested){let W=F.$get(E);if(W)$.push(W)}else if(C.$isMongooseDocumentArray){let W=F.$get(E);if(W?.length){for(let H of W)if(H)$.push(H)}}}let G=F.modifiedPaths();for(let E of $)if(E.$basePath){let C=E.$__pathRelativeToParent();for(let H of E.modifiedPaths())Z.delete(C+"."+H);let W=E.$parent();if(W==null)throw new Error("Cannot validate subdocument that does not have a parent");if(F.$isModified(C,null,G)&&!Object.hasOwn(W.$__.activePaths.getStatePaths("modify"),C)&&!W.$isDefault(C)){if(Z.add(C),F.$__.pathsToScopes==null)F.$__.pathsToScopes={};if(F.$__.pathsToScopes[C]=E.$isDocumentArrayElement?E.__parentArray:E.$parent(),X[C]={skipSchemaValidators:!0},E.$isDocumentArrayElement&&E.__index!=null)X[C].index=E.__index}}}for(let $ of Z){let G=F.$__schema.path($);if(!G)continue;if(G.$isMongooseDocumentArray){for(let E of Z)if(E==null||E.startsWith(G.path+"."))Z.delete(E)}if(!G.schema&&!G.embeddedSchemaType&&G.validators.length===0&&!G.$parentSchemaDocArray)Z.delete($);else if(G.$isMongooseArray&&!G.$isMongooseDocumentArray&&!G.embeddedSchemaType.$isMongooseArray&&G.validators.length===0&&G.embeddedSchemaType.validators.length===0)Z.delete($)}if(Array.isArray(A))Z=g$1(Z,A);else if(Array.isArray(B))Z=b$1(Z,B);f$1(F,Z);let Y={skipArrays:!0};for(let $ of Z)if(F.$__schema.nested[$]){let G=F.$__getValue($);if(I$1(G))G=G.toObject({transform:!1});let E=q$1(G,$,Y,F.$__schema),C=F.$__schema.singleNestedPaths;for(let W of Object.keys(E))if(!Object.hasOwn(C,W))J(W)}for(let $ of Z){let G=F.$__schema.path($);if(!G)continue;if(G.$parentSchemaDocArray&&typeof G.$parentSchemaDocArray.path==="string")Z.add(G.$parentSchemaDocArray.path);if(!G.$isSchemaMap)continue;let E=F.$__getValue($);if(E==null)continue;for(let C of E.keys())Z.add($+"."+C)}return Z=Array.from(Z),[Z,X]}function f$1(F,A){for(let B of A){let D=F.$__schema.path(B);if(!D)continue;if(!D.$isMongooseArray||!Array.isArray(D)&&D.$isMongooseDocumentArray&&!D?.schemaOptions?.required)continue;if(D.$isMongooseArray&&!D.$isMongooseDocumentArray&&!D.embeddedSchemaType.$isMongooseArray&&D.embeddedSchemaType.validators.length===0)continue;let X=F.$__getValue(B);oD(X,A,B)}}function oD(F,A,B){if(F!=null){let D=F.length;for(let X=0;X<D;++X)if(Array.isArray(F[X]))oD(F[X],A,B+"."+X);else A.add(B+"."+X)}}/*!
 * ignore
 */g.prototype._execDocumentPreHooks=async function F(A,...B){return this.$__middleware.execPre(A,this,[...B])};/*!
 * ignore
 */g.prototype._execDocumentPostHooks=async function F(A,B){return this.$__middleware.execPost(A,this,[this],{error:B})};/*!
 * ignore
 */g.prototype.$__validate=async function F(A,B){try{[B]=await this._execDocumentPreHooks("validate",B)}catch(K){await this._execDocumentPostHooks("validate",K);return}if(this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!A)A=[...this.$__.saveOptions.pathsToSave];let D=B&&typeof B==="object"&&"validateModifiedOnly"in B,X=B?.pathsToSkip||null,Z;if(D)Z=!!B.validateModifiedOnly;else Z=this.$__schema.options.validateModifiedOnly;let J=B?.validateAllPaths;if(J){if(X)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(A)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(D&&Z)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let Y=this,$=()=>{let K=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,Z&&K!=null){let U=Object.keys(K.errors);for(let R of U)if(!this.$isModified(R))delete K.errors[R];if(Z1.hasOwnKeys(K.errors)===!1)K=void 0}if(this.$__.cachedRequired={},this.$emit("validate",Y),this.constructor.emit("validate",Y),K){for(let U in K.errors)if(!this[P$1]&&K.errors[U]instanceof p2.CastError)this.invalidate(U,K.errors[U]);return K}},G,E;if(J){G=new Set(Object.keys(this.$__schema.paths));for(let K of G){if(!this.$__schema.path(K)?.$isMongooseArray)continue;let R=this.$__getValue(K);if(!R)continue;oD(R,G,K)}G=[...G],E={}}else{let K=Af(this,A,X,B?._nestedValidate);G=Z?K[0].filter((U)=>this.$isModified(U)):K[0],E=K[1]}if(typeof A==="string")A=A.split(" ");if(G.length===0){let K=$();await this._execDocumentPostHooks("validate",K);return}let C={},W=this.$__.saveOptions?.pathsToSave,H=[];if(Array.isArray(W)){W=new Set(W);for(let K of G){if(!W.has(K))continue;H.push(Q(K))}}else for(let K of G)H.push(Q(K));await Promise.all(H);let q=$();await this._execDocumentPostHooks("validate",q);async function Q(K){if(K==null||C[K])return;C[K]=!0;let U=Y.$__schema.path(K);if(!U)return;if(!Y.$isValid(K))return;if(U[u$1]!=null&&K!==U.path)return;let R=Y.$__getValue(K),w;if(w=Y.$populated(K))R=w;else if(R?.$__?.wasPopulated)R=R._doc._id;let V=Y.$__.pathsToScopes!=null&&K in Y.$__.pathsToScopes?Y.$__.pathsToScopes[K]:Y,N={...E[K],path:K,validateAllPaths:J,_nestedValidate:!0};try{await U.doValidate(R,V,N)}catch(T){if((U.$isSingleNested||U.$isArraySubdocument||U.$isMongooseDocumentArray)&&T instanceof tD)return;Y.invalidate(K,T,void 0,!0)}}};/*!
 * ignore
 */function g$1(F,A){let B=new Set(A),D=new Map([]);for(let Z of A){if(Z.indexOf(".")===-1)continue;let J=Z.split("."),Y=J[0];for(let $=1;$<J.length;++$)D.set(Y,Z),Y=Y+"."+J[$]}let X=new Set;for(let Z of F)if(B.has(Z))X.add(Z);else if(D.has(Z))X.add(D.get(Z));return X}/*!
 * ignore
 */function b$1(F,A){return A=new Set(A),F=Array.from(F).filter((B)=>!A.has(B)),new Set(F)}g.prototype.validateSync=function(F,A){let B=this;if(arguments.length===1&&typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))A=arguments[0],F=null;let D=A&&typeof A==="object"&&"validateModifiedOnly"in A,X;if(D)X=!!A.validateModifiedOnly;else X=this.$__schema.options.validateModifiedOnly;let Z=A?.pathsToSkip,J=A?.validateAllPaths;if(J){if(Z)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(F)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");else if(typeof Z==="string"&&Z.indexOf(" ")!==-1)Z=Z.split(" ");let Y,$;if(J){Y=new Set(Object.keys(this.$__schema.paths));for(let C of Y){if(!this.$__schema.path(C)?.$isMongooseArray)continue;let H=this.$__getValue(C);if(!H)continue;oD(H,Y,C)}Y=[...Y],$={}}else{let C=Af(this,F,Z);Y=X?C[0].filter((W)=>this.$isModified(W)):C[0],$=C[1]}let G={};for(let C=0,W=Y.length;C<W;++C){let H=Y[C];if(G[H])continue;G[H]=!0;let q=B.$__schema.path(H);if(!q)continue;if(!B.$isValid(H))continue;let Q=B.$__getValue(H),K=q.doValidateSync(Q,B,{skipSchemaValidators:$[H],path:H,validateModifiedOnly:X,validateAllPaths:J});if(K){if((q.$isSingleNested||q.$isArraySubdocument||q.$isMongooseDocumentArray)&&K instanceof tD)continue;B.invalidate(H,K,void 0,!0)}}let E=B.$__.validationError;if(B.$__.validationError=void 0,B.$emit("validate",B),B.constructor.emit("validate",B),E){for(let C in E.errors)if(E.errors[C]instanceof p2.CastError)B.invalidate(C,E.errors[C])}return E};g.prototype.invalidate=function(F,A,B,D){if(!this.$__.validationError)this.$__.validationError=new tD(this);if(this.$__.validationError.errors[F])return;if(!A||typeof A==="string")A=new n_({path:F,message:A,type:D||"user defined",value:B});if(this.$__.validationError===A)return this.$__.validationError;return this.$__.validationError.addError(F,A),this.$__.validationError};g.prototype.$markValid=function(F){if(!this.$__.validationError?.errors[F])return;if(delete this.$__.validationError.errors[F],Z1.hasOwnKeys(this.$__.validationError.errors)===!1)this.$__.validationError=null};/*!
 * ignore
 */function y$1(F,A){if(!F.$__.validationError)return;let B=Object.keys(F.$__.validationError.errors);for(let D of B)if(D.startsWith(A+"."))delete F.$__.validationError.errors[D];if(Z1.hasOwnKeys(F.$__.validationError.errors)===!1)F.$__.validationError=null}/*!
 * ignore
 */function h$1(F,A,B){let D=A.schema;if(D==null)return;for(let X of Object.keys(D.paths)){let Z=D.paths[X];if(Z.$immutableSetter==null)continue;let J=B==null?void 0:B.$__getValue(X);Z.$immutableSetter.call(F,J)}}g.prototype.$isValid=function(F){if(this.$__.validationError==null||Z1.hasOwnKeys(this.$__.validationError.errors)===!1)return!0;if(F==null)return!1;if(F.indexOf(" ")!==-1)F=F.split(" ");if(Array.isArray(F))return F.some((A)=>this.$__.validationError.errors[A]==null);return this.$__.validationError.errors[F]==null};g.prototype.$__reset=function F(){let A=this,B=!this.$isSubdocument?this.$getAllSubdocs({useCache:!0}):null;if(B?.length>0)for(let D of B)D.$__reset();return this.$__dirty().forEach(function(D){let X=D.value;if(X&&typeof X.clearAtomics==="function")X.clearAtomics();else if(X&&X[i2])X[NF]=X[i2],X[i2]={}}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,A=this,this.$__schema.requiredPaths().forEach(function(D){A.$__.activePaths.require(D)}),this};/*!
 * ignore
 */g.prototype.$__undoReset=function F(){if(this.$__.backup?.activePaths==null)return;this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let A of this.$__dirty()){let B=A.value;if(B?.[i2]&&B[NF])B[i2]=B[NF]}if(!this.$isSubdocument)for(let A of this.$getAllSubdocs())A.$__undoReset()};g.prototype.$__dirty=function(){let F=this,A=this.$__.activePaths.map("modify",function(X){return{path:X,value:F.$__getValue(X),schema:F.$__path(X)}});A=A.concat(this.$__.activePaths.map("default",function(X){if(X==="_id"||F.$__getValue(X)==null)return;return{path:X,value:F.$__getValue(X),schema:F.$__path(X)}}));let B=new Map(A.filter((X)=>X!=null).map((X)=>[X.path,X.value])),D=[];return A.forEach(function(X){if(!X)return;let Z=null,J=JW(X.path);for(let Y=0;Y<J.length-1;Y++)if(B.has(J[Y])){Z=B.get(J[Y]);break}if(Z==null)D.push(X);else if(Z!=null&&Z[i2]!=null&&Z.hasAtomics())Z[i2]={},Z[i2].$set=Z}),D};g.prototype.$__setSchema=function(F){C$1(F.tree,this,void 0,F.options);for(let A of Object.keys(F.virtuals))F.virtuals[A]._applyDefaultGetters();if(F.path("schema")==null)this.schema=F;this.$__schema=F,this.$__middleware=F._getDocumentMiddleware(),this[M$1]=F};g.prototype.$__getArrayPathsToValidate=function(){return rD||(rD=O9()),this.$__.activePaths.map("init","modify",function(F){return this.$__getValue(F)}.bind(this)).filter(function(F){return F&&Array.isArray(F)&&Z1.isMongooseDocumentArray(F)&&F.length}).reduce(function(F,A){return F.concat(A)},[]).filter(function(F){return F})};g.prototype.$getAllSubdocs=function(F){if(F?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;rD||(rD=O9()),PF=PF||H8();let A=[];function B(D){let X=[];for(let{model:Z}of D.$__schema.childSchemas){let J=D.$__getValue(Z.path);if(J==null)continue;if(J.$__)X.push(J);if(Array.isArray(J)){for(let Y of J)if(Y?.$__)X.push(Y)}if(J instanceof Map){for(let Y of J.values())if(Y?.$__)X.push(Y)}}for(let Z of X)B(Z);A.push(...X)}if(B(this),this.$__.saveOptions)this.$__.saveOptions.__subdocs=A;return A};/*!
 * Runs queued functions
 */function v$1(F){let A=F.$__schema&&F.$__schema.callQueue;if(!A.length)return;for(let B of A)if(B[0]!=="pre"&&B[0]!=="post"&&B[0]!=="on")F[B[0]].apply(F,B[1])}/*!
 * ignore
 */g.prototype.$__handleReject=function F(A){if(this.$listeners("error").length)this.$emit("error",A);else if(this.constructor.listeners?.("error").length)this.constructor.emit("error",A)};g.prototype.$toObject=function(F,A){let B=this.$__schema._defaultToObjectOptions(A),D=this.$__hasOnlyPrimitiveValues();F=Z1.isPOJO(F)?{...F}:{},F._calledWithOptions=F._calledWithOptions||{...F};let X;if(F._calledWithOptions.minimize!=null)X=F.minimize;else if(this.$__schemaTypeOptions?.minimize!=null)X=this.$__schemaTypeOptions.minimize;else if(B?.minimize!=null)X=B.minimize;else X=this.$__schema.options.minimize;if(F.minimize=X,!D)F._seen=F._seen||new Map;let Z=F._calledWithOptions.depopulate??B?.depopulate??F.depopulate??!1;if(Z&&F._isNested&&this.$__.wasPopulated)return r6(this.$__.wasPopulated.value||this._doc._id,F);if(Z)F.depopulate=!0;if(B!=null){for(let H of Object.keys(B))if(F[H]==null)F[H]=B[H]}F._isNested=!0,F.json=A,F.minimize=X;let J=F._parentOptions;F._parentOptions=this.$isSubdocument?F:null;let Y=F._calledWithOptions.schemaFieldsOnly??F.schemaFieldsOnly??B.schemaFieldsOnly??!1,$;if(D&&!F.flattenObjectIds)$=this.$__toObjectShallow(Y);else if(Y){$={};for(let H of Object.keys(this.$__schema.paths)){let q=this.$__getValue(H);if(q===void 0)continue;let Q=H,K=$;if(H.indexOf(".")!==-1){let U=H.split(".");Q=U[U.length-1];for(let R=0;R<U.length-1;++R)K[U[R]]=K[U[R]]??{},K=K[U[R]]}if(q===null){K[Q]=null;continue}K[Q]=r6(q,F)}}else $=r6(this._doc,F)||{};let G=F._calledWithOptions.getters??F.getters??B.getters??!1;if(G){if(m$1(this,$),F.minimize)$=V$1($)||{}}let E=F._calledWithOptions.virtuals??B.virtuals??J?.virtuals??void 0;if(E||G&&E!==!1)YW(this,$,F,F);if(F.versionKey===!1&&this.$__schema.options.versionKey)delete $[this.$__schema.options.versionKey];let C=F._calledWithOptions.transform??!0,W=void 0;if(C===!0)W=B.transform;else if(typeof C==="function")W=C;if(C)d$1(this,$);if(F.useProjection)c$1(this,$);if(typeof W==="function"){let H=W(this,$,F);if(typeof H!=="undefined")$=H}return $};/*!
 * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
 */g.prototype.$__toObjectShallow=function F(A){let B={};if(this._doc!=null){let D=A?Object.keys(this.$__schema.paths):Object.keys(this._doc);for(let X of D){let Z=this._doc[X];if(Z instanceof Date)B[X]=new Date(Z);else if(Z!==void 0)B[X]=Z}}return B};g.prototype.toObject=function(F){return this.$toObject(F)};/*!
 * Applies virtuals properties to `json`.
 */function YW(F,A,B,D){let X=F.$__schema,Z=X.virtuals,J=Object.keys(Z),Y=J.length,$=Y,G,E,C=F._doc,W,H=typeof D?.aliases==="boolean"?D.aliases:!0;B=B||{};let q=null;if(Array.isArray(B.virtuals))q=new Set(B.virtuals);else if(B.virtuals?.pathsToSkip){q=new Set(J);for(let Q=0;Q<B.virtuals.pathsToSkip.length;Q++)if(q.has(B.virtuals.pathsToSkip[Q]))q.delete(B.virtuals.pathsToSkip[Q])}if(!C)return A;for(Y=0;Y<$;++Y){if(G=J[Y],q!=null&&!q.has(G))continue;if(!H&&Object.hasOwn(X.aliases,G))continue;if(E=G,B.path!=null){if(!G.startsWith(B.path+"."))continue;E=G.substring(B.path.length+1)}if(E.indexOf(".")===-1&&E===G){if(W=Z[G].applyGetters(void 0,F),W===void 0)continue;W=r6(W,B),A[E]=W;continue}let Q=E.split(".");if(W=r6(F.get(G),B),W===void 0)continue;let K=Q.length;C=A;for(let U=0;U<K-1;++U)C[Q[U]]=C[Q[U]]||{},C=C[Q[U]];C[Q[K-1]]=W}return A}function m$1(F,A){let B=F.$__schema,D=Object.keys(B.paths),X=D.length,Z,J=F._doc,Y;if(!J)return A;while(X--){Z=D[X];let $=Z.split("."),G=$.length,E=G-1,C=A,W;if(J=F._doc,!F.$__isSelected(Z))continue;for(let H=0;H<G;++H){if(W=$[H],Y=J[W],C!=null&&typeof C!=="object")break;else if(H===E){if(C[W]=B.paths[Z].applyGetters(C[W],F),Array.isArray(C[W])&&B.paths[Z].embeddedSchemaType)for(let q=0;q<C[W].length;++q)C[W][q]=B.paths[Z].embeddedSchemaType.applyGetters(C[W][q],F)}else if(Y==null){if(W in J)C[W]=Y;break}else C=C[W]||(C[W]={});J=Y}}return A}function d$1(F,A){let B=F.$__schema,D=Object.keys(B.paths||{});if(!F._doc)return A;for(let Z of D){let J=B.paths[Z],Y=J.options.transform??J.constructor?.defaultOptions?.transform,$=J.embeddedSchemaType?.options?.transform??J.embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof Y==="function"){let G=F.$get(Z);if(G===void 0)continue;let E=Y.call(F,G);p_(Z,E),Z1.setValue(Z,E,A)}else if(typeof $==="function"){let G=F.$get(Z);if(G===void 0)continue;let E=[].concat(G);for(let C=0;C<E.length;++C){let W=$.call(F,E[C]);E[C]=W,p_(Z,W)}A[Z]=E}}return A}function p_(F,A){if(R$1(A))throw new Error("`transform` function must be synchronous, but the transform on path `"+F+"` returned a promise.")}/*!
 * ignore
 */function c$1(F,A){let B=F.$__schema,D=Object.keys(B.paths||{});if(!F._doc)return A;let Z=F.$__.selected;if(Z===void 0)Z={},w$1.applyPaths(Z,B);if(Z==null||Z1.hasOwnKeys(Z)===!1)return A;for(let J of D)if(Z[J]!=null&&!Z[J])delete A[J];return A}g.prototype.toJSON=function(F){return this.$toObject(F,!0)};/*!
 * ignore
 */g.prototype.ownerDocument=function(){return this};g.prototype.parent=function(){if(this.$isSubdocument||this.$__.wasPopulated)return this.$__.parent;return this};g.prototype.$parent=g.prototype.parent;g.prototype.$__setParent=function F(A){this.$__.parent=A};g.prototype.inspect=function(F){let A=Z1.isPOJO(F),B;if(A)B=F,B.minimize=!1;let D=arguments.length>0?this.toObject(B):this.toObject();if(D==null)return"MongooseDocument { "+D+" }";return D};if(XW.custom)g.prototype[XW.custom]=g.prototype.inspect;g.prototype.toString=function(){let F=this.inspect();if(typeof F==="string")return F;return XW(F)};g.prototype.equals=function(F){if(!F)return!1;let A=this.$__getValue("_id"),B=F.$__!=null?F.$__getValue("_id"):F;if(!A&&!B)return sD(this,F);return A&&A.equals?A.equals(B):A===B};g.prototype.populate=async function F(){let A={},B=[...arguments];if(typeof B[B.length-1]==="function")throw new p2("Document.prototype.populate() no longer accepts a callback");if(B.length!==0){let Z=Z1.populate.apply(null,B);for(let J of Z)A[J.path]=J}let D=Z1.object.vals(A),X=this.constructor;if(this.$__isNested){X=this.$__[k$1].constructor;let Z=this.$__.nestedPath;D.forEach(function(J){J.path=Z+"."+J.path})}if(this.$session()!=null){let Z=this.$session();D.forEach((J)=>{if(J.options==null){J.options={session:Z};return}if(!("session"in J.options))J.options.session=Z})}return D.forEach((Z)=>{Z._localModel=X}),X.populate(this,D)};g.prototype.$getPopulatedDocs=function F(){let A=[];if(this.$__.populated!=null)A=A.concat(Object.keys(this.$__.populated));let B=[];for(let D of A){let X=this.$get(D);if(Array.isArray(X))B=B.concat(X);else if(X instanceof g)B.push(X)}return B};g.prototype.populated=function(F,A,B){if(A==null||A===!0){if(!this.$__.populated)return;if(typeof F!=="string")return;let X=F.endsWith(".$*")?F.replace(/\.\$\*$/,""):F,Z=this.$__.populated[X];if(Z)return A===!0?Z:Z.value;return}this.$__.populated||(this.$__.populated={}),this.$__.populated[F]={value:A,options:B};let D=F.split(".");for(let X=0;X<D.length-1;++X){let Z=D.slice(0,X+1).join("."),J=this.$get(Z);if(J?.$__!=null&&this.$populated(Z)){let Y=D.slice(X+1).join(".");J.$populated(Y,A,B);break}}return A};g.prototype.$populated=g.prototype.populated;g.prototype.$assertPopulated=function F(A,B){if(Array.isArray(A))return A.forEach((D)=>this.$assertPopulated(D,B)),this;if(arguments.length>1)this.$set(B);if(!this.$populated(A))throw new p2(`Expected path "${A}" to be populated`);return this};g.prototype.depopulate=function(F){if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");let A,B=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],D=this.$__?.populated||{};if(arguments.length===0){for(let Z of B)delete this.$$populatedVirtuals[Z],delete this._doc[Z],delete D[Z];let X=Object.keys(D);for(let Z of X){if(A=this.$populated(Z),!A)continue;if(delete D[Z],Array.isArray(A)){let J=Z1.getValue(Z,this._doc);if(J.isMongooseArray){let Y=J.__array;for(let $=0;$<Y.length;++$){let G=Y[$];if(G==null)continue;Y[$]=G instanceof g?G._doc._id:G._id}}else Z1.setValue(Z,A,this._doc)}else Z1.setValue(Z,A,this._doc)}return this}for(let X of F)if(A=this.$populated(X),delete D[X],B.indexOf(X)!==-1)delete this.$$populatedVirtuals[X],delete this._doc[X];else if(A)if(Array.isArray(A)){let Z=Z1.getValue(X,this._doc);if(Z.isMongooseArray){let J=Z.__array;for(let Y=0;Y<J.length;++Y){let $=J[Y];if($==null)continue;J[Y]=$ instanceof g?$._doc._id:$._id}}else Z1.setValue(X,A,this._doc)}else Z1.setValue(X,A,this._doc);return this};g.prototype.$__fullPath=function(F){return F||""};g.prototype.getChanges=function(){let F=this.$__delta();return F?F[1]:{}};g.prototype.$__delta=function F(){let A=this.$__dirty(),B=this.$__schema.options.optimisticConcurrency;if(B)if(Array.isArray(B)){let $=new Set(B);if(this.modifiedPaths().some((E)=>$.has(E)))this.$__.version=A.length?3:1}else if(Array.isArray(B?.exclude)){let $=new Set(B.exclude);if(this.modifiedPaths().some((E)=>!$.has(E)))this.$__.version=A.length?3:1}else this.$__.version=A.length?3:1;if(!A.length&&this.$__.version!==3)return;let D={},X={},Z=A.length,J=[],Y=0;if(D._id=this._doc._id,D?._id?.$__!=null)D._id=D._id.toObject({transform:!1,depopulate:!0});for(;Y<Z;++Y){let $=A[Y],G=$.value,E=l$1(this,$.path,G);if(E){J.push(E);continue}if(!this.$populated($.path,!0)&&this.$__.selected){let W=$.path.split("."),H=W[0];if(this.$__.selected[H]&&this.$__.selected[H].$elemMatch)if(W.length>1&&W[1]==0&&typeof D[H]==="undefined")D[H]=this.$__.selected[H],W[1]="$",$.path=W.join(".");else{J.push($.path);continue}}if(this.$isDefault($.path)&&this.$__.selected){if($.path.indexOf(".")===-1&&d_(this.$__.selected,$.path))continue;if(JW($.path).find((H)=>d_(this.$__.isSelected,H)))continue}if(J.length)continue;if(G===void 0)h3(this,D,X,$,1,"$unset");else if(G===null)h3(this,D,X,$,null);else if(typeof G.getAtomics==="function")p$1(this,D,X,$,G);else if(G[Y$1.pathSymbol]&&Buffer.isBuffer(G))G=G.toObject(),h3(this,D,X,$,G);else if(this.$__.primitiveAtomics?.[$.path]!=null){let W=this.$__.primitiveAtomics[$.path],H=H$1(W);h3(this,D,X,$,W[H],H)}else G=r6(G,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),h3(this,D,X,$,G)}if(J.length)throw new Z$1(J);if(this.$__.version)this.$__version(D,X);if(Z1.hasOwnKeys(X)===!1)return[D,null];return[D,X]};function l$1(F,A,B){let D=F.$populated(A,!0);if(!D&&F.$__.selected){let Z=A.split(".")[0];if(F.$__.selected[Z+".$"])return Z}if(!(D&&Z1.isMongooseArray(B)))return;if(D.options.match||D.options.options&&Object.hasOwn(D.options.options,"limit")||D.options.options?.skip||D.options.select&&(D.options.select._id===0||/\s?-_id\s?/.test(D.options.select))){let Z=B[i2];if(Z1.hasOwnKeys(Z)===!1||Z.$set||Z.$pop)return A}}function h3(F,A,B,D,X,Z){if(Z||(Z="$set"),!B[Z])B[Z]={};if(B[Z][D.path]=X,F.$__schema.options.versionKey===!1)return;if(i$1(F,D.path))return;if((3&F.$__.version)===3)return;if(F.$__schema.options.optimisticConcurrency===!0||Array.isArray(F.$__schema.options.optimisticConcurrency)||Array.isArray(F.$__schema.options.optimisticConcurrency?.exclude))return;switch(Z){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}if(Z==="$push"||Z==="$addToSet"||Z==="$pullAll"||Z==="$pull")if(/\.\d+\.|\.\d+$/.test(D.path))F.$__.version=3;else F.$__.version|=2;else if(/^\$p/.test(Z))F.$__.version=3;else if(Array.isArray(X))F.$__.version=3;else if(/\.\d+\.|\.\d+$/.test(D.path))F.$__.version|=1}function p$1(F,A,B,D,X){if(B.$set?.[D.path])return;if(typeof X.getAtomics==="function"){X.getAtomics().forEach(function(C){let W=C[0],H=C[1];h3(F,A,B,D,H,W)});return}if(typeof X.$__getAtomics==="function"){X.$__getAtomics().forEach(function(C){let W=C[0],H=C[1];h3(F,A,B,D,H,W)});return}let Z=X[i2],J=Object.keys(Z),Y=J.length,$,G;if(Y===0){if(Z1.isMongooseObject(X))X=X.toObject({depopulate:1,_isNested:!0});else if(X.valueOf)X=X.valueOf();return h3(F,A,B,D,X)}function E(C){return Z1.isMongooseObject(C)?C.toObject({depopulate:1,_isNested:!0}):C}while(Y--){if(G=J[Y],$=Z[G],Z1.isMongooseObject($))$=$.toObject({depopulate:!0,transform:!1,_isNested:!0});else if(Array.isArray($))$=$.map(E);else if($.valueOf)$=$.valueOf();if(G==="$addToSet")$={$each:$};h3(F,A,B,D,$,G)}}function i$1(F,A){let B=F.$__schema.options.skipVersioning;if(!B)return!1;return A=A.replace(/\.\d+\./,"."),B[A]}g.prototype.$clone=function(){let A=new this.constructor;if(A.$isNew=this.$isNew,this._doc)A._doc=r6(this._doc,{retainDocuments:!0,parentDoc:A});if(this.$__){let D=new this.$__.constructor;for(let X of Object.getOwnPropertyNames(this.$__)){if(X==="activePaths")continue;D[X]=r6(this.$__[X])}Object.assign(D.activePaths,r6({...this.$__.activePaths})),A.$__=D}return A};g.prototype.$createModifiedPathsSnapshot=function F(){let A=new WeakMap;if(!this.$isSubdocument){let B=this.$getAllSubdocs();for(let D of B)A.set(D,D.$__.activePaths.clone())}return new $$1(A,this.$__.activePaths.clone(),this.$__.version)};g.prototype.$restoreModifiedPathsSnapshot=function F(A){if(this.$__.activePaths=A.activePaths.clone(),this.$__.version=A.version,!this.$isSubdocument){let B=this.$getAllSubdocs();for(let D of B)if(A.subdocSnapshot.has(D))D.$__.activePaths=A.subdocSnapshot.get(D)}return this};g.prototype.$clearModifiedPaths=function F(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let A=this.$getAllSubdocs();for(let B of A)B.$clearModifiedPaths()}return this};/*!
 * Check if the given document only has primitive values
 */g.prototype.$__hasOnlyPrimitiveValues=function F(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every((A)=>{return A==null||typeof A!=="object"||Z1.isNativeObject(A)&&!Array.isArray(A)||m_(A,"ObjectId")||m_(A,"Decimal128")}))};/*!
 * Increment this document's version if necessary.
 */g.prototype._applyVersionIncrement=function F(){if(!this.$__.version)return;let A=(2&this.$__.version)===2;if(this.$__.version=void 0,A){let B=this.$__schema.options.versionKey,D=this.$__getValue(B)||0;this.$__setValue(B,D+1)}};/*!
 * Increment this document's version if necessary.
 */g.prototype._applyVersionIncrement=function F(){if(!this.$__.version)return;let A=(2&this.$__.version)===2;if(this.$__.version=void 0,A){let B=this.$__schema.options.versionKey,D=this.$__getValue(B)||0;this.$__setValue(B,D+1)}};/*!
 * Module exports.
 */g.VERSION_WHERE=1;g.VERSION_INC=2;g.VERSION_ALL=3;g.ValidationError=tD;Df.exports=Bf=g});var B1=z((XG1)=>{/*!
 * Module dependencies.
 */var n$1=$1().UUID,a$1=pS(),Gf=W6(),s$1=k4(),Ef=kC(),GW=C0(),r$1=X4(),t$1=I9(),Cf=LD(),Wf=Dx(),x4=D2(),o$1=A8(),e$1=aE(),MF=UF(),FG1=MD(),jF=R9(),{trustedSymbol:z8}=B8(),$W;XG1.specialProperties=jF;XG1.isMongooseArray=Cf.isMongooseArray;XG1.isMongooseDocumentArray=Wf.isMongooseDocumentArray;XG1.registerMongooseArray=Cf.registerMongooseArray;XG1.registerMongooseDocumentArray=Wf.registerMongooseDocumentArray;var EW=/\s/,CW=/\s+/;XG1.toCollectionName=function(F,A){if(F==="system.profile")return F;if(F==="system.indexes")return F;if(typeof A==="function"){if(typeof F!=="string")throw new TypeError("Collection name must be a string");if(F.length===0)throw new TypeError("Collection name cannot be empty");return A(F)}return F};XG1.deepEqual=function F(A,B){if(A===B)return!0;if(typeof A!=="object"||typeof B!=="object")return A===B;if(A instanceof Date&&B instanceof Date)return A.getTime()===B.getTime();if(x4(A,"ObjectId")&&x4(B,"ObjectId")||x4(A,"Decimal128")&&x4(B,"Decimal128"))return A.toString()===B.toString();if(A instanceof RegExp&&B instanceof RegExp)return A.source===B.source&&A.ignoreCase===B.ignoreCase&&A.multiline===B.multiline&&A.global===B.global&&A.dotAll===B.dotAll&&A.unicode===B.unicode&&A.sticky===B.sticky&&A.hasIndices===B.hasIndices;if(A==null||B==null)return!1;if(A.prototype!==B.prototype)return!1;if(A instanceof Map||B instanceof Map){if(!(A instanceof Map)||!(B instanceof Map))return!1;return F(Array.from(A.keys()),Array.from(B.keys()))&&F(Array.from(A.values()),Array.from(B.values()))}if(A instanceof Number&&B instanceof Number)return A.valueOf()===B.valueOf();if(Buffer.isBuffer(A))return XG1.buffer.areEqual(A,B);if(Array.isArray(A)||Array.isArray(B)){if(!Array.isArray(A)||!Array.isArray(B))return!1;let J=A.length;if(J!==B.length)return!1;for(let Y=0;Y<J;++Y)if(!F(A[Y],B[Y]))return!1;return!0}if(A.$__!=null)A=A._doc;else if(MF(A))A=A.toObject();if(B.$__!=null)B=B._doc;else if(MF(B))B=B.toObject();let D=Object.keys(A),X=Object.keys(B),Z=D.length;if(Z!==X.length)return!1;for(let J=Z-1;J>=0;J--)if(D[J]!==X[J])return!1;for(let J of D)if(!F(A[J],B[J]))return!1;return!0};XG1.last=function(F){if(F==null)return;if(F.length>0)return F[F.length-1];return};/*!
 * ignore
 */XG1.cloneArrays=function F(A){if(!Array.isArray(A))return A;return A.map((B)=>XG1.cloneArrays(B))};/*!
 * ignore
 */XG1.omit=function F(A,B){if(B==null)return Object.assign({},A);if(!Array.isArray(B))B=[B];let D=Object.assign({},A);for(let X of B)delete D[X];return D};XG1.clonePOJOsAndArrays=function F(A){if(A==null)return A;if(A.$__!=null)return A;if(o$1(A)){A={...A};for(let B of Object.keys(A))A[B]=XG1.clonePOJOsAndArrays(A[B]);return A}if(Array.isArray(A)){A=[...A];for(let B=0;B<A.length;++B)A[B]=XG1.clonePOJOsAndArrays(A[B]);return A}return A};XG1.merge=function F(A,B,D,X){if(D=D||{},B==null)return A;let Z=Object.keys(B),J=0,Y=Z.length,$;if(B[z8])A[z8]=B[z8];X=X||"";let G=D.omitNested||{};while(J<Y){if($=Z[J++],D.omit&&D.omit[$])continue;if(G[X])continue;if(jF.has($))continue;if(A[$]==null)A[$]=XG1.clonePOJOsAndArrays(B[$]);else if(XG1.isObject(B[$])){if(!XG1.isObject(A[$]))A[$]={};if(B[$]!=null){if(D.isDiscriminatorSchemaMerge&&(B[$].$isSingleNested&&A[$].$isMongooseDocumentArray)||B[$].$isMongooseDocumentArray&&A[$].$isSingleNested)continue;else if(B[$].instanceOfSchema){if(A[$].instanceOfSchema)FG1(A[$],B[$].clone(),D.isDiscriminatorSchemaMerge);else A[$]=B[$].clone();continue}else if(x4(B[$],"ObjectId")){A[$]=new s$1(B[$]);continue}}F(A[$],B[$],D,X?X+"."+$:$)}else if(D.overwrite)A[$]=B[$]}return A};XG1.toObject=function F(A){$W||($W=H3());let B;if(A==null)return A;if(A instanceof $W)return A.toObject();if(Array.isArray(A)){B=[];for(let D of A)B.push(F(D));return B}if(XG1.isPOJO(A)){if(B={},A[z8])B[z8]=A[z8];for(let D of Object.keys(A)){if(jF.has(D))continue;B[D]=F(A[D])}return B}return A};XG1.isObject=t$1;XG1.isPOJO=A8();XG1.isNonBuiltinObject=function F(A){return typeof A==="object"&&!XG1.isNativeObject(A)&&!XG1.isMongooseType(A)&&!(A instanceof n$1)&&A!=null};XG1.isNativeObject=function(F){return Array.isArray(F)||F instanceof Date||F instanceof Boolean||F instanceof Number||F instanceof String};XG1.isEmptyObject=function F(A){if(A==null||typeof A!=="object")return!1;return XG1.hasOwnKeys(A)===!1};XG1.hasOwnKeys=function F(A){for(let B in A)if(Object.prototype.hasOwnProperty.call(A,B))return!0;return!1};XG1.hasKey=function F(A,B){let D=Object.keys(A);for(let X of D){if(X===B)return!0;if(XG1.isPOJO(A[X])&&XG1.hasKey(A[X],B))return!0}return!1};XG1.tick=function F(A){if(typeof A!=="function")return;return function(){try{A.apply(this,arguments)}catch(B){r$1(function(){throw B})}}};XG1.isMongooseType=function(F){return x4(F,"ObjectId")||x4(F,"Decimal128")||F instanceof Buffer};XG1.isMongooseObject=MF;XG1.expires=function F(A){if(!(A&&A.constructor.name==="Object"))return;if(!("expires"in A))return;A.expireAfterSeconds=typeof A.expires!=="string"?A.expires:Math.round(a$1(A.expires)/1000),delete A.expires};XG1.populate=function F(A,B,D,X,Z,J,Y,$){let G=null;if(arguments.length===1){if(A instanceof Ef)return A._docs={},A._childDocs=[],[A];if(Array.isArray(A))return E(A).map((W)=>XG1.populate(W)[0]);if(XG1.isObject(A))G=Object.assign({},A);else G={path:A}}else if(typeof D==="object")G={path:A,select:B,match:D,options:X};else G={path:A,select:B,model:D,match:X,options:Z,populate:J,justOne:Y,count:$};if(typeof G.path!=="string"&&!(Array.isArray(G.path)&&G.path.every((C)=>typeof C==="string")))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof A+"`");return AG1(G);function E(C){let W=[];return C.forEach(function(H){if(EW.test(H.path))H.path.split(CW).forEach(function(Q){let K=Object.assign({},H);K.path=Q,W.push(K)});else W.push(H)}),W}};function AG1(F){if(Array.isArray(F.populate)){let D=[];F.populate.forEach(function(X){if(EW.test(X.path)){let Z=Object.assign({},X);Z.path.split(CW).forEach(function(Y){Z.path=Y,D.push(XG1.populate(Z)[0])})}else D.push(XG1.populate(X)[0])}),F.populate=XG1.populate(D)}else if(F.populate!=null&&typeof F.populate==="object")F.populate=XG1.populate(F.populate);let A=[],B=EW.test(F.path)?F.path.split(CW):Array.isArray(F.path)?F.path:[F.path];if(F.options!=null)F.options=GW(F.options);for(let D of B)A.push(new Ef(Object.assign({},F,{path:D})));return A}XG1.getValue=function(F,A,B){return Gf.get(F,A,DG1,B)};/*!
 * ignore
 */var BG1=Object.freeze({getters:!1});function DG1(F,A){if(A==="$*"&&F instanceof Map)return F;let B=F?._doc||F;if(B?.isMongooseArrayProxy)B=B.__array;return B instanceof Map?B.get(A,BG1):B[A]}XG1.setValue=function(F,A,B,D,X){Gf.set(F,A,B,"_doc",D,X)};XG1.object={};XG1.object.vals=function F(A){if(A==null)return[];let B=Object.keys(A),D=B.length,X=[];while(D--)X.push(A[B[D]]);return X};XG1.isNullOrUndefined=function(F){return F==null};/*!
 * ignore
 */XG1.array={};XG1.array.flatten=function F(A,B,D){return D||(D=[]),A.forEach(function(X){if(Array.isArray(X))F(X,B,D);else if(!B||B(X))D.push(X)}),D};/*!
 * ignore
 */XG1.hasUserDefinedProperty=function(F,A){if(F==null)return!1;if(Array.isArray(A)){for(let B of A)if(XG1.hasUserDefinedProperty(F,B))return!0;return!1}if(Object.hasOwn(F,A))return!0;if(typeof F==="object"&&A in F){let B=F[A];return B!==Object.prototype[A]&&B!==Array.prototype[A]}return!1};/*!
 * ignore
 */var Xf=Math.pow(2,32)-1;XG1.isArrayIndex=function(F){if(typeof F==="number")return F>=0&&F<=Xf;if(typeof F==="string"){if(!/^\d+$/.test(F))return!1;return F=+F,F>=0&&F<=Xf}return!1};XG1.array.unique=function(F){let A=new Set,B=new Set,D=[];for(let X of F)if(typeof X==="number"||typeof X==="string"||X==null){if(A.has(X))continue;D.push(X),A.add(X)}else if(x4(X,"ObjectId")){if(B.has(X.toString()))continue;D.push(X),B.add(X.toString())}else D.push(X);return D};XG1.buffer={};XG1.buffer.areEqual=function(F,A){if(!Buffer.isBuffer(F))return!1;if(!Buffer.isBuffer(A))return!1;return F.equals(A)};XG1.getFunctionName=e$1;XG1.decorate=function(F,A){for(let B in A){if(jF.has(B))continue;F[B]=A[B]}};XG1.mergeClone=function(F,A){if(MF(A))A=A.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});let B=Object.keys(A),D=B.length,X=0,Z;while(X<D){if(Z=B[X++],jF.has(Z))continue;if(typeof F[Z]==="undefined")F[Z]=GW(A[Z],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let J=A[Z];if(J?.valueOf&&!(J instanceof Date))J=J.valueOf();if(XG1.isObject(J)){let Y=J;if(MF(J)&&!J.isMongooseBuffer)Y=Y.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});if(J.isMongooseBuffer)Y=Buffer.from(Y);XG1.mergeClone(F[Z],Y)}else F[Z]=GW(J,{flattenDecimals:!1})}}};XG1.each=function(F,A){for(let B of F)A(B)};XG1.renameObjKey=function(F,A,B){return Object.keys(F).reduce((X,Z)=>{if(Z===A)X[B]=F[A];else X[Z]=F[Z];return X},{})};/*!
 * ignore
 */XG1.getOption=function(F){let A=Array.prototype.slice.call(arguments,1);for(let B of A){if(B==null)continue;if(B[F]!=null)return B[F]}return null};/*!
 * ignore
 */XG1.noop=function(){};XG1.errorToPOJO=function F(A){if(!(A instanceof Error))throw new Error("`error` must be `instanceof Error`.");let D={};for(let X of Object.getOwnPropertyNames(A))D[X]=A[X];return D};/*!
 * ignore
 */XG1.warn=function F(A){return process.emitWarning(A,{code:"MONGOOSE"})};XG1.injectTimestampsOption=function F(A,B){if(B==null)return;A.timestamps=B}});var Q0=z((BX,wf)=>{/*!
 * Module dependencies.
 */var kF=E6(),Lf=l2(),bG1=PD(),yG1=jC(),AX=C0(),HW=hS(),hG1=mS(),qW=cS(),vG1=t().schemaTypeSymbol,x9=B1(),TF=t().validatorErrorSymbol,mG1=t().documentIsModified,Qf=t().populateModelSymbol,zW=kF.CastError,Q8=kF.ValidatorError,dG1={_skipMarkModified:!0};function C1(F,A,B,D){this[vG1]=!0,this.path=F,this.instance=B,this.schemaName=this.constructor.schemaName,this.validators=[],this.getters=Object.hasOwn(this.constructor,"getters")?this.constructor.getters.slice():[],this.setters=Object.hasOwn(this.constructor,"setters")?this.constructor.setters.slice():[],this.splitPath(),A=A||{};let X=this.constructor.defaultOptions||{},Z=Object.keys(X);for(let $ of Z)if($==="validate")this.validate(X.validate);else if(Object.hasOwn(X,$)&&!Object.hasOwn(A,$))A[$]=X[$];if(A.select==null)delete A.select;let J=this.OptionsConstructor||Lf;if(this.options=new J(A),this.parentSchema=D,this._index=null,x9.hasUserDefinedProperty(this.options,"immutable"))this.$immutable=this.options.immutable,HW(this);let Y=Object.keys(this.options);for(let $ of Y){if($==="cast"){if(Array.isArray(this.options[$]))this.castFunction.apply(this,this.options[$]);else this.castFunction(this.options[$]);continue}if(x9.hasUserDefinedProperty(this.options,$)&&typeof this[$]==="function"){if($==="index"&&this._index){if(A.index===!1){let C=this._index;if(typeof C==="object"&&C!=null){if(C.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(C.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let G=A[$];if($==="default"){this.default(G);continue}let E=Array.isArray(G)?G:[G];this[$].apply(this,E)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}C1.prototype.OptionsConstructor=Lf;C1.prototype.path;C1.prototype.toJSON=function F(){let A={...this};return delete A.parentSchema,A};C1.prototype.validators;C1.prototype.isRequired;C1.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path==null)return;return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};C1.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=(B)=>B;return this._cast=A,this._cast};C1.prototype.castFunction=function F(A,B){if(arguments.length===0)return this._castFunction;if(A===!1)A=this.constructor._defaultCaster||((D)=>D);if(typeof A==="string")return this._castErrorMessage=A,this._castFunction;if(A!=null)this._castFunction=A;if(B!=null)this._castErrorMessage=B;return this._castFunction};C1.prototype.cast=function F(){throw new Error("Base SchemaType class does not implement a `cast()` function")};C1.set=function F(A,B){if(!Object.hasOwn(this,"defaultOptions"))this.defaultOptions=Object.assign({},this.defaultOptions);this.defaultOptions[A]=B};C1.get=function(F){this.getters=Object.hasOwn(this,"getters")?this.getters:[],this.getters.push(F)};C1.prototype.default=function(F){if(arguments.length===1){if(F===void 0){this.defaultValue=void 0;return}if(F?.instanceOfSchema)throw new kF("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=F,this.defaultValue}else if(arguments.length>1)this.defaultValue=[...arguments];return this.defaultValue};C1.prototype.index=function(F){return this._index=F,x9.expires(this._index),this};C1.prototype.unique=function F(A,B){if(this._index===!1){if(!A)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}if(!Object.hasOwn(this.options,"index")&&A===!1)return this;if(this._index==null||this._index===!0)this._index={};else if(typeof this._index==="string")this._index={type:this._index};if(this._index.unique=!!A,typeof B==="string")this._duplicateKeyErrorMessage=B;return this};C1.prototype.text=function(F){if(this._index===!1){if(!F)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}if(!Object.hasOwn(this.options,"index")&&F===!1)return this;if(this._index===null||this._index===void 0||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.text=F,this};C1.prototype.sparse=function(F){if(this._index===!1){if(!F)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}if(!Object.hasOwn(this.options,"index")&&F===!1)return this;if(this._index==null||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.sparse=F,this};C1.prototype.immutable=function(F){return this.$immutable=F,HW(this),this};C1.prototype.transform=function(F){return this.options.transform=F,this};C1.prototype.set=function(F){if(typeof F!=="function")throw new TypeError("A setter must be a function.");return this.setters.push(F),this};C1.prototype.get=function(F){if(typeof F!=="function")throw new TypeError("A getter must be a function.");return this.getters.push(F),this};C1.prototype.validateAll=function(F){for(let A=0;A<F.length;A++)this.validate(F[A]);return this};C1.prototype.validate=function(F,A,B){if(typeof F==="function"||F&&x9.getFunctionName(F.constructor)==="RegExp"){let J;if(typeof A==="function")J={validator:F,message:A},J.type=B||"user defined";else if(A instanceof Object&&!B){if(J=qW(A)?Object.assign({},A):AX(A),!J.message)J.message=J.msg;J.validator=F,J.type=J.type||"user defined"}else{if(A==null)A=kF.messages.general.default;if(!B)B="user defined";J={message:A,type:B,validator:F}}return this.validators.push(J),this}let D,X,Z;for(D=0,X=arguments.length;D<X;D++){if(Z=arguments[D],!x9.isPOJO(Z)){let J="Invalid validator. Received ("+typeof Z+") "+Z+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(J)}this.validate(Z.validator,Z)}return this};C1.prototype.required=function(F,A){let B={};if(arguments.length>0&&F==null)return this.validators=this.validators.filter(function(Z){return Z.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof F==="object")B=F,A=B.message||A,F=F.isRequired;if(F===!1)return this.validators=this.validators.filter(function(Z){return Z.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let D=this;if(this.isRequired=!0,this.requiredValidator=function(Z){let J=this?.$__?.cachedRequired;if(J!=null&&!this.$__isSelected(D.path)&&!this[mG1](D.path))return!0;if(J!=null&&D.path in J){let Y=J[D.path]?D.checkRequired(Z,this):!0;return delete J[D.path],Y}else if(typeof F==="function")return F.apply(this)?D.checkRequired(Z,this):!0;return D.checkRequired(Z,this)},this.originalRequiredValue=F,typeof F==="string")A=F,F=void 0;let X=A||kF.messages.general.required;return this.validators.unshift(Object.assign({},B,{validator:this.requiredValidator,message:X,type:"required"})),this};C1.prototype.ref=function(F){return this.options.ref=F,this};C1.prototype.getDefault=function(F,A,B){let D;if(this.defaultValue==null)return this.defaultValue;if(typeof this.defaultValue==="function")if(this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid")D=this.defaultValue.call(F);else D=this.defaultValue.call(F,F);else D=this.defaultValue;if(D!=null){if(typeof D==="object"&&!this.options?.shared)D=AX(D);if(B?.skipCast)return this._applySetters(D,F);let X=this.applySetters(D,F,A,void 0,dG1);if(X&&!Array.isArray(X)&&X.$isSingleNested)X.$__parent=F;return X}return D};C1.prototype._applySetters=function(F,A,B,D,X){let Z=F;if(B)return Z;let J=this.setters;for(let Y=J.length-1;Y>=0;Y--)Z=J[Y].call(A,Z,D,this,X);return Z};/*!
 * ignore
 */C1.prototype._castNullish=function F(A){return A};C1.prototype.applySetters=function(F,A,B,D,X){let Z=this._applySetters(F,A,B,D,X);if(Z==null)return this._castNullish(Z);return Z=this.cast(Z,A,B,D,X),Z};C1.prototype.applyGetters=function(F,A){let B=F,D=this.getters,X=D.length;if(X===0)return B;for(let Z=0;Z<X;++Z)B=D[Z].call(A,B,this);return B};C1.prototype.select=function F(A){return this.selected=!!A,this};C1.prototype.doValidate=async function F(A,B,D){let X=!1,Z=this.path,J=this.validators.filter(($)=>typeof $==="object"&&$!==null);if(!J.length)return;let Y=[];for(let $=0,G=J.length;$<G;++$){let E=J[$],C=E.validator,W,H=qW(E)?Object.assign({},E):AX(E);if(H.path=D?.path||Z,H.fullPath=this.$fullPath,H.value=A,typeof A==="string"){if(H.length=A.length,H.value.length>30)H.value=H.value.slice(0,30)+"..."}if(A===void 0&&C!==this.requiredValidator)continue;if(C instanceof RegExp){if(W=C.test(A),W===!1)throw X=new(H.ErrorConstructor||Q8)(H,B),X[TF]=!0,X;continue}else if(typeof C!=="function")continue;try{if(H.propsParameter)W=C.call(B,A,H);else W=C.call(B,A)}catch(q){if(W=!1,H.reason=q,q.message)H.message=q.message}if(typeof W?.then==="function")Y.push(W.then(function(q){if(q===!1)throw X=new(H.ErrorConstructor||Q8)(H,B),X[TF]=!0,X},function(q){throw H.reason=q,H.message=q.message,W=!1,X=new(H.ErrorConstructor||Q8)(H,B),X[TF]=!0,X}));else if(W!==void 0&&!W)throw X=new(H.ErrorConstructor||Q8)(H,B),X[TF]=!0,X}await Promise.all(Y)};function Kf(F,A){if(F!==void 0&&!F){let D=new(A.ErrorConstructor||Q8)(A);return D[TF]=!0,D}}C1.prototype.doValidateSync=function(F,A,B){let D=this.path;if(!this.validators.length)return null;let Z=this.validators;if(F===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")Z=[this.validators[0]];else return null;let J=null,Y=0,$=Z.length;for(Y=0;Y<$;++Y){let G=Z[Y];if(G===null||typeof G!=="object")continue;let E=G.validator,C=qW(G)?Object.assign({},G):AX(G);if(C.path=B?.path||D,C.fullPath=this.$fullPath,C.value=F,typeof F==="string"){if(C.length=F.length,C.value.length>30)C.value=C.value.slice(0,30)+"..."}let W=!1;if(hG1(E))continue;if(E instanceof RegExp){J=Kf(E.test(F),C);continue}if(typeof E!=="function")continue;try{if(C.propsParameter)W=E.call(A,F,C);else W=E.call(A,F)}catch(H){W=!1,C.reason=H}if(typeof W?.then==="function")continue;if(J=Kf(W,C),J)break}return J};C1._isRef=function(F,A,B,D){let X=D&&(F.options?.ref||F.options?.refPath);if(!X&&B?.$__!=null){let Z=B.$__fullPath(F.path,!0),J=B.ownerDocument();X=Z!=null&&J.$populated(Z)||B.$populated(F.path)}if(X){if(A==null)return!0;if(!Buffer.isBuffer(A)&&A._bsontype!=="Binary"&&x9.isObject(A))return!0;return D}return!1};/*!
 * ignore
 */C1.prototype._castRef=function F(A,B,D,X){if(A==null)return A;if(A.$__!=null)return A.$__.wasPopulated=A.$__.wasPopulated||{value:A._doc._id},A;if(Buffer.isBuffer(A)||!x9.isObject(A)){if(D)return A;throw new zW(this.instance,A,this.path,null,this)}let Z=B.$__fullPath(this.path,!0),Y=B.ownerDocument().$populated(Z,!0),$=A;if(!B.$__.populated||!B.$__.populated[Z]||!B.$__.populated[Z].options||!B.$__.populated[Z].options.options||!B.$__.populated[Z].options.options.lean){let G=Y?Y.options[Qf]:B.constructor.db.model(this.options.ref);$=G.hydrate(A,null,X),$.$__.wasPopulated={value:$._doc._id,options:{[Qf]:G}}}return $};/*!
 * ignore
 */function Uf(F,A){return this.castForQuery(null,F,A)}/*!
 * ignore
 */function cG1(F,A){let B=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(D){return B.castForQuery(null,D,A)})}function Vf(F,A){let B=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(D){if(Array.isArray(D)&&D.length===0)return D;return B.castForQuery(null,D,A)})}C1.prototype.$conditionalHandlers={$all:cG1,$eq:Uf,$in:Vf,$ne:Uf,$nin:Vf,$exists:bG1,$type:yG1};C1.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can't use "+F);return D.call(this,A,B)}try{return this.applySetters(A,B)}catch(X){if(X instanceof zW&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};C1.checkRequired=function(F){if(arguments.length!==0)this._checkRequired=F;return this._checkRequired};C1.prototype.checkRequired=function(F){return F!=null};C1.prototype.clone=function(){let F=Object.assign({},this.options),A=new this.constructor(this.path,F,this.instance,this.parentSchema);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;if(this.defaultValue!==void 0)A.defaultValue=this.defaultValue;if(this.$immutable!==void 0&&this.options.immutable===void 0)A.$immutable=this.$immutable,HW(A);if(this._index!==void 0)A._index=this._index;if(this.selected!==void 0)A.selected=this.selected;if(this.isRequired!==void 0)A.isRequired=this.isRequired;if(this.originalRequiredValue!==void 0)A.originalRequiredValue=this.originalRequiredValue;return A.getters=this.getters.slice(),A.setters=this.setters.slice(),A};C1.prototype.getEmbeddedSchemaType=function F(){return this.embeddedSchemaType};/*!
 * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
 *
 * @api private
 */C1.prototype._duplicateKeyErrorMessage=null;C1.prototype.toJSONSchema=function F(A){throw new Error(`Converting unsupported SchemaType to JSON Schema: ${this.instance} at path "${this.path}"`)};C1.prototype.autoEncryptionType=function F(){return null};/*!
 * Module exports.
 */wf.exports=BX=C1;BX.CastError=zW;BX.ValidatorError=Q8});var QW=z((PT1,Rf)=>{var t6=C6();class H6{constructor(F){if(Object.assign(this,F),F?.options!=null)this.options=Object.assign({},F.options)}}Object.defineProperty(H6.prototype,"ref",t6);Object.defineProperty(H6.prototype,"refPath",t6);Object.defineProperty(H6.prototype,"localField",t6);Object.defineProperty(H6.prototype,"foreignField",t6);Object.defineProperty(H6.prototype,"justOne",t6);Object.defineProperty(H6.prototype,"count",t6);Object.defineProperty(H6.prototype,"match",t6);Object.defineProperty(H6.prototype,"options",t6);Object.defineProperty(H6.prototype,"skip",t6);Object.defineProperty(H6.prototype,"limit",t6);Object.defineProperty(H6.prototype,"perDocumentLimit",t6);Rf.exports=H6});var DX=z((NT1,If)=>{If.exports=function F(A,B,D){if(A==null)return A;if(A._doc!=null)A=A._doc;if(arguments.length>=3){if(typeof A!=="object")return;if(D===void 0)return;if(A instanceof Map)A.set(B,D);else A[B]=D;return D}if(B==="$*")return A instanceof Map?Array.from(A.values()):Object.keys(A).map((X)=>A[X]);if(A instanceof Map)return A.get(B);return A[B]}});var KW=z((MT1,jf)=>{var lG1=K1(),pG1=yC(),Pf=DX(),Nf=W6(),iG1=m("util"),nG1=B1(),Mf=/(\.\d+$|\.\d+\.)/g;jf.exports=function F(A,B,D,X,Z){if(A==null)return[];if(typeof A==="string"&&Z!=null&&pG1(Z,A))throw new lG1("refPath `"+A+"` must not be excluded in projection, got "+iG1.inspect(Z));if(Mf.test(D)){let $=D.split(Mf);if($[$.length-1]==="")throw new Error("Can't populate individual element in an array");let G="",E=A;for(let H=0;H<$.length;H+=2){let q=$[H];if(E.startsWith(q+"."))G+=E.substring(0,q.length)+$[H+1],E=E.substring(q.length+1);else if(H===$.length-1){G+=E,E="";break}else throw new Error("Could not normalize ref path, chunk "+q+" not in populated path")}let C=Nf.get(G,B,Pf),W=Array.isArray(C)?C:[C];return W=nG1.array.flatten(W),W}let J=Nf.get(A,B,Pf),Y;if(X!=null&&Object.hasOwn(X.virtuals,A))Y=[X.virtuals[A].applyGetters(void 0,B)];else Y=Array.isArray(J)?J:[J];return Y}});var XX=z((jT1,Tf)=>{var aG1=KW(),sG1=B1(),rG1=t().modelSymbol;function v3(F,A){this.path=A,this.getters=[],this.setters=[],this.options=Object.assign({},F)}v3.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let A="$"+this.path;this.getters.push(function(){return this.$locals[A]}),this.setters.push(function(B){this.$locals[A]=B})};/*!
 * ignore
 */v3.prototype.clone=function(){let F=new v3(this.options,this.path);return F.getters=[].concat(this.getters),F.setters=[].concat(this.setters),F};v3.prototype.get=function(F){return this.getters.push(F),this};v3.prototype.set=function(F){return this.setters.push(F),this};v3.prototype.applyGetters=function(F,A){if(sG1.hasUserDefinedProperty(this.options,["ref","refPath"])&&A.$$populatedVirtuals&&Object.hasOwn(A.$$populatedVirtuals,this.path))F=A.$$populatedVirtuals[this.path];let B=F;for(let D of this.getters)B=D.call(A,B,this,A);return B};v3.prototype.applySetters=function(F,A){let B=F;for(let D of this.setters)B=D.call(A,B,this,A);return B};v3.prototype._getModelNamesForPopulate=function F(A){if(this.options.refPath)return aG1(this.options.refPath,A,this.path);let B=null;if(typeof this.options.ref==="function"&&!this.options.ref[rG1])B=this.options.ref.call(A,A);else B=this.options.ref;if(B!=null&&!Array.isArray(B))return[B];return B};/*!
 * exports
 */Tf.exports=v3});var UW=z((TT1,kf)=>{kf.exports=function F(A){let B={_id:{auto:!0}};B._id[A.options.typeKey]="ObjectId",A.add(B)}});var VW=z((kT1,uf)=>{uf.exports=function F(A,B){let D=A.discriminatorMapping?.value;if(D&&!("sparse"in B)){let X=A.options.discriminatorKey;B.partialFilterExpression=B.partialFilterExpression||{},B.partialFilterExpression[X]=D}return B}});var Sf=z((uT1,Of)=>{var LW=K0(),tG1=I9(),oG1=VW();Of.exports=function F(A){let B=[],D=new WeakMap,X=A.constructor.indexTypes,Z=new Map;return J(A),B;function J($,G,E){if(D.has($))return;D.set($,!0),G=G||"";let C=Object.keys($.paths);for(let W of C){let H=$.paths[W];if(E!=null&&E.paths[W])continue;if(H._duplicateKeyErrorMessage!=null)$._duplicateKeyErrorMessagesByPath=$._duplicateKeyErrorMessagesByPath||{},$._duplicateKeyErrorMessagesByPath[W]=H._duplicateKeyErrorMessage;if(H.$isMongooseDocumentArray||H.$isSingleNested){if(LW(H,"options.excludeIndexes")!==!0&&LW(H,"schemaOptions.excludeIndexes")!==!0&&LW(H,"schema.options.excludeIndexes")!==!0)J(H.schema,G+W+".");if(H.schema.discriminators!=null){let Q=H.schema.discriminators,K=Object.keys(Q);for(let U of K)J(Q[U],G+W+".",H.schema)}if(H.$isMongooseDocumentArray)continue}let q=H._index||H.embeddedSchemaType&&H.embeddedSchemaType._index;if(q!==!1&&q!=null){let Q={},K=tG1(q),U=K?{...q}:{},R=typeof q==="string"?q:K?q.type:!1;if(R&&X.indexOf(R)!==-1)Q[G+W]=R;else if(U.text)Q[G+W]="text",delete U.text;else{let V=!1;if(q==="descending"||q==="desc")V=!0;else if(q==="ascending"||q==="asc")V=!1;else V=Number(q)===-1;Q[G+W]=V?-1:1}if(delete U.type,$.options.autoIndex!=null)U._autoIndex=$.options.autoIndex;let w=U?.name;if(typeof w==="string")if(Z.has(w))Object.assign(Z.get(w),Q);else B.push([Q,U]),Z.set(w,Q);else B.push([Q,U]),Z.set(w,Q)}}if(D.delete($),G)Y($,G);else $._indexes.forEach(function(W){let H=W[1];oG1($,H)}),B=B.concat($._indexes)}function Y($,G){let E=$._indexes,C=E.length;for(let W=0;W<C;++W){let H=E[W][0],q=E[W][1],Q=Object.keys(H),K=Q.length,U={};for(let w=0;w<K;++w){let V=Q[w];U[G+V]=H[V]}let R=Object.assign({},q);if(q?.partialFilterExpression!=null){R.partialFilterExpression={};let w=q.partialFilterExpression;for(let V of Object.keys(w))R.partialFilterExpression[G+V]=w[V]}B.push([U,R])}}}});var wW=z((OT1,xf)=>{xf.exports=function F(A){switch(A){case"p":A="primary";break;case"pp":A="primaryPreferred";break;case"s":A="secondary";break;case"sp":A="secondaryPreferred";break;case"n":A="nearest";break}return A}});var ff=z((ST1,_f)=>{/*!
 * ignore
 */_f.exports=function F(A){if(!(!A.paths.id&&A.paths._id&&A.options.id))return A;if(A.aliases?.id)return A;return A.virtual("id").get(eG1),A};function eG1(){if(this._id!=null)return this._id.toString();return null}});var bf=z((xT1,gf)=>{gf.exports=function F(A,B){let D=Object.keys(A),X=Object.keys(B);if(D.length!==X.length)return!1;for(let Z=0;Z<D.length;Z++){let J=D[Z];if(J!==X[Z]||A[J]!==B[J])return!1}return!0}});var hf=z((_T1,yf)=>{yf.exports=function F(A,B,D,X){if(X.justOne||X.count){if(A[B]=Array.isArray(D)?D[0]:D,typeof A[B]!=="object")A[B]=X.count?D:null}else A[B]=Array.isArray(D)?D:D==null?[]:[D],A[B]=A[B].filter(function(Z){return Z&&typeof Z==="object"});return A[B]}});var uF=z((fT1,vf)=>{vf.exports=function F(A){return A.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var ZX=z((gT1,mf)=>{mf.exports=FE1;/*!
 * ignore
 */function FE1(F,A){if(F==null)return null;if(typeof F==="boolean")return A;if(typeof F[A]==="boolean")return F[A]?A:null;if(!(A in F))return A;return F[A]}});var IW=z((bT1,df)=>{var AE1=uF(),m3=ZX();df.exports=_9;/*!
 * ignore
 */function _9(F,A,B){if(A==null)return;if(Object.keys(A).some((Y)=>Y[0]==="$")){if(A.$push)J(A.$push);if(A.$addToSet)J(A.$addToSet);if(A.$set!=null){let Y=Object.keys(A.$set);for(let $ of Y)RW(B,$,A.$set,F)}if(A.$setOnInsert!=null){let Y=Object.keys(A.$setOnInsert);for(let $ of Y)RW(B,$,A.$setOnInsert,F)}}let Z=Object.keys(A).filter((Y)=>Y[0]!=="$");for(let Y of Z)RW(B,Y,A,F);function J(Y){for(let $ of Object.keys(Y)){let G=B.path($.replace(/\.\$\./i,".").replace(/.\$$/,""));if(Y[$]&&G&&G.$isMongooseDocumentArray&&G.schema.options.timestamps){let E=G.schema.options.timestamps,C=m3(E,"createdAt"),W=m3(E,"updatedAt");if(Y[$].$each)Y[$].$each.forEach(function(H){if(W!=null)H[W]=F;if(C!=null)H[C]=F;_9(F,H,G.schema)});else{if(W!=null)Y[$][W]=F;if(C!=null)Y[$][C]=F;_9(F,Y[$],G.schema)}}}}}function BE1(F,A,B){let D=A.schema.options.timestamps,X=F.length;if(!D){for(let Y=0;Y<X;++Y)_9(B,F[Y],A.schema);return}let Z=m3(D,"createdAt"),J=m3(D,"updatedAt");for(let Y=0;Y<X;++Y){if(J!=null)F[Y][J]=B;if(Z!=null)F[Y][Z]=B;_9(B,F[Y],A.schema)}}function DE1(F,A,B){let D=A.schema.options.timestamps;if(!D){_9(B,F,A.schema);return}let X=m3(D,"createdAt"),Z=m3(D,"updatedAt");if(Z!=null)F[Z]=B;if(X!=null)F[X]=B;_9(B,F,A.schema)}function RW(F,A,B,D){let X=AE1(A),Z=F.path(X);if(!Z)return;let J=[],Y=X.split(".");for(let $=Y.length-1;$>0;--$){let G=F.path(Y.slice(0,$).join("."));if(G!=null&&(G.$isMongooseDocumentArray||G.$isSingleNested))J.push({parentPath:A.split(".").slice(0,$).join("."),parentSchemaType:G})}if(Array.isArray(B[A])&&Z.$isMongooseDocumentArray)BE1(B[A],Z,D);else if(B[A]&&Z.$isSingleNested)DE1(B[A],Z,D);else if(J.length>0)for(let $ of J){let{parentPath:G,parentSchemaType:E}=$,C=E.schema.options.timestamps,W=m3(C,"updatedAt");if(!C||W==null)continue;if(E.$isSingleNested)B[G+"."+W]=D;else if(E.$isMongooseDocumentArray){let H=A.substring(G.length+1);if(/^\d+$/.test(H)){B[G+"."+H][W]=D;continue}let q=H.indexOf(".");H=q!==-1?H.substring(0,q):H,B[G+"."+H+"."+W]=D}}else if(Z.schema!=null&&Z.schema!=F&&B[A]){let $=Z.schema.options.timestamps,G=m3($,"createdAt"),E=m3($,"updatedAt");if(!$)return;if(E!=null)B[A][E]=D;if(G!=null)B[A][G]=D}}});var PW=z((yT1,lf)=>{/*!
 * ignore
 */var cf=K0(),XE1=B1();lf.exports=ZE1;/*!
 * ignore
 */function ZE1(F,A,B,D,X,Z){let J=D,Y=J,$=cf(X,"timestamps",!0);if(!$||J==null)return D;let G=$?.createdAt===!1,E=$?.updatedAt===!1;if(Z){if(D?.$set)D=D.$set,J.$set={},Y=J.$set;if(!E&&B&&!D[B])Y[B]=F;if(!G&&A&&!D[A])Y[A]=F;return J}if(D=D||{},Array.isArray(J)){if(B==null)return J;return J.push({$set:{[B]:F}}),J}if(J.$set=J.$set||{},!E&&B&&!D.$currentDate?.[B]){let C=!1;if(B.indexOf(".")!==-1){let W=B.split(".");for(let H=1;H<W.length;++H){let q=W.slice(-H).join("."),Q=W.slice(0,-H).join(".");if(D[Q]!=null){D[Q][q]=F,C=!0;break}else if(D.$set?.[Q]){D.$set[Q][q]=F,C=!0;break}}}if(!C)J.$set[B]=F;if(Object.hasOwn(J,B))delete J[B]}if(!G&&A){let C=cf(X,"overwriteImmutable",!1),W=D[A]!=null||D.$set?.[A]!=null;if(C&&W){if(D[A]!=null)J.$set[A]=D[A],delete D[A]}else{if(D[A])delete D[A];if(D.$set?.[A])delete D.$set[A];let H=!1;if(A.indexOf(".")!==-1){let q=A.split(".");for(let Q=1;Q<q.length;++Q){let K=q.slice(-Q).join("."),U=q.slice(0,-Q).join(".");if(D[U]!=null){D[U][K]=F,H=!0;break}else if(D.$set?.[U]){D.$set[U][K]=F,H=!0;break}}}if(!H)J.$setOnInsert=J.$setOnInsert||{},J.$setOnInsert[A]=F}}if(XE1.hasOwnKeys(J.$set)===!1)delete J.$set;return J}});var nf=z((hT1,pf)=>{pf.exports=function F(A,B,D,X,Z){let J=B?.updatedAt===!1,Y=B?.createdAt===!1,$=D!=null?D():A.ownerDocument().constructor.base.now();if(!Y&&(A.isNew||A.$isSubdocument)&&X&&!A.$__getValue(X)&&A.$__isSelected(X))A.$set(X,$,void 0,{overwriteImmutable:!0});if(!J&&Z&&(A.isNew||A.$isModified())){let G=$;if(A.isNew&&X!=null)G=A.$__getValue(X);A.$set(Z,G)}}});var tf=z((vT1,rf)=>{var JE1=IW(),YE1=PW(),$E1=K0(),af=ZX(),GE1=nf(),EE1=T9(),sf=new Set(["replaceOne","findOneAndReplace"]);rf.exports=function F(A,B){let D=A.childSchemas.find(X);function X(C){return!!C.schema.options.timestamps}if(!B&&!D)return;let Z=af(B,"createdAt"),J=af(B,"updatedAt"),Y=B!=null&&Object.hasOwn(B,"currentTime")?B.currentTime:null,$={};if(A.$timestamps={createdAt:Z,updatedAt:J},Z&&!A.paths[Z]){let W=A.base?.get("timestamps.createdAt.immutable")??null??!0;$[Z]={[A.options.typeKey||"type"]:Date,immutable:W}}if(J&&!A.paths[J])$[J]=Date;A.add($),A.pre("save",function C(){let W=$E1(this,"$__.saveOptions.timestamps");if(W===!1)return;GE1(this,W,Y,Z,J)}),A.methods.initializeTimestamps=function(){let C=Y!=null?Y():this.constructor.base.now();if(Z&&!this.get(Z))this.$set(Z,C);if(J&&!this.get(J))this.$set(J,C);if(this.$isSubdocument)return this;let W=this.$getAllSubdocs();for(let H of W)if(H.initializeTimestamps)H.initializeTimestamps();return this},E[EE1.builtInMiddleware]=!0;let G={query:!0,model:!1};A.pre("findOneAndReplace",G,E),A.pre("findOneAndUpdate",G,E),A.pre("replaceOne",G,E),A.pre("update",G,E),A.pre("updateOne",G,E),A.pre("updateMany",G,E);function E(){let C=Y!=null?Y():this.model.base.now();if(sf.has(this.op)&&this.getUpdate()==null)this.setUpdate({});YE1(C,Z,J,this.getUpdate(),this._mongooseOptions,sf.has(this.op)),JE1(C,this.getUpdate(),this.model.schema)}}});var ef=z((mT1,of)=>{var CE1=K1(),WE1=m("util");of.exports=HE1;function HE1(F,A){if(typeof F==="string")return;if(typeof F==="function")return;throw new CE1('Invalid ref at path "'+A+'". Got '+WE1.inspect(F,{depth:0}))}});var OF=z((UE1)=>{/*!
 * ignore
 */var Fg=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);UE1.queryOperations=Fg;/*!
 * ignore
 */var qE1=Fg.concat(["validate"]);UE1.queryMiddlewareFunctions=qE1;/*!
 * ignore
 */var zE1=["aggregate"];UE1.aggregateMiddlewareFunctions=zE1;/*!
 * ignore
 */var QE1=["bulkWrite","createCollection","insertMany"];UE1.modelMiddlewareFunctions=QE1;/*!
 * ignore
 */var KE1=["validate","save","remove","updateOne","deleteOne","init"];UE1.documentMiddlewareFunctions=KE1});var Bg=z((cT1,Ag)=>{Ag.exports=$1().Double});var JX=z((lT1,Yg)=>{var PE1=K1(),Dg=C0(),NE1=B1().deepEqual,ME1=x2(),jE1=bD(),Xg=m("util"),TE1=R9(),NW=D2(),kE1=SD(),Zg=t().populateModelSymbol;/*!
 * ignore
 */class q3 extends Map{constructor(F,A,B,D,X){if(ME1(F)==="Object")F=Object.keys(F).reduce((Z,J)=>Z.concat([[J,F[J]]]),[]);super(F);if(this.$__parent=B?.$__!=null?B:null,this.$__parent?.$isSingleNested&&this.$__parent.$basePath)this.$__path=this.$__parent.$basePath+"."+A,this.$__pathRelativeToParent=A;else if(X?.path)this.$__path=X.path,this.$__pathRelativeToParent=null;else this.$__path=A,this.$__pathRelativeToParent=null;this.$__schemaType=D,this.$__runDeferred()}$init(F,A){if(Jg(F),super.set(F,A),A?.$isSingleNested)if(A.$basePath=this.$__path+"."+F,this.$__pathRelativeToParent!=null)A.$pathRelativeToParent=this.$__pathRelativeToParent+"."+F;else A.$pathRelativeToParent=this.$__path+"."+F}$__set(F,A){super.set(F,A)}get(F,A){if(NW(F,"ObjectId"))F=F.toString();if(A=A||{},A.getters===!1)return super.get(F);return this.$__schemaType.applyGetters(super.get(F),this.$__parent)}set(F,A){if(NW(F,"ObjectId"))F=F.toString();if(Jg(F),A=jE1(A),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:F,value:A});return}let B,D=this.$__parent,X=D?.$__?.populated?D.$populated(J.call(this),!0)||D.$populated(this.$__path,!0):null,Z=this.get(F);if(X!=null){if(this.$__schemaType.$isSingleNested)throw new PE1(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);if(Array.isArray(A)&&this.$__schemaType.$isMongooseArray)A=A.map((Y)=>{if(Y.$__==null)Y=new X.options[Zg](Y);return Y.$__.wasPopulated={value:Y._doc._id},Y});else if(A!=null){if(A.$__==null)A=new X.options[Zg](A);A.$__.wasPopulated={value:A._doc._id}}}else try{let Y=null;if(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap){if(Y={path:J.call(this)},this.$__schemaType.$isSingleNested)Y.pathRelativeToParent=this.$__pathRelativeToParent!=null?this.$__pathRelativeToParent+"."+F:this.$__path+"."+F}A=this.$__schemaType.applySetters(A,this.$__parent,!1,this.get(F),Y)}catch(Y){if(this.$__parent?.$__!=null){this.$__parent.invalidate(J.call(this),Y);return}throw Y}if(super.set(F,A),A?.$isSingleNested)if(this.$__pathRelativeToParent!=null)A.$pathRelativeToParent=this.$__pathRelativeToParent+"."+F;else A.$pathRelativeToParent=this.$__path+"."+F;if(D?.$__!=null&&!NE1(A,Z)){let Y;if(this.$__pathRelativeToParent!=null)Y=this.$__pathRelativeToParent+"."+F;else Y=J.call(this);if(D.markModified(Y),this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)kE1(D,Y)}function J(){if(B)return B;return B=this.$__path+"."+F,B}}clear(){super.clear();let F=this.$__parent;if(F!=null)F.markModified(this.$__path)}delete(F){if(NW(F,"ObjectId"))F=F.toString();return this.set(F,void 0),super.delete(F)}toBSON(){return new Map(this)}toObject(F){if(F?.flattenMaps){let A={},B=this.keys();for(let D of B)A[D]=Dg(this.get(D),F);return A}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(F){if(typeof F?.flattenMaps==="boolean"?F.flattenMaps:!0){let A={},B=this.keys();for(let D of B)A[D]=Dg(this.get(D),F);return A}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(!this.$__deferred)return;for(let F of this.$__deferred)this.set(F.key,F.value);this.$__deferred=null}}if(Xg.inspect.custom)Object.defineProperty(q3.prototype,Xg.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:q3.prototype.inspect});Object.defineProperty(q3.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(q3.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(q3.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(q3.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(q3.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(q3.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function Jg(F){let A=typeof F;if(A!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${A}`);if(F.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${F}"`);if(F.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${F}"`);if(TE1.has(F))throw new Error(`Mongoose maps do not support reserved key name "${F}"`)}Yg.exports=q3});var Gg=z((pT1,$g)=>{$g.exports=$1().UUID});var K8=z((uE1)=>{/*!
 * Module exports.
 */uE1.Array=nC();uE1.Buffer=jD();uE1.Document=uE1.Embedded=H8();uE1.DocumentArray=O9();uE1.Double=Bg();uE1.Decimal128=VD();uE1.ObjectId=k4();uE1.Map=JX();uE1.Subdocument=hD();uE1.UUID=Gg()});var Cg=z((aT1,Eg)=>{var mE1=l2();class SF extends mE1{}var MW=C6();Object.defineProperty(SF.prototype,"enum",MW);Object.defineProperty(SF.prototype,"of",MW);Object.defineProperty(SF.prototype,"castNonArrays",MW);/*!
 * ignore
 */Eg.exports=SF});var Hg=z((sT1,Wg)=>{Wg.exports=jW;function jW(F){if(!Array.isArray(F))return{min:0,max:0,containsNonArrayItem:!0};if(F.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(F.length===1&&!Array.isArray(F[0]))return{min:1,max:1,containsNonArrayItem:!1};let A=jW(F[0]);for(let B=1;B<F.length;++B){let D=jW(F[B]);if(D.min<A.min)A.min=D.min;if(D.max>A.max)A.max=D.max;A.containsNonArrayItem=A.containsNonArrayItem||D.containsNonArrayItem}return A.min=A.min+1,A.max=A.max+1,A}});var xF=z((rT1,zg)=>{var qg=m("assert");zg.exports=function F(A){if(A==null)return A;if(A==="")return null;if(typeof A==="string"||typeof A==="boolean")A=Number(A);if(qg.ok(!isNaN(A)),A instanceof Number)return A.valueOf();if(typeof A==="number")return A;if(!Array.isArray(A)&&typeof A.valueOf==="function")return Number(A.valueOf());if(A.toString&&!Array.isArray(A)&&A.toString()==Number(A))return Number(A);qg.ok(!1)}});var TW=z((tT1,Qg)=>{Qg.exports=function F(A){if(A==null||typeof A!=="object")return A;if(Array.isArray(A)){for(let B=A.length-1;B>=0;--B)if(A[B]===void 0)A.splice(B,1)}for(let B of Object.keys(A))if(A[B]===void 0)delete A[B];return A}});var Vg=z((oT1,Ug)=>{var U8=U2(),Kg=u4(),YX=xF(),dE1=TW(),cE1=new Set(["$and","$or"]),lE1=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),pE1=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),iE1=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),nE1=new Set(["$arrayElemAt","$first","$last"]),aE1=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),sE1=new Set(["$not"]);Ug.exports=function F(A,B,D){if(typeof A==="boolean")return A;if(typeof A!=="object"||A===null)throw new Error("`$expr` must be an object or boolean literal");return T6(A,B,D)};function T6(F,A,B){if(_F(F)||F===null)return F;if(F.$cond!=null)if(Array.isArray(F.$cond))F.$cond=F.$cond.map((X)=>T6(X,A,B));else F.$cond.if=T6(F.$cond.if,A,B),F.$cond.then=T6(F.$cond.then,A,B),F.$cond.else=T6(F.$cond.else,A,B);else if(F.$ifNull!=null)F.$ifNull.map((X)=>T6(X,A,B));else if(F.$switch!=null){if(Array.isArray(F.$switch.branches))F.$switch.branches=F.$switch.branches.map((X)=>T6(X,A,B));if("default"in F.$switch)F.$switch.default=T6(F.$switch.default,A,B)}let D=Object.keys(F);for(let X of D)if(cE1.has(X))F[X]=F[X].map((Z)=>T6(Z,A,B));else if(lE1.has(X))F[X]=oE1(F[X],A,B);else if(pE1.has(X))F[X]=tE1(F[X],A,B);else if(iE1.has(X))F[X]=kW(F[X],A,B);else if(sE1.has(X))F[X]=T6(F[X],A,B);if(F.$in)F.$in=rE1(F.$in,A,B);if(F.$size)F.$size=kW(F.$size,A,B);if(F.$round){let X=F.$round;if(!Array.isArray(X)||X.length<1||X.length>2)throw new U8("Array",X,"$round");F.$round=X.map((Z)=>kW(Z,A,B))}return dE1(F),F}function kW(F){if(!$X(F))return F;try{return YX(F)}catch{throw new U8("Number",F)}}function rE1(F,A,B){let D=F[1];if(!_F(D))return F;let X=F[0],Z=A.path(D.slice(1));if(Z===null){if(B===!1)return F;else if(B==="throw")throw new Kg("$in");return}if(!Z.$isMongooseArray)throw new Error("Path must be an array for $in");return[Z.embeddedSchemaType.cast(X),D]}function tE1(F){if(!Array.isArray(F)){if(!$X(F))return F;try{return YX(F)}catch{throw new U8("Number",F)}}return F.map((A)=>{if(!$X(A))return A;try{return YX(A)}catch{throw new U8("Number",A)}})}function oE1(F,A,B){if(!Array.isArray(F)||F.length!==2)throw new Error("Comparison operator must be an array of length 2");F[0]=T6(F[0],A,B);let D=F[0];if($X(F[1])){let X=null,Z=null,J=null;if(_F(D))X=D.slice(1),Z=A.path(X);else if(typeof D==="object"&&D!=null){for(let $ of Object.keys(D))if(aE1.has($)&&_F(D[$]))X=D[$].slice(1)+"."+$,J=YX;else if(nE1.has($)&&_F(D[$])){if(X=D[$].slice(1)+"."+$,Z=A.path(D[$].slice(1)),Z!=null){if(Z.$isMongooseArray)Z=Z.embeddedSchemaType}}}let Y=typeof F[1]==="object"&&F[1]!=null&&F[1].$literal!=null;if(Z!=null)if(Y)F[1]={$literal:Z.cast(F[1].$literal)};else F[1]=Z.cast(F[1]);else if(J!=null)if(Y)try{F[1]={$literal:J(F[1].$literal)}}catch{throw new U8(J.name.replace(/^cast/,""),F[1],X+".$literal")}else try{F[1]=J(F[1])}catch{throw new U8(J.name.replace(/^cast/,""),F[1],X)}else if(X!=null&&B===!0)return;else if(X!=null&&B==="throw")throw new Kg(X)}else F[1]=T6(F[1]);return F}function _F(F){return typeof F==="string"&&F[0]==="$"}function $X(F){if(typeof F==="string"&&F[0]==="$")return!1;if(typeof F==="object"&&F!==null&&Object.keys(F).find((A)=>A[0]==="$"))return F.$literal!=null;return!0}});var GX=z((eT1,Lg)=>{var eE1=U2();Lg.exports=function F(A,B){if(A==null)return A;if(typeof A?._id==="string")return A._id;if(A.toString&&A.toString!==Object.prototype.toString&&!Array.isArray(A))return A.toString();throw new eE1("string",A,B)}});var Pg=z((Fk1,Ig)=>{var FC1=U2(),wg=ID(),Rg=GX();Ig.exports=function F(A,B){if(A==null||typeof A!=="object")throw new FC1("$text",A,B);if(A.$search!=null)A.$search=Rg(A.$search,B+".$search");if(A.$language!=null)A.$language=Rg(A.$language,B+".$language");if(A.$caseSensitive!=null)A.$caseSensitive=wg(A.$caseSensitive,B+".$caseSensitive");if(A.$diacriticSensitive!=null)A.$diacriticSensitive=wg(A.$diacriticSensitive,B+".$diacriticSensitive");return A}});var fF=z((Ak1,Ng)=>{var AC1=new Set(["$ref","$id","$db"]);Ng.exports=function F(A){return A[0]==="$"&&!AC1.has(A)}});var f9=z((Bk1,kg)=>{/*!
 * Module dependencies.
 */var Mg=U2(),uW=u4(),BC1=gF(),DC1=Vg(),XC1=GX(),ZC1=Pg(),JC1=K0(),jg=gD(),Tg=fF(),YC1=m("util"),xW=I9(),OW=UF(),SW=B1(),$C1=["Polygon","MultiPolygon"];kg.exports=function F(A,B,D,X){if(Array.isArray(B))throw new Error("Query filter must be an object, got an array ",YC1.inspect(B));if(B==null)return B;if(A?.discriminators!=null&&B[A.options.discriminatorKey]!=null)A=jg(A,B[A.options.discriminatorKey])||A;let Z=Object.keys(B),J=Z.length,Y,$,G,E,C,W,H;D=D||{};while(J--)if(C=Z[J],H=B[C],C==="$or"||C==="$nor"||C==="$and"){if(!Array.isArray(H))throw new Mg("Array",H,C);for(let q=H.length-1;q>=0;q--){if(H[q]==null||typeof H[q]!=="object")throw new Mg("Object",H[q],C+"."+q);let Q=Object.keys(H[q]).length,K=H[q][A.options.discriminatorKey];if(K==null)H[q]=F(A,H[q],D,X);else{let U=jg(X.schema,K);H[q]=F(U?U:A,H[q],D,X)}if(SW.hasOwnKeys(H[q])===!1&&Q!==0)H.splice(q,1)}if(H.length===0)delete B[C]}else if(C==="$where"){if(W=typeof H,W!=="string"&&W!=="function")throw new Error("Must have a string or function for $where");if(W==="function")B[C]=H.toString();continue}else if(C==="$expr"){H=DC1(H,A);continue}else if(C==="$elemMatch")H=F(A,H,D,X);else if(C==="$text")H=ZC1(H,C);else if(C==="$comment"&&!Object.hasOwn(A.paths,"$comment"))H=XC1(H,C),B[C]=H;else{if(!A)continue;if(G=A.path(C),!G){let q=C.split("."),Q=q.length;while(Q--){let K=q.slice(0,Q).join("."),U=q.slice(Q).join("."),R=A.path(K),w=R?.schema?.options?.discriminatorKey;if(R?.schema?.discriminators!=null&&w!=null&&U!==w){let V=JC1(B,K+"."+w),N=R.schema.discriminators;if(typeof V==="string"&&N[V]!=null)G=N[V].path(U);else if(V!=null&&Object.keys(V).length===1&&Array.isArray(V.$in)&&V.$in.length===1&&typeof V.$in[0]==="string"&&N[V.$in[0]]!=null)G=N[V.$in[0]].path(U)}}}if(!G){let q=C.split("."),Q=q.length,K,U,R;while(Q--)if(K=q.slice(0,Q).join("."),G=A.path(K),G)break;if(G){if(G.schema){R={},U=q.slice(Q).join("."),R[U]=H;let N=F(G.schema,R,D,X)[U];if(N===void 0)delete B[C];else B[C]=N}else B[C]=H;continue}if(xW(H)){let N="";if(H.$near)N="$near";else if(H.$nearSphere)N="$nearSphere";else if(H.$within)N="$within";else if(H.$geoIntersects)N="$geoIntersects";else if(H.$geoWithin)N="$geoWithin";if(N){let T=new BC1.Number("__QueryCasting__",null,null,A),P=H[N];if(H.$maxDistance!=null)H.$maxDistance=T.castForQuery(null,H.$maxDistance,X);if(H.$minDistance!=null)H.$minDistance=T.castForQuery(null,H.$minDistance,X);if(N==="$within"){let u=P.$center||P.$centerSphere||P.$box||P.$polygon;if(!u)throw new Error("Bad $within parameter: "+JSON.stringify(H));P=u}else if(N==="$near"&&typeof P.type==="string"&&Array.isArray(P.coordinates))P=P.coordinates;else if((N==="$near"||N==="$nearSphere"||N==="$geoIntersects")&&P.$geometry&&typeof P.$geometry.type==="string"&&Array.isArray(P.$geometry.coordinates)){if(P.$maxDistance!=null)P.$maxDistance=T.castForQuery(null,P.$maxDistance,X);if(P.$minDistance!=null)P.$minDistance=T.castForQuery(null,P.$minDistance,X);if(OW(P.$geometry))P.$geometry=P.$geometry.toObject({transform:!1,virtuals:!1});P=P.$geometry.coordinates}else if(N==="$geoWithin"){if(P.$geometry){if(OW(P.$geometry))P.$geometry=P.$geometry.toObject({virtuals:!1});let u=P.$geometry.type;if($C1.indexOf(u)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+u+'", must be "Polygon" or "MultiPolygon"');P=P.$geometry.coordinates}else if(P=P.$box||P.$polygon||P.$center||P.$centerSphere,OW(P))P=P.toObject({virtuals:!1})}_W(P,T,X);continue}}if(A.nested[C])continue;let w="strict"in D?D.strict:A.options.strict,V=GC1(D,A._userProvidedOptions,A.options,X);if(D.upsert&&w){if(w==="throw")throw new uW(C);throw new uW(C,'Path "'+C+'" is not in schema, strict mode is `true`, and upsert is `true`.')}if(V==="throw")throw new uW(C,'Path "'+C+`" is not in schema and strictQuery is 'throw'.`);else if(V)delete B[C]}else if(H==null)continue;else if(SW.isPOJO(H))if($=Object.keys(H).some(Tg),!$)B[C]=G.castForQuery(null,H,X);else{let q=Object.keys(H),Q,K=q.length;while(K--)if(Q=q[K],E=H[Q],Q==="$elemMatch"){if(E&&G?.schema!=null)F(G.schema,E,D,X);else if(E&&G?.$isMongooseArray)if(SW.isPOJO(E)&&E.$not!=null)F(A,E,D,X);else H[Q]=G.castForQuery(Q,E,X)}else if(Q==="$not"){if(E&&G){if(Y=Object.keys(E),Y.length&&Tg(Y[0]))for(let U in E)E[U]=G.castForQuery(U,E[U],X);else H[Q]=G.castForQuery(Q,E,X);continue}}else H[Q]=G.castForQuery(Q,E,X)}else if(Array.isArray(H)&&["Buffer","Array"].indexOf(G.instance)===-1&&!D.sanitizeFilter){let q=[],Q=H;for(let K of Q)q.push(G.castForQuery(null,K,X));B[C]={$in:q}}else B[C]=G.castForQuery(null,H,X)}return B};function _W(F,A,B){if(Array.isArray(F))F.forEach(function(D,X){if(Array.isArray(D)||xW(D))return _W(D,A,B);F[X]=A.castForQuery(null,D,B)});else{let D=Object.keys(F),X=D.length;while(X--){let Z=D[X],J=F[Z];if(Array.isArray(J)||xW(J))_W(J,A,B),F[Z]=J;else F[Z]=A.castForQuery({val:J,context:B})}}}function GC1(F,A,B,D){if("strictQuery"in F)return F.strictQuery;if("strictQuery"in A)return A.strictQuery;let X=D?.mongooseCollection?.conn?.base?.options;if(X){if("strictQuery"in X)return X.strictQuery}return B.strictQuery}});var Og=z((Dk1,ug)=>{var EC1=l2();class V8 extends EC1{}var EX=C6();Object.defineProperty(V8.prototype,"min",EX);Object.defineProperty(V8.prototype,"max",EX);Object.defineProperty(V8.prototype,"enum",EX);Object.defineProperty(V8.prototype,"populate",EX);/*!
 * ignore
 */ug.exports=V8});var L2=z((Xk1,Sg)=>{Sg.exports=function F(A,B,D,X){if(D){if(X)return{bsonType:B};return{bsonType:[B,"null"]}}else{if(X)return{type:A};return{type:[A,"null"]}}}});var bF=z((Zk1,_g)=>{/*!
 * Module requirements.
 */var CC1=U2();/*!
 * ignore
 */function WC1(F){let A=this;if(Array.isArray(F))return F.map(function(B){return xg(A.path,B)});else if(Buffer.isBuffer(F))return F;return xg(A.path,F)}/*!
 * ignore
 */function xg(F,A){let B=Number(A);if(isNaN(B))throw new CC1("number",A,F);return B}_g.exports=WC1});var bW=z((Jk1,fg)=>{/*!
 * Module requirements.
 */var HX=E6(),HC1=Og(),d3=Q0(),qC1=xF(),zC1=L2(),CX=bF(),fW=B1(),gW=d3.CastError;function A0(F,A,B,D){this.enumValues=[],d3.call(this,F,A,"Number",D)}A0.get=d3.get;A0.set=d3.set;A0.setters=[];/*!
 * ignore
 */A0._cast=qC1;A0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */A0._defaultCaster=(F)=>{if(typeof F!=="number")throw new Error;return F};A0.schemaName="Number";A0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */A0.prototype=Object.create(d3.prototype);A0.prototype.constructor=A0;A0.prototype.OptionsConstructor=HC1;/*!
 * ignore
 */A0._checkRequired=(F)=>typeof F==="number"||F instanceof Number;A0.checkRequired=d3.checkRequired;A0.prototype.checkRequired=function F(A,B){if(typeof A==="object"&&d3._isRef(this,A,B,!0))return A!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():A0.checkRequired())(A)};A0.prototype.min=function(F,A){if(this.minValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minValidator},this);if(F!=null){let B=A||HX.messages.Number.min;B=B.replace(/{MIN}/,F),this.validators.push({validator:this.minValidator=function(D){return D==null||D>=F},message:B,type:"min",min:F})}return this};A0.prototype.max=function(F,A){if(this.maxValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxValidator},this);if(F!=null){let B=A||HX.messages.Number.max;B=B.replace(/{MAX}/,F),this.validators.push({validator:this.maxValidator=function(D){return D==null||D<=F},message:B,type:"max",max:F})}return this};A0.prototype.enum=function(F,A){if(this.enumValidator)this.validators=this.validators.filter(function(D){return D.validator!==this.enumValidator},this),this.enumValidator=!1;if(F===void 0||F===!1)return this;if(!Array.isArray(F)){if(fW.isPOJO(F)&&F.values!=null)A=F.message,F=F.values;else if(typeof F==="number")F=Array.prototype.slice.call(arguments),A=null;if(fW.isPOJO(F)){let X=Object.keys(F).sort(),Z=Object.values(F).sort();if(X.length===Z.length&&X.every((J,Y)=>J===String(Z[Y]))&&Z.filter((J)=>typeof J==="number").length===Math.floor(Z.length/2))F=Z.filter((J)=>typeof J==="number");else F=Object.values(F)}A=A||HX.messages.Number.enum}A=A==null?HX.messages.Number.enum:A;for(let D of F)if(D!==void 0)this.enumValues.push(this.cast(D));let B=this.enumValues;return this.enumValidator=(D)=>D==null||B.indexOf(D)!==-1,this.validators.push({validator:this.enumValidator,message:A,type:"enum",enumValues:B}),this};A0.prototype.cast=function(F,A,B,D,X){if(typeof F!=="number"&&d3._isRef(this,F,A,B)){if(F==null||fW.isNonBuiltinObject(F))return this._castRef(F,A,B,X)}let Z=F?._id!==void 0?F._id:F,J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=A0.cast();try{return J(Z)}catch(Y){throw new gW("Number",Z,this.path,Y,this)}};/*!
 * ignore
 */function WX(F){return this.cast(F)}function QC1(F){let A=this;if(!Array.isArray(F))return[this.cast(F)];return F.map(function(B){return A.cast(B)})}var KC1={...d3.prototype.$conditionalHandlers,$bitsAllClear:CX,$bitsAnyClear:CX,$bitsAllSet:CX,$bitsAnySet:CX,$gt:WX,$gte:WX,$lt:WX,$lte:WX,$mod:QC1};Object.defineProperty(A0.prototype,"$conditionalHandlers",{enumerable:!1,value:KC1});A0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new gW("number",A,this.path,null,this);return D.call(this,A,B)}try{A=this.applySetters(A,B)}catch(X){if(X instanceof gW&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}return A};A0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return zC1("number","number",A?.useBsonType,B)};/*!
 * Module exports.
 */fg.exports=A0});var yF=z((VC1)=>{/*!
 * Module requirements.
 */var UC1=bW();/*!
 * ignore
 */VC1.castToNumber=gg;VC1.castArraysOfNumbers=bg;/*!
 * ignore
 */function gg(F){return UC1.cast()(F)}function bg(F,A){F.forEach(function(B,D){if(Array.isArray(B))bg(B,A);else F[D]=gg.call(A,B)})}});var vW=z((NC1)=>{/*!
 * Module requirements.
 */var yg=yF().castArraysOfNumbers,hF=yF().castToNumber;/*!
 * ignore
 */NC1.cast$geoIntersects=PC1;NC1.cast$near=RC1;NC1.cast$within=IC1;function RC1(F){let A=qX();if(Array.isArray(F))return yg(F,this),F;if(hW(this,F),F?.$geometry)return yW(F,this);if(!Array.isArray(F))throw new TypeError("$near must be either an array or an object with a $geometry property");return A.prototype.castForQuery.call(this,null,F)}function yW(F,A){switch(F.$geometry.type){case"Polygon":case"LineString":case"Point":yg(F.$geometry.coordinates,A);break;default:break}return hW(A,F),F}function IC1(F){if(hW(this,F),F.$box||F.$polygon){let A=F.$box?"$box":"$polygon";F[A].forEach((B)=>{if(!Array.isArray(B)){let D="Invalid $within $box argument. Expected an array, received "+B;throw new TypeError(D)}B.forEach((D,X)=>{B[X]=hF.call(this,D)})})}else if(F.$center||F.$centerSphere){let A=F.$center?"$center":"$centerSphere";F[A].forEach((B,D)=>{if(Array.isArray(B))B.forEach((X,Z)=>{B[Z]=hF.call(this,X)});else F[A][D]=hF.call(this,B)})}else if(F.$geometry)yW(F,this);return F}function PC1(F){if(!F.$geometry)return;return yW(F,this),F}function hW(F,A){if(A.$maxDistance)A.$maxDistance=hF.call(F,A.$maxDistance);if(A.$minDistance)A.$minDistance=hF.call(F,A.$minDistance)}});var qX=z((Gk1,mg)=>{/*!
 * Module dependencies.
 */var kC1=PD(),uC1=jC(),vg=K1(),OC1=Cg(),q6=Q0(),zX=q6.CastError,QX=$8(),SC1=QW(),hg=XX(),xC1=Hg(),dW=f9(),_C1=C0(),fC1=x2(),gC1=fF(),KX=m("util"),_4=B1(),bC1=yF().castToNumber,yC1=L2(),cW=vW(),hC1=j6(),vF,mW,vC1=Object.freeze({});function T1(F,A,B,D,X){mW||(mW=K8().Embedded);let Z="type";if(D?.typeKey)Z=D.typeKey;if(this.schemaOptions=D,A){let $={};if(_4.isPOJO(A))if(A[Z])$=_C1(A),delete $[Z],A=A[Z];else A=QX;if(B?.ref!=null&&$.ref==null)$.ref=B.ref;if(A===Object)A=QX;let G=typeof A==="string"?A:_4.getFunctionName(A),E=gF(),C=Object.hasOwn(E,G)?E[G]:A;if(typeof C==="function")if(C===T1)this.embeddedSchemaType=new C(F,$,D,null,X);else this.embeddedSchemaType=new C(F,$,D,X);else if(C instanceof q6){if(this.embeddedSchemaType=C,!(this.embeddedSchemaType instanceof mW))this.embeddedSchemaType.path=F}}this.$isMongooseArray=!0,q6.call(this,F,B,"Array",X);let J,Y;if(this.defaultValue!=null)J=this.defaultValue,Y=typeof J==="function";if(!("defaultValue"in this)||this.defaultValue!=null){let $=function(){return Y?J.call(this):J!=null?[].concat(J):[]};$.$runBeforeSetters=!Y,this.default($)}}T1.schemaName="Array";T1.options={castNonArrays:!0};/*!
 * ignore
 */T1.defaultOptions={};T1.set=q6.set;T1.setters=[];T1.get=q6.get;/*!
 * Inherits from SchemaType.
 */T1.prototype=Object.create(q6.prototype);T1.prototype.constructor=T1;T1.prototype.OptionsConstructor=OC1;/*!
 * ignore
 */T1._checkRequired=q6.prototype.checkRequired;T1.checkRequired=q6.checkRequired;/*!
 * Virtuals defined on this array itself.
 */T1.prototype.virtuals=null;T1.prototype.checkRequired=function F(A,B){if(typeof A==="object"&&q6._isRef(this,A,B,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():T1.checkRequired())(A)};T1.prototype.enum=function(){let F=this;while(!0){let B=F?.embeddedSchemaType?.instance;if(B==="Array"){F=F.embeddedSchemaType;continue}if(B!=="String"&&B!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+B);break}let A=arguments;if(!Array.isArray(arguments)&&_4.isObject(arguments))A=_4.object.vals(A);return F.embeddedSchemaType.enum.apply(F.embeddedSchemaType,A),this};T1.prototype.applyGetters=function(F,A){if(A?.$__!=null&&A.$populated(this.path))return F;return q6.prototype.applyGetters.call(this,F,A)};T1.prototype._applySetters=function(F,A,B,D){if(this.embeddedSchemaType.$isMongooseArray&&T1.options.castNonArrays){let X=0,Z=this;while(Z!=null&&Z.$isMongooseArray&&!Z.$isMongooseDocumentArray)++X,Z=Z.embeddedSchemaType;if(F!=null&&F.length!==0){let J=xC1(F);if(J.min===J.max&&J.max<X&&J.containsNonArrayItem)for(let Y=J.max;Y<X;++Y)F=[F]}}return q6.prototype._applySetters.call(this,F,A,B,D)};T1.prototype.cast=function(F,A,B,D,X){vF||(vF=K8().Array);let Z,J;if(Array.isArray(F)){if(!F.length&&A){let H=A.schema.indexedPaths(),q=this.path;for(Z=0,J=H.length;Z<J;++Z){let K=H[Z][0][q];if(K==="2dsphere"||K==="2d")return}let Q=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(Q!=null){for(Z=0,J=H.length;Z<J;++Z)if(H[Z][0][Q]==="2dsphere")return}}X=X||vC1;let G=_4.isMongooseArray(F)?F.__array:F,E=X.path||this.path;if(X.arrayPathIndex!=null)E+="."+X.arrayPathIndex;if(F=vF(G,E,A,this),G=F.__array,B&&A?.$__!=null&&A.$populated(this.path))return F;let C=this.embeddedSchemaType,W=C.$isMongooseArray;if(C&&this.embeddedSchemaType.constructor!==QX)try{let H=G.length;for(Z=0;Z<H;Z++){let q={};if(W){if(X.arrayPath!=null)q.arrayPathIndex=Z;else if(C._arrayParentPath!=null)q.arrayPathIndex=Z}if(X.hydratedPopulatedDocs)q.hydratedPopulatedDocs=X.hydratedPopulatedDocs;G[Z]=C.applySetters(G[Z],A,B,void 0,q)}}catch(H){throw new zX("["+H.kind+"]",KX.inspect(F),this.path+"."+Z,H,this)}return F}let Y=this.options.castNonArrays??T1.options.castNonArrays;if(B||Y){if(A&&B)A.markModified(this.path);return this.cast([F],A,B)}throw new zX("Array",KX.inspect(F),this.path,null,this)};/*!
 * ignore
 */T1.prototype._castForPopulate=function F(A,B){if(vF||(vF=K8().Array),Array.isArray(A)){let D,X=A.__array?A.__array:A,Z=X.length;if(this.embeddedSchemaType&&this.embeddedSchemaType.constructor!==QX)try{for(D=0;D<Z;D++){let J={};if(this.embeddedSchemaType.$isMongooseArray&&this.embeddedSchemaType._arrayParentPath!=null)J.arrayPathIndex=D;X[D]=this.embeddedSchemaType.cast(X[D],B,!1,void 0,J)}}catch(J){throw new zX("["+J.kind+"]",KX.inspect(A),this.path+"."+D,J,this)}return A}throw new zX("Array",KX.inspect(A),this.path,null,this)};T1.prototype.$toObject=T1.prototype.toObject;/*!
 * ignore
 */T1.prototype.discriminator=function(...F){let A=this;while(A.$isMongooseArray&&!A.$isMongooseDocumentArray)A=A.embeddedSchemaType;if(!A.$isMongooseDocumentArray)throw new vg("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return A.discriminator(...F)};/*!
 * ignore
 */T1.prototype.clone=function(){let F=Object.assign({},this.options),A=new this.constructor(this.path,this.embeddedSchemaType,F,this.schemaOptions,this.parentSchema);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;return A};T1.prototype._castForQuery=function(F,A){let B=this.embeddedSchemaType,D=B?.schema?.options?.discriminatorKey,X=B?.discriminators;if(F&&X&&typeof D==="string")if(X[F[D]])B=X[F[D]];else{let Z=hC1(X,F[D]);if(Z)B=Z}if(Array.isArray(F))this.setters.reverse().forEach((Z)=>{F=Z.call(this,F,this)}),F=F.map(function(Z){if(_4.isObject(Z)&&Z.$elemMatch)return Z;return B.castForQuery(null,Z,A)});else F=B.castForQuery(null,F,A);return F};T1.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can't use "+F+" with Array.");return D.call(this,A,B)}else return this._castForQuery(A,B)};T1.prototype.virtual=function F(A,B){if(A instanceof hg||fC1(A)==="VirtualType")return this.virtual(A.path,A.options);if(B=new SC1(B),_4.hasUserDefinedProperty(B,["ref","refPath"]))throw new vg("Cannot set populate virtual as a property of an array");let D=new hg(B,A);if(this.virtuals===null)this.virtuals={};return this.virtuals[A]=D,D};function mC1(F,A){if(!Array.isArray(F))F=[F];return F=F.map((B)=>{if(!_4.isObject(B))return B;if(B.$elemMatch!=null)return{$elemMatch:dW(this.embeddedSchemaType.schema,B.$elemMatch,null,this?.$$context)};let D={};return D[this.path]=B,dW(this.embeddedSchemaType.schema,D,null,this?.$$context)[this.path]},this),this.castForQuery(null,F,A)}function dC1(F,A){let B=Object.keys(F),D=B.length;for(let X=0;X<D;++X){let Z=B[X],J=F[Z];if(gC1(Z)&&J!=null)F[Z]=this.castForQuery(Z,J,A)}return F}var r1=T1.prototype.$conditionalHandlers={};r1.$all=mC1;r1.$options=String;r1.$elemMatch=dC1;r1.$geoIntersects=cW.cast$geoIntersects;r1.$or=lW("$or");r1.$and=lW("$and");r1.$nor=lW("$nor");function lW(F){return function A(B,D){if(!Array.isArray(B))throw new TypeError("conditional "+F+" requires an array");let X=[];for(let Z of B)X.push(dW(this.embeddedSchemaType.schema??D.schema,Z,null,this?.$$context));return X}}r1.$near=r1.$nearSphere=cW.cast$near;r1.$within=r1.$geoWithin=cW.cast$within;r1.$size=r1.$minDistance=r1.$maxDistance=bC1;r1.$exists=kC1;r1.$type=uC1;r1.$eq=r1.$gt=r1.$gte=r1.$lt=r1.$lte=r1.$not=r1.$regex=r1.$ne=T1.prototype._castForQuery;r1.$nin=q6.prototype.$conditionalHandlers.$nin;r1.$in=q6.prototype.$conditionalHandlers.$in;T1.prototype.toJSONSchema=function F(A){let B=this.getEmbeddedSchemaType(),D=this.options.required&&typeof this.options.required!=="function";return{...yC1("array","array",A?.useBsonType,D),items:B.toJSONSchema(A)}};T1.prototype.autoEncryptionType=function F(){return"array"};/*!
 * Module exports.
 */mg.exports=T1});var lg=z((Ek1,cg)=>{var{Long:cC1}=$1(),pW=9223372036854775807n,iW=-9223372036854775808n,dg=`Mongoose only supports BigInts between ${iW} and ${pW} because MongoDB does not support arbitrary precision integers`;cg.exports=function F(A){if(A==null)return A;if(A==="")return null;if(typeof A==="bigint"){if(A>pW||A<iW)throw new Error(dg);return A}if(A instanceof cC1)return A.toBigInt();if(typeof A==="string"||typeof A==="number"){if(A=BigInt(A),A>pW||A<iW)throw new Error(dg);return A}throw new Error(`Cannot convert value to BigInt: "${A}"`)}});var ng=z((Ck1,ig)=>{/*!
 * Module dependencies.
 */var pg=U2(),L8=Q0(),lC1=lg(),pC1=L2();function U0(F,A,B,D){L8.call(this,F,A,"BigInt",D)}U0.schemaName="BigInt";U0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */U0.prototype=Object.create(L8.prototype);U0.prototype.constructor=U0;/*!
 * ignore
 */U0._cast=lC1;U0.set=L8.set;U0.setters=[];U0.get=L8.get;U0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */U0._checkRequired=(F)=>F!=null;U0.checkRequired=L8.checkRequired;U0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};U0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=U0.cast();try{return A(F)}catch(B){throw new pg("BigInt",F,this.path,B,this)}};/*!
 * ignore
 */var iC1={...L8.prototype.$conditionalHandlers,$gt:UX,$gte:UX,$lt:UX,$lte:UX};Object.defineProperty(U0.prototype,"$conditionalHandlers",{enumerable:!1,value:iC1});/*!
 * ignore
 */function UX(F,A){return this.castForQuery(null,F,A)}U0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],D)return D.call(this,A);return this.applySetters(A,B)}try{return this.applySetters(A,B)}catch(X){if(X instanceof pg&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};U0.prototype._castNullish=function F(A){if(typeof A==="undefined")return A;if((typeof this.constructor.cast==="function"?this.constructor.cast():U0.cast())==null)return A;return A};U0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return pC1("string","long",A?.useBsonType,B)};U0.prototype.autoEncryptionType=function F(){return"long"};/*!
 * Module exports.
 */ig.exports=U0});var rg=z((Wk1,sg)=>{/*!
 * Module dependencies.
 */var ag=U2(),w8=Q0(),mF=ID(),nC1=L2();function B0(F,A,B,D){w8.call(this,F,A,"Boolean",D)}B0.schemaName="Boolean";B0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */B0.prototype=Object.create(w8.prototype);B0.prototype.constructor=B0;/*!
 * ignore
 */B0._cast=mF;B0.set=w8.set;B0.setters=[];B0.get=w8.get;B0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */B0._defaultCaster=(F)=>{if(F!=null&&typeof F!=="boolean")throw new Error;return F};/*!
 * ignore
 */B0._checkRequired=(F)=>F===!0||F===!1;B0.checkRequired=w8.checkRequired;B0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};Object.defineProperty(B0,"convertToTrue",{get:()=>mF.convertToTrue,set:(F)=>{mF.convertToTrue=F}});Object.defineProperty(B0,"convertToFalse",{get:()=>mF.convertToFalse,set:(F)=>{mF.convertToFalse=F}});B0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=B0.cast();try{return A(F)}catch(B){throw new ag("Boolean",F,this.path,B,this)}};var aC1={...w8.prototype.$conditionalHandlers};Object.defineProperty(B0.prototype,"$conditionalHandlers",{enumerable:!1,value:aC1});B0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],D)return D.call(this,A);return this.applySetters(A,B)}try{return this.applySetters(A,B)}catch(X){if(X instanceof ag&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};B0.prototype._castNullish=function F(A){if(typeof A==="undefined")return A;let B=typeof this.constructor.cast==="function"?this.constructor.cast():B0.cast();if(B==null)return A;if(B.convertToFalse instanceof Set&&B.convertToFalse.has(A))return!1;if(B.convertToTrue instanceof Set&&B.convertToTrue.has(A))return!0;return A};B0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return nC1("boolean","bool",A?.useBsonType,B)};B0.prototype.autoEncryptionType=function F(){return"bool"};/*!
 * Module exports.
 */sg.exports=B0});var og=z((Hk1,tg)=>{var sC1=l2();class nW extends sC1{}var rC1=C6();Object.defineProperty(nW.prototype,"subtype",rC1);/*!
 * ignore
 */tg.exports=nW});var Ab=z((qk1,Fb)=>{/*!
 * Module dependencies.
 */var R8=jD(),tC1=og(),c3=Q0(),oC1=L2(),VX=bF(),eg=B1(),aW=R8.Binary,wX=c3.CastError;function v0(F,A,B,D){c3.call(this,F,A,"Buffer",D)}v0.schemaName="Buffer";v0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */v0.prototype=Object.create(c3.prototype);v0.prototype.constructor=v0;v0.prototype.OptionsConstructor=tC1;/*!
 * ignore
 */v0._checkRequired=(F)=>!!F?.length;v0.set=c3.set;v0.setters=[];v0.get=c3.get;v0.checkRequired=c3.checkRequired;v0.prototype.checkRequired=function(F,A){if(c3._isRef(this,F,A,!0))return!!F;return this.constructor._checkRequired(F)};v0.prototype.cast=function(F,A,B,D,X){let Z;if(c3._isRef(this,F,A,B)){if(F?.isMongooseBuffer)return F;if(Buffer.isBuffer(F)){if(!F?.isMongooseBuffer){if(F=new R8(F,[this.path,A]),this.options.subtype!=null)F._subtype=this.options.subtype}return F}if(F instanceof aW){if(Z=new R8(F.value(!0),[this.path,A]),typeof F.sub_type!=="number")throw new wX("Buffer",F,this.path,null,this);return Z._subtype=F.sub_type,Z}if(F==null||eg.isNonBuiltinObject(F))return this._castRef(F,A,B,X)}if(F?._id)F=F._id;if(F?.isMongooseBuffer)return F;if(Buffer.isBuffer(F)){if(!F?.isMongooseBuffer){if(F=new R8(F,[this.path,A]),this.options.subtype!=null)F._subtype=this.options.subtype}return F}if(F instanceof aW){if(Z=new R8(F.value(!0),[this.path,A]),typeof F.sub_type!=="number")throw new wX("Buffer",F,this.path,null,this);return Z._subtype=F.sub_type,Z}if(F===null)return F;let J=typeof F;if(J==="string"||J==="number"||Array.isArray(F)||J==="object"&&F.type==="Buffer"&&Array.isArray(F.data)){if(J==="number")F=[F];if(Z=new R8(F,[this.path,A]),this.options.subtype!=null)Z._subtype=this.options.subtype;return Z}if(eg.isPOJO(F)&&(F.$binary instanceof aW||typeof F.$binary==="string")){let Y=this.cast(Buffer.from(F.$binary,"base64"));if(F.$type!=null)return Y._subtype=F.$type,Y}throw new wX("Buffer",F,this.path,null,this)};v0.prototype.subtype=function(F){return this.options.subtype=F,this};/*!
 * ignore
 */function LX(F,A){return this.castForQuery(null,F,A)}var eC1={...c3.prototype.$conditionalHandlers,$bitsAllClear:VX,$bitsAnyClear:VX,$bitsAllSet:VX,$bitsAnySet:VX,$gt:LX,$gte:LX,$lt:LX,$lte:LX};Object.defineProperty(v0.prototype,"$conditionalHandlers",{enumerable:!1,value:eC1});v0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can't use "+F+" with Buffer.");return D.call(this,A)}let X;try{X=this.applySetters(A,B)}catch(Z){if(Z instanceof wX&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}return X?X.toObject({transform:!1,virtuals:!1}):X};v0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return oC1("string","binData",A?.useBsonType,B)};v0.prototype.autoEncryptionType=function F(){return"binData"};/*!
 * Module exports.
 */Fb.exports=v0});var Db=z((zk1,Bb)=>{var FW1=l2();class dF extends FW1{}var sW=C6();Object.defineProperty(dF.prototype,"min",sW);Object.defineProperty(dF.prototype,"max",sW);Object.defineProperty(dF.prototype,"expires",sW);/*!
 * ignore
 */Bb.exports=dF});var Zb=z((Qk1,Xb)=>{var rW=m("assert");Xb.exports=function F(A){if(A==null||A==="")return null;if(A instanceof Date)return rW.ok(!isNaN(A.valueOf())),A;let B;if(rW.ok(typeof A!=="boolean"),A instanceof Number||typeof A==="number")B=new Date(A);else if(typeof A==="string"&&!isNaN(Number(A))&&(Number(A)>=275761||Number(A)<-271820))B=new Date(Number(A));else if(typeof A.valueOf==="function")B=new Date(A.valueOf());else B=new Date(A);if(!isNaN(B.valueOf()))return B;rW.ok(!1)}});var Gb=z((Kk1,$b)=>{/*!
 * Module requirements.
 */var Jb=E6(),AW1=Db(),f4=Q0(),BW1=Zb(),DW1=L2(),XW1=x2(),ZW1=B1(),Yb=f4.CastError;function t1(F,A,B,D){f4.call(this,F,A,"Date",D)}t1.schemaName="Date";t1.defaultOptions={};/*!
 * Inherits from SchemaType.
 */t1.prototype=Object.create(f4.prototype);t1.prototype.constructor=t1;t1.prototype.OptionsConstructor=AW1;/*!
 * ignore
 */t1._cast=BW1;t1.set=f4.set;t1.setters=[];t1.get=f4.get;t1.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */t1._defaultCaster=(F)=>{if(F!=null&&!(F instanceof Date))throw new Error;return F};t1.prototype.expires=function(F){if(XW1(this._index)!=="Object")this._index={};return this._index.expires=F,ZW1.expires(this._index),this};/*!
 * ignore
 */t1._checkRequired=(F)=>F instanceof Date;t1.checkRequired=f4.checkRequired;t1.prototype.checkRequired=function(F,A){if(typeof F==="object"&&f4._isRef(this,F,A,!0))return F!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():t1.checkRequired())(F)};t1.prototype.min=function(F,A){if(this.minValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minValidator},this);if(F){let B=A||Jb.messages.Date.min;if(typeof B==="string")B=B.replace(/{MIN}/,F===Date.now?"Date.now()":F.toString());let D=this;this.validators.push({validator:this.minValidator=function(X){let Z=F;if(typeof F==="function"&&F!==Date.now)Z=Z.call(this);let J=Z===Date.now?Z():D.cast(Z);return X===null||X.valueOf()>=J.valueOf()},message:B,type:"min",min:F})}return this};t1.prototype.max=function(F,A){if(this.maxValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxValidator},this);if(F){let B=A||Jb.messages.Date.max;if(typeof B==="string")B=B.replace(/{MAX}/,F===Date.now?"Date.now()":F.toString());let D=this;this.validators.push({validator:this.maxValidator=function(X){let Z=F;if(typeof Z==="function"&&Z!==Date.now)Z=Z.call(this);let J=Z===Date.now?Z():D.cast(Z);return X===null||X.valueOf()<=J.valueOf()},message:B,type:"max",max:F})}return this};t1.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=t1.cast();try{return A(F)}catch(B){throw new Yb("date",F,this.path,B,this)}};function RX(F){return this.cast(F)}var JW1={...f4.prototype.$conditionalHandlers,$gt:RX,$gte:RX,$lt:RX,$lte:RX};Object.defineProperty(t1.prototype,"$conditionalHandlers",{enumerable:!1,value:JW1});t1.prototype.castForQuery=function(F,A,B){if(F==null)try{return this.applySetters(A,B)}catch(X){if(X instanceof Yb&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}let D=this.$conditionalHandlers[F];if(!D)throw new Error("Can't use "+F+" with Date.");return D.call(this,A)};t1.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return DW1("string","date",A?.useBsonType,B)};t1.prototype.autoEncryptionType=function F(){return"date"};/*!
 * Module exports.
 */$b.exports=t1});var Cb=z((Uk1,Eb)=>{var g9=VD(),YW1=m("assert");Eb.exports=function F(A){if(A==null)return A;if(typeof A==="object"&&typeof A.$numberDecimal==="string")return g9.fromString(A.$numberDecimal);if(A instanceof g9)return A;if(typeof A==="string")return g9.fromString(A);if(typeof Buffer==="function"&&Buffer.isBuffer(A))return new g9(A);if(typeof Uint8Array==="function"&&A instanceof Uint8Array)return new g9(A);if(typeof A==="number")return g9.fromString(String(A));if(typeof A.valueOf==="function"&&typeof A.valueOf()==="string")return g9.fromString(A.valueOf());YW1.ok(!1)}});var Hb=z((Vk1,Wb)=>{/*!
 * Module dependencies.
 */var l3=Q0(),$W1=l3.CastError,GW1=Cb(),EW1=L2(),tW=D2();function N0(F,A,B,D){l3.call(this,F,A,"Decimal128",D)}N0.schemaName="Decimal128";N0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */N0.prototype=Object.create(l3.prototype);N0.prototype.constructor=N0;/*!
 * ignore
 */N0._cast=GW1;N0.set=l3.set;N0.setters=[];N0.get=l3.get;N0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */N0._defaultCaster=(F)=>{if(F!=null&&!tW(F,"Decimal128"))throw new Error;return F};/*!
 * ignore
 */N0._checkRequired=(F)=>tW(F,"Decimal128");N0.checkRequired=l3.checkRequired;N0.prototype.checkRequired=function F(A,B){if(l3._isRef(this,A,B,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():N0.checkRequired())(A)};N0.prototype.cast=function(F,A,B,D,X){if(l3._isRef(this,F,A,B)){if(tW(F,"Decimal128"))return F;return this._castRef(F,A,B,X)}let Z;if(typeof this._castFunction==="function")Z=this._castFunction;else if(typeof this.constructor.cast==="function")Z=this.constructor.cast();else Z=N0.cast();try{return Z(F)}catch(J){throw new $W1("Decimal128",F,this.path,J,this)}};/*!
 * ignore
 */function IX(F){return this.cast(F)}var CW1={...l3.prototype.$conditionalHandlers,$gt:IX,$gte:IX,$lt:IX,$lte:IX};Object.defineProperty(N0.prototype,"$conditionalHandlers",{enumerable:!1,value:CW1});N0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return EW1("string","decimal",A?.useBsonType,B)};N0.prototype.autoEncryptionType=function F(){return"decimal"};/*!
 * Module exports.
 */Wb.exports=N0});var Qb=z((Lk1,zb)=>{var WW1=l2();class PX extends WW1{}var qb=C6();Object.defineProperty(PX.prototype,"_id",qb);Object.defineProperty(PX.prototype,"minimize",qb);zb.exports=PX});var Ub=z((wk1,Kb)=>{/*!
 * ignore
 */Kb.exports=function F(A){A.s.hooks.pre("save",!1,async function D(){if(this.$isSubdocument)return;let X=this.$getAllSubdocs({useCache:!0});if(!X.length)return;let Z=this.$__.saveOptions;if(await Promise.all(X.map((J)=>J._execDocumentPreHooks("save",Z))),this.$__.saveOptions)this.$__.saveOptions.__subdocs=null},null,!0),A.s.hooks.pre("save",async function D(){let X=this.$__.removedSubdocs;if(!X?.length)return;let Z=[];for(let J of X)Z.push(J._execDocumentPreHooks("deleteOne"));await Promise.all(Z)}),A.s.hooks.post("save",async function D(){let X=this.$__.removedSubdocs;if(!X?.length)return;let Z=[];for(let J of X)Z.push(J._execDocumentPostHooks("deleteOne"));this.$__.removedSubdocs=null,await Promise.all(Z)}),A.s.hooks.post("save",async function D(){if(this.$isSubdocument)return;let X=this.$getAllSubdocs({useCache:!0});if(!X.length)return;let Z=[];for(let J of X)Z.push(J._execDocumentPostHooks("save"));await Promise.all(Z)},null,!0)}});var Lb=z((Rk1,FH)=>{var HW1=t().objectIdSymbol,Vb=B1();/*!
 * ignore
 */FH.exports=function F(A){A.post("init",function B(){return eW.call(this),this}),A.pre("save",function B(){oW.call(this)}),A.pre("deleteOne",{document:!0,query:!1},function B(){oW.call(this)}),A.pre("updateOne",{document:!0,query:!1},function B(){oW.call(this)}),A.post("save",function B(){eW.call(this)})};/*!
 * ignore
 */function oW(){let F,A;if(this.$__.shardval){F=Object.keys(this.$__.shardval),A=F.length,this.$where=this.$where||{};for(let B=0;B<A;++B)this.$where[F[B]]=this.$__.shardval[F[B]]}}/*!
 * ignore
 */FH.exports.storeShard=eW;/*!
 * ignore
 */function eW(){let F=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!Vb.isPOJO(F))return;let A=this.$__.shardval={},B=Object.keys(F),D=B.length,X;for(let Z=0;Z<D;++Z)if(X=this.$__getValue(B[Z]),X==null)A[B[Z]]=X;else if(Vb.isMongooseObject(X))A[B[Z]]=X.toObject({depopulate:!0,_isNested:!0});else if(X instanceof Date||X[HW1])A[B[Z]]=X;else if(typeof X.valueOf==="function")A[B[Z]]=X.valueOf();else A[B[Z]]=X}});var Ib=z((Ik1,Rb)=>{var I8=t().arrayAtomicsSymbol,AH=t().sessionNewDocuments,BH=B1();Rb.exports=function F(A){A.pre("save",function B(){let D=this.$session();if(D==null)return;if(D.transaction==null||D[AH]==null)return;if(!D[AH].has(this)){let X={};if(this.isNew)X.isNew=!0;if(this.$__schema.options.versionKey)X.versionKey=this.get(this.$__schema.options.versionKey);X.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),X.atomics=qW1(this),D[AH].set(this,X)}})};function qW1(F,A){let B=new Map;A=A||new Map;let D=Object.keys(F.$__.activePaths.init).concat(Object.keys(F.$__.activePaths.modify));for(let Z of D){let J=F.$__getValue(Z);if(Array.isArray(J)&&BH.isMongooseDocumentArray(J)&&J.length&&J[I8]!=null&&BH.hasOwnKeys(J[I8])){let Y=A.get(Z)||{};B.set(Z,wb(Y,J[I8]))}}let X=F.$__dirty();for(let Z of X){let{path:J,value:Y}=Z;if(Y?.[I8]!=null&&BH.hasOwnKeys(Y[I8])){let $=A.get(J)||{};B.set(J,wb($,Y[I8]))}}return B}function wb(F,A){if(F=F||{},A.$pullAll!=null)F.$pullAll=(F.$pullAll||[]).concat(A.$pullAll);if(A.$push!=null)F.$push=F.$push||{},F.$push.$each=(F.$push.$each||[]).concat(A.$push.$each);if(A.$addToSet!=null)F.$addToSet=(F.$addToSet||[]).concat(A.$addToSet);if(A.$set!=null)F.$set=Array.isArray(A.$set)?[...A.$set]:Object.assign({},A.$set);return F}});var Nb=z((Pk1,Pb)=>{/*!
 * ignore
 */Pb.exports=function F(A){A.pre("save",!1,async function D(X){if(this.$isSubdocument)return;let Z=X&&typeof X==="object"&&"validateBeforeSave"in X,J;if(Z)J=!!X.validateBeforeSave;else J=this.$__schema.options.validateBeforeSave;if(J){let $=X&&typeof X==="object"&&"validateModifiedOnly"in X?{validateModifiedOnly:X.validateModifiedOnly}:null;await this.$validate($).then(()=>{this.$op="save"})}},null,!0)}});var DH=z((zW1)=>{zW1.saveSubdocs=Ub();zW1.sharding=Lb();zW1.trackTransaction=Ib();zW1.validateBeforeSave=Nb()});var Tb=z((Mk1,jb)=>{var Mb=DH();jb.exports=function F(A){for(let B of Object.values(Mb))B(A,{deduplicate:!0});A.plugins=Object.values(Mb).map((B)=>({fn:B,opts:{deduplicate:!0}})).concat(A.plugins)}});var Ob=z((jk1,ub)=>{var LW1=MD(),wW1=R9(),RW1=D2(),IW1=k4(),PW1=Q0(),kb=I9();ub.exports=function F(A,B,D,X){let Z=Object.keys(B),J=0,Y=Z.length,$;if(D=D||"",X=X||new WeakSet,X.has(B))return;X.add(B);while(J<Y){if($=Z[J++],!D){if($==="discriminators"||$==="base"||$==="_applyDiscriminators"||$==="_userProvidedOptions"||$==="options"||$==="tree")continue}if(D==="tree"&&B?.instanceOfSchema)continue;if(wW1.has($))continue;if(A[$]==null)A[$]=B[$];else if(kb(B[$])){if(!kb(A[$]))A[$]={};if(B[$]!=null){if(B[$].$isSingleNested&&A[$].$isMongooseDocumentArray||B[$].$isMongooseDocumentArray&&A[$].$isSingleNested||B[$].$isMongooseDocumentArrayElement&&A[$].$isMongooseDocumentArrayElement)continue;else if(B[$].instanceOfSchema){if(A[$].instanceOfSchema)LW1(A[$],B[$].clone(),!0);else A[$]=B[$].clone();continue}else if(RW1(B[$],"ObjectId")){A[$]=new IW1(B[$]);continue}else if(B[$]instanceof PW1){if(A[$]==null)A[$]=B[$].clone();if(!B[$].$isMongooseDocumentArray&&!B[$].$isSingleNested)continue}}F(A[$],B[$],D?D+"."+$:$,X)}}if(B?.instanceOfSchema)A.tree=Object.assign({},B.tree,A.tree)}});var NX=z((Tk1,_b)=>{var Sb=$8(),NW1=Tb(),MW1=C0(),jW1=_D().defineKey,TW1=K0(),XH=B1(),kW1=Ob(),xb={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0,statics:!0};function uW1(F,A){if(F.encryptionType()==null&&A.encryptionType()==null)return;let B=X(D(F),D(A));for(let Z of B){if(F._hasEncryptedField(Z)&&A._hasEncryptedField(Z))throw new Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${Z}`);if(F._hasEncryptedField(Z)||A._hasEncryptedField(Z))throw new Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${Z}`)}function D(Z){return[...Object.keys(Z.paths),...Object.keys(Z.singleNestedPaths)]}function*X(Z,J){let Y=new Set(Z);for(let $ of J)if(Y.has($))yield $}}/*!
 * ignore
 */_b.exports=function F(A,B,D,X,Z,J,Y){if(!D?.instanceOfSchema)throw new Error("You must pass a valid discriminator Schema");if(J=J==null?!0:J,A.schema.discriminatorMapping&&!A.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+B+'" can only be a discriminator of the root model');if(Z){let W=TW1(A.base,"options.applyPluginsToDiscriminators",!1)||!J;A.base._applyPlugins(D,{skipTopLevel:!W})}else if(!J)NW1(D);let $=A.schema.options.discriminatorKey,G=A.schema.path($);if(G!=null){if(!XH.hasUserDefinedProperty(G.options,"select"))G.options.select=!0;G.options.$skipDiscriminatorCheck=!0}else{let W={};W[$]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},W[$][A.schema.options.typeKey]=String,A.schema.add(W),jW1({prop:$,prototype:A.prototype,options:A.schema.options})}if(D.path($)&&D.path($).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+B+'" cannot have field with name "'+$+'"');let E=B;if(typeof X==="string"&&X.length||X!=null)E=X;uW1(A.schema,D);function C(W,H){if(W._baseSchema=H,H.paths._id&&H.paths._id.options&&!H.paths._id.options.auto)W.remove("_id");let q=Object.keys(H.paths),Q=[];for(let P of q){if(W.nested[P]){Q.push(P);continue}if(P.indexOf(".")===-1)continue;let u=P.split(".").slice(0,-1),O="";for(let k of u)if(O+=(O.length?".":"")+k,W.paths[O]instanceof Sb||W.singleNestedPaths[O]instanceof Sb)Q.push(P)}W.obj={...W.obj},kW1(W,H),W._gatherChildSchemas();for(let P of Q)delete W.paths[P];W.childSchemas.forEach((P)=>{P.model.prototype.$__setSchema(P.schema)});let K={};if(K[$]={default:E,select:!0,set:function(P){if(P===E||Array.isArray(E)&&XH.deepEqual(P,E))return E;throw new Error(`Can't set discriminator key "`+$+'"')},$skipDiscriminatorCheck:!0},K[$][W.options.typeKey]=G?G.options[W.options.typeKey]:String,W.add(K),W.discriminatorMapping={key:$,value:E,isRoot:!1},H.options.collection)W.options.collection=H.options.collection;let U=W.options.toJSON,R=W.options.toObject,w=W.options._id,V=W.options.id,N=Object.keys(W.options);W.options.discriminatorKey=H.options.discriminatorKey;let T=W._userProvidedOptions;for(let P of N)if(!xb[P]){if(P in T&&!XH.deepEqual(W.options[P],H.options[P]))throw new Error("Can't customize discriminator option "+P+" (can only modify "+Object.keys(xb).join(", ")+")")}W.options=MW1(H.options);for(let P of Object.keys(T))W.options[P]=T[P];if(U)W.options.toJSON=U;if(R)W.options.toObject=R;if(typeof w!=="undefined")W.options._id=w;if(W.options.id=V,J)W.s.hooks=A.schema.s.hooks.merge(W.s.hooks);if(Z)W.plugins=Array.prototype.slice.call(H.plugins);W.callQueue=H.callQueue.concat(W.callQueue),delete W._requiredpaths}if(C(D,A.schema),!A.discriminators)A.discriminators={};if(!A.schema.discriminatorMapping)A.schema.discriminatorMapping={key:$,value:null,isRoot:!0};if(!A.schema.discriminators)A.schema.discriminators={};if(A.schema.discriminators[B]=D,A.discriminators[B]&&!D.options.overwriteModels&&!Y)throw new Error('Discriminator with name "'+B+'" already exists');return D}});var MX=z((kk1,fb)=>{var OW1=j6();fb.exports=function F(A,B,D){let X=A.schema.options.discriminatorKey,Z=B?.[X];if(Z==null)Z=D;if(A.discriminators&&Z!=null)if(A.discriminators[Z])A=A.discriminators[Z];else{let J=OW1(A.discriminators,Z);if(J)A=J}return A}});var ZH=z((uk1,gb)=>{var SW1=UW();gb.exports=function F(A,B){if(B?._id==null)return A;if(A=A.clone(),!B._id)A.remove("_id"),A.options._id=!1;else if(!A.paths._id)SW1(A),A.options._id=!0;return A}});var YH=z((Ok1,bb)=>{/*!
 * Module dependencies.
 */var xW1=K1();class JH extends xW1{constructor(F,A){let B=`Cannot create use schema for property "${F}" because the schema has the ${A} option enabled.`;super(B)}}Object.defineProperty(JH.prototype,"name",{value:"InvalidSchemaOptionError"});/*!
 * exports
 */bb.exports=JH});var CH=z((Sk1,db)=>{/*!
 * Module dependencies.
 */var yb=U2(),$H=m("events").EventEmitter,_W1=kD(),fW1=Qb(),b9=Q0(),gW1=OD(),bW1=PD(),hb=yF().castToNumber,yW1=L2(),hW1=NX(),GH=vW(),EH=MX(),vW1=ZH(),mW1=n6().internalToObjectOptions,dW1=C8(),vb=B1(),cW1=YH(),jX;db.exports=m0;function m0(F,A,B,D){if(F.options.timeseries)throw new cW1(A,"timeseries");let X=m0.defaultOptions?._id;if(X!=null)B=B||{},B._id=X;F=vW1(F,B),this.Constructor=mb(F,null,B),this.Constructor.path=A,this.Constructor.prototype.$basePath=A,this.schema=F,this.$isSingleNested=!0,this.base=F.base,b9.call(this,A,B,"Embedded",D)}/*!
 * ignore
 */m0.prototype=Object.create(b9.prototype);m0.prototype.constructor=m0;m0.prototype.OptionsConstructor=fW1;/*!
 * ignore
 */function mb(F,A,B){jX||(jX=hD());let D=function Z(J,Y,$){if(this.$__parent=$,jX.apply(this,arguments),$==null)return;this.$session($.$session())};F._preCompile();let X=A?.prototype??jX.prototype;D.prototype=Object.create(X),D.prototype.$__setSchema(F),D.prototype.constructor=D,D.prototype.$__schemaTypeOptions=B,D.$__required=B?.required,D.base=F.base,D.schema=F,D.$isSingleNested=!0,D.events=new $H,D.prototype.toBSON=function(){return this.toObject(mW1)};for(let Z in F.methods)D.prototype[Z]=F.methods[Z];for(let Z in F.statics)D[Z]=F.statics[Z];for(let Z in $H.prototype)D[Z]=$H.prototype[Z];return D}/*!
 * ignore
 */var z3={...b9.prototype.$conditionalHandlers};z3.$geoWithin=function F(A,B){return{$geometry:this.castForQuery(null,A.$geometry,B)}};/*!
 * ignore
 */z3.$near=z3.$nearSphere=GH.cast$near;z3.$within=z3.$geoWithin=GH.cast$within;z3.$geoIntersects=GH.cast$geoIntersects;z3.$minDistance=hb;z3.$maxDistance=hb;z3.$exists=bW1;Object.defineProperty(m0.prototype,"$conditionalHandlers",{enumerable:!1,value:z3});m0.prototype.cast=function(F,A,B,D,X){if(F?.$isSingleNested&&F.parent===A)return F;if(!B&&F!=null&&(typeof F!=="object"||Array.isArray(F)))throw new _W1(this.path,F);let Z=this.schema.path(this.schema.options.discriminatorKey),J=Z==null?null:Z.getDefault(A),Y=EH(this.Constructor,F,J),$,G=A?.$__?.selected,E=this.path,C=G==null?null:Object.keys(G).reduce((W,H)=>{if(H.startsWith(E+"."))W=W||{},W[H.substring(E.length+1)]=G[H];return W},null);if(B){if($=new Y(void 0,C,A,{defaults:!1}),delete $.$__.defaults,X.path!=null)X={...X},delete X.path;$.$init(F,X);let W=dW1(C);gW1($,C,W)}else{if(X=Object.assign({},X,{priorDoc:D}),vb.hasOwnKeys(F)===!1)return new Y({},C,A,X);return new Y(F,C,A,X)}return $};m0.prototype.castForQuery=function(F,A,B,D){let X;if(F!=null){if(X=this.$conditionalHandlers[F],!X)throw new Error("Can't use "+F);return X.call(this,A)}if(A==null)return A;let Z=EH(this.Constructor,A);if(A instanceof Z)return A;if(this.options.runSetters)A=this._applySetters(A,B);let J=D?.strict??void 0;try{A=new Z(A,J)}catch(Y){if(!(Y instanceof yb))throw new yb("Embedded",A,this.path,Y,this);throw Y}return A};m0.prototype.doValidate=async function F(A,B,D){let X=EH(this.Constructor,A);if(A&&!(A instanceof X))A=new X(A,null,B?.$__!=null?B:null);if(D?.skipSchemaValidators){if(!A)return;return A.validate()}if(await b9.prototype.doValidate.call(this,A,B,D),A!=null)await A.validate()};m0.prototype.doValidateSync=function(F,A,B){if(!B?.skipSchemaValidators){let D=b9.prototype.doValidateSync.call(this,F,A);if(D)return D}if(!F)return;return F.validateSync()};m0.prototype.discriminator=function(F,A,B){B=B||{};let D=vb.isPOJO(B)?B.value:B,X=typeof B.clone==="boolean"?B.clone:!0;if(A.instanceOfSchema&&X)A=A.clone();return A=hW1(this.Constructor,F,A,D,null,null,B.overwriteExisting),this.Constructor.discriminators[F]=mb(A,this.Constructor),this.Constructor.discriminators[F]};/*!
 * ignore
 */m0.defaultOptions={};m0.set=b9.set;m0.setters=[];m0.get=b9.get;/*!
 * ignore
 */m0.prototype.toJSON=function F(){return{path:this.path,options:this.options}};/*!
 * ignore
 */m0.prototype.clone=function(){let F=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0},this.parentSchema);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;return F.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),F._appliedDiscriminators=this._appliedDiscriminators,F};m0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return{...this.schema.toJSONSchema(A),...yW1("object","object",A?.useBsonType,B)}}});var lb=z((xk1,cb)=>{/*!
 * Module dependencies.
 */var lW1=K1(),WH=Q0(),pW1=CH(),iW1=MX();function p3(F,A,B,D){if(this.$parentSchemaType=B?.$parentSchemaType,!this.$parentSchemaType)throw new lW1("Cannot create DocumentArrayElement schematype without a parent");delete B.$parentSchemaType,WH.call(this,F,B,"DocumentArrayElement",D),this.$isMongooseDocumentArrayElement=!0,this.Constructor=B?.Constructor,this.schema=A}p3.schemaName="DocumentArrayElement";p3.defaultOptions={};/*!
 * Inherits from SchemaType.
 */p3.prototype=Object.create(WH.prototype);p3.prototype.constructor=p3;p3.prototype.cast=function(...F){return this.$parentSchemaType.cast(...F)[0]};p3.prototype.doValidate=async function F(A,B,D){let X=iW1(this.Constructor,A);if(A&&!(A instanceof X))A=new X(A,B,null,null,D?.index??null);return pW1.prototype.doValidate.call(this,A,B,D)};p3.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let F=WH.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,F.Constructor=this.Constructor,F.schema=this.schema,F};/*!
 * Module exports.
 */cb.exports=p3});var nb=z((_k1,ib)=>{var nW1=l2();class TX extends nW1{}var pb=C6();Object.defineProperty(TX.prototype,"excludeIndexes",pb);Object.defineProperty(TX.prototype,"_id",pb);/*!
 * ignore
 */ib.exports=TX});var By=z((fk1,Ay)=>{/*!
 * Module dependencies.
 */var ab=U2(),aW1=lb(),HH=m("events").EventEmitter,zH=qX(),sW1=nb(),cF=Q0(),sb=f9(),rb=L2(),rW1=NX(),tb=ZH(),tW1=bD(),oW1=fF(),P8=B1(),kX=MX(),eW1=YH(),ob=t().arrayAtomicsSymbol,qH=t().arrayPathSymbol,FH1=t().documentArrayParent,i3,y9;function W0(F,A,B,D,X){if(A.options?.timeseries)throw new eW1(F,"timeseries");let Z=W0.defaultOptions?._id;if(Z!=null)D=D||{},D._id=Z;if(D?._id!=null)A=tb(A,D);else if(B?._id!=null)A=tb(A,B);let J=Fy(A,B);J.prototype.$basePath=F,J.path=F;let Y=this,$=new aW1(F+".$",A,{...D||{},$parentSchemaType:Y,Constructor:J});zH.call(this,F,$,B,null,X),this.schema=A,this.schemaOptions=D||{},this.$isMongooseDocumentArray=!0,this.Constructor=J,J.base=A.base;let G=this.defaultValue;if(!("defaultValue"in this)||G!=null)this.default(function(){let E=G.call(this);if(E!=null&&!Array.isArray(E))E=[E];return E})}W0.schemaName="DocumentArray";W0.options={castNonArrays:!0};/*!
 * Inherits from SchemaArray.
 */W0.prototype=Object.create(zH.prototype);W0.prototype.constructor=W0;W0.prototype.OptionsConstructor=sW1;Object.defineProperty(W0.prototype,"$conditionalHandlers",{enumerable:!1,value:{...zH.prototype.$conditionalHandlers}});/*!
 * ignore
 */function Fy(F,A,B){y9||(y9=H8());function D(){if(y9.apply(this,arguments),this.__parentArray==null||this.__parentArray.getArrayParent()==null)return;this.$session(this.__parentArray.getArrayParent().$session())}F._preCompile();let X=B?.prototype??y9.prototype;D.prototype=Object.create(X),D.prototype.$__setSchema(F),D.schema=F,D.prototype.constructor=D,D.$isArraySubdocument=!0,D.events=new HH,D.base=F.base;for(let Z in F.methods)D.prototype[Z]=F.methods[Z];for(let Z in F.statics)D[Z]=F.statics[Z];for(let Z in HH.prototype)D[Z]=HH.prototype[Z];return D.options=A,D}W0.prototype.discriminator=function(F,A,B){if(typeof F==="function")F=P8.getFunctionName(F);B=B||{};let D=P8.isPOJO(B)?B.value:B,X=typeof B.clone==="boolean"?B.clone:!0;if(A.instanceOfSchema&&X)A=A.clone();A=rW1(this.Constructor,F,A,D,null,null,B?.overwriteExisting);let Z=Fy(A,null,this.Constructor);return Z.baseCasterConstructor=this.Constructor,Object.defineProperty(Z,"name",{value:F}),this.Constructor.discriminators[F]=Z,this.Constructor.discriminators[F]};W0.prototype.doValidate=async function F(A,B,D){if(i3||(i3=O9()),await cF.prototype.doValidate.call(this,A,B),D?.updateValidator)return;if(!P8.isMongooseDocumentArray(A))A=new i3(A,this.path,B);let X=[];for(let Z=0;Z<A.length;++Z){let J=A[Z];if(J==null)continue;if(!(J instanceof y9)){let Y=kX(this.Constructor,A[Z]);J=A[Z]=new Y(J,A,void 0,void 0,Z)}if(D?.validateModifiedOnly&&!J.$isModified())continue;X.push(J.$__validate(null,D))}await Promise.all(X)};W0.prototype.doValidateSync=function(F,A,B){let D=cF.prototype.doValidateSync.call(this,F,A);if(D!=null)return D;let X=F?.length,Z=null;if(!X)return;for(let J=0,Y=X;J<Y;++J){let $=F[J];if(!$)continue;if(!($ instanceof y9)){let E=kX(this.Constructor,F[J]);$=F[J]=new E($,F,void 0,void 0,J)}if(B?.validateModifiedOnly&&!$.$isModified())continue;let G=$.validateSync(B);if(G&&Z==null)Z=G}return Z};/*!
 * ignore
 */W0.prototype.getDefault=function(F,A,B){let D=typeof this.defaultValue==="function"?this.defaultValue.call(F):this.defaultValue;if(D==null)return D;if(B?.skipCast)return D;if(i3||(i3=O9()),!Array.isArray(D))D=[D];D=new i3(D,this.path,F);for(let X=0;X<D.length;++X){let J=new(kX(this.Constructor,D[X]))({},D,void 0,void 0,X);J.$init(D[X]),J.isNew=!0,Object.assign(J.$__.activePaths.default,J.$__.activePaths.init),J.$__.activePaths.init={},D[X]=J}return D};var AH1=Object.freeze({transform:!1,virtuals:!1}),eb=Object.freeze({skipId:!1,willInit:!0});W0.prototype.cast=function(F,A,B,D,X){if(i3||(i3=O9()),F?.[qH]!=null&&F===D)return F;let Z,J;X=X||{};let Y=X.path||this.path;if(!Array.isArray(F)){if(!B&&!W0.options.castNonArrays)throw new ab("DocumentArray",F,this.path,null,this);if(!!A&&B)A.markModified(Y);return this.cast([F],A,B,D,X)}if(!X.skipDocumentArrayCast||P8.isMongooseDocumentArray(F))F=new i3(F,Y,A,this);if(D!=null)F[ob]=D[ob]||{};if(X.arrayPathIndex!=null)F[qH]=Y+"."+X.arrayPathIndex;let $=P8.isMongooseDocumentArray(F)?F.__array:F,G=$.length;for(let E=0;E<G;++E){if(!$[E])continue;let C=kX(this.Constructor,$[E]),W=tW1($[E],!0);if($[E]!==W)$[E]=W;if($[E]instanceof y9){if($[E][FH1]!==A)if(B){let H=new C(null,F,eb,Z,E);$[E]=H.$init($[E])}else{let H=new C($[E],F,void 0,void 0,E);$[E]=H}if($[E].__index==null)$[E].$setIndex(E)}else if($[E]!=null)if(B){if(A)Z||(Z=BH1(this,A.$__.selected,B));else Z=!0;J=new C(null,F,eb,Z,E),$[E]=J.$init($[E],X)}else{if(typeof D?.id==="function")J=D.id($[E]._id);if(D&&J&&P8.deepEqual(J.toObject(AH1),$[E]))J.set($[E]),$[E]=J;else try{J=new C($[E],F,void 0,void 0,E),$[E]=J}catch(H){throw new ab("embedded",$[E],F[qH],H,this)}}}return F};/*!
 * ignore
 */W0.prototype.clone=function(){let F=Object.assign({},this.options),A=new this.constructor(this.path,this.schema,F,this.schemaOptions,this.parentSchema);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;return A.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),A._appliedDiscriminators=this._appliedDiscriminators,A};/*!
 * ignore
 */W0.prototype.applyGetters=function(F,A){return cF.prototype.applyGetters.call(this,F,A)};function BH1(F,A,B){if(!(B&&A))return;let D=F.path+".",X=Object.keys(A),Z=X.length,J={},Y,$,G;while(Z--)if($=X[Z],$.startsWith(D)){if(G=$.substring(D.length),G==="$")continue;if(G.startsWith("$."))G=G.substring(2);Y||(Y=!0),J[G]=A[$]}return Y&&J||void 0}/*!
 * ignore
 */W0.defaultOptions={};W0.set=cF.set;W0.setters=[];W0.get=cF.get;/*!
 * Handle casting $elemMatch operators
 */W0.prototype.$conditionalHandlers.$elemMatch=DH1;function DH1(F,A){let B=Object.keys(F),D=B.length;for(let Y=0;Y<D;++Y){let $=B[Y],G=F[$];if(oW1($)&&G!=null)F[$]=this.castForQuery($,G,A)}let X=this?.Constructor?.schema?.options?.discriminatorKey,Z=this?.Constructor?.schema?.discriminators||{};if(X!=null&&F[X]!=null&&Z[F[X]]!=null)return sb(Z[F[X]],F,null,this?.$$context);let J=this.Constructor.schema??A.schema;return sb(J,F,null,this?.$$context)}W0.prototype.toJSONSchema=function F(A){let B=rb("object","object",A?.useBsonType,!1),D=this.options.required&&typeof this.options.required!=="function";return{...rb("array","array",A?.useBsonType,D),items:{...B,...this.schema.toJSONSchema(A)}}};/*!
 * Module exports.
 */Ay.exports=W0});var Zy=z((gk1,Xy)=>{var Dy=m("assert"),QH=$1(),XH1=D2();Xy.exports=function F(A){if(A==null||A==="")return null;let B;if(XH1(A,"Long"))B=A.toNumber();else if(typeof A==="string")try{return B=QH.Double.fromString(A),B}catch{Dy.ok(!1)}else if(typeof A==="object"){let D=A.valueOf()??A.toString();if(typeof D==="string")try{return B=QH.Double.fromString(D),B}catch{Dy.ok(!1)}else B=Number(D)}else B=Number(A);return new QH.Double(B)}});var Yy=z((bk1,Jy)=>{/*!
 * Module dependencies.
 */var ZH1=U2(),N8=Q0(),JH1=Zy(),YH1=L2();function O0(F,A,B,D){N8.call(this,F,A,"Double",D)}O0.schemaName="Double";O0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */O0.prototype=Object.create(N8.prototype);O0.prototype.constructor=O0;/*!
 * ignore
 */O0._cast=JH1;O0.set=N8.set;O0.setters=[];O0.get=N8.get;/*!
 * ignore
 */O0._defaultCaster=(F)=>{if(F!=null){if(F._bsontype!=="Double")throw new Error}return F};O0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */O0._checkRequired=(F)=>F!=null;O0.checkRequired=N8.checkRequired;O0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};O0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=O0.cast();try{return A(F)}catch(B){throw new ZH1("Double",F,this.path,B,this)}};/*!
 * ignore
 */function uX(F){return this.cast(F)}var $H1={...N8.prototype.$conditionalHandlers,$gt:uX,$gte:uX,$lt:uX,$lte:uX};Object.defineProperty(O0.prototype,"$conditionalHandlers",{enumerable:!1,value:$H1});O0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return YH1("number","double",A?.useBsonType,B)};O0.prototype.autoEncryptionType=function F(){return"double"};/*!
 * Module exports.
 */Jy.exports=O0});var Gy=z((yk1,$y)=>{var GH1=D2(),EH1=m("assert");$y.exports=function F(A){if(A==null)return A;if(A==="")return null;let B=GH1(A,"Long")?A.toNumber():Number(A),D=2147483647,X=-2147483648;if(B===(B|0)&&B>=X&&B<=D)return B;EH1.ok(!1)}});var Wy=z((hk1,Cy)=>{/*!
 * Module dependencies.
 */var Ey=U2(),M8=Q0(),CH1=Gy(),WH1=L2(),OX=bF();function M0(F,A,B,D){M8.call(this,F,A,"Int32",D)}M0.schemaName="Int32";M0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */M0.prototype=Object.create(M8.prototype);M0.prototype.constructor=M0;/*!
 * ignore
 */M0._cast=CH1;M0.set=M8.set;M0.setters=[];M0.get=M8.get;/*!
 * ignore
 */M0._defaultCaster=(F)=>{if(F!=null){if(typeof F!=="number"||F!==(F|0)||F<-2147483648||F>2147483647)throw new Error}return F};M0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */M0._checkRequired=(F)=>F!=null;M0.checkRequired=M8.checkRequired;M0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};M0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=M0.cast();try{return A(F)}catch(B){throw new Ey("Int32",F,this.path,B,this)}};/*!
 * ignore
 */var HH1={...M8.prototype.$conditionalHandlers,$gt:SX,$gte:SX,$lt:SX,$lte:SX,$bitsAllClear:OX,$bitsAnyClear:OX,$bitsAllSet:OX,$bitsAnySet:OX};Object.defineProperty(M0.prototype,"$conditionalHandlers",{enumerable:!1,value:HH1});/*!
 * ignore
 */function SX(F,A){return this.castForQuery(null,F,A)}M0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],D)return D.call(this,A);return this.applySetters(A,B)}try{return this.applySetters(A,B)}catch(X){if(X instanceof Ey&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};M0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return WH1("number","int",A?.useBsonType,B)};M0.prototype.autoEncryptionType=function F(){return"int"};/*!
 * Module exports.
 */Cy.exports=M0});var qy=z((vk1,Hy)=>{var qH1=l2();class KH extends qH1{}var zH1=C6();Object.defineProperty(KH.prototype,"of",zH1);Hy.exports=KH});var Ky=z((mk1,Qy)=>{/*!
 * ignore
 */var UH=JX(),QH1=qy(),zy=Q0(),KH1=L2(),UH1=K1(),VH1=S9(),j8=B1();class T8 extends zy{constructor(F,A,B,D){super(F,A,"Map",D);this.$isSchemaMap=!0,this._createNestedSchemaType(D,F,A,B)}set(F,A){return zy.set(F,A)}cast(F,A,B,D,X){if(F instanceof UH)return F;let Z=this.path;if(B){let J=new UH({},Z,A,this.$__schemaType,X),Y=J.$__pathRelativeToParent!=null?J.$__pathRelativeToParent:J.$__path;if(F instanceof global.Map)for(let $ of F.keys()){let G=F.get($);if(G==null)G=J.$__schemaType._castNullish(G);else G=J.$__schemaType.cast(G,A,!0,null,{...X,path:Y+"."+$});J.$init($,G)}else for(let $ of Object.keys(F)){let G=F[$];if(G==null)G=J.$__schemaType._castNullish(G);else G=J.$__schemaType.cast(G,A,!0,null,{...X,path:Y+"."+$});J.$init($,G)}return J}return new UH(F,Z,A,this.$__schemaType,X)}clone(){let F=super.clone();if(this.$__schemaType!=null)F.$__schemaType=this.$__schemaType.clone();return F}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema(F){let A=F?.useBsonType,B=this.getEmbeddedSchemaType(),D=this.options.required&&typeof this.options.required!=="function",X=KH1("object","object",A,D);return X.additionalProperties=B.toJSONSchema(F),X}autoEncryptionType(){return"object"}}T8.schemaName="Map";T8.prototype.OptionsConstructor=QH1;T8.defaultOptions={};/*!
 * ignore
 */T8.prototype._createNestedSchemaType=function F(A,B,D,X){let Z=B+".$*",J={type:{}};if(j8.hasUserDefinedProperty(D,"of")){if(j8.isPOJO(D.of)&&j8.hasOwnKeys(D.of)&&!j8.hasUserDefinedProperty(D.of,A.options.typeKey))J={[A.options.typeKey]:new VH1(D.of)};else if(j8.isPOJO(D.of))J=Object.assign({},D.of);else J={[A.options.typeKey]:D.of};if(J[A.options.typeKey]&&J[A.options.typeKey].instanceOfSchema)J[A.options.typeKey].eachPath((G,E)=>{if(E.options.select===!0||E.options.select===!1)throw new UH1('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+B+"."+G+'"')});if(j8.hasUserDefinedProperty(D,"ref"))J.ref=D.ref}this.$__schemaType=A.interpretAsType(Z,J,X)};Qy.exports=T8});var Ly=z((dk1,Vy)=>{var LH1=l2();class xX extends LH1{}var Uy=C6();Object.defineProperty(xX.prototype,"auto",Uy);Object.defineProperty(xX.prototype,"populate",Uy);/*!
 * ignore
 */Vy.exports=xX});var Iy=z((ck1,Ry)=>{var wy=D2(),VH=k4();Ry.exports=function F(A){if(A==null)return A;if(wy(A,"ObjectId"))return A;if(A._id){if(wy(A._id,"ObjectId"))return A._id;if(A._id.toString instanceof Function)return new VH(A._id.toString())}if(A.toString instanceof Function)return new VH(A.toString());return new VH(A)}});var jy=z((lk1,My)=>{/*!
 * Module dependencies.
 */var wH1=Ly(),n3=Q0(),RH1=Iy(),IH1=L2(),PH1=x2(),wH=k4(),RH=D2(),Py=B1(),NH1=n3.CastError,LH;function H0(F,A,B,D){let X=typeof F==="string"&&F.length===24&&/^[a-f0-9]+$/i.test(F),Z=A?.suppressWarning;if((X||typeof F==="undefined")&&!Z)Py.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema.");n3.call(this,F,A,"ObjectId",D)}H0.schemaName="ObjectId";H0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */H0.prototype=Object.create(n3.prototype);H0.prototype.constructor=H0;H0.prototype.OptionsConstructor=wH1;H0.get=n3.get;H0.set=n3.set;H0.setters=[];H0.prototype.auto=function(F){if(F)this.default(Ny),this.set(jH1);return this};/*!
 * ignore
 */H0._checkRequired=(F)=>RH(F,"ObjectId");/*!
 * ignore
 */H0._cast=RH1;H0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */H0._defaultCaster=(F)=>{if(!RH(F,"ObjectId"))throw new Error(F+" is not an instance of ObjectId");return F};H0.checkRequired=n3.checkRequired;H0.prototype.checkRequired=function F(A,B){if(n3._isRef(this,A,B,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():H0.checkRequired())(A)};H0.prototype.cast=function(F,A,B,D,X){if(!RH(F,"ObjectId")&&n3._isRef(this,F,A,B)){if((PH1(F)||"").toLowerCase()==="objectid")return new wH(F.toHexString());if(F==null||Py.isNonBuiltinObject(F))return this._castRef(F,A,B,X)}let Z;if(typeof this._castFunction==="function")Z=this._castFunction;else if(typeof this.constructor.cast==="function")Z=this.constructor.cast();else Z=H0.cast();try{return Z(F)}catch(J){throw new NH1("ObjectId",F,this.path,J,this)}};/*!
 * ignore
 */function _X(F){return this.cast(F)}var MH1={...n3.prototype.$conditionalHandlers,$gt:_X,$gte:_X,$lt:_X,$lte:_X};Object.defineProperty(H0.prototype,"$conditionalHandlers",{enumerable:!1,value:MH1});/*!
 * ignore
 */function Ny(){return new wH}Ny.$runBeforeSetters=!0;function jH1(F){if(LH||(LH=H3()),this instanceof LH){if(F===void 0)return new wH}return F}H0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return IH1("string","objectId",A?.useBsonType,B)};H0.prototype.autoEncryptionType=function F(){return"objectId"};/*!
 * Module exports.
 */My.exports=H0});var ky=z((pk1,Ty)=>{var TH1=l2();class k6 extends TH1{}var Q3=C6();Object.defineProperty(k6.prototype,"enum",Q3);Object.defineProperty(k6.prototype,"match",Q3);Object.defineProperty(k6.prototype,"lowercase",Q3);Object.defineProperty(k6.prototype,"trim",Q3);Object.defineProperty(k6.prototype,"uppercase",Q3);Object.defineProperty(k6.prototype,"minLength",Q3);Object.defineProperty(k6.prototype,"minlength",Q3);Object.defineProperty(k6.prototype,"maxLength",Q3);Object.defineProperty(k6.prototype,"maxlength",Q3);Object.defineProperty(k6.prototype,"populate",Q3);/*!
 * ignore
 */Ty.exports=k6});var IH=z((ik1,xy)=>{/*!
 * Module dependencies.
 */var a3=Q0(),pF=E6(),kH1=ky(),uH1=GX(),OH1=L2(),uy=B1(),SH1=D2(),Sy=a3.CastError;function O1(F,A,B,D){this.enumValues=[],this.regExp=null,a3.call(this,F,A,"String",D)}O1.schemaName="String";O1.defaultOptions={};/*!
 * Inherits from SchemaType.
 */O1.prototype=Object.create(a3.prototype);O1.prototype.constructor=O1;Object.defineProperty(O1.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:kH1});/*!
 * ignore
 */O1._cast=uH1;O1.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */O1._defaultCaster=(F)=>{if(F!=null&&typeof F!=="string")throw new Error;return F};O1.get=a3.get;O1.set=a3.set;O1.setters=[];/*!
 * ignore
 */O1._checkRequired=(F)=>(F instanceof String||typeof F==="string")&&F.length;O1.checkRequired=a3.checkRequired;O1.prototype.enum=function(){if(this.enumValidator)this.validators=this.validators.filter(function(D){return D.validator!==this.enumValidator},this),this.enumValidator=!1;if(arguments[0]===void 0||arguments[0]===!1)return this;let F,A;if(uy.isObject(arguments[0]))if(Array.isArray(arguments[0].values))F=arguments[0].values,A=arguments[0].message;else F=uy.object.vals(arguments[0]),A=pF.messages.String.enum;else F=arguments,A=pF.messages.String.enum;for(let D of F)if(D!==void 0)this.enumValues.push(this.cast(D));let B=this.enumValues;return this.enumValidator=function(D){return D==null||~B.indexOf(D)},this.validators.push({validator:this.enumValidator,message:A,type:"enum",enumValues:B}),this};O1.prototype.lowercase=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.toLowerCase();return A})};O1.prototype.uppercase=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.toUpperCase();return A})};O1.prototype.trim=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.trim();return A})};O1.prototype.minlength=function(F,A){if(this.minlengthValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minlengthValidator},this);if(F!=null){let B=A||pF.messages.String.minlength;B=B.replace(/{MINLENGTH}/,F),this.validators.push({validator:this.minlengthValidator=function(D){return D===null||D.length>=F},message:B,type:"minlength",minlength:F})}return this};O1.prototype.minLength=O1.prototype.minlength;O1.prototype.maxlength=function(F,A){if(this.maxlengthValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxlengthValidator},this);if(F!=null){let B=A||pF.messages.String.maxlength;B=B.replace(/{MAXLENGTH}/,F),this.validators.push({validator:this.maxlengthValidator=function(D){return D===null||D.length<=F},message:B,type:"maxlength",maxlength:F})}return this};O1.prototype.maxLength=O1.prototype.maxlength;O1.prototype.match=function F(A,B){let D=B||pF.messages.String.match,X=function(Z){if(!A)return!1;return A.lastIndex=0,Z!=null&&Z!==""?A.test(Z):!0};return this.validators.push({validator:X,message:D,type:"regexp",regexp:A}),this};O1.prototype.checkRequired=function F(A,B){if(typeof A==="object"&&a3._isRef(this,A,B,!0))return A!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():O1.checkRequired())(A)};O1.prototype.cast=function(F,A,B,D,X){if(typeof F!=="string"&&a3._isRef(this,F,A,B))return this._castRef(F,A,B,X);let Z;if(typeof this._castFunction==="function")Z=this._castFunction;else if(typeof this.constructor.cast==="function")Z=this.constructor.cast();else Z=O1.cast();try{return Z(F)}catch{throw new Sy("string",F,this.path,null,this)}};/*!
 * ignore
 */function lF(F,A){return this.castForQuery(null,F,A)}/*!
 * ignore
 */function xH1(F,A){let B=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(D){return B.castForQuery(null,D,A)})}/*!
 * ignore
 */function Oy(F){if(F==null)return this._castNullish(F);return this.cast(F,this)}var _H1={...a3.prototype.$conditionalHandlers,$all:xH1,$gt:lF,$gte:lF,$lt:lF,$lte:lF,$options:Oy,$regex:function F(A){if(Object.prototype.toString.call(A)==="[object RegExp]")return A;return Oy.call(this,A)},$not:lF};Object.defineProperty(O1.prototype,"$conditionalHandlers",{enumerable:!1,value:_H1});O1.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can't use "+F+" with String.");return D.call(this,A,B)}if(Object.prototype.toString.call(A)==="[object RegExp]"||SH1(A,"BSONRegExp"))return A;try{return this.applySetters(A,B)}catch(X){if(X instanceof Sy&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};O1.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return OH1("string","string",A?.useBsonType,B)};O1.prototype.autoEncryptionType=function F(){return"string"};/*!
 * Module exports.
 */xy.exports=O1});var _y=z((nk1,MH)=>{var PH=$1().UUID,NH=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i;MH.exports=function F(A){if(A==null)return A;if(A instanceof PH)return A;if(typeof A==="string")if(NH.test(A))return new PH(A);else throw new Error(`"${A}" is not a valid UUID string`);if(A.toString&&A.toString!==Object.prototype.toString){if(NH.test(A.toString()))return new PH(A.toString())}throw new Error(`"${A}" cannot be casted to a UUID`)};MH.exports.UUID_FORMAT=NH});var yy=z((ak1,by)=>{/*!
 * Module dependencies.
 */var g4=Q0(),fy=g4.CastError,gy=_y(),fH1=L2(),gH1=B1(),fX=bF(),bH1=gy.UUID_FORMAT;function yH1(F){let A;if(typeof F!=="string"&&F!=null)return A=F.toString("hex"),A.substring(0,8)+"-"+A.substring(8,12)+"-"+A.substring(12,16)+"-"+A.substring(16,20)+"-"+A.substring(20,32);return F}function j0(F,A,B,D){g4.call(this,F,A,"UUID",D)}j0.schemaName="UUID";j0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */j0.prototype=Object.create(g4.prototype);j0.prototype.constructor=j0;/*!
 * ignore
 */j0._cast=gy;j0.get=g4.get;j0.set=g4.set;j0.setters=[];j0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */j0._checkRequired=(F)=>F!=null;j0.checkRequired=g4.checkRequired;j0.prototype.checkRequired=function F(A){if(Buffer.isBuffer(A))A=yH1(A);return A!=null&&bH1.test(A)};j0.prototype.cast=function(F,A,B,D,X){if(gH1.isNonBuiltinObject(F)&&g4._isRef(this,F,A,B))return this._castRef(F,A,B,X);let Z;if(typeof this._castFunction==="function")Z=this._castFunction;else if(typeof this.constructor.cast==="function")Z=this.constructor.cast();else Z=j0.cast();try{return Z(F)}catch(J){throw new fy(j0.schemaName,F,this.path,J,this)}};/*!
 * ignore
 */function hH1(F){return this.cast(F)}/*!
 * ignore
 */function jH(F){return F.map((A)=>{return this.cast(A)})}var vH1={...g4.prototype.$conditionalHandlers,$bitsAllClear:fX,$bitsAnyClear:fX,$bitsAllSet:fX,$bitsAnySet:fX,$all:jH,$in:jH,$ne:hH1,$nin:jH};Object.defineProperty(j0.prototype,"$conditionalHandlers",{enumerable:!1,value:vH1});j0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can't use "+F+" with UUID.");return D.call(this,A,B)}try{return this.applySetters(A,B)}catch(X){if(X instanceof fy&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};j0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return fH1("string","binData",A?.useBsonType,B)};j0.prototype.autoEncryptionType=function F(){return"binData"};/*!
 * Module exports.
 */by.exports=j0});var vy=z((sk1,hy)=>{var mH1=l2();class TH extends mH1{}var dH1=C6();Object.defineProperty(TH.prototype,"of",dH1);hy.exports=TH});var dy=z((rk1,my)=>{/*!
 * ignore
 */var cH1=vy(),lH1=Q0(),k8=Symbol("firstValue");/*!
 * ignore
 */class iF extends lH1{constructor(F,A,B,D){super(F,A,"Union",D);if(!Array.isArray(A?.of)||A.of.length===0)throw new Error("Union schema type requires an array of types");this.schemaTypes=A.of.map((X)=>D.interpretAsType(F,X,B))}cast(F,A,B,D,X){let Z=k8,J;for(let Y=0;Y<this.schemaTypes.length;++Y)try{let $=this.schemaTypes[Y].cast(F,A,B,D,X);if($===F)return $;if(Z===k8)Z=$}catch($){J=$}if(Z!==k8)return Z;throw J}applySetters(F,A,B,D,X){let Z=k8,J;for(let Y=0;Y<this.schemaTypes.length;++Y)try{let $=this.schemaTypes[Y]._applySetters(F,A,B,D,X);if($==null)$=this.schemaTypes[Y]._castNullish($);else $=this.schemaTypes[Y].cast($,A,B,D,X);if($===F)return $;if(Z===k8)Z=$}catch($){J=$}if(Z!==k8)return Z;throw J}clone(){let F=super.clone();return F.schemaTypes=this.schemaTypes.map((A)=>A.clone()),F}}iF.schemaName="Union";iF.defaultOptions={};iF.prototype.OptionsConstructor=cH1;my.exports=iF});var gF=z((pH1)=>{/*!
 * Module exports.
 */pH1.Array=qX();pH1.BigInt=ng();pH1.Boolean=rg();pH1.Buffer=Ab();pH1.Date=Gb();pH1.Decimal128=pH1.Decimal=Hb();pH1.DocumentArray=By();pH1.Double=Yy();pH1.Int32=Wy();pH1.Map=Ky();pH1.Mixed=$8();pH1.Number=bW();pH1.ObjectId=jy();pH1.String=IH();pH1.Subdocument=CH();pH1.UUID=yy();pH1.Union=dy();pH1.Oid=pH1.ObjectId;pH1.Object=pH1.Mixed;pH1.Bool=pH1.Boolean;pH1.ObjectID=pH1.ObjectId});var S9=z((xH,Bh)=>{/*!
 * Module dependencies.
 */var Eq1=m("events").EventEmitter,Cq1=P9(),b4=K1(),py=Q0(),iy=l2(),Wq1=QW(),SH=XX(),ny=UW(),J2=C0(),ay=K0(),Hq1=x2(),qq1=Sf(),yX=wW(),zq1=ff(),sy=bf(),Qq1=MD(),gX=W6(),Kq1=hf(),Uq1=tf(),Vq1=T9(),o1=B1(),Lq1=ef(),wq1=/\.\d+(\.|$)/,y4,Rq1=OF().queryMiddlewareFunctions,Iq1=OF().documentMiddlewareFunctions,ry=Rq1.concat(Iq1).reduce((F,A)=>F.add(A),new Set),uH=o1.isPOJO,ty=0,Pq1=/^\d+$/;function n(F,A){if(!(this instanceof n))return new n(F,A);if(this.obj=F,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=A?.methods||{},this.methodOptions={},this.statics=A?.statics||{},this.tree={},this.query=A?.query||{},this.childSchemas=[],this.plugins=[],this.$id=++ty,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new Cq1},this.options=this.defaultOptions(A),Array.isArray(F))for(let X of F)this.add(X);else if(F)this.add(F);if(A?.virtuals){let X=A.virtuals,Z=Object.keys(X);for(let J of Z){let Y=X[J].options?X[J].options:void 0,$=this.virtual(J,Y);if(X[J].get)$.get(X[J].get);if(X[J].set)$.set(X[J].set)}}let B=F?._id&&o1.isObject(F._id);if(!this.paths._id&&this.options._id&&!B)ny(this);this.setupTimestamp(this.options.timestamps)}function oy(F,A){for(let B of Object.keys(A)){let D=null;if(A[B]!=null)D=A[B];else{let Z=ay(F.paths[B],"options");if(Z==null)continue;D=Z.alias}if(!D)continue;let X=F.paths[B].path;if(Array.isArray(D)){for(let Z of D){if(typeof Z!=="string")throw new Error("Invalid value for alias option on "+X+", got "+Z);F.aliases[Z]=X,F.virtual(Z).get(function(J){return function(){if(typeof this.get==="function")return this.get(J);return this[J]}}(X)).set(function(J){return function(Y){return this.$set(J,Y)}}(X))}continue}if(typeof D!=="string")throw new Error("Invalid value for alias option on "+X+", got "+D);F.aliases[D]=X,F.virtual(D).get(function(Z){return function(){if(typeof this.get==="function")return this.get(Z);return this[Z]}}(X)).set(function(Z){return function(J){return this.$set(Z,J)}}(X))}}/*!
 * Inherit from EventEmitter.
 */n.prototype=Object.create(Eq1.prototype);n.prototype.constructor=n;n.prototype.instanceOfSchema=!0;/*!
 * ignore
 */Object.defineProperty(n.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(n.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(n.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});n.prototype.obj;n.prototype.paths;n.prototype.tree;n.create=function F(A,B){return new n(A,B)};n.prototype.clone=function(){let F=this._clone();return F.on("init",(A)=>this.emit("init",A)),F};/*!
 * ignore
 */n.prototype._clone=function F(A){A=A||(this.base==null?n:this.base.Schema);let B=new A({},this._userProvidedOptions);B.base=this.base,B.obj=this.obj,B.options=J2(this.options),B.callQueue=this.callQueue.map(function(D){return D}),B.methods=J2(this.methods),B.methodOptions=J2(this.methodOptions),B.statics=J2(this.statics),B.query=J2(this.query),B.plugins=Array.prototype.slice.call(this.plugins),B._indexes=J2(this._indexes),B._searchIndexes=J2(this._searchIndexes),B.s.hooks=this.s.hooks.clone(),B.tree=J2(this.tree),B.paths=Object.fromEntries(Object.entries(this.paths).map(([D,X])=>[D,X.clone()])),B.nested=J2(this.nested),B.subpaths=J2(this.subpaths);for(let D of Object.values(B.paths))if(D.$isSingleNested){let X=D.path;for(let Z of Object.keys(D.schema.paths))B.singleNestedPaths[X+"."+Z]=D.schema.paths[Z];for(let Z of Object.keys(D.schema.singleNestedPaths))B.singleNestedPaths[X+"."+Z]=D.schema.singleNestedPaths[Z];for(let Z of Object.keys(D.schema.subpaths))B.singleNestedPaths[X+"."+Z]=D.schema.subpaths[Z];for(let Z of Object.keys(D.schema.nested))B.singleNestedPaths[X+"."+Z]="nested"}if(B._gatherChildSchemas(),B.virtuals=J2(this.virtuals),B.$globalPluginsApplied=this.$globalPluginsApplied,B.$isRootDiscriminator=this.$isRootDiscriminator,B.$implicitlyCreated=this.$implicitlyCreated,B.$id=++ty,B.$originalSchemaId=this.$id,B.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null)B.discriminatorMapping=Object.assign({},this.discriminatorMapping);if(this.discriminators!=null)B.discriminators=Object.assign({},this.discriminators);if(this._applyDiscriminators!=null)B._applyDiscriminators=new Map(this._applyDiscriminators);return B.aliases=Object.assign({},this.aliases),B.encryptedFields=J2(this.encryptedFields),B};n.prototype.pick=function(F,A){let B=new n({},A||this.options);if(!Array.isArray(F))throw new b4('Schema#pick() only accepts an array argument, got "'+typeof F+'"');for(let D of F)if(this._hasEncryptedField(D)){let X=this.encryptedFields[D],Z=this.path(D);B.add({[D]:{encrypt:X,[this.options.typeKey]:Z}})}else if(this.nested[D])B.add({[D]:ay(this.tree,D)});else{let X=this.path(D);if(X==null)throw new b4("Path `"+D+"` is not in the schema");B.add({[D]:X})}if(!this._hasEncryptedFields())B.options.encryptionType=null;return B};n.prototype.omit=function(F,A){let B=new n(this,A||this.options);if(!Array.isArray(F))throw new b4('Schema#omit() only accepts an array argument, got "'+typeof F+'"');B.remove(F);for(let D in B.singleNestedPaths)if(F.includes(D))delete B.singleNestedPaths[D];return B};n.prototype.defaultOptions=function(F){this._userProvidedOptions=F==null?{}:J2(F);let A=this.base?.options||{},B="strict"in A?A.strict:!0,D="strictQuery"in A?A.strictQuery:!1,X="id"in A?A.id:!0;if(F={strict:B,strictQuery:D,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:X,typeKey:"type",...F},F.versionKey&&typeof F.versionKey!=="string")throw new b4("`versionKey` must be falsy or string, got `"+typeof F.versionKey+"`");if(typeof F.read==="string")F.read=yX(F.read);else if(Array.isArray(F.read)&&typeof F.read[0]==="string")F.read={mode:yX(F.read[0]),tags:F.read[1]};if(F.optimisticConcurrency&&!F.versionKey)throw new b4("Must set `versionKey` if using `optimisticConcurrency`");return F};n.prototype.discriminator=function(F,A,B){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(F,{schema:A,options:B}),this};/*!
 * Get the document middleware for this schema, filtering out any hooks that are specific to queries.
 */n.prototype._getDocumentMiddleware=function F(){return this.s.hooks.filter((A)=>{if(A.name==="updateOne"||A.name==="deleteOne")return!!A.document;if(A.name==="remove"||A.name==="init")return A.document==null||!!A.document;if(A.query!=null||A.document!=null)return A.document!==!1;return!0}).filter((A)=>{if(this.methods[A.name])return!A.fn[Vq1.builtInMiddleware];return!0})};/*!
 * Get this schema's default toObject/toJSON options, including Mongoose global
 * options.
 */n.prototype._defaultToObjectOptions=function(F){let A=F?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[A])return this._defaultToObjectOptionsMap[A];let B=this.base?.options?.[A]||{},D=this.options[A]||{},X=Object.assign({},B,D);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[A]=X,X};n.prototype.encryptionType=function F(F){if(arguments.length===0)return this.options.encryptionType;if(!(typeof F==="string"||F===null))throw new Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=F};n.prototype.add=function F(A,B){if(A instanceof n||A?.instanceOfSchema)return Qq1(this,A),this;if(A._id===!1&&B==null)this.options._id=!1;if(B=B||"",B==="__proto__."||B==="constructor."||B==="prototype.")return this;let D=Object.keys(A),X=this.options.typeKey;for(let J of D){if(o1.specialProperties.has(J))continue;let Y=B+J,$=A[J];if($==null)throw new TypeError("Invalid value for schema path `"+Y+'`, got value "'+$+'"');if(J==="_id"&&$===!1)continue;let G=!1;if(typeof $==="string"){let E=this.base?.Schema.Types??n.Types,C=$.charAt(0).toUpperCase()+$.substring(1);G=E[C]!=null}if(J!=="_id"&&(typeof $!=="object"&&typeof $!=="function"&&!G||$==null))throw new TypeError(`Invalid schema configuration: \`${$}\` is not a valid type at path \`${J}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if($ instanceof SH||($.constructor?.name??null)==="VirtualType"){this.virtual($);continue}if(Array.isArray($)&&$.length===1&&$[0]==null)throw new TypeError("Invalid value for schema Array path `"+Y+'`, got value "'+$[0]+'"');if(!(uH($)||$ instanceof iy)){if(B)this.nested[B.substring(0,B.length-1)]=!0;if(this.path(B+J,$),!$[0]?.instanceOfSchema&&o1.isPOJO($[0]?.discriminators)){let E=this.path(B+J);for(let C in $[0].discriminators)E.discriminator(C,$[0].discriminators[C])}}else if(o1.hasOwnKeys($)===!1){if(B)this.nested[B.substring(0,B.length-1)]=!0;this.path(Y,$)}else if(!$[X]||X==="type"&&uH($.type)&&$.type.type)this.nested[Y]=!0,this.add($,Y+".");else{let E=$[X];if(uH(E)&&o1.hasOwnKeys(E)){if(B)this.nested[B.substring(0,B.length-1)]=!0;let C={};if(this._userProvidedOptions.typeKey)C.typeKey=this._userProvidedOptions.typeKey;if(this._userProvidedOptions.strict!=null)C.strict=this._userProvidedOptions.strict;if(this._userProvidedOptions.toObject!=null)C.toObject=o1.omit(this._userProvidedOptions.toObject,["transform"]);if(this._userProvidedOptions.toJSON!=null)C.toJSON=o1.omit(this._userProvidedOptions.toJSON,["transform"]);let W=new n(E,C);W.$implicitlyCreated=!0;let H=Object.assign({},$,{[X]:W});this.path(B+J,H)}else{if(B)this.nested[B.substring(0,B.length-1)]=!0;if(this.path(B+J,$),!$?.instanceOfSchema&&o1.isPOJO($?.discriminators)){let C=this.path(B+J);for(let W in $.discriminators)C.discriminator(W,$.discriminators[W])}}}if($.instanceOfSchema&&$.encryptionType()!=null){if(this.encryptionType()!=$.encryptionType())throw new Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[E,C]of Object.entries($.encryptedFields)){let W=Y+"."+E;this._addEncryptedField(W,C)}}else if(typeof $==="object"&&"encrypt"in $){let{encrypt:E}=$;if(this.encryptionType()==null)throw new Error("encryptionType must be provided");this._addEncryptedField(Y,E)}else this._removeEncryptedField(Y)}let Z=Object.fromEntries(Object.entries(A).map(([J])=>[B+J,null]));return oy(this,Z),this};n.prototype._addEncryptedField=function F(A,B){if(this.path(A).autoEncryptionType()==null)throw new Error(`Invalid BSON type for FLE field: '${A}'`);this.encryptedFields[A]=J2(B)};n.prototype._removeEncryptedField=function F(A){delete this.encryptedFields[A]};n.prototype._hasEncryptedFields=function F(){return o1.hasOwnKeys(this.encryptedFields)};n.prototype._hasEncryptedField=function F(A){return A in this.encryptedFields};n.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([A,B])=>{let D=this.path(A).autoEncryptionType();return{path:A,bsonType:D,...B}})}};n.prototype._buildSchemaMap=function(){function F(D,X,Z){let J=0,Y=D[J];for(;J<D.length-1;++J,Y=D[J])X[Y]=X[Y]==null?{bsonType:"object",properties:{}}:X[Y],X=X[Y].properties;X[Y]=Z}let A=(D,[X,Z])=>{let J=this.path(X).autoEncryptionType(),Y=X.split("."),$={encrypt:{...Z,bsonType:J}};return F(Y,D,$),D};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(A,{})}};n.prototype.alias=function A(F,A){return oy(this,{[F]:A}),this};n.prototype.removeIndex=function F(A){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof A!=="object"&&typeof A!=="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof A==="object"){for(let B=this._indexes.length-1;B>=0;--B)if(sy(this._indexes[B][0],A))this._indexes.splice(B,1)}else for(let B=this._indexes.length-1;B>=0;--B)if(this._indexes[B][1]!=null&&this._indexes[B][1].name===A)this._indexes.splice(B,1);return this};n.prototype.clearIndexes=function F(){return this._indexes.length=0,this};n.prototype.searchIndex=function F(A){return this._searchIndexes.push(A),this};n.reserved=Object.create(null);n.prototype.reserved=n.reserved;var Z2=n.reserved;Z2.prototype=Z2.emit=Z2.listeners=Z2.removeListener=Z2.collection=Z2.errors=Z2.get=Z2.init=Z2.isModified=Z2.isNew=Z2.populated=Z2.remove=Z2.save=Z2.toObject=Z2.validate=1;Z2.collection=1;n.prototype.path=function(F,A){if(A===void 0){if(this.paths[F]!=null)return this.paths[F];let $=ey(F),G=Nq1(this,F,$);if(G!=null)return G;let E=Fh(this,F);if(E!=null)return E;if(G=this.hasMixedParent($),G!=null)return G;return wq1.test(F)?Mq1(this,F,$):void 0}let B=F.split(".")[0];if(Z2[B]&&!this.options.suppressReservedKeysWarning){let $=`\`${B}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;o1.warn($)}if(typeof A==="object"&&o1.hasUserDefinedProperty(A,"ref"))Lq1(A.ref,F);let D=F.split(/\./),X=D.pop(),Z=this.tree,J="";for(let $ of D){if(o1.specialProperties.has($))throw new Error("Cannot set special property `"+$+"` on a schema");if(J=J+=(J.length>0?".":"")+$,!Z[$])this.nested[J]=!0,Z[$]={};if(typeof Z[$]!=="object"){let G="Cannot set nested path `"+F+"`. Parent path `"+J+"` already set to type "+Z[$].name+".";throw new Error(G)}Z=Z[$]}Z[X]=J2(A),this.paths[F]=this.interpretAsType(F,A,this.options);let Y=this.paths[F];if(this.childSchemas=this.childSchemas.filter(($)=>$.path!==F),Y.$isSchemaMap){let $=F+".$*";if(this.paths[$]=Y.$__schemaType,this.mapPaths.push(this.paths[$]),Y.$__schemaType.$isSingleNested)this.childSchemas.push({schema:Y.$__schemaType.schema,model:Y.$__schemaType.Constructor,path:F})}if(Y.$isSingleNested){for(let $ of Object.keys(Y.schema.paths))this.singleNestedPaths[F+"."+$]=Y.schema.paths[$];for(let $ of Object.keys(Y.schema.singleNestedPaths))this.singleNestedPaths[F+"."+$]=Y.schema.singleNestedPaths[$];for(let $ of Object.keys(Y.schema.subpaths))this.singleNestedPaths[F+"."+$]=Y.schema.subpaths[$];for(let $ of Object.keys(Y.schema.nested))this.singleNestedPaths[F+"."+$]="nested";Object.defineProperty(Y.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),Y.Constructor.base=this.base,this.childSchemas.push({schema:Y.schema,model:Y.Constructor,path:F})}else if(Y.$isMongooseDocumentArray)Object.defineProperty(Y.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),Y.Constructor.base=this.base,this.childSchemas.push({schema:Y.schema,model:Y.Constructor,path:F});if(Y.$isMongooseArray&&!Y.$isMongooseDocumentArray){let $=F,G=Y,E=[];while(G.$isMongooseArray)$=$+".$",G.embeddedSchemaType._arrayPath=$,G.embeddedSchemaType._arrayParentPath=F,G=G.embeddedSchemaType,this.subpaths[$]=G;for(let C of E)this.subpaths[C.path]=C}if(Y.$isMongooseDocumentArray){for(let $ of Object.keys(Y.schema.paths)){let G=Y.schema.paths[$];if(this.subpaths[F+"."+$]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=Y}for(let $ of Object.keys(Y.schema.subpaths)){let G=Y.schema.subpaths[$];if(this.subpaths[F+"."+$]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=Y}for(let $ of Object.keys(Y.schema.singleNestedPaths)){let G=Y.schema.singleNestedPaths[$];if(this.subpaths[F+"."+$]=G,typeof G==="object"&&G!=null&&G.$parentSchemaDocArray==null)G.$parentSchemaDocArray=Y}}return this};/*!
 * ignore
 */n.prototype._gatherChildSchemas=function F(){let A=[];for(let B of Object.keys(this.paths)){if(typeof B!=="string")continue;let D=this.paths[B];if(D.$isMongooseDocumentArray||D.$isSingleNested)A.push({schema:D.schema,model:D.Constructor,path:B});else if(D.$isSchemaMap&&D.$__schemaType.$isSingleNested)A.push({schema:D.$__schemaType.schema,model:D.$__schemaType.Constructor,path:B})}return this.childSchemas=A,A};/*!
 * ignore
 */function Nq1(F,A,B){if(Object.hasOwn(F.paths,A))return F.paths[A];if(Object.hasOwn(F.subpaths,B)){let D=F.subpaths[B];if(D==="nested")return;return D}if(Object.hasOwn(F.singleNestedPaths,B)&&typeof F.singleNestedPaths[B]==="object"){let D=F.singleNestedPaths[B];if(D==="nested")return;return D}return null}/*!
 * ignore
 */function ey(F){if(!/\.\d+/.test(F))return F;return F.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$")}/*!
 * ignore
 */function Fh(F,A){if(F.mapPaths.length===0)return null;for(let B of F.mapPaths){let D=B.path.replace(/\.\$\*/g,"");if(A===D||A.startsWith(D+".")&&A.slice(D.length+1).indexOf(".")===-1)return B;else if(B.schema&&A.startsWith(D+".")){let X=A.slice(D.length+1);return X=X.slice(X.indexOf(".")+1),B.schema.paths[X]}else if(B.$isSchemaMap&&A.startsWith(D+".")){let X=A.slice(D.length+1);X=X.slice(X.indexOf(".")+1);let Z=B.$__schemaType._presplitPath;if(X.indexOf(".")===-1&&Z[Z.length-1]==="$*")return B.$__schemaType;else if(X.indexOf(".")!==-1&&B.$__schemaType.schema&&Z[Z.length-1]==="$*")return B.$__schemaType.schema.path(X.slice(X.indexOf(".")+1))}}return null}Object.defineProperty(n.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});n.prototype.interpretAsType=function(F,A,B){if(A instanceof py){if(A.path===F)return A;let $=A.clone();return $.path=F,$}let D=this.base?.Schema.Types??n.Types,X=this.base?.Types??K8();if(!o1.isPOJO(A)&&!(A instanceof iy)){if(o1.getFunctionName(A.constructor)!=="Object"){let G=A;A={},A[B.typeKey]=G}}let Z=A[B.typeKey]&&(A[B.typeKey]instanceof Function||B.typeKey!=="type"||!A.type.type)?A[B.typeKey]:{};if(Z instanceof py){if(Z.path===F)return Z;let $=Z.clone();return $.path=F,$}let J;if(o1.isPOJO(Z)||Z==="mixed")return new D.Mixed(F,A,null,this);if(Array.isArray(Z)||Z===Array||Z==="array"||Z===D.Array){let $=Z===Array||Z==="array"?A.cast||A.of:Z[0];if($?.instanceOfSchema){if(!($ instanceof n))if(this.options._isMerging)$=new n($);else throw new TypeError("Schema for array path `"+F+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${F}: new Schema(...)`);return new D.DocumentArray(F,$,A,null,this)}if($&&$[B.typeKey]&&$[B.typeKey].instanceOfSchema){if(!($[B.typeKey]instanceof n))if(this.options._isMerging)$[B.typeKey]=new n($[B.typeKey]);else throw new TypeError("Schema for array path `"+F+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${F}: new Schema(...)`);return new D.DocumentArray(F,$[B.typeKey],A,$,this)}if(typeof $!=="undefined"){if(Array.isArray($)||$.type===Array||$.type=="Array"){if($?.type=="Array")$.type=Array;return new D.Array(F,this.interpretAsType(F,$,B),A,null,this)}}let G=$!=null&&$[B.typeKey]&&(B.typeKey!=="type"||!$.type.type)?$[B.typeKey]:$;if(typeof $==="string")$=D[$.charAt(0).toUpperCase()+$.substring(1)];else if(o1.isPOJO(G))if(o1.hasOwnKeys(G)){let E={minimize:B.minimize};if(B.typeKey)E.typeKey=B.typeKey;if(Object.hasOwn(B,"strict"))E.strict=B.strict;if(Object.hasOwn(B,"strictQuery"))E.strictQuery=B.strictQuery;if(Object.hasOwn(B,"toObject"))E.toObject=o1.omit(B.toObject,["transform"]);if(Object.hasOwn(B,"toJSON"))E.toJSON=o1.omit(B.toJSON,["transform"]);if(Object.hasOwn(this._userProvidedOptions,"_id"))E._id=this._userProvidedOptions._id;else if(n.Types.DocumentArray.defaultOptions._id!=null)E._id=n.Types.DocumentArray.defaultOptions._id;let C=new n(G,E);return C.$implicitlyCreated=!0,new D.DocumentArray(F,C,A,null,this)}else return new D.Array(F,D.Mixed,A,null,this);if($){if(Z=$[B.typeKey]&&(B.typeKey!=="type"||!$.type.type)?$[B.typeKey]:$,Array.isArray(Z))return new D.Array(F,this.interpretAsType(F,Z,B),A,null,this);if(J=typeof Z==="string"?Z:Z.schemaName||o1.getFunctionName(Z),J==="ClockDate")J="Date";if(J===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${F}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!Object.hasOwn(D,J))throw new TypeError(`Invalid schema configuration: \`${J}\` is not a valid type within the array \`${F}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(J==="Union"&&typeof $==="object")$.parentSchema=this}return new D.Array(F,$||D.Mixed,A,B,this)}if(Z?.instanceOfSchema)return new D.Subdocument(Z,F,A,this);if(Buffer.isBuffer(Z))J="Buffer";else if(typeof Z==="function"||typeof Z==="object")J=Z.schemaName||o1.getFunctionName(Z);else if(Z===X.ObjectId)J="ObjectId";else if(Z===X.Decimal128)J="Decimal128";else J=Z==null?""+Z:Z.toString();if(J)J=J.charAt(0).toUpperCase()+J.substring(1);if(J==="ObjectID")J="ObjectId";if(J==="ClockDate")J="Date";if(J===void 0)throw new TypeError(`Invalid schema configuration: \`${F}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(D[J]==null)throw new TypeError(`Invalid schema configuration: \`${J}\` is not a valid type at path \`${F}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);return new D[J](F,A,B,this)};n.prototype.eachPath=function(F){let A=Object.keys(this.paths),B=A.length;for(let D=0;D<B;++D)F(A[D],this.paths[A[D]]);return this};n.prototype.requiredPaths=function F(A){if(this._requiredpaths&&!A)return this._requiredpaths;let B=Object.keys(this.paths),D=B.length,X=[];while(D--){let Z=B[D];if(this.paths[Z].isRequired)X.push(Z)}return this._requiredpaths=X,this._requiredpaths};n.prototype.indexedPaths=function F(){if(this._indexedpaths)return this._indexedpaths;return this._indexedpaths=this.indexes(),this._indexedpaths};n.prototype.pathType=function(F){if(Object.hasOwn(this.paths,F))return"real";if(Object.hasOwn(this.virtuals,F))return"virtual";if(Object.hasOwn(this.nested,F))return"nested";let A=ey(F);if(Object.hasOwn(this.subpaths,A)||Object.hasOwn(this.subpaths,F))return"real";let B=Object.hasOwn(this.singleNestedPaths,A)||Object.hasOwn(this.singleNestedPaths,F);if(B)return B==="nested"?"nested":"real";if(Fh(this,F)!=null)return"real";if(/\.\d+\.|\.\d+$/.test(F))return Ah(this,F,A);return"adhocOrUndefined"};n.prototype.hasMixedParent=function(F){let A=F.split(/\./g);F="";for(let B=0;B<A.length;++B)if(F=B>0?F+"."+A[B]:A[B],Object.hasOwn(this.paths,F)&&this.paths[F]instanceof y4.Mixed)return this.paths[F];return null};n.prototype.setupTimestamp=function(F){return Uq1(this,F)};function Ah(F,A,B){let D=A.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(D.length<2)return Object.hasOwn(F.paths,D[0])?F.paths[D[0]]:"adhocOrUndefined";let X=F.path(D[0]),Z=!1;if(!X)return"adhocOrUndefined";let J=D.length-1;for(let Y=1;Y<D.length;++Y){Z=!1;let $=D[Y];if(Y===J&&X&&!/\D/.test($)){if(X.$isMongooseDocumentArray)X=X.embeddedSchemaType;else if(X instanceof y4.Array)X=X.embeddedSchemaType;else X=void 0;break}if(!/\D/.test($)){if(X instanceof y4.Array&&Y!==J)X=X.embeddedSchemaType;continue}if(!X?.schema){X=void 0;break}Z=X.schema.pathType($)==="nested",X=X.schema.path($)}if(F.subpaths[B]=X,X)return"real";if(Z)return"nested";return"adhocOrUndefined"}/*!
 * ignore
 */function Mq1(F,A,B){return Ah(F,A,B),F.subpaths[B]}n.prototype.queue=function(F,A){return this.callQueue.push([F,A]),this};n.prototype.pre=function(F){if(F instanceof RegExp){let A=Array.prototype.slice.call(arguments,1);for(let B of ry)if(F.test(B))this.pre.apply(this,[B].concat(A));return this}if(Array.isArray(F)){let A=Array.prototype.slice.call(arguments,1);for(let B of F)this.pre.apply(this,[B].concat(A));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};n.prototype.post=function(F){if(F instanceof RegExp){let A=Array.prototype.slice.call(arguments,1);for(let B of ry)if(F.test(B))this.post.apply(this,[B].concat(A));return this}if(Array.isArray(F)){let A=Array.prototype.slice.call(arguments,1);for(let B of F)this.post.apply(this,[B].concat(A));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};n.prototype.plugin=function(F,A){if(typeof F!=="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof F+'"');if(A?.deduplicate){for(let B of this.plugins)if(B.fn===F)return this}return this.plugins.push({fn:F,opts:A}),F(this,A),this};n.prototype.method=function(F,A,B){if(typeof F!=="string")for(let D in F)this.methods[D]=F[D],this.methodOptions[D]=J2(B);else this.methods[F]=A,this.methodOptions[F]=J2(B);return this};n.prototype.static=function(F,A){if(typeof F!=="string")for(let B in F)this.statics[B]=F[B];else this.statics[F]=A;return this};n.prototype.index=function(F,A){if(F||(F={}),A||(A={}),A.expires)o1.expires(A);for(let B in F)if(this.aliases[B])F=o1.renameObjKey(F,B,this.aliases[B]);for(let B of Object.keys(F))if(F[B]==="ascending"||F[B]==="asc")F[B]=1;else if(F[B]==="descending"||F[B]==="desc")F[B]=-1;for(let B of this.indexes())if(A.name==null&&B[1].name==null&&sy(B[0],F))o1.warn(`Duplicate schema index on ${JSON.stringify(F)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([F,A]),this};n.prototype.set=function(F,A,B){if(arguments.length===1)return this.options[F];switch(F){case"read":if(typeof A==="string")this.options[F]={mode:yX(A),tags:B};else if(Array.isArray(A)&&typeof A[0]==="string")this.options[F]={mode:yX(A[0]),tags:A[1]};else this.options[F]=A;this._userProvidedOptions[F]=this.options[F];break;case"timestamps":this.setupTimestamp(A),this.options[F]=A,this._userProvidedOptions[F]=this.options[F];break;case"_id":if(this.options[F]=A,this._userProvidedOptions[F]=this.options[F],A&&!this.paths._id)ny(this);else if(!A&&this.paths._id!=null&&this.paths._id.auto)this.remove("_id");break;default:this.options[F]=A,this._userProvidedOptions[F]=this.options[F];break}if(F==="strict")nF(this,{strict:A});if(F==="strictQuery")nF(this,{strictQuery:A});if(F==="toObject")A={...A},delete A.transform,nF(this,{toObject:A});if(F==="toJSON")A={...A},delete A.transform,nF(this,{toJSON:A});return this};/*!
 * Recursively set options on implicitly created schemas
 */function nF(F,A){for(let{schema:B}of F.childSchemas){if(!B.$implicitlyCreated)continue;Object.assign(B.options,A),nF(B,A)}}n.prototype.get=function(F){return this.options[F]};var jq1="2d 2dsphere hashed text".split(" ");Object.defineProperty(n,"indexTypes",{get:function(){return jq1},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});n.prototype.indexes=function(){return qq1(this)};n.prototype.virtual=function(F,A){if(F instanceof SH||Hq1(F)==="VirtualType")return this.virtual(F.path,F.options);if(A=new Wq1(A),o1.hasUserDefinedProperty(A,["ref","refPath"])){if(A.localField==null)throw new Error("Reference virtuals require `localField` option");if(A.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let X=this.virtual(F);if(X.options=A,this.pre("init",function Y($,G){if(gX.has(F,$)){let E=gX.get(F,$);if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};if(A.justOne||A.count)this.$$populatedVirtuals[F]=Array.isArray(E)?E[0]:E;else this.$$populatedVirtuals[F]=Array.isArray(E)?E:E==null?[]:[E];if(G?.hydratedPopulatedDocs&&!A.count){let C=X._getModelNamesForPopulate(this),W=this.$$populatedVirtuals[F];if(!Array.isArray(W)&&!W.$__&&C?.length===1){let H=this.db.model(C[0]);this.$$populatedVirtuals[F]=H.hydrate(W)}else if(Array.isArray(W)&&C?.length===1){let H=this.db.model(C[0]);for(let Q=0;Q<W.length;++Q)if(!W[Q].$__)W[Q]=H.hydrate(W[Q],null,{hydratedPopulatedDocs:!0});let q=A.foreignField;this.$populated(F,W.map((Q)=>Q==null?Q:Q.get(typeof q==="function"?q.call(Q,Q):q)),{populateModelSymbol:H})}}gX.unset(F,$)}}),X.set(function(Y){if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};return Kq1(this.$$populatedVirtuals,F,Y,A)}),typeof A.get==="function")X.get(A.get);let Z=F.split("."),J=Z[0];for(let Y=0;Y<Z.length-1;++Y){if(this.paths[J]==null)continue;if(this.paths[J].$isMongooseDocumentArray||this.paths[J].$isSingleNested){let $=Z.slice(Y+1).join(".");this.paths[J].schema.virtual($,A);break}else if(this.paths[J].$isSchemaMap){let $=Z.slice(Y+2).join(".");this.paths[J].$__schemaType.schema.virtual($,A);break}J+="."+Z[Y+1]}return X}let B=this.virtuals,D=F.split(".");if(this.pathType(F)==="real")throw new Error('Virtual path "'+F+'" conflicts with a real path in the schema');if(B[F]=D.reduce(function(X,Z,J){return X[Z]||(X[Z]=J===D.length-1?new SH(A,F):{}),X[Z]},this.tree),A?.applyToArray&&D.length>1){let X=this.path(D.slice(0,-1).join("."));if(X?.$isMongooseArray)return X.virtual(D[D.length-1],A);else throw new b4(`Path "${X}" is not an array`)}return B[F]};n.prototype.virtualpath=function(F){return Object.hasOwn(this.virtuals,F)?this.virtuals[F]:null};n.prototype.remove=function(F){if(typeof F==="string")F=[F];if(Array.isArray(F))F.forEach(function(A){if(this.path(A)==null&&!this.nested[A])return;if(this.nested[A]){let B=Object.keys(this.paths).concat(Object.keys(this.nested));for(let D of B)if(D.startsWith(A+"."))delete this.paths[D],delete this.nested[D],OH(this,D);delete this.nested[A],OH(this,A);return}delete this.paths[A],OH(this,A),this._removeEncryptedField(A)},this);return this};/*!
 * ignore
 */function OH(F,A){let B=A.split("."),D=B.pop(),X=F.tree;for(let Z of B)X=X[Z];delete X[D]}n.prototype.removeVirtual=function(F){if(typeof F==="string")F=[F];if(Array.isArray(F)){for(let A of F)if(this.virtuals[A]==null)throw new b4(`Attempting to remove virtual "${A}" that does not exist.`);for(let A of F)if(delete this.paths[A],delete this.virtuals[A],A.indexOf(".")!==-1)gX.unset(A,this.tree);else delete this.tree[A]}return this};n.prototype.loadClass=function(F,A){if(F===Object.prototype||F===Function.prototype||Object.hasOwn(F.prototype,"$isMongooseModelPrototype")||Object.hasOwn(F.prototype,"$isMongooseDocumentPrototype"))return this;if(this.loadClass(Object.getPrototypeOf(F),A),!A)Object.getOwnPropertyNames(F).forEach(function(B){if(B.match(/^(length|name|prototype|constructor|__proto__)$/))return;let D=Object.getOwnPropertyDescriptor(F,B);if(Object.hasOwn(D,"value"))this.static(B,D.value)},this);return Object.getOwnPropertyNames(F.prototype).forEach(function(B){if(B.match(/^(constructor)$/))return;let D=Object.getOwnPropertyDescriptor(F.prototype,B);if(!A){if(typeof D.value==="function")this.method(B,D.value)}if(typeof D.get==="function"){if(this.virtuals[B])this.virtuals[B].getters=[];this.virtual(B).get(D.get)}if(typeof D.set==="function"){if(this.virtuals[B])this.virtuals[B].setters=[];this.virtual(B).set(D.set)}},this),this};/*!
 * ignore
 */n.prototype._getSchema=function(F){let A=this,B=A.path(F),D=[];if(B)return B.$fullPath=F,B;function X(J,Y){let $=J.length+1,G,E;while($--)if(E=J.slice(0,$).join("."),G=Y.path(E),G){if(D.push(E),G.embeddedSchemaType||G.Constructor){if(G.embeddedSchemaType instanceof y4.Mixed)return G.embeddedSchemaType.$fullPath=D.join("."),G.embeddedSchemaType;if($!==J.length){if($+1===J.length&&G.embeddedSchemaType&&(J[$]==="$"||bX(J[$])))return G.embeddedSchemaType;if(G.schema){let C;if(J[$]==="$"||bX(J[$])){if($+1===J.length)return G.embeddedSchemaType;if(C=X(J.slice($+1),G.schema),C)C.$parentSchemaDocArray=C.$parentSchemaDocArray||(G.schema.$isSingleNested?null:G);return C}if(C=X(J.slice($),G.schema),C)C.$parentSchemaDocArray=C.$parentSchemaDocArray||(G.schema.$isSingleNested?null:G);return C}}}else if(G.$isSchemaMap){if($>=J.length)return G;if($+1>=J.length)return G.$__schemaType;if(G.$__schemaType instanceof y4.Mixed)return G.$__schemaType;if(G.$__schemaType.schema!=null)return X(J.slice($+1),G.$__schemaType.schema)}return G.$fullPath=D.join("."),G}}let Z=F.split(".");for(let J=0;J<Z.length;++J){if(Z[J]==="$"||bX(Z[J]))Z[J]="0";if(Pq1.test(Z[J]))Z[J]="$"}return X(Z,A)};/*!
 * ignore
 */n.prototype._getPathType=function(F){let A=this;if(A.path(F))return"real";function D(X,Z){let J=X.length+1,Y,$;while(J--)if($=X.slice(0,J).join("."),Y=Z.path($),Y){if(Y.embeddedSchemaType||Y.Constructor){if(Y.embeddedSchemaType instanceof y4.Mixed)return{schema:Y,pathType:"mixed"};if(J!==X.length&&Y.schema){if(X[J]==="$"||bX(X[J])){if(J===X.length-1)return{schema:Y,pathType:"nested"};return D(X.slice(J+1),Y.schema)}return D(X.slice(J),Y.schema)}return{schema:Y,pathType:Y.$isSingleNested?"nested":"array"}}return{schema:Y,pathType:"real"}}else if(J===X.length&&Z.nested[$])return{schema:Z,pathType:"nested"};return{schema:Y||Z,pathType:"undefined"}}return D(F.split("."),A)};n.prototype._transformDuplicateKeyError=function F(A){if(!this._duplicateKeyErrorMessagesByPath)return A;if(A.code!==11000&&A.code!==11001)return A;if(A.keyPattern!=null){let B=A.keyPattern,D=Object.keys(B);if(D.length!==1)return A;let X=D[0];if(!Object.hasOwn(this._duplicateKeyErrorMessagesByPath,X))return A;return new b4(this._duplicateKeyErrorMessagesByPath[X],{cause:A})}return A};/*!
 * ignore
 */function bX(F){return F.startsWith("$[")&&F.endsWith("]")}n.prototype._preCompile=function F(){this.plugin(zq1,{deduplicate:!0})};n.prototype.toJSONSchema=function F(A){let B=A?.useBsonType??!1,D=B?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let X of Object.keys(this.paths)){let Z=this.paths[X];if(Z._presplitPath.indexOf("$*")!==-1)continue;let J=Z._presplitPath.length>1,Y=D;if(J)for(let E=0;E<Z._presplitPath.length-1;++E){let C=Z._presplitPath[E];if(Y.properties[C]==null)Y.properties[C]=B?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}};Y=Y.properties[C]}let $=Z._presplitPath[Z._presplitPath.length-1],G=!1;if(X==="_id"){if(!Y.required)Y.required=[];Y.required.push("_id"),G=!0}else if(Z.options.required&&typeof Z.options.required!=="function"){if(!Y.required)Y.required=[];Y.required.push($),G=!0}if(Y.properties[$]=Z.toJSONSchema(A),Z.options.enum)Y.properties[$].enum=G?Z.options.enum:[...Z.options.enum,null]}if(D.required.length===0)delete D.required;return D};/*!
 * Module exports.
 */Bh.exports=xH=n;n.Types=y4=gF();/*!
 * ignore
 */xH.ObjectId=y4.ObjectId});var fH=z((ek1,Dh)=>{/*!
 * Module dependencies.
 */var Tq1=E6();class _H extends Tq1{constructor(F,A,B,D){let X=F.map((Z)=>Z.message).join(", ");if(X.length>200)X=X.slice(0,200)+"...";super(`${D} failed with ${F.length} Mongoose validation errors: ${X}`);this.validationErrors=F,this.results=A,this.rawResult=B,this.operation=D}}Object.defineProperty(_H.prototype,"name",{value:"MongooseBulkWriteError"});/*!
 * exports
 */Dh.exports=_H});var Zh=z((Fu1,Xh)=>{/*!
 * Module dependencies.
 */var kq1=K1();class gH extends kq1{constructor(F,A){super(F);this.errors=A}}Object.defineProperty(gH.prototype,"name",{value:"SyncIndexesError"});Xh.exports=gH});var bH=z((Au1,Jh)=>{Jh.exports=function F(A,B,D,X){if(A[X])return;if(A[X]=!0,!D?.skipTopLevel){let $=null;for(let G of B){let E=G[1]==null?null:G[1].tags;if(!Array.isArray(E)){A.plugin(G[0],G[1]);continue}if($=$||new Set(A.options.pluginTags||[]),!E.find((C)=>$.has(C)))continue;A.plugin(G[0],G[1])}}if(D=Object.assign({},D),delete D.skipTopLevel,D.applyPluginsToChildSchemas!==!1)for(let $ of Object.keys(A.paths)){let G=A.paths[$];if(G.schema!=null)F(G.schema,B,D,X),G.Constructor.prototype.$__setSchema(G.schema)}let Z=A.discriminators;if(Z==null)return;let J=D.applyPluginsToDiscriminators,Y=Object.keys(Z);for(let $ of Y){let G=Z[$];F(G,B,{skipTopLevel:!J},X)}}});var hX=z((uq1,yH)=>{/*!
 * ignore
 */var Yh=null;uq1.get=function(){return Yh};uq1.set=function(F){Yh=F}});var hH=z((Bu1,$h)=>{function xq1(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}$h.exports=xq1});var Eh=z((Du1,Gh)=>{var _q1=K1();class vH extends _q1{constructor(F,A){super(F);this.errors=A}}Object.defineProperty(vH.prototype,"name",{value:"CreateCollectionsError"});Gh.exports=vH});var Hh=z((Xu1,Wh)=>{var Ch=fD().modifiedPaths;Wh.exports=function F(A){let B=Object.keys(A),D={},X={};for(let Z of B){if(Z.startsWith("$")){Ch(A[Z],"",D);continue}X[Z]=A[Z]}return Ch(X,"",D),D}});var mH=z((Zu1,qh)=>{var fq1=Hh();qh.exports=function F(A){if(A==null)return{};let B=fq1(A);return Object.keys(B).reduce((D,X)=>{let Z=X.match(/\$\[[^\]]+\]/g);if(Z==null)return D;for(let J of Z){let Y=X.indexOf(J);if(Y!==X.lastIndexOf(J))throw new Error(`Path '${X}' contains the same array filter multiple times`);D[J.substring(2,J.length-1)]=X.substring(0,Y-1).replace(/\$\[[^\]]+\]/g,"0")}return D},{})}});var Kh=z((Ju1,Qh)=>{var gq1=uF(),zh=K0(),bq1=j6(),yq1=mH();Qh.exports=function F(A,B,D,X,Z){let J=X.indexOf(".")===-1?[X]:X.split("."),Y=null,$="adhocOrUndefined";D=D||{},B=B||{};let G=Array.isArray(Z?.arrayFilters)?Z.arrayFilters:[],E=yq1(B),C=0;for(let W=0;W<J.length;++W){let H=J.slice(C,W+1).join("."),q=gq1(H);if(Y=A.path(q),Y==null)continue;if($=A.pathType(q),(Y.$isSingleNested||Y.$isMongooseDocumentArrayElement)&&Y.schema.discriminators!=null){let Q=zh(Y,"schema.options.discriminatorKey"),K=q+"."+Q,U=K.replace(/\.\d+\./,"."),R=null;if(K in D)R=D[K];if(U in D)R=D[U];let w=q.replace(/\.\d+$/,"");if(Y.$isMongooseDocumentArrayElement&&zh(D[w],"$elemMatch."+Q)!=null)R=D[w].$elemMatch[Q];let V=H+"."+Q;if(V in B)R=B[V];if(K in B)R=B[K];for(let u of Object.keys(E)){let O=E[u]+"."+Q,k=u+"."+Q;if(O===U){let d=G.find((h)=>Object.hasOwn(h,k));if(d!=null)R=d[k]}}if(R==null)continue;let T=bq1(Y.Constructor.discriminators,R)?.schema;if(T==null)continue;let P=J.slice(W+1).join(".");if(Y=T.path(P),A=T,C=W+1,Y!=null){$=T._getPathType(P);break}}}return{type:$,schematype:Y}}});var Vh=z((Yu1,Uh)=>{var hq1=u4();Uh.exports=function F(A,B,D,X,Z,J,Y){if(!A?.options?.immutable)return!1;let $=A.options.immutable;if(typeof $==="function")$=$.call(Y,Y);if(!$)return!1;if(J?.overwriteImmutable)return!1;if(B===!1)return!1;if(B==="throw")throw new hq1(null,`Field ${Z} is immutable and strict = 'throw'`);return delete D[X],!0}});var Rh=z(($u1,wh)=>{var vq1=K0();wh.exports=function F(A,B,D){if(B==null)return;let X=Object.keys(B);for(let Z of X){let J=Z.startsWith("$");if(Z==="$set"){let Y=Object.keys(B[Z]);for(let $ of Y)Lh(A,B[Z],$,B,D)}else if(!J)Lh(A,B,Z,B,D)}};function Lh(F,A,B,D,X){let Z=F.path(B);if(Z==null)return;let J=vq1(Z,"options.immutable",null);if(J==null)return;if(typeof J==="function")J=J.call(X,X);if(!J)return;D.$setOnInsert=D.$setOnInsert||{},D.$setOnInsert[B]=A[B],delete A[B]}});var cH=z((Gu1,Ih)=>{var dH=R9();Ih.exports=function F(A,B,D){if(B.indexOf(".")===-1){if(dH.has(B))return;A[B]=D;return}let X=B.split("."),Z=X.pop(),J=A;for(let Y of X){if(dH.has(Y))continue;if(J[Y]==null)J[Y]={};J=J[Y]}if(!dH.has(Z))J[Z]=D}});var sH=z((Eu1,Oh)=>{var vX=U2(),O8=K1(),Ph=IH(),Nh=u4(),mq1=M9(),iH=xF(),dq1=f9(),cq1=x2(),lH=j6(),pH=Kh(),Mh=Vh(),lq1=Rh(),kh=T9().schemaMixedSymbol,pq1=cH(),s3=B1(),{internalToObjectOptions:iq1}=n6(),nH=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);Oh.exports=function F(A,B,D,X,Z){if(B==null)return;if(D=D||{},Array.isArray(B)){let C=B.length;for(let W=0;W<C;++W){let H=Object.keys(B[W]);for(let q of H)B[W][q]=nq1(q,B[W][q])}return B}if(A!=null&&Z!=null&&s3.hasUserDefinedProperty(Z,A.options.discriminatorKey)&&typeof Z[A.options.discriminatorKey]!=="object"&&A.discriminators!=null){let C=Z[A.options.discriminatorKey],W=lH(X.model.discriminators,C);A=A.discriminators[C]||W?.schema||A}else if(A!=null&&D.overwriteDiscriminatorKey&&s3.hasUserDefinedProperty(B,A.options.discriminatorKey)&&A.discriminators!=null){let C=B[A.options.discriminatorKey],W=lH(X.model.discriminators,C);A=A.discriminators[C]||W?.schema||A}else if(A!=null&&D.overwriteDiscriminatorKey&&B.$set!=null&&s3.hasUserDefinedProperty(B.$set,A.options.discriminatorKey)&&A.discriminators!=null){let C=B.$set[A.options.discriminatorKey],W=lH(X.model.discriminators,C);A=A.discriminators[C]||W?.schema||A}if(D.upsert)lq1(A,B,X);let J=Object.keys(B),Y=J.length,$={},G,E=!1;Z=Z||{};while(Y--){let C=J[Y];if(!nH.has(C)){if(!$.$set)if(B.$set)$.$set=B.$set;else $.$set={};if($.$set[C]=B[C],J.splice(Y,1),!~J.indexOf("$set"))J.push("$set")}else if(C==="$set"){if(!$.$set)$[C]=B[C]}else $[C]=B[C]}Y=J.length;while(Y--){let C=J[Y];if(G=$[C],E=E||C.startsWith("$"),G?.$__)G=G.toObject(iq1),$[C]=G;if(G&&typeof G==="object"&&!Buffer.isBuffer(G)&&nH.has(C))uh(A,G,C,D,X,Z);else{let W="Invalid atomic update value for "+C+". Expected an object, received "+typeof G;throw new Error(W)}if(C.startsWith("$")&&s3.isEmptyObject(G))delete $[C]}if(s3.hasOwnKeys($)===!1&&D.upsert&&s3.hasOwnKeys(Z))return{$setOnInsert:{...Z}};return $};/*!
 * ignore
 */function nq1(F,A){if(F==="$unset"){if(typeof A!=="string"&&(!Array.isArray(A)||A.find((B)=>typeof B!=="string")))throw new O8("Invalid $unset in pipeline, must be  a string or an array of strings");return A}if(F==="$project"){if(A==null||typeof A!=="object")throw new O8("Invalid $project in pipeline, must be an object");return A}if(F==="$addFields"||F==="$set"){if(A==null||typeof A!=="object")throw new O8("Invalid "+F+" in pipeline, must be an object");return A}else if(F==="$replaceRoot"||F==="$replaceWith"){if(A==null||typeof A!=="object")throw new O8("Invalid "+F+" in pipeline, must be an object");return A}throw new O8('Invalid update pipeline operator: "'+F+'"')}function uh(F,A,B,D,X,Z,J){let Y=D.strict;J=J?J+".":"";let $=Object.keys(A),G=$.length,E=!1,C,W,H,q=null,Q=Y??F.options.strict;while(G--){if(W=$[G],H=A[W],B==="$pull"){if(C=F._getSchema(J+W),C==null){let U=pH(F,A,Z,J+W,D);if(U.schematype!=null)C=U.schematype}if(C?.schema!=null){A[W]=dq1(C.schema,A[W],D,X),E=!0;continue}}let K=J?J+W:W;if(F.discriminatorMapping!=null&&K===F.options.discriminatorKey&&F.discriminatorMapping.value!==A[W]&&!D.overwriteDiscriminatorKey){if(Q==="throw"){let U=new Error(`Can't modify discriminator key "`+K+'" on discriminator model');q=h9(U,X,K,q);continue}else if(Q){delete A[W];continue}}if(cq1(H)==="Object"){if(C=F._getSchema(J+W),C==null){let U=pH(F,A,Z,J+W,D);if(U.schematype!=null)C=U.schematype}if(B!=="$setOnInsert"&&Mh(C,Y,A,W,J+W,D,X))continue;if(C&&(C.embeddedSchemaType||C.Constructor)&&B in aH)if("$each"in H){E=!0;try{A[W]={$each:u8(C,H.$each,B,W,X,J+W)}}catch(U){q=h9(U,X,W,q)}if(H.$slice!=null)A[W].$slice=H.$slice|0;if(H.$sort)A[W].$sort=H.$sort;if(H.$position!=null)A[W].$position=iH(H.$position)}else{if(C?.$isSingleNested){let U=Y==null?C.schema.options.strict:Y;try{A[W]=C.castForQuery(null,H,X,{strict:U})}catch(R){q=h9(R,X,W,q)}}else try{A[W]=u8(C,H,B,W,X,J+W)}catch(U){q=h9(U,X,W,q)}if(A[W]===void 0){delete A[W];continue}E=!0}else if(B==="$currentDate"||B in aH&&C){try{A[W]=u8(C,H,B,W,X,J+W)}catch(U){q=h9(U,X,W,q)}if(A[W]===void 0){delete A[W];continue}E=!0}else if(B==="$rename"){let U=new Ph(`${J}${W}.$rename`);try{A[W]=u8(U,H,B,W,X,J+W)}catch(R){q=h9(R,X,W,q)}if(A[W]===void 0){delete A[W];continue}E=!0}else{let U=J+W,R=F._getPathType(U),w=Y;if(R?.schema&&w==null)w=R.schema.options.strict;if(R.pathType==="undefined"){if(w==="throw")throw new Nh(U);else if(w){delete A[W];continue}}E|=uh(F,H,B,D,X,Z,J+W)||s3.isObject(H)&&s3.hasOwnKeys(H)===!1}}else{let U=W==="$each"||W==="$or"||W==="$and"||W==="$in";if(U&&!J)throw new O8('Invalid update: Unexpected modifier "'+W+'" as a key in operator. Did you mean something like { $addToSet: { fieldName: { $each: [...] } } }? Modifiers such as "$each", "$or", "$and", "$in" must appear under a valid field path.');let R=U?J:J+W;if(C=F._getSchema(R),B!=="$setOnInsert"&&Mh(C,Y,A,W,J+W,D,X))continue;let w=F._getPathType(R);if(C==null){let T=pH(F,A,Z,R,D);if(T.schematype!=null)C=T.schematype,w=T.type}let V=Y;if(w?.schema&&Y==null)V=w.schema.options.strict;if(V&&!C&&!/real|nested/.test(w.pathType))if(V==="throw"&&F.virtuals[R]==null)throw new Nh(J+W);else delete A[W];else{if(B==="$rename"){if(A[W]==null)throw new vX("String",A[W],`${J}${W}.$rename`);let T=new Ph(`${J}${W}.$rename`,null,null,F);A[W]=T.castForQuery(null,A[W],X);continue}try{if(J.length===0||W.indexOf(".")===-1)A[W]=u8(C,H,B,W,X,J+W);else if(V!==!1||C!=null)pq1(A,W,u8(C,H,B,W,X,J+W)),delete A[W]}catch(T){q=h9(T,X,W,q)}if(Array.isArray(A[W])&&(B==="$addToSet"||B==="$push")&&W!=="$each"){if(C&&C.embeddedSchemaType&&!C.embeddedSchemaType.$isMongooseArray&&!C.embeddedSchemaType[kh])A[W]={$each:A[W]}}if(A[W]===void 0){delete A[W];continue}E=!0}}}if(q!=null)throw q;return E}/*!
 * ignore
 */function h9(F,A,B,D){if(typeof A!=="object"||!A.options.multipleCastError)throw F;return D=D||new mq1,D.addError(B,F),D}var jh={$pop:1,$inc:1},aq1={$unset:1},aH={$push:1,$addToSet:1,$set:1,$setOnInsert:1};/*!
 * ignore
 */var Th={$set:1,$setOnInsert:1};function u8(F,A,B,D,X,Z){if(!F){if(B in jh)try{return iH(A)}catch{throw new vX("number",A,Z)}return A}if(F.$isMongooseArray&&B in aH&&(s3.isObject(A)||Array.isArray(A))&&!Th[B]){let Y=0,$=F;while($.$isMongooseArray)++Y,$=$.embeddedSchemaType;let G=0,E=A;while(Array.isArray(E))++G,E=E[0];let C=Y-G;while(G<Y)A=[A],++G;let W=F.applySetters(Array.isArray(A)?A:[A],X);for(let H=0;H<C;++H)W=W[0];return W}if(B in aq1)return A;if(B in jh){if(A==null)throw new vX("number",A,F.path);if(B==="$inc")return F.castForQuery(null,A,X);try{return iH(A)}catch{throw new vX("number",A,F.path)}}if(B==="$currentDate"){if(typeof A==="object")return{$type:A.$type};return Boolean(A)}if(nH.has(D))return F.castForQuery(D,A,X);if(Th[B]){let Y=A!=null&&F.$isMongooseArray&&F.$fullPath!=null&&!F.$fullPath.match(/\d+$/),$=F[kh]!=null;if(Y||$)return F.applySetters(A,X);return F.castForQuery(null,A,X)}return F.castForQuery(null,A,X)}});var rH=z((Cu1,Sh)=>{Sh.exports=function F(A,B,D){if(!D||!B?.upsert)return;if(B.overwrite){if(!aF(A,D))A[D]=0}else if(!aF(A,D)&&!aF(A?.$set,D)&&!aF(A?.$inc,D)&&!aF(A?.$setOnInsert,D)){if(!A.$setOnInsert)A.$setOnInsert={};A.$setOnInsert[D]=0}};function aF(F,A){if(F==null||typeof F!=="object")return!1;return Object.hasOwn(F,A)}});var tH=z((Wu1,_h)=>{var sq1=K0();_h.exports=function(F,A,B,D){D=D||{};let X=D.setDefaultsOnInsert??A.base.options.setDefaultsOnInsert;if(!D.upsert||X===!1)return B;let Z=Object.keys(B||{}),J={},Y={},$=Z.length,G=!1;for(let W=0;W<$;++W)if(Z[W].charAt(0)==="$"){G=!0;break}let E=Object.keys(F),C=E.length;for(let W=0;W<C;++W){let H=E[W],q=F[H];if(q&&typeof q==="object"){let Q=Object.keys(q),K=Q.length,U=!1;for(let R=0;R<K;++R)if(Q[R].charAt(0)==="$"){U=!0;break}if(U)continue}J[H]=!0}if(D?.overwrite&&!G)return B;return A.eachPath(function(W,H){if(H.path==="_id"&&H.options.auto)return;let q=H.getDefault(null,!0);if(typeof q==="undefined")return;let Q=H.splitPath();if(Q.includes("$*"))return;if(rq1(B,J,W,Q,G))return;if(B=B||{},B.$setOnInsert=B.$setOnInsert||{},sq1(B,W)==null)B.$setOnInsert[W]=q;Y[W]=q}),B};function rq1(F,A,B,D,X){if(A[B])return!0;let Z=D[0];for(let J=1;J<D.length;++J){if(A[Z])return!0;Z+="."+D[J]}if(X){for(let J in F)if(J.charAt(0)==="$"){if(xh(F[J],B,D))return!0}}else if(xh(F,B,D))return!0;return!1}function xh(F,A,B){if(F==null||typeof F!=="object")return!1;if(Object.hasOwn(F,A))return!0;let D=B[0];for(let Z=1;Z<B.length;++Z){if(Object.hasOwn(F,D))return!0;D+="."+B[Z]}let X=A+".";for(let Z in F)if(Z.startsWith(X))return!0;return!1}});var oH=z((Hu1,T0)=>{var tq1=K1(),oq1=j6(),fh=IW(),gh=PW(),sF=f9(),bh=sH(),eq1=C0(),yh=rH(),{inspect:Fz1}=m("util"),hh=tH();T0.exports=function F(A,B,D){let X=A.base.now();if(B.insertOne)return(Z)=>T0.exports.castInsertOne(A,B.insertOne,D).then(()=>Z(null),(J)=>Z(J));else if(B.updateOne)return(Z)=>{try{T0.exports.castUpdateOne(A,B.updateOne,D,X),Z(null)}catch(J){Z(J)}};else if(B.updateMany)return(Z)=>{try{T0.exports.castUpdateMany(A,B.updateMany,D,X),Z(null)}catch(J){Z(J)}};else if(B.replaceOne)return(Z)=>{T0.exports.castReplaceOne(A,B.replaceOne,D).then(()=>Z(null),(J)=>Z(J))};else if(B.deleteOne)return(Z)=>{try{T0.exports.castDeleteOne(A,B.deleteOne),Z(null)}catch(J){Z(J)}};else if(B.deleteMany)return(Z)=>{try{T0.exports.castDeleteMany(A,B.deleteMany),Z(null)}catch(J){Z(J)}};else return(Z)=>{let J=new tq1(`Invalid op passed to \`bulkWrite()\`: ${Fz1(B)}`);Z(J,null)}};T0.exports.castInsertOne=async function F(A,B,D){let X=S8(A,B.document),Z=new X(B.document);if(X.schema.options.timestamps&&mX(B,D))Z.initializeTimestamps();if(D.session!=null)Z.$session(D.session);let J=X?.schema?.options?.versionKey;if(J&&Z[J]==null)Z[J]=0;if(B.document=Z,D.skipValidation||B.skipValidation)return B;return await B.document.$validate(),B};T0.exports.castUpdateOne=function F(A,B,D,X){if(!B.filter)throw new Error("Must provide a filter object.");if(!B.update)throw new Error("Must provide an update object.");let Z=S8(A,B.filter),J=Z.schema,Y=D.strict??Z.schema.options.strict,$=eq1(B.update);rF(J,B.filter);let G=mX(B,D);if(Z.schema.$timestamps!=null&&G){let W=Z.schema.$timestamps.createdAt,H=Z.schema.$timestamps.updatedAt;gh(X,W,H,$,{timestamps:B.timestamps,overwriteImmutable:B.overwriteImmutable})}if(G)fh(X,$,Z.schema);let E=A.base.options.setDefaultsOnInsert;if((B.setDefaultsOnInsert??E)!==!1)hh(B.filter,Z.schema,$,{setDefaultsOnInsert:!0,upsert:B.upsert});return yh($,B,Z.schema.options.versionKey),B.filter=sF(Z.schema,B.filter,{strict:Y,upsert:B.upsert}),B.update=bh(Z.schema,$,{strict:Y,upsert:B.upsert,arrayFilters:B.arrayFilters,overwriteDiscriminatorKey:B.overwriteDiscriminatorKey,overwriteImmutable:B.overwriteImmutable},Z,B.filter),B};T0.exports.castUpdateMany=function F(A,B,D,X){if(!B.filter)throw new Error("Must provide a filter object.");if(!B.update)throw new Error("Must provide an update object.");let Z=S8(A,B.filter),J=Z.schema,Y=D.strict??Z.schema.options.strict,$=A.base.options.setDefaultsOnInsert;if((B.setDefaultsOnInsert??$)!==!1)hh(B.filter,Z.schema,B.update,{setDefaultsOnInsert:!0,upsert:B.upsert});let E=mX(B,D);if(Z.schema.$timestamps!=null&&E){let C=Z.schema.$timestamps.createdAt,W=Z.schema.$timestamps.updatedAt;gh(X,C,W,B.update,{timestamps:B.timestamps,overwriteImmutable:B.overwriteImmutable})}if(E)fh(X,B.update,Z.schema);rF(J,B.filter),yh(B.update,B,Z.schema.options.versionKey),B.filter=sF(Z.schema,B.filter,{strict:Y,upsert:B.upsert}),B.update=bh(Z.schema,B.update,{strict:Y,upsert:B.upsert,arrayFilters:B.arrayFilters,overwriteDiscriminatorKey:B.overwriteDiscriminatorKey,overwriteImmutable:B.overwriteImmutable},Z,B.filter)};T0.exports.castReplaceOne=async function F(A,B,D){let X=S8(A,B.filter),Z=X.schema,J=D.strict??X.schema.options.strict;rF(Z,B.filter),B.filter=sF(X.schema,B.filter,{strict:J,upsert:B.upsert});let Y=new X(B.replacement,J,{skipId:!0});if(X.schema.options.timestamps&&mX(B,D))Y.initializeTimestamps();if(D.session!=null)Y.$session(D.session);let $=X?.schema?.options?.versionKey;if($&&Y[$]==null)Y[$]=0;if(B.replacement=Y,D.skipValidation||B.skipValidation){B.replacement=B.replacement.toBSON();return}await B.replacement.$validate(),B.replacement=B.replacement.toBSON()};T0.exports.castDeleteOne=function F(A,B){let D=S8(A,B.filter),X=D.schema;rF(X,B.filter),B.filter=sF(D.schema,B.filter)};T0.exports.castDeleteMany=function F(A,B){let D=S8(A,B.filter),X=D.schema;rF(X,B.filter),B.filter=sF(D.schema,B.filter)};T0.exports.cast={insertOne:T0.exports.castInsertOne,updateOne:T0.exports.castUpdateOne,updateMany:T0.exports.castUpdateMany,replaceOne:T0.exports.castReplaceOne,deleteOne:T0.exports.castDeleteOne,deleteMany:T0.exports.castDeleteMany};function rF(F,A){if(F==null)return;if(F.discriminatorMapping&&!F.discriminatorMapping.isRoot)A[F.discriminatorMapping.key]=F.discriminatorMapping.value}function S8(F,A){let B=F.schema.options.discriminatorKey;if(A!=null&&Object.hasOwn(A,B))F=oq1(F.discriminators,A[B])||F;return F}function mX(F,A){let B=F.timestamps,D=A.timestamps;if(B!=null)return B;else if(D!=null)return D;return!0}});var eH=z((qu1,vh)=>{vh.exports=function F(A,B,D){return A.mongoose=A.mongoose||{},A.mongoose.validationErrors=B,A.mongoose.results=D,A}});var Dq=z((zu1,lh)=>{/*!
 * Module dependencies.
 */var Az1=DC(),Aq=m("events").EventEmitter,Bz1=S9(),k0=K5(),mh=fH(),V0=E6(),Dz1=wC(),Xz1=Zh(),Zz1=bH(),Jz1=C0(),Yz1=hX(),$z1=K0(),Gz1=hH(),dh=X4(),Bq=B1(),Ez1=Eh(),dX=oH(),{modelSymbol:cX}=t(),Cz1=dC(),Fq=eH(),Wz1=t().arrayAtomicsSymbol,tF=t().sessionNewDocuments,Hz1=globalThis.Date,qz1=["MONGODB-X509"];function F1(F){if(this.base=F,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=k0,this._readyState=k0.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof F==="undefined"||!F.connections.length)this.id=0;else this.id=F.nextConnectionId;this._queue=[]}/*!
 * Inherit from EventEmitter
 */Object.setPrototypeOf(F1.prototype,Aq.prototype);Object.defineProperty(F1.prototype,"readyState",{get:function(){if(this._readyState===k0.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS==="number"&&Hz1.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2)return k0.disconnected;return this._readyState},set:function(F){if(!(F in k0))throw new Error("Invalid connection state: "+F);if(this._readyState!==F){this._readyState=F;for(let A of this.otherDbs)A.readyState=F;if(k0.connected===F)this._hasOpened=!0;this.emit(k0[F])}}});F1.prototype.get=function F(A){if(Object.hasOwn(this.config,A))return this.config[A];return $z1(this.options,A)};F1.prototype.set=function F(A,B){if(Object.hasOwn(this.config,A))return this.config[A]=B,B;return this.options=this.options||{},this.options[A]=B,B};F1.prototype.collections;F1.prototype.name;F1.prototype.models;F1.prototype.id;Object.defineProperty(F1.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(F1.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(F1.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(F1.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(F1.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});F1.prototype.db;F1.prototype.client;F1.prototype.config;F1.prototype.createCollection=async function F(A,B){if(typeof B==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new V0("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(A,B)};F1.prototype.bulkWrite=async function F(A,B){await this._waitForConnect(),B=B||{};let D=B.ordered==null?!0:B.ordered,X=this.base.transactionAsyncLocalStorage?.getStore();if((!B||!Object.hasOwn(B,"session"))&&X?.session!=null)B={...B,session:X.session};let Z=this.base.now(),J=null;if(D){let Y=[];for(let $ of A){if(typeof $.model!=="string"&&!$.model?.[cX])throw new V0("Must specify model in Connection.prototype.bulkWrite() operations");let G=$.model[cX]?$.model:this.model($.model);if($.name==null)throw new V0("Must specify operation name in Connection.prototype.bulkWrite()");if(!Object.hasOwn(dX.cast,$.name))throw new V0(`Unrecognized bulkWrite() operation name ${$.name}`);await dX.cast[$.name](G,$,B,Z),Y.push({...$,namespace:G.namespace()})}J=await this.client.bulkWrite(Y,B)}else{let Y=[],$=[],G=[],E=[],C=[];for(let H=0;H<A.length;++H){let q=A[H];if(typeof q.model!=="string"&&!q.model?.[cX]){let U=new V0("Must specify model in Connection.prototype.bulkWrite() operations");G.push({index:H,error:U}),C[H]=U;continue}let Q;try{Q=q.model[cX]?q.model:this.model(q.model)}catch(U){G.push({index:H,error:U});continue}if(q.name==null){let U=new V0("Must specify operation name in Connection.prototype.bulkWrite()");G.push({index:H,error:U}),C[H]=U;continue}if(!Object.hasOwn(dX.cast,q.name)){let U=new V0(`Unrecognized bulkWrite() operation name ${q.name}`);G.push({index:H,error:U}),C[H]=U;continue}let K=null;try{K=dX.cast[q.name](Q,q,B,Z)}catch(U){G.push({index:H,error:U}),C[H]=U;continue}if(Cz1(K))E.push(K.then(()=>{Y.push({...q,namespace:Q.namespace()}),$.push(H)},(U)=>{G.push({index:H,error:U}),C[H]=U}));else Y.push({...q,namespace:Q.namespace()}),$.push(H)}if(E.length>0)await Promise.all(E);if(G=G.sort((H,q)=>H.index-q.index).map((H)=>H.error),Y.length===0){if(B.throwOnValidationError&&G.length)throw new mh(G,C,q,"bulkWrite");let q=new(this.base.driver.get()).BulkWriteResult(Gz1(),!1);return Fq(q,G,C)}let W;[J,W]=await this.client.bulkWrite(Y,B).then((H)=>[H,null]).catch((H)=>[null,H]);for(let H=0;H<$.length;++H)C[$[H]]=null;if(W){if(G.length>0)Fq(W,G,C),W.mongoose=W.mongoose||{},W.mongoose.validationErrors=G}if(G.length>0)if(B.throwOnValidationError)throw new mh(G,C,J,"bulkWrite");else Fq(J,G,C)}return J};F1.prototype.createCollections=async function F(A={}){let B={},D={},{continueOnError:X}=A;delete A.continueOnError;for(let Z of Object.values(this.models))try{B[Z.modelName]=await Z.createCollection({})}catch(J){if(!X){D[Z.modelName]=J;break}else B[Z.modelName]=J}if(!X&&Bq.hasOwnKeys(D)){let Z=Object.entries(D).map(([Y,$])=>`${Y}: ${$.message}`).join(", ");throw new Ez1(Z,D)}return B};F1.prototype.withSession=async function F(A){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(A)};F1.prototype.startSession=async function F(A){if(arguments.length>=2&&typeof arguments[1]==="function")throw new V0("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(A)};F1.prototype.transaction=function F(A,B){return this.startSession().then((D)=>{return D[tF]=new Map,D.withTransaction(()=>zz1(A,D,this.base),B).then((X)=>{return delete D[tF],X}).catch((X)=>{throw delete D[tF],X}).finally(()=>{D.endSession().catch(()=>{})})})};/*!
 * Reset document state in between transaction retries re: gh-13698
 */async function zz1(F,A,B){try{return B.transactionAsyncLocalStorage==null?await F(A):await new Promise((X)=>{B.transactionAsyncLocalStorage.run({session:A},()=>X(F(A)))})}catch(D){throw Qz1(A),D}}/*!
 * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
 */function Qz1(F){for(let A of F[tF].keys()){let B=F[tF].get(A);if(Object.hasOwn(B,"isNew"))A.$isNew=B.isNew;if(Object.hasOwn(B,"versionKey"))A.set(A.schema.options.versionKey,B.versionKey);if(B.modifiedPaths.length>0&&A.$__.activePaths.states.modify==null)A.$__.activePaths.states.modify={};for(let D of B.modifiedPaths){let X=A.$__.activePaths.paths[D];if(X!=null)delete A.$__.activePaths[X][D];A.$__.activePaths.paths[D]="modify",A.$__.activePaths.states.modify[D]=!0}for(let D of B.atomics.keys()){let X=A.$__getValue(D);if(X==null)continue;X[Wz1]=B.atomics.get(D)}}}F1.prototype.dropCollection=async function F(A){if(arguments.length>=2&&typeof arguments[1]==="function")throw new V0("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(A)};F1.prototype._waitForConnect=async function F(A){if((this.readyState===k0.connecting||this.readyState===k0.disconnected)&&this._shouldBufferCommands()){let B=this._getBufferTimeoutMS(),D=null,X=!1,Z={},J=new Promise((Y)=>{Z.fn=Y,this._queue.push(Z)});if(A)await J;else await Promise.race([J,new Promise((Y)=>{D=setTimeout(()=>{X=!0,Y()},B)})]);if(X){let Y=this._queue.indexOf(Z);if(Y!==-1)this._queue.splice(Y,1);let $="Connection operation buffering timed out after "+B+"ms";throw new V0($)}else if(D!=null)clearTimeout(D)}};/*!
 * Get the default buffer timeout for this connection
 */F1.prototype._getBufferTimeoutMS=function F(){if(this.config.bufferTimeoutMS!=null)return this.config.bufferTimeoutMS;if(this.base?.get("bufferTimeoutMS")!=null)return this.base.get("bufferTimeoutMS");return 1e4};F1.prototype.listCollections=async function F(){return await this._waitForConnect(),await this.db.listCollections().toArray()};F1.prototype.listDatabases=async function F(){throw new V0("listDatabases() not implemented by driver")};F1.prototype.dropDatabase=async function F(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new V0("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let A of Object.values(this.models))delete A.$init;return this.db.dropDatabase()};/*!
 * ignore
 */F1.prototype._shouldBufferCommands=function F(){if(this.config.bufferCommands!=null)return this.config.bufferCommands;if(this.base.get("bufferCommands")!=null)return this.base.get("bufferCommands");return!0};F1.prototype.error=function F(A,B){if(B)return B(A),null;if(this.listeners("error").length>0)this.emit("error",A);return Promise.reject(A)};F1.prototype.onOpen=function(){this.readyState=k0.connected;for(let F of this._queue)F.fn.apply(F.ctx,F.args);this._queue=[];for(let F in this.collections)if(Object.hasOwn(this.collections,F))this.collections[F].onOpen();this.emit("open")};F1.prototype.openUri=async function F(A,B){if(this.readyState===k0.connecting||this.readyState===k0.connected){if(this._connectionString===A)return this}this._closeCalled=!1;let D=!1;if(B&&"_fireAndForget"in B)D=B._fireAndForget,delete B._fireAndForget;try{Kz1.apply(arguments)}catch(X){if(D)throw X;throw this.$initialConnection=Promise.reject(X),X}this.$initialConnection=this.createClient(A,B).then(()=>this).catch((X)=>{if(this.readyState=k0.disconnected,this.listeners("error").length>0)dh(()=>this.emit("error",X));throw X});for(let X of Object.values(this.models))X.init().catch(function Z(){});if(D)return this;try{await this.$initialConnection}catch(X){throw ch(X)}return this};F1.prototype.on=function F(A,B){if(A==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return Aq.prototype.on.call(this,A,B)};F1.prototype.once=function F(A,B){if(A==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return Aq.prototype.once.call(this,A,B)};/*!
 * ignore
 */function Kz1(F,A,B){if(typeof A==="function"&&B==null)throw new V0("Connection.prototype.openUri() no longer accepts a callback");else if(typeof B==="function")throw new V0("Connection.prototype.openUri() no longer accepts a callback")}/*!
 * ignore
 */function ch(F){if(F?.name==="MongoServerSelectionError"){let A=F;F=new Dz1,F.assimilateError(A)}return F}F1.prototype.destroy=async function F(A){if(typeof A==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new V0("Connection.prototype.destroy() no longer accepts a callback");if(A!=null&&typeof A==="object")this.$wasForceClosed=!!A.force;else this.$wasForceClosed=!!A;return this._close(A,!0)};F1.prototype.close=async function F(A){if(typeof A==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new V0("Connection.prototype.close() no longer accepts a callback");if(A!=null&&typeof A==="object")this.$wasForceClosed=!!A.force;else this.$wasForceClosed=!!A;if(this._lastHeartbeatAt!=null)this._lastHeartbeatAt=null;for(let B of Object.values(this.models))delete B.$init;return this._close(A,!1)};F1.prototype._close=async function F(A,B){let D=this,X=this._closeCalled;if(this._closeCalled=!0,this._destroyCalled=B,this.client!=null)this.client._closeCalled=!0,this.client._destroyCalled=B;let Z=this;switch(this.readyState){case k0.disconnected:if(B){let J=this.base.connections.indexOf(Z);if(J!==-1)this.base.connections.splice(J,1)}if(!X)await this.doClose(A),this.onClose(A);break;case k0.connected:if(this.readyState=k0.disconnecting,await this.doClose(A),B){let J=D.base.connections.indexOf(Z);if(J!==-1)this.base.connections.splice(J,1)}this.onClose(A);break;case k0.connecting:return new Promise((J,Y)=>{let $=()=>{if(this.removeListener("open",$),this.removeListener("error",$),B)this.destroy(A).then(J,Y);else this.close(A).then(J,Y)};this.once("open",$),this.once("error",$)});case k0.disconnecting:return new Promise((J)=>{this.once("close",()=>{if(B&&this.base.connections.indexOf(Z)!==-1)this.base.connections.splice(this.base.connections.indexOf(Z),1);J()})})}return this};F1.prototype.doClose=function F(){throw new Error("Connection#doClose unimplemented by driver")};F1.prototype.onClose=function F(A){this.readyState=k0.disconnected;for(let D in this.collections)if(Object.hasOwn(this.collections,D))this.collections[D].onClose(A);this.emit("close",A);let B=typeof A==="object"&&A!==null?A.force:A;for(let D of this.otherDbs)this._destroyCalled?D.destroy({force:B,skipCloseClient:!0}):D.close({force:B,skipCloseClient:!0})};F1.prototype.collection=function(F,A){let B={autoIndex:this.config.autoIndex??this.base.options.autoIndex,autoCreate:this.config.autoCreate??this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex??this.base.options.autoSearchIndex};A=Object.assign({},B,A?Jz1(A):{}),A.$wasForceClosed=this.$wasForceClosed;let D=this.base?.__driver?.Collection||Yz1.get().Collection;if(!(F in this.collections))this.collections[F]=new D(F,this,A);return this.collections[F]};F1.prototype.plugin=function(F,A){return this.plugins.push([F,A]),this};F1.prototype.model=function F(A,B,D,X){if(!(this instanceof F1))throw new V0("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let Z;if(typeof A==="function")Z=A,A=Z.name;if(typeof B==="string")D=B,B=!1;if(Bq.isObject(B)){if(!B.instanceOfSchema)B=new Bz1(B);else if(!(B instanceof this.base.Schema))B=B._clone(this.base.Schema)}if(B&&!B.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let J={cache:!1,overwriteModels:this.base.options.overwriteModels},Y=Object.assign(J,X,{connection:this});if(this.models[A]&&!D&&Y.overwriteModels!==!0){if(B?.instanceOfSchema&&B!==this.models[A].schema)throw new V0.OverwriteModelError(A);return this.models[A]}let $;if(B?.instanceOfSchema){if(Zz1(B,this.plugins,null,"$connectionPluginsApplied"),$=this.base._model(Z||A,B,D,Y),!this.models[A])this.models[A]=$;return $.init().catch(function G(){}),$}if(this.models[A]&&D)return $=this.models[A],B=$.prototype.schema,$.__subclass(this,B,D);if(arguments.length===1){if($=this.models[A],!$)throw new V0.MissingSchemaError(A);return $}if(!$)throw new V0.MissingSchemaError(A);if(this===$.prototype.db&&(!D||D===$.collection.name)){if(!this.models[A])this.models[A]=$;return $}return this.models[A]=$.__subclass(this,B,D),this.models[A]};F1.prototype.deleteModel=function F(A){if(typeof A==="string"){let B=this.model(A);if(B==null)return this;let D=B.collection.name;delete this.models[A],delete this.collections[D],this.emit("deleteModel",B)}else if(A instanceof RegExp){let B=A,D=this.modelNames();for(let X of D)if(B.test(X))this.deleteModel(X)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+A+'"');return this};F1.prototype.watch=function F(A,B){return new Az1((Z)=>{dh(()=>{if(this.readyState===k0.connecting)this.once("open",function(){let J=this.db.watch(A,B);Z(null,J)});else{let J=this.db.watch(A,B);Z(null,J)}})},A,B)};F1.prototype.asPromise=async function F(){try{return await this.$initialConnection,this}catch(A){throw ch(A)}};F1.prototype.modelNames=function F(){return Object.keys(this.models)};F1.prototype.shouldAuthenticate=function F(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};F1.prototype.authMechanismDoesNotRequirePassword=function F(){if(this.options?.auth)return qz1.indexOf(this.options.auth.authMechanism)>=0;return!0};F1.prototype.optionsProvideAuthenticationData=function F(A){return A&&A.user&&(A.pass||this.authMechanismDoesNotRequirePassword())};F1.prototype.getClient=function F(){return this.client};F1.prototype.setClient=function F(){throw new V0("Connection#setClient not implemented by driver")};/*!
 * Called internally by `openUri()` to create a MongoClient instance.
 */F1.prototype.createClient=function F(){throw new V0("Connection#createClient not implemented by driver")};F1.prototype.syncIndexes=async function F(A={}){let B={},D={},{continueOnError:X}=A;delete A.continueOnError;for(let Z of Object.values(this.models))try{B[Z.modelName]=await Z.syncIndexes(A)}catch(J){if(!X){D[Z.modelName]=J;break}else B[Z.modelName]=J}if(!X&&Bq.hasOwnKeys(D)){let Z=Object.entries(D).map(([Y,$])=>`${Y}: ${$.message}`).join(", ");throw new Xz1(Z,D)}return B};/*!
 * Module exports.
 */F1.STATES=k0;lh.exports=F1});var Xq=z((Qu1,Uz1)=>{Uz1.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"9.1.2",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{kareem:"3.0.0",mongodb:"~7.0",mpath:"0.9.0",mquery:"6.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@ark/attest":"0.56.0","@mongodb-js/mongodb-downloader":"^1.0.0",acquit:"1.4.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1",ajv:"8.17.1","broken-link-checker":"^0.7.8",cheerio:"1.1.2",dox:"1.0.0",eslint:"9.39.2","eslint-plugin-markdown":"^5.1.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.20.0",marked:"15.x",mkdirp:"^3.0.1",mocha:"11.7.5",moment:"2.30.1","mongodb-memory-server":"11.0.1","mongodb-runner":"^6.0.0","mongodb-client-encryption":"~7.0",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",sinon:"21.0.1",tsd:"0.33.0",typescript:"5.9.3","typescript-eslint":"^8.31.1",uuid:"11.1.0"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:prepare:publish:8x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/8.x && mv ./tmp ./docs/8.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test:ci":"npm run test -- --reporter min","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-deno:ci":"npm run test-deno -- --reporter min","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-rs:ci":"npm run test-rs -- --reporter min","test-tsd":"node ./test/types/check-types-filename && tsd --full","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js","test-encryption:ci":"npm run test-encryption -- --reporter min",tdd:"mocha --watch --inspect --recursive ./test/*.test.js --watch-files lib/**/*.js test/**/*.js","test-coverage":"nyc --reporter=html --reporter=text npm test","test-coverage:ci":"nyc --reporter=html --reporter=text npm run test:ci","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","ts-benchmark:local":"node ./scripts/create-tarball && cd ./benchmarks/typescript/simple && rm -rf ./node_modules && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","attest-benchmark":"node ./benchmarks/typescript/infer.bench.mts"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=20.19.0"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2022"}}}});var ih=z((Ku1,ph)=>{var Vz1=C0(),Lz1=E6();function wz1(F,A){let B=A?A:{},D=B.readPreference?B.readPreference:Nz1(F),X=Vz1(B);return D&&D!=="primary"&&D!=="primaryPreferred"?Rz1(D,X):X}function Rz1(F,A){if(Iz1(A)&&Pz1(F))jz1();else return Mz1(A)}function Iz1(F){let A=F.config?.autoIndex,{autoCreate:B,autoIndex:D}=F;return!!(A||B||D)}function Pz1(F){return F==="secondary"||F==="secondaryPreferred"}function Nz1(F){let B=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(F);return B?B[1]:null}function Mz1(F){return F.config={autoIndex:!1},F.autoCreate=!1,F.autoIndex=!1,F}function jz1(){throw new Lz1('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}ph.exports=wz1});var nh=z((Tz1)=>{Tz1.setTimeout=setTimeout});var oh=z((Vu1,th)=>{/*!
 * Module dependencies.
 */var ah=Dq(),v9=E6(),n2=K5(),rh=G4(),uz1=Xq(),Oz1=ih(),Sz1=nh().setTimeout,oF=B1(),xz1=S9();function o6(){ah.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}o6.STATES=n2;/*!
 * Inherits from Connection.
 */Object.setPrototypeOf(o6.prototype,ah.prototype);o6.prototype.useDb=function(F,A){if(A=A||{},A.useCache&&this.relatedDbs[F])return this.relatedDbs[F];let B=new this.constructor;B.name=F,B.base=this.base,B.collections={},B.models={},B.replica=this.replica,B.config=Object.assign({},this.config,B.config),B.name=this.name,B.options=this.options,B._readyState=this._readyState,B._closeCalled=this._closeCalled,B._hasOpened=this._hasOpened,B._listening=!1,B._parent=this,B.host=this.host,B.port=this.port,B.user=this.user,B.pass=this.pass;let D=this;if(B.client=D.client,this.db&&this._readyState===n2.connected)X();else this._queue.push({fn:X});function X(){B.client=D.client,B.db=D.client.db(F),B._lastHeartbeatAt=D._lastHeartbeatAt,B.onOpen()}if(B.name=F,this.otherDbs.push(B),B.otherDbs.push(this),A?.useCache)this.relatedDbs[B.name]=B,B.relatedDbs=this.relatedDbs;return B};o6.prototype.aggregate=function F(A,B){return new this.base.Aggregate(null,this).append(A).option(B??{})};o6.prototype.removeDb=function F(A){let B=this.otherDbs.filter((D)=>D.name===A);if(!B.length)throw new v9(`No connections to database "${A}" found`);for(let D of B)D._closeCalled=!0,D._destroyCalled=!0,D._readyState=n2.disconnected,D.$wasForceClosed=!0;delete this.relatedDbs[A],this.otherDbs=this.otherDbs.filter((D)=>D.name!==A)};o6.prototype.doClose=async function F(A){if(this.client==null)return this;let B=!1;if(A!=null&&typeof A==="object")B=A.skipCloseClient,A=A.force;if(B)return this;return await this.client.close(A),await new Promise((D)=>Sz1(D,1)),this};o6.prototype.listDatabases=async function F(){return await this._waitForConnect(),await this.db.admin().listDatabases()};/*!
 * ignore
 */o6.prototype.createClient=async function F(A,B){if(typeof A!=="string")throw new v9(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof A}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new v9("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if(this.readyState===n2.connecting||this.readyState===n2.connected){if(this._connectionString!==A)throw new v9("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections")}if(B=Oz1(A,B),B){let Y=B.config?.autoIndex??B.autoIndex;if(Y!=null)this.config.autoIndex=Y!==!1,delete B.config,delete B.autoIndex;if("autoCreate"in B)this.config.autoCreate=!!B.autoCreate,delete B.autoCreate;if("sanitizeFilter"in B)this.config.sanitizeFilter=B.sanitizeFilter,delete B.sanitizeFilter;if("autoSearchIndex"in B)this.config.autoSearchIndex=B.autoSearchIndex,delete B.autoSearchIndex;if("bufferTimeoutMS"in B)this.config.bufferTimeoutMS=B.bufferTimeoutMS,delete B.bufferTimeoutMS;if(B.user||B.pass)B.auth=B.auth||{},B.auth.username=B.user,B.auth.password=B.pass,this.user=B.user,this.pass=B.pass;if(delete B.user,delete B.pass,B.bufferCommands!=null)this.config.bufferCommands=B.bufferCommands,delete B.bufferCommands}else B={};this._connectionOptions=B;let D=B.dbName;if(D!=null)this.$dbName=D;if(delete B.dbName,!oF.hasUserDefinedProperty(B,"driverInfo"))B.driverInfo={name:"Mongoose",version:uz1.version};let{schemaMap:X,encryptedFieldsMap:Z}=this._buildEncryptionSchemas();if((oF.hasOwnKeys(X)||oF.hasOwnKeys(Z))&&!B.autoEncryption)throw new Error("Must provide `autoEncryption` when connecting with encrypted schemas.");if(oF.hasOwnKeys(X))B.autoEncryption.schemaMap=X;if(oF.hasOwnKeys(Z))B.autoEncryption.encryptedFieldsMap=Z;this.readyState=n2.connecting,this._connectionString=A;let J;try{J=new rh.MongoClient(A,B)}catch(Y){throw this.readyState=n2.disconnected,Y}this.client=J,J.setMaxListeners(0),await J.connect(),Zq(this,J,B,D);for(let Y of this.otherDbs)Zq(Y,J,{},Y.name);return this};o6.prototype._buildEncryptionSchemas=function(){let F={},A={},B=Object.values(this.models).filter((Z)=>Z.schema._hasEncryptedFields());for(let Z of B){let{schema:J,collection:{collectionName:Y}}=Z,$=`${this.$dbName}.${Y}`,G=J.encryptionType()==="csfle"?A:F;if(G[$]??=new xz1({},{encryptionType:J.encryptionType()}),J.discriminatorMapping&&!J.discriminatorMapping.isRoot){let C=J._baseSchema;J.eachPath((W)=>{if(C.path(W))return;if(!G[$]._hasEncryptedField(W))return;throw new Error(`Cannot have duplicate keys in discriminators with encryption. key=${W}`)})}G[$].add(J)}let D=Object.fromEntries(Object.entries(A).map(([Z,J])=>[Z,J._buildSchemaMap()])),X=Object.fromEntries(Object.entries(F).map(([Z,J])=>[Z,J._buildEncryptedFields()]));return{schemaMap:D,encryptedFieldsMap:X}};/*!
 * ignore
 */o6.prototype.setClient=function F(A){if(!(A instanceof rh.MongoClient))throw new v9("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==n2.disconnected)throw new v9("Cannot call `setClient()` on a connection that is already connected.");if(A.topology==null)throw new v9("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=A.s.url,Zq(this,A,{},A.s.options.dbName);for(let B of Object.values(this.models))B.init().catch(function D(){});return this};/*!
 * ignore
 */function Zq(F,A,B,D){let X=D!=null?A.db(D):A.db();F.db=X,F.client=A,F.host=A?.s?.options?.hosts?.[0]?.host,F.port=A?.s?.options?.hosts?.[0]?.port,F.name=D!=null?D:X.databaseName,F._closeCalled=A._closeCalled;let Z=()=>{if(F.readyState!==n2.connected)F.readyState=n2.connected,F.emit("reconnect"),F.emit("reconnected"),F.onOpen()},J=A?.topology?.description?.type||"";if(J==="Single")A.on("serverDescriptionChanged",(Y)=>{if(Y.newDescription.type==="Unknown")F.readyState=n2.disconnected;else Z()});else if(J.startsWith("ReplicaSet"))A.on("topologyDescriptionChanged",(Y)=>{let $=Y.newDescription;if(F.readyState===n2.connected&&$.type!=="ReplicaSetWithPrimary")F.readyState=n2.disconnected;else if(F.readyState===n2.disconnected&&$.type==="ReplicaSetWithPrimary")Z()});if(F._lastHeartbeatAt=null,A.on("serverHeartbeatSucceeded",()=>{F._lastHeartbeatAt=Date.now();for(let Y of F.otherDbs)Y._lastHeartbeatAt=F._lastHeartbeatAt}),B.monitorCommands)A.on("commandStarted",(Y)=>F.emit("commandStarted",Y)),A.on("commandFailed",(Y)=>F.emit("commandFailed",Y)),A.on("commandSucceeded",(Y)=>F.emit("commandSucceeded",Y));F.onOpen();for(let Y in F.collections)if(Object.hasOwn(F.collections,Y))F.collections[Y].onOpen()}/*!
 * Module exports.
 */th.exports=o6});var eh=z((_z1)=>{/*!
 * Module exports.
 */_z1.BulkWriteResult=aV();_z1.Collection=sO();_z1.Connection=oh();_z1.ClientEncryption=G4().ClientEncryption});var Av=z((wu1,Fv)=>{/*!
 * Valid mongoose options
 */var hz1=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","strict","strictPopulate","strictQuery","timestamps.createdAt.immutable","toJSON","toObject","transactionAsyncLocalStorage","translateAliases","updatePipeline"]);Fv.exports=hz1});var Dv=z((Ru1,Bv)=>{/*!
 * Module dependencies.
 */var vz1=K1();class Jq extends vz1{constructor(F){let A=F.map((B)=>B.message).join(", ");if(A.length>50)A=A.slice(0,50)+"...";super(`eachAsync() finished with ${F.length} errors: ${A}`);this.errors=F}}Object.defineProperty(Jq.prototype,"name",{value:"EachAsyncMultiError"});/*!
 * exports
 */Bv.exports=Jq});var $q=z((Iu1,Zv)=>{/*!
 * Module dependencies.
 */var mz1=Dv(),Yq=X4();Zv.exports=async function F(A,B,D){let X=D.parallel||1,Z=D.batchSize,J=D.signal,Y=D.continueOnError,$=[],G=dz1(),E=!1;return new Promise((H,q)=>{if(J!=null){if(J.aborted)return H(null);J.addEventListener("abort",()=>{return E=!0,H(null)},{once:!0})}if(Z!=null){if(typeof Z!=="number")throw new TypeError("batchSize must be a number");else if(!Number.isInteger(Z))throw new TypeError("batchSize must be an integer");else if(Z<1)throw new TypeError("batchSize must be at least 1")}C((Q,K)=>{if(Q!=null)return q(Q);H(K)})});function C(H){let q=0,Q=0,K=null;for(let R=0;R<X;++R)G(U());function U(){let R=[],w=!1;return V;function V(N){if(w||E)return N();else if(K)return N();A(function(T,P){if(K!=null)return N();if(T!=null)if(T.name==="MongoCursorExhaustedError")P=null;else if(Y)$.push(T);else return K=T,H(T),N();if(P==null){if(w=!0,q<=0){let k=Y?Xv($):K;H(k)}else if(Z&&R.length)W(R,Q++,O);return N()}if(++q,Yq(()=>N()),Z)R.push(P);if(Z&&R.length!==Z){Yq(()=>G(V));return}let u=Z?R:P;function O(k){if(Z)q-=R.length,R=[];else--q;if(k!=null)if(Y)$.push(k);else return K=k,H(k);if((w||E)&&q<=0){let d=Y?Xv($):K;return H(d)}Yq(()=>G(V))}W(u,Q++,O)})}}}function W(H,q,Q){let K;try{K=B(H,q)}catch(U){return Q(U)}if(typeof K?.then==="function")K.then(function(){Q(null)},function(U){Q(U||new Error("`eachAsync()` promise rejected without error"))});else Q(null)}};function dz1(){let F=[],A=null,B=0;return function X(Z){if(A===null&&F.length===0)return A=B++,Z(D);F.push(Z)};function D(){if(F.length!==0)A=B++,F.shift()(D);else A=null}}function Xv(F){if(F.length===0)return null;return new mz1(F)}});var Hv=z((Pu1,Wv)=>{/*!
 * Module dependencies.
 */var eF=K1(),$v=m("stream").Readable,cz1=$q(),Gv=RF(),lz1=P9(),Gq=X4(),{once:pz1}=m("events"),Ev=m("util");function a2(F){$v.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=F,this._closed=!1;let A=F.model;this._mongooseOptions={},this._transforms=[],this.model=A,this.options={};let B=(D)=>{if(D!=null){if(D instanceof lz1.skipWrappedFunction){let X=D.args[0];if(X!=null&&(!Array.isArray(X)||X.length)){let Z=new eF('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+Ev.inspect(X)+'".');this._markError(Z),this.listeners("error").length>0&&this.emit("error",Z);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(D),this.listeners("error").length>0&&this.emit("error",D);return}if(Object.assign(this.options,F._optionsForExec()),this._transforms=this._transforms.concat(F._transforms.slice()),this.options.transform)this._transforms.push(this.options.transform);if(this.options.batchSize)this.options._populateBatchSize=Math.min(this.options.batchSize,5000);if(F._mongooseOptions._asyncIterator)this._mongooseOptions._asyncIterator=!0;if(A.collection._shouldBufferCommands()&&A.collection.buffer)A.collection.queue.push([()=>Jv(F,this)]);else Jv(F,this)};A.hooks.execPre("find",F).then(()=>B(null),(D)=>B(D))}Ev.inherits(a2,$v);/*!
 * ignore
 */function Jv(F,A){try{let B=F.model.collection.find(F._conditions,A.options);A.cursor=B,A.emit("cursor",B)}catch(B){A._markError(B),A.listeners("error").length>0&&A.emit("error",A._error)}}a2.prototype._read=function(){iX(this,(F,A)=>{if(F)return this.emit("error",F);if(!A){this.push(null),this.cursor.close(function(B){if(B)return this.emit("error",B)});return}this.push(A)})};a2.prototype.getDriverCursor=async function F(){if(this.cursor)return this.cursor;return await pz1(this,"cursor"),this.cursor};Object.defineProperty(a2.prototype,"map",{value:function(F){return this._transforms.push(F),this},enumerable:!0,configurable:!0,writable:!0});a2.prototype._markError=function(F){return this._error=F,this};a2.prototype.close=async function F(){if(typeof arguments[0]==="function")throw new eF("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(A){throw this.listeners("error").length>0&&this.emit("error",A),A}};a2.prototype._destroy=function F(A,B){let D=null;if(!this.cursor)D=new Promise((X)=>{this.once("cursor",X)});else D=Promise.resolve();return D.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,B()}).catch((X)=>{B(X)}),this};a2.prototype.rewind=function(){return Cv(this,()=>{this.cursor.rewind()}),this};a2.prototype.next=async function F(){if(typeof arguments[0]==="function")throw new eF("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new eF("Cannot call `next()` on a closed cursor");return new Promise((A,B)=>{iX(this,function(D,X){if(D)return B(D);A(X)})})};a2.prototype.eachAsync=function(F,A){if(typeof arguments[2]==="function")throw new eF("QueryCursor.prototype.eachAsync() no longer accepts a callback");if(typeof A==="function")A={};return A=A||{},cz1((B)=>iX(this,B),F,A)};a2.prototype.options;a2.prototype.addCursorFlag=function(F,A){return Cv(this,()=>{this.cursor.addCursorFlag(F,A)}),this};if(Symbol.asyncIterator!=null)a2.prototype[Symbol.asyncIterator]=function F(){return this._mongooseOptions._asyncIterator=!0,this};function iX(F,A){let B=A;if(B=function(D,X){if(D)return A(D);if(X===null)if(F._mongooseOptions._asyncIterator)return A(null,{done:!0});else return A(null,null);if(F._transforms.length&&X!==null)X=F._transforms.reduce(function(Z,J){return J.call(F,Z)},X);if(F._mongooseOptions._asyncIterator)return A(null,{value:X,done:!1});return A(null,X)},F._error)return Gq(function(){B(F._error)});if(F.skipped)return Gq(()=>B(null,null));if(F.cursor){if(F.query._mongooseOptions.populate&&!F._pop)F._pop=Gv.preparePopulationOptionsMQ(F.query,F.query._mongooseOptions),F._pop.__noPromise=!0;if(F.query._mongooseOptions.populate&&F.options._populateBatchSize>1)if(F._batchDocs&&F._batchDocs.length)return lX(F,F._batchDocs.shift(),F._pop,B);else if(F._batchExhausted)return B(null,null);else{F._batchDocs=[],F.cursor.next().then((D)=>{pX.call({ctx:F,callback:B},null,D)},(D)=>{pX.call({ctx:F,callback:B},D)});return}else return F.cursor.next().then((D)=>{if(!D){B(null,null);return}if(!F.query._mongooseOptions.populate)return lX(F,D,null,B);lX(F,D,F._pop,(X,Z)=>{if(X!=null)return B(X);F.query.model.populate(Z,F._pop).then((J)=>B(null,J),(J)=>B(J))})},(D)=>{B(D)})}else F.once("error",A),F.once("cursor",function(D){if(F.removeListener("error",A),D==null){if(F.skipped)return A(null,null);return}iX(F,A)})}/*!
 * ignore
 */function pX(F,A){if(F)return this.callback(F);if(!A)return this.ctx._batchExhausted=!0,Yv.call(this);if(this.ctx._batchDocs.push(A),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize)Gq(()=>this.ctx.cursor.next().then((B)=>{pX.call(this,null,B)},(B)=>{pX.call(this,B)}));else Yv.call(this)}/*!
 * ignore
 */function Yv(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{lX(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},(F)=>{this.callback(F)})}/*!
 * ignore
 */function lX(F,A,B,D){if(F.query._mongooseOptions.lean)return F.model.hooks.execPost("find",F.query,[[A]]).then(()=>D(null,A),($)=>D($));let{model:X,_fields:Z,_userProvidedFields:J,options:Y}=F.query;Gv.createModelAndInit(X,A,Z,J,Y,B,($,G)=>{if($!=null)return D($);F.model.hooks.execPost("find",F.query,[[G]]).then(()=>D(null,G),(E)=>D(E))})}/*!
 * ignore
 */function Cv(F,A){if(F.cursor)return A();F.once("cursor",function(B){if(B==null)return;A()})}Wv.exports=a2});var Cq=z((Nu1,zv)=>{var Eq=B1();function iz1(F,A,B){qv(F,A,B,"maxTimeMS")}function nz1(F,A,B){qv(F,A,B,"allowDiskUse")}zv.exports={applyGlobalMaxTimeMS:iz1,applyGlobalDiskUse:nz1};function qv(F,A,B,D){if(Eq.hasUserDefinedProperty(F,D))return;if(Eq.hasUserDefinedProperty(A,D))F[D]=A[D];else if(Eq.hasUserDefinedProperty(B,D))F[D]=B[D]}});var Wq=z((Mu1,Qv)=>{Qv.exports=function F(A,B){if(B.readConcern!==void 0)return;if(B?.session?.transaction)return;let D=A.options?.readConcern?.level;if(D!=null)B.readConcern={level:D}}});var Hq=z((ju1,Kv)=>{var az1=B1();Kv.exports=function F(A,B){if(B.writeConcern!=null)return;if(B?.session?.transaction)return;let D=A.options.writeConcern??{};if(az1.hasOwnKeys(D)){if(B.writeConcern={},!("w"in B)&&D.w!=null)B.writeConcern.w=D.w;if(!("j"in B)&&D.j!=null)B.writeConcern.j=D.j;if(!("wtimeout"in B)&&D.wtimeout!=null)B.writeConcern.wtimeout=D.wtimeout}else{if(!("w"in B)&&D.w!=null)B.w=D.w;if(!("j"in B)&&D.j!=null)B.j=D.j;if(!("wtimeout"in B)&&D.wtimeout!=null)B.wtimeout=D.wtimeout}}});var Lv=z((Tu1,Vv)=>{var Uv=fF();Vv.exports=function F(A,B,D){if(!Object.keys(D).some(Uv))return B.castForQuery(null,D,A);let Z=Object.keys(D),J=Z.length;while(J--){let Y=Z[J],$=D[Y];if(Y==="$not"){if($&&B&&!B.embeddedSchemaType&&!B.Constructor){let G=Object.keys($);if(G.length&&Uv(G[0]))for(let E of Object.keys($))$[E]=B.castForQuery(E,$[E],A);else D[Y]=B.castForQuery(Y,$,A);continue}}else D[Y]=B.castForQuery(Y,$,A)}return D}});var Rv=z((ku1,wv)=>{var sz1=/^\d+$/;wv.exports=function F(A,B,D){let X=A.path(B);if(X!=null)return X;let Z=B.split("."),J="",Y=!1;for(let $ of Z){if(Y&&sz1.test($))continue;if(J=J.length===0?$:J+"."+$,X=A.path(J),X?.schema){if(A=X.schema,!Y&&X.$isMongooseDocumentArray)Y=!0;if(D&&D[J])A=A.discriminators[D[J]]??A;J=""}else if(X?.instance==="Mixed")break}return X}});var jv=z((uu1,Mv)=>{var rz1=Lv(),Iv=uF(),Pv=Rv(),tz1=mH(),oz1=B1();Mv.exports=function F(A){let B=A.options.arrayFilters;if(!Array.isArray(B))return;let D=A.getUpdate(),X=A.schema,Z=tz1(D),J=X.options.strict;if(A._mongooseOptions.strict!=null)J=A._mongooseOptions.strict;if(A.model?.base.options.strictQuery!=null)J=A.model.base.options.strictQuery;if(X._userProvidedOptions.strictQuery!=null)J=X._userProvidedOptions.strictQuery;if(A._mongooseOptions.strictQuery!=null)J=A._mongooseOptions.strictQuery;Nv(B,X,J,Z,A)};function Nv(F,A,B,D,X){let Z={};for(let J of F){if(J==null)throw new Error(`Got null array filter in ${F}`);let Y=Object.keys(J).filter((q)=>J[q]!=null);if(Y.length===0)continue;let $=Y[0];if($==="$and"||$==="$or"){for(let q of Y)Nv(J[q],A,B,D,X);continue}let G=$.indexOf("."),E=G===-1?$:$.substring(0,G);if(D[E]==null)continue;let C=Iv(D[E]),W=Pv(A,C,Z),H=W!=null?W.schema:null;if(H?.discriminators!=null&&J[E+"."+H.options.discriminatorKey])H=H.discriminators[J[E+"."+H.options.discriminatorKey]]||H,Z[C]=J[E+"."+H.options.discriminatorKey];for(let q of Y){if(D[q]===null)continue;if(oz1.hasOwnKeys(D)===!1)continue;let Q=q.indexOf("."),K=Q===-1?null:q.substring(Q),U;if(K==null||H==null)U=W;else K=Iv(K),U=Pv(H,K,Z);if(U==null){if(!B)return;let R=K==null?C+".0":C+".0"+K;throw new Error(`Could not find path "${R}" in schema`)}if(typeof J[q]==="object")J[q]=rz1(X,U,J[q]);else J[q]=U.castForQuery(null,J[q])}}}});var nX=z((Ou1,Tv)=>{var ez1=E8(),FQ1=A8();/*!
 * ignore
 */Tv.exports=function F(A){if(A==null)return!1;let B=Object.keys(A),D=B.length;if(D===0)return!1;for(let X=0;X<D;++X){let Z=B[X];if(Z.startsWith("+"))continue;if(ez1(A[Z])&&!!A[Z])if(FQ1(A[Z]))return F(A[Z]);else return!!A[Z]}return!1}});var uv=z((Su1,kv)=>{kv.exports=function F(A,B){return A===B||B.startsWith(A+".")}});var _v=z((XQ1)=>{/*!
 * Module dependencies.
 */var qq=["__proto__","constructor","prototype"],aX=XQ1.clone=function F(A,B){if(A===void 0||A===null)return A;if(Array.isArray(A))return XQ1.cloneArray(A,B);if(A.constructor){if(/ObjectI[dD]$/.test(A.constructor.name))return typeof A.clone=="function"?A.clone():new A.constructor(A.id);if(A.constructor.name==="ReadPreference")return new A.constructor(A.mode,F(A.tags,B));if(A._bsontype=="Binary"&&A.buffer&&A.value)return typeof A.clone=="function"?A.clone():new A.constructor(A.value(!0),A.sub_type);if(A.constructor.name==="Date"||A.constructor.name==="Function")return new A.constructor(+A);if(A.constructor.name==="RegExp")return new RegExp(A);if(A.constructor.name==="Buffer")return Buffer.from(A)}if(BQ1(A))return XQ1.cloneObject(A,B);if(A.valueOf)return A.valueOf()};/*!
 * ignore
 */XQ1.cloneObject=function F(A,B){let D=B&&B.minimize,X={},Z=Object.keys(A),J=Z.length,Y=!1,$,G="",E=0;for(E=0;E<J;++E){if(G=Z[E],qq.indexOf(G)!==-1)continue;if($=aX(A[G],B),!D||typeof $!=="undefined")Y||(Y=!0),X[G]=$}return D?Y&&X:X};XQ1.cloneArray=function F(A,B){let D=[],X=A.length,Z=0;for(;Z<X;Z++)D.push(aX(A[Z],B));return D};XQ1.merge=function F(A,B){let D=Object.keys(B);for(let X of D){if(qq.indexOf(X)!==-1)continue;if(typeof A[X]==="undefined")A[X]=B[X];else if(XQ1.isObject(B[X]))F(A[X],B[X]);else A[X]=B[X]}};XQ1.mergeClone=function F(A,B){let D=Object.keys(B);for(let X of D){if(qq.indexOf(X)!==-1)continue;if(typeof A[X]==="undefined")A[X]=aX(B[X]);else if(XQ1.isObject(B[X]))F(A[X],B[X]);else A[X]=aX(B[X])}};XQ1.readPref=function F(A){switch(A){case"p":A="primary";break;case"pp":A="primaryPreferred";break;case"s":A="secondary";break;case"sp":A="secondaryPreferred";break;case"n":A="nearest";break}return A};XQ1.readConcern=function F(A){if(typeof A==="string"){switch(A){case"l":A="local";break;case"a":A="available";break;case"m":A="majority";break;case"lz":A="linearizable";break;case"s":A="snapshot";break}A={level:A}}return A};var AQ1=Object.prototype.toString;XQ1.toString=function(F){return AQ1.call(F)};var BQ1=XQ1.isObject=function(F){return XQ1.toString(F)=="[object Object]"};XQ1.keys=Object.keys;XQ1.create=typeof Object.create=="function"?Object.create:DQ1;function DQ1(F){if(arguments.length>1)throw new Error("Adding properties is not supported");function A(){}return A.prototype=F,new A}XQ1.inherits=function(F,A){F.prototype=XQ1.create(A.prototype),F.prototype.constructor=F};XQ1.isArgumentsObject=function(F){return Object.prototype.toString.call(F)==="[object Arguments]"}});var gv=z((fv)=>{var J0=fv;J0.distinct=function(F){if(F._fields&&Object.keys(F._fields).length>0)return"field selection and slice";let A=Object.keys(J0.distinct),B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};J0.distinct.select=J0.distinct.slice=J0.distinct.sort=J0.distinct.limit=J0.distinct.skip=J0.distinct.batchSize=J0.distinct.hint=J0.distinct.tailable=!0;J0.findOneAndUpdate=J0.findOneAndDelete=function(F){let A=Object.keys(J0.findOneAndUpdate),B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};J0.findOneAndUpdate.limit=J0.findOneAndUpdate.skip=J0.findOneAndUpdate.batchSize=J0.findOneAndUpdate.tailable=!0;J0.findOneAndReplace=function(F){let A=Object.keys(J0.findOneAndUpdate),B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};J0.countDocuments=function(F){if(F._fields&&Object.keys(F._fields).length>0)return"field selection and slice";let A=Object.keys(J0.countDocuments),B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};J0.countDocuments.slice=J0.countDocuments.batchSize=J0.countDocuments.tailable=!0});var Qq=z((qQ1,bv)=>{qQ1.isNode=typeof process!="undefined"&&typeof bv=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;qQ1.isMongo=!qQ1.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";qQ1.isBrowser=!qQ1.isNode&&!qQ1.isMongo&&typeof window!="undefined";qQ1.type=qQ1.isNode?"node":qQ1.isMongo?"mongo":qQ1.isBrowser?"browser":"unknown"});var FA=z((hv,vv)=>{var Kq=["find","findOne","updateMany","updateOne","replaceOne","countDocuments","estimatedDocumentCount","distinct","findOneAndDelete","findOneAndReplace","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function Uq(){}for(let F=0,A=Kq.length;F<A;++F){let B=Kq[F];Uq.prototype[B]=QQ1(B)}vv.exports=hv=Uq;Uq.methods=Kq;function QQ1(F){return function(){throw new Error("collection."+F+" not implemented")}}});var lv=z((dv,cv)=>{var KQ1=FA();class mv extends KQ1{constructor(F){super();this.collection=F,this.collectionName=F.collectionName}async find(F,A){return this.collection.find(F,A).toArray()}async findOne(F,A){return this.collection.findOne(F,A)}async countDocuments(F,A){return this.collection.countDocuments(F,A)}async estimatedDocumentCount(F,A){return this.collection.estimatedDocumentCount(F,A)}async distinct(F,A,B){return this.collection.distinct(F,A,B)}async updateMany(F,A,B){return this.collection.updateMany(F,A,B)}async updateOne(F,A,B){return this.collection.updateOne(F,A,B)}async replaceOne(F,A,B){return this.collection.replaceOne(F,A,B)}async deleteOne(F,A){return this.collection.deleteOne(F,A)}async deleteMany(F,A){return this.collection.deleteMany(F,A)}async findOneAndDelete(F,A){return this.collection.findOneAndDelete(F,A)}async findOneAndUpdate(F,A,B){return this.collection.findOneAndUpdate(F,A,B)}async findOneAndReplace(F,A,B){return this.collection.findOneAndReplace(F,A,B)}findCursor(F,A){return this.collection.find(F,A)}}cv.exports=dv=mv});var iv=z((gu1,pv)=>{var Vq=Qq();if(Vq.type=="unknown")throw new Error("Unknown environment");pv.exports=Vq.isNode?lv():Vq.isMongo?FA():FA()});var Iq=z((sv,rv)=>{var UQ1=m("assert"),av=m("util"),_1=_v(),r3=av.debuglog("mquery");function y(F,A){if(!(this instanceof y))return new y(F,A);let B=this.constructor.prototype;if(this.op=B.op||void 0,this.options=Object.assign({},B.options),this._conditions=B._conditions?_1.clone(B._conditions):{},this._fields=B._fields?_1.clone(B._fields):void 0,this._updateDoc=B._updateDoc?_1.clone(B._updateDoc):void 0,this._path=B._path||void 0,this._distinctDoc=B._distinctDoc||void 0,this._collection=B._collection||void 0,this._traceFunction=B._traceFunction||void 0,A)this.setOptions(A);if(F)this.find(F)}y.prototype.toConstructor=function F(){function A(D,X){if(!(this instanceof A))return new A(D,X);y.call(this,D,X)}_1.inherits(A,y);let B=A.prototype;return B.options={},B.setOptions(this.options),B.op=this.op,B._conditions=_1.clone(this._conditions),B._fields=_1.clone(this._fields),B._updateDoc=_1.clone(this._updateDoc),B._path=this._path,B._distinctDoc=this._distinctDoc,B._collection=this._collection,B._traceFunction=this._traceFunction,A};y.prototype.setOptions=function(F){if(!(F&&_1.isObject(F)))return this;let A=_1.keys(F),B;for(let D=0;D<A.length;++D)if(B=A[D],typeof this[B]=="function"){let X=Array.isArray(F[B])?F[B]:[F[B]];this[B].apply(this,X)}else this.options[B]=F[B];return this};y.prototype.collection=function F(A){return this._collection=new y.Collection(A),this};y.prototype.collation=function(F){return this.options.collation=F,this};y.prototype.$where=function(F){return this._conditions.$where=F,this};y.prototype.where=function(){if(!arguments.length)return this;if(!this.op)this.op="find";let F=typeof arguments[0];if(F=="string"){if(this._path=arguments[0],arguments.length===2)this._conditions[this._path]=arguments[1];return this}if(F=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};y.prototype.equals=function F(A){this._ensurePath("equals");let B=this._path;return this._conditions[B]=A,this};y.prototype.eq=function F(A){this._ensurePath("eq");let B=this._path;return this._conditions[B]=A,this};y.prototype.or=function F(A){let B=this._conditions.$or||(this._conditions.$or=[]);if(!Array.isArray(A))A=[A];return B.push.apply(B,A),this};y.prototype.nor=function F(A){let B=this._conditions.$nor||(this._conditions.$nor=[]);if(!Array.isArray(A))A=[A];return B.push.apply(B,A),this};y.prototype.and=function F(A){let B=this._conditions.$and||(this._conditions.$and=[]);if(!Array.isArray(A))A=[A];return B.push.apply(B,A),this};/*!
 * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
 *
 *     Thing.where('type').nin(array)
 */"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(F){y.prototype[F]=function(){let A,B;if(arguments.length===1)this._ensurePath(F),B=arguments[0],A=this._path;else B=arguments[1],A=arguments[0];let D=this._conditions[A]===null||typeof this._conditions[A]==="object"?this._conditions[A]:this._conditions[A]={};return D["$"+F]=B,this}});y.prototype.mod=function(){let F,A;if(arguments.length===1)this._ensurePath("mod"),F=arguments[0],A=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),F=[arguments[0],arguments[1]],A=this._path;else if(arguments.length===3)F=[arguments[1],arguments[2]],A=arguments[0];else F=arguments[1],A=arguments[0];let B=this._conditions[A]||(this._conditions[A]={});return B.$mod=F,this};y.prototype.exists=function(){let F,A;if(arguments.length===0)this._ensurePath("exists"),F=this._path,A=!0;else if(arguments.length===1)if(typeof arguments[0]==="boolean")this._ensurePath("exists"),F=this._path,A=arguments[0];else F=arguments[0],A=!0;else if(arguments.length===2)F=arguments[0],A=arguments[1];let B=this._conditions[F]||(this._conditions[F]={});return B.$exists=A,this};y.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let F,A,B;if(typeof arguments[0]==="function")this._ensurePath("elemMatch"),A=this._path,F=arguments[0];else if(_1.isObject(arguments[0]))this._ensurePath("elemMatch"),A=this._path,B=arguments[0];else if(typeof arguments[1]==="function")A=arguments[0],F=arguments[1];else if(arguments[1]&&_1.isObject(arguments[1]))A=arguments[0],B=arguments[1];else throw new TypeError("Invalid argument");if(F)B=new y,F(B),B=B._conditions;let D=this._conditions[A]||(this._conditions[A]={});return D.$elemMatch=B,this};y.prototype.within=function F(){if(this._ensurePath("within"),this._geoComparison="$geoWithin",arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);else if(2<arguments.length)return this.polygon.apply(this,arguments);let A=arguments[0];if(!A)throw new TypeError("Invalid argument");if(A.center)return this.circle(A);if(A.box)return this.box.apply(this,A.box);if(A.polygon)return this.polygon.apply(this,A.polygon);if(A.type&&A.coordinates)return this.geometry(A);throw new TypeError("Invalid argument")};y.prototype.box=function(){let F,A;if(arguments.length===3)F=arguments[0],A=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),F=this._path,A=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let B=this._conditions[F]||(this._conditions[F]={});return B[this._geoComparison||"$geoWithin"]={$box:A},this};y.prototype.polygon=function(){let F,A;if(typeof arguments[0]=="string")F=Array.from(arguments),A=F.shift();else this._ensurePath("polygon"),A=this._path,F=Array.from(arguments);let B=this._conditions[A]||(this._conditions[A]={});return B[this._geoComparison||"$geoWithin"]={$polygon:F},this};y.prototype.circle=function(){let F,A;if(arguments.length===1)this._ensurePath("circle"),F=this._path,A=arguments[0];else if(arguments.length===2)F=arguments[0],A=arguments[1];else throw new TypeError("Invalid argument");if(!(("radius"in A)&&A.center))throw new Error("center and radius are required");let B=this._conditions[F]||(this._conditions[F]={}),D=A.spherical?"$centerSphere":"$center",X=this._geoComparison||"$geoWithin";if(B[X]={},B[X][D]=[A.center,A.radius],"unique"in A)B[X].$uniqueDocs=!!A.unique;return this};y.prototype.near=function F(){let A,B;if(this._geoComparison="$near",arguments.length===0)return this;else if(arguments.length===1)this._ensurePath("near"),A=this._path,B=arguments[0];else if(arguments.length===2)A=arguments[0],B=arguments[1];else throw new TypeError("Invalid argument");if(!B.center)throw new Error("center is required");let D=this._conditions[A]||(this._conditions[A]={}),X=B.spherical?"$nearSphere":"$near";if(Array.isArray(B.center)){D[X]=B.center;let Z="maxDistance"in B?B.maxDistance:null;if(Z!=null)D.$maxDistance=Z;if(B.minDistance!=null)D.$minDistance=B.minDistance}else{if(B.center.type!="Point"||!Array.isArray(B.center.coordinates))throw new Error(av.format("Invalid GeoJSON specified for %s",X));if(D[X]={$geometry:B.center},"maxDistance"in B)D[X].$maxDistance=B.maxDistance;if("minDistance"in B)D[X].$minDistance=B.minDistance}return this};y.prototype.intersects=function F(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let A=arguments[0];if(A!=null&&A.type&&A.coordinates)return this.geometry(A);throw new TypeError("Invalid argument")};y.prototype.geometry=function F(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let A,B;if(arguments.length===1)this._ensurePath("geometry"),B=this._path,A=arguments[0];else throw new TypeError("Invalid argument");if(!(A.type&&Array.isArray(A.coordinates)))throw new TypeError("Invalid argument");let D=this._conditions[B]||(this._conditions[B]={});return D[this._geoComparison]={$geometry:A},this};y.prototype.select=function F(){let A=arguments[0];if(!A)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let B=this._fields||(this._fields={}),D=typeof A,X,Z;if((D=="string"||_1.isArgumentsObject(A))&&typeof A.length=="number"||Array.isArray(A)){if(D=="string")A=A.split(/\s+/);for(X=0,Z=A.length;X<Z;++X){let J=A[X];if(!J)continue;let Y=J[0]=="-"?0:1;if(Y===0)J=J.substring(1);B[J]=Y}return this}if(_1.isObject(A)){let J=_1.keys(A);for(X=0;X<J.length;++X)B[J[X]]=A[J[X]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};y.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let F,A;if(arguments.length===1){let D=arguments[0];if(typeof D==="object"&&!Array.isArray(D)){let X=Object.keys(D),Z=X.length;for(let J=0;J<Z;++J)this.slice(X[J],D[X[J]]);return this}this._ensurePath("slice"),F=this._path,A=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),F=this._path,A=[arguments[0],arguments[1]];else F=arguments[0],A=arguments[1];else if(arguments.length===3)F=arguments[0],A=[arguments[1],arguments[2]];let B=this._fields||(this._fields={});return B[F]={$slice:A},this};y.prototype.sort=function(F){if(!F)return this;let A,B,D;this._validate("sort");let X=typeof F;if(Array.isArray(F)){B=F.length;for(A=0;A<F.length;++A){if(!Array.isArray(F[A]))throw new Error("Invalid sort() argument, must be array of arrays");VQ1(this.options,F[A][0],F[A][1])}return this}if(arguments.length===1&&X=="string"){F=F.split(/\s+/),B=F.length;for(A=0;A<B;++A){if(D=F[A],!D)continue;let Z=D[0]=="-"?-1:1;if(Z===-1)D=D.substring(1);nv(this.options,D,Z)}return this}if(_1.isObject(F)){let Z=_1.keys(F);for(A=0;A<Z.length;++A)D=Z[A],nv(this.options,D,F[D]);return this}if(typeof Map!=="undefined"&&F instanceof Map)return LQ1(this.options,F),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};/*!
 * @ignore
 */var Lq={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function nv(F,A,B){if(Array.isArray(F.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let D;if(B&&B.$meta){D=F.sort||(F.sort={}),D[A]={$meta:B.$meta};return}D=F.sort||(F.sort={});let X=String(B||1).toLowerCase();if(X=Lq[X],!X)throw new TypeError("Invalid sort value: { "+A+": "+B+" }");D[A]=X}function VQ1(F,A,B){if(F.sort=F.sort||[],!Array.isArray(F.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let D=String(B||1).toLowerCase();if(D=Lq[D],!D)throw new TypeError("Invalid sort value: [ "+A+", "+B+" ]");F.sort.push([A,D])}function LQ1(F,A){if(F.sort=F.sort||new Map,!(F.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");A.forEach(function(B,D){let X=String(B||1).toLowerCase();if(X=Lq[X],!X)throw new TypeError("Invalid sort value: < "+D+": "+B+" >");F.sort.set(D,X)})}/*!
 * limit, skip, batchSize, comment
 *
 * Sets these associated options.
 *
 *     query.comment('feed query');
 */["limit","skip","batchSize","comment"].forEach(function(F){y.prototype[F]=function(A){return this._validate(F),this.options[F]=A,this}});y.prototype.maxTime=y.prototype.maxTimeMS=function(F){return this._validate("maxTime"),this.options.maxTimeMS=F,this};y.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let F=arguments[0];if(_1.isObject(F)){let A=this.options.hint||(this.options.hint={});for(let B in F)A[B]=F[B];return this}if(typeof F==="string")return this.options.hint=F,this;throw new TypeError("Invalid hint. "+F)};y.prototype.j=function F(A){return this.options.j=A,this};y.prototype.slaveOk=function(F){return this.options.slaveOk=arguments.length?!!F:!0,this};y.prototype.read=y.prototype.setReadPreference=function(F){if(arguments.length>1&&!y.prototype.read.deprecationWarningIssued)console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),y.prototype.read.deprecationWarningIssued=!0;return this.options.readPreference=_1.readPref(F),this};y.prototype.readConcern=y.prototype.r=function(F){return this.options.readConcern=_1.readConcern(F),this};y.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};y.prototype.writeConcern=y.prototype.w=function F(A){if(typeof A==="object"){if(typeof A.j!=="undefined")this.options.j=A.j;if(typeof A.w!=="undefined")this.options.w=A.w;if(typeof A.wtimeout!=="undefined")this.options.wtimeout=A.wtimeout}else this.options.w=A==="m"?"majority":A;return this};y.prototype.wtimeout=y.prototype.wTimeout=function F(A){return this.options.wtimeout=A,this};y.prototype.merge=function(F){if(!F)return this;if(!y.canMerge(F))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");if(F instanceof y){if(F._conditions)_1.merge(this._conditions,F._conditions);if(F._fields)this._fields||(this._fields={}),_1.merge(this._fields,F._fields);if(F.options)this.options||(this.options={}),_1.merge(this.options,F.options);if(F._updateDoc)this._updateDoc||(this._updateDoc={}),_1.mergeClone(this._updateDoc,F._updateDoc);if(F._distinctDoc)this._distinctDoc=F._distinctDoc;return this}return _1.merge(this._conditions,F),this};y.prototype.find=function(F){if(this.op="find",y.canMerge(F))this.merge(F);return this};y.prototype._find=async function F(){let A=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return r3("find",this._collection.collectionName,A,B),this._collection.find(A,B)};y.prototype.cursor=function F(A){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(A);let B=this._conditions,D=this._optionsForExec();if(this.$useProjection)D.projection=this._fieldsForExec();else D.fields=this._fieldsForExec();return r3("findCursor",this._collection.collectionName,B,D),this._collection.findCursor(B,D)};y.prototype.findOne=function(F){if(this.op="findOne",y.canMerge(F))this.merge(F);return this};y.prototype._findOne=async function F(){let A=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return r3("findOne",this._collection.collectionName,A,B),this._collection.findOne(A,B)};y.prototype.countDocuments=function(F){if(this.op="countDocuments",this._validate(),y.canMerge(F))this.merge(F);return this};y.prototype._countDocuments=async function F(){let A=this._conditions,B=this._optionsForExec();return r3("countDocuments",this._collection.collectionName,A,B),this._collection.countDocuments(A,B)};y.prototype.estimatedDocumentCount=function(){return this.op="estimatedDocumentCount",this._validate(),this};y.prototype._estimatedDocumentCount=async function F(){let A=this._conditions,B=this._optionsForExec();return r3("estimatedDocumentCount",this._collection.collectionName,A,B),this._collection.estimatedDocumentCount(A,B)};y.prototype.distinct=function(F,A){if(this.op="distinct",this._validate(),!A&&typeof F==="string")A=F,F=void 0;if(typeof A=="string")this._distinctDoc=A;if(y.canMerge(F))this.merge(F);return this};y.prototype._distinct=async function F(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let A=this._conditions,B=this._optionsForExec();return this._collection.distinct(this._distinctDoc,A,B)};y.prototype.updateMany=function F(A,B,D){return wq(this,"updateMany",A,B,D)};y.prototype._updateMany=async function(){return Rq(this,"updateMany")};y.prototype.updateOne=function F(A,B,D){return wq(this,"updateOne",A,B,D)};y.prototype._updateOne=async function(){return Rq(this,"updateOne")};y.prototype.replaceOne=function F(A,B,D){return this.setOptions({overwrite:!0}),wq(this,"replaceOne",A,B,D)};y.prototype._replaceOne=async function(){return Rq(this,"replaceOne")};/*!
 * Internal helper for updateMany, updateOne
 */function wq(F,A,B,D,X){if(F.op=A,y.canMerge(B))F.merge(B);if(D)F._mergeUpdate(D);if(_1.isObject(X))F.setOptions(X);return F}async function Rq(F,A){let B=F._optionsForExec(),D=F._conditions,X=F._updateForExec();return r3(A,F._collection.collectionName,D,X,B),F._collection[A](D,X,B)}y.prototype.deleteOne=function(F){if(this.op="deleteOne",y.canMerge(F))this.merge(F);return this};y.prototype._deleteOne=async function(){let F=this._optionsForExec();delete F.justOne;let A=this._conditions;return r3("deleteOne",this._collection.collectionName,A,F),this._collection.deleteOne(A,F)};y.prototype.deleteMany=function(F){if(this.op="deleteMany",y.canMerge(F))this.merge(F);return this};y.prototype._deleteMany=async function(){let F=this._optionsForExec();delete F.justOne;let A=this._conditions;return this._collection.deleteMany(A,F)};y.prototype.findOneAndUpdate=function(F,A,B){if(this.op="findOneAndUpdate",this._validate(),y.canMerge(F))this.merge(F);if(A)this._mergeUpdate(A);return B&&this.setOptions(B),this};y.prototype._findOneAndUpdate=async function(){let F=this._conditions,A=this._updateForExec(),B=this._optionsForExec();return this._collection.findOneAndUpdate(F,A,B)};y.prototype.findOneAndReplace=function(F,A,B){if(this.op="findOneAndReplace",this._validate(),y.canMerge(F))this.merge(F);if(A)this._updateDoc=A,this.options=this.options||{},this.options.overwrite=!0;return B&&this.setOptions(B),this};y.prototype._findOneAndReplace=async function(){let F=this._conditions,A=this._updateForExec(),B=this._optionsForExec();return r3("findOneAndReplace",this._collection.collectionName,F,A,B),this._collection.findOneAndReplace(F,A,B)};y.prototype.findOneAndDelete=function(F,A){if(this.op="findOneAndDelete",this._validate(),y.canMerge(F))this.merge(F);return A&&this.setOptions(A),this};y.prototype._findOneAndDelete=async function(){let F=this._optionsForExec(),A=this._conditions;return r3("findOneAndDelete",this._collection.collectionName,A,F),this._collection.findOneAndDelete(A,F)};y.prototype.setTraceFunction=function(F){return this._traceFunction=F,this};y.prototype.exec=async function F(A){if(typeof A==="string")this.op=A;UQ1.ok(this.op,"Missing query type: (find, etc)");let B="_"+this.op;if(typeof this[B]!=="function")throw new TypeError(`this[${B}] is not a function`);return this[B]()};y.prototype.then=async function(F,A){return this.exec().then(F,A)};y.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let F=this._conditions,A=this._optionsForExec();if(this.$useProjection)A.projection=this._fieldsForExec();else A.fields=this._fieldsForExec();return this._collection.findCursor(F,A)};y.prototype.selected=function F(){return!!(this._fields&&Object.keys(this._fields).length>0)};y.prototype.selectedInclusively=function F(){if(!this._fields)return!1;let A=Object.keys(this._fields);if(A.length===0)return!1;for(let B=0;B<A.length;++B){let D=A[B];if(this._fields[D]===0)return!1;if(this._fields[D]&&typeof this._fields[D]==="object"&&this._fields[D].$meta)return!1}return!0};y.prototype.selectedExclusively=function F(){if(!this._fields)return!1;let A=Object.keys(this._fields);if(A.length===0)return!1;for(let B=0;B<A.length;++B){let D=A[B];if(this._fields[D]===0)return!0}return!1};y.prototype._mergeUpdate=function(F){if(!this._updateDoc)this._updateDoc={};if(F instanceof y){if(F._updateDoc)_1.mergeClone(this._updateDoc,F._updateDoc)}else _1.mergeClone(this._updateDoc,F)};y.prototype._optionsForExec=function(){return _1.clone(this.options)};y.prototype._fieldsForExec=function(){return _1.clone(this._fields)};y.prototype._updateForExec=function(){let F=this._updateDoc==null?{}:_1.clone(this._updateDoc),A=_1.keys(F),B={};for(let D of A){if(this.options.overwrite){B[D]=F[D];continue}if(D[0]!=="$"){if(!B.$set)if(F.$set)B.$set=F.$set;else B.$set={};if(B.$set[D]=F[D],!~A.indexOf("$set"))A.push("$set")}else if(D==="$set"){if(!B.$set)B[D]=F[D]}else B[D]=F[D]}return this._compiledUpdate=B,B};y.prototype._ensurePath=function(F){if(!this._path){let A=F+"() must be used after where() when called with these arguments";throw new Error(A)}};/*!
 * Permissions
 */y.permissions=gv();y._isPermitted=function(F,A){let B=y.permissions[A];if(!B)return!0;return B[F]!==!0};y.prototype._validate=function(F){let A,B;if(F===void 0){if(B=y.permissions[this.op],typeof B!="function")return!0;A=B(this)}else if(!y._isPermitted(F,this.op))A=F;if(A)throw new Error(A+" cannot be used with "+this.op)};y.canMerge=function(F){return F instanceof y||_1.isObject(F)};y.setGlobalTraceFunction=function(F){y.traceFunction=F};/*!
 * Exports.
 */y.utils=_1;y.env=Qq();y.Collection=iv();y.BaseCollection=FA();rv.exports=sv=y});var Pq=z((bu1,tv)=>{tv.exports=function F(A,B){if(typeof A==="string")A=A.split(/\s+/);if(!Array.isArray(A)&&Object.prototype.toString.call(A)!=="[object Arguments]")return A;let X=A.length,Z={};for(let J=0;J<X;++J){let Y=A[J];if(!Y)continue;let $=Y[0]=="-"?0:1;if(!B&&$===0)Y=Y.substring(1);Z[Y]=$}return Z}});var Fm=z((yu1,ev)=>{ev.exports=function F(A,B){let D=Object.keys(A).map((X)=>Object.keys(A[X])).reduce((X,Z)=>X.concat(Z),[]);return B.filter((X)=>{return ov(X,D)})};function ov(F,A){let B=Object.keys(F)[0];if(B==="$and"||B==="$or"){if(!Array.isArray(F[B]))return!1;return F[B].find((Z)=>ov(Z,A))!=null}let D=B.indexOf("."),X=D===-1?B:B.slice(0,D);return A.find((Z)=>Z.includes("$["+X+"]"))!=null}});var rX=z((hu1,Am)=>{/*!
 * ignore
 */Am.exports=function F(A){if(typeof A!=="object"||A===null)return!1;let B=Object.keys(A),D=B.length;for(let X=0;X<D;++X)if(B[X][0]==="$")return!0;return!1}});var Nq=z((vu1,Bm)=>{var wQ1=rX(),{trustedSymbol:RQ1}=B8();Bm.exports=function F(A){if(A==null||typeof A!=="object")return A;if(Array.isArray(A)){for(let D of A)F(D);return A}let B=Object.keys(A);for(let D of B){let X=A[D];if(X?.[RQ1])continue;if(D==="$and"||D==="$or"){F(X);continue}if(wQ1(X)){let Z=Object.keys(X);if(Z.length===1&&Z[0]==="$eq")continue;A[D]={$eq:A[D]}}}return A}});var Xm=z((mu1,Dm)=>{Dm.exports=function F(A){if(A==null)return;let B=Object.keys(A);for(let D=0;D<B.length;++D)if(typeof A[B[D]]==="string")A[B[D]]=1}});var Ym=z((du1,Jm)=>{var IQ1=C8(),PQ1=nX();/*!
 * ignore
 */Jm.exports=function F(A,B,D){if(D==null)return;let X=Object.keys(D);if(B=B||{},PQ1(A))for(let Z of X){if(!Zm(B,Z))A[Z]=1;else if(B[Z]===0)delete A[Z];let J=D[Z]?.refPath;if(typeof J==="string"){if(!Zm(B,J))A[J]=1;else if(B[J]===0)delete A[J]}}else if(IQ1(A))for(let Z of X){if(B[Z]==null)delete A[Z];let J=D[Z]?.refPath;if(typeof J==="string"&&B[J]==null)delete A[J]}};/*!
 * ignore
 */function Zm(F,A){let B=A.split("."),D=B.length,X=B[0];for(let Z=1;Z<D;++Z){if(F[X]!=null||F[X+".$"]!=null)return!0;X+="."+B[Z]}return F[X]!=null||F[X+".$"]!=null}});var Cm=z((cu1,Em)=>{/*!
 * Module dependencies.
 */var $m=M9(),NQ1=uF(),Gm=fD().flatten;Em.exports=async function F(A,B,D,X){let Z=Object.keys(D||{}),J={},Y={},$={},G={},E=Z.length,C=!1,W,H;for(let N=0;N<E;++N)if(Z[N].startsWith("$")){if(C=!0,Z[N]==="$push"||Z[N]==="$addToSet"){let O=Object.keys(D[Z[N]]);for(let k=0;k<O.length;++k)if(W=D[Z[N]][O[k]],W?.$each)G[O[k]]=(G[O[k]]||[]).concat(W.$each);else G[O[k]]=(G[O[k]]||[]).concat([W]);continue}let T=Gm(D[Z[N]],null,null,B),P=Object.keys(T),u=P.length;for(let O=0;O<u;++O){let k=NQ1(P[O]);if(H=Z[N],k.includes("$"))continue;if(H==="$set"||H==="$setOnInsert"||H==="$pull"||H==="$pullAll")Y[k]=T[P[O]],$[k]=H==="$pull"||H==="$pullAll";else if(H==="$unset")Y[k]=void 0;J[k]=!0}}if(!C)Y=Gm(D,null,null,B),J=Object.keys(Y);let q=Object.keys(Y),Q=q.length,K=[],U=[],R=[],w=A;for(let N=0;N<Q;++N){let T=Y[q[N]],P=B._getSchema(q[N]);if(P==null)continue;if(P.instance==="Mixed"&&P.path!==q[N])continue;if(T&&Array.isArray(T.$in))T.$in.forEach((u,O)=>{K.push(P.doValidate(u,w,{updateValidator:!0}).catch((k)=>{k.path=q[O]+".$in."+O,U.push(k)}))});else{if($[q[N]]&&P.$isMongooseArray)continue;if(P.$isMongooseDocumentArrayElement&&T?.$__!=null)R.push(q[N]),K.push(P.doValidate(T,w,{updateValidator:!0}).catch((u)=>{if(u.errors)for(let O of Object.keys(u.errors)){let k=u.errors[O];k.path=q[N]+"."+O,U.push(k)}else u.path=q[N],U.push(u)}));else{if(R.find((O)=>q[N].startsWith(O+".")))continue;if(P.$isSingleNested)R.push(q[N]);K.push(P.doValidate(T,w,{updateValidator:!0}).catch((O)=>{if(P.schema!=null&&P.schema.options.storeSubdocValidationError===!1&&O instanceof $m)return;if(O)O.path=q[N],U.push(O)}))}}}let V=Object.keys(G);for(let N of V){let T=B._getSchema(N);if(T&&T.$isMongooseDocumentArray)K.push(T.doValidate(G[N],X?.context==="query"?A:null).catch((P)=>{P.path=N,U.push(P)}));else{T=B._getSchema(N+".0");for(let P of G[N])K.push(T.doValidate(P,X?.context==="query"?A:null,{updateValidator:!0}).catch((u)=>{u.path=N,U.push(u)}))}}if(await Promise.all(K),U.length){let N=new $m(null);for(let T of U)N.addError(T.path,T);throw N}}});var FZ=z((lu1,Nm)=>{/*!
 * Module dependencies.
 */var BA=U2(),MQ1=RD(),jq=P9(),S0=K1(),t3=uD(),Wm=Hv(),Hm=M9(),{applyGlobalMaxTimeMS:DA,applyGlobalDiskUse:XA}=Cq(),jQ1=wW(),TQ1=Wq(),kQ1=Hq(),uQ1=f9(),OQ1=jv(),oX=xF(),SQ1=sH(),s2=C0(),xQ1=j6(),ZA=RF(),_Q1=n6().internalToObjectOptions,fQ1=C8(),gQ1=nX(),bQ1=yD(),qm=uv(),Qm=W6(),eX=Iq(),yQ1=Pq(),hQ1=Fm(),vQ1=Nq(),mQ1=Xm(),dQ1=Ym(),Km=tH(),tX=R9(),cQ1=Cm(),AA=m("util"),k1=B1(),lQ1=OF().queryMiddlewareFunctions,pQ1=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),iQ1=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function b(F,A,B,D){if(!this._mongooseOptions)this._mongooseOptions={};A=A||{},this._transforms=[],this._hooks=new jq,this._execCount=0;let X=Object.keys(A);for(let J of X)this._mongooseOptions[J]=A[J];if(D)this.mongooseCollection=D;if(B)this.model=B,this.schema=B.schema;if(this.model?._mapreduce)this.lean();if(eX.call(this,null,A),D)this.collection(D);if(F)this.find(F);this.options=this.options||{},this.$useProjection=!0;let Z=this?.schema?.options?.collation||null;if(Z!=null)this.options.collation=Z}function Um(F){if(F==null)return!0;if(typeof F!=="object")return!0;if(k1.hasOwnKeys(F)===!1)return!0;for(let A of["$and","$or","$nor"])if(Array.isArray(F[A])){if(F[A].length===0||F[A].every((B)=>Um(B)))return!0}return!1}function _8(F,A){if(A?.requireFilter&&Um(F))throw new Error("Empty or invalid filter not allowed with requireFilter enabled")}/*!
 * inherit mquery
 */b.prototype=new eX;b.prototype.constructor=b;b.prototype.count=void 0;b.prototype.findOneAndRemove=void 0;b.base=eX.prototype;/*!
 * Overwrite mquery's `_distinct`, because Mongoose uses that name
 * to store the field to apply distinct on.
 */Object.defineProperty(b.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});b.use$geoWithin=eX.use$geoWithin;b.prototype.toConstructor=function F(){let A=this.model,B=this.mongooseCollection,D=function(J,Y){if(!(this instanceof D))return new D(J,Y);this._mongooseOptions=s2(X._mongooseOptions),b.call(this,J,Y||null,A,B)};AA.inherits(D,A.Query);let X=D.prototype;X.options={};let Z=Object.assign({},this.options);if(Z.sort!=null)X.sort(Z.sort),delete Z.sort;return X.setOptions(Z),X.op=this.op,X._conditions=s2(this._conditions),X._fields=s2(this._fields),X._update=s2(this._update,{flattenDecimals:!1}),X._path=this._path,X._distinct=this._distinct,X._collection=this._collection,X._mongooseOptions=this._mongooseOptions,D};b.prototype.clone=function(){let F=this.model,A=this.mongooseCollection,B=new this.model.Query({},{},F,A),D=Object.assign({},this.options);if(D.sort!=null)B.sort(D.sort),delete D.sort;return B.setOptions(D),B.op=this.op,B._conditions=s2(this._conditions),B._fields=s2(this._fields),B._update=s2(this._update,{flattenDecimals:!1}),B._path=this._path,B._distinct=this._distinct,B._collection=this._collection,B._mongooseOptions=this._mongooseOptions,B};b.prototype.slice=function(...F){if(F.length===0)return this;this._validate("slice");let A,B;if(F.length===1){let X=F[0];if(typeof X==="object"&&!Array.isArray(X)){let Z=Object.keys(X),J=Z.length;for(let Y=0;Y<J;++Y)this.slice(Z[Y],X[Z[Y]]);return this}this._ensurePath("slice"),A=this._path,B=F[0]}else if(F.length===2)if(typeof F[0]==="number")this._ensurePath("slice"),A=this._path,B=[F[0],F[1]];else A=F[0],B=F[1];else if(F.length===3)A=F[0],B=[F[1],F[2]];let D={};return D[A]={$slice:B},this.select(D),this};/*!
 * ignore
 */var nQ1=new Set(lQ1);b.prototype._validateOp=function(){if(this.op!=null&&!nQ1.has(this.op))this.error(new Error('Query has invalid `op`: "'+this.op+'"'));if(this.op!=="estimatedDocumentCount"&&this._conditions==null)throw new t3(this._conditions,"filter",this.op)};b.prototype.mod=function(){let F,A;if(arguments.length===1)this._ensurePath("mod"),F=arguments[0],A=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),F=[arguments[0],arguments[1]],A=this._path;else if(arguments.length===3)F=[arguments[1],arguments[2]],A=arguments[0];else F=arguments[1],A=arguments[0];let B=this._conditions[A]||(this._conditions[A]={});return B.$mod=F,this};b.prototype.limit=function F(A){if(this._validate("limit"),typeof A==="string")try{A=oX(A)}catch{throw new BA("Number",A,"limit")}return this.options.limit=A,this};b.prototype.skip=function F(A){if(this._validate("skip"),typeof A==="string")try{A=oX(A)}catch{throw new BA("Number",A,"skip")}return this.options.skip=A,this};b.prototype.projection=function(F){if(arguments.length===0)return this._fields;return this._fields={},this._userProvidedFields={},this.select(F),this._fields};b.prototype.select=function F(){let A=arguments[0];if(!A)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let B=this._fields||(this._fields={}),D=this._userProvidedFields||(this._userProvidedFields={}),X=void 0;if(this.model!=null&&k1.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))X=this.model.db.options.sanitizeProjection;else if(this.model!=null&&k1.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))X=this.model.base.options.sanitizeProjection;else X=this._mongooseOptions.sanitizeProjection;function Z(J){return typeof J==="string"&&X?J=1:J}if(A=yQ1(A,!0),k1.isObject(A)){if(this.selectedInclusively())Object.entries(A).forEach(([J,Y])=>{if(Y){if(B["-"+J]!=null)delete B["-"+J];B[J]=D[J]=Z(Y)}else Object.keys(D).forEach(($)=>{if(qm(J,$))delete B[$],delete D[$]})});else if(this.selectedExclusively())Object.entries(A).forEach(([J,Y])=>{if(!Y){if(B["+"+J]!=null)delete B["+"+J];B[J]=D[J]=Z(Y)}else Object.keys(D).forEach(($)=>{if(qm(J,$))delete B[$],delete D[$]})});else{let J=Object.keys(A);for(let Y=0;Y<J.length;++Y){let $=A[J[Y]],G=J[Y];B[G]=Z($),D[G]=Z($)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};b.prototype.schemaLevelProjections=function F(A){return this._mongooseOptions.schemaLevelProjections=A,this};b.prototype.sanitizeProjection=function F(A){return this._mongooseOptions.sanitizeProjection=A,this};b.prototype.read=function F(A,B){if(typeof A==="string")A=jQ1(A),this.options.readPreference={mode:A,tags:B};else this.options.readPreference=A;return this};b.prototype.toString=function F(){if(this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove")return`${this.model.modelName}.${this.op}(${AA.inspect(this._conditions)})`;if(this.op==="distinct")return`${this.model.modelName}.distinct('${this._distinct}', ${AA.inspect(this._conditions)})`;if(this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne")return`${this.model.modelName}.${this.op}(${AA.inspect(this._conditions)}, ${AA.inspect(this._update)})`;return`${this.model.modelName}.${this.op}()`};b.prototype.session=function F(A){if(A==null)delete this.options.session;return this.options.session=A,this};b.prototype.writeConcern=function F(A){if(A==null)return delete this.options.writeConcern,this;return this.options.writeConcern=A,this};b.prototype.w=function F(A){if(A==null)delete this.options.w;if(this.options.writeConcern!=null)this.options.writeConcern.w=A;else this.options.w=A;return this};b.prototype.j=function F(A){if(A==null)delete this.options.j;if(this.options.writeConcern!=null)this.options.writeConcern.j=A;else this.options.j=A;return this};b.prototype.wtimeout=function F(A){if(A==null)delete this.options.wtimeout;if(this.options.writeConcern!=null)this.options.writeConcern.wtimeout=A;else this.options.wtimeout=A;return this};b.prototype.getOptions=function(){return this.options};b.prototype.setOptions=function(F,A){if(A){if(this._mongooseOptions=F&&s2(F)||{},this.options=F||{},"populate"in F)this.populate(this._mongooseOptions);return this}if(F==null)return this;if(typeof F!=="object")throw new Error('Options must be an object, got "'+F+'"');if(F=Object.assign({},F),Array.isArray(F.populate)){let B=F.populate;delete F.populate;let D=B.length;for(let X=0;X<D;++X)this.populate(B[X])}if("setDefaultsOnInsert"in F)this._mongooseOptions.setDefaultsOnInsert=F.setDefaultsOnInsert,delete F.setDefaultsOnInsert;if("overwriteDiscriminatorKey"in F)this._mongooseOptions.overwriteDiscriminatorKey=F.overwriteDiscriminatorKey,delete F.overwriteDiscriminatorKey;if("overwriteImmutable"in F)this._mongooseOptions.overwriteImmutable=F.overwriteImmutable,delete F.overwriteImmutable;if("updatePipeline"in F)this._mongooseOptions.updatePipeline=F.updatePipeline,delete F.updatePipeline;if("sanitizeProjection"in F){if(F.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection)mQ1(this._fields);this._mongooseOptions.sanitizeProjection=F.sanitizeProjection,delete F.sanitizeProjection}if("sanitizeFilter"in F)this._mongooseOptions.sanitizeFilter=F.sanitizeFilter,delete F.sanitizeFilter;if("timestamps"in F)this._mongooseOptions.timestamps=F.timestamps,delete F.timestamps;if("defaults"in F)this._mongooseOptions.defaults=F.defaults;if("translateAliases"in F)this._mongooseOptions.translateAliases=F.translateAliases,delete F.translateAliases;if("schemaLevelProjections"in F)this._mongooseOptions.schemaLevelProjections=F.schemaLevelProjections,delete F.schemaLevelProjections;if(F.lean==null&&this.schema&&"lean"in this.schema.options)this._mongooseOptions.lean=this.schema.options.lean;if(typeof F.limit==="string")try{F.limit=oX(F.limit)}catch{throw new BA("Number",F.limit,"limit")}if(typeof F.skip==="string")try{F.skip=oX(F.skip)}catch{throw new BA("Number",F.skip,"skip")}for(let B of Object.keys(F))if(pQ1.has(B)){let D=Array.isArray(F[B])?F[B]:[F[B]];this[B].apply(this,D)}else this.options[B]=F[B];return this};b.prototype.explain=function F(A){if(arguments.length===0)this.options.explain=!0;else if(A===!1)delete this.options.explain;else this.options.explain=A;return this};b.prototype.allowDiskUse=function(F){if(arguments.length===0)this.options.allowDiskUse=!0;else if(F===!1)delete this.options.allowDiskUse;else this.options.allowDiskUse=F;return this};b.prototype.maxTimeMS=function(F){return this.options.maxTimeMS=F,this};b.prototype.getFilter=function(){return this._conditions};b.prototype.getQuery=function(){return this._conditions};b.prototype.setQuery=function(F){this._conditions=F};b.prototype.getUpdate=function(){return this._update};b.prototype.setUpdate=function(F){this._update=F};b.prototype._fieldsForExec=function(){if(this._fields==null)return null;if(k1.hasOwnKeys(this._fields)===!1)return null;return s2(this._fields)};b.prototype._updateForExec=function(){let F=s2(this._update,{transform:!1,depopulate:!0}),A=Object.keys(F),B=A.length,D={};while(B--){let X=A[B];if(X[0]!=="$"){if(!D.$set)if(F.$set)D.$set=F.$set;else D.$set={};if(D.$set[X]=F[X],A.splice(B,1),!~A.indexOf("$set"))A.push("$set")}else if(X==="$set"){if(!D.$set)D[X]=F[X]}else D[X]=F[X]}return D};b.prototype._optionsForExec=function(F){let A=s2(this.options);if(delete A.populate,F=F||this.model,!F)return A;TQ1(F.schema,A),kQ1(F.schema,A);let B=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();if(!Object.hasOwn(this.options,"session")&&B?.session!=null)A.session=B.session;let D=F?.schema?.options?.read;if(!("readPreference"in A)&&D)A.readPreference=D;if(A.upsert!==void 0)A.upsert=!!A.upsert;if(A.writeConcern){if(A.j)A.writeConcern.j=A.j,delete A.j;if(A.w)A.writeConcern.w=A.w,delete A.w;if(A.wtimeout)A.writeConcern.wtimeout=A.wtimeout,delete A.wtimeout}if(this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let X=this._fieldsForExec();if(X!=null)A.projection=X}if(this._mongooseOptions.populate){if(A.readPreference){for(let X of Object.values(this._mongooseOptions.populate))if(X.options?.readPreference===void 0){if(!X.options)X.options={};X.options.readPreference=A.readPreference}}if(A.readConcern){for(let X of Object.values(this._mongooseOptions.populate))if(X.options?.readConcern===void 0){if(!X.options)X.options={};X.options.readConcern=A.readConcern}}}return A};b.prototype.lean=function(F){return this._mongooseOptions.lean=arguments.length?F:!0,this};b.prototype.set=function(F,A){if(typeof F==="object"){let B=Object.keys(F);for(let D of B)this.set(D,F[D]);return this}if(this._update=this._update||{},F in this._update)delete this._update[F];return this._update.$set=this._update.$set||{},this._update.$set[F]=A,this};b.prototype.get=function F(A){let B=this._update;if(B==null)return;let D=B.$set;if(D==null)return B[A];if(k1.hasUserDefinedProperty(B,A))return B[A];if(k1.hasUserDefinedProperty(D,A))return D[A];return};b.prototype.error=function F(A){if(arguments.length===0)return this._error;return this._error=A,this};b.prototype._unsetCastError=function F(){if(this._error==null||!(this._error instanceof BA))return;return this.error(null)};b.prototype.mongooseOptions=function(F){if(arguments.length>0)this._mongooseOptions=F;return this._mongooseOptions};b.prototype._castConditions=function(){let F=void 0;if(this.model?.db.options?.sanitizeFilter!=null)F=this.model.db.options.sanitizeFilter;else if(this.model?.base.options?.sanitizeFilter!=null)F=this.model.base.options.sanitizeFilter;else F=this._mongooseOptions.sanitizeFilter;if(F)vQ1(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(A){this.error(A)}};/*!
 * ignore
 */function Vm(F){try{OQ1(F)}catch(A){F.error(A)}}b.prototype._find=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let A=this._mongooseOptions,B=this._userProvidedFields||{},D=this.model.db.options,X=this.model.base.options;DA(this.options,D,X),XA(this.options,D,X);let Z={session:this?.options?.session||null,lean:A.lean||null},J=this._optionsForExec(),Y=this._conditions,$=J.projection,G=await this.mongooseCollection.find(Y,J);if(J.explain)return G.explain();let E=await G.toArray();if(E.length===0)return E;if(!A.populate){let W=this.schema.options.versionKey;if(A.lean?.versionKey===!1&&W)E.forEach((H)=>{if(W in H)delete H[W]});return A.lean?wm(this.model.schema,E,null,Z):this._completeMany(E,$,B,Z)}let C=ZA.preparePopulationOptionsMQ(this,A);if(A.lean)return this.model.populate(E,C);return E=await this._completeMany(E,$,B,Z),await this.model.populate(E,C),E};b.prototype.find=function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new S0("Query.prototype.find() no longer accepts a callback");if(this.op="find",o3(F))this.merge(F),JA(this);else if(F!=null)this.error(new t3(F,"filter","find"));return this};b.prototype.merge=function(F){if(!F){if(F===null)this._conditions=null;return this}this._conditions=this._conditions??{};let A={overwrite:!0};if(F instanceof b){if(F._conditions){if(A.omit={},this._conditions&&this._conditions.$and&&F._conditions.$and)A.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(F._conditions.$and);if(this._conditions&&this._conditions.$or&&F._conditions.$or)A.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(F._conditions.$or);k1.merge(this._conditions,F._conditions,A)}if(F._fields)this._fields||(this._fields={}),k1.merge(this._fields,F._fields,A);if(F.options)this.options||(this.options={}),k1.merge(this.options,F.options,A);if(F._update)this._update||(this._update={}),k1.mergeClone(this._update,F._update);if(F._distinct)this._distinct=F._distinct;return k1.merge(this._mongooseOptions,F._mongooseOptions),this}else if(this.model!=null&&F instanceof this.model.base.Types.ObjectId)return k1.merge(this._conditions,{_id:F},A),this;else if(F?.$__)F=F.toObject(_Q1);if(A.omit={},Array.isArray(F.$and)){if(A.omit.$and=!0,!this._conditions)this._conditions={};this._conditions.$and=(this._conditions.$and||[]).concat(F.$and.map((B)=>k1.isPOJO(B)?k1.merge({},B):B))}if(Array.isArray(F.$or)){if(A.omit.$or=!0,!this._conditions)this._conditions={};this._conditions.$or=(this._conditions.$or||[]).concat(F.$or.map((B)=>k1.isPOJO(B)?k1.merge({},B):B))}return k1.merge(this._conditions,F,A),this};b.prototype.collation=function(F){if(this.options==null)this.options={};return this.options.collation=F,this};b.prototype._completeOne=function(F,A,B,D){if(!F&&!this.options.includeResultMetadata)return D(null,null);let X=this.model,Z=this._userProvidedFields||{},J=this._mongooseOptions,Y=this.options;if(!Y.lean&&J.lean)Y.lean=J.lean;if(Y.explain)return D(null,F);if(!J.populate){let G=this.schema.options.versionKey;if(J.lean?.versionKey===!1&&G){if(G in F)delete F[G]}return J.lean?Tq(X.schema,F,null,A,Y,D):zm(X,F,A,Y,B,Z,null,D)}let $=ZA.preparePopulationOptionsMQ(this,this._mongooseOptions);if(J.lean)return X.populate(F,$).then((G)=>{Tq(X.schema,G,null,A,Y,D)},(G)=>{D(G)});zm(X,F,A,Y,B,Z,[],(G,E)=>{if(G!=null)return D(G);X.populate(E,$).then((C)=>{D(null,C)},(C)=>{D(C)})})};b.prototype._completeMany=async function F(A,B,D,X){let Z=this.model;return Promise.all(A.map((J)=>new Promise((Y,$)=>{let G=J;if(J=ZA.createModel(Z,J,B,D),X.session!=null)J.$session(X.session);J.$init(G,X,(E)=>{if(E!=null)return $(E);Y(J)})})))};b.prototype._findOne=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();let A=this.model.db.options,B=this.model.base.options;DA(this.options,A,B),XA(this.options,A,B);let D=this._optionsForExec(),X=await this.mongooseCollection.findOne(this._conditions,D);return new Promise((Z,J)=>{this._completeOne(X,null,D.projection,(Y,$)=>{if(Y)return J(Y);Z($)})})};b.prototype.findOne=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new S0("Query.prototype.findOne() no longer accepts a callback");if(this.op="findOne",B)this.setOptions(B);if(A)this.select(A);if(o3(F))this.merge(F),JA(this);else if(F!=null)this.error(new t3(F,"filter","findOne"));return this};b.prototype._countDocuments=async function F(){this._applyTranslateAliases();try{this.cast(this.model)}catch(Z){this.error(Z)}if(this.error())throw this.error();let A=this.model.db.options,B=this.model.base.options;DA(this.options,A,B),XA(this.options,A,B);let D=this._optionsForExec(),X=this._conditions;return this.mongooseCollection.countDocuments(X,D)};/*!
 * If `translateAliases` option is set, call `Model.translateAliases()`
 * on the following query properties: filter, projection, update, distinct.
 */b.prototype._applyTranslateAliases=function F(){let A=!1;if("translateAliases"in this._mongooseOptions)A=this._mongooseOptions.translateAliases;else if(this.model?.schema?._userProvidedOptions?.translateAliases!=null)A=this.model.schema._userProvidedOptions.translateAliases;else if(this.model?.base?.options?.translateAliases!=null)A=this.model.base.options.translateAliases;if(!A)return;if(this.model?.schema?.aliases&&k1.hasOwnKeys(this.model.schema.aliases)){if(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null)this._distinct=this.model.schema.aliases[this._distinct]}};b.prototype._estimatedDocumentCount=async function F(){if(this.error())throw this.error();let A=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(A)};b.prototype.estimatedDocumentCount=function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new S0("Query.prototype.estimatedDocumentCount() no longer accepts a callback");if(this.op="estimatedDocumentCount",F!=null)this.setOptions(F);return this};b.prototype.countDocuments=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new S0("Query.prototype.countDocuments() no longer accepts a callback");if(this.op="countDocuments",o3(F))this.merge(F);if(A!=null)this.setOptions(A);return this};b.prototype.__distinct=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();let A=this.model.db.options,B=this.model.base.options;DA(this.options,A,B),XA(this.options,A,B);let D=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,D)};b.prototype.distinct=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new S0("Query.prototype.distinct() no longer accepts a callback");if(this.op="distinct",o3(A))this.merge(A),JA(this);else if(A!=null)this.error(new t3(A,"filter","distinct"));if(F!=null)this._distinct=F;if(B!=null)this.setOptions(B);return this};b.prototype.sort=function(F,A){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(A!=null&&typeof A!=="object")throw new Error("sort() options argument must be an object or nullish");if(this.options.sort==null)this.options.sort={};if(A?.override)this.options.sort={};let B=this.options.sort;if(typeof F==="string"){let D=F.indexOf(" ")===-1?[F]:F.split(" ");for(let X of D){let Z=X[0]=="-"?-1:1;if(Z===-1)X=X.slice(1);if(tX.has(X))continue;B[X]=Z}}else if(Array.isArray(F))for(let D of F){if(!Array.isArray(D))throw new TypeError("Invalid sort() argument, must be array of arrays");let X=""+D[0];if(tX.has(X))continue;B[X]=Mq(D[1],X)}else if(typeof F==="object"&&F!=null&&!(F instanceof Map))for(let D of Object.keys(F)){if(tX.has(D))continue;B[D]=Mq(F[D],D)}else if(F instanceof Map)for(let D of F.keys()){if(D=""+D,tX.has(D))continue;B[D]=Mq(F.get(D),D)}else if(F!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};/*!
 * Convert sort values
 */function Mq(F,A){if(F===1||F==="asc"||F==="ascending")return 1;if(F===-1||F==="desc"||F==="descending")return-1;if(F?.$meta!=null)return{$meta:F.$meta};throw new TypeError("Invalid sort value: { "+A+": "+F+" }")}b.prototype.deleteOne=function F(A,B){if(typeof A==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new S0("Query.prototype.deleteOne() no longer accepts a callback");if(this.op="deleteOne",this.setOptions(B),o3(A))this.merge(A),JA(this);else if(A!=null)this.error(new t3(A,"filter","deleteOne"));return this};b.prototype._deleteOne=async function F(){if(this._applyTranslateAliases(),this._castConditions(),_8(this._conditions,this.options),this.error()!=null)throw this.error();let A=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,A)};b.prototype.deleteMany=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new S0("Query.prototype.deleteMany() no longer accepts a callback");if(this.setOptions(A),this.op="deleteMany",o3(F))this.merge(F),JA(this);else if(F!=null)this.error(new t3(F,"filter","deleteMany"));return this};b.prototype._deleteMany=async function F(){if(this._applyTranslateAliases(),this._castConditions(),_8(this._conditions,this.options),this.error()!=null)throw this.error();let A=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,A)};function zm(F,A,B,D,X,Z,J,Y){if(D.includeResultMetadata&&A==null)return $(null),null;ZA.createModelAndInit(F,A,X,Z,D,J,$);function $(G,E){if(G)return Y(G);if(D.includeResultMetadata){if(A&&E){if(D.session!=null)E.$session(D.session);B.value=E}else B.value=null;return Y(null,B)}if(D.session!=null)E.$session(D.session);Y(null,E)}}function JA(F){if(!F?.model?.schema)return;let A=F.model.schema;if(A?.discriminatorMapping&&!A.discriminatorMapping.isRoot)F._conditions[A.discriminatorMapping.key]=A.discriminatorMapping.value}b.prototype.findOneAndUpdate=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new S0("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validate(),arguments.length){case 2:B=void 0;break;case 1:A=F,F=B=void 0;break}if(o3(F))this.merge(F);else if(F!=null)this.error(new t3(F,"filter","findOneAndUpdate"));if(B=B?s2(B):{},B.projection)this.select(B.projection),delete B.projection;if(B.fields)this.select(B.fields),delete B.fields;let D=this?.model?.base?.options?.returnOriginal;if(B.new==null&&B.returnDocument==null&&B.returnOriginal==null&&D!=null)B.returnOriginal=D;let X=this?.model?.base?.options?.updatePipeline;if(B.updatePipeline==null&&X!=null)B.updatePipeline=X;if(this.setOptions(B),A)this._mergeUpdate(A);return this};b.prototype._findOneAndUpdate=async function F(){if(this._applyTranslateAliases(),this._castConditions(),_8(this._conditions,this.options),Vm(this),this.error())throw this.error();let A=this.model.db.options,B=this.model.base.options;if(DA(this.options,A,B),XA(this.options,A,B),"strict"in this.options)this._mongooseOptions.strict=this.options.strict;let D=this._optionsForExec(this.model);Lm(D),this._update=this._castUpdate(this._update);let X=Object.assign({},D,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=Km(this._conditions,this.model.schema,this._update,X),!this._update||k1.hasOwnKeys(this._update)===!1)if(D.upsert){let $=s2(this._update);delete $._id,this._update={$set:$}}else return this._execCount=0,await this._findOne();else if(this._update instanceof Error)throw this._update;else if(this._update.$set&&k1.hasOwnKeys(this._update.$set)===!1)delete this._update.$set;if(kq(this,"runValidators",!1))await this.validate(this._update,D,!1);if(this._update.toBSON)this._update=this._update.toBSON();let J=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,D);for(let $ of this._transforms)J=$(J);let Y=!D.includeResultMetadata?J:J.value;return new Promise(($,G)=>{this._completeOne(Y,J,D.projection,(E,C)=>{if(E)return G(E);$(C)})})};b.prototype.findOneAndDelete=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new S0("Query.prototype.findOneAndDelete() no longer accepts a callback");if(this.op="findOneAndDelete",this._validate(),o3(F))this.merge(F);return A&&this.setOptions(A),this};b.prototype._findOneAndDelete=async function F(){if(this._applyTranslateAliases(),this._castConditions(),_8(this._conditions,this.options),this.error()!=null)throw this.error();let A=this.options.includeResultMetadata,B=this._conditions,D=this._optionsForExec(this.model),X=await this.mongooseCollection.findOneAndDelete(B,D);for(let J of this._transforms)X=J(X);let Z=!A?X:X.value;return new Promise((J,Y)=>{this._completeOne(Z,X,D.projection,($,G)=>{if($)return Y($);J(G)})})};b.prototype.findOneAndReplace=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[4]==="function")throw new S0("Query.prototype.findOneAndReplace() no longer accepts a callback");if(this.op="findOneAndReplace",this._validate(),o3(F))this.merge(F);else if(F!=null)this.error(new t3(F,"filter","findOneAndReplace"));if(A!=null)this._mergeUpdate(A);B=B||{};let D=this?.model?.base?.options?.returnOriginal;if(B.new==null&&B.returnDocument==null&&B.returnOriginal==null&&D!=null)B.returnOriginal=D;return this.setOptions(B),this};b.prototype._findOneAndReplace=async function F(){if(this._applyTranslateAliases(),this._castConditions(),_8(this._conditions,this.options),this.error()!=null)throw this.error();if("strict"in this.options)this._mongooseOptions.strict=this.options.strict,delete this.options.strict;let A=this._conditions,B=this._optionsForExec();Lm(B);let D=this.options.includeResultMetadata,X={skipId:!0};if("strict"in this._mongooseOptions)X.strict=this._mongooseOptions.strict;let Z=kq(this,"runValidators",!1);try{let $=new this.model(this._update,null,X);if(Z)await $.validate();else if($.$__.validationError)throw $.$__.validationError;this._update=$.toBSON()}catch($){if($ instanceof Hm)throw $;let G=new Hm;throw G.errors[$.path]=$,G}let J=await this.mongooseCollection.findOneAndReplace(A,this._update,B);for(let $ of this._transforms)J=$(J);let Y=!D?J:J.value;return new Promise(($,G)=>{this._completeOne(Y,J,B.projection,(E,C)=>{if(E)return G(E);$(C)})})};b.prototype.findById=function(F,A,B){return this.findOne({_id:F},A,B)};b.prototype.findByIdAndUpdate=function(F,A,B){return this.findOneAndUpdate({_id:F},A,B)};b.prototype.findByIdAndDelete=function(F,A){return this.findOneAndDelete({_id:F},A)};function Lm(F){if("new"in F)F.returnDocument=F.new?"after":"before",delete F.new;if("returnOriginal"in F)F.returnDocument=F.returnOriginal?"before":"after",delete F.returnOriginal;if(typeof F.returnDocument==="string")F.returnOriginal=F.returnDocument==="before"}function kq(F,A,B){let D=F._optionsForExec(F.model);if(A in D)return D[A];if(A in F.model.base.options)return F.model.base.options[A];return B}/*!
 * ignore
 */function Tq(F,A,B,D,X,Z){if(X.lean&&typeof X.lean.transform==="function"){X.lean.transform(A);for(let J=0;J<F.childSchemas.length;J++){let Y=B?B+"."+F.childSchemas[J].model.path:F.childSchemas[J].model.path,$=F.childSchemas[J].schema,G=Qm.get(Y,A);if(G==null)continue;if(Array.isArray(G))for(let E=0;E<G.length;E++)X.lean.transform(G[E]);else X.lean.transform(G);Tq($,G,Y,D,X)}if(Z)return Z(null,A);else return}if(X.includeResultMetadata)return Z(null,D);return Z(null,A)}/*!
 * ignore
 */function wm(F,A,B,D){if(D.lean&&typeof D.lean.transform==="function"){for(let X of A)D.lean.transform(X);for(let X=0;X<F.childSchemas.length;X++){let Z=B?B+"."+F.childSchemas[X].model.path:F.childSchemas[X].model.path,J=F.childSchemas[X].schema,Y=Qm.get(Z,A);if(Y==null)continue;Y=Y.flat();for(let $=0;$<Y.length;$++)D.lean.transform(Y[$]);wm(J,Y,Z,D)}}return A}b.prototype._mergeUpdate=function(F){if(!this._mongooseOptions.updatePipeline&&Array.isArray(F))throw new S0("Cannot pass an array to query updates unless the `updatePipeline` option is set.");if(!this._update)this._update=Array.isArray(F)?[]:{};if(F==null||typeof F==="object"&&k1.hasOwnKeys(F)===!1)return;if(F instanceof b){if(Array.isArray(this._update))throw new S0("Cannot mix array and object updates");if(F._update)k1.mergeClone(this._update,F._update)}else if(Array.isArray(F)){if(!Array.isArray(this._update))if(this._update==null||k1.isEmptyObject(this._update))this._update=[];else throw new S0("Cannot mix array and object updates");this._update=this._update.concat(F)}else{if(Array.isArray(this._update))throw new S0("Cannot mix array and object updates");k1.mergeClone(this._update,F)}};/*!
 * ignore
 */async function uq(F){if(this._applyTranslateAliases(),this._castConditions(),_8(this._conditions,this.options),Vm(this),this.error()!=null)throw this.error();let A=this._conditions,B=this._optionsForExec(this.model);this._update=s2(this._update,B);let D=F==="replaceOne";if(D)this._update=new this.model(this._update,null,{skipId:!0});else{if(this._update=this._castUpdate(this._update),this._update==null||k1.hasOwnKeys(this._update)===!1)return{acknowledged:!1};let Z=Object.assign({},B,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=Km(this._conditions,this.model.schema,this._update,Z)}if(Array.isArray(B.arrayFilters))B.arrayFilters=hQ1(this._update,B.arrayFilters);if(kq(this,"runValidators",!1))await this.validate(this._update,B,D);if(this._update.toBSON)this._update=this._update.toBSON();return this.mongooseCollection[F](A,this._update,B)}b.prototype.validate=async function F(A,B,D){if(typeof arguments[3]==="function")throw new S0("Query.prototype.validate() no longer accepts a callback");if(await Im(this,"validate"),D)await A.$validate();else await cQ1(this,this.model.schema,A,B);await Rm(this,null,null,"validate")};b.prototype._updateMany=async function F(){return uq.call(this,"updateMany")};b.prototype._updateOne=async function F(){return uq.call(this,"updateOne")};b.prototype._replaceOne=async function F(){return uq.call(this,"replaceOne")};b.prototype.updateMany=function(F,A,B,D){if(typeof B==="function")D=B,B=void 0;else if(typeof A==="function")D=A,A=F,F={},B=void 0;else if(typeof F==="function")D=F,F=void 0,A=void 0,B=void 0;else if(typeof F==="object"&&!A&&!B&&!D)A=F,F=void 0,B=void 0,D=void 0;return Oq(this,"updateMany",F,A,B,D)};b.prototype.updateOne=function(F,A,B,D){if(typeof B==="function")D=B,B=void 0;else if(typeof A==="function")D=A,A=F,F={},B=void 0;else if(typeof F==="function")D=F,F=void 0,A=void 0,B=void 0;else if(typeof F==="object"&&!A&&!B&&!D)A=F,F=void 0,B=void 0,D=void 0;return Oq(this,"updateOne",F,A,B,D)};b.prototype.replaceOne=function(F,A,B,D){if(typeof B==="function")D=B,B=void 0;else if(typeof A==="function")D=A,A=F,F={},B=void 0;else if(typeof F==="function")D=F,F=void 0,A=void 0,B=void 0;else if(typeof F==="object"&&!A&&!B&&!D)A=F,F=void 0,B=void 0,D=void 0;return Oq(this,"replaceOne",F,A,B,D)};function Oq(F,A,B,D,X,Z){if(F.op=A,D=D||{},X!=null){if("strict"in X)F._mongooseOptions.strict=X.strict}if(!(B instanceof b)&&B!=null&&B.toString()!=="[object Object]")F.error(new t3(B,"filter",A));else F.merge(B);let J=F?.model?.base?.options?.updatePipeline;if(J!=null&&X?.updatePipeline==null)X=X||{},X.updatePipeline=J;if(k1.isObject(X))F.setOptions(X);if(F._mergeUpdate(D),Z)return F.exec(Z),F;return F}b.prototype.transform=function(F){return this._transforms.push(F),this};b.prototype.orFail=function(F){return this.transform((A)=>{switch(this.op){case"find":if(A.length===0)throw x8(F,this);break;case"findOne":if(A==null)throw x8(F,this);break;case"replaceOne":case"updateMany":case"updateOne":if(A?.matchedCount===0)throw x8(F,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&A!=null&&A.value==null)throw x8(F,this);if(!this.options.includeResultMetadata&&A==null)throw x8(F,this);break;case"deleteMany":case"deleteOne":if(A.deletedCount===0)throw x8(F,this);break;default:break}return A}),this};function x8(F,A){if(typeof F==="function")F=F.call(A);if(F==null)F=new MQ1(A.getQuery(),A.model.modelName);return F}b.prototype.isPathSelectedInclusive=function(F){return bQ1(this._fields,F)};b.prototype.exec=async function F(A){if(typeof A==="function"||arguments.length>=2&&typeof arguments[1]==="function")throw new S0("Query.prototype.exec() no longer accepts a callback");if(this._validateOp(),typeof A==="string")this.op=A;if(this.op==null)throw new S0("Query must have `op` before executing");if(this.model==null)throw new S0("Query must have an associated model before executing");let B=iQ1.get(this.op);if(!B)throw new S0('Query has invalid `op`: "'+this.op+'"');if(this.options?.sort&&typeof this.options.sort==="object"&&Object.hasOwn(this.options.sort,""))throw new Error('Invalid field "" passed to sort()');if(this._execCount>0){let J=this.toString();if(J.length>60)J=J.slice(0,60)+"...";throw new S0("Query was already executed: "+J)}this._execCount++;let D=null;try{await this._hooks.execPre("exec",this,[])}catch(J){if(J instanceof jq.skipWrappedFunction)D=J;else throw J}let X,Z=null;try{await Im(this),X=D?D.args[0]:await this[B]();for(let J of this._transforms)X=J(X)}catch(J){if(J instanceof jq.skipWrappedFunction)X=J.args[0];else Z=J;Z=this.model.schema._transformDuplicateKeyError(Z)}return X=await Rm(this,X,Z),await this._hooks.execPost("exec",this,[]),X};/*!
 * ignore
 */function Rm(F,A,B,D){if(F._queryMiddleware==null){if(B!=null)throw B;return A}let X=B?{error:B}:{};return F._queryMiddleware.execPost(D||F.op,F,[A],X).then((Z)=>{return Z[0]})}/*!
 * ignore
 */function Im(F,A){if(F._queryMiddleware==null)return;return F._queryMiddleware.execPre(A||F.op,F,[])}b.prototype.then=function(F,A){return this.exec().then(F,A)};b.prototype.catch=function(F){return this.exec().then(null,F)};b.prototype.finally=function(F){return this.exec().finally(F)};b.prototype[Symbol.toStringTag]=function F(){return`Query { ${this.op} }`};b.prototype.pre=function(F){return this._hooks.pre("exec",F),this};b.prototype.post=function(F){return this._hooks.post("exec",F),this};b.prototype._castUpdate=function F(A){let B=this.schema,D=B.options.discriminatorKey,X=B._baseSchema||B;if(this._mongooseOptions.overwriteDiscriminatorKey&&A[D]!=null&&X.discriminators){let J=Object.values(X.discriminators).find((Y)=>Y.discriminatorMapping.value===A[D]);if(J!=null)B=J}let Z;if("upsert"in this.options)Z=this.options.upsert;return SQ1(B,A,{strict:this._mongooseOptions.strict,upsert:Z,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};b.prototype.populate=function(...F){if(!F.some(Boolean))return this;let A=k1.populate.apply(null,F),B=this._mongooseOptions;if(B.lean!=null){let X=B.lean;for(let Z of A)if(Z?.options?.lean==null)Z.options=Z.options||{},Z.options.lean=X}if(!k1.isObject(B.populate))B.populate={};let D=B.populate;for(let X of A){let Z=X.path;if(D[Z]?.populate&&X.populate)X.populate=D[Z].populate.concat(X.populate);D[X.path]=X}return this};b.prototype.getPopulatedPaths=function F(){let A=this._mongooseOptions.populate||{},B=Object.keys(A);for(let D of Object.keys(A)){let X=A[D];if(!Array.isArray(X.populate))continue;Pm(B,X.populate,D+".")}return B};/*!
 * ignore
 */function Pm(F,A,B){for(let D of A){if(F.push(B+D.path),!Array.isArray(D.populate))continue;Pm(F,D.populate,B+D.path+".")}}b.prototype.cast=function(F,A){A||(A=this._conditions),F=F||this.model;let B=F.schema.options.discriminatorKey;if(A!=null&&Object.hasOwn(A,B))F=xQ1(F.discriminators,A[B])||F;let D={upsert:this.options?.upsert};if(this.options){if("strict"in this.options)D.strict=this.options.strict;if("strictQuery"in this.options)D.strictQuery=this.options.strictQuery}if("sanitizeFilter"in this._mongooseOptions)D.sanitizeFilter=this._mongooseOptions.sanitizeFilter;try{return uQ1(F.schema,A,D,this)}catch(X){if(typeof X.setModel==="function")X.setModel(F);throw X}};b.prototype._castFields=function F(A){let B,D,X,Z,J;if(A){X=Object.keys(A),D=[];for(let Y=0;Y<X.length;++Y)if(Z=X[Y],A[Z].$elemMatch)B||(B={}),B[Z]=A[Z],D.push(Z)}if(B){try{J=this.cast(this.model,B)}catch(Y){return Y}for(let Y=0;Y<D.length;++Y)Z=D[Y],A[Z]=J[Z]}return A};b.prototype._applyPaths=function F(){if(!this.model)return;this._fields=this._fields||{};let A=void 0;if(this.model!=null&&k1.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))A=this.model.db.options.sanitizeProjection;else if(this.model!=null&&k1.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))A=this.model.base.options.sanitizeProjection;else A=this._mongooseOptions.sanitizeProjection;if(this._mongooseOptions.schemaLevelProjections??!0)ZA.applyPaths(this._fields,this.model.schema,A);let D=!0;if("selectPopulatedPaths"in this.model.base.options)D=this.model.base.options.selectPopulatedPaths;if("selectPopulatedPaths"in this.model.schema.options)D=this.model.schema.options.selectPopulatedPaths;if(D)dQ1(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};b.prototype.cursor=function F(A){if(A)this.setOptions(A);try{this.cast(this.model)}catch(B){return new Wm(this)._markError(B)}return new Wm(this)};b.prototype.tailable=function(F,A){if(typeof F?.constructor==="function"&&F.constructor.name==="Object")A=F,F=!0;if(F===void 0)F=!0;if(A&&typeof A==="object")for(let B of Object.keys(A))if(B==="awaitData"||B==="awaitdata")this.options.awaitData=!!A[B];else this.options[B]=A[B];return this.options.tailable=arguments.length?!!F:!0,this};b.prototype.near=function(){let F=[],A=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))F.push({center:arguments[0],spherical:A});else if(typeof arguments[0]==="string")F.push(arguments[0]);else if(k1.isObject(arguments[0])){if(typeof arguments[0].spherical!=="boolean")arguments[0].spherical=A;F.push(arguments[0])}else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]==="number"&&typeof arguments[1]==="number")F.push({center:[arguments[0],arguments[1]],spherical:A});else if(typeof arguments[0]==="string"&&Array.isArray(arguments[1]))F.push(arguments[0]),F.push({center:arguments[1],spherical:A});else if(typeof arguments[0]==="string"&&k1.isObject(arguments[1])){if(F.push(arguments[0]),typeof arguments[1].spherical!=="boolean")arguments[1].spherical=A;F.push(arguments[1])}else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]==="string"&&typeof arguments[1]==="number"&&typeof arguments[2]==="number")F.push(arguments[0]),F.push({center:[arguments[1],arguments[2]],spherical:A});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return b.base.near.apply(this,F)};b.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};b.prototype[Symbol.asyncIterator]=function F(){return this._mongooseOptions._asyncIterator=!0,this.cursor()};b.prototype.box=function(F,A){if(!Array.isArray(F)&&k1.isObject(F))A=F.ur,F=F.ll;return b.base.box.call(this,F,A)};b.prototype.center=b.base.circle;b.prototype.centerSphere=function(){if(typeof arguments[0]?.constructor==="function"&&arguments[0].constructor.name==="Object")arguments[0].spherical=!0;if(typeof arguments[1]?.constructor==="function"&&arguments[1].constructor.name==="Object")arguments[1].spherical=!0;b.base.circle.apply(this,arguments)};b.prototype.selectedInclusively=function F(){return gQ1(this._fields)};b.prototype.selectedExclusively=function F(){return fQ1(this._fields)};b.prototype.model;function o3(F){return F instanceof b||k1.isObject(F)||F===null}/*!
 * Export
 */Nm.exports=b});var um=z((pu1,km)=>{/*!
 * Module dependencies.
 */var YA=K1(),jm=m("stream").Readable,aQ1=$q(),sQ1=X4(),rQ1=P9(),Tm=m("util");function r2(F){jm.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=F,this._transforms=[];let{_connection:A,_model:B}=F;if(delete F.options.cursor.useMongooseAggCursor,this._mongooseOptions={},A)this.cursor=A.db.aggregate(F._pipeline,F.options||{}),setImmediate(()=>this.emit("cursor",this.cursor));else tQ1(B,this,F)}Tm.inherits(r2,jm);/*!
 * ignore
 */function tQ1(F,A,B){if(!F.collection.buffer)F.hooks.execPre("aggregate",B).then(()=>D(null),(X)=>D(X));else F.collection.emitter.once("queue",function(){F.hooks.execPre("aggregate",B).then(()=>D(null),(X)=>D(X))});function D(X){if(X!=null){oQ1(A,X);return}if(typeof B.options?.cursor?.transform==="function")A._transforms.push(B.options.cursor.transform);A.cursor=F.collection.aggregate(B._pipeline,B.options||{}),A.emit("cursor",A.cursor)}}function oQ1(F,A){if(A instanceof rQ1.skipWrappedFunction){let B=A.args[0];if(B!=null&&(!Array.isArray(B)||B.length)){let D=new YA('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+Tm.inspect(B)+'".');F._markError(D),F.listeners("error").length>0&&F.emit("error",D);return}F.emit("cursor",null);return}F._markError(A),F.listeners("error").length>0&&F.emit("error",A)}r2.prototype._read=function(){let F=this;AZ(this,function(A,B){if(A)return F.emit("error",A);if(!B){F.push(null),F.cursor.close(function(D){if(D)return F.emit("error",D)});return}F.push(B)})};if(Symbol.asyncIterator!=null){let F="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";r2.prototype[Symbol.asyncIterator]=function(){throw new YA(F)}}Object.defineProperty(r2.prototype,"map",{value:function(F){return this._transforms.push(F),this},enumerable:!0,configurable:!0,writable:!0});r2.prototype._markError=function(F){return this._error=F,this};r2.prototype.close=async function F(){if(typeof arguments[0]==="function")throw new YA("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(A){throw this.listeners("error").length>0&&this.emit("error",A),A}this.emit("close")};r2.prototype._destroy=function F(A,B){let D=null;if(!this.cursor)D=new Promise((X)=>{this.once("cursor",X)});else D=Promise.resolve();return D.then(()=>this.cursor.close()).then(()=>{this._closed=!0,B()}).catch((X)=>{B(X)}),this};r2.prototype.next=async function F(){if(typeof arguments[0]==="function")throw new YA("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((A,B)=>{AZ(this,(D,X)=>{if(D!=null)return B(D);A(X)})})};r2.prototype.eachAsync=function(F,A){if(typeof arguments[2]==="function")throw new YA("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let B=this;if(typeof A==="function")A={};return A=A||{},aQ1(function(D){return AZ(B,D)},F,A)};if(Symbol.asyncIterator!=null)r2.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()};/*!
 * ignore
 */r2.prototype._transformForAsyncIterator=function(){if(this._transforms.indexOf(Mm)===-1)this.map(Mm);return this};/*!
 * ignore
 */r2.prototype.transformNull=function(F){if(arguments.length===0)F=!0;return this._mongooseOptions.transformNull=F,this};/*!
 * ignore
 */function Mm(F){return F==null?{done:!0}:{value:F,done:!1}}r2.prototype.addCursorFlag=function(F,A){let B=this;return eQ1(this,function(){B.cursor.addCursorFlag(F,A)}),this};/*!
 * ignore
 */function eQ1(F,A){if(F.cursor)return A();F.once("cursor",function(){A()})}function AZ(F,A){let B=A;if(F._transforms.length)B=function(D,X){if(D||X===null&&!F._mongooseOptions.transformNull)return A(D,X);A(D,F._transforms.reduce(function(Z,J){return J(Z)},X))};if(F._error)return sQ1(function(){B(F._error)});if(F.cursor)return F.cursor.next().then((D)=>{if(!D)return B(null,null);B(null,D)},(D)=>B(D));else F.once("error",A),F.once("cursor",function(){AZ(F,A)})}km.exports=r2});var Sq=z((iu1,Om)=>{Om.exports=function F(A,B,D){let X=B?.discriminatorMapping;if(D=D||"",X&&!X.isRoot){let Z=A,J=(D.length>0?D+".":D)+X.key,Y=X.value;if(Z[0]!=null&&Z[0].$match&&(Z[0].$match[J]===void 0||Z[0].$match[J]===Y))Z[0].$match[J]=Y;else if(Z[0]?.$geoNear)Z[0].$geoNear.query=Z[0].$geoNear.query||{},Z[0].$geoNear.query[J]=Y;else if(Z[0]?.$search)if(Z[1]?.$match!=null)Z[1].$match[J]=Z[1].$match[J]||Y;else{let $={};$[J]=Y,Z.splice(1,0,{$match:$})}else{let $={};$[J]=Y,Z.unshift({$match:$})}}}});var xm=z((nu1,Sm)=>{Sm.exports=function F(A){if(!Array.isArray(A))return;for(let B of A){if(B==null)continue;let D=B.$group||B.$bucket||B.$bucketAuto;if(D!=null)for(let Z of Object.keys(D))FK1(D[Z]);let X=Object.keys(B)[0];if(X&&typeof B[X]==="object"){let Z=B[X];for(let J of Object.keys(Z))if(Z[J]!=null&&Z[J].$function!=null&&typeof Z[J].$function.body==="function")Z[J].$function.body=Z[J].$function.body.toString()}if(B.$facet!=null)for(let Z of Object.keys(B.$facet))F(B.$facet[Z])}};function FK1(F){if(F==null||F.$accumulator==null)return;for(let A of["init","accumulate","merge","finalize"])if(typeof F.$accumulator[A]==="function")F.$accumulator[A]=String(F.$accumulator[A])}});var _q=z((au1,ym)=>{/*!
 * Module dependencies
 */var gm=um(),m9=K1(),bm=FZ(),{applyGlobalMaxTimeMS:AK1,applyGlobalDiskUse:BK1}=Cq(),DK1=C0(),XK1=x2(),xq=Sq(),ZK1=xm(),_m=B1(),{modelSymbol:JK1}=t(),YK1=bm.prototype.read,$K1=bm.prototype.readConcern,fm=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function R1(F,A){if(this._pipeline=[],A==null||A[JK1])this._model=A;else this._connection=A;if(this.options={},arguments.length===1&&Array.isArray(F))this.append.apply(this,F)}R1.prototype.options;R1.prototype._optionsForExec=function(){let F=this.options||{},A=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();if(!Object.hasOwn(F,"session")&&A?.session!=null)F.session=A.session;return F};R1.prototype.model=function(F){if(arguments.length===0)return this._model;if(this._model=F,F.schema!=null){if(this.options.readPreference==null&&F.schema.options.read!=null)this.options.readPreference=F.schema.options.read;if(this.options.collation==null&&F.schema.options.collation!=null)this.options.collation=F.schema.options.collation}return F};R1.prototype.append=function(){let F=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!F.every(GK1))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(F),this};R1.prototype.addFields=function(F){if(typeof F!=="object"||F===null||Array.isArray(F))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},F)})};R1.prototype.project=function(F){let A={};if(typeof F==="object"&&!Array.isArray(F))Object.keys(F).forEach(function(B){A[B]=F[B]});else if(arguments.length===1&&typeof F==="string")F.split(/\s+/).forEach(function(B){if(!B)return;let D=B[0]==="-"?0:1;if(D===0)B=B.substring(1);A[B]=D});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:A})};R1.prototype.near=function(F){if(F==null)throw new m9("Aggregate `near()` must be called with non-nullish argument");if(F.near==null)throw new m9("Aggregate `near()` argument must have a `near` property");let A=Array.isArray(F.near)?F.near:F.near.coordinates;if(typeof F.near==="object"&&(!Array.isArray(A)||A.length<2||A.find((D)=>typeof D!=="number")))throw new m9(`Aggregate \`near()\` argument has invalid coordinates, got "${A}"`);let B={};return B.$geoNear=F,this.append(B)};/*!
 * define methods
 */"group match skip limit out densify fill".split(" ").forEach(function(F){R1.prototype[F]=function(A){let B={};return B["$"+F]=A,this.append(B)}});R1.prototype.unwind=function(){let F=[...arguments],A=[];for(let B of F)if(B&&typeof B==="object")A.push({$unwind:B});else if(typeof B==="string")A.push({$unwind:B[0]==="$"?B:"$"+B});else throw new Error('Invalid arg "'+B+'" to unwind(), must be string or object');return this.append.apply(this,A)};R1.prototype.replaceRoot=function(F){let A;if(typeof F==="string")A=F.startsWith("$")?F:"$"+F;else A=F;return this.append({$replaceRoot:{newRoot:A}})};R1.prototype.count=function(F){return this.append({$count:F})};R1.prototype.sortByCount=function(F){if(F&&typeof F==="object")return this.append({$sortByCount:F});else if(typeof F==="string")return this.append({$sortByCount:F[0]==="$"?F:"$"+F});else throw new TypeError('Invalid arg "'+F+'" to sortByCount(), must be string or object')};R1.prototype.lookup=function(F){return this.append({$lookup:F})};R1.prototype.graphLookup=function(F){let A={};if(F){if(!_m.isObject(F))throw new TypeError("Invalid graphLookup() argument. Must be an object.");_m.mergeClone(A,F);let B=A.startWith;if(B&&typeof B==="string")A.startWith=A.startWith.startsWith("$")?A.startWith:"$"+A.startWith}return this.append({$graphLookup:A})};R1.prototype.sample=function(F){return this.append({$sample:{size:F}})};R1.prototype.sort=function(F){let A={};if(XK1(F)==="Object"){let B=["desc","descending",-1];Object.keys(F).forEach(function(D){if(F[D]instanceof Object&&F[D].$meta){A[D]=F[D];return}A[D]=B.indexOf(F[D])===-1?1:-1})}else if(arguments.length===1&&typeof F==="string")F.split(/\s+/).forEach(function(B){if(!B)return;let D=B[0]==="-"?-1:1;if(D===-1)B=B.substring(1);A[B]=D});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:A})};R1.prototype.unionWith=function(F){return this.append({$unionWith:F})};R1.prototype.read=function(F,A){return YK1.call(this,F,A),this};R1.prototype.readConcern=function(F){return $K1.call(this,F),this};R1.prototype.redact=function(F,A,B){if(arguments.length===3){if(typeof A==="string"&&!fm.has(A)||typeof B==="string"&&!fm.has(B))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");F={$cond:{if:F,then:A,else:B}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:F})};R1.prototype.explain=async function F(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new m9("Aggregate.prototype.explain() no longer accepts a callback");let B=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");xq(this._pipeline,this._model.schema);try{await B.hooks.execPre("aggregate",this)}catch(Z){return await B.hooks.execPost("aggregate",this,[null],{error:Z})}let D=B.collection.aggregate(this._pipeline,this.options);if(A==null)A=!0;let X=null;try{X=await D.explain(A)}catch(Z){return await B.hooks.execPost("aggregate",this,[null],{error:Z})}return await B.hooks.execPost("aggregate",this,[X],{error:null}),X};R1.prototype.allowDiskUse=function(F){return this.options.allowDiskUse=F,this};R1.prototype.hint=function(F){return this.options.hint=F,this};R1.prototype.session=function(F){if(F==null)delete this.options.session;else this.options.session=F;return this};R1.prototype.option=function(F){for(let A in F)this.options[A]=F[A];return this};R1.prototype.cursor=function(F){return this._optionsForExec(),this.options.cursor=F||{},new gm(this)};R1.prototype.collation=function(F){return this.options.collation=F,this};R1.prototype.facet=function(F){return this.append({$facet:F})};R1.prototype.search=function(F){return this.append({$search:F})};R1.prototype.pipeline=function(){return this._pipeline};R1.prototype.exec=async function F(){if(!this._model&&!this._connection)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]==="function")throw new m9("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new m9("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let A=this._model,B=this._model.collection;if(AK1(this.options,A.db.options,A.base.options),BK1(this.options,A.db.options,A.base.options),this._optionsForExec(),this.options?.cursor)return new gm(this);xq(this._pipeline,this._model.schema),ZK1(this._pipeline);try{await A.hooks.execPre("aggregate",this)}catch(Z){return await A.hooks.execPost("aggregate",this,[null],{error:Z})}if(!this._pipeline.length)throw new m9("Aggregate has empty pipeline");let D=DK1(this.options||{}),X;try{X=await(await B.aggregate(this._pipeline,D)).toArray()}catch(Z){return await A.hooks.execPost("aggregate",this,[null],{error:Z})}return await A.hooks.execPost("aggregate",this,[X],{error:null}),X};R1.prototype.then=function(F,A){return this.exec().then(F,A)};R1.prototype.catch=function(F){return this.exec().then(null,F)};R1.prototype.finally=function(F){return this.exec().finally(F)};R1.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()};/*!
 * Helpers
 */function GK1(F){if(typeof F!=="object"||F===null)return!1;let A=Object.keys(F);return A.length===1&&A[0][0]==="$"}R1._prepareDiscriminatorPipeline=xq;/*!
 * Exports
 */ym.exports=R1});var vm=z((su1,hm)=>{var EK1=C0();class fq{constructor(F){if(F==null)return;Object.assign(this,EK1(F))}}fq.prototype.__subdocs=null;hm.exports=fq});var dm=z((ru1,mm)=>{mm.exports=function F(A,B){let D=Object.keys(B.paths),X=D.length;for(let Z=0;Z<X;++Z){let J="",Y=D[Z],$=B.paths[Y],G=$.splitPath(),E=G.length,C=A;for(let W=0;W<E;++W){if(C==null)break;let H=G[W];if(J+=(!J.length?"":".")+H,W===E-1){if(typeof C[H]!=="undefined"){if($.$isSingleNested)F(C[H],$.schema);else if($.$isMongooseDocumentArray&&Array.isArray(C[H]))C[H].forEach((Q)=>F(Q,$.schema));break}let q=$.getDefault(A,!1,{skipCast:!0});if(typeof q!=="undefined"){if(C[H]=q,$.$isSingleNested)F(q,$.schema);else if($.$isMongooseDocumentArray&&Array.isArray(q))q.forEach((Q)=>F(Q,$.schema))}}else{if(C[H]==null)C[H]={};C=C[H]}}}}});var bq=z((tu1,cm)=>{cm.exports=gq;function gq(F,A=new WeakSet,B=!1){if(A.has(F))return;A.add(F);for(let D of Object.keys(F.paths)){let X=F.paths[D];if(!X.schema)continue;if(gq(X.schema,A),!X.schema._applyDiscriminators)continue;if(X._appliedDiscriminators&&!B)continue;for(let Z of X.schema._applyDiscriminators.keys()){let{schema:J,options:Y}=X.schema._applyDiscriminators.get(Z);gq(J,A),X.discriminator(Z,J,B?{...Y,overwriteExisting:!0}:Y)}X._appliedDiscriminators=!0}}});var pm=z((ou1,lm)=>{/*!
 * ignore
 */lm.exports=$A;/*!
 * ignore
 */$A.middlewareFunctions=["deleteOne","remove","save","updateOne","validate","init"];/*!
 * ignore
 */var CK1=new Set($A.middlewareFunctions.flatMap((F)=>[F,`$__${F}`]));function $A(F,A,B){B=B||{};let D={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},X=B.decorateDoc?F:F.prototype;F.$appliedHooks=!0;for(let $ of Object.keys(A.paths)){let G=A.paths[$],E=null,C=yq(G);if(C)E=C.childModel,G=C.type;else continue;if(E.$appliedHooks)continue;if($A(E,G.schema,{...B,decorateDoc:!1,isChildSchema:!0}),E.discriminators!=null){let W=Object.keys(E.discriminators);for(let H of W)$A(E.discriminators[H],E.discriminators[H].schema,B)}}let Z=A._getDocumentMiddleware();F._middleware=Z,X.$__init=Z.createWrapperSync("init",X.$__init,null,D);let J=Object.keys(A.methods),Y=Object.assign({},D,{checkForPromise:!0});for(let $ of J){if(CK1.has($))continue;if(!Z.hasHooks($))continue;let G=X[$];X[`$__${$}`]=X[$],X[$]=Z.createWrapper($,G,null,Y)}}function yq(F){if(F.$isSingleNested||F.$isMongooseDocumentArray)return{childModel:F.Constructor,type:F};if(F.instance==="Array"){let A=F.getEmbeddedSchemaType();if(A)return yq(A)}if(F.instance==="Map"){let A=F.getEmbeddedSchemaType();if(A)return yq(A)}return null}});var nm=z((eu1,im)=>{var WK1=K0(),HK1=B1();im.exports=function F(A,B){let D=hq();function X(Z,J){Object.defineProperty(A.prototype,Z,{get:function(){let Y={};for(let $ in J.methods[Z])Y[$]=J.methods[Z][$].bind(this);return Y},configurable:!0})}for(let Z of Object.keys(B.methods)){let J=B.methods[Z];if(Object.hasOwn(B.tree,Z))throw new Error('You have a method and a property in your schema both named "'+Z+'"');if(typeof J==="function"&&D.prototype[Z]===J){delete B.methods[Z];continue}if(B.reserved[Z]&&!WK1(B,`methodOptions.${Z}.suppressWarning`,!1))HK1.warn(`mongoose: the method name "${Z}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${Z}', fn, { suppressWarning: true })\`.`);if(typeof J==="function")A.prototype[Z]=J;else X(Z,B)}A.$appliedMethods=!0;for(let Z of Object.keys(B.paths)){let J=B.paths[Z];if(J.$isSingleNested&&!J.Constructor.$appliedMethods)F(J.Constructor,J.schema);if(J.$isMongooseDocumentArray&&!J.Constructor.$appliedMethods)F(J.Constructor,J.schema)}}});var rm=z((FO1,sm)=>{var am=_C(),qK1=C8(),zK1=nX(),XZ=B1().isPOJO;sm.exports=function F(A,B,D){if(B==null)return A;if(A==null)return A;let X=null;if(zK1(B))X=!1;else if(qK1(B))X=!0;if(X==null)return A;else if(X)return D=D||am(B),BZ(A,B,D);else return D=D||am(B),DZ(A,B,D)};function BZ(F,A,B,D,X){if(F==null||typeof F!=="object")return F;if(Array.isArray(F))return F.map((J)=>BZ(J,A,B,D,X));let Z={...F};D=X?D||{}:A;for(let J of Object.keys(Z)){let Y=X?X+"."+J:J;if(Object.hasOwn(A,Y)||Object.hasOwn(D,J))if(XZ(A[Y])||XZ(D[J]))Z[J]=BZ(Z[J],A,B,D[J],Y);else delete Z[J];else if(B[Y])Z[J]=BZ(Z[J],A,B,D[J],Y)}return Z}function DZ(F,A,B,D,X){if(F==null||typeof F!=="object")return F;if(Array.isArray(F))return F.map((J)=>DZ(J,A,B,D,X));let Z={...F};D=X?D||{}:A;for(let J of Object.keys(Z)){let Y=X?X+"."+J:J;if(Object.hasOwn(A,Y)||Object.hasOwn(D,J)){if(XZ(A[Y])||XZ(D[J]))Z[J]=DZ(Z[J],A,B,D[J],Y);continue}else if(B[Y])Z[J]=DZ(Z[J],A,B,D[J],Y);else delete Z[J]}return Z}});var om=z((AO1,tm)=>{tm.exports=function F(A){let B=!1;for(let D of Object.keys(A))if(A[D]==="text")B=!0;return B}});var Fd=z((BO1,em)=>{var QK1=om();em.exports=function F(A,B,D){if(QK1(A))return;if(Object.hasOwn(D,"collation")&&!Object.hasOwn(B,"collation"))B.collation=D.collation}});var Bd=z((DO1,Ad)=>{var{queryMiddlewareFunctions:KK1,aggregateMiddlewareFunctions:UK1,modelMiddlewareFunctions:VK1,documentMiddlewareFunctions:LK1}=OF(),wK1=Array.from(new Set([...KK1,...UK1,...VK1,...LK1]));Ad.exports=function F(A,B,D){B=B.filter((X)=>{if(wK1.indexOf(X.name)!==-1)return!!X.model;return X.model!==!1});for(let X of Object.keys(D))if(B.hasHooks(X)){let Z=A[X];A[X]=B.createWrapper(X,Z)}}});var Xd=z((XO1,Dd)=>{Dd.exports=function F(A,B){for(let D in B.statics)A[D]=B.statics[D]}});var Gd=z((ZO1,$d)=>{var Zd=ZX(),RK1=W6(),IK1=B1();$d.exports=Jd;function Jd(F,A,B){if(A==null)return A;return PK1(F,A,B),Yd(F,A,B)}function PK1(F,A,B){for(let D of F.childSchemas){let X=D.model.path,Z=D.schema;if(!X)continue;let J=RK1.get(X,A);if(J==null||Array.isArray(J)&&J.flat(1/0).length===0)continue;Jd(Z,J,B)}}function Yd(F,A,B){if(A==null||typeof A!=="object")return;if(Array.isArray(A)){for(let Y of A)Yd(F,Y,B);return}if(F.discriminators&&IK1.hasOwnKeys(F.discriminators))for(let Y of Object.keys(F.discriminators)){let $=F.discriminators[Y],G=$.discriminatorMapping.key,E=$.discriminatorMapping.value;if(A[G]==E){F=$;break}}let D=Zd(F.options.timestamps,"createdAt"),X=Zd(F.options.timestamps,"updatedAt"),Z=B?.currentTime,J=null;if(Z!=null)J=Z();else if(F.base?.now)J=F.base.now();else J=new Date;if(D&&A[D]==null&&!B?.isUpdate)A[D]=J;if(X)A[X]=J}});var Wd=z((JO1,Cd)=>{var NK1=W6(),MK1=B1();Cd.exports=Ed;function Ed(F,A,B){if(A==null)return A;let D=B,X=null;if(Array.isArray(B)){D=[],X=[];for(let Z of B)if(Z.length===1)X.push(Z[0]);else D.push(Z)}return jK1(F,A,D),vq(F,A,X)}function jK1(F,A,B){let D=!1;for(let X of F.childSchemas){let Z=X.model.path,J=X.schema;if(!Z)continue;let Y=NK1.get(Z,A);if(Y==null||Array.isArray(Y)&&Y.flat(1/0).length===0)continue;let $=null;if(Array.isArray(B)){$=[];for(let G of B)if(G[0]==Z)$.push(G.slice(1));if($.length===0)continue}Ed(J,Y,$),D=!0}if(B?.length&&!D)vq(F,A,B)}function vq(F,A,B){if(A==null||typeof A!=="object")return;if(Array.isArray(A)){for(let D of A)vq(F,D,B);return}if(F.discriminators&&MK1.hasOwnKeys(F.discriminators))for(let D of Object.keys(F.discriminators)){let X=F.discriminators[D],Z=X.discriminatorMapping.key,J=X.discriminatorMapping.value;if(A[Z]==J){F=X;break}}if(B==null)B=Object.keys(F.virtuals);for(let D of B){if(F.virtuals[D]==null)continue;let X=F.virtuals[D],Z=Array.isArray(D)?D:D.indexOf(".")===-1?[D]:D.split("."),J=A;for(let G=0;G<Z.length-1;++G)J[Z[G]]=Z[G]in J?J[Z[G]]:{},J=J[Z[G]];let Y=X.applyGetters(J[Z[Z.length-1]],A);if((X.options?.ref||X.options?.refPath)&&Y===void 0)if(X.options.justOne)Y=null;else Y=[];J[Z[Z.length-1]]=Y}}});var ZZ=z((YO1,Hd)=>{Hd.exports=function F(A){if(!(this instanceof F))return new F(A);return this.val=A,this}});var GA=z(($O1,qd)=>{/*!
 * ignore
 */qd.exports=new WeakMap});var Ud=z((GO1,Kd)=>{var TK1=C0(),zd=GA(),kK1=t().modelSymbol,uK1=B1();Kd.exports=Qd;var JZ=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function Qd(F,A,B,D,X){let Z=[],J=D.isVirtual&&D.justOne&&F.length>1?!1:D.sort&&F.length>1,Y=D.$nullIfNotFound,$,G,E;if(uK1.isMongooseArray(F))F=F.__array;let C=0,W=F.length;if(J&&X&&D[JZ]===void 0){D[JZ]=!1;for(let H in B)if(Array.isArray(B[H])){D[JZ]=!0;break}}for(C=0;C<W;++C){if(E=F[C],Array.isArray(E)){Qd(E,A,B,D,!0),Z.push(E);continue}if(E===null&&J===!1){Z.push(E);continue}if(G=String(E),$=A[G],D.clone&&$!=null)if(D.lean){let H=zd.get($);$=TK1($),zd.set($,H)}else $=$.constructor.hydrate($._doc);if(X)if($)if(J){let H=B[G];if(D[JZ])Z.push($);else Z[H]=$}else Z.push($);else if(E?.[kK1]!=null)Z.push(E);else Z.push(D.retainNullValues||Y?null:E);else Z[C]=$||null}if(F.length=0,Z.length)Z.forEach(function(H,q){F[q]=H})}});var mq=z((EO1,Vd)=>{Vd.exports=YZ;/*!
 * ignore
 */function YZ(F,A){if(F.virtuals[A])return{virtual:F.virtuals[A],path:void 0};let B=A.split("."),D="",X="";for(let Z=0;Z<B.length;++Z){if(D+=(D.length>0?".":"")+B[Z],F.virtuals[D]){if(Z===B.length-1)return{virtual:F.virtuals[D],path:X};continue}if(F.nested[D])continue;if(F.paths[D]&&F.paths[D].schema){F=F.paths[D].schema;let J=B.slice(Z+1).join(".");if(F.virtuals[J]){if(Z===B.length-2)return{virtual:F.virtuals[J],nestedSchemaPath:[X,D].filter((Y)=>!!Y).join(".")};continue}if(Z+1<B.length&&F.discriminators)for(let Y of Object.keys(F.discriminators)){let $=YZ(F.discriminators[Y],J);if($!=null){let G=[X,D,$.nestedSchemaPath].filter((E)=>!!E).join(".");return{virtual:$.virtual,nestedSchemaPath:G}}}X+=(X.length>0?".":"")+D,D="";continue}else if(F.paths[D]?.$isSchemaMap&&F.paths[D].$__schemaType?.schema){F=F.paths[D].$__schemaType.schema,++Z;let J=B.slice(Z+1).join(".");if(F.virtuals[J]){if(Z===B.length-2)return{virtual:F.virtuals[J],nestedSchemaPath:[X,D,"$*"].filter((Y)=>!!Y).join(".")};continue}if(Z+1<B.length&&F.discriminators)for(let Y of Object.keys(F.discriminators)){let $=YZ(F.discriminators[Y],J);if($!=null){let G=[X,D,$.nestedSchemaPath,"$*"].filter((E)=>!!E).join(".");return{virtual:$.virtual,nestedSchemaPath:G}}}X+=(X.length>0?".":"")+"$*"+D,D=""}if(F.discriminators)for(let J of Object.keys(F.discriminators)){let Y=YZ(F.discriminators[J],A);if(Y)return Y}return null}}});var wd=z(($Z,Ld)=>{(function(F,A){typeof $Z==="object"&&typeof Ld!=="undefined"?A($Z):typeof define==="function"&&define.amd?define(["exports"],A):(F=typeof globalThis!=="undefined"?globalThis:F||self,A(F.sift={}))})($Z,function(F){var A=function(L,I){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,_){j.__proto__=_}||function(j,_){for(var i in _)if(Object.prototype.hasOwnProperty.call(_,i))j[i]=_[i]},A(L,I)};function B(L,I){if(typeof I!=="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");A(L,I);function j(){this.constructor=L}L.prototype=I===null?Object.create(I):(j.prototype=I.prototype,new j)}typeof SuppressedError==="function"&&SuppressedError;var D=function(L){var I="[object "+L+"]";return function(j){return X(j)===I}},X=function(L){return Object.prototype.toString.call(L)},Z=function(L){if(L instanceof Date)return L.getTime();else if(Y(L))return L.map(Z);else if(L&&typeof L.toJSON==="function")return L.toJSON();return L},J=function(L){return L==null?null:L},Y=D("Array"),$=D("Object"),G=D("Function"),E=function(L,I){return L.hasOwnProperty(I)&&!G(L[I])},C=function(L){return L&&(L.constructor===Object||L.constructor===Array||L.constructor.toString()==="function Object() { [native code] }"||L.constructor.toString()==="function Array() { [native code] }")&&!L.toJSON},W=function(L,I){if(L==null&&L==I)return!0;if(L===I)return!0;if(Object.prototype.toString.call(L)!==Object.prototype.toString.call(I))return!1;if(Y(L)){if(L.length!==I.length)return!1;for(var j=0,_=L.length;j<_;j++)if(!W(L[j],I[j]))return!1;return!0}else if($(L)){if(Object.keys(L).length!==Object.keys(I).length)return!1;for(var i in L)if(!W(L[i],I[i]))return!1;return!0}return!1},H=function(L,I,j,_,i,e){var E1=I[_];if(Y(L)&&isNaN(Number(E1))&&!E(L,E1)){for(var I1=0,G2=L.length;I1<G2;I1++)if(!H(L[I1],I,j,_,I1,L))return!1}if(_===I.length||L==null)return j(L,i,e,_===0,_===I.length);return H(L[E1],I,j,_+1,E1,L)},q=function(){function L(I,j,_,i){this.params=I,this.owneryQuery=j,this.options=_,this.name=i,this.init()}return L.prototype.init=function(){},L.prototype.reset=function(){this.done=!1,this.keep=!1},L}(),Q=function(L){B(I,L);function I(j,_,i,e){var E1=L.call(this,j,_,i)||this;return E1.children=e,E1}return I.prototype.reset=function(){this.keep=!1,this.done=!1;for(var j=0,_=this.children.length;j<_;j++)this.children[j].reset()},I.prototype.childrenNext=function(j,_,i,e,E1){var I1=!0,G2=!0;for(var t2=0,e6=this.children.length;t2<e6;t2++){var m4=this.children[t2];if(!m4.done)m4.next(j,_,i,e,E1);if(!m4.keep)G2=!1;if(m4.done){if(!m4.keep)break}else I1=!1}this.done=I1,this.keep=G2},I}(q),K=function(L){B(I,L);function I(j,_,i,e,E1){var I1=L.call(this,j,_,i,e)||this;return I1.name=E1,I1}return I}(Q),U=function(L){B(I,L);function I(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return I.prototype.next=function(j,_,i,e){this.childrenNext(j,_,i,e)},I}(Q),R=function(L){B(I,L);function I(j,_,i,e,E1){var I1=L.call(this,_,i,e,E1)||this;return I1.keyPath=j,I1.propop=!0,I1._nextNestedValue=function(G2,t2,e6,m4,El){return I1.childrenNext(G2,t2,e6,m4,El),!I1.done},I1}return I.prototype.next=function(j,_,i){H(j,this.keyPath,this._nextNestedValue,0,_,i)},I}(Q),w=function(L,I){if(L instanceof Function)return L;if(L instanceof RegExp)return function(_){var i=typeof _==="string"&&L.test(_);return L.lastIndex=0,i};var j=Z(L);return function(_){return I(j,Z(_))}},V=function(L){B(I,L);function I(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return I.prototype.init=function(){this._test=w(this.params,this.options.compare)},I.prototype.next=function(j,_,i){if(!Array.isArray(i)||i.hasOwnProperty(_)){if(this._test(j,_,i))this.done=!0,this.keep=!0}},I}(q),N=function(L,I,j){return new V(L,I,j)},T=function(L){return function(I,j,_,i){return L(I,j,_,i)}},P=function(L){return T(function(I,j,_,i){var e=typeof Z(I),E1=L(I);return new V(function(I1){var G2=J(I1);return typeof Z(G2)===e&&E1(G2)},j,_,i)})},u=function(L,I,j,_){var i=_.operations[L];if(!i)O(L);return i(I,j,_,L)},O=function(L){throw new Error("Unsupported operation: ".concat(L))},k=function(L,I){for(var j in L)if(I.operations.hasOwnProperty(j)||j.charAt(0)==="$")return!0;return!1},d=function(L,I,j,_,i){if(k(I,i)){var e=o(I,j,i),E1=e[0],I1=e[1];if(I1.length)throw new Error("Property queries must contain only operations, or exact objects.");return new R(L,I,_,i,E1)}return new R(L,I,_,i,[new V(I,_,i)])},h=function(L,I,j){if(I===void 0)I=null;var _=j===void 0?{}:j,i=_.compare,e=_.operations,E1={compare:i||W,operations:Object.assign({},e||{})},I1=o(L,null,E1),G2=I1[0],t2=I1[1],e6=[];if(G2.length)e6.push(new R([],L,I,E1,G2));if(e6.push.apply(e6,t2),e6.length===1)return e6[0];return new U(L,I,E1,e6)},o=function(L,I,j){var _=[],i=[];if(!C(L))return _.push(new V(L,L,j)),[_,i];for(var e in L)if(j.operations.hasOwnProperty(e)){var E1=u(e,L[e],L,j);if(E1){if(!E1.propop&&I&&!j.operations[I])throw new Error("Malformed query. ".concat(e," cannot be matched against property."))}if(E1!=null)_.push(E1)}else if(e.charAt(0)==="$")O(e);else i.push(d(e.split("."),L[e],e,L,j));return[_,i]},A1=function(L){return function(I,j,_){return L.reset(),L.next(I,j,_),L.keep}},R2=function(L,I){if(I===void 0)I={};return A1(h(L,null,I))},Y2=function(L){B(I,L);function I(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return I.prototype.init=function(){this._test=w(this.params,this.options.compare)},I.prototype.reset=function(){L.prototype.reset.call(this),this.keep=!0},I.prototype.next=function(j){if(this._test(j))this.done=!0,this.keep=!1},I}(q),v4=function(L){B(I,L);function I(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return I.prototype.init=function(){if(!this.params||typeof this.params!=="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=h(this.params,this.owneryQuery,this.options)},I.prototype.reset=function(){L.prototype.reset.call(this),this._queryOperation.reset()},I.prototype.next=function(j){if(Y(j)){for(var _=0,i=j.length;_<i;_++){this._queryOperation.reset();var e=j[_];this._queryOperation.next(e,_,j,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},I}(q),e1=function(L){B(I,L);function I(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return I.prototype.init=function(){this._queryOperation=h(this.params,this.owneryQuery,this.options)},I.prototype.reset=function(){L.prototype.reset.call(this),this._queryOperation.reset()},I.prototype.next=function(j,_,i,e){this._queryOperation.next(j,_,i,e),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},I}(q),x0=function(L){B(I,L);function I(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return I.prototype.init=function(){},I.prototype.next=function(j){if(Y(j)&&j.length===this.params)this.done=!0,this.keep=!0},I}(q),g2=function(L){if(L.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},$2=function(L){B(I,L);function I(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!1,j}return I.prototype.init=function(){var j=this;g2(this.params),this._ops=this.params.map(function(_){return h(_,null,j.options)})},I.prototype.reset=function(){this.done=!1,this.keep=!1;for(var j=0,_=this._ops.length;j<_;j++)this._ops[j].reset()},I.prototype.next=function(j,_,i){var e=!1,E1=!1;for(var I1=0,G2=this._ops.length;I1<G2;I1++){var t2=this._ops[I1];if(t2.next(j,_,i),t2.keep){e=!0,E1=t2.keep;break}}this.keep=E1,this.done=e},I}(q),U3=function(L){B(I,L);function I(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!1,j}return I.prototype.next=function(j,_,i){L.prototype.next.call(this,j,_,i),this.keep=!this.keep},I}($2),Cz=function(L){B(I,L);function I(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return I.prototype.init=function(){var j=this,_=Array.isArray(this.params)?this.params:[this.params];this._testers=_.map(function(i){if(k(i,j.options))throw new Error("cannot nest $ under ".concat(j.name.toLowerCase()));return w(i,j.options.compare)})},I.prototype.next=function(j,_,i){var e=!1,E1=!1;for(var I1=0,G2=this._testers.length;I1<G2;I1++){var t2=this._testers[I1];if(t2(j)){e=!0,E1=!0;break}}this.keep=E1,this.done=e},I}(q),Xl=function(L){B(I,L);function I(j,_,i,e){var E1=L.call(this,j,_,i,e)||this;return E1.propop=!0,E1._in=new Cz(j,_,i,e),E1}return I.prototype.next=function(j,_,i,e){if(this._in.next(j,_,i),Y(i)&&!e){if(this._in.keep)this.keep=!1,this.done=!0;else if(_==i.length-1)this.keep=!0,this.done=!0}else this.keep=!this._in.keep,this.done=!0},I.prototype.reset=function(){L.prototype.reset.call(this),this._in.reset()},I}(q),Zl=function(L){B(I,L);function I(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return I.prototype.next=function(j,_,i,e,E1){if(!E1)this.done=!0,this.keep=!this.params;else if(i.hasOwnProperty(_)===this.params)this.done=!0,this.keep=!0},I}(q),Jl=function(L){B(I,L);function I(j,_,i,e){var E1=L.call(this,j,_,i,j.map(function(I1){return h(I1,_,i)}),e)||this;return E1.propop=!1,g2(j),E1}return I.prototype.next=function(j,_,i,e){this.childrenNext(j,_,i,e)},I}(K),Yl=function(L){B(I,L);function I(j,_,i,e){var E1=L.call(this,j,_,i,j.map(function(I1){return h(I1,_,i)}),e)||this;return E1.propop=!0,E1}return I.prototype.next=function(j,_,i,e){this.childrenNext(j,_,i,e)},I}(K),Wz=function(L,I,j){return new V(L,I,j)},Hz=function(L,I,j,_){return new Y2(L,I,j,_)},qz=function(L,I,j,_){return new $2(L,I,j,_)},zz=function(L,I,j,_){return new U3(L,I,j,_)},Qz=function(L,I,j,_){return new v4(L,I,j,_)},Kz=function(L,I,j,_){return new Xl(L,I,j,_)},Uz=function(L,I,j,_){return new Cz(L,I,j,_)},Vz=P(function(L){return function(I){return I!=null&&I<L}}),Lz=P(function(L){return function(I){return I===L||I<=L}}),wz=P(function(L){return function(I){return I!=null&&I>L}}),Rz=P(function(L){return function(I){return I===L||I>=L}}),Iz=function(L,I,j){var _=L[0],i=L[1];return new V(function(e){return Z(e)%_===i},I,j)},Pz=function(L,I,j,_){return new Zl(L,I,j,_)},Nz=function(L,I,j){return new V(new RegExp(L,I.$options),I,j)},Mz=function(L,I,j,_){return new e1(L,I,j,_)},jz={number:function(L){return typeof L==="number"},string:function(L){return typeof L==="string"},bool:function(L){return typeof L==="boolean"},array:function(L){return Array.isArray(L)},null:function(L){return L===null},timestamp:function(L){return L instanceof Date}},Tz=function(L,I,j){return new V(function(_){if(typeof L==="string"){if(!jz[L])throw new Error("Type alias does not exist");return jz[L](_)}return _!=null?_ instanceof L||_.constructor===L:!1},I,j)},kz=function(L,I,j,_){return new Jl(L,I,j,_)},uz=function(L,I,j,_){return new Yl(L,I,j,_)},Oz=function(L,I,j){return new x0(L,I,j,"$size")},Sz=function(){return null},xz=function(L,I,j){var _;if(G(L))_=L;else if(!process.env.CSP_ENABLED)_=new Function("obj","return "+L);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new V(function(i){return _.bind(i)(i)},I,j)},$l=Object.freeze({__proto__:null,$Size:x0,$all:uz,$and:kz,$elemMatch:Qz,$eq:Wz,$exists:Pz,$gt:wz,$gte:Rz,$in:Uz,$lt:Vz,$lte:Lz,$mod:Iz,$ne:Hz,$nin:Kz,$nor:zz,$not:Mz,$options:Sz,$or:qz,$regex:Nz,$size:Oz,$type:Tz,$where:xz}),_z=function(L,I,j){var _=j===void 0?{}:j,i=_.compare,e=_.operations;return h(L,I,{compare:i,operations:Object.assign({},$l,e||{})})},Gl=function(L,I){if(I===void 0)I={};var j=_z(L,null,I);return A1(j)};F.$Size=x0,F.$all=uz,F.$and=kz,F.$elemMatch=Qz,F.$eq=Wz,F.$exists=Pz,F.$gt=wz,F.$gte=Rz,F.$in=Uz,F.$lt=Vz,F.$lte=Lz,F.$mod=Iz,F.$ne=Hz,F.$nin=Kz,F.$nor=zz,F.$not=Mz,F.$options=Sz,F.$or=qz,F.$regex=Nz,F.$size=Oz,F.$type=Tz,F.$where=xz,F.EqualsOperation=V,F.createDefaultQueryOperation=_z,F.createEqualsOperation=N,F.createOperationTester=A1,F.createQueryOperation=h,F.createQueryTester=R2,F.default=Gl,Object.defineProperty(F,"__esModule",{value:!0})})});var Id=z((CO1,dq)=>{var Rd=wd();dq.exports=Rd.default;Object.assign(dq.exports,Rd)});var kd=z((WO1,Td)=>{var OK1=JX(),SK1=ZZ(),xK1=Ud(),GZ=K0(),_K1=mq(),jd=GA(),Pd=DX(),fK1=hC(),cq=W6(),Nd=Id().default,EZ=B1(),{populateModelSymbol:gK1}=t();Td.exports=function F(A){let B=Object.assign({},GZ(A,"allOptions.options.options"),GZ(A,"allOptions.options")),D=Object.assign({},A.options,B,{justOne:A.justOne,isVirtual:A.isVirtual});D.$nullIfNotFound=A.isVirtual;let X=A.populatedModel,Z=[].concat(A.rawIds);A.allIds=[].concat(A.allIds),xK1(A.rawIds,A.rawDocs,A.rawOrder,D);let{docs:J,rawIds:Y,options:$}=A,G=A.count&&A.isVirtual,E,C=0;function W(H){if(++C,G)return H;if(H instanceof SK1)return H.val;if(H===void 0)return H;let q=A.allIds[E];if(A.path.endsWith(".$*"))return EA(H,$,D,q);if(A.justOne===!0&&Array.isArray(H)){let Q=[];for(let K of H){let U=jd.get(K);if(U==null||U===X)Q.push(K)}while(H.length>Q.length)Array.prototype.pop.apply(H,[]);for(let K=0;K<Q.length;++K)H[K]=Q[K];return EA(H[0],$,D,q)}else if(A.justOne===!1&&!Array.isArray(H))return EA([H],$,D,q);else if(A.justOne===!0&&!Array.isArray(H)&&Array.isArray(q))return EA(H,$,D,H==null?H:q[C-1]);return EA(H,$,D,q)}for(E=0;E<J.length;++E){C=0;let H=A.path.endsWith(".$*")?A.path.slice(0,-3):A.path,q=cq.get(H,J[E],Pd);if(q==null&&!_K1(A.originalModel.schema,H))continue;let Q;if(G)Q=bK1(Y[E]);else if(Array.isArray(A.match))Q=Array.isArray(Y[E])?Y[E].filter((N)=>N==null||Nd(A.match[E])(N)):[Y[E]].filter((N)=>N==null||Nd(A.match[E])(N))[0];else Q=Y[E];let K=A.originalModel.schema,U=GZ(J[E],"$__",null)!=null,R=U?q instanceof Map:EZ.isPOJO(q);if(R=R&&GZ(K._getSchema(H),"$isSchemaMap"),!A.isVirtual&&R){let N=q instanceof Map?Array.from(q.keys()):Object.keys(q);Q=Q.reduce((T,P,u)=>{return T.set(N[u],P),T},new Map)}if(U&&Array.isArray(Q)){for(let N of Q)if(N?.$__!=null)N.$__.parent=J[E]}else if(U&&Q?.$__!=null)Q.$__.parent=J[E];if(A.isVirtual&&U){if(J[E].$populated(H,A.justOne?Z[0]:Z,A.allOptions),Array.isArray(Q))Q=Q.map((N)=>N==null?void 0:N);cq.set(H,Q,J[E],function N(T,P,u){if(arguments.length>=3)return T[P]=u,T[P];if(T instanceof Map&&P==="$*")return[...T.values()];return T[P]},W,!1);continue}let w=H.split("."),V=J[E];for(let N=0;N<w.length-1;++N){if(Array.isArray(V)&&!EZ.isArrayIndex(w[N]))break;if(w[N]==="$*")break;if(V[w[N]]==null){let T=w.slice(0,N+1).join("."),P=K._getSchema(T);if(Q==null&&P?.$isMongooseArray)break;V[w[N]]={}}if(V=V[w[N]],typeof V!=="object")break}if(J[E].$__){if(A.allOptions.options[gK1]=A.allOptions.model,J[E].$populated(H,A.unpopulatedValues[E],A.allOptions.options),Q?.$__!=null)Q.$__.wasPopulated={value:A.unpopulatedValues[E]};if(Q instanceof Map&&!Q.$isMongooseMap)Q=new OK1(Q,H,J[E],J[E].schema.path(H).$__schemaType)}if(cq.set(H,Q,J[E],Pd,W,!1),J[E].$__)fK1(J[E],[A.allOptions.options])}};function bK1(F){if(Array.isArray(F)){if(F.some((A)=>Array.isArray(A)||A===null))return F.map((A)=>{if(A==null)return 0;if(Array.isArray(A))return A.filter((B)=>B!=null).length;return 1});return F.filter((A)=>A!=null).length}return F==null?0:1}function EA(F,A,B,D){let X=typeof B.transform==="function",Z=X?B.transform:(J)=>J;if(Array.isArray(F)){let J=[],Y=F.length;for(let E=0;E<Y;++E){let C=F[E],W=Array.isArray(D)?D[E]:D;if(!lq(C)&&(!B.retainNullValues||C!=null)&&!X)continue;else if(!B.retainNullValues&&C==null)continue;else if(X)C=Z(lq(C)?C:null,W);if(Md(C,A),J.push(C),A.originalLimit&&J.length>=A.originalLimit)break}let $=J.length;while(F.length>$)Array.prototype.pop.apply(F,[]);let G=0;if(EZ.isMongooseArray(F))for(G=0;G<$;++G)F.set(G,J[G],!0);else for(G=0;G<$;++G)F[G]=J[G];return F}if(lq(F)||EZ.isPOJO(F))return Md(F,A),Z(F,D);if(F instanceof Map)return F;if(B.justOne===!1)return[];return F==null?Z(F,D):Z(null,D)}function Md(F,A){if(F!=null&&A.excludeId)if(typeof F.$__setValue==="function")delete F._doc._id;else delete F._id}function lq(F){if(F==null)return!1;return Array.isArray(F)||F.$isMongooseMap||F.$__!=null||jd.has(F)}});var xd=z((HO1,Sd)=>{var yK1=ZZ(),hK1=mC(),{trusted:CZ}=B8(),ud=rX();Sd.exports=function F(A,B,D,X,Z){let J=vK1(B);if(D.size===1){let Y=Array.from(D)[0],$=X.schema.path(Y);if(Y!=="_id"||!J._id)A=Od(A,$,Z),J[Y]=CZ({$in:A});else if(Y==="_id"&&J._id){let E=ud(J[Y])?J[Y]:{$eq:J[Y]};J[Y]={...CZ({$in:A}),...E}}let G=hK1(Y);for(let E=0;E<G.length-1;++E){let C=G[E];if(J[C]!=null&&J[C].$elemMatch!=null){J[C].$elemMatch[Y.slice(C.length+1)]=CZ({$in:A}),delete J[Y];break}}}else{let Y=[];if(Array.isArray(J.$or))J.$and=[{$or:J.$or},{$or:Y}],delete J.$or;else J.$or=Y;for(let $ of D)if($!=="_id"||!J._id){let G=X.schema.path($);A=Od(A,G,Z),Y.push({[$]:{$in:A}})}else if($==="_id"&&J._id){let G=ud(J[$])?J[$]:{$eq:J[$]};J[$]={...CZ({$in:A}),...G}}}return J};function Od(F,A,B){if(F=F.filter((D)=>!(D instanceof yK1)),!B)return F;return F.filter((D)=>{try{return A.cast(D),!0}catch{return!1}})}function vK1(F){if(Array.isArray(F)){if(F.length>1)return{$or:[].concat(F.map((A)=>Object.assign({},A)))};return Object.assign({},F[0])}return Object.assign({},F)}});var fd=z((qO1,_d)=>{_d.exports=function F(A,B,D){if(A.length===0)return D();let X=A.length,Z=null;for(let J of A)B(J,function(Y){if(Z!=null)return;if(Y!=null)return Z=Y,D(Z);if(--X<=0)return D()})}});var hd=z((zO1,yd)=>{/*!
 * ignore
 */var gd=$8(),mK1=K0(),dK1=j6(),bd=GA(),f8=W6(),cK1=t().populateModelSymbol;yd.exports=function F(A,B,D,X){let Z=B.path(X),J=D;if(Z)return Z;let Y=B.discriminatorMapping?.key;if(Y&&A!=null){if(D?.[Y]!=null)B=dK1(A.discriminators,D[Y])?.schema||B;else if(A.discriminators!=null)return Object.keys(A.discriminators).reduce((E,C)=>{let W=A.discriminators[C];return E.concat(F(W,W.schema,null,X))},[])}function $(E,C,W,H){let q=E.length+1,Q,K;while(q--){if(K=E.slice(0,q).join("."),Q=C.path(K),Q==null)continue;if(Q.embeddedSchemaType||Q.schema){if(Q.embeddedSchemaType instanceof gd)return Q.embeddedSchemaType;let w=null;if(Q.schema?.discriminators!=null){let V=Q.schema.discriminators,N=K+"."+Q.schema.options.discriminatorKey,T=W?f8.get(N,W)||[]:[];w=Object.keys(V).reduce(function(P,u){let O=V[u].discriminatorMapping.value;if(D==null||T.indexOf(u)!==-1||T.indexOf(O)!==-1)P.push(V[u]);return P},[])}if(q!==E.length&&Q.schema){let V;if(E[q]==="$"){if(q+1===E.length)return Q;if(V=$(E.slice(q+1),C,W?f8.get(K,W):null,H.concat(E.slice(0,q))),V)V.$parentSchemaDocArray=V.$parentSchemaDocArray||(Q.schema.$isSingleNested?null:Q);return V}if(w!=null&&w.length>0){V=[];for(let N of w){let T=$(E.slice(q),N,W?f8.get(K,W):null,H.concat(E.slice(0,q)));if(T!=null){if(T.$parentSchemaDocArray=T.$parentSchemaDocArray||(Q.schema.$isSingleNested?null:Q),T.$parentSchemaDocArray)V.$parentSchemaDocArray=T.$parentSchemaDocArray;V.push(T)}}return V}else{if(V=$(E.slice(q),Q.schema,W?f8.get(K,W):null,H.concat(E.slice(0,q))),V)V.$parentSchemaDocArray=V.$parentSchemaDocArray||(Q.schema.$isSingleNested?null:Q);return V}}else if(q!==E.length&&Q.$isMongooseArray&&Q.embeddedSchemaType.$isMongooseArray){let V=Q;while(V.$isMongooseArray&&!V.$isMongooseDocumentArray)V=V.embeddedSchemaType;let N=$(E.slice(q),V.schema,null,H.concat(E.slice(0,q)));if(N!=null)return N;if(V.schema.discriminators){let T=[];for(let P of Object.keys(V.schema.discriminators)){let u=V.schema.discriminators[P]||V.schema,O=$(E.slice(q),u,null,H.concat(E.slice(0,q)));if(O!=null)T.push(O)}if(T.length>0)return T}}}else if(Q.$isSchemaMap&&Q.$__schemaType instanceof gd)return Q.$__schemaType;let U=H.concat([K]).join(".");if(J?.$__&&J.$populated(U,!0)&&q<E.length){let w=J.$populated(U,!0).options[cK1];if(w!=null)return $(E.slice(q),w.schema,W?f8.get(K,W):null,H.concat(E.slice(0,q)))}let R=mK1(J,K);if(R!=null){let V=(Array.isArray(R)&&R.length>0?bd.get(R[0]):bd.get(R))?.schema??null;if(V!=null){let N=$(E.slice(q),V,W?f8.get(K,W):null,H.concat(E.slice(0,q)));if(N!=null)return N.$parentSchemaDocArray=N.$parentSchemaDocArray||(V.$isSingleNested?null:V),N}}return Q}}let G=X.split(".");for(let E=0;E<G.length;++E)if(G[E]==="$")G[E]="0";return $(G,B,D,[])}});var pd=z((QO1,ld)=>{var rq=E6(),lK1=ZZ(),pK1=C0(),u6=K0(),iK1=j6(),nK1=x2(),vd=hd(),aK1=mq(),CA=DX(),d9=W6(),WZ=KW(),n0=B1(),nq=t().modelSymbol,pq=t().populateModelSymbol,aq=T9().schemaMixedSymbol,sK1=MC();ld.exports=function F(A,B,D){let X,Z=B.length,J=[],Y=D.model?.modelName||D.model,$,G,E,C,W={},H=A.schema;if(D._localModel!=null&&D._localModel.schema.nested[D.path])return[];let q=aK1(A.schema,D.path);if((q==null?null:q.virtual)!=null)return rK1(A,B,D,q);let K=vd(A,H,null,D.path);if(K=Array.isArray(K)?K:[K].filter((w)=>w!=null),!(D.strictPopulate===!1||D.options?.strictPopulate===!1)&&K.length===0&&D._localModel!=null)return new sK1(D._fullPath||D.path);for(let w=0;w<Z;w++){X=B[w];let V=null;if(X.$__!=null&&X.populated(D.path)){if((D.forceRepopulate??X.constructor.base.options.forceRepopulate)===!1)continue}let N=X?.$__!=null?X.$__schema:H;if($=vd(A,N,X,D.path),$!=null&&$.$isMongooseDocumentArray&&$.options.ref==null&&$.options.refPath==null)continue;if($?.$parentSchemaDocArray&&u6(D,"options.sort")!=null)return new rq("Cannot populate with `sort` on path "+D.path+" because it is a subproperty of a document array");E=null;let P=!1,u=null,O=null,k=null;if($?.instance==="Embedded"){if($.options.ref){let e1={localField:D.path+"._id",foreignField:"_id",justOne:!0},x0=R(X,$,Y,A),g2=d9.get(D.path,X),$2=d9.get("_id",g2);sq(A,J,W,x0.modelNames,D,e1,$2,X,O,g2)}continue}if(Array.isArray($)){let e1=$;for(let x0 of e1){let g2,$2;try{$2=R(X,x0,Y,A),g2=$2.modelNames,P=P||$2.isRefPath,u=u||$2.refPath,V=$2.justOne}catch(U3){return U3}if(P&&!$2.isRefPath)continue;if(!g2)continue;E=E||[],C=C||new Set;for(let U3 of g2)if(C.has(U3)===!1)C.add(U3),E.push(U3)}}else{try{let e1=R(X,$,Y,A);if(E=e1.modelNames,P=e1.isRefPath,u=u||e1.refPath,V=e1.justOne,O=u6($,"options.populate",null),P)k=E,E=Array.from(new Set(E))}catch(e1){return e1}if(!E)continue}let d={},h=D.path,o="_id";if("justOne"in D&&D.justOne!==void 0)V=D.justOne;else if($&&!$[aq]){if(D.path.endsWith("."+$.path)||D.path===$.path)V=Array.isArray($)?$.every((e1)=>!e1.$isMongooseArray):!$.$isMongooseArray}if(!E)continue;d.isVirtual=!1,d.justOne=V,d.localField=h,d.foreignField=o;let A1=dd(X,h,A,D,null,$),R2=String(n0.getValue(o,X));D._docs[R2]=Array.isArray(A1)?A1.slice():A1;let Y2=u6(D,"match",null),v4=typeof Y2==="function";if(v4)Y2=Y2.call(X,X);if(oq(Y2),d.match=Y2,d.hasMatchFunction=v4,d.isRefPath=P,d.modelNamesInOrder=k,P)E=tK1(X,H,d,D,u,A1)||E;try{sq(A,J,W,E,D,d,A1,X,O)}catch(e1){return e1}}return J;function R(w,V,N,T){let P,u=!1,O=null,k=V;if(V?.instance==="Array")V=V.embeddedSchemaType;if(V?.$isSchemaMap)V=V.$__schemaType;let d=V?.options?.ref;if(G=V?.options?.refPath,V!=null&&V[aq]&&!d&&!G&&!N)return{modelNames:null};if(N)P=[N];else if(G!=null){if(typeof G==="function"){let h=D.path.slice(0,D.path.length-V.path.length-1),o=d9.get(h,w,CA),A1=Array.isArray(o)?n0.array.flatten(o):o?[o]:[];P=new Set;for(let R2 of A1)G=G.call(R2,R2,D.path),WZ(G,w,D.path,H,D._queryProjection).forEach((Y2)=>P.add(Y2));P=Array.from(P)}else P=WZ(G,w,D.path,H,D._queryProjection);u=!0}else{let h,o,A1,R2,Y2=T,v4=T.schema.options.discriminatorKey;if(!V&&v4&&(R2=n0.getValue(v4,w))){let e1=iK1(T.discriminators,R2)||T;if(e1!=null)Y2=e1;else try{Y2=tq(T.db,R2)}catch(x0){return x0}if(A1=Y2.schema._getSchema(D.path),A1?.embeddedSchemaType)A1=A1.embeddedSchemaType}else A1=V;if(k&&k.path.endsWith(".$*"))O=!k.$isMongooseArray&&!k._arrayPath;else if(A1!=null)O=!A1.$isMongooseArray&&!A1._arrayPath;if((h=u6(A1,"options.ref"))!=null)if(A1!=null&&typeof h==="function"&&D.path.endsWith("."+A1.path)){P=new Set;let e1=D.path.slice(0,D.path.length-A1.path.length-1),x0=d9.get(e1,w,CA),g2=Array.isArray(x0)?n0.array.flatten(x0):x0?[x0]:[];for(let $2 of g2)P.add(iq(h,$2));if(g2.length===0)P=[iq(h,w)];else P=Array.from(P)}else h=iq(h,w),P=[h];else if((A1=u6(V,"options.refPath"))!=null)if(u=!0,typeof o==="function"){let e1=D.path.slice(0,D.path.length-A1.path.length-1),x0=d9.get(e1,w,CA),g2=Array.isArray(x0)?n0.array.flatten(x0):x0?[x0]:[];P=new Set;for(let $2 of g2)o=o.call($2,$2,D.path),WZ(o,w,D.path,H,D._queryProjection).forEach((U3)=>P.add(U3));P=Array.from(P)}else P=WZ(o,w,D.path,H,D._queryProjection)}if(!P)if(D._localModel==null)P=[T.modelName];else return{modelNames:P,justOne:O,isRefPath:u,refPath:G};if(!Array.isArray(P))P=[P];return{modelNames:P,justOne:O,isRefPath:u,refPath:G}}};/*!
 * ignore
 */function rK1(F,A,B,D){let X=[],Z={},J=D.virtual;for(let Y of A){let $=null,G={},E,C=D.nestedSchemaPath?D.nestedSchemaPath+".":"";if(typeof B.localField==="string")E=B.localField;else if(typeof J.options.localField==="function")E=C+J.options.localField.call(Y,Y);else if(Array.isArray(J.options.localField))E=J.options.localField.map((R)=>C+R);else E=C+J.options.localField;if(G.count=J.options.count,J.options.skip!=null&&!Object.hasOwn(B,"skip"))B.skip=J.options.skip;if(J.options.limit!=null&&!Object.hasOwn(B,"limit"))B.limit=J.options.limit;if(J.options.perDocumentLimit!=null&&!Object.hasOwn(B,"perDocumentLimit"))B.perDocumentLimit=J.options.perDocumentLimit;let W=J.options.foreignField;if(!E||!W)return new rq(`Cannot populate virtual \`${B.path}\` on model \`${F.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);if(typeof E==="function")E=E.call(Y,Y);if(typeof W==="function")W=W.call(Y,Y);G.isRefPath=!1;let H=null;if("justOne"in B&&B.justOne!==void 0)H=B.justOne;if(D.nestedSchemaPath&&typeof J.options.ref==="function"){let R=n0.getValue(D.nestedSchemaPath,Y);$=Array.isArray(R)?R.flatMap((w)=>J._getModelNamesForPopulate(w)):J._getModelNamesForPopulate(R)}else $=J._getModelNamesForPopulate(Y);if(J.options.refPath)H=!!J.options.justOne,G.isRefPath=!0;else if(J.options.ref)H=!!J.options.justOne;G.isVirtual=!0,G.virtual=J,G.justOne=H;let q=u6(G,"virtual.options.match",null)||u6(G,"virtual.options.options.match",null),Q=u6(B,"match",null)||q,K=typeof Q==="function";if(K)Q=Q.call(Y,Y,G.virtual);if(Array.isArray(E)&&Array.isArray(W)&&E.length===W.length){Q=Object.assign({},Q);for(let R=1;R<E.length;++R)Q[W[R]]=cd(d9.get(E[R],Y,CA),F.schema),K=!0;E=E[0],W=W[0]}G.localField=E,G.foreignField=W,G.match=Q,G.hasMatchFunction=K,oq(Q);let U=dd(Y,E,F,B,J);try{sq(F,X,Z,$,B,G,U,Y)}catch(R){return R}}return X}/*!
 * ignore
 */function sq(F,A,B,D,X,Z,J,Y,$,G){let E=X.connection??F.db;if(G=G===void 0?J:G,Array.isArray(G))G=n0.cloneArrays(G);if(D==null)return;let C=n0.array.flatten(D),W=C.length;while(W--){let H=C[W];if(H==null)continue;let q;if(X.model&&X.model[nq])q=X.model;else if(H[nq])q=H,H=q.modelName;else try{q=tq(E,H)}catch(R){if(J!==void 0)throw R;q=null}let Q=J,K=Z.modelNamesInOrder||D;if(Z.isRefPath&&Array.isArray(J)&&J.length===K.length)Q=md(J,K,H);let U=X.perDocumentLimit==null?u6(X,"options.perDocumentLimit",null):X.perDocumentLimit;if(!B[H]||U!=null){let R={model:q};if(Z.isVirtual&&u6(Z.virtual,"options.options"))R.options=pK1(Z.virtual.options.options);else if($!=null)R.options=Object.assign({},$);n0.merge(R,X),X[pq]=q,R[pq]=q,B[H]={model:q,options:R,match:Z.hasMatchFunction?[Z.match]:Z.match,docs:[Y],ids:[Q],allIds:[J],unpopulatedValues:[G],localField:new Set([Z.localField]),foreignField:new Set([Z.foreignField]),justOne:Z.justOne,isVirtual:Z.isVirtual,virtual:Z.virtual,count:Z.count,[pq]:q},A.push(B[H])}else if(B[H].localField.add(Z.localField),B[H].foreignField.add(Z.foreignField),B[H].docs.push(Y),B[H].ids.push(Q),B[H].allIds.push(J),B[H].unpopulatedValues.push(G),Z.hasMatchFunction)B[H].match.push(Z.match)}}function tq(F,A){if(F.models[A]==null&&F._parent!=null)return tq(F._parent,A);return F.model(A)}function md(F,A,B){if(!Array.isArray(A))return A===B?Array.isArray(F)?n0.array.flatten(F):[F]:[];if(Array.isArray(F)&&Array.isArray(A))return F.flatMap((D,X)=>md(D,A[X],B));return[]}/*!
 * ignore
 */function iq(F,A){if(typeof F==="function"&&!F[nq])return F.call(A,A);return F}/*!
 * ignore
 */function dd(F,A,B,D,X,Z){let J=B.schema._getPathType(A),Y=J==="real"?B.schema.path(A):J.schema,$=Y?.getters||[];A=Y?.instance==="Embedded"?A+"._id":A;let G=u6(D,"options",{}),E="getters"in G?G.getters:u6(X,"options.getters",!1);if($.length!==0&&E){let C=F.$__!=null?F:B.hydrate(F),W=n0.getValue(A,F);if(Array.isArray(W)){let H=n0.getValue(A.split(".").slice(0,-1),C);return W.map((q,Q)=>Y.applyGetters(q,H[Q]))}else return Y.applyGetters(W,C)}else return cd(d9.get(A,F,CA),Z)}function cd(F,A){if(F?.$__!=null)return F._doc._id;if(F?._id!=null&&!A?.$isSchemaMap)return F._id;if(Array.isArray(F)){let B=F.__array??F;for(let D=0;D<B.length;++D)if(B[D]?.$__!=null)B[D]=B[D]._doc._id;if(n0.isMongooseArray(F)&&F.$schema())return F.$schema()._castForPopulate(F,F.$parent());return[].concat(F)}if(nK1(F)==="Object"&&A?.[aq]==null){let B=[];for(let D of Object.keys(F))B.push(F[D]);return B}if(F instanceof Map)return Array.from(F.values());return F}/*!
 * ignore
 */function tK1(F,A,B,D,X,Z){if(!B.isRefPath||X==null)return;let J=X.split("."),Y="",$=void 0;for(let G=0;G<J.length;++G){let E=J[G];Y=Y+(Y.length===0?"":".")+E;let C=A.path(Y);if(C!=null&&C.$isMongooseDocumentArray&&C.Constructor.discriminators!=null&&n0.hasOwnKeys(C.Constructor.discriminators)){let W=n0.getValue(Y,F),H=D.path.substring(Y.length+1),q=C.Constructor.schema.options.discriminatorKey;$=[];for(let Q of W){let K=n0.getValue(q,Q),R=C.Constructor.discriminators[K]?.schema;if(R==null)continue;let w=R.path(H);if(w==null||w.options.refPath==null){let N=n0.getValue(B.localField.substring(Y.length+1),Q);Z.forEach((T,P)=>{if(T===N)Z[P]=lK1(T)});continue}let V=n0.getValue(J.slice(G+1).join("."),Q);$.push(V)}}}return $}function oq(F){if(F==null)return;if(typeof F!=="object")return;for(let A of Object.keys(F)){if(A==="$where")throw new rq("Cannot use $where filter with populate() match");if(F[A]!=null&&typeof F[A]==="object")oq(F[A])}}});var nd=z((KO1,id)=>{var oK1=K0();id.exports=function F(A){if(Array.isArray(A)){let D=Object.keys(A[0]);return D.length===1&&D[0]==="_id"&&A[0]._id!=="hashed"}if(typeof A!=="object")return!1;let B=oK1(A,"key",{});return Object.keys(B).length===1&&Object.hasOwn(B,"_id")}});var rd=z((UO1,sd)=>{var HZ=K0(),ad=B1();sd.exports=function F(A,B,D){if(D.textIndexVersion!=null){delete D.key._fts,delete D.key._ftsx;let Y={...D.weights,...D.key};if(Object.keys(Y).length!==Object.keys(A).length)return!1;for(let $ of Object.keys(Y)){if(!($ in A))return!1;let G=Y[$];if(G!==HZ(B,"weights."+$)&&!(G===1&&HZ(B,"weights."+$)==null))return!1}if(B.default_language!==D.default_language)return D.default_language==="english"&&B.default_language==null;return!0}let X=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let Y of X){if(!(Y in B)&&!(Y in D))continue;if(Y==="collation"){if(B[Y]==null||D[Y]==null)return B[Y]==null&&D[Y]==null;let $=Object.keys(B.collation),G=B.collation,E=D.collation;for(let C of $)if(HZ(G,C)!==HZ(E,C))return!1}else if(!ad.deepEqual(B[Y],D[Y]))return!1}let Z=Object.keys(A),J=Object.keys(D.key);if(Z.length!==J.length)return!1;for(let Y=0;Y<Z.length;++Y){if(Z[Y]!==J[Y])return!1;if(!ad.deepEqual(A[Z[Y]],D.key[J[Y]]))return!1}return!0}});var od=z((VO1,td)=>{td.exports=function F(A,B){if(B.timeseries==null)return!1;let{timeField:D,metaField:X}=B.timeseries;if(typeof D!=="string"||typeof X!=="string")return!1;return Object.keys(A.key).length===2&&A.key[D]===1&&A.key[X]===1}});var Bc=z((LO1,Ac)=>{var eK1=rX();function FU1(F,A){return Fc({baseModelName:F.baseModelName,discriminatorMapping:F.schema.discriminatorMapping,indexes:A,indexesType:"schema"})}function AU1(F,A){return Fc({baseModelName:F.baseModelName,discriminatorMapping:F.schema.discriminatorMapping,indexes:A,indexesType:"db"})}Ac.exports={getRelatedSchemaIndexes:FU1,getRelatedDBIndexes:AU1};function Fc({baseModelName:F,discriminatorMapping:A,indexes:B,indexesType:D}){let X=A?.key,Z=A?.value;if(!X)return B;if(Boolean(F))return B.filter((Y)=>{let $=ed(Y,D);return $&&$[X]===Z});return B.filter((Y)=>{let $=ed(Y,D);return!$||!$[X]||eK1($[X])&&!("$eq"in $[X])})}function ed(F,A){if(A==="schema")return F[1]?.partialFilterExpression;return F.partialFilterExpression}});var Xc=z((wO1,Dc)=>{Dc.exports=BU1;/*!
 * ignore
 */async function BU1(F,A,B){if(B<=0)throw new Error("Limit must be positive");if(F.length===0)return[];let D=[],X=new Set;for(let Z=0;Z<F.length;Z++){let J=F[Z],Y=A(J,Z);D.push(Y),X.add(Y);let $=()=>X.delete(Y);if(Y.then($).catch($),X.size>=B)await Promise.race(X)}return Promise.all(D)}});var Jc=z((RO1,Zc)=>{Zc.exports=function F(A,B,D){if(B==null)return;for(let X=0;X<B.length;++X)if(Array.isArray(B[X]))F(A,B[X],D+"."+X);else A.push(D+"."+X)}});var Cc=z((IO1,Ec)=>{var Yc=K0(),$c=W6(),Gc=Pq();/*!
 * ignore
 */Ec.exports=function F(A,B,D){let X=Gc(Yc(B,"select",null),!0)||Gc(Yc(B,"options.select",null),!0);if(X==null)return;for(let Z of A){if(!Object.hasOwn(X,"-"+Z))continue;for(let J of D)if(J.$__!=null)$c.unset(Z,J._doc);else $c.unset(Z,J)}}});var hq=z((uc,Oc)=>{/*!
 * Module dependencies.
 */var DU1=_q(),XU1=DC(),K3=H3(),ZU1=RD(),Fz=m("events").EventEmitter,qA=P9(),QZ=fH(),W1=E6(),JU1=uD(),YU1=QC(),qZ=FZ(),$U1=vm(),Az=S9(),zZ=M9(),Lc=WC(),Wc=qC(),GU1=OD(),EU1=dm(),CU1=bq(),WU1=pm(),wc=nm(),HU1=rm(),qU1=Wq(),Rc=Fd(),zU1=Bd(),Ic=Xd(),QU1=Gd(),Pc=Hq(),KU1=Wd(),UU1=kd(),VU1=oH(),e3=C0(),LU1=xd(),Nc=rH(),eq=hH(),Mc=gD(),wU1=NX(),RU1=fd(),zA=K0(),IU1=x2(),WA=j6(),PU1=pd(),Hc=X4(),Dz=n6().internalToObjectOptions,Xz=nd(),jc=rd(),NU1=od(),{getRelatedDBIndexes:MU1,getRelatedSchemaIndexes:jU1}=Bc(),Zz=VW(),TU1=yD(),kU1=GA(),uU1=Xc(),OU1=Sq(),Tc=Jc(),SU1=Cc(),xU1=cH(),qc=m("util"),y1=B1(),_U1=vC(),fU1=VC(),gU1=kD(),c9=eH(),l9=Symbol("mongoose#Model#collection"),p9=Symbol("mongoose#Model#db"),kc=t().modelSymbol,HA=Symbol("mongoose#Model#subclassed"),{VERSION_INC:KZ,VERSION_WHERE:zc,VERSION_ALL:bU1}=K3,yU1=Object.assign({},Dz,{bson:!0});function v(F,A,B){if(A instanceof Az)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof F==="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");K3.call(this,F,A,B)}Object.setPrototypeOf(v.prototype,K3.prototype);v.prototype.$isMongooseModelPrototype=!0;v.prototype.db;v.useConnection=function F(A){if(!A)throw new Error("Please provide a connection.");if(this.db)delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[p9],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[l9];this.db=A;let B=A.collection(this.collection.collectionName,A.options);return this.prototype.collection=B,this.prototype.$collection=B,this.prototype[l9]=B,this.prototype.db=A,this.prototype[p9]=A,this.collection=B,this.$__collection=B,A.models[this.modelName]=this,this};v.prototype.collection;v.prototype.$__collection;v.prototype.modelName;v.prototype.$where;v.prototype.baseModelName;v.events;v._middleware;/*!
 * ignore
 */function Bz(F,A){if(F.$where==null)return;for(let B of Object.keys(F.$where))A[B]=F.$where[B]}/*!
 * ignore
 */function hU1(F,A){let B={};if(Pc(F.$__schema,A),typeof A.writeConcern!=="undefined"){if(B.writeConcern={},"w"in A.writeConcern)B.writeConcern.w=A.writeConcern.w;if("j"in A.writeConcern)B.writeConcern.j=A.writeConcern.j;if("wtimeout"in A.writeConcern)B.writeConcern.wtimeout=A.writeConcern.wtimeout}else{if("w"in A)B.w=A.w;if("j"in A)B.j=A.j;if("wtimeout"in A)B.wtimeout=A.wtimeout}if("checkKeys"in A)B.checkKeys=A.checkKeys;let D=F.$session(),X=F[p9].base.transactionAsyncLocalStorage?.getStore();if(D!=null)B.session=D;else if(!Object.hasOwn(A,"session")&&X?.session!=null)B.session=X.session;return B}/*!
 * ignore
 */v.prototype.$__save=async function F(A){try{await this._execDocumentPreHooks("save",A)}catch(J){await this._execDocumentPostHooks("save",J);return}let B=null,D=null;try{let J=hU1(this,A);if(this.$isNew){let Y=this.toObject(yU1);if((Y||{})._id===void 0)throw new W1("document must have an _id before saving");this.$__version(!0,Y),this.$__reset(),g8(this,!1),this.$__.inserting=!0,B=await this[l9].insertOne(Y,J).catch(($)=>{throw g8(this,!0),$})}else{this.$__.inserting=!1;let Y=this.$__delta();if(A.pathsToSave)for(let $ in Y[1].$set)if(A.pathsToSave.includes($))continue;else if(A.pathsToSave.some((G)=>$.slice(0,G.length)===G&&$.charAt(G.length)==="."))continue;else delete Y[1].$set[$];if(Y){D=this.$__where(Y[0]),Bz(this,D);let $=Y[1];if(this.$__schema.options.minimize)for(let G of Object.values($)){if(G==null)continue;for(let E of Object.keys(G)){if(G[E]==null||typeof G[E]!=="object")continue;if(!y1.isPOJO(G[E]))continue;if(_U1(G[E]),y1.hasOwnKeys(G[E])===!1)delete G[E],$.$unset=$.$unset||{},$.$unset[E]=1}}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),g8(this,!1),B=await this[l9].updateOne(D,$,J).catch((G)=>{throw this.$__undoReset(),G})}else{if(D=this.$__where(),Bz(this,D),this.$__.version)this.$__version(D,Y);qU1(this.$__schema,J),B=await this.constructor.collection.findOne(D,{...J,projection:{_id:1}}).then(($)=>({matchedCount:!$?0:1}))}}}catch(J){let Y=this.$__schema._transformDuplicateKeyError(J);await this._execDocumentPostHooks("save",Y);return}let X=0;if((A!=null?A.writeConcern!=null?A.writeConcern.w:A.w:0)!==0){if(B!=null)if(Array.isArray(B))X=B.length;else if(B.matchedCount!=null)X=B.matchedCount;else X=B;if(this.$__.version&&!this.$__.inserting){let Y=KZ===(KZ&this.$__.version);this.$__.version=void 0;let $=this.$__schema.options.versionKey,G=this.$__getValue($)||0;if(X<=0){this.$__undoReset();let E=this.$__.$versionError||new Lc(this,G,this.$__.modifiedPaths);await this._execDocumentPostHooks("save",E);return}if(Y)this.$__setValue($,G+1)}if(B!=null&&X<=0){this.$__undoReset();let Y=new ZU1(D,this.constructor.modelName,X,B);await this._execDocumentPostHooks("save",Y);return}}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,X),this.constructor.emit("save",this,X),await this._execDocumentPostHooks("save")};/*!
 * ignore
 */function vU1(F,A,B){let D=F.$__schema.options.versionKey;if(!D)return null;let X=F.$__getValue(D)||0;return new Lc(F,X,A.concat(B))}v.prototype.save=async function F(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new W1("Model.prototype.save() no longer accepts a callback");let B;if(this.$op="save",this.$__.saving)B=new Wc(this);else this.$__.saving=new Wc(this);if(A=new $U1(A),Object.hasOwn(A,"session"))this.$session(A.session);if(this.$__.timestamps!=null)A.timestamps=this.$__.timestamps;if(this.$__.$versionError=vU1(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),B)throw this.$__handleReject(B),B;this.$__.saveOptions=A;try{await this.$__save(A)}catch(D){throw this.$__handleReject(D),D}finally{this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null}return this};v.prototype.$save=v.prototype.save;v.prototype.$__version=function(F,A){let B=this.$__schema.options.versionKey;if(F===!0){if(B)xU1(A,B,0),this.$__setValue(B,0);return}if(B===!1)return;if(!this.$__isSelected(B))return;if(zc===(zc&this.$__.version)){let D=this.$__getValue(B);if(D!=null)F[B]=D}if(KZ===(KZ&this.$__.version))if(zA(A.$set,B,null)!=null)++A.$set[B];else A.$inc=A.$inc||{},A.$inc[B]=1};v.prototype.increment=function F(){return this.$__.version=bU1,this};v.prototype.$__where=function F(A){if(A||(A={}),!A._id)A._id=this._doc._id;if(this._doc._id===void 0)throw new W1("No _id found on document!");return A};v.prototype.deleteOne=function F(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new W1("Model.prototype.deleteOne() no longer accepts a callback");if(!A)A={};if(Object.hasOwn(A,"session"))this.$session(A.session);let B=this,D=this.$__where(),X=B.constructor.deleteOne();if(this.$session()!=null){if(!("session"in X.options))X.options.session=this.$session()}return X.pre(async function Z(){let J=await B.constructor._middleware.execPre("deleteOne",B,[B,A]);if(J[0]!==B||J[1]!==A)throw new Error("Document deleteOne pre hooks cannot overwrite arguments");if(X.deleteOne(D,A),B.$where!=null)this.where(B.$where);return J}),X.pre(function Z(){return Promise.all(B.$getAllSubdocs().map((J)=>J.constructor._middleware.execPre("deleteOne",J,[J])))}),X.pre(function Z(){if(B.$__.isDeleted)throw new qA.skipWrappedFunction}),X.post(function Z(){return Promise.all(B.$getAllSubdocs().map((J)=>J.constructor._middleware.execPost("deleteOne",J,[J])))}),X.post(function Z(){return B.constructor._middleware.execPost("deleteOne",B,[B],{})}),X.transform(function Z(J){if(J?.deletedCount>0)B.$isDeleted(!0);return J}),X};v.prototype.$model=function F(A){if(arguments.length===0)return this.constructor;return this[p9].model(A)};v.prototype.model=v.prototype.$model;v.exists=function F(A,B){if(Q1(this,"exists"),typeof arguments[2]==="function")throw new W1("Model.exists() no longer accepts a callback");return this.findOne(A).select({_id:1}).lean().setOptions(B)};v.discriminator=function(F,A,B){let D;if(typeof F==="function"){if(D=F,F=y1.getFunctionName(D),!(D.prototype instanceof v))throw new W1("The provided class "+F+" must extend Model")}B=B||{};let X=y1.isPOJO(B)?B.value:B,Z=typeof B.clone==="boolean"?B.clone:!0,J=typeof B.mergePlugins==="boolean"?B.mergePlugins:!0,Y=typeof B.overwriteModels==="boolean"?B.overwriteModels:!1;if(Q1(this,"discriminator"),y1.isObject(A)&&!A.instanceOfSchema)A=new Az(A);if(A instanceof Az&&Z)A=A.clone();if(A=wU1(this,F,A,X,J,B.mergeHooks,Y),this.db.models[F]&&!A.options.overwriteModels&&!Y)throw new YU1(F);A.$isRootDiscriminator=!0,A.$globalPluginsApplied=!0,D=this.db.model(D||F,A,this.$__collection.name),this.discriminators[F]=D;let $=this.discriminators[F];if(Object.setPrototypeOf($.prototype,this.prototype),Object.defineProperty($,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),wc($,A),Ic($,A),this[HA]!=null)for(let G of this[HA])G.discriminators=G.discriminators||{},G.discriminators[F]=D.__subclass(D.db,A,G.collection.name);return $};function Q1(F,A){if(F==null||F===global)throw new W1("`Model."+A+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+A+"()` where `MyModel` is a Mongoose model.");else if(F[kc]==null)throw new W1("`Model."+A+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+A+"()`")}/*!
 * Give the constructor the ability to emit events.
 */for(let F in Fz.prototype)v[F]=Fz.prototype[F];v.init=function F(){if(Q1(this,"init"),typeof arguments[0]==="function")throw new W1("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let A=this.db,B=async()=>{if(!y1.getOption("autoIndex",this.schema.options,A.config,A.base.options))return;return await this.ensureIndexes({_automatic:!0})},D=async()=>{if(!y1.getOption("autoSearchIndex",this.schema.options,A.config,A.base.options))return;return await this.createSearchIndexes()},X=async()=>{let Y=y1.getOption("autoCreate",this.schema.options,A.config);if(Y==null)await A._waitForConnect(!0),Y=y1.getOption("autoCreate",this.schema.options,A.config,A.base.options);if(!Y)return;return await this.createCollection()};this.$init=X().then(()=>B()).then(()=>D());let Z=this.$init.catch,J=this;return this.$init.catch=function(){return J.$caught=!0,Z.apply(J.$init,arguments)},this.$init};v.createCollection=async function F(A){if(Q1(this,"createCollection"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.createCollection() no longer accepts a callback");[A]=await this.hooks.execPre("createCollection",this,[A]).catch((Y)=>{if(Y instanceof qA.skipWrappedFunction)return[Y];throw Y});let B=this?.schema?.options?.collectionOptions;if(B!=null)A=Object.assign({},B,A);let D=this?.schema?.options?.collation;if(D!=null)A=Object.assign({collation:D},A);let X=this?.schema?.options?.capped;if(X!=null){if(typeof X==="number")A=Object.assign({capped:!0,size:X},A);else if(typeof X==="object")A=Object.assign({capped:!0},X,A)}let Z=this?.schema?.options?.timeseries;if(Z!=null){if(A=Object.assign({timeseries:Z},A),A.expireAfterSeconds!=null);else if(A.expires!=null)y1.expires(A);else if(this.schema.options.expireAfterSeconds!=null)A.expireAfterSeconds=this.schema.options.expireAfterSeconds;else if(this.schema.options.expires!=null)A.expires=this.schema.options.expires,y1.expires(A)}let J=this?.schema?.options?.clusteredIndex;if(J!=null)A=Object.assign({clusteredIndex:{...J,unique:!0}},A);try{if(!(A instanceof qA.skipWrappedFunction))await this.db.createCollection(this.$__collection.collectionName,A)}catch(Y){if(Y!=null&&(Y.name!=="MongoServerError"||Y.code!==48))await this.hooks.execPost("createCollection",this,[null],{error:Y})}return await this.hooks.execPost("createCollection",this,[this.$__collection]),this.$__collection};v.syncIndexes=async function F(A){if(Q1(this,"syncIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.syncIndexes() no longer accepts a callback");if(A?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??this.db.base?.options?.autoCreate??!0)try{await this.createCollection()}catch(Z){if(Z!=null&&(Z.name!=="MongoServerError"||Z.code!==48))throw Z}let D=await this.diffIndexes({indexOptionsToCreate:!0}),X=await this.cleanIndexes({...A,toDrop:D.toDrop});return await this.createIndexes({...A,toCreate:D.toCreate}),X};v.createSearchIndex=async function F(A){return Q1(this,"createSearchIndex"),await this.$__collection.createSearchIndex(A)};v.updateSearchIndex=async function F(A,B){return Q1(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(A,B)};v.dropSearchIndex=async function F(A){return Q1(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(A)};v.listSearchIndexes=async function F(A){return Q1(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(A)).toArray()};v.diffIndexes=async function F(A){if(typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.syncIndexes() no longer accepts a callback");let B=this,D=await B.listIndexes().catch(($)=>{if($.codeName=="NamespaceNotFound")return;throw $});if(D===void 0)D=[];D=MU1(B,D);let X=B.schema,Z=jU1(B,X.indexes()),J=dU1(X,Z,D),Y=mU1(X,Z,D,J,A);return{toDrop:J,toCreate:Y}};function mU1(F,A,B,D,X){let Z=[],J=X?.indexOptionsToCreate??!1;for(let[Y,$]of A){let G=!1,E=Zz(F,e3($));for(let C of B){if(Xz(C))continue;if(jc(Y,E,C)&&!D.includes(C.name)){G=!0;break}}if(!G)if(J)Z.push([Y,$]);else Z.push(Y)}return Z}function dU1(F,A,B){let D=[];for(let X of B){let Z=!1;if(Xz(X))continue;if(NU1(X,F.options))continue;for(let[J,Y]of A){let $=Zz(F,e3(Y));if(Rc(J,$,F.options),jc(J,$,X)){Z=!0;break}}if(Z)continue;D.push(X.name)}return D}v.cleanIndexes=async function F(A){if(Q1(this,"cleanIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.cleanIndexes() no longer accepts a callback");let B=this;if(Array.isArray(A?.toDrop))return await Qc(A.toDrop,B,A);let D=await B.diffIndexes();return await Qc(D.toDrop,B,A)};async function Qc(F,A,B){if(F.length===0)return[];let D=A.$__collection;if(B?.hideIndexes)await Promise.all(F.map((X)=>{return A.db.db.command({collMod:D.collectionName,index:{name:X,hidden:!0}})}));else await Promise.all(F.map((X)=>D.dropIndex(X)));return F}v.listIndexes=async function F(){if(Q1(this,"listIndexes"),typeof arguments[0]==="function")throw new W1("Model.listIndexes() no longer accepts a callback");if(this.$__collection.buffer)await new Promise((A)=>{this.$__collection.addQueue(A)});return this.$__collection.listIndexes().toArray()};v.ensureIndexes=async function F(A){if(Q1(this,"ensureIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.ensureIndexes() no longer accepts a callback");await new Promise((B,D)=>{cU1(this,A,(X)=>{if(X!=null)return D(X);B()})})};v.createIndexes=async function F(A){if(Q1(this,"createIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(A)};/*!
 * ignore
 */function cU1(F,A,B){let D=Array.isArray(A?.toCreate)?A.toCreate:F.schema.indexes(),X;A=A||{};let Z=function(C){if(C&&!F.$caught)F.emit("error",C);F.emit("index",C||X),B&&B(C||X)};for(let C of D)if(Xz(C))y1.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+F.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!D.length){Hc(function(){Z()});return}let J=function(C,W,H,q){F.emit("index-single-done",C,W,H,q)},Y=function(C,W){F.emit("index-single-start",C,W)},$=F.schema._baseSchema,G=$?$.indexes():[];Hc(function(){if(A._automatic&&!F.collection.collection)F.collection.addQueue(E,[]);else E()});function E(){if(A._automatic){if(F.schema.options.autoIndex===!1||F.schema.options.autoIndex==null&&F.db.config.autoIndex===!1)return Z()}let C=D.shift();if(!C)return Z();if(A._automatic&&C[1]._autoIndex===!1)return E();if(G.find((Q)=>y1.deepEqual(Q,C)))return E();let W=e3(C[0]),H=e3(C[1]);delete H._autoIndex,Zz(F.schema,H),Pc(F.schema,H),Rc(W,H,F.schema.options),Y(W,A);let q=null;try{q=F.collection.createIndex(W,H)}catch(Q){if(!X)X=Q;if(!F.$caught)F.emit("error",Q);J(Q,W,H),E();return}q.then((Q)=>{J(null,W,H,Q),E()},(Q)=>{if(!X)X=Q;if(!F.$caught)F.emit("error",Q);J(Q,W,H),E()})}}v.createSearchIndexes=async function F(){Q1(this,"createSearchIndexes");let A=[];for(let B of this.schema._searchIndexes)A.push(await this.createSearchIndex(B));return A};v.schema;v.db;v.collection;v.$__collection;v.base;v.discriminators;v.translateAliases=function F(A,B){Q1(this,"translateAliases");let D=(X,Z)=>{let J,Y=[],$=X.split("."),G=this.schema;for(let C in $){let W=$[C];if(G?.aliases[W]){if(J=G.aliases[W],B&&J in A)throw new W1(`Provided object has both field "${W}" and its alias "${J}"`);Y.push(J)}else J=W,Y.push(W);if(G?.paths[J])G=G.paths[J].schema;else G=null}let E=Y.join(".");if(A instanceof Map)A.set(E,Z);else A[E]=Z;if(E!==X)if(A instanceof Map)A.delete(X);else delete A[X];return A};if(typeof A==="object"){if(A instanceof Map)for(let X of new Map(A))A=D(X[0],X[1]);else for(let X of Object.keys(A))if(A=D(X,A[X]),X[0]==="$")if(Array.isArray(A[X]))for(let Z in A[X])A[X][Z]=this.translateAliases(A[X][Z]);else this.translateAliases(A[X]);return A}else return A};v.deleteOne=function F(A,B){if(Q1(this,"deleteOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.prototype.deleteOne() no longer accepts a callback");let D=new this.Query({},{},this,this.$__collection);return D.setOptions(B),D.deleteOne(A)};v.deleteMany=function F(A,B){if(Q1(this,"deleteMany"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.deleteMany() no longer accepts a callback");let D=new this.Query({},{},this,this.$__collection);return D.setOptions(B),D.deleteMany(A)};v.find=function F(A,B,D){if(Q1(this,"find"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new W1("Model.find() no longer accepts a callback");let X=new this.Query({},{},this,this.$__collection);return X.select(B),X.setOptions(D),X.find(A)};v.findById=function F(A,B,D){if(Q1(this,"findById"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.findById() no longer accepts a callback");return this.findOne({_id:A},B,D)};v.findOne=function F(A,B,D){if(Q1(this,"findOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.findOne() no longer accepts a callback");let X=new this.Query({},{},this,this.$__collection);return X.select(B),X.setOptions(D),X.findOne(A)};v.estimatedDocumentCount=function F(A){return Q1(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(A)};v.countDocuments=function F(A,B){if(Q1(this,"countDocuments"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.countDocuments() no longer accepts a callback");let D=new this.Query({},{},this,this.$__collection);if(B!=null)D.setOptions(B);return D.countDocuments(A)};v.distinct=function F(A,B,D){if(Q1(this,"distinct"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.distinct() no longer accepts a callback");let X=new this.Query({},{},this,this.$__collection);if(D!=null)X.setOptions(D);return X.distinct(A,B)};v.where=function F(A,B){Q1(this,"where");let D=new this.Query({},{},this,this.$__collection).find({});return D.where.apply(D,arguments)};v.$where=function F(){Q1(this,"$where");let A=new this.Query({},{},this,this.$__collection).find({});return A.$where.apply(A,arguments)};v.findOneAndUpdate=function(F,A,B){if(Q1(this,"findOneAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new W1("Model.findOneAndUpdate() no longer accepts a callback");let D;if(B)D=B.fields||B.projection;A=e3(A,{depopulate:!0,_isNested:!0}),Nc(A,B,this.schema.options.versionKey);let X=new this.Query({},{},this,this.$__collection);return X.select(D),X.findOneAndUpdate(F,A,B)};v.findByIdAndUpdate=function(F,A,B){if(Q1(this,"findByIdAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new W1("Model.findByIdAndUpdate() no longer accepts a callback");if(F instanceof K3)F=F._doc._id;return this.findOneAndUpdate.call(this,{_id:F},A,B)};v.findOneAndDelete=function(F,A){if(Q1(this,"findOneAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.findOneAndDelete() no longer accepts a callback");let B;if(A)B=A.select,A.select=void 0;let D=new this.Query({},{},this,this.$__collection);return D.select(B),D.findOneAndDelete(F,A)};v.findByIdAndDelete=function(F,A){if(Q1(this,"findByIdAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:F},A)};v.findOneAndReplace=function(F,A,B){if(Q1(this,"findOneAndReplace"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new W1("Model.findOneAndReplace() no longer accepts a callback");let D;if(B)D=B.select,B.select=void 0;let X=new this.Query({},{},this,this.$__collection);return X.select(D),X.findOneAndReplace(F,A,B)};v.create=async function F(A,B){if(typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.create() no longer accepts a callback");Q1(this,"create");let D,X=this.schema.options.discriminatorKey;if(Array.isArray(A))D=A,B=B!=null&&typeof B==="object"?B:{};else{let Y=arguments[arguments.length-1];if(B={},typeof Y==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.create() no longer accepts a callback");else if(D=[...arguments],D.length>1&&!Y)D.pop();if(D.length===2&&D[0]!=null&&D[1]!=null&&D[0].session==null&&Y&&IU1(Y.session)==="ClientSession"&&!this.schema.path("session"))y1.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(D.length===0)return Array.isArray(A)?[]:null;let Z=[],J=typeof B.aggregateErrors==="boolean"?!B.aggregateErrors:!0;if(delete B.aggregateErrors,B.session&&!B.ordered&&D.length>1)throw new W1("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if(B.ordered){for(let Y=0;Y<D.length;Y++)try{let $=D[Y],G=this.discriminators&&$[X]!=null?this.discriminators[$[X]]||WA(this.discriminators,$[X]):this;if(G==null)throw new W1(`Discriminator "${$[X]}" not found for model "${this.modelName}"`);let E=$;if(!(E instanceof G))E=new G(E);await E.$save(B),Z.push(E)}catch($){if(!J)Z.push($);else throw $}return Z}else if(!J)Z=await Promise.allSettled(D.map(async(Y)=>{let $=this.discriminators&&Y[X]!=null?this.discriminators[Y[X]]||WA(this.discriminators,Y[X]):this;if($==null)throw new W1(`Discriminator "${Y[X]}" not found for model "${this.modelName}"`);let G=Y;if(!(G instanceof $))G=new $(G);return await G.$save(B),G})),Z=Z.map((Y)=>Y.status==="fulfilled"?Y.value:Y.reason);else{let Y=null;if(Z=await Promise.all(D.map(async($)=>{let G=this.discriminators&&$[X]!=null?this.discriminators[$[X]]||WA(this.discriminators,$[X]):this;if(G==null)throw new W1(`Discriminator "${$[X]}" not found for model "${this.modelName}"`);try{let E=$;if(!(E instanceof G))E=new G(E);return await E.$save(B),E}catch(E){if(!Y)Y=E}})),Y)throw Y}if(!Array.isArray(A)&&D.length===1)return Z[0];return Z};v.insertOne=async function F(A,B){Q1(this,"insertOne");let D=this.schema.options.discriminatorKey,X=this.discriminators&&A[D]!=null?this.discriminators[A[D]]||WA(this.discriminators,A[D]):this;if(X==null)throw new W1(`Discriminator "${A[D]}" not found for model "${this.modelName}"`);if(!(A instanceof X))A=new X(A);return await A.$save(B)};v.watch=function(F,A){Q1(this,"watch"),A=A||{};let B=A?.hydrate!==void 0?y1.omit(A,["hydrate"]):{...A};return A.model=this,new XU1((X)=>{if(F=F||[],OU1(F,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let Z=this.$__collection.watch(F,B);X(null,Z)});else{let Z=this.$__collection.watch(F,B);X(null,Z)}},F,A)};v.startSession=function(){return Q1(this,"startSession"),this.db.startSession.apply(this.db,arguments)};v.insertMany=async function F(A,B){if(Q1(this,"insertMany"),typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.insertMany() no longer accepts a callback");try{[A]=await this._middleware.execPre("insertMany",this,[A])}catch(V){await this._middleware.execPost("insertMany",this,[A],{error:V})}B=B||{};let D=this,X=B.limit||1000,Z=!!B.rawResult,J=typeof B.ordered==="boolean"?B.ordered:!0,Y=typeof B.throwOnValidationError==="boolean"?B.throwOnValidationError:!1,$=!!B.lean,G=this.db.base.transactionAsyncLocalStorage?.getStore();if((!B||!Object.hasOwn(B,"session"))&&G?.session!=null)B={...B,session:G.session};if(!Array.isArray(A))A=[A];let E=[],C=new Map,W=J?null:new Array(A.length);async function H(V,N){if($)return V;let T=!1;if(!(V instanceof D)){if(V!=null&&typeof V!=="object")throw new JU1(V,"arr."+N,"insertMany");V=new D(V),T=!0}if(B.session!=null)V.$session(B.session);return V.$validate(T?{_skipParallelValidateCheck:!0}:null).then(()=>V).catch((P)=>{if(J===!1){P.index=N,E.push(P),C.set(P,N),W[N]=P;return}throw P})}let q=await uU1(A,H,X),Q=new Map,K=new Map;for(let V=0;V<q.length;++V)Q.set(q[V],V);let U=q.filter(function(V){return V!=null});for(let V=0;V<U.length;++V)K.set(V,Q.get(U[V]));if(E.length>0)E.sort((V,N)=>{return C.get(V)-C.get(N)});if(U.length===0){if(Y)throw new QZ(E,W,null,"insertMany");if(Z){let V={acknowledged:!0,insertedCount:0,insertedIds:{}};return c9(V,E,E),V}return[]}let R=$?U:U.map(function(V){if(V.$__schema.options.versionKey)V[V.$__schema.options.versionKey]=0;if((!B||B.timestamps!==!1)&&V.initializeTimestamps&&(!V.$__||V.$__.timestamps!==!1))V.initializeTimestamps();if(V.$__hasOnlyPrimitiveValues())return V.$__toObjectShallow();return V.toObject(Dz)}),w;try{w=await this.$__collection.insertMany(R,B)}catch(V){if(V.writeErrors==null&&V.result?.result?.writeErrors!=null)V.writeErrors=V.result.result.writeErrors;let N=V?.writeErrors,T=new Set((V?.writeErrors||[]).map((u)=>u.index));if(V.writeErrors!=null)for(let u=0;u<V.writeErrors.length;++u){let O=K.get(V.writeErrors[u].index);if(V.writeErrors[u]={...V.writeErrors[u],index:O},!J)W[O]=V.writeErrors[u]}if(!J){for(let u=0;u<W.length;++u)if(W[u]===void 0)W[u]=q[u];V.results=W}let P=-1;if(V.insertedDocs=U.filter((u,O)=>{let k=!N||T.has(O);if(J){if(P>-1)return O<P;if(k)P=O}return!k}).map(function u(O){if($)return O;return O.$__reset(),g8(O,!1),O}),Z&&J===!1)c9(V,E,W);await this._middleware.execPost("insertMany",this,[A],{error:V})}if(!$)for(let V of U)V.$__reset(),g8(V,!1);if(J===!1&&Y&&E.length>0){for(let V=0;V<W.length;++V)if(W[V]===void 0)W[V]=q[V];throw new QZ(E,W,w,"insertMany")}if(Z){if(J===!1){for(let V=0;V<W.length;++V)if(W[V]===void 0)W[V]=q[V];c9(w,E,W)}return w}if(B.populate!=null)return this.populate(U,B.populate).catch((V)=>{if(V!=null)V.insertedDocs=U;throw V});return await this._middleware.execPost("insertMany",this,[U]).then((V)=>V[0])};/*!
 * ignore
 */function g8(F,A){F.$isNew=A,F.$emit("isNew",A),F.constructor.emit("isNew",A);let B=F.$getAllSubdocs({useCache:!0});for(let D of B)D.$isNew=A,D.$emit("isNew",A)}v.bulkWrite=async function F(A,B){if(Q1(this,"bulkWrite"),typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.bulkWrite() no longer accepts a callback");B=B||{};try{[A,B]=await this.hooks.execPre("bulkWrite",this,[A,B])}catch(Y){if(Y instanceof qA.skipWrappedFunction)A=Y;else await this.hooks.execPost("bulkWrite",this,[null],{error:Y})}if(A instanceof qA.skipWrappedFunction)return A.args[0];let D=B.ordered==null?!0:B.ordered;if(A.length===0){let $=new(this.base.driver.get()).BulkWriteResult(eq(),!1);return $.n=0,c9($,[],[]),$}let X=B?._skipCastBulkWrite?[]:A.map((Y)=>VU1(this,Y,B)),Z=this.db.base.transactionAsyncLocalStorage?.getStore();if((!B||!Object.hasOwn(B,"session"))&&Z?.session!=null)B={...B,session:Z.session};let J=null;if(D){await new Promise((Y,$)=>{RU1(X,(G,E)=>G(E),(G)=>{if(G)return $(G);Y()})});try{J=await this.$__collection.bulkWrite(A,B)}catch(Y){await this.hooks.execPost("bulkWrite",this,[null],{error:Y})}}else{let Y=[],$=[],G=[];if(X.length>0)Y=await Promise.all(A.map((H,q)=>{if(q>=X.length)return q;return new Promise((Q)=>{X[q]((K)=>{if(K==null)Q(q);else $.push({index:q,error:K}),G[q]=K;Q()})})})),Y=Y.filter((H)=>H!=null);else Y=A.map((H,q)=>q);$=$.sort((H,q)=>H.index-q.index).map((H)=>H.error);let E=Y.sort().map((H)=>A[H]);if(E.length===0){if(B.throwOnValidationError&&$.length)throw new QZ($,G,J,"bulkWrite");let q=new(this.base.driver.get()).BulkWriteResult(eq(),!1);return q.result=eq(),c9(q,$,G),q}let C;[J,C]=await this.$__collection.bulkWrite(E,B).then((H)=>[H,null]).catch((H)=>[null,H]);let W={};if(C?.writeErrors)for(let H of C.writeErrors)W[H.err.index]=H;for(let H=0;H<Y.length;++H)G[Y[H]]=W[H]??null;if(C){if($.length>0)c9(C,$,G);await this.hooks.execPost("bulkWrite",this,[null],{error:C})}if($.length>0)if(B.throwOnValidationError)throw new QZ($,G,J,"bulkWrite");else c9(J,$,G)}return await this.hooks.execPost("bulkWrite",this,[J]),J};v.bulkSave=async function F(A,B){if(B=B||{},B.timestamps!=null)for(let E of A)E.$__.saveOptions=E.$__.saveOptions||{},E.$__.saveOptions.timestamps=B.timestamps;else for(let E of A)if(E.$__.timestamps!=null)E.$__.saveOptions=E.$__.saveOptions||{},E.$__.saveOptions.timestamps=E.$__.timestamps;await Promise.all(A.map((E)=>lU1(E,B)));let D=this.buildBulkWriteOperations(A,B),X={skipValidation:!0,_skipCastBulkWrite:!0,...B},{bulkWriteResult:Z,bulkWriteError:J}=await this.bulkWrite(D,X).then((E)=>({bulkWriteResult:E,bulkWriteError:null}),(E)=>({bulkWriteResult:null,bulkWriteError:E}));if(J!=null&&J.name!=="MongoBulkWriteError")throw J;let Y=Z?.matchedCount??0,$=Z?.insertedCount??0;if(D.length>0&&Y+$<D.length&&!J)throw new fU1(this.modelName,A,Z);let G=[];for(let E=0;E<A.length;E++){let C=A[E];if(J?.writeErrors.find((H)=>{return(H.err.op._id||H.err.op.q._id).toString()===C._doc._id.toString()})==null)G.push(C)}if(await Promise.all(G.map((E)=>pU1(E))),J!=null)throw J;return Z};async function lU1(F,A){let[B]=await F.schema.s.hooks.execPre("save",F,[A]);if(B!==A)throw new Error('Cannot overwrite options in pre("save") hook on bulkSave()')}async function pU1(F){if(F.$isNew)g8(F,!1);return F.$__reset(),F._applyVersionIncrement(),F.schema.s.hooks.execPost("save",F,[F])}v.applyDefaults=function F(A){if(A==null)return A;if(A.$__!=null){GU1(A,A.$__.fields,A.$__.exclude);for(let B of A.$getAllSubdocs())F(B,B.$__.fields,B.$__.exclude);return A}return EU1(A,this.schema),A};v.applyVirtuals=function F(A,B){if(A==null)return A;if(A.$__!=null)return A;return KU1(this.schema,A,B),A};v.applyTimestamps=function F(A,B){if(A==null)return A;if(A.$__!=null)return A;return QU1(this.schema,A,B),A};v.castObject=function F(A,B){B=B||{};let D={},X=this.schema,Z=X.options.discriminatorKey;if(X.discriminators!=null&&A!=null&&A[Z]!=null)X=Mc(X,A[Z])||X;let J=Object.keys(X.paths);for(let $ of J){if(!X.path($)?.$isMongooseArray)continue;let E=zA(A,$);Tc(J,E,$)}let Y=null;for(let $ of J){let G=X.path($);if(G==null)continue;let E=zA(A,$,void 0);if(E==null)continue;let C=$.indexOf(".")===-1?[$]:$.split("."),W=D;for(let H=0;H<C.length-1;++H){if(W[C[H]]==null)W[C[H]]=isNaN(C[H+1])?{}:[];W=W[C[H]]}if(G.$isMongooseDocumentArray){let H=G.options?.castNonArrays??G.constructor.options.castNonArrays;if(!Array.isArray(E)){if(!H){if(!B.ignoreCastErrors)Y=Y||new zZ,Y.addError($,new gU1($,E))}else W[C[C.length-1]]=[v.castObject.call(G.Constructor,E)];continue}}if(G.$isSingleNested||G.$isMongooseDocumentArrayElement){try{E=v.castObject.call(G.Constructor,E)}catch(H){if(!B.ignoreCastErrors)Y=Y||new zZ,Y.addError($,H);continue}W[C[C.length-1]]=E;continue}try{E=G.cast(E),W[C[C.length-1]]=E}catch(H){if(!B.ignoreCastErrors)Y=Y||new zZ,Y.addError($,H);continue}}if(Y!=null)throw Y;return D};v.buildBulkWriteOperations=function F(A,B){if(!Array.isArray(A))throw new Error(`bulkSave expects an array of documents to be passed, received \`${A}\` instead`);return X(),A.map((Z,J)=>{if(!B.skipValidation){if(!(Z instanceof K3))throw new Error(`documents.${J} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if(B.validateBeforeSave==null||B.validateBeforeSave){let E=Z.validateSync();if(E!=null)throw E}}if(Z.isNew){let E={insertOne:{document:Z}};return y1.injectTimestampsOption(E.insertOne,B.timestamps),E}let $=Z.$__delta();if($!=null&&!y1.isEmptyObject($[0])){let E=Z.$__where($[0]),C=$[1];Bz(Z,E);let W=this.schema.options.shardKey;if(W){let q=Object.keys(W),Q=q.length;for(let K=0;K<Q;++K)E[q[K]]=Z[q[K]]}Z.$__version(E,$);let H={updateOne:{filter:E,update:C}};return y1.injectTimestampsOption(H.updateOne,B.timestamps),H}return null}).filter((Z)=>Z!==null);function X(){if(B=B||{},B.skipValidation==null)B.skipValidation=!1}};v.hydrate=function(F,A,B){if(Q1(this,"hydrate"),B?.virtuals&&B?.hydratedPopulatedDocs===!1)throw new W1("Cannot set `hydratedPopulatedDocs` option to false if `virtuals` option is truthy because `virtuals: true` also sets populated virtuals");if(A!=null){if(F?.$__!=null)F=F.toObject(Dz);F=HU1(F,A)}let D=RF().createModel(this,F,A);return D.$init(F,B),D};v.updateMany=function F(A,B,D){if(Q1(this,"updateMany"),B==null)throw new W1("updateMany `update` parameter cannot be nullish");return Jz(this,"updateMany",A,B,D)};v.updateOne=function F(A,B,D){return Q1(this,"updateOne"),Jz(this,"updateOne",A,B,D)};v.replaceOne=function F(A,B,D){Q1(this,"replaceOne");let X=this?.schema?.options?.versionKey||null;if(X&&!B[X])B[X]=0;return Jz(this,"replaceOne",A,B,D)};function Jz(F,A,B,D,X){let Z=new F.Query({},{},F,F.collection);if(B instanceof K3)B=B.toObject();else B=e3(B);X=typeof X==="function"?X:e3(X);let J=F?.schema?.options?.versionKey||null;return Nc(D,X,J),Z[A](B,D,X)}v.aggregate=function F(A,B){if(Q1(this,"aggregate"),typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.aggregate() no longer accepts a callback");let D=new DU1(A||[]);if(D.model(this),B!=null)D.option(B);return D};v.validate=async function F(A,B,D){if(arguments.length<3||arguments.length===3&&typeof arguments[2]==="function")D=A;if(typeof D==="function"||typeof arguments[3]==="function")throw new W1("Model.validate() no longer accepts a callback");let X=this.schema,Z=X.options.discriminatorKey;if(X.discriminators!=null&&A!=null&&A[Z]!=null)X=Mc(X,A[Z])||X;let J=Object.keys(X.paths);if(B!=null){let G=typeof B==="string"?new Set(B.split(" ")):Array.isArray(B)?new Set(B):new Set(J);J=J.filter((E)=>{if(B.pathsToSkip){if(Array.isArray(B.pathsToSkip)){if(B.pathsToSkip.find((H)=>H==E))return!1}else if(typeof B.pathsToSkip=="string"){if(B.pathsToSkip.includes(E))return!1}}let C=E.split("."),W=C[0];for(let H of C){if(G.has(W))return!0;W+="."+H}return G.has(E)})}for(let G of J){let E=X.path(G);if(!E?.$isMongooseArray||E.$isMongooseDocumentArray)continue;let C=zA(A,G);Tc(J,C,G)}let Y=null;J=new Set(J);try{A=this.castObject(A)}catch(G){Y=G;for(let E of Object.keys(Y.errors||{}))J.delete(E)}let $=[];for(let G of J){let E=X.path(G);if(E==null)continue;let C=G.indexOf(".")===-1?[G]:G.split("."),W=A;for(let q=0;q<C.length-1;++q)W=W[C[q]];let H=zA(A,G,void 0);$.push(E.doValidate(H,D,{path:G}).catch((q)=>{Y=Y||new zZ,Y.addError(G,q)}))}if(await Promise.all($),Y!=null)throw Y;return A};v.populate=async function F(A,B){if(Q1(this,"populate"),typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.populate() no longer accepts a callback");if(B=y1.populate(B),B.length===0)return A;if(B.find((D)=>D.ordered))for(let D of B)await Kc(this,A,D);else{let D=[];for(let X of B)D.push(Kc(this,A,X));await Promise.all(D)}return A};/*!
 * Populates `docs` for a single `populateOptions` instance.
 */var iU1=/\s?-_id\s?/,nU1=/\s?-_id\s?/g;async function Kc(F,A,B){if(B.strictPopulate==null){if(B._localModel?.schema._userProvidedOptions.strictPopulate!=null)B.strictPopulate=B._localModel.schema._userProvidedOptions.strictPopulate;else if(B._localModel!=null&&F.base.options.strictPopulate!=null)B.strictPopulate=F.base.options.strictPopulate;else if(F.base.options.strictPopulate!=null)B.strictPopulate=F.base.options.strictPopulate}if(!Array.isArray(A))A=[A];if(A.length===0||A.every(y1.isNullOrUndefined))return;let D=PU1(F,A,B);if(D instanceof W1)throw D;let X=D.length,Z=[];function J(G){return G!==void 0}let Y=!1,$=[];for(let G=0;G<X;++G){let E=D[G],C=E.options.select,W=y1.array.flatten(E.ids,J);W=y1.array.unique(W);let H={};if(H.sort=E&&E.options&&E.options.options&&E.options.options.sort||void 0,H.excludeId=iU1.test(C)||C&&C._id===0,E.options&&E.options.options&&E.options.options.lean&&E.options.options.lean.transform)E.options.options._leanTransform=E.options.options.lean.transform,E.options.options.lean=!0;if(W.length===0||W.every(y1.isNullOrUndefined)){Vc(F,[],E,H);continue}if(Y=!0,typeof B.foreignField==="string")E.foreignField.clear(),E.foreignField.add(B.foreignField);let q=LU1(W,E.match,E.foreignField,E.model,E.options.skipInvalidIds);if(H.excludeId)if(typeof C==="string")C=C.replace(nU1," ");else if(Array.isArray(C))C=C.filter((Q)=>Q!=="-_id");else C={...C},delete C._id;if(E.options.options?.limit!=null)H.originalLimit=E.options.options.limit;else if(E.options.limit!=null)H.originalLimit=E.options.limit;$.push([E,q,C,H])}if(!Y){if(D.length!==0)return;if(B.populate!=null){let G=y1.populate(B.populate).map((E)=>Object.assign({},E,{path:B.path+"."+E.path}));return F.populate(A,G)}return}if(B.ordered)for(let G of $)await Uc.apply(null,G).then((E)=>{Z=Z.concat(E)});else{let G=[];for(let E of $)G.push(Uc.apply(null,E).then((C)=>{Z=Z.concat(C)}));await Promise.all(G)}for(let G of $){let E=G[0],C=G[3];for(let W of Z)E.options._childDocs.push(W);Vc(F,Z,E,C)}for(let G of $)SU1(G[0].foreignField,G[0].options,Z);for(let G of $){let E=G[0];if(E.options?.options?._leanTransform)for(let C of Z)E.options.options._leanTransform(C)}}/*!
 * ignore
 */function Uc(F,A,B){let D=e3(F.options.populate),X={};if(F.options.skip!==void 0)X.skip=F.options.skip;if(F.options.limit!==void 0)X.limit=F.options.limit;if(F.options.perDocumentLimit!==void 0)X.perDocumentLimit=F.options.perDocumentLimit;if(Object.assign(X,F.options.options),F.count)delete X.skip;if(X.perDocumentLimit!=null)X.limit=X.perDocumentLimit,delete X.perDocumentLimit;else if(X.limit!=null)X.limit=X.limit*F.ids.length;let Z=F.model.find(A,B,X);for(let J of F.foreignField)if(J!=="_id"&&Z.selectedInclusively()&&!TU1(Z._fields,J))Z.select(J);if(F.count)for(let J of F.foreignField)Z.select(J);if(D){if(F.model.baseModelName!=null)if(Array.isArray(D))D.forEach((Y)=>{Y.strictPopulate=!1});else if(typeof D==="string")D={path:D,strictPopulate:!1};else D.strictPopulate=!1;let J=F.options._fullPath||F.options.path;if(Array.isArray(D))for(let Y of D)Y._fullPath=J+"."+Y.path;else if(typeof D==="object")D._fullPath=J+"."+D.path;Z.populate(D)}return Z.exec().then((J)=>{for(let Y of J)kU1.set(Y,F.model);return J})}/*!
 * ignore
 */function Vc(F,A,B,D){let{options:X,isVirtual:Z,justOne:J}=B,Y,$=X&&X.options&&X.options.lean||!1,G=A.length,E={},C={},W,H,q=e3(B.allIds);for(let Q=0;Q<G;Q++){if(H=A[Q],H==null)continue;for(let K of B.foreignField){if(Y=y1.getValue(K,H),Array.isArray(Y)){Y=y1.array.unique(y1.array.flatten(Y));for(let U of Y){if(U instanceof K3)U=U._doc._id;if(W=String(U),C[W])if(Array.isArray(C[W]))C[W].push(H),E[W].push(Q);else C[W]=[C[W],H],E[W]=[E[W],Q];else if(Z&&!J)C[W]=[H],E[W]=[Q];else C[W]=H,E[W]=Q}}else{if(Y instanceof K3)Y=Y._doc._id;if(W=String(Y),C[W]){if(Array.isArray(C[W]))C[W].push(H),E[W].push(Q);else if(Z||C[W].constructor!==H.constructor||(C[W]instanceof K3?String(C[W]._doc._id):String(C[W]._id))!==(H instanceof K3?String(H._doc._id):String(H._id)))C[W]=[C[W],H],E[W]=[E[W],Q]}else C[W]=H,E[W]=Q}if(!$)H.$__.wasPopulated=H.$__.wasPopulated||{value:Y}}}UU1({originalModel:F,rawIds:B.isVirtual?q:B.allIds,allIds:q,unpopulatedValues:B.unpopulatedValues,foreignField:B.foreignField,rawDocs:C,rawOrder:E,docs:B.docs,path:X.path,options:D,justOne:B.justOne,isVirtual:B.isVirtual,allOptions:B,populatedModel:B.model,lean:$,virtual:B.virtual,count:B.count,match:B.match})}v.compile=function F(A,B,D,X,Z){if(B.options.versionKey!==!1&&!B.paths[B.options.versionKey]){let C={};C[B.options.versionKey]=Number,B.add(C)}let Y;if(typeof A==="function"&&A.prototype instanceof v)Y=A,A=Y.name,B.loadClass(Y,!1),Y.prototype.$isMongooseModelPrototype=!0;else Y=function C(W,H,q){if(C.hooks.execPreSync("createModel",W),!(this instanceof C))return new C(W,H,q);let Q=C.schema.options.discriminatorKey;if(C.discriminators==null||W==null||W[Q]==null){v.call(this,W,H,q);return}let K=C.discriminators[W[Q]]||WA(C.discriminators,W[Q]);if(K!=null)return new K(W,H,q);v.call(this,W,H,q)};if(Y.hooks=B.s.hooks.clone(),Y.base=Z,Y.modelName=A,!(Y.prototype instanceof v))Object.setPrototypeOf(Y,v),Object.setPrototypeOf(Y.prototype,v.prototype);Y.model=function C(W){return this.db.model(W)},Y.db=X,Y.prototype.db=X,Y.prototype[p9]=X,Y.discriminators=Y.prototype.discriminators=void 0,Y[kc]=!0,Y.events=new Fz,B._preCompile();let G={schemaUserProvidedOptions:B._userProvidedOptions||{},capped:B.options.capped,Promise:Y.base.Promise,modelName:A};if(B.options.autoCreate!==void 0)G.autoCreate=B.options.autoCreate;let E=X.collection(D,G);return Y.prototype.collection=E,Y.prototype.$collection=E,Y.prototype[l9]=E,Y.prototype.$__setSchema(B),wc(Y,B),Ic(Y,B),WU1(Y,B),zU1(Y,B.s.hooks,B.statics),Y.schema=Y.prototype.$__schema,Y.collection=E,Y.$__collection=E,Y.Query=function(){qZ.apply(this,arguments)},Object.setPrototypeOf(Y.Query.prototype,qZ.prototype),Y.Query.base=qZ.base,Y.Query.prototype.constructor=qZ,Y._applyQueryMiddleware(),aU1(Y,B.query),Y};v.clientEncryption=function F(){let A=this.base.driver.get().ClientEncryption;if(!A)throw new Error("The mongodb driver must be used to obtain a ClientEncryption object.");let B=this.collection?.conn?.client;if(!B)return null;let D=B.options.autoEncryption;if(!D)return null;let{keyVaultNamespace:X,keyVaultClient:Z,kmsProviders:J,credentialProviders:Y,proxyOptions:$,tlsOptions:G}=D;return new A(Z??B,{keyVaultNamespace:X,kmsProviders:J,credentialProviders:Y,proxyOptions:$,tlsOptions:G})};v.$__updateConnection=function F(A){this.db=A,this.prototype.db=A,this.prototype[p9]=A;let B=A.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=B,this.prototype.$collection=B,this.prototype[l9]=B,this.collection=B,this.$__collection=B};function aU1(F,A){for(let B in A)F.Query.prototype[B]=A[B]}v.__subclass=function F(A,B,D){let X=this,Z=function E(C,W,H){if(!(this instanceof E))return new E(C,W,H);X.call(this,C,W,H)};if(Object.setPrototypeOf(Z,X),Object.setPrototypeOf(Z.prototype,X.prototype),Z.db=A,Z.prototype.db=A,Z.prototype[p9]=A,X[HA]=X[HA]||[],X[HA].push(Z),X.discriminators!=null){Z.discriminators={};for(let E of Object.keys(X.discriminators))Z.discriminators[E]=X.discriminators[E].__subclass(X.db,X.discriminators[E].schema,D)}let J=B&&typeof B!=="string"?B:X.prototype.$__schema,Y=J.options||{},$=J._userProvidedOptions||{};if(!D)D=X.prototype.$__schema.get("collection")||y1.toCollectionName(X.modelName,this.base.pluralize());let G={schemaUserProvidedOptions:$,capped:J&&Y.capped};return Z.prototype.collection=A.collection(D,G),Z.prototype.$collection=Z.prototype.collection,Z.prototype[l9]=Z.prototype.collection,Z.collection=Z.prototype.collection,Z.$__collection=Z.collection,Z.init().catch(()=>{}),Z};v.recompileSchema=function F(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let A of this.schema._applyDiscriminators.keys())this.discriminator(A,this.schema._applyDiscriminators.get(A));delete this.schema._defaultToObjectOptionsMap,CU1(this.schema,new WeakSet,!0)};v.inspect=function(){return`Model { ${this.modelName} }`};v.namespace=function F(){return this.db.name+"."+this.collection.collectionName};if(qc.inspect.custom)v[qc.inspect.custom]=v.inspect;/*!
 * Applies query middleware from this model's schema to this model's
 * Query constructor.
 */v._applyQueryMiddleware=function F(){let A=this.Query,B=this.schema.s.hooks.filter((D)=>{let X=sU1(D);if(D.name==="validate")return!!X.query;if(D.name==="deleteOne"||D.name==="updateOne")return!!X.query||y1.hasOwnKeys(X)===!1;if(D.query!=null||D.document!=null)return!!D.query;return!0});A.prototype._queryMiddleware=B};function sU1(F){let A={};if(Object.hasOwn(F,"query"))A.query=F.query;if(Object.hasOwn(F,"document"))A.document=F.document;return A}/*!
 * Module exports.
 */Oc.exports=uc=v});var xc=z((QA,Sc)=>{Sc.exports=oU1;QA.pluralization=[[/human$/gi,"humans"],[/(m|wom)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|cact|foc|fung|nucle)us$/gi,"$1i"],[/(alias|status|virus)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var rU1=QA.pluralization;QA.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var tU1=QA.uncountables;function oU1(F){let A;if(F=F.toLowerCase(),!~tU1.indexOf(F)){if(A=rU1.filter(function(B){return F.match(B[0])}),A[0])return F.replace(A[0][0],A[0][1])}return F}});var hc=z((PO1,yc)=>{/*!
 * Module requirements
 */var gc=K1(),_c=m("util"),fc=GC();class h4 extends gc{constructor(){super("");this.errors={}}toString(){return fc(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(F,A){if(A instanceof h4){let{errors:B}=A;for(let D of Object.keys(B))this.addError(D,B[D]);return}this.errors[F]=A,this.message=fc(this)}}if(_c.inspect.custom)h4.prototype[_c.inspect.custom]=h4.prototype.inspect;Object.defineProperty(h4.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(h4.prototype,"name",{value:"SetOptionError"});class bc extends gc{constructor(F){super(`"${F}" is not a valid option to set`)}}h4.SetOptionInnerError=bc;/*!
 * Module exports
 */yc.exports=h4});var mc=z(()=>{var vc=B1();if(typeof jest!=="undefined"&&!process.env.SUPPRESS_JEST_WARNINGS){if(typeof window!=="undefined")vc.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.");if(typeof setTimeout.clock?.Date==="function")vc.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.")}});var rc=z((ac,sc)=>{/*!
 * Module dependencies.
 */var eU1=H3(),FV1=m("events").EventEmitter,Yz=P9(),F4=S9(),AV1=Q0(),KA=gF(),BV1=XX(),VZ=K5(),dc=Av(),DV1=K8(),XV1=FZ(),cc=hq(),ZV1=bH(),JV1=DH(),lc=hX(),YV1=xc(),LZ=B1(),$V1=Xq(),GV1=f9(),EV1=_q(),CV1=B8().trusted,WV1=Nq(),HV1=D2(),b8=K1(),UZ=hc(),qV1=bq(),pc=Symbol.for("mongoose:default"),ic=Symbol("mongoose:defaultConnection");mc();var zV1=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:nc}=m("async_hooks");function a(F){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new FV1,this.__driver=lc.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},F),(LZ.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null)$z(this);if(this.options.pluralization)this._pluralize=YV1;if(!F?.[pc]){let B=this;this.Schema=function(){return this.base=B,F4.apply(this,arguments)},this.Schema.prototype=Object.create(F4.prototype),Object.assign(this.Schema,F4),this.Schema.base=this,this.Schema.Types=Object.assign({},F4.Types)}else for(let B of["Schema","model"])this[B]=a.prototype[B];if(this.Schema.prototype.base=this,F?.transactionAsyncLocalStorage)this.transactionAsyncLocalStorage=new nc;Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(JV1).map((B)=>[B,{deduplicate:!0}])})}a.prototype.cast=GV1;a.prototype.STATES=VZ;a.prototype.ConnectionStates=VZ;a.prototype.driver=lc;a.prototype.setDriver=function F(A){let B=this instanceof a?this:w2;if(B.__driver===A)return B;if(B.connections&&B.connections.find((J)=>J.readyState!==VZ.disconnected))throw new b8("Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver");if(B.__driver=A,Array.isArray(A.plugins)){for(let J of A.plugins)if(typeof J==="function")B.plugin(J)}if(A.SchemaTypes!=null)Object.assign(w2.Schema.Types,A.SchemaTypes);let X=A.Connection,Z=B.connections[0];if(B.connections=[new X(B)],B.connections[0].models=B.models,Z==null)return B;for(let J of Object.values(B.models)){if(J.db!==Z)continue;J.$__updateConnection(B.connections[0])}return B};a.prototype.set=function F(A,B){let D=this instanceof a?this:w2;if(arguments.length===1&&typeof A!=="object"){if(dc.indexOf(A)===-1){let J=new UZ;throw J.addError(A,new UZ.SetOptionInnerError(A)),J}return D.options[A]}let X={};if(arguments.length===2)X={[A]:B};if(arguments.length===1&&typeof A==="object")X=A;let Z=void 0;for(let[J,Y]of Object.entries(X)){if(dc.indexOf(J)===-1){if(!Z)Z=new UZ;Z.addError(J,new UZ.SetOptionInnerError(J));continue}if(D.options[J]=Y,J==="objectIdGetter")if(Y)Object.defineProperty(D.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});else delete D.Types.ObjectId.prototype._id;else if(J==="transactionAsyncLocalStorage"){if(Y&&!D.transactionAsyncLocalStorage)D.transactionAsyncLocalStorage=new nc;else if(!Y&&D.transactionAsyncLocalStorage)delete D.transactionAsyncLocalStorage}else if(J==="createInitialConnection"){if(Y&&!D.connection)$z(D);else if(Y===!1&&D.connection?.[ic]){if(D.connection.readyState===VZ.disconnected&&LZ.hasOwnKeys(D.connection.models)===!1)D.connections.shift()}}}if(Z)throw Z;return D};a.prototype.get=a.prototype.set;a.prototype.createConnection=function F(A,B){let D=this instanceof a?this:w2,Z=new D.__driver.Connection(D);if(D.connections.push(Z),D.nextConnectionId++,D.events.emit("createConnection",Z),arguments.length>0)Z.openUri(A,{...B,_fireAndForget:!0});return Z};a.prototype.connect=async function F(A,B){if(typeof B==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new b8("Mongoose.prototype.connect() no longer accepts a callback");let D=this instanceof a?this:w2;if(D.connection==null)$z(D);return D.connection.openUri(A,B).then(()=>D)};a.prototype.disconnect=async function F(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new b8("Mongoose.prototype.disconnect() no longer accepts a callback");let A=this instanceof a?this:w2;if(A.connections.length<=0)return;await Promise.all(A.connections.map((D)=>D.close()))};a.prototype.startSession=function F(){let A=this instanceof a?this:w2;return A.connection.startSession.apply(A.connection,arguments)};a.prototype.pluralize=function F(A){let B=this instanceof a?this:w2;if(arguments.length>0)B._pluralize=A;return B._pluralize};a.prototype.model=function F(A,B,D,X){let Z=this instanceof a?this:w2;if(typeof B==="string")D=B,B=!1;if(arguments.length===1){let G=Z.models[A];if(!G)throw new Z.Error.MissingSchemaError(A);return G}if(LZ.isObject(B)&&!(B instanceof F4))B=new F4(B);if(B&&!(B instanceof F4))throw new Z.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");X=X||{};let J=B;if(B){if(Z.get("cloneSchemas"))B=B.clone();Z._applyPlugins(B)}let Y=Object.hasOwn(Z.options,"overwriteModels")?Z.options.overwriteModels:X.overwriteModels;if(Object.hasOwn(Z.models,A)&&X.cache!==!1&&Y!==!0){if(J?.instanceOfSchema&&J!==Z.models[A].schema)throw new Z.Error.OverwriteModelError(A);if(D&&D!==Z.models[A].collection.name){let G=Z.models[A];return B=G.prototype.schema,G.__subclass(Z.connection,B,D)}return Z.models[A]}if(B==null)throw new Z.Error.MissingSchemaError(A);let $=Z._model(A,B,D,X);return Z.connection.models[A]=$,Z.models[A]=$,$};/*!
 * ignore
 */a.prototype._model=function F(A,B,D,X){let Z=this instanceof a?this:w2,J;if(typeof A==="function"){if(J=A,A=J.name,!(J.prototype instanceof cc))throw new Z.Error("The provided class "+A+" must extend Model")}if(B){if(Z.get("cloneSchemas"))B=B.clone();Z._applyPlugins(B)}if(B==null||!("pluralization"in B.options))B.options.pluralization=Z.options.pluralization;if(!D)D=B.get("collection")||LZ.toCollectionName(A,Z.pluralize());qV1(B);let Y=X.connection||Z.connection;if(J=Z.Model.compile(J||A,B,D,Y,Z),J.init().catch(function $(){}),Y.emit("model",J),B._applyDiscriminators!=null)for(let $ of B._applyDiscriminators.keys()){let{schema:G,options:E}=B._applyDiscriminators.get($);J.discriminator($,G,E)}return J};a.prototype.deleteModel=function F(A){let B=this instanceof a?this:w2;return B.connection.deleteModel(A),delete B.models[A],B};a.prototype.modelNames=function F(){let A=this instanceof a?this:w2;return Object.keys(A.models)};a.prototype._applyPlugins=function F(A,B){let D=this instanceof a?this:w2;B=B||{},B.applyPluginsToDiscriminators=D.options?.applyPluginsToDiscriminators||!1,B.applyPluginsToChildSchemas=typeof D.options?.applyPluginsToChildSchemas==="boolean"?D.options.applyPluginsToChildSchemas:!0,ZV1(A,D.plugins,B,"$globalPluginsApplied")};a.prototype.plugin=function F(A,B){let D=this instanceof a?this:w2;return D.plugins.push([A,B]),D};a.prototype.__defineGetter__("connection",function(){return this.connections[0]});a.prototype.__defineSetter__("connection",function(F){if(F instanceof this.__driver.Connection)this.connections[0]=F,this.models=F.models});a.prototype.connections;a.prototype.nextConnectionId;a.prototype.Aggregate=EV1;a.prototype.BaseCollection=YY();Object.defineProperty(a.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(F){this.__driver.Collection=F}});Object.defineProperty(a.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(F){if(F===this.__driver.Connection)return;this.__driver.Connection=F}});a.prototype.BaseConnection=Dq();a.prototype.version=$V1.version;a.prototype.Mongoose=a;a.prototype.Schema=F4;a.prototype.SchemaType=AV1;a.prototype.SchemaTypes=F4.Types;a.prototype.VirtualType=BV1;a.prototype.Types=DV1;a.prototype.Query=XV1;a.prototype.Model=cc;a.prototype.Document=eU1;a.prototype.ObjectId=KA.ObjectId;a.prototype.isValidObjectId=function F(A){return(this instanceof a?this:w2).Types.ObjectId.isValid(A)};a.prototype.isObjectIdOrHexString=function F(A){return HV1(A,"ObjectId")||typeof A==="string"&&zV1.test(A)};a.prototype.syncIndexes=function F(A){return(this instanceof a?this:w2).connection.syncIndexes(A)};a.prototype.Decimal128=KA.Decimal128;a.prototype.Mixed=KA.Mixed;a.prototype.Date=KA.Date;a.prototype.Number=KA.Number;a.prototype.Error=b8;a.prototype.MongooseError=b8;a.prototype.now=function F(){return new Date};a.prototype.CastError=b8.CastError;a.prototype.SchemaTypeOptions=l2();a.prototype.mquery=Iq();a.prototype.sanitizeFilter=WV1;a.prototype.trusted=CV1;a.prototype.skipMiddlewareFunction=Yz.skipWrappedFunction;a.prototype.overwriteMiddlewareResult=Yz.overwriteResult;a.prototype.overwriteMiddlewareArguments=Yz.overwriteArguments;a.prototype.omitUndefined=TW();/*!
 * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
 * No-op if there is already a default connection.
 */function $z(F){if(F.connection)return;let A=F.createConnection();A[ic]=!0,A.models=F.models}var w2=sc.exports=ac=new a({[pc]:!0})});var ec=z((jO1,oc)=>{/*!
 * Module dependencies.
 */var tc=eh();hX().set(tc);var Gz=rc();Gz.setDriver(tc);Gz.Mongoose.prototype.mongo=G4();oc.exports=Gz});var Fl=z((TO1,J1)=>{var Y1=ec();J1.exports=Y1;J1.exports.default=Y1;J1.exports.mongoose=Y1;J1.exports.cast=Y1.cast;J1.exports.STATES=Y1.STATES;J1.exports.setDriver=Y1.setDriver;J1.exports.set=Y1.set;J1.exports.get=Y1.get;J1.exports.createConnection=Y1.createConnection;J1.exports.connect=Y1.connect;J1.exports.disconnect=Y1.disconnect;J1.exports.startSession=Y1.startSession;J1.exports.pluralize=Y1.pluralize;J1.exports.model=Y1.model;J1.exports.deleteModel=Y1.deleteModel;J1.exports.modelNames=Y1.modelNames;J1.exports.plugin=Y1.plugin;J1.exports.connections=Y1.connections;J1.exports.version=Y1.version;J1.exports.Aggregate=Y1.Aggregate;J1.exports.Mongoose=Y1.Mongoose;J1.exports.Schema=Y1.Schema;J1.exports.SchemaType=Y1.SchemaType;J1.exports.SchemaTypes=Y1.SchemaTypes;J1.exports.VirtualType=Y1.VirtualType;J1.exports.Types=Y1.Types;J1.exports.Query=Y1.Query;J1.exports.Model=Y1.Model;J1.exports.Document=Y1.Document;J1.exports.ObjectId=Y1.ObjectId;J1.exports.isValidObjectId=Y1.isValidObjectId;J1.exports.isObjectIdOrHexString=Y1.isObjectIdOrHexString;J1.exports.syncIndexes=Y1.syncIndexes;J1.exports.Decimal128=Y1.Decimal128;J1.exports.Mixed=Y1.Mixed;J1.exports.Date=Y1.Date;J1.exports.Number=Y1.Number;J1.exports.Error=Y1.Error;J1.exports.MongooseError=Y1.MongooseError;J1.exports.now=Y1.now;J1.exports.CastError=Y1.CastError;J1.exports.SchemaTypeOptions=Y1.SchemaTypeOptions;J1.exports.mongo=Y1.mongo;J1.exports.mquery=Y1.mquery;J1.exports.sanitizeFilter=Y1.sanitizeFilter;J1.exports.trusted=Y1.trusted;J1.exports.skipMiddlewareFunction=Y1.skipMiddlewareFunction;J1.exports.overwriteMiddlewareResult=Y1.overwriteMiddlewareResult});var wZ=(F,A,B)=>{return(D,X)=>{let Z=-1;return J(0);async function J(Y){if(Y<=Z)throw new Error("next() called multiple times");Z=Y;let $,G=!1,E;if(F[Y])E=F[Y][0][0],D.req.routeIndex=Y;else E=Y===F.length&&X||void 0;if(E)try{$=await E(D,()=>J(Y+1))}catch(C){if(C instanceof Error&&A)D.error=C,$=await A(C,D),G=!0;else throw C}else if(D.finalized===!1&&B)$=await B(D);if($&&(D.finalized===!1||G))D.res=$;return D}}};var bz=Symbol();var yz=async(F,A=Object.create(null))=>{let{all:B=!1,dot:D=!1}=A,Z=(F instanceof UA?F.raw.headers:F.headers).get("Content-Type");if(Z?.startsWith("multipart/form-data")||Z?.startsWith("application/x-www-form-urlencoded"))return Ql(F,{all:B,dot:D});return{}};async function Ql(F,A){let B=await F.formData();if(B)return Kl(B,A);return{}}function Kl(F,A){let B=Object.create(null);if(F.forEach((D,X)=>{if(!(A.all||X.endsWith("[]")))B[X]=D;else Ul(B,X,D)}),A.dot)Object.entries(B).forEach(([D,X])=>{if(D.includes("."))Vl(B,D,X),delete B[D]});return B}var Ul=(F,A,B)=>{if(F[A]!==void 0)if(Array.isArray(F[A]))F[A].push(B);else F[A]=[F[A],B];else if(!A.endsWith("[]"))F[A]=B;else F[A]=[B]},Vl=(F,A,B)=>{let D=F,X=A.split(".");X.forEach((Z,J)=>{if(J===X.length-1)D[Z]=B;else{if(!D[Z]||typeof D[Z]!=="object"||Array.isArray(D[Z])||D[Z]instanceof File)D[Z]=Object.create(null);D=D[Z]}})};var IZ=(F)=>{let A=F.split("/");if(A[0]==="")A.shift();return A},hz=(F)=>{let{groups:A,path:B}=Ll(F),D=IZ(B);return wl(D,A)},Ll=(F)=>{let A=[];return F=F.replace(/\{[^}]+\}/g,(B,D)=>{let X=`@${D}`;return A.push([X,B]),X}),{groups:A,path:F}},wl=(F,A)=>{for(let B=A.length-1;B>=0;B--){let[D]=A[B];for(let X=F.length-1;X>=0;X--)if(F[X].includes(D)){F[X]=F[X].replace(D,A[B][1]);break}}return F},VA={},vz=(F,A)=>{if(F==="*")return"*";let B=F.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(B){let D=`${F}#${A}`;if(!VA[D])if(B[2])VA[D]=A&&A[0]!==":"&&A[0]!=="*"?[D,B[1],new RegExp(`^${B[2]}(?=/${A})`)]:[F,B[1],new RegExp(`^${B[2]}$`)];else VA[D]=[F,B[1],!0];return VA[D]}return null},LA=(F,A)=>{try{return A(F)}catch{return F.replace(/(?:%[0-9A-Fa-f]{2})+/g,(B)=>{try{return A(B)}catch{return B}})}},Rl=(F)=>LA(F,decodeURI),PZ=(F)=>{let A=F.url,B=A.indexOf("/",A.indexOf(":")+4),D=B;for(;D<A.length;D++){let X=A.charCodeAt(D);if(X===37){let Z=A.indexOf("?",D),J=A.slice(B,Z===-1?void 0:Z);return Rl(J.includes("%25")?J.replace(/%25/g,"%2525"):J)}else if(X===63)break}return A.slice(B,D)};var mz=(F)=>{let A=PZ(F);return A.length>1&&A.at(-1)==="/"?A.slice(0,-1):A},d4=(F,A,...B)=>{if(B.length)A=d4(A,...B);return`${F?.[0]==="/"?"":"/"}${F}${A==="/"?"":`${F?.at(-1)==="/"?"":"/"}${A?.[0]==="/"?A.slice(1):A}`}`},wA=(F)=>{if(F.charCodeAt(F.length-1)!==63||!F.includes(":"))return null;let A=F.split("/"),B=[],D="";return A.forEach((X)=>{if(X!==""&&!/\:/.test(X))D+="/"+X;else if(/\:/.test(X))if(/\?/.test(X)){if(B.length===0&&D==="")B.push("/");else B.push(D);let Z=X.replace("?","");D+="/"+Z,B.push(D)}else D+="/"+X}),B.filter((X,Z,J)=>J.indexOf(X)===Z)},RZ=(F)=>{if(!/[%+]/.test(F))return F;if(F.indexOf("+")!==-1)F=F.replace(/\+/g," ");return F.indexOf("%")!==-1?LA(F,NZ):F},dz=(F,A,B)=>{let D;if(!B&&A&&!/[%+]/.test(A)){let J=F.indexOf("?",8);if(J===-1)return;if(!F.startsWith(A,J+1))J=F.indexOf(`&${A}`,J+1);while(J!==-1){let Y=F.charCodeAt(J+A.length+1);if(Y===61){let $=J+A.length+2,G=F.indexOf("&",$);return RZ(F.slice($,G===-1?void 0:G))}else if(Y==38||isNaN(Y))return"";J=F.indexOf(`&${A}`,J+1)}if(D=/[%+]/.test(F),!D)return}let X={};D??=/[%+]/.test(F);let Z=F.indexOf("?",8);while(Z!==-1){let J=F.indexOf("&",Z+1),Y=F.indexOf("=",Z);if(Y>J&&J!==-1)Y=-1;let $=F.slice(Z+1,Y===-1?J===-1?void 0:J:Y);if(D)$=RZ($);if(Z=J,$==="")continue;let G;if(Y===-1)G="";else if(G=F.slice(Y+1,J===-1?void 0:J),D)G=RZ(G);if(B){if(!(X[$]&&Array.isArray(X[$])))X[$]=[];X[$].push(G)}else X[$]??=G}return A?X[A]:X},cz=dz,lz=(F,A)=>{return dz(F,A,!0)},NZ=decodeURIComponent;var pz=(F)=>LA(F,NZ),UA=class{raw;#A;#F;routeIndex=0;path;bodyCache={};constructor(F,A="/",B=[[]]){this.raw=F,this.path=A,this.#F=B,this.#A={}}param(F){return F?this.#B(F):this.#Z()}#B(F){let A=this.#F[0][this.routeIndex][1][F],B=this.#X(A);return B&&/\%/.test(B)?pz(B):B}#Z(){let F={},A=Object.keys(this.#F[0][this.routeIndex][1]);for(let B of A){let D=this.#X(this.#F[0][this.routeIndex][1][B]);if(D!==void 0)F[B]=/\%/.test(D)?pz(D):D}return F}#X(F){return this.#F[1]?this.#F[1][F]:F}query(F){return cz(this.url,F)}queries(F){return lz(this.url,F)}header(F){if(F)return this.raw.headers.get(F)??void 0;let A={};return this.raw.headers.forEach((B,D)=>{A[D]=B}),A}async parseBody(F){return this.bodyCache.parsedBody??=await yz(this,F)}#D=(F)=>{let{bodyCache:A,raw:B}=this,D=A[F];if(D)return D;let X=Object.keys(A)[0];if(X)return A[X].then((Z)=>{if(X==="json")Z=JSON.stringify(Z);return new Response(Z)[F]()});return A[F]=B[F]()};json(){return this.#D("text").then((F)=>JSON.parse(F))}text(){return this.#D("text")}arrayBuffer(){return this.#D("arrayBuffer")}blob(){return this.#D("blob")}formData(){return this.#D("formData")}addValidatedData(F,A){this.#A[F]=A}valid(F){return this.#A[F]}get url(){return this.raw.url}get method(){return this.raw.method}get[bz](){return this.#F}get matchedRoutes(){return this.#F[0].map(([[,F]])=>F)}get routePath(){return this.#F[0].map(([[,F]])=>F)[this.routeIndex].path}};var iz={Stringify:1,BeforeStream:2,Stream:3},Il=(F,A)=>{let B=new String(F);return B.isEscaped=!0,B.callbacks=A,B};var MZ=async(F,A,B,D,X)=>{if(typeof F==="object"&&!(F instanceof String)){if(!(F instanceof Promise))F=F.toString();if(F instanceof Promise)F=await F}let Z=F.callbacks;if(!Z?.length)return Promise.resolve(F);if(X)X[0]+=F;else X=[F];let J=Promise.all(Z.map((Y)=>Y({phase:A,buffer:X,context:D}))).then((Y)=>Promise.all(Y.filter(Boolean).map(($)=>MZ($,A,!1,D,X))).then(()=>X[0]));if(B)return Il(await J,Z);else return J};var Pl="text/plain; charset=UTF-8",jZ=(F,A)=>{return{"Content-Type":F,...A}},nz=class{#A;#F;env={};#B;finalized=!1;error;#Z;#X;#D;#E;#$;#G;#Y;#C;#W;constructor(F,A){if(this.#A=F,A)this.#X=A.executionCtx,this.env=A.env,this.#G=A.notFoundHandler,this.#W=A.path,this.#C=A.matchResult}get req(){return this.#F??=new UA(this.#A,this.#W,this.#C),this.#F}get event(){if(this.#X&&"respondWith"in this.#X)return this.#X;else throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#X)return this.#X;else throw Error("This context has no ExecutionContext")}get res(){return this.#D||=new Response(null,{headers:this.#Y??=new Headers})}set res(F){if(this.#D&&F){F=new Response(F.body,F);for(let[A,B]of this.#D.headers.entries()){if(A==="content-type")continue;if(A==="set-cookie"){let D=this.#D.headers.getSetCookie();F.headers.delete("set-cookie");for(let X of D)F.headers.append("set-cookie",X)}else F.headers.set(A,B)}}this.#D=F,this.finalized=!0}render=(...F)=>{return this.#$??=(A)=>this.html(A),this.#$(...F)};setLayout=(F)=>this.#E=F;getLayout=()=>this.#E;setRenderer=(F)=>{this.#$=F};header=(F,A,B)=>{if(this.finalized)this.#D=new Response(this.#D.body,this.#D);let D=this.#D?this.#D.headers:this.#Y??=new Headers;if(A===void 0)D.delete(F);else if(B?.append)D.append(F,A);else D.set(F,A)};status=(F)=>{this.#Z=F};set=(F,A)=>{this.#B??=new Map,this.#B.set(F,A)};get=(F)=>{return this.#B?this.#B.get(F):void 0};get var(){if(!this.#B)return{};return Object.fromEntries(this.#B)}#J(F,A,B){let D=this.#D?new Headers(this.#D.headers):this.#Y??new Headers;if(typeof A==="object"&&"headers"in A){let Z=A.headers instanceof Headers?A.headers:new Headers(A.headers);for(let[J,Y]of Z)if(J.toLowerCase()==="set-cookie")D.append(J,Y);else D.set(J,Y)}if(B)for(let[Z,J]of Object.entries(B))if(typeof J==="string")D.set(Z,J);else{D.delete(Z);for(let Y of J)D.append(Z,Y)}let X=typeof A==="number"?A:A?.status??this.#Z;return new Response(F,{status:X,headers:D})}newResponse=(...F)=>this.#J(...F);body=(F,A,B)=>this.#J(F,A,B);text=(F,A,B)=>{return!this.#Y&&!this.#Z&&!A&&!B&&!this.finalized?new Response(F):this.#J(F,A,jZ(Pl,B))};json=(F,A,B)=>{return this.#J(JSON.stringify(F),A,jZ("application/json",B))};html=(F,A,B)=>{let D=(X)=>this.#J(X,A,jZ("text/html; charset=UTF-8",B));return typeof F==="object"?MZ(F,iz.Stringify,!1,{}).then(D):D(F)};redirect=(F,A)=>{let B=String(F);return this.header("Location",!/[^\x00-\xFF]/.test(B)?B:encodeURI(B)),this.newResponse(null,A??302)};notFound=()=>{return this.#G??=()=>new Response,this.#G(this)}};var l1="ALL",az="all",sz=["get","post","put","delete","options","patch"],RA="Can not add a route since the matcher is already built.",IA=class extends Error{};var rz="__COMPOSED_HANDLER";var Nl=(F)=>{return F.text("404 Not Found",404)},tz=(F,A)=>{if("getResponse"in F){let B=F.getResponse();return A.newResponse(B.body,B)}return console.error(F),A.text("Internal Server Error",500)},oz=class F{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#A="/";routes=[];constructor(A={}){[...sz,az].forEach((Z)=>{this[Z]=(J,...Y)=>{if(typeof J==="string")this.#A=J;else this.#Z(Z,this.#A,J);return Y.forEach(($)=>{this.#Z(Z,this.#A,$)}),this}}),this.on=(Z,J,...Y)=>{for(let $ of[J].flat()){this.#A=$;for(let G of[Z].flat())Y.map((E)=>{this.#Z(G.toUpperCase(),this.#A,E)})}return this},this.use=(Z,...J)=>{if(typeof Z==="string")this.#A=Z;else this.#A="*",J.unshift(Z);return J.forEach((Y)=>{this.#Z(l1,this.#A,Y)}),this};let{strict:D,...X}=A;Object.assign(this,X),this.getPath=D??!0?A.getPath??PZ:mz}#F(){let A=new F({router:this.router,getPath:this.getPath});return A.errorHandler=this.errorHandler,A.#B=this.#B,A.routes=this.routes,A}#B=Nl;errorHandler=tz;route(A,B){let D=this.basePath(A);return B.routes.map((X)=>{let Z;if(B.errorHandler===tz)Z=X.handler;else Z=async(J,Y)=>(await wZ([],B.errorHandler)(J,()=>X.handler(J,Y))).res,Z[rz]=X.handler;D.#Z(X.method,X.path,Z)}),this}basePath(A){let B=this.#F();return B._basePath=d4(this._basePath,A),B}onError=(A)=>{return this.errorHandler=A,this};notFound=(A)=>{return this.#B=A,this};mount(A,B,D){let X,Z;if(D)if(typeof D==="function")Z=D;else if(Z=D.optionHandler,D.replaceRequest===!1)X=($)=>$;else X=D.replaceRequest;let J=Z?($)=>{let G=Z($);return Array.isArray(G)?G:[G]}:($)=>{let G=void 0;try{G=$.executionCtx}catch{}return[$.env,G]};X||=(()=>{let $=d4(this._basePath,A),G=$==="/"?0:$.length;return(E)=>{let C=new URL(E.url);return C.pathname=C.pathname.slice(G)||"/",new Request(C,E)}})();let Y=async($,G)=>{let E=await B(X($.req.raw),...J($));if(E)return E;await G()};return this.#Z(l1,d4(A,"*"),Y),this}#Z(A,B,D){A=A.toUpperCase(),B=d4(this._basePath,B);let X={basePath:this._basePath,path:B,method:A,handler:D};this.router.add(A,B,[D,X]),this.routes.push(X)}#X(A,B){if(A instanceof Error)return this.errorHandler(A,B);throw A}#D(A,B,D,X){if(X==="HEAD")return(async()=>new Response(null,await this.#D(A,B,D,"GET")))();let Z=this.getPath(A,{env:D}),J=this.router.match(X,Z),Y=new nz(A,{path:Z,matchResult:J,env:D,executionCtx:B,notFoundHandler:this.#B});if(J[0].length===1){let G;try{G=J[0][0][0][0](Y,async()=>{Y.res=await this.#B(Y)})}catch(E){return this.#X(E,Y)}return G instanceof Promise?G.then((E)=>E||(Y.finalized?Y.res:this.#B(Y))).catch((E)=>this.#X(E,Y)):G??this.#B(Y)}let $=wZ(J[0],this.errorHandler,this.#B);return(async()=>{try{let G=await $(Y);if(!G.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return G.res}catch(G){return this.#X(G,Y)}})()}fetch=(A,...B)=>{return this.#D(A,B[1],B[0],A.method)};request=(A,B,D,X)=>{if(A instanceof Request)return this.fetch(B?new Request(A,B):A,D,X);return A=A.toString(),this.fetch(new Request(/^https?:\/\//.test(A)?A:`http://localhost${d4("/",A)}`,B),D,X)};fire=()=>{addEventListener("fetch",(A)=>{A.respondWith(this.#D(A.request,A,void 0,A.request.method))})}};var y8=[];function PA(F,A){let B=this.buildAllMatchers(),D=(X,Z)=>{let J=B[X]||B[l1],Y=J[2][Z];if(Y)return Y;let $=Z.match(J[0]);if(!$)return[[],y8];let G=$.indexOf("",1);return[J[1][G],$]};return this.match=D,D(F,A)}var NA="[^/]+",h8=".*",v8="(?:|/.*)",c4=Symbol(),Ml=new Set(".\\+*[^]$()");function jl(F,A){if(F.length===1)return A.length===1?F<A?-1:1:-1;if(A.length===1)return 1;if(F===h8||F===v8)return 1;else if(A===h8||A===v8)return-1;if(F===NA)return 1;else if(A===NA)return-1;return F.length===A.length?F<A?-1:1:A.length-F.length}var ez=class F{#A;#F;#B=Object.create(null);insert(A,B,D,X,Z){if(A.length===0){if(this.#A!==void 0)throw c4;if(Z)return;this.#A=B;return}let[J,...Y]=A,$=J==="*"?Y.length===0?["","",h8]:["","",NA]:J==="/*"?["","",v8]:J.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),G;if($){let E=$[1],C=$[2]||NA;if(E&&$[2]){if(C===".*")throw c4;if(C=C.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(C))throw c4}if(G=this.#B[C],!G){if(Object.keys(this.#B).some((W)=>W!==h8&&W!==v8))throw c4;if(Z)return;if(G=this.#B[C]=new F,E!=="")G.#F=X.varIndex++}if(!Z&&E!=="")D.push([E,G.#F])}else if(G=this.#B[J],!G){if(Object.keys(this.#B).some((E)=>E.length>1&&E!==h8&&E!==v8))throw c4;if(Z)return;G=this.#B[J]=new F}G.insert(Y,B,D,X,Z)}buildRegExpStr(){let B=Object.keys(this.#B).sort(jl).map((D)=>{let X=this.#B[D];return(typeof X.#F==="number"?`(${D})@${X.#F}`:Ml.has(D)?`\\${D}`:D)+X.buildRegExpStr()});if(typeof this.#A==="number")B.unshift(`#${this.#A}`);if(B.length===0)return"";if(B.length===1)return B[0];return"(?:"+B.join("|")+")"}};var FQ=class{#A={varIndex:0};#F=new ez;insert(F,A,B){let D=[],X=[];for(let J=0;;){let Y=!1;if(F=F.replace(/\{[^}]+\}/g,($)=>{let G=`@\\${J}`;return X[J]=[G,$],J++,Y=!0,G}),!Y)break}let Z=F.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let J=X.length-1;J>=0;J--){let[Y]=X[J];for(let $=Z.length-1;$>=0;$--)if(Z[$].indexOf(Y)!==-1){Z[$]=Z[$].replace(Y,X[J][1]);break}}return this.#F.insert(Z,A,D,this.#A,B),D}buildRegExp(){let F=this.#F.buildRegExpStr();if(F==="")return[/^$/,[],[]];let A=0,B=[],D=[];return F=F.replace(/#(\d+)|@(\d+)|\.\*\$/g,(X,Z,J)=>{if(Z!==void 0)return B[++A]=Number(Z),"$()";if(J!==void 0)return D[Number(J)]=++A,"";return""}),[new RegExp(`^${F}`),B,D]}};var Tl=[/^$/,[],Object.create(null)],AQ=Object.create(null);function BQ(F){return AQ[F]??=new RegExp(F==="*"?"":`^${F.replace(/\/\*$|([.\\+*[^\]$()])/g,(A,B)=>B?`\\${B}`:"(?:|/.*)")}$`)}function kl(){AQ=Object.create(null)}function ul(F){let A=new FQ,B=[];if(F.length===0)return Tl;let D=F.map((G)=>[!/\*|\/:/.test(G[0]),...G]).sort(([G,E],[C,W])=>G?1:C?-1:E.length-W.length),X=Object.create(null);for(let G=0,E=-1,C=D.length;G<C;G++){let[W,H,q]=D[G];if(W)X[H]=[q.map(([K])=>[K,Object.create(null)]),y8];else E++;let Q;try{Q=A.insert(H,E,W)}catch(K){throw K===c4?new IA(H):K}if(W)continue;B[E]=q.map(([K,U])=>{let R=Object.create(null);U-=1;for(;U>=0;U--){let[w,V]=Q[U];R[w]=V}return[K,R]})}let[Z,J,Y]=A.buildRegExp();for(let G=0,E=B.length;G<E;G++)for(let C=0,W=B[G].length;C<W;C++){let H=B[G][C]?.[1];if(!H)continue;let q=Object.keys(H);for(let Q=0,K=q.length;Q<K;Q++)H[q[Q]]=Y[H[q[Q]]]}let $=[];for(let G in J)$[G]=B[J[G]];return[Z,$,X]}function i9(F,A){if(!F)return;for(let B of Object.keys(F).sort((D,X)=>X.length-D.length))if(BQ(B).test(A))return[...F[B]];return}var MA=class{name="RegExpRouter";#A;#F;constructor(){this.#A={[l1]:Object.create(null)},this.#F={[l1]:Object.create(null)}}add(F,A,B){let D=this.#A,X=this.#F;if(!D||!X)throw new Error(RA);if(!D[F])[D,X].forEach((Y)=>{Y[F]=Object.create(null),Object.keys(Y[l1]).forEach(($)=>{Y[F][$]=[...Y[l1][$]]})});if(A==="/*")A="*";let Z=(A.match(/\/:/g)||[]).length;if(/\*$/.test(A)){let Y=BQ(A);if(F===l1)Object.keys(D).forEach(($)=>{D[$][A]||=i9(D[$],A)||i9(D[l1],A)||[]});else D[F][A]||=i9(D[F],A)||i9(D[l1],A)||[];Object.keys(D).forEach(($)=>{if(F===l1||F===$)Object.keys(D[$]).forEach((G)=>{Y.test(G)&&D[$][G].push([B,Z])})}),Object.keys(X).forEach(($)=>{if(F===l1||F===$)Object.keys(X[$]).forEach((G)=>Y.test(G)&&X[$][G].push([B,Z]))});return}let J=wA(A)||[A];for(let Y=0,$=J.length;Y<$;Y++){let G=J[Y];Object.keys(X).forEach((E)=>{if(F===l1||F===E)X[E][G]||=[...i9(D[E],G)||i9(D[l1],G)||[]],X[E][G].push([B,Z-$+Y+1])})}}match=PA;buildAllMatchers(){let F=Object.create(null);return Object.keys(this.#F).concat(Object.keys(this.#A)).forEach((A)=>{F[A]||=this.#B(A)}),this.#A=this.#F=void 0,kl(),F}#B(F){let A=[],B=F===l1;if([this.#A,this.#F].forEach((D)=>{let X=D[F]?Object.keys(D[F]).map((Z)=>[Z,D[F][Z]]):[];if(X.length!==0)B||=!0,A.push(...X);else if(F!==l1)A.push(...Object.keys(D[l1]).map((Z)=>[Z,D[l1][Z]]))}),!B)return null;else return ul(A)}};var Ol=class{name="PreparedRegExpRouter";#A;#F;constructor(F,A){this.#A=F,this.#F=A}#B(F,A){let B=this.#A[F];B[1].forEach((D)=>D&&D.push(A)),Object.values(B[2]).forEach((D)=>D[0].push(A))}#Z(F,A,B,D,X){let Z=this.#A[F];if(!X)Z[2][A][0].push([B,{}]);else D.forEach((J)=>{if(typeof J==="number")Z[1][J].push([B,X]);else Z[2][J||A][0].push([B,X])})}add(F,A,B){if(!this.#A[F]){let X=this.#A[l1],Z={};for(let J in X[2])Z[J]=[X[2][J][0].slice(),y8];this.#A[F]=[X[0],X[1].map((J)=>Array.isArray(J)?J.slice():0),Z]}if(A==="/*"||A==="*"){let X=[B,{}];if(F===l1)for(let Z in this.#A)this.#B(Z,X);else this.#B(F,X);return}let D=this.#F[A];if(!D)throw new Error(`Path ${A} is not registered`);for(let[X,Z]of D)if(F===l1)for(let J in this.#A)this.#Z(J,A,B,X,Z);else this.#Z(F,A,B,X,Z)}buildAllMatchers(){return this.#A}match=PA};var TZ=class{name="SmartRouter";#A=[];#F=[];constructor(F){this.#A=F.routers}add(F,A,B){if(!this.#F)throw new Error(RA);this.#F.push([F,A,B])}match(F,A){if(!this.#F)throw new Error("Fatal error");let B=this.#A,D=this.#F,X=B.length,Z=0,J;for(;Z<X;Z++){let Y=B[Z];try{for(let $=0,G=D.length;$<G;$++)Y.add(...D[$]);J=Y.match(F,A)}catch($){if($ instanceof IA)continue;throw $}this.match=Y.match.bind(Y),this.#A=[Y],this.#F=void 0;break}if(Z===X)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,J}get activeRouter(){if(this.#F||this.#A.length!==1)throw new Error("No active router has been determined yet.");return this.#A[0]}};var m8=Object.create(null),DQ=class F{#A;#F;#B;#Z=0;#X=m8;constructor(A,B,D){if(this.#F=D||Object.create(null),this.#A=[],A&&B){let X=Object.create(null);X[A]={handler:B,possibleKeys:[],score:0},this.#A=[X]}this.#B=[]}insert(A,B,D){this.#Z=++this.#Z;let X=this,Z=hz(B),J=[];for(let Y=0,$=Z.length;Y<$;Y++){let G=Z[Y],E=Z[Y+1],C=vz(G,E),W=Array.isArray(C)?C[0]:G;if(W in X.#F){if(X=X.#F[W],C)J.push(C[1]);continue}if(X.#F[W]=new F,C)X.#B.push(C),J.push(C[1]);X=X.#F[W]}return X.#A.push({[A]:{handler:D,possibleKeys:J.filter((Y,$,G)=>G.indexOf(Y)===$),score:this.#Z}}),X}#D(A,B,D,X){let Z=[];for(let J=0,Y=A.#A.length;J<Y;J++){let $=A.#A[J],G=$[B]||$[l1],E={};if(G!==void 0){if(G.params=Object.create(null),Z.push(G),D!==m8||X&&X!==m8)for(let C=0,W=G.possibleKeys.length;C<W;C++){let H=G.possibleKeys[C],q=E[G.score];G.params[H]=X?.[H]&&!q?X[H]:D[H]??X?.[H],E[G.score]=!0}}}return Z}search(A,B){let D=[];this.#X=m8;let Z=[this],J=IZ(B),Y=[];for(let $=0,G=J.length;$<G;$++){let E=J[$],C=$===G-1,W=[];for(let H=0,q=Z.length;H<q;H++){let Q=Z[H],K=Q.#F[E];if(K)if(K.#X=Q.#X,C){if(K.#F["*"])D.push(...this.#D(K.#F["*"],A,Q.#X));D.push(...this.#D(K,A,Q.#X))}else W.push(K);for(let U=0,R=Q.#B.length;U<R;U++){let w=Q.#B[U],V=Q.#X===m8?{}:{...Q.#X};if(w==="*"){let k=Q.#F["*"];if(k)D.push(...this.#D(k,A,Q.#X)),k.#X=V,W.push(k);continue}let[N,T,P]=w;if(!E&&!(P instanceof RegExp))continue;let u=Q.#F[N],O=J.slice($).join("/");if(P instanceof RegExp){let k=P.exec(O);if(k){if(V[T]=k[0],D.push(...this.#D(u,A,Q.#X,V)),Object.keys(u.#F).length){u.#X=V;let d=k[0].match(/\//)?.length??0;(Y[d]||=[]).push(u)}continue}}if(P===!0||P.test(E))if(V[T]=E,C){if(D.push(...this.#D(u,A,V,Q.#X)),u.#F["*"])D.push(...this.#D(u.#F["*"],A,V,Q.#X))}else u.#X=V,W.push(u)}}Z=W.concat(Y.shift()??[])}if(D.length>1)D.sort(($,G)=>{return $.score-G.score});return[D.map(({handler:$,params:G})=>[$,G])]}};var kZ=class{name="TrieRouter";#A;constructor(){this.#A=new DQ}add(F,A,B){let D=wA(A);if(D){for(let X=0,Z=D.length;X<Z;X++)this.#A.insert(F,D[X],B);return}this.#A.insert(F,A,B)}match(F,A){return this.#A.search(F,A)}};var uZ=class extends oz{constructor(F={}){super(F);this.router=F.router??new TZ({routers:[new MA,new kZ]})}};import{createServer as Sl}from"http";import{Http2ServerRequest as xl}from"http2";import{Http2ServerRequest as OZ}from"http2";import{Readable as XQ}from"stream";import pl from"crypto";var l4=class extends Error{constructor(F,A){super(F,A);this.name="RequestError"}},_l=(F)=>{if(F instanceof l4)return F;return new l4(F.message,{cause:F})},fl=global.Request,d8=class extends fl{constructor(F,A){if(typeof F==="object"&&s9 in F)F=F[s9]();if(typeof A?.body?.getReader!=="undefined")A.duplex??="half";super(F,A)}},gl=(F)=>{let A=[],B=F.rawHeaders;for(let D=0;D<B.length;D+=2){let{[D]:X,[D+1]:Z}=B;if(X.charCodeAt(0)!==58)A.push([X,Z])}return new Headers(A)},JQ=Symbol("wrapBodyStream"),bl=(F,A,B,D,X)=>{let Z={method:F,headers:B,signal:X.signal};if(F==="TRACE"){Z.method="GET";let J=new d8(A,Z);return Object.defineProperty(J,"method",{get(){return"TRACE"}}),J}if(!(F==="GET"||F==="HEAD"))if("rawBody"in D&&D.rawBody instanceof Buffer)Z.body=new ReadableStream({start(J){J.enqueue(D.rawBody),J.close()}});else if(D[JQ]){let J;Z.body=new ReadableStream({async pull(Y){try{J||=XQ.toWeb(D).getReader();let{done:$,value:G}=await J.read();if($)Y.close();else Y.enqueue(G)}catch($){Y.error($)}}})}else Z.body=XQ.toWeb(D);return new d8(A,Z)},s9=Symbol("getRequestCache"),yl=Symbol("requestCache"),jA=Symbol("incomingKey"),TA=Symbol("urlKey"),hl=Symbol("headersKey"),a9=Symbol("abortControllerKey"),vl=Symbol("getAbortController"),kA={get method(){return this[jA].method||"GET"},get url(){return this[TA]},get headers(){return this[hl]||=gl(this[jA])},[vl](){return this[s9](),this[a9]},[s9](){return this[a9]||=new AbortController,this[yl]||=bl(this.method,this[TA],this.headers,this[jA],this[a9])}};["body","bodyUsed","cache","credentials","destination","integrity","mode","redirect","referrer","referrerPolicy","signal","keepalive"].forEach((F)=>{Object.defineProperty(kA,F,{get(){return this[s9]()[F]}})});["arrayBuffer","blob","clone","formData","json","text"].forEach((F)=>{Object.defineProperty(kA,F,{value:function(){return this[s9]()[F]()}})});Object.setPrototypeOf(kA,d8.prototype);var ml=(F,A)=>{let B=Object.create(kA);B[jA]=F;let D=F.url||"";if(D[0]!=="/"&&(D.startsWith("http://")||D.startsWith("https://"))){if(F instanceof OZ)throw new l4("Absolute URL for :path is not allowed in HTTP/2");try{let Y=new URL(D);B[TA]=Y.href}catch(Y){throw new l4("Invalid absolute URL",{cause:Y})}return B}let X=(F instanceof OZ?F.authority:F.headers.host)||A;if(!X)throw new l4("Missing host header");let Z;if(F instanceof OZ){if(Z=F.scheme,!(Z==="http"||Z==="https"))throw new l4("Unsupported scheme")}else Z=F.socket&&F.socket.encrypted?"https":"http";let J=new URL(`${Z}://${X}${D}`);if(J.hostname.length!==X.length&&J.hostname!==X.replace(/:\d+$/,""))throw new l4("Invalid host header");return B[TA]=J.href,B},ZQ=Symbol("responseCache"),n9=Symbol("getResponseCache"),p4=Symbol("cache"),xZ=global.Response,c8=class F{#A;#F;[n9](){return delete this[p4],this[ZQ]||=new xZ(this.#A,this.#F)}constructor(A,B){let D;if(this.#A=A,B instanceof F){let X=B[ZQ];if(X){this.#F=X,this[n9]();return}else this.#F=B.#F,D=new Headers(B.#F.headers)}else this.#F=B;if(typeof A==="string"||typeof A?.getReader!=="undefined"||A instanceof Blob||A instanceof Uint8Array)D||=B?.headers||{"content-type":"text/plain; charset=UTF-8"},this[p4]=[B?.status||200,A,D]}get headers(){let A=this[p4];if(A){if(!(A[2]instanceof Headers))A[2]=new Headers(A[2]);return A[2]}return this[n9]().headers}get status(){return this[p4]?.[0]??this[n9]().status}get ok(){let A=this.status;return A>=200&&A<300}};["body","bodyUsed","redirected","statusText","trailers","type","url"].forEach((F)=>{Object.defineProperty(c8.prototype,F,{get(){return this[n9]()[F]}})});["arrayBuffer","blob","clone","formData","json","text"].forEach((F)=>{Object.defineProperty(c8.prototype,F,{value:function(){return this[n9]()[F]()}})});Object.setPrototypeOf(c8,xZ);Object.setPrototypeOf(c8.prototype,xZ.prototype);async function dl(F){return Promise.race([F,Promise.resolve().then(()=>Promise.resolve(void 0))])}function YQ(F,A,B){let D=(Y)=>{F.cancel(Y).catch(()=>{})};return A.on("close",D),A.on("error",D),(B??F.read()).then(J,X),F.closed.finally(()=>{A.off("close",D),A.off("error",D)});function X(Y){if(Y)A.destroy(Y)}function Z(){F.read().then(J,X)}function J({done:Y,value:$}){try{if(Y)A.end();else if(!A.write($))A.once("drain",Z);else return F.read().then(J,X)}catch(G){X(G)}}}function cl(F,A){if(F.locked)throw new TypeError("ReadableStream is locked.");else if(A.destroyed)return;return YQ(F.getReader(),A)}var $Q=(F)=>{let A={};if(!(F instanceof Headers))F=new Headers(F??void 0);let B=[];for(let[D,X]of F)if(D==="set-cookie")B.push(X);else A[D]=X;if(B.length>0)A["set-cookie"]=B;return A["content-type"]??="text/plain; charset=UTF-8",A},ll="x-hono-already-sent",il=global.fetch;if(typeof global.crypto==="undefined")global.crypto=pl;global.fetch=(F,A)=>{return A={compress:!1,...A},il(F,A)};var _Z=Symbol("outgoingEnded"),nl=()=>new Response(null,{status:400}),GQ=(F)=>new Response(null,{status:F instanceof Error&&(F.name==="TimeoutError"||F.constructor.name==="TimeoutError")?504:500}),SZ=(F,A)=>{let B=F instanceof Error?F:new Error("unknown error",{cause:F});if(B.code==="ERR_STREAM_PREMATURE_CLOSE")console.info("The user aborted a request.");else{if(console.error(F),!A.headersSent)A.writeHead(500,{"Content-Type":"text/plain"});A.end(`Error: ${B.message}`),A.destroy(B)}},EQ=(F)=>{if("flushHeaders"in F&&F.writable)F.flushHeaders()},CQ=async(F,A)=>{let[B,D,X]=F[p4];if(X instanceof Headers)X=$Q(X);if(typeof D==="string")X["Content-Length"]=Buffer.byteLength(D);else if(D instanceof Uint8Array)X["Content-Length"]=D.byteLength;else if(D instanceof Blob)X["Content-Length"]=D.size;if(A.writeHead(B,X),typeof D==="string"||D instanceof Uint8Array)A.end(D);else if(D instanceof Blob)A.end(new Uint8Array(await D.arrayBuffer()));else EQ(A),await cl(D,A)?.catch((Z)=>SZ(Z,A));A[_Z]?.()},al=(F)=>typeof F.then==="function",sl=async(F,A,B={})=>{if(al(F))if(B.errorHandler)try{F=await F}catch(X){let Z=await B.errorHandler(X);if(!Z)return;F=Z}else F=await F.catch(GQ);if(p4 in F)return CQ(F,A);let D=$Q(F.headers);if(F.body){let X=F.body.getReader(),Z=[],J=!1,Y=void 0;if(D["transfer-encoding"]!=="chunked"){let $=2;for(let G=0;G<$;G++){Y||=X.read();let E=await dl(Y).catch((C)=>{console.error(C),J=!0});if(!E){if(G===1){await new Promise((C)=>setTimeout(C)),$=3;continue}break}if(Y=void 0,E.value)Z.push(E.value);if(E.done){J=!0;break}}if(J&&!("content-length"in D))D["content-length"]=Z.reduce((G,E)=>G+E.length,0)}if(A.writeHead(F.status,D),Z.forEach(($)=>{A.write($)}),J)A.end();else{if(Z.length===0)EQ(A);await YQ(X,A,Y)}}else if(D[ll]);else A.writeHead(F.status,D),A.end();A[_Z]?.()},rl=(F,A={})=>{let B=A.autoCleanupIncoming??!0;if(A.overrideGlobalObjects!==!1&&global.Request!==d8)Object.defineProperty(global,"Request",{value:d8}),Object.defineProperty(global,"Response",{value:c8});return async(D,X)=>{let Z,J;try{J=ml(D,A.hostname);let Y=!B||D.method==="GET"||D.method==="HEAD";if(!Y){if(D[JQ]=!0,D.on("end",()=>{Y=!0}),D instanceof xl)X[_Z]=()=>{if(!Y)setTimeout(()=>{if(!Y)setTimeout(()=>{D.destroy(),X.destroy()})})}}if(X.on("close",()=>{if(J[a9]){if(D.errored)J[a9].abort(D.errored.toString());else if(!X.writableFinished)J[a9].abort("Client connection prematurely closed.")}if(!Y)setTimeout(()=>{if(!Y)setTimeout(()=>{D.destroy()})})}),Z=F(J,{incoming:D,outgoing:X}),p4 in Z)return CQ(Z,X)}catch(Y){if(!Z)if(A.errorHandler){if(Z=await A.errorHandler(J?Y:_l(Y)),!Z)return}else if(!J)Z=nl();else Z=GQ(Y);else return SZ(Y,X)}try{return await sl(Z,X,A)}catch(Y){return SZ(Y,X)}}},tl=(F)=>{let A=F.fetch,B=rl(A,{hostname:F.hostname,overrideGlobalObjects:F.overrideGlobalObjects,autoCleanupIncoming:F.autoCleanupIncoming});return(F.createServer||Sl)(F.serverOptions||{},B)},WQ=(F,A)=>{let B=tl(F);return B.listen(F?.port??3000,F.hostname,()=>{let D=B.address();A&&A(D)}),B};var Dl=gz(VQ(),1);var Al=gz(Fl(),1),QV1=async(F=!0)=>{try{if(process.env.MONGO_URI!==void 0){let A=await Al.connect(process.env.MONGO_URI,{minPoolSize:0,maxIdleTimeMS:1e4});return console.log("connected to databse"),null}}catch(A){console.log(A),process.exit(1)}},Bl=QV1;Dl.config();Bl();var Ez=new uZ;Ez.get("/",(F)=>{return F.text("Hello Hono!")});if(typeof Bun==="undefined")console.log("Server is running on port 5444"),WQ({fetch:Ez.fetch,port:5444});var xO1={port:5444,fetch:Ez.fetch};export{xO1 as default};
