import{createRequire as Fl}from"node:module";var sc=Object.create;var{getPrototypeOf:rc,defineProperty:Tz,getOwnPropertyNames:tc}=Object;var oc=Object.prototype.hasOwnProperty;var ec=(F,A,B)=>{B=F!=null?sc(rc(F)):{};let D=A||!F||!F.__esModule?Tz(B,"default",{value:F,enumerable:!0}):B;for(let X of tc(F))if(!oc.call(D,X))Tz(D,X,{get:()=>F[X],enumerable:!0});return D};var z=(F,A)=>()=>(A||F((A={exports:{}}).exports,A),A.exports);var c=Fl(import.meta.url);var GJ=z((Mp)=>{var bl=(()=>{let F=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return(A)=>F.call(A)})();function r9(F){return bl(F)==="Uint8Array"}function AJ(F){return typeof F==="object"&&F!=null&&Symbol.toStringTag in F&&(F[Symbol.toStringTag]==="ArrayBuffer"||F[Symbol.toStringTag]==="SharedArrayBuffer")}function t9(F){return F instanceof RegExp||Object.prototype.toString.call(F)==="[object RegExp]"}function BJ(F){return typeof F==="object"&&F!=null&&Symbol.toStringTag in F&&F[Symbol.toStringTag]==="Map"}function o9(F){return F instanceof Date||Object.prototype.toString.call(F)==="[object Date]"}function t2(F,A){return JSON.stringify(F,(B,D)=>{if(typeof D==="bigint")return{$numberLong:`${D}`};else if(BJ(D))return Object.fromEntries(D);return D})}function yl(F){if(F!=null&&typeof F==="object"&&"stylize"in F&&typeof F.stylize==="function")return F.stylize}var p4=7,A7=Symbol.for("@@mdb.bson.version"),i8=2147483647,n8=-2147483648,wQ=Math.pow(2,63)-1,RQ=-Math.pow(2,63),PQ=Math.pow(2,53),IQ=-Math.pow(2,53),DJ=1,NQ=2,XJ=3,MQ=4,ZJ=5,hl=6,jQ=7,TQ=8,kQ=9,JJ=10,TA=11,vl=12,YJ=13,uQ=14,OQ=15,c8=16,SQ=17,$J=18,xQ=19,_Q=255,fQ=127,ml=0,EJ=4,gQ=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class f extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(F,A){super(F,A)}static isBSONError(F){return F!=null&&typeof F==="object"&&"bsonError"in F&&F.bsonError===!0&&"name"in F&&"message"in F&&"stack"in F}}class F4 extends f{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${p4}.x.x`)}}class l8 extends f{get name(){return"BSONRuntimeError"}constructor(F){super(F)}}class O6 extends f{get name(){return"BSONOffsetError"}offset;constructor(F,A,B){super(`${F}. offset: ${A}`,B);this.offset=A}}var ZQ,JQ;function bQ(F,A,B,D){if(D){ZQ??=new TextDecoder("utf8",{fatal:!0});try{return ZQ.decode(F.subarray(A,B))}catch(X){throw new f("Invalid UTF-8 string in BSON document",{cause:X})}}return JQ??=new TextDecoder("utf8",{fatal:!1}),JQ.decode(F.subarray(A,B))}function yQ(F,A,B){if(F.length===0)return"";let D=B-A;if(D===0)return"";if(D>20)return null;if(D===1&&F[A]<128)return String.fromCharCode(F[A]);if(D===2&&F[A]<128&&F[A+1]<128)return String.fromCharCode(F[A])+String.fromCharCode(F[A+1]);if(D===3&&F[A]<128&&F[A+1]<128&&F[A+2]<128)return String.fromCharCode(F[A])+String.fromCharCode(F[A+1])+String.fromCharCode(F[A+2]);let X=[];for(let Z=A;Z<B;Z++){let J=F[Z];if(J>127)return null;X.push(J)}return String.fromCharCode(...X)}function dl(F,A,B){if(A.length===0)return 0;if(A.length>25)return null;if(F.length-B<A.length)return null;for(let D=0,X=B;D<A.length;D++,X++){let Z=A.charCodeAt(D);if(Z>127)return null;F[X]=Z}return A.length}function cl(F){return e6.fromNumberArray(Array.from({length:F},()=>Math.floor(Math.random()*256)))}function ll(F){return crypto.getRandomValues(e6.allocate(F))}var pl=(()=>{let{crypto:F}=globalThis;if(F!=null&&typeof F.getRandomValues==="function")return ll;else return cl})(),e6={toLocalBufferType(F){if(Buffer.isBuffer(F))return F;if(ArrayBuffer.isView(F))return Buffer.from(F.buffer,F.byteOffset,F.byteLength);let A=F?.[Symbol.toStringTag]??Object.prototype.toString.call(F);if(A==="ArrayBuffer"||A==="SharedArrayBuffer"||A==="[object ArrayBuffer]"||A==="[object SharedArrayBuffer]")return Buffer.from(F);throw new f("Cannot create Buffer from the passed potentialBuffer.")},allocate(F){return Buffer.alloc(F)},allocateUnsafe(F){return Buffer.allocUnsafe(F)},equals(F,A){return e6.toLocalBufferType(F).equals(A)},fromNumberArray(F){return Buffer.from(F)},fromBase64(F){return Buffer.from(F,"base64")},toBase64(F){return e6.toLocalBufferType(F).toString("base64")},fromISO88591(F){return Buffer.from(F,"binary")},toISO88591(F){return e6.toLocalBufferType(F).toString("binary")},fromHex(F){return Buffer.from(F,"hex")},toHex(F){return e6.toLocalBufferType(F).toString("hex")},toUTF8(F,A,B,D){let X=B-A<=20?yQ(F,A,B):null;if(X!=null)return X;let Z=e6.toLocalBufferType(F).toString("utf8",A,B);if(D){for(let J=0;J<Z.length;J++)if(Z.charCodeAt(J)===65533){bQ(F,A,B,!0);break}}return Z},utf8ByteLength(F){return Buffer.byteLength(F,"utf8")},encodeUTF8Into(F,A,B){let D=dl(F,A,B);if(D!=null)return D;return e6.toLocalBufferType(F).write(A,B,void 0,"utf8")},randomBytes:pl,swap32(F){return e6.toLocalBufferType(F).swap32()}};function il(){let{navigator:F}=globalThis;return typeof F==="object"&&F.product==="ReactNative"}function nl(F){if(F<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${F}`);return p8.fromNumberArray(Array.from({length:F},()=>Math.floor(Math.random()*256)))}var al=(()=>{let{crypto:F}=globalThis;if(F!=null&&typeof F.getRandomValues==="function")return(A)=>{return F.getRandomValues(p8.allocate(A))};else{if(il()){let{console:A}=globalThis;A?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return nl}})(),YQ=/(\d|[a-f])/i,p8={toLocalBufferType(F){let A=F?.[Symbol.toStringTag]??Object.prototype.toString.call(F);if(A==="Uint8Array")return F;if(ArrayBuffer.isView(F))return new Uint8Array(F.buffer.slice(F.byteOffset,F.byteOffset+F.byteLength));if(A==="ArrayBuffer"||A==="SharedArrayBuffer"||A==="[object ArrayBuffer]"||A==="[object SharedArrayBuffer]")return new Uint8Array(F);throw new f("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(F){if(typeof F!=="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(F)}`);return new Uint8Array(F)},allocateUnsafe(F){return p8.allocate(F)},equals(F,A){if(F.byteLength!==A.byteLength)return!1;for(let B=0;B<F.byteLength;B++)if(F[B]!==A[B])return!1;return!0},fromNumberArray(F){return Uint8Array.from(F)},fromBase64(F){return Uint8Array.from(atob(F),(A)=>A.charCodeAt(0))},toBase64(F){return btoa(p8.toISO88591(F))},fromISO88591(F){return Uint8Array.from(F,(A)=>A.charCodeAt(0)&255)},toISO88591(F){return Array.from(Uint16Array.from(F),(A)=>String.fromCharCode(A)).join("")},fromHex(F){let A=F.length%2===0?F:F.slice(0,F.length-1),B=[];for(let D=0;D<A.length;D+=2){let X=A[D],Z=A[D+1];if(!YQ.test(X))break;if(!YQ.test(Z))break;let J=Number.parseInt(`${X}${Z}`,16);B.push(J)}return Uint8Array.from(B)},toHex(F){return Array.from(F,(A)=>A.toString(16).padStart(2,"0")).join("")},toUTF8(F,A,B,D){let X=B-A<=20?yQ(F,A,B):null;if(X!=null)return X;return bQ(F,A,B,D)},utf8ByteLength(F){return new TextEncoder().encode(F).byteLength},encodeUTF8Into(F,A,B){let D=new TextEncoder().encode(A);return F.set(D,B),D.byteLength},randomBytes:al,swap32(F){if(F.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<F.length;A+=4){let B=F[A],D=F[A+1],X=F[A+2],Z=F[A+3];F[A]=Z,F[A+1]=X,F[A+2]=D,F[A+3]=B}return F}},sl=typeof Buffer==="function"&&Buffer.prototype?._isBuffer!==!0,x=sl?e6:p8,uA=Symbol.for("@@mdb.bson.type");class R2{get[uA](){return this._bsontype}get[A7](){return p4}[Symbol.for("nodejs.util.inspect.custom")](F,A,B){return this.inspect(F,A,B)}}var e9=new Float64Array(1),S1=new Uint8Array(e9.buffer,0,8);e9[0]=-1;var uZ=S1[7]===0,D1={isBigEndian:uZ,getNonnegativeInt32LE(F,A){if(F[A+3]>127)throw new RangeError(`Size cannot be negative at offset: ${A}`);return F[A]|F[A+1]<<8|F[A+2]<<16|F[A+3]<<24},getInt32LE(F,A){return F[A]|F[A+1]<<8|F[A+2]<<16|F[A+3]<<24},getUint32LE(F,A){return F[A]+F[A+1]*256+F[A+2]*65536+F[A+3]*16777216},getUint32BE(F,A){return F[A+3]+F[A+2]*256+F[A+1]*65536+F[A]*16777216},getBigInt64LE(F,A){let B=BigInt(F[A+4]+F[A+5]*256+F[A+6]*65536+(F[A+7]<<24)),D=BigInt(F[A]+F[A+1]*256+F[A+2]*65536+F[A+3]*16777216);return(B<<32n)+D},getFloat64LE:uZ?(F,A)=>{return S1[7]=F[A],S1[6]=F[A+1],S1[5]=F[A+2],S1[4]=F[A+3],S1[3]=F[A+4],S1[2]=F[A+5],S1[1]=F[A+6],S1[0]=F[A+7],e9[0]}:(F,A)=>{return S1[0]=F[A],S1[1]=F[A+1],S1[2]=F[A+2],S1[3]=F[A+3],S1[4]=F[A+4],S1[5]=F[A+5],S1[6]=F[A+6],S1[7]=F[A+7],e9[0]},setInt32BE(F,A,B){return F[A+3]=B,B>>>=8,F[A+2]=B,B>>>=8,F[A+1]=B,B>>>=8,F[A]=B,4},setInt32LE(F,A,B){return F[A]=B,B>>>=8,F[A+1]=B,B>>>=8,F[A+2]=B,B>>>=8,F[A+3]=B,4},setBigInt64LE(F,A,B){let D=0xffffffffn,X=Number(B&D);F[A]=X,X>>=8,F[A+1]=X,X>>=8,F[A+2]=X,X>>=8,F[A+3]=X;let Z=Number(B>>32n&D);return F[A+4]=Z,Z>>=8,F[A+5]=Z,Z>>=8,F[A+6]=Z,Z>>=8,F[A+7]=Z,8},setFloat64LE:uZ?(F,A,B)=>{return e9[0]=B,F[A]=S1[7],F[A+1]=S1[6],F[A+2]=S1[5],F[A+3]=S1[4],F[A+4]=S1[3],F[A+5]=S1[2],F[A+6]=S1[1],F[A+7]=S1[0],8}:(F,A,B)=>{return e9[0]=B,F[A]=S1[0],F[A+1]=S1[1],F[A+2]=S1[2],F[A+3]=S1[3],F[A+4]=S1[4],F[A+5]=S1[5],F[A+6]=S1[6],F[A+7]=S1[7],8}};class H1 extends R2{get _bsontype(){return"Binary"}static BSON_BINARY_SUBTYPE_DEFAULT=0;static BUFFER_SIZE=256;static SUBTYPE_DEFAULT=0;static SUBTYPE_FUNCTION=1;static SUBTYPE_BYTE_ARRAY=2;static SUBTYPE_UUID_OLD=3;static SUBTYPE_UUID=4;static SUBTYPE_MD5=5;static SUBTYPE_ENCRYPTED=6;static SUBTYPE_COLUMN=7;static SUBTYPE_SENSITIVE=8;static SUBTYPE_VECTOR=9;static SUBTYPE_USER_DEFINED=128;static VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});buffer;sub_type;position;constructor(F,A){super();if(F!=null&&typeof F==="string"&&!ArrayBuffer.isView(F)&&!AJ(F)&&!Array.isArray(F))throw new f("Binary can only be constructed from Uint8Array or number[]");if(this.sub_type=A??H1.BSON_BINARY_SUBTYPE_DEFAULT,F==null)this.buffer=x.allocate(H1.BUFFER_SIZE),this.position=0;else this.buffer=Array.isArray(F)?x.fromNumberArray(F):x.toLocalBufferType(F),this.position=this.buffer.byteLength}put(F){if(typeof F==="string"&&F.length!==1)throw new f("only accepts single character String");else if(typeof F!=="number"&&F.length!==1)throw new f("only accepts single character Uint8Array or Array");let A;if(typeof F==="string")A=F.charCodeAt(0);else if(typeof F==="number")A=F;else A=F[0];if(A<0||A>255)throw new f("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=A;else{let B=x.allocate(H1.BUFFER_SIZE+this.buffer.length);B.set(this.buffer,0),this.buffer=B,this.buffer[this.position++]=A}}write(F,A){if(A=typeof A==="number"?A:this.position,this.buffer.byteLength<A+F.length){let B=x.allocate(this.buffer.byteLength+F.length);B.set(this.buffer,0),this.buffer=B}if(ArrayBuffer.isView(F))this.buffer.set(x.toLocalBufferType(F),A),this.position=A+F.byteLength>this.position?A+F.length:this.position;else if(typeof F==="string")throw new f("input cannot be string")}read(F,A){A=A&&A>0?A:this.position;let B=F+A;return this.buffer.subarray(F,B>this.position?this.position:B)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return x.toBase64(this.buffer.subarray(0,this.position))}toString(F){if(F==="hex")return x.toHex(this.buffer.subarray(0,this.position));if(F==="base64")return x.toBase64(this.buffer.subarray(0,this.position));if(F==="utf8"||F==="utf-8")return x.toUTF8(this.buffer,0,this.position,!1);return x.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(F){if(F=F||{},this.sub_type===H1.SUBTYPE_VECTOR)U3(this);let A=x.toBase64(this.buffer),B=Number(this.sub_type).toString(16);if(F.legacy)return{$binary:A,$type:B.length===1?"0"+B:B};return{$binary:{base64:A,subType:B.length===1?"0"+B:B}}}toUUID(){if(this.sub_type===H1.SUBTYPE_UUID)return new n0(this.buffer.subarray(0,this.position));throw new f(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${H1.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(F,A){return new H1(x.fromHex(F),A)}static createFromBase64(F,A){return new H1(x.fromBase64(F),A)}static fromExtendedJSON(F,A){A=A||{};let B,D;if("$binary"in F){if(A.legacy&&typeof F.$binary==="string"&&"$type"in F)D=F.$type?parseInt(F.$type,16):0,B=x.fromBase64(F.$binary);else if(typeof F.$binary!=="string")D=F.$binary.subType?parseInt(F.$binary.subType,16):0,B=x.fromBase64(F.$binary.base64)}else if("$uuid"in F)D=4,B=n0.bytesFromString(F.$uuid);if(!B)throw new f(`Unexpected Binary Extended JSON format ${JSON.stringify(F)}`);return D===EJ?new n0(B):new H1(B,D)}inspect(F,A,B){B??=t2;let D=x.toBase64(this.buffer.subarray(0,this.position)),X=B(D,A),Z=B(this.sub_type,A);return`Binary.createFromBase64(${X}, ${Z})`}toInt8Array(){if(this.sub_type!==H1.SUBTYPE_VECTOR)throw new f("Binary sub_type is not Vector");if(this.buffer[0]!==H1.VECTOR_TYPE.Int8)throw new f("Binary datatype field is not Int8");return U3(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==H1.SUBTYPE_VECTOR)throw new f("Binary sub_type is not Vector");if(this.buffer[0]!==H1.VECTOR_TYPE.Float32)throw new f("Binary datatype field is not Float32");U3(this);let F=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));if(D1.isBigEndian)x.swap32(F);return new Float32Array(F.buffer)}toPackedBits(){if(this.sub_type!==H1.SUBTYPE_VECTOR)throw new f("Binary sub_type is not Vector");if(this.buffer[0]!==H1.VECTOR_TYPE.PackedBit)throw new f("Binary datatype field is not packed bit");return U3(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==H1.SUBTYPE_VECTOR)throw new f("Binary sub_type is not Vector");if(this.buffer[0]!==H1.VECTOR_TYPE.PackedBit)throw new f("Binary datatype field is not packed bit");U3(this);let A=(this.length()-2)*8-this.buffer[1],B=new Int8Array(A);for(let D=0;D<B.length;D++){let X=D/8|0,Z=this.buffer[X+2],J=7-D%8,$=Z>>J&1;B[D]=$}return B}static fromInt8Array(F){let A=x.allocate(F.byteLength+2);A[0]=H1.VECTOR_TYPE.Int8,A[1]=0;let B=new Uint8Array(F.buffer,F.byteOffset,F.byteLength);A.set(B,2);let D=new this(A,this.SUBTYPE_VECTOR);return U3(D),D}static fromFloat32Array(F){let A=x.allocate(F.byteLength+2);A[0]=H1.VECTOR_TYPE.Float32,A[1]=0;let B=new Uint8Array(F.buffer,F.byteOffset,F.byteLength);if(A.set(B,2),D1.isBigEndian)x.swap32(new Uint8Array(A.buffer,2));let D=new this(A,this.SUBTYPE_VECTOR);return U3(D),D}static fromPackedBits(F,A=0){let B=x.allocate(F.byteLength+2);B[0]=H1.VECTOR_TYPE.PackedBit,B[1]=A,B.set(F,2);let D=new this(B,this.SUBTYPE_VECTOR);return U3(D),D}static fromBits(F){let A=F.length+7>>>3,B=new Uint8Array(A+2);B[0]=H1.VECTOR_TYPE.PackedBit;let D=F.length%8;B[1]=D===0?0:8-D;for(let X=0;X<F.length;X++){let Z=X>>>3,J=F[X];if(J!==0&&J!==1)throw new f(`Invalid bit value at ${X}: must be 0 or 1, found ${F[X]}`);if(J===0)continue;let $=7-X%8;B[Z+2]|=J<<$}return new this(B,H1.SUBTYPE_VECTOR)}}function U3(F){if(F.sub_type!==H1.SUBTYPE_VECTOR)return;let A=F.position,B=F.buffer[0],D=F.buffer[1];if((B===H1.VECTOR_TYPE.Float32||B===H1.VECTOR_TYPE.Int8)&&D!==0)throw new f("Invalid Vector: padding must be zero for int8 and float32 vectors");if(B===H1.VECTOR_TYPE.Float32){if(A!==0&&A-2!==0&&(A-2)%4!==0)throw new f("Invalid Vector: Float32 vector must contain a multiple of 4 bytes")}if(B===H1.VECTOR_TYPE.PackedBit&&D!==0&&A===2)throw new f("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(B===H1.VECTOR_TYPE.PackedBit&&D>7)throw new f(`Invalid Vector: padding must be a value between 0 and 7. found: ${D}`)}var OZ=16,rl=/^[0-9A-F]{32}$/i,tl=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class n0 extends H1{constructor(F){let A;if(F==null)A=n0.generate();else if(F instanceof n0)A=x.toLocalBufferType(new Uint8Array(F.buffer));else if(ArrayBuffer.isView(F)&&F.byteLength===OZ)A=x.toLocalBufferType(F);else if(typeof F==="string")A=n0.bytesFromString(F);else throw new f("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(A,EJ)}get id(){return this.buffer}set id(F){this.buffer=F}toHexString(F=!0){if(F)return[x.toHex(this.buffer.subarray(0,4)),x.toHex(this.buffer.subarray(4,6)),x.toHex(this.buffer.subarray(6,8)),x.toHex(this.buffer.subarray(8,10)),x.toHex(this.buffer.subarray(10,16))].join("-");return x.toHex(this.buffer)}toString(F){if(F==="hex")return x.toHex(this.id);if(F==="base64")return x.toBase64(this.id);return this.toHexString()}toJSON(){return this.toHexString()}equals(F){if(!F)return!1;if(F instanceof n0)return x.equals(F.id,this.id);try{return x.equals(new n0(F).id,this.id)}catch{return!1}}toBinary(){return new H1(this.id,H1.SUBTYPE_UUID)}static generate(){let F=x.randomBytes(OZ);return F[6]=F[6]&15|64,F[8]=F[8]&63|128,F}static isValid(F){if(!F)return!1;if(typeof F==="string")return n0.isValidUUIDString(F);if(r9(F))return F.byteLength===OZ;return F._bsontype==="Binary"&&F.sub_type===this.SUBTYPE_UUID&&F.buffer.byteLength===16}static createFromHexString(F){let A=n0.bytesFromString(F);return new n0(A)}static createFromBase64(F){return new n0(x.fromBase64(F))}static bytesFromString(F){if(!n0.isValidUUIDString(F))throw new f("UUID string representation must be 32 hex digits or canonical hyphenated representation");return x.fromHex(F.replace(/-/g,""))}static isValidUUIDString(F){return rl.test(F)||tl.test(F)}inspect(F,A,B){return B??=t2,`new UUID(${B(this.toHexString(),A)})`}}class L3 extends R2{get _bsontype(){return"Code"}code;scope;constructor(F,A){super();this.code=F.toString(),this.scope=A??null}toJSON(){if(this.scope!=null)return{code:this.code,scope:this.scope};return{code:this.code}}toExtendedJSON(){if(this.scope)return{$code:this.code,$scope:this.scope};return{$code:this.code}}static fromExtendedJSON(F){return new L3(F.$code,F.$scope)}inspect(F,A,B){B??=t2;let D=B(this.code,A),X=D.includes(`
`);if(this.scope!=null)D+=`,${X?`
`:" "}${B(this.scope,A)}`;let Z=X&&this.scope===null;return`new Code(${X?`
`:""}${D}${Z?`
`:""})`}}function hQ(F){return F!=null&&typeof F==="object"&&"$id"in F&&F.$id!=null&&"$ref"in F&&typeof F.$ref==="string"&&(!("$db"in F)||("$db"in F)&&typeof F.$db==="string")}class F3 extends R2{get _bsontype(){return"DBRef"}collection;oid;db;fields;constructor(F,A,B,D){super();let X=F.split(".");if(X.length===2)B=X.shift(),F=X.shift();this.collection=F,this.oid=A,this.db=B,this.fields=D||{}}get namespace(){return this.collection}set namespace(F){this.collection=F}toJSON(){let F=Object.assign({$ref:this.collection,$id:this.oid},this.fields);if(this.db!=null)F.$db=this.db;return F}toExtendedJSON(F){F=F||{};let A={$ref:this.collection,$id:this.oid};if(F.legacy)return A;if(this.db)A.$db=this.db;return A=Object.assign(A,this.fields),A}static fromExtendedJSON(F){let A=Object.assign({},F);return delete A.$ref,delete A.$id,delete A.$db,new F3(F.$ref,F.$id,F.$db,A)}inspect(F,A,B){B??=t2;let D=[B(this.namespace,A),B(this.oid,A),...this.db?[B(this.db,A)]:[],...Object.keys(this.fields).length>0?[B(this.fields,A)]:[]];return D[1]=B===t2?`new ObjectId(${D[1]})`:D[1],`new DBRef(${D.join(", ")})`}}function vQ(F){if(F==="")return F;let A=0,B=F[A]==="-",D=F[A]==="+";if(D||B)A+=1;let X=!1;for(;A<F.length&&F[A]==="0";++A)X=!0;if(!X)return D?F.slice(1):F;return`${B?"-":""}${F.length===A?"0":F.slice(A)}`}function ol(F,A){A=A??10;let B="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,A);return new RegExp(`[^-+${B}]`,"i").test(F)?!1:F}var q6=void 0;try{q6=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var $Q=65536,el=16777216,F7=$Q*$Q,mQ=F7*F7,EQ=mQ/2,GQ={},CQ={},Fp=20,Ap=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class M extends R2{get _bsontype(){return"Long"}get __isLong__(){return!0}high;low;unsigned;constructor(F=0,A,B){super();let D=typeof A==="boolean"?A:Boolean(B),X=typeof A==="number"?A:0,Z=typeof F==="string"?M.fromString(F,D):typeof F==="bigint"?M.fromBigInt(F,D):{low:F|0,high:X|0,unsigned:D};this.low=Z.low,this.high=Z.high,this.unsigned=Z.unsigned}static TWO_PWR_24=M.fromInt(el);static MAX_UNSIGNED_VALUE=M.fromBits(-1,-1,!0);static ZERO=M.fromInt(0);static UZERO=M.fromInt(0,!0);static ONE=M.fromInt(1);static UONE=M.fromInt(1,!0);static NEG_ONE=M.fromInt(-1);static MAX_VALUE=M.fromBits(-1,2147483647,!1);static MIN_VALUE=M.fromBits(0,-2147483648,!1);static fromBits(F,A,B){return new M(F,A,B)}static fromInt(F,A){let B,D,X;if(A){if(F>>>=0,X=0<=F&&F<256){if(D=CQ[F],D)return D}if(B=M.fromBits(F,(F|0)<0?-1:0,!0),X)CQ[F]=B;return B}else{if(F|=0,X=-128<=F&&F<128){if(D=GQ[F],D)return D}if(B=M.fromBits(F,F<0?-1:0,!1),X)GQ[F]=B;return B}}static fromNumber(F,A){if(isNaN(F))return A?M.UZERO:M.ZERO;if(A){if(F<0)return M.UZERO;if(F>=mQ)return M.MAX_UNSIGNED_VALUE}else{if(F<=-EQ)return M.MIN_VALUE;if(F+1>=EQ)return M.MAX_VALUE}if(F<0)return M.fromNumber(-F,A).neg();return M.fromBits(F%F7|0,F/F7|0,A)}static fromBigInt(F,A){let B=0xffffffffn,D=32n;return new M(Number(F&B),Number(F>>D&B),A)}static _fromString(F,A,B){if(F.length===0)throw new f("empty string");if(B<2||36<B)throw new f("radix");let D;if((D=F.indexOf("-"))>0)throw new f("interior hyphen");else if(D===0)return M._fromString(F.substring(1),A,B).neg();let X=M.fromNumber(Math.pow(B,8)),Z=M.ZERO;for(let J=0;J<F.length;J+=8){let $=Math.min(8,F.length-J),Y=parseInt(F.substring(J,J+$),B);if($<8){let E=M.fromNumber(Math.pow(B,$));Z=Z.mul(E).add(M.fromNumber(Y))}else Z=Z.mul(X),Z=Z.add(M.fromNumber(Y))}return Z.unsigned=A,Z}static fromStringStrict(F,A,B){let D=!1;if(typeof A==="number")B=A,A=!1;else D=!!A;if(B??=10,F.trim()!==F)throw new f(`Input: '${F}' contains leading and/or trailing whitespace`);if(!ol(F,B))throw new f(`Input: '${F}' contains invalid characters for radix: ${B}`);let X=vQ(F),Z=M._fromString(X,D,B);if(Z.toString(B).toLowerCase()!==X.toLowerCase())throw new f(`Input: ${F} is not representable as ${Z.unsigned?"an unsigned":"a signed"} 64-bit Long ${B!=null?`with radix: ${B}`:""}`);return Z}static fromString(F,A,B){let D=!1;if(typeof A==="number")B=A,A=!1;else D=!!A;if(B??=10,F==="NaN"&&B<24)return M.ZERO;else if((F==="Infinity"||F==="+Infinity"||F==="-Infinity")&&B<35)return M.ZERO;return M._fromString(F,D,B)}static fromBytes(F,A,B){return B?M.fromBytesLE(F,A):M.fromBytesBE(F,A)}static fromBytesLE(F,A){return new M(F[0]|F[1]<<8|F[2]<<16|F[3]<<24,F[4]|F[5]<<8|F[6]<<16|F[7]<<24,A)}static fromBytesBE(F,A){return new M(F[4]<<24|F[5]<<16|F[6]<<8|F[7],F[0]<<24|F[1]<<16|F[2]<<8|F[3],A)}static isLong(F){return F!=null&&typeof F==="object"&&"__isLong__"in F&&F.__isLong__===!0}static fromValue(F,A){if(typeof F==="number")return M.fromNumber(F,A);if(typeof F==="string")return M.fromString(F,A);return M.fromBits(F.low,F.high,typeof A==="boolean"?A:F.unsigned)}add(F){if(!M.isLong(F))F=M.fromValue(F);let A=this.high>>>16,B=this.high&65535,D=this.low>>>16,X=this.low&65535,Z=F.high>>>16,J=F.high&65535,$=F.low>>>16,Y=F.low&65535,E=0,G=0,C=0,W=0;return W+=X+Y,C+=W>>>16,W&=65535,C+=D+$,G+=C>>>16,C&=65535,G+=B+J,E+=G>>>16,G&=65535,E+=A+Z,E&=65535,M.fromBits(C<<16|W,E<<16|G,this.unsigned)}and(F){if(!M.isLong(F))F=M.fromValue(F);return M.fromBits(this.low&F.low,this.high&F.high,this.unsigned)}compare(F){if(!M.isLong(F))F=M.fromValue(F);if(this.eq(F))return 0;let A=this.isNegative(),B=F.isNegative();if(A&&!B)return-1;if(!A&&B)return 1;if(!this.unsigned)return this.sub(F).isNegative()?-1:1;return F.high>>>0>this.high>>>0||F.high===this.high&&F.low>>>0>this.low>>>0?-1:1}comp(F){return this.compare(F)}divide(F){if(!M.isLong(F))F=M.fromValue(F);if(F.isZero())throw new f("division by zero");if(q6){if(!this.unsigned&&this.high===-2147483648&&F.low===-1&&F.high===-1)return this;let X=(this.unsigned?q6.div_u:q6.div_s)(this.low,this.high,F.low,F.high);return M.fromBits(X,q6.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?M.UZERO:M.ZERO;let A,B,D;if(!this.unsigned){if(this.eq(M.MIN_VALUE))if(F.eq(M.ONE)||F.eq(M.NEG_ONE))return M.MIN_VALUE;else if(F.eq(M.MIN_VALUE))return M.ONE;else if(A=this.shr(1).div(F).shl(1),A.eq(M.ZERO))return F.isNegative()?M.ONE:M.NEG_ONE;else return B=this.sub(F.mul(A)),D=A.add(B.div(F)),D;else if(F.eq(M.MIN_VALUE))return this.unsigned?M.UZERO:M.ZERO;if(this.isNegative()){if(F.isNegative())return this.neg().div(F.neg());return this.neg().div(F).neg()}else if(F.isNegative())return this.div(F.neg()).neg();D=M.ZERO}else{if(!F.unsigned)F=F.toUnsigned();if(F.gt(this))return M.UZERO;if(F.gt(this.shru(1)))return M.UONE;D=M.UZERO}B=this;while(B.gte(F)){A=Math.max(1,Math.floor(B.toNumber()/F.toNumber()));let X=Math.ceil(Math.log(A)/Math.LN2),Z=X<=48?1:Math.pow(2,X-48),J=M.fromNumber(A),$=J.mul(F);while($.isNegative()||$.gt(B))A-=Z,J=M.fromNumber(A,this.unsigned),$=J.mul(F);if(J.isZero())J=M.ONE;D=D.add(J),B=B.sub($)}return D}div(F){return this.divide(F)}equals(F){if(!M.isLong(F))F=M.fromValue(F);if(this.unsigned!==F.unsigned&&this.high>>>31===1&&F.high>>>31===1)return!1;return this.high===F.high&&this.low===F.low}eq(F){return this.equals(F)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(M.MIN_VALUE)?64:this.neg().getNumBitsAbs();let F=this.high!==0?this.high:this.low,A;for(A=31;A>0;A--)if((F&1<<A)!==0)break;return this.high!==0?A+33:A+1}greaterThan(F){return this.comp(F)>0}gt(F){return this.greaterThan(F)}greaterThanOrEqual(F){return this.comp(F)>=0}gte(F){return this.greaterThanOrEqual(F)}ge(F){return this.greaterThanOrEqual(F)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(F){return this.comp(F)<0}lt(F){return this.lessThan(F)}lessThanOrEqual(F){return this.comp(F)<=0}lte(F){return this.lessThanOrEqual(F)}modulo(F){if(!M.isLong(F))F=M.fromValue(F);if(q6){let A=(this.unsigned?q6.rem_u:q6.rem_s)(this.low,this.high,F.low,F.high);return M.fromBits(A,q6.get_high(),this.unsigned)}return this.sub(this.div(F).mul(F))}mod(F){return this.modulo(F)}rem(F){return this.modulo(F)}multiply(F){if(this.isZero())return M.ZERO;if(!M.isLong(F))F=M.fromValue(F);if(q6){let H=q6.mul(this.low,this.high,F.low,F.high);return M.fromBits(H,q6.get_high(),this.unsigned)}if(F.isZero())return M.ZERO;if(this.eq(M.MIN_VALUE))return F.isOdd()?M.MIN_VALUE:M.ZERO;if(F.eq(M.MIN_VALUE))return this.isOdd()?M.MIN_VALUE:M.ZERO;if(this.isNegative())if(F.isNegative())return this.neg().mul(F.neg());else return this.neg().mul(F).neg();else if(F.isNegative())return this.mul(F.neg()).neg();if(this.lt(M.TWO_PWR_24)&&F.lt(M.TWO_PWR_24))return M.fromNumber(this.toNumber()*F.toNumber(),this.unsigned);let A=this.high>>>16,B=this.high&65535,D=this.low>>>16,X=this.low&65535,Z=F.high>>>16,J=F.high&65535,$=F.low>>>16,Y=F.low&65535,E=0,G=0,C=0,W=0;return W+=X*Y,C+=W>>>16,W&=65535,C+=D*Y,G+=C>>>16,C&=65535,C+=X*$,G+=C>>>16,C&=65535,G+=B*Y,E+=G>>>16,G&=65535,G+=D*$,E+=G>>>16,G&=65535,G+=X*J,E+=G>>>16,G&=65535,E+=A*Y+B*$+D*J+X*Z,E&=65535,M.fromBits(C<<16|W,E<<16|G,this.unsigned)}mul(F){return this.multiply(F)}negate(){if(!this.unsigned&&this.eq(M.MIN_VALUE))return M.MIN_VALUE;return this.not().add(M.ONE)}neg(){return this.negate()}not(){return M.fromBits(~this.low,~this.high,this.unsigned)}notEquals(F){return!this.equals(F)}neq(F){return this.notEquals(F)}ne(F){return this.notEquals(F)}or(F){if(!M.isLong(F))F=M.fromValue(F);return M.fromBits(this.low|F.low,this.high|F.high,this.unsigned)}shiftLeft(F){if(M.isLong(F))F=F.toInt();if((F&=63)===0)return this;else if(F<32)return M.fromBits(this.low<<F,this.high<<F|this.low>>>32-F,this.unsigned);else return M.fromBits(0,this.low<<F-32,this.unsigned)}shl(F){return this.shiftLeft(F)}shiftRight(F){if(M.isLong(F))F=F.toInt();if((F&=63)===0)return this;else if(F<32)return M.fromBits(this.low>>>F|this.high<<32-F,this.high>>F,this.unsigned);else return M.fromBits(this.high>>F-32,this.high>=0?0:-1,this.unsigned)}shr(F){return this.shiftRight(F)}shiftRightUnsigned(F){if(M.isLong(F))F=F.toInt();if(F&=63,F===0)return this;else{let A=this.high;if(F<32){let B=this.low;return M.fromBits(B>>>F|A<<32-F,A>>>F,this.unsigned)}else if(F===32)return M.fromBits(A,0,this.unsigned);else return M.fromBits(A>>>F-32,0,this.unsigned)}}shr_u(F){return this.shiftRightUnsigned(F)}shru(F){return this.shiftRightUnsigned(F)}subtract(F){if(!M.isLong(F))F=M.fromValue(F);return this.add(F.neg())}sub(F){return this.subtract(F)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){if(this.unsigned)return(this.high>>>0)*F7+(this.low>>>0);return this.high*F7+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(F){return F?this.toBytesLE():this.toBytesBE()}toBytesLE(){let F=this.high,A=this.low;return[A&255,A>>>8&255,A>>>16&255,A>>>24,F&255,F>>>8&255,F>>>16&255,F>>>24]}toBytesBE(){let F=this.high,A=this.low;return[F>>>24,F>>>16&255,F>>>8&255,F&255,A>>>24,A>>>16&255,A>>>8&255,A&255]}toSigned(){if(!this.unsigned)return this;return M.fromBits(this.low,this.high,!1)}toString(F){if(F=F||10,F<2||36<F)throw new f("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(M.MIN_VALUE)){let X=M.fromNumber(F),Z=this.div(X),J=Z.mul(X).sub(this);return Z.toString(F)+J.toInt().toString(F)}else return"-"+this.neg().toString(F);let A=M.fromNumber(Math.pow(F,6),this.unsigned),B=this,D="";while(!0){let X=B.div(A),J=(B.sub(X.mul(A)).toInt()>>>0).toString(F);if(B=X,B.isZero())return J+D;else{while(J.length<6)J="0"+J;D=""+J+D}}}toUnsigned(){if(this.unsigned)return this;return M.fromBits(this.low,this.high,!0)}xor(F){if(!M.isLong(F))F=M.fromValue(F);return M.fromBits(this.low^F.low,this.high^F.high,this.unsigned)}eqz(){return this.isZero()}le(F){return this.lessThanOrEqual(F)}toExtendedJSON(F){if(F&&F.relaxed)return this.toNumber();return{$numberLong:this.toString()}}static fromExtendedJSON(F,A){let{useBigInt64:B=!1,relaxed:D=!0}={...A};if(F.$numberLong.length>Fp)throw new f("$numberLong string is too long");if(!Ap.test(F.$numberLong))throw new f(`$numberLong string "${F.$numberLong}" is in an invalid format`);if(B){let Z=BigInt(F.$numberLong);return BigInt.asIntN(64,Z)}let X=M.fromString(F.$numberLong);if(D)return X.toNumber();return X}inspect(F,A,B){B??=t2;let D=B(this.toString(),A),X=this.unsigned?`, ${B(this.unsigned,A)}`:"";return`new Long(${D}${X})`}}var Bp=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Dp=/^(\+|-)?(Infinity|inf)$/i,Xp=/^(\+|-)?NaN$/i,a9=6111,m8=-6176,WQ=6176,HQ=34,SZ=x.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),qQ=x.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),zQ=x.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Zp=/^([-+])?(\d+)?$/,Jp=31,QQ=16383,Yp=30,$p=31;function KQ(F){return!isNaN(parseInt(F,10))}function Ep(F){let A=M.fromNumber(1e9),B=M.fromNumber(0);if(!F.parts[0]&&!F.parts[1]&&!F.parts[2]&&!F.parts[3])return{quotient:F,rem:B};for(let D=0;D<=3;D++)B=B.shiftLeft(32),B=B.add(new M(F.parts[D],0)),F.parts[D]=B.div(A).low,B=B.modulo(A);return{quotient:F,rem:B}}function Gp(F,A){if(!F&&!A)return{high:M.fromNumber(0),low:M.fromNumber(0)};let B=F.shiftRightUnsigned(32),D=new M(F.getLowBits(),0),X=A.shiftRightUnsigned(32),Z=new M(A.getLowBits(),0),J=B.multiply(X),$=B.multiply(Z),Y=D.multiply(X),E=D.multiply(Z);return J=J.add($.shiftRightUnsigned(32)),$=new M($.getLowBits(),0).add(Y).add(E.shiftRightUnsigned(32)),J=J.add($.shiftRightUnsigned(32)),E=$.shiftLeft(32).add(new M(E.getLowBits(),0)),{high:J,low:E}}function Cp(F,A){let B=F.high>>>0,D=A.high>>>0;if(B<D)return!0;else if(B===D){let X=F.low>>>0,Z=A.low>>>0;if(X<Z)return!0}return!1}function u6(F,A){throw new f(`"${F}" is not a valid Decimal128 string - ${A}`)}class E2 extends R2{get _bsontype(){return"Decimal128"}bytes;constructor(F){super();if(typeof F==="string")this.bytes=E2.fromString(F).bytes;else if(F instanceof Uint8Array||r9(F)){if(F.byteLength!==16)throw new f("Decimal128 must take a Buffer of 16 bytes");this.bytes=F}else throw new f("Decimal128 must take a Buffer or string")}static fromString(F){return E2._fromString(F,{allowRounding:!1})}static fromStringWithRounding(F){return E2._fromString(F,{allowRounding:!0})}static _fromString(F,A){let B=!1,D=!1,X=!1,Z=!1,J=0,$=0,Y=0,E=0,G=0,C=[0],W=0,H=0,q=0,Q=0,K=new M(0,0),U=new M(0,0),R=0,w=0;if(F.length>=7000)throw new f(""+F+" not a valid Decimal128 string");let V=F.match(Bp),N=F.match(Dp),T=F.match(Xp);if(!V&&!N&&!T||F.length===0)throw new f(""+F+" not a valid Decimal128 string");if(V){let k=V[2],m=V[4],h=V[5],o=V[6];if(m&&o===void 0)u6(F,"missing exponent power");if(m&&k===void 0)u6(F,"missing exponent base");if(m===void 0&&(h||o))u6(F,"missing e before exponent")}if(F[w]==="+"||F[w]==="-")D=!0,B=F[w++]==="-";if(!KQ(F[w])&&F[w]!=="."){if(F[w]==="i"||F[w]==="I")return new E2(B?qQ:zQ);else if(F[w]==="N")return new E2(SZ)}while(KQ(F[w])||F[w]==="."){if(F[w]==="."){if(X)u6(F,"contains multiple periods");X=!0,w=w+1;continue}if(W<HQ){if(F[w]!=="0"||Z){if(!Z)G=$;Z=!0,C[H++]=parseInt(F[w],10),W=W+1}}if(Z)Y=Y+1;if(X)E=E+1;$=$+1,w=w+1}if(X&&!$)throw new f(""+F+" not a valid Decimal128 string");if(F[w]==="e"||F[w]==="E"){let k=F.substr(++w).match(Zp);if(!k||!k[2])return new E2(SZ);Q=parseInt(k[0],10),w=w+k[0].length}if(F[w])return new E2(SZ);if(!W)C[0]=0,Y=1,W=1,J=0;else if(q=W-1,J=Y,J!==1)while(F[G+J-1+Number(D)+Number(X)]==="0")J=J-1;if(Q<=E&&E>Q+16384)Q=m8;else Q=Q-E;while(Q>a9){if(q=q+1,q>=HQ){if(J===0){Q=a9;break}u6(F,"overflow")}Q=Q-1}if(A.allowRounding){while(Q<m8||W<Y){if(q===0&&J<W){Q=m8,J=0;break}if(W<Y)Y=Y-1;else q=q-1;if(Q<a9)Q=Q+1;else{if(C.join("").match(/^0+$/)){Q=a9;break}u6(F,"overflow")}}if(q+1<J){let k=$;if(X)G=G+1,k=k+1;if(D)G=G+1,k=k+1;let m=parseInt(F[G+q+1],10),h=0;if(m>=5){if(h=1,m===5){h=C[q]%2===1?1:0;for(let o=G+q+2;o<k;o++)if(parseInt(F[o],10)){h=1;break}}}if(h){let o=q;for(;o>=0;o--)if(++C[o]>9){if(C[o]=0,o===0)if(Q<a9)Q=Q+1,C[o]=1;else return new E2(B?qQ:zQ)}else break}}}else{while(Q<m8||W<Y){if(q===0){if(J===0){Q=m8;break}u6(F,"exponent underflow")}if(W<Y){if(F[Y-1+Number(D)+Number(X)]!=="0"&&J!==0)u6(F,"inexact rounding");Y=Y-1}else{if(C[q]!==0)u6(F,"inexact rounding");q=q-1}if(Q<a9)Q=Q+1;else u6(F,"overflow")}if(q+1<J){if(X)G=G+1;if(D)G=G+1;if(parseInt(F[G+q+1],10)!==0)u6(F,"inexact rounding")}}if(K=M.fromNumber(0),U=M.fromNumber(0),J===0)K=M.fromNumber(0),U=M.fromNumber(0);else if(q<17){let k=0;U=M.fromNumber(C[k++]),K=new M(0,0);for(;k<=q;k++)U=U.multiply(M.fromNumber(10)),U=U.add(M.fromNumber(C[k]))}else{let k=0;K=M.fromNumber(C[k++]);for(;k<=q-17;k++)K=K.multiply(M.fromNumber(10)),K=K.add(M.fromNumber(C[k]));U=M.fromNumber(C[k++]);for(;k<=q;k++)U=U.multiply(M.fromNumber(10)),U=U.add(M.fromNumber(C[k]))}let I=Gp(K,M.fromString("100000000000000000"));if(I.low=I.low.add(U),Cp(I.low,U))I.high=I.high.add(M.fromNumber(1));R=Q+WQ;let u={low:M.fromNumber(0),high:M.fromNumber(0)};if(I.high.shiftRightUnsigned(49).and(M.fromNumber(1)).equals(M.fromNumber(1)))u.high=u.high.or(M.fromNumber(3).shiftLeft(61)),u.high=u.high.or(M.fromNumber(R).and(M.fromNumber(16383).shiftLeft(47))),u.high=u.high.or(I.high.and(M.fromNumber(140737488355327)));else u.high=u.high.or(M.fromNumber(R&16383).shiftLeft(49)),u.high=u.high.or(I.high.and(M.fromNumber(562949953421311)));if(u.low=I.low,B)u.high=u.high.or(M.fromString("9223372036854775808"));let O=x.allocateUnsafe(16);return w=0,O[w++]=u.low.low&255,O[w++]=u.low.low>>8&255,O[w++]=u.low.low>>16&255,O[w++]=u.low.low>>24&255,O[w++]=u.low.high&255,O[w++]=u.low.high>>8&255,O[w++]=u.low.high>>16&255,O[w++]=u.low.high>>24&255,O[w++]=u.high.low&255,O[w++]=u.high.low>>8&255,O[w++]=u.high.low>>16&255,O[w++]=u.high.low>>24&255,O[w++]=u.high.high&255,O[w++]=u.high.high>>8&255,O[w++]=u.high.high>>16&255,O[w++]=u.high.high>>24&255,new E2(O)}toString(){let F,A=0,B=new Array(36);for(let w=0;w<B.length;w++)B[w]=0;let D=0,X=!1,Z,J={parts:[0,0,0,0]},$,Y,E=[];D=0;let G=this.bytes,C=G[D++]|G[D++]<<8|G[D++]<<16|G[D++]<<24,W=G[D++]|G[D++]<<8|G[D++]<<16|G[D++]<<24,H=G[D++]|G[D++]<<8|G[D++]<<16|G[D++]<<24,q=G[D++]|G[D++]<<8|G[D++]<<16|G[D++]<<24;if(D=0,{low:new M(C,W),high:new M(H,q)}.high.lessThan(M.ZERO))E.push("-");let K=q>>26&Jp;if(K>>3===3)if(K===Yp)return E.join("")+"Infinity";else if(K===$p)return"NaN";else F=q>>15&QQ,Z=8+(q>>14&1);else Z=q>>14&7,F=q>>17&QQ;let U=F-WQ;if(J.parts[0]=(q&16383)+((Z&15)<<14),J.parts[1]=H,J.parts[2]=W,J.parts[3]=C,J.parts[0]===0&&J.parts[1]===0&&J.parts[2]===0&&J.parts[3]===0)X=!0;else for(Y=3;Y>=0;Y--){let w=0,V=Ep(J);if(J=V.quotient,w=V.rem.low,!w)continue;for($=8;$>=0;$--)B[Y*9+$]=w%10,w=Math.floor(w/10)}if(X)A=1,B[D]=0;else{A=36;while(!B[D])A=A-1,D=D+1}let R=A-1+U;if(R>=34||R<=-7||U>0){if(A>34){if(E.push("0"),U>0)E.push(`E+${U}`);else if(U<0)E.push(`E${U}`);return E.join("")}if(E.push(`${B[D++]}`),A=A-1,A)E.push(".");for(let w=0;w<A;w++)E.push(`${B[D++]}`);if(E.push("E"),R>0)E.push(`+${R}`);else E.push(`${R}`)}else if(U>=0)for(let w=0;w<A;w++)E.push(`${B[D++]}`);else{let w=A+U;if(w>0)for(let V=0;V<w;V++)E.push(`${B[D++]}`);else E.push("0");E.push(".");while(w++<0)E.push("0");for(let V=0;V<A-Math.max(w-1,0);V++)E.push(`${B[D++]}`)}return E.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(F){return E2.fromString(F.$numberDecimal)}inspect(F,A,B){return B??=t2,`new Decimal128(${B(this.toString(),A)})`}}class z6 extends R2{get _bsontype(){return"Double"}value;constructor(F){super();if(F instanceof Number)F=F.valueOf();this.value=+F}static fromString(F){let A=Number(F);if(F==="NaN")return new z6(NaN);if(F==="Infinity")return new z6(1/0);if(F==="-Infinity")return new z6(-1/0);if(!Number.isFinite(A))throw new f(`Input: ${F} is not representable as a Double`);if(F.trim()!==F)throw new f(`Input: '${F}' contains whitespace`);if(F==="")throw new f("Input is an empty string");if(/[^-0-9.+eE]/.test(F))throw new f(`Input: '${F}' is not in decimal or exponential notation`);return new z6(A)}valueOf(){return this.value}toJSON(){return this.value}toString(F){return this.value.toString(F)}toExtendedJSON(F){if(F&&(F.legacy||F.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-0.0"};return{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(F,A){let B=parseFloat(F.$numberDouble);return A&&A.relaxed?B:new z6(B)}inspect(F,A,B){return B??=t2,`new Double(${B(this.value,A)})`}}class w3 extends R2{get _bsontype(){return"Int32"}value;constructor(F){super();if(F instanceof Number)F=F.valueOf();this.value=+F|0}static fromString(F){let A=vQ(F),B=Number(F);if(i8<B)throw new f(`Input: '${F}' is larger than the maximum value for Int32`);else if(n8>B)throw new f(`Input: '${F}' is smaller than the minimum value for Int32`);else if(!Number.isSafeInteger(B))throw new f(`Input: '${F}' is not a safe integer`);else if(B.toString()!==A)throw new f(`Input: '${F}' is not a valid Int32 string`);return new w3(B)}valueOf(){return this.value}toString(F){return this.value.toString(F)}toJSON(){return this.value}toExtendedJSON(F){if(F&&(F.relaxed||F.legacy))return this.value;return{$numberInt:this.value.toString()}}static fromExtendedJSON(F,A){return A&&A.relaxed?parseInt(F.$numberInt,10):new w3(F.$numberInt)}inspect(F,A,B){return B??=t2,`new Int32(${B(this.value,A)})`}}class i4 extends R2{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new i4}inspect(){return"new MaxKey()"}}class n4 extends R2{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new n4}inspect(){return"new MinKey()"}}var l4=null,d8=new WeakMap;class F0 extends R2{get _bsontype(){return"ObjectId"}static index=Math.floor(Math.random()*16777215);static cacheHexString;buffer;constructor(F){super();let A;if(typeof F==="object"&&F&&"id"in F){if(typeof F.id!=="string"&&!ArrayBuffer.isView(F.id))throw new f("Argument passed in must have an id that is of type string or Buffer");if("toHexString"in F&&typeof F.toHexString==="function")A=x.fromHex(F.toHexString());else A=F.id}else A=F;if(A==null)this.buffer=F0.generate();else if(ArrayBuffer.isView(A)&&A.byteLength===12)this.buffer=x.toLocalBufferType(A);else if(typeof A==="string")if(F0.validateHexString(A)){if(this.buffer=x.fromHex(A),F0.cacheHexString)d8.set(this,A)}else throw new f("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new f("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(F){if(this.buffer=F,F0.cacheHexString)d8.set(this,x.toHex(F))}static validateHexString(F){if(F?.length!==24)return!1;for(let A=0;A<24;A++){let B=F.charCodeAt(A);if(B>=48&&B<=57||B>=97&&B<=102||B>=65&&B<=70)continue;return!1}return!0}toHexString(){if(F0.cacheHexString){let A=d8.get(this);if(A)return A}let F=x.toHex(this.id);if(F0.cacheHexString)d8.set(this,F);return F}static getInc(){return F0.index=(F0.index+1)%16777215}static generate(F){if(typeof F!=="number")F=Math.floor(Date.now()/1000);let A=F0.getInc(),B=x.allocateUnsafe(12);if(D1.setInt32BE(B,0,F),l4===null)l4=x.randomBytes(5);return B[4]=l4[0],B[5]=l4[1],B[6]=l4[2],B[7]=l4[3],B[8]=l4[4],B[11]=A&255,B[10]=A>>8&255,B[9]=A>>16&255,B}toString(F){if(F==="base64")return x.toBase64(this.id);if(F==="hex")return this.toHexString();return this.toHexString()}toJSON(){return this.toHexString()}static is(F){return F!=null&&typeof F==="object"&&"_bsontype"in F&&F._bsontype==="ObjectId"}equals(F){if(F===void 0||F===null)return!1;if(F0.is(F))return this.buffer[11]===F.buffer[11]&&x.equals(this.buffer,F.buffer);if(typeof F==="string")return F.toLowerCase()===this.toHexString();if(typeof F==="object"&&typeof F.toHexString==="function"){let A=F.toHexString(),B=this.toHexString();return typeof A==="string"&&A.toLowerCase()===B}return!1}getTimestamp(){let F=new Date,A=D1.getUint32BE(this.buffer,0);return F.setTime(Math.floor(A)*1000),F}static createPk(){return new F0}serializeInto(F,A){return F[A]=this.buffer[0],F[A+1]=this.buffer[1],F[A+2]=this.buffer[2],F[A+3]=this.buffer[3],F[A+4]=this.buffer[4],F[A+5]=this.buffer[5],F[A+6]=this.buffer[6],F[A+7]=this.buffer[7],F[A+8]=this.buffer[8],F[A+9]=this.buffer[9],F[A+10]=this.buffer[10],F[A+11]=this.buffer[11],12}static createFromTime(F){let A=x.allocate(12);for(let B=11;B>=4;B--)A[B]=0;return D1.setInt32BE(A,0,F),new F0(A)}static createFromHexString(F){if(F?.length!==24)throw new f("hex string must be 24 characters");return new F0(x.fromHex(F))}static createFromBase64(F){if(F?.length!==16)throw new f("base64 string must be 16 characters");return new F0(x.fromBase64(F))}static isValid(F){if(F==null)return!1;if(typeof F==="string")return F0.validateHexString(F);try{return new F0(F),!0}catch{return!1}}toExtendedJSON(){if(this.toHexString)return{$oid:this.toHexString()};return{$oid:this.toString("hex")}}static fromExtendedJSON(F){return new F0(F.$oid)}isCached(){return F0.cacheHexString&&d8.has(this)}inspect(F,A,B){return B??=t2,`new ObjectId(${B(this.toHexString(),A)})`}}function MA(F,A,B){let D=5;if(Array.isArray(F))for(let X=0;X<F.length;X++)D+=UQ(X.toString(),F[X],A,!0,B);else{if(typeof F?.toBSON==="function")F=F.toBSON();for(let X of Object.keys(F))D+=UQ(X,F[X],A,!1,B)}return D}function UQ(F,A,B=!1,D=!1,X=!1){if(typeof A?.toBSON==="function")A=A.toBSON();switch(typeof A){case"string":return 1+x.utf8ByteLength(F)+1+4+x.utf8ByteLength(A)+1;case"number":if(Math.floor(A)===A&&A>=IQ&&A<=PQ)if(A>=n8&&A<=i8)return(F!=null?x.utf8ByteLength(F)+1:0)+5;else return(F!=null?x.utf8ByteLength(F)+1:0)+9;else return(F!=null?x.utf8ByteLength(F)+1:0)+9;case"undefined":if(D||!X)return(F!=null?x.utf8ByteLength(F)+1:0)+1;return 0;case"boolean":return(F!=null?x.utf8ByteLength(F)+1:0)+2;case"object":if(A!=null&&typeof A._bsontype==="string"&&A[A7]!==p4)throw new F4;else if(A==null||A._bsontype==="MinKey"||A._bsontype==="MaxKey")return(F!=null?x.utf8ByteLength(F)+1:0)+1;else if(A._bsontype==="ObjectId")return(F!=null?x.utf8ByteLength(F)+1:0)+13;else if(A instanceof Date||o9(A))return(F!=null?x.utf8ByteLength(F)+1:0)+9;else if(ArrayBuffer.isView(A)||A instanceof ArrayBuffer||AJ(A))return(F!=null?x.utf8ByteLength(F)+1:0)+6+A.byteLength;else if(A._bsontype==="Long"||A._bsontype==="Double"||A._bsontype==="Timestamp")return(F!=null?x.utf8ByteLength(F)+1:0)+9;else if(A._bsontype==="Decimal128")return(F!=null?x.utf8ByteLength(F)+1:0)+17;else if(A._bsontype==="Code")if(A.scope!=null&&Object.keys(A.scope).length>0)return(F!=null?x.utf8ByteLength(F)+1:0)+1+4+4+x.utf8ByteLength(A.code.toString())+1+MA(A.scope,B,X);else return(F!=null?x.utf8ByteLength(F)+1:0)+1+4+x.utf8ByteLength(A.code.toString())+1;else if(A._bsontype==="Binary"){let Z=A;if(Z.sub_type===H1.SUBTYPE_BYTE_ARRAY)return(F!=null?x.utf8ByteLength(F)+1:0)+(Z.position+1+4+1+4);else return(F!=null?x.utf8ByteLength(F)+1:0)+(Z.position+1+4+1)}else if(A._bsontype==="Symbol")return(F!=null?x.utf8ByteLength(F)+1:0)+x.utf8ByteLength(A.value)+4+1+1;else if(A._bsontype==="DBRef"){let Z=Object.assign({$ref:A.collection,$id:A.oid},A.fields);if(A.db!=null)Z.$db=A.db;return(F!=null?x.utf8ByteLength(F)+1:0)+1+MA(Z,B,X)}else if(A instanceof RegExp||t9(A))return(F!=null?x.utf8ByteLength(F)+1:0)+1+x.utf8ByteLength(A.source)+1+(A.global?1:0)+(A.ignoreCase?1:0)+(A.multiline?1:0)+1;else if(A._bsontype==="BSONRegExp")return(F!=null?x.utf8ByteLength(F)+1:0)+1+x.utf8ByteLength(A.pattern)+1+x.utf8ByteLength(A.options)+1;else return(F!=null?x.utf8ByteLength(F)+1:0)+MA(A,B,X)+1;case"function":if(B)return(F!=null?x.utf8ByteLength(F)+1:0)+1+4+x.utf8ByteLength(A.toString())+1;return 0;case"bigint":return(F!=null?x.utf8ByteLength(F)+1:0)+9;case"symbol":return 0;default:throw new f(`Unrecognized JS type: ${typeof A}`)}}function Wp(F){return F.split("").sort().join("")}class Q6 extends R2{get _bsontype(){return"BSONRegExp"}pattern;options;constructor(F,A){super();if(this.pattern=F,this.options=Wp(A??""),this.pattern.indexOf("\x00")!==-1)throw new f(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\x00")!==-1)throw new f(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let B=0;B<this.options.length;B++)if(!(this.options[B]==="i"||this.options[B]==="m"||this.options[B]==="x"||this.options[B]==="l"||this.options[B]==="s"||this.options[B]==="u"))throw new f(`The regular expression option [${this.options[B]}] is not supported`)}static parseOptions(F){return F?F.split("").sort().join(""):""}toExtendedJSON(F){if(F=F||{},F.legacy)return{$regex:this.pattern,$options:this.options};return{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(F){if("$regex"in F)if(typeof F.$regex!=="string"){if(F.$regex._bsontype==="BSONRegExp")return F}else return new Q6(F.$regex,Q6.parseOptions(F.$options));if("$regularExpression"in F)return new Q6(F.$regularExpression.pattern,Q6.parseOptions(F.$regularExpression.options));throw new f(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(F)}`)}inspect(F,A,B){let D=yl(A)??((J)=>J);B??=t2;let X=D(B(this.pattern),"regexp"),Z=D(B(this.options),"regexp");return`new BSONRegExp(${X}, ${Z})`}}class a4 extends R2{get _bsontype(){return"BSONSymbol"}value;constructor(F){super();this.value=F}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(F){return new a4(F.$symbol)}inspect(F,A,B){return B??=t2,`new BSONSymbol(${B(this.value,A)})`}}var Hp=M;class S6 extends Hp{get _bsontype(){return"Timestamp"}get[uA](){return"Timestamp"}static MAX_VALUE=M.MAX_UNSIGNED_VALUE;get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(F){if(F==null)super(0,0,!0);else if(typeof F==="bigint")super(F,!0);else if(M.isLong(F))super(F.low,F.high,!0);else if(typeof F==="object"&&"t"in F&&"i"in F){if(typeof F.t!=="number"&&(typeof F.t!=="object"||F.t._bsontype!=="Int32"))throw new f("Timestamp constructed from { t, i } must provide t as a number");if(typeof F.i!=="number"&&(typeof F.i!=="object"||F.i._bsontype!=="Int32"))throw new f("Timestamp constructed from { t, i } must provide i as a number");let A=Number(F.t),B=Number(F.i);if(A<0||Number.isNaN(A))throw new f("Timestamp constructed from { t, i } must provide a positive t");if(B<0||Number.isNaN(B))throw new f("Timestamp constructed from { t, i } must provide a positive i");if(A>4294967295)throw new f("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(B>4294967295)throw new f("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(B,A,!0)}else throw new f("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(F){return new S6(M.fromInt(F,!0))}static fromNumber(F){return new S6(M.fromNumber(F,!0))}static fromBits(F,A){return new S6({i:F,t:A})}static fromString(F,A){return new S6(M.fromString(F,!0,A))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(F){let A=M.isLong(F.$timestamp.i)?F.$timestamp.i.getLowBitsUnsigned():F.$timestamp.i,B=M.isLong(F.$timestamp.t)?F.$timestamp.t.getLowBitsUnsigned():F.$timestamp.t;return new S6({t:B,i:A})}inspect(F,A,B){B??=t2;let D=B(this.t,A),X=B(this.i,A);return`new Timestamp({ t: ${D}, i: ${X} })`}}var qp=M.fromNumber(PQ),zp=M.fromNumber(IQ);function dQ(F,A,B){A=A==null?{}:A;let D=A&&A.index?A.index:0,X=D1.getInt32LE(F,D);if(X<5)throw new f(`bson size must be >= 5, is ${X}`);if(A.allowObjectSmallerThanBufferSize&&F.length<X)throw new f(`buffer length ${F.length} must be >= bson size ${X}`);if(!A.allowObjectSmallerThanBufferSize&&F.length!==X)throw new f(`buffer length ${F.length} must === bson size ${X}`);if(X+D>F.byteLength)throw new f(`(bson size ${X} + options.index ${D} must be <= buffer length ${F.byteLength})`);if(F[D+X-1]!==0)throw new f("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return jA(F,D,A,B)}var Qp=/^\$ref$|^\$id$|^\$db$/;function jA(F,A,B,D=!1){let X=B.fieldsAsRaw==null?null:B.fieldsAsRaw,Z=B.raw==null?!1:B.raw,J=typeof B.bsonRegExp==="boolean"?B.bsonRegExp:!1,$=B.promoteBuffers??!1,Y=B.promoteLongs??!0,E=B.promoteValues??!0,G=B.useBigInt64??!1;if(G&&!E)throw new f("Must either request bigint or Long for int64 deserialization");if(G&&!Y)throw new f("Must either request bigint or Long for int64 deserialization");let C=B.validation==null?{utf8:!0}:B.validation,W=!0,H,q,Q=C.utf8;if(typeof Q==="boolean")H=Q;else{W=!1;let N=Object.keys(Q).map(function(T){return Q[T]});if(N.length===0)throw new f("UTF-8 validation setting cannot be empty");if(typeof N[0]!=="boolean")throw new f("Invalid UTF-8 validation option, must specify boolean values");if(H=N[0],!N.every((T)=>T===H))throw new f("Invalid UTF-8 validation option - keys must be all true or all false")}if(!W){q=new Set;for(let N of Object.keys(Q))q.add(N)}let K=A;if(F.length<5)throw new f("corrupt bson message < 5 bytes long");let U=D1.getInt32LE(F,A);if(A+=4,U<5||U>F.length)throw new f("corrupt bson message");let R=D?[]:{},w=0,V=D?!1:null;while(!0){let N=F[A++];if(N===0)break;let T=A;while(F[T]!==0&&T<F.length)T++;if(T>=F.byteLength)throw new f("Bad BSON Document: illegal CString");let I=D?w++:x.toUTF8(F,A,T,!1),u=!0;if(W||q?.has(I))u=H;else u=!H;if(V!==!1&&I[0]==="$")V=Qp.test(I);let O;if(A=T+1,N===NQ){let k=D1.getInt32LE(F,A);if(A+=4,k<=0||k>F.length-A||F[A+k-1]!==0)throw new f("bad string length in bson");O=x.toUTF8(F,A,A+k-1,u),A=A+k}else if(N===jQ){let k=x.allocateUnsafe(12);for(let m=0;m<12;m++)k[m]=F[A+m];O=new F0(k),A=A+12}else if(N===c8&&E===!1)O=new w3(D1.getInt32LE(F,A)),A+=4;else if(N===c8)O=D1.getInt32LE(F,A),A+=4;else if(N===DJ){if(O=D1.getFloat64LE(F,A),A+=8,E===!1)O=new z6(O)}else if(N===kQ){let k=D1.getInt32LE(F,A),m=D1.getInt32LE(F,A+4);A+=8,O=new Date(new M(k,m).toNumber())}else if(N===TQ){if(F[A]!==0&&F[A]!==1)throw new f("illegal boolean type value");O=F[A++]===1}else if(N===XJ){let k=A,m=D1.getInt32LE(F,A);if(m<=0||m>F.length-A)throw new f("bad embedded document length in bson");if(Z)O=F.subarray(A,A+m);else{let h=B;if(!W)h={...B,validation:{utf8:u}};O=jA(F,k,h,!1)}A=A+m}else if(N===MQ){let k=A,m=D1.getInt32LE(F,A),h=B,o=A+m;if(X&&X[I])h={...B,raw:!0};if(!W)h={...h,validation:{utf8:u}};if(O=jA(F,k,h,!0),A=A+m,F[A-1]!==0)throw new f("invalid array terminator byte");if(A!==o)throw new f("corrupted array bson")}else if(N===hl)O=void 0;else if(N===JJ)O=null;else if(N===$J)if(G)O=D1.getBigInt64LE(F,A),A+=8;else{let k=D1.getInt32LE(F,A),m=D1.getInt32LE(F,A+4);A+=8;let h=new M(k,m);if(Y&&E===!0)O=h.lessThanOrEqual(qp)&&h.greaterThanOrEqual(zp)?h.toNumber():h;else O=h}else if(N===xQ){let k=x.allocateUnsafe(16);for(let m=0;m<16;m++)k[m]=F[A+m];A=A+16,O=new E2(k)}else if(N===ZJ){let k=D1.getInt32LE(F,A);A+=4;let m=k,h=F[A++];if(k<0)throw new f("Negative binary type element size found");if(k>F.byteLength)throw new f("Binary type size larger than document size");if(h===H1.SUBTYPE_BYTE_ARRAY){if(k=D1.getInt32LE(F,A),A+=4,k<0)throw new f("Negative binary type element size found for subtype 0x02");if(k>m-4)throw new f("Binary type with subtype 0x02 contains too long binary size");if(k<m-4)throw new f("Binary type with subtype 0x02 contains too short binary size")}if($&&E)O=x.toLocalBufferType(F.subarray(A,A+k));else if(O=new H1(F.subarray(A,A+k),h),h===EJ&&n0.isValid(O))O=O.toUUID();A=A+k}else if(N===TA&&J===!1){T=A;while(F[T]!==0&&T<F.length)T++;if(T>=F.length)throw new f("Bad BSON Document: illegal CString");let k=x.toUTF8(F,A,T,!1);A=T+1,T=A;while(F[T]!==0&&T<F.length)T++;if(T>=F.length)throw new f("Bad BSON Document: illegal CString");let m=x.toUTF8(F,A,T,!1);A=T+1;let h=new Array(m.length);for(T=0;T<m.length;T++)switch(m[T]){case"m":h[T]="m";break;case"s":h[T]="g";break;case"i":h[T]="i";break}O=new RegExp(k,h.join(""))}else if(N===TA&&J===!0){T=A;while(F[T]!==0&&T<F.length)T++;if(T>=F.length)throw new f("Bad BSON Document: illegal CString");let k=x.toUTF8(F,A,T,!1);A=T+1,T=A;while(F[T]!==0&&T<F.length)T++;if(T>=F.length)throw new f("Bad BSON Document: illegal CString");let m=x.toUTF8(F,A,T,!1);A=T+1,O=new Q6(k,m)}else if(N===uQ){let k=D1.getInt32LE(F,A);if(A+=4,k<=0||k>F.length-A||F[A+k-1]!==0)throw new f("bad string length in bson");let m=x.toUTF8(F,A,A+k-1,u);O=E?m:new a4(m),A=A+k}else if(N===SQ)O=new S6({i:D1.getUint32LE(F,A),t:D1.getUint32LE(F,A+4)}),A+=8;else if(N===_Q)O=new n4;else if(N===fQ)O=new i4;else if(N===YJ){let k=D1.getInt32LE(F,A);if(A+=4,k<=0||k>F.length-A||F[A+k-1]!==0)throw new f("bad string length in bson");let m=x.toUTF8(F,A,A+k-1,u);O=new L3(m),A=A+k}else if(N===OQ){let k=D1.getInt32LE(F,A);if(A+=4,k<13)throw new f("code_w_scope total size shorter minimum expected length");let m=D1.getInt32LE(F,A);if(A+=4,m<=0||m>F.length-A||F[A+m-1]!==0)throw new f("bad string length in bson");let h=x.toUTF8(F,A,A+m-1,u);A=A+m;let o=A,A1=D1.getInt32LE(F,A),w2=jA(F,o,B,!1);if(A=A+A1,k<8+A1+m)throw new f("code_w_scope total size is too short, truncating scope");if(k>8+A1+m)throw new f("code_w_scope total size is too long, clips outer document");O=new L3(h,w2)}else if(N===vl){let k=D1.getInt32LE(F,A);if(A+=4,k<=0||k>F.length-A||F[A+k-1]!==0)throw new f("bad string length in bson");let m=x.toUTF8(F,A,A+k-1,u);A=A+k;let h=x.allocateUnsafe(12);for(let A1=0;A1<12;A1++)h[A1]=F[A+A1];let o=new F0(h);A=A+12,O=new F3(m,o)}else throw new f(`Detected unknown BSON type ${N.toString(16)} for fieldname "${I}"`);if(I==="__proto__")Object.defineProperty(R,I,{value:O,writable:!0,enumerable:!0,configurable:!0});else R[I]=O}if(U!==A-K){if(D)throw new f("corrupt array bson");throw new f("corrupt object bson")}if(!V)return R;if(hQ(R)){let N=Object.assign({},R);return delete N.$ref,delete N.$id,delete N.$db,new F3(R.$ref,R.$id,R.$db,N)}return R}var kA=/\x00/,VQ=new Set(["$db","$ref","$id","$clusterTime"]);function xZ(F,A,B,D){F[D++]=NQ;let X=x.encodeUTF8Into(F,A,D);D=D+X+1,F[D-1]=0;let Z=x.encodeUTF8Into(F,B,D+4);return D1.setInt32LE(F,D,Z+1),D=D+4+Z,F[D++]=0,D}function _Z(F,A,B,D){let Z=!Object.is(B,-0)&&Number.isSafeInteger(B)&&B<=i8&&B>=n8?c8:DJ;F[D++]=Z;let J=x.encodeUTF8Into(F,A,D);if(D=D+J,F[D++]=0,Z===c8)D+=D1.setInt32LE(F,D,B);else D+=D1.setFloat64LE(F,D,B);return D}function fZ(F,A,B,D){F[D++]=$J;let X=x.encodeUTF8Into(F,A,D);return D+=X,F[D++]=0,D+=D1.setBigInt64LE(F,D,B),D}function s9(F,A,B,D){F[D++]=JJ;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,D}function gZ(F,A,B,D){F[D++]=TQ;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,F[D++]=B?1:0,D}function bZ(F,A,B,D){F[D++]=kQ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let Z=M.fromNumber(B.getTime()),J=Z.getLowBits(),$=Z.getHighBits();return D+=D1.setInt32LE(F,D,J),D+=D1.setInt32LE(F,D,$),D}function yZ(F,A,B,D){F[D++]=TA;let X=x.encodeUTF8Into(F,A,D);if(D=D+X,F[D++]=0,B.source&&B.source.match(kA)!=null)throw new f("value "+B.source+" must not contain null bytes");if(D=D+x.encodeUTF8Into(F,B.source,D),F[D++]=0,B.ignoreCase)F[D++]=105;if(B.global)F[D++]=115;if(B.multiline)F[D++]=109;return F[D++]=0,D}function hZ(F,A,B,D){F[D++]=TA;let X=x.encodeUTF8Into(F,A,D);if(D=D+X,F[D++]=0,B.pattern.match(kA)!=null)throw new f("pattern "+B.pattern+" must not contain null bytes");D=D+x.encodeUTF8Into(F,B.pattern,D),F[D++]=0;let Z=B.options.split("").sort().join("");return D=D+x.encodeUTF8Into(F,Z,D),F[D++]=0,D}function vZ(F,A,B,D){if(B===null)F[D++]=JJ;else if(B._bsontype==="MinKey")F[D++]=_Q;else F[D++]=fQ;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,D}function mZ(F,A,B,D){F[D++]=jQ;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,D+=B.serializeInto(F,D),D}function dZ(F,A,B,D){F[D++]=ZJ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let Z=B.length;if(D+=D1.setInt32LE(F,D,Z),F[D++]=ml,Z<=16)for(let J=0;J<Z;J++)F[D+J]=B[J];else F.set(B,D);return D=D+Z,D}function cZ(F,A,B,D,X,Z,J,$,Y){if(Y.has(B))throw new f("Cannot convert circular structure to BSON");Y.add(B),F[D++]=Array.isArray(B)?MQ:XJ;let E=x.encodeUTF8Into(F,A,D);D=D+E,F[D++]=0;let G=a8(F,B,X,D,Z+1,J,$,Y);return Y.delete(B),G}function lZ(F,A,B,D){F[D++]=xQ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;for(let Z=0;Z<16;Z++)F[D+Z]=B.bytes[Z];return D+16}function pZ(F,A,B,D){F[D++]=B._bsontype==="Long"?$J:SQ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let Z=B.getLowBits(),J=B.getHighBits();return D+=D1.setInt32LE(F,D,Z),D+=D1.setInt32LE(F,D,J),D}function iZ(F,A,B,D){B=B.valueOf(),F[D++]=c8;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,D+=D1.setInt32LE(F,D,B),D}function nZ(F,A,B,D){F[D++]=DJ;let X=x.encodeUTF8Into(F,A,D);return D=D+X,F[D++]=0,D+=D1.setFloat64LE(F,D,B.value),D}function aZ(F,A,B,D){F[D++]=YJ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let Z=B.toString(),J=x.encodeUTF8Into(F,Z,D+4)+1;return D1.setInt32LE(F,D,J),D=D+4+J-1,F[D++]=0,D}function sZ(F,A,B,D,X=!1,Z=0,J=!1,$=!0,Y){if(B.scope&&typeof B.scope==="object"){F[D++]=OQ;let E=x.encodeUTF8Into(F,A,D);D=D+E,F[D++]=0;let G=D,C=B.code;D=D+4;let W=x.encodeUTF8Into(F,C,D+4)+1;D1.setInt32LE(F,D,W),F[D+4+W-1]=0,D=D+W+4;let H=a8(F,B.scope,X,D,Z+1,J,$,Y);D=H-1;let q=H-G;G+=D1.setInt32LE(F,G,q),F[D++]=0}else{F[D++]=YJ;let E=x.encodeUTF8Into(F,A,D);D=D+E,F[D++]=0;let G=B.code.toString(),C=x.encodeUTF8Into(F,G,D+4)+1;D1.setInt32LE(F,D,C),D=D+4+C-1,F[D++]=0}return D}function rZ(F,A,B,D){F[D++]=ZJ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let{buffer:Z,position:J}=B;if(B.sub_type===H1.SUBTYPE_BYTE_ARRAY)J=J+4;if(D+=D1.setInt32LE(F,D,J),F[D++]=B.sub_type,B.sub_type===H1.SUBTYPE_BYTE_ARRAY)J=J-4,D+=D1.setInt32LE(F,D,J);if(B.sub_type===H1.SUBTYPE_VECTOR)U3(B);if(J<=16)for(let $=0;$<J;$++)F[D+$]=Z[$];else F.set(Z,D);return D=D+B.position,D}function tZ(F,A,B,D){F[D++]=uQ;let X=x.encodeUTF8Into(F,A,D);D=D+X,F[D++]=0;let Z=x.encodeUTF8Into(F,B.value,D+4)+1;return D1.setInt32LE(F,D,Z),D=D+4+Z-1,F[D++]=0,D}function oZ(F,A,B,D,X,Z,J){F[D++]=XJ;let $=x.encodeUTF8Into(F,A,D);D=D+$,F[D++]=0;let Y=D,E={$ref:B.collection||B.namespace,$id:B.oid};if(B.db!=null)E.$db=B.db;E=Object.assign(E,B.fields);let G=a8(F,E,!1,D,X+1,Z,!0,J),C=G-Y;return Y+=D1.setInt32LE(F,D,C),G}function a8(F,A,B,D,X,Z,J,$){if($==null){if(A==null)return F[0]=5,F[1]=0,F[2]=0,F[3]=0,F[4]=0,5;if(Array.isArray(A))throw new f("serialize does not support an array as the root input");if(typeof A!=="object")throw new f("serialize does not support non-object as the root input");else if("_bsontype"in A&&typeof A._bsontype==="string")throw new f("BSON types cannot be serialized as a document");else if(o9(A)||t9(A)||r9(A)||AJ(A))throw new f("date, regexp, typedarray, and arraybuffer cannot be BSON documents");$=new Set}$.add(A);let Y=D+4;if(Array.isArray(A))for(let G=0;G<A.length;G++){let C=`${G}`,W=A[G];if(typeof W?.toBSON==="function")W=W.toBSON();let H=typeof W;if(W===void 0)Y=s9(F,C,W,Y);else if(W===null)Y=s9(F,C,W,Y);else if(H==="string")Y=xZ(F,C,W,Y);else if(H==="number")Y=_Z(F,C,W,Y);else if(H==="bigint")Y=fZ(F,C,W,Y);else if(H==="boolean")Y=gZ(F,C,W,Y);else if(H==="object"&&W._bsontype==null)if(W instanceof Date||o9(W))Y=bZ(F,C,W,Y);else if(W instanceof Uint8Array||r9(W))Y=dZ(F,C,W,Y);else if(W instanceof RegExp||t9(W))Y=yZ(F,C,W,Y);else Y=cZ(F,C,W,Y,B,X,Z,J,$);else if(H==="object"){if(W[A7]!==p4)throw new F4;else if(W._bsontype==="ObjectId")Y=mZ(F,C,W,Y);else if(W._bsontype==="Decimal128")Y=lZ(F,C,W,Y);else if(W._bsontype==="Long"||W._bsontype==="Timestamp")Y=pZ(F,C,W,Y);else if(W._bsontype==="Double")Y=nZ(F,C,W,Y);else if(W._bsontype==="Code")Y=sZ(F,C,W,Y,B,X,Z,J,$);else if(W._bsontype==="Binary")Y=rZ(F,C,W,Y);else if(W._bsontype==="BSONSymbol")Y=tZ(F,C,W,Y);else if(W._bsontype==="DBRef")Y=oZ(F,C,W,Y,X,Z,$);else if(W._bsontype==="BSONRegExp")Y=hZ(F,C,W,Y);else if(W._bsontype==="Int32")Y=iZ(F,C,W,Y);else if(W._bsontype==="MinKey"||W._bsontype==="MaxKey")Y=vZ(F,C,W,Y);else if(typeof W._bsontype!=="undefined")throw new f(`Unrecognized or invalid _bsontype: ${String(W._bsontype)}`)}else if(H==="function"&&Z)Y=aZ(F,C,W,Y)}else if(A instanceof Map||BJ(A)){let G=A.entries(),C=!1;while(!C){let W=G.next();if(C=!!W.done,C)continue;let H=W.value?W.value[0]:void 0,q=W.value?W.value[1]:void 0;if(typeof q?.toBSON==="function")q=q.toBSON();let Q=typeof q;if(typeof H==="string"&&!VQ.has(H)){if(H.match(kA)!=null)throw new f("key "+H+" must not contain null bytes");if(B){if(H[0]==="$")throw new f("key "+H+" must not start with '$'");else if(H.includes("."))throw new f("key "+H+" must not contain '.'")}}if(q===void 0){if(J===!1)Y=s9(F,H,q,Y)}else if(q===null)Y=s9(F,H,q,Y);else if(Q==="string")Y=xZ(F,H,q,Y);else if(Q==="number")Y=_Z(F,H,q,Y);else if(Q==="bigint")Y=fZ(F,H,q,Y);else if(Q==="boolean")Y=gZ(F,H,q,Y);else if(Q==="object"&&q._bsontype==null)if(q instanceof Date||o9(q))Y=bZ(F,H,q,Y);else if(q instanceof Uint8Array||r9(q))Y=dZ(F,H,q,Y);else if(q instanceof RegExp||t9(q))Y=yZ(F,H,q,Y);else Y=cZ(F,H,q,Y,B,X,Z,J,$);else if(Q==="object"){if(q[A7]!==p4)throw new F4;else if(q._bsontype==="ObjectId")Y=mZ(F,H,q,Y);else if(q._bsontype==="Decimal128")Y=lZ(F,H,q,Y);else if(q._bsontype==="Long"||q._bsontype==="Timestamp")Y=pZ(F,H,q,Y);else if(q._bsontype==="Double")Y=nZ(F,H,q,Y);else if(q._bsontype==="Code")Y=sZ(F,H,q,Y,B,X,Z,J,$);else if(q._bsontype==="Binary")Y=rZ(F,H,q,Y);else if(q._bsontype==="BSONSymbol")Y=tZ(F,H,q,Y);else if(q._bsontype==="DBRef")Y=oZ(F,H,q,Y,X,Z,$);else if(q._bsontype==="BSONRegExp")Y=hZ(F,H,q,Y);else if(q._bsontype==="Int32")Y=iZ(F,H,q,Y);else if(q._bsontype==="MinKey"||q._bsontype==="MaxKey")Y=vZ(F,H,q,Y);else if(typeof q._bsontype!=="undefined")throw new f(`Unrecognized or invalid _bsontype: ${String(q._bsontype)}`)}else if(Q==="function"&&Z)Y=aZ(F,H,q,Y)}}else{if(typeof A?.toBSON==="function"){if(A=A.toBSON(),A!=null&&typeof A!=="object")throw new f("toBSON function did not return an object")}for(let G of Object.keys(A)){let C=A[G];if(typeof C?.toBSON==="function")C=C.toBSON();let W=typeof C;if(typeof G==="string"&&!VQ.has(G)){if(G.match(kA)!=null)throw new f("key "+G+" must not contain null bytes");if(B){if(G[0]==="$")throw new f("key "+G+" must not start with '$'");else if(G.includes("."))throw new f("key "+G+" must not contain '.'")}}if(C===void 0){if(J===!1)Y=s9(F,G,C,Y)}else if(C===null)Y=s9(F,G,C,Y);else if(W==="string")Y=xZ(F,G,C,Y);else if(W==="number")Y=_Z(F,G,C,Y);else if(W==="bigint")Y=fZ(F,G,C,Y);else if(W==="boolean")Y=gZ(F,G,C,Y);else if(W==="object"&&C._bsontype==null)if(C instanceof Date||o9(C))Y=bZ(F,G,C,Y);else if(C instanceof Uint8Array||r9(C))Y=dZ(F,G,C,Y);else if(C instanceof RegExp||t9(C))Y=yZ(F,G,C,Y);else Y=cZ(F,G,C,Y,B,X,Z,J,$);else if(W==="object"){if(C[A7]!==p4)throw new F4;else if(C._bsontype==="ObjectId")Y=mZ(F,G,C,Y);else if(C._bsontype==="Decimal128")Y=lZ(F,G,C,Y);else if(C._bsontype==="Long"||C._bsontype==="Timestamp")Y=pZ(F,G,C,Y);else if(C._bsontype==="Double")Y=nZ(F,G,C,Y);else if(C._bsontype==="Code")Y=sZ(F,G,C,Y,B,X,Z,J,$);else if(C._bsontype==="Binary")Y=rZ(F,G,C,Y);else if(C._bsontype==="BSONSymbol")Y=tZ(F,G,C,Y);else if(C._bsontype==="DBRef")Y=oZ(F,G,C,Y,X,Z,$);else if(C._bsontype==="BSONRegExp")Y=hZ(F,G,C,Y);else if(C._bsontype==="Int32")Y=iZ(F,G,C,Y);else if(C._bsontype==="MinKey"||C._bsontype==="MaxKey")Y=vZ(F,G,C,Y);else if(typeof C._bsontype!=="undefined")throw new f(`Unrecognized or invalid _bsontype: ${String(C._bsontype)}`)}else if(W==="function"&&Z)Y=aZ(F,G,C,Y)}}$.delete(A),F[Y++]=0;let E=Y-D;return D+=D1.setInt32LE(F,D,E),Y}function Kp(F){return F!=null&&typeof F==="object"&&"_bsontype"in F&&typeof F._bsontype==="string"}var Up={$oid:F0,$binary:H1,$uuid:H1,$symbol:a4,$numberInt:w3,$numberDecimal:E2,$numberDouble:z6,$numberLong:M,$minKey:n4,$maxKey:i4,$regex:Q6,$regularExpression:Q6,$timestamp:S6};function cQ(F,A={}){if(typeof F==="number"){let D=F<=i8&&F>=n8,X=F<=wQ&&F>=RQ;if(A.relaxed||A.legacy)return F;if(Number.isInteger(F)&&!Object.is(F,-0)){if(D)return new w3(F);if(X){if(A.useBigInt64)return BigInt(F);return M.fromNumber(F)}}return new z6(F)}if(F==null||typeof F!=="object")return F;if(F.$undefined)return null;let B=Object.keys(F).filter((D)=>D.startsWith("$")&&F[D]!=null);for(let D=0;D<B.length;D++){let X=Up[B[D]];if(X)return X.fromExtendedJSON(F,A)}if(F.$date!=null){let D=F.$date,X=new Date;if(A.legacy)if(typeof D==="number")X.setTime(D);else if(typeof D==="string")X.setTime(Date.parse(D));else if(typeof D==="bigint")X.setTime(Number(D));else throw new l8(`Unrecognized type for EJSON date: ${typeof D}`);else if(typeof D==="string")X.setTime(Date.parse(D));else if(M.isLong(D))X.setTime(D.toNumber());else if(typeof D==="number"&&A.relaxed)X.setTime(D);else if(typeof D==="bigint")X.setTime(Number(D));else throw new l8(`Unrecognized type for EJSON date: ${typeof D}`);return X}if(F.$code!=null){let D=Object.assign({},F);if(F.$scope)D.$scope=cQ(F.$scope);return L3.fromExtendedJSON(F)}if(hQ(F)||F.$dbPointer){let D=F.$ref?F:F.$dbPointer;if(D instanceof F3)return D;let X=Object.keys(D).filter((J)=>J.startsWith("$")),Z=!0;if(X.forEach((J)=>{if(["$ref","$id","$db"].indexOf(J)===-1)Z=!1}),Z)return F3.fromExtendedJSON(D)}return F}function Vp(F,A){return F.map((B,D)=>{A.seenObjects.push({propertyName:`index ${D}`,obj:null});try{return V3(B,A)}finally{A.seenObjects.pop()}})}function LQ(F){let A=F.toISOString();return F.getUTCMilliseconds()!==0?A:A.slice(0,-5)+"Z"}function V3(F,A){if(F instanceof Map||BJ(F)){let B=Object.create(null);for(let[D,X]of F){if(typeof D!=="string")throw new f("Can only serialize maps with string keys");B[D]=X}return V3(B,A)}if((typeof F==="object"||typeof F==="function")&&F!==null){let B=A.seenObjects.findIndex((D)=>D.obj===F);if(B!==-1){let D=A.seenObjects.map((G)=>G.propertyName),X=D.slice(0,B).map((G)=>`${G} -> `).join(""),Z=D[B],J=" -> "+D.slice(B+1,D.length-1).map((G)=>`${G} -> `).join(""),$=D[D.length-1],Y=" ".repeat(X.length+Z.length/2),E="-".repeat(J.length+(Z.length+$.length)/2-1);throw new f(`Converting circular structure to EJSON:
    ${X}${Z}${J}${$}
    ${Y}\\${E}/`)}A.seenObjects[A.seenObjects.length-1].obj=F}if(Array.isArray(F))return Vp(F,A);if(F===void 0)return null;if(F instanceof Date||o9(F)){let B=F.getTime(),D=B>-1&&B<253402318800000;if(A.legacy)return A.relaxed&&D?{$date:F.getTime()}:{$date:LQ(F)};return A.relaxed&&D?{$date:LQ(F)}:{$date:{$numberLong:F.getTime().toString()}}}if(typeof F==="number"&&(!A.relaxed||!isFinite(F))){if(Number.isInteger(F)&&!Object.is(F,-0)){if(F>=n8&&F<=i8)return{$numberInt:F.toString()};if(F>=RQ&&F<=wQ)return{$numberLong:F.toString()}}return{$numberDouble:Object.is(F,-0)?"-0.0":F.toString()}}if(typeof F==="bigint"){if(!A.relaxed)return{$numberLong:BigInt.asIntN(64,F).toString()};return Number(BigInt.asIntN(64,F))}if(F instanceof RegExp||t9(F)){let B=F.flags;if(B===void 0){let X=F.toString().match(/[gimuy]*$/);if(X)B=X[0]}return new Q6(F.source,B).toExtendedJSON(A)}if(F!=null&&typeof F==="object")return wp(F,A);return F}var Lp={Binary:(F)=>new H1(F.value(),F.sub_type),Code:(F)=>new L3(F.code,F.scope),DBRef:(F)=>new F3(F.collection||F.namespace,F.oid,F.db,F.fields),Decimal128:(F)=>new E2(F.bytes),Double:(F)=>new z6(F.value),Int32:(F)=>new w3(F.value),Long:(F)=>M.fromBits(F.low!=null?F.low:F.low_,F.low!=null?F.high:F.high_,F.low!=null?F.unsigned:F.unsigned_),MaxKey:()=>new i4,MinKey:()=>new n4,ObjectId:(F)=>new F0(F),BSONRegExp:(F)=>new Q6(F.pattern,F.options),BSONSymbol:(F)=>new a4(F.value),Timestamp:(F)=>S6.fromBits(F.low,F.high)};function wp(F,A){if(F==null||typeof F!=="object")throw new f("not an object instance");let B=F._bsontype;if(typeof B==="undefined"){let D={};for(let X of Object.keys(F)){A.seenObjects.push({propertyName:X,obj:null});try{let Z=V3(F[X],A);if(X==="__proto__")Object.defineProperty(D,X,{value:Z,writable:!0,enumerable:!0,configurable:!0});else D[X]=Z}finally{A.seenObjects.pop()}}return D}else if(F!=null&&typeof F==="object"&&typeof F._bsontype==="string"&&F[A7]!==p4)throw new F4;else if(Kp(F)){let D=F;if(typeof D.toExtendedJSON!=="function"){let X=Lp[F._bsontype];if(!X)throw new f("Unrecognized or invalid _bsontype: "+F._bsontype);D=X(D)}if(B==="Code"&&D.scope)D=new L3(D.code,V3(D.scope,A));else if(B==="DBRef"&&D.oid)D=new F3(V3(D.collection,A),V3(D.oid,A),V3(D.db,A),V3(D.fields,A));return D.toExtendedJSON(A)}else throw new f("_bsontype must be a string, but was: "+typeof B)}function lQ(F,A){let B={useBigInt64:A?.useBigInt64??!1,relaxed:A?.relaxed??!0,legacy:A?.legacy??!1};return JSON.parse(F,(D,X)=>{if(D.indexOf("\x00")!==-1)throw new f(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(D)}`);return cQ(X,B)})}function pQ(F,A,B,D){if(B!=null&&typeof B==="object")D=B,B=0;if(A!=null&&typeof A==="object"&&!Array.isArray(A))D=A,A=void 0,B=0;let X=Object.assign({relaxed:!0,legacy:!1},D,{seenObjects:[{propertyName:"(root)",obj:null}]}),Z=V3(F,X);return JSON.stringify(Z,A,B)}function Rp(F,A){return A=A||{},JSON.parse(pQ(F,A))}function Pp(F,A){return A=A||{},lQ(JSON.stringify(F),A)}var s4=Object.create(null);s4.parse=lQ;s4.stringify=pQ;s4.serialize=Rp;s4.deserialize=Pp;Object.freeze(s4);var Y0={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function eZ(F,A){try{return D1.getNonnegativeInt32LE(F,A)}catch(B){throw new O6("BSON size cannot be negative",A,{cause:B})}}function FJ(F,A){let B=A;for(;F[B]!==0;B++);if(B===F.length-1)throw new O6("Null terminator not found",A);return B}function Ip(F,A=0){if(A??=0,F.length<5)throw new O6(`Input must be at least 5 bytes, got ${F.length} bytes`,A);let B=eZ(F,A);if(B>F.length-A)throw new O6(`Parsed documentSize (${B} bytes) does not match input length (${F.length} bytes)`,A);if(F[A+B-1]!==0)throw new O6("BSON documents must end in 0x00",A+B);let D=[],X=A+4;while(X<=B+A){let Z=F[X];if(X+=1,Z===0){if(X-A!==B)throw new O6("Invalid 0x00 type byte",X);break}let J=X,$=FJ(F,X)-J;X+=$+1;let Y;if(Z===Y0.double||Z===Y0.long||Z===Y0.date||Z===Y0.timestamp)Y=8;else if(Z===Y0.int)Y=4;else if(Z===Y0.objectId)Y=12;else if(Z===Y0.decimal)Y=16;else if(Z===Y0.bool)Y=1;else if(Z===Y0.null||Z===Y0.undefined||Z===Y0.maxKey||Z===Y0.minKey)Y=0;else if(Z===Y0.regex)Y=FJ(F,FJ(F,X)+1)+1-X;else if(Z===Y0.object||Z===Y0.array||Z===Y0.javascriptWithScope)Y=eZ(F,X);else if(Z===Y0.string||Z===Y0.binData||Z===Y0.dbPointer||Z===Y0.javascript||Z===Y0.symbol){if(Y=eZ(F,X)+4,Z===Y0.binData)Y+=1;if(Z===Y0.dbPointer)Y+=12}else throw new O6(`Invalid 0x${Z.toString(16).padStart(2,"0")} type byte`,X);if(Y>B)throw new O6("value reports length larger than document",X);D.push([Z,J,$,X,Y]),X+=Y}return D}var B7=Object.create(null);B7.parseToElements=Ip;B7.ByteUtils=x;B7.NumberUtils=D1;Object.freeze(B7);var iQ=17825792,e3=x.allocate(iQ);function nQ(F){if(e3.length<F)e3=x.allocate(F)}function aQ(F,A={}){let B=typeof A.checkKeys==="boolean"?A.checkKeys:!1,D=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,X=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!0,Z=typeof A.minInternalBufferSize==="number"?A.minInternalBufferSize:iQ;if(e3.length<Z)e3=x.allocate(Z);let J=a8(e3,F,B,0,0,D,X,null),$=x.allocateUnsafe(J);return $.set(e3.subarray(0,J),0),$}function sQ(F,A,B={}){let D=typeof B.checkKeys==="boolean"?B.checkKeys:!1,X=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,Z=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!0,J=typeof B.index==="number"?B.index:0,$=a8(e3,F,D,0,0,X,Z,null);return A.set(e3.subarray(0,$),J),J+$-1}function rQ(F,A={}){return dQ(x.toLocalBufferType(F),A)}function tQ(F,A={}){A=A||{};let B=typeof A.serializeFunctions==="boolean"?A.serializeFunctions:!1,D=typeof A.ignoreUndefined==="boolean"?A.ignoreUndefined:!0;return MA(F,B,D)}function oQ(F,A,B,D,X,Z){let J=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},Z),$=x.toLocalBufferType(F),Y=A;for(let E=0;E<B;E++){let G=D1.getInt32LE($,Y);J.index=Y,D[X+E]=dQ($,J),Y=Y+G}return Y}var Np=Object.freeze({__proto__:null,BSONError:f,BSONOffsetError:O6,BSONRegExp:Q6,BSONRuntimeError:l8,BSONSymbol:a4,BSONType:gQ,BSONValue:R2,BSONVersionError:F4,Binary:H1,Code:L3,DBRef:F3,Decimal128:E2,Double:z6,EJSON:s4,Int32:w3,Long:M,MaxKey:i4,MinKey:n4,ObjectId:F0,Timestamp:S6,UUID:n0,bsonType:uA,calculateObjectSize:tQ,deserialize:rQ,deserializeStream:oQ,onDemand:B7,serialize:aQ,serializeWithBufferAndIndex:sQ,setInternalBufferSize:nQ});Mp.BSON=Np;Mp.BSONError=f;Mp.BSONOffsetError=O6;Mp.BSONRegExp=Q6;Mp.BSONRuntimeError=l8;Mp.BSONSymbol=a4;Mp.BSONType=gQ;Mp.BSONValue=R2;Mp.BSONVersionError=F4;Mp.Binary=H1;Mp.Code=L3;Mp.DBRef=F3;Mp.Decimal128=E2;Mp.Double=z6;Mp.EJSON=s4;Mp.Int32=w3;Mp.Long=M;Mp.MaxKey=i4;Mp.MinKey=n4;Mp.ObjectId=F0;Mp.Timestamp=S6;Mp.UUID=n0;Mp.bsonType=uA;Mp.calculateObjectSize=tQ;Mp.deserialize=rQ;Mp.deserializeStream=oQ;Mp.onDemand=B7;Mp.serialize=aQ;Mp.serializeWithBufferAndIndex=sQ;Mp.setInternalBufferSize=nQ});var $1=z(($0)=>{Object.defineProperty($0,"__esModule",{value:!0});$0.toUTF8=$0.getBigInt64LE=$0.getFloat64LE=$0.getInt32LE=$0.UUID=$0.Timestamp=$0.serialize=$0.ObjectId=$0.MinKey=$0.MaxKey=$0.Long=$0.Int32=$0.EJSON=$0.Double=$0.deserialize=$0.Decimal128=$0.DBRef=$0.Code=$0.calculateObjectSize=$0.BSONType=$0.BSONSymbol=$0.BSONRegExp=$0.BSONError=$0.BSON=$0.Binary=void 0;$0.parseToElementsToArray=Di;$0.pluckBSONSerializeOptions=Xi;$0.resolveBSONOptions=Zi;$0.parseUtf8ValidationOption=Ji;var s8=GJ(),L0=GJ();Object.defineProperty($0,"Binary",{enumerable:!0,get:function(){return L0.Binary}});Object.defineProperty($0,"BSON",{enumerable:!0,get:function(){return L0.BSON}});Object.defineProperty($0,"BSONError",{enumerable:!0,get:function(){return L0.BSONError}});Object.defineProperty($0,"BSONRegExp",{enumerable:!0,get:function(){return L0.BSONRegExp}});Object.defineProperty($0,"BSONSymbol",{enumerable:!0,get:function(){return L0.BSONSymbol}});Object.defineProperty($0,"BSONType",{enumerable:!0,get:function(){return L0.BSONType}});Object.defineProperty($0,"calculateObjectSize",{enumerable:!0,get:function(){return L0.calculateObjectSize}});Object.defineProperty($0,"Code",{enumerable:!0,get:function(){return L0.Code}});Object.defineProperty($0,"DBRef",{enumerable:!0,get:function(){return L0.DBRef}});Object.defineProperty($0,"Decimal128",{enumerable:!0,get:function(){return L0.Decimal128}});Object.defineProperty($0,"deserialize",{enumerable:!0,get:function(){return L0.deserialize}});Object.defineProperty($0,"Double",{enumerable:!0,get:function(){return L0.Double}});Object.defineProperty($0,"EJSON",{enumerable:!0,get:function(){return L0.EJSON}});Object.defineProperty($0,"Int32",{enumerable:!0,get:function(){return L0.Int32}});Object.defineProperty($0,"Long",{enumerable:!0,get:function(){return L0.Long}});Object.defineProperty($0,"MaxKey",{enumerable:!0,get:function(){return L0.MaxKey}});Object.defineProperty($0,"MinKey",{enumerable:!0,get:function(){return L0.MinKey}});Object.defineProperty($0,"ObjectId",{enumerable:!0,get:function(){return L0.ObjectId}});Object.defineProperty($0,"serialize",{enumerable:!0,get:function(){return L0.serialize}});Object.defineProperty($0,"Timestamp",{enumerable:!0,get:function(){return L0.Timestamp}});Object.defineProperty($0,"UUID",{enumerable:!0,get:function(){return L0.UUID}});function Di(F,A){let B=s8.BSON.onDemand.parseToElements(F,A);return Array.isArray(B)?B:[...B]}$0.getInt32LE=s8.BSON.onDemand.NumberUtils.getInt32LE;$0.getFloat64LE=s8.BSON.onDemand.NumberUtils.getFloat64LE;$0.getBigInt64LE=s8.BSON.onDemand.NumberUtils.getBigInt64LE;$0.toUTF8=s8.BSON.onDemand.ByteUtils.toUTF8;function Xi(F){let{fieldsAsRaw:A,useBigInt64:B,promoteValues:D,promoteBuffers:X,promoteLongs:Z,serializeFunctions:J,ignoreUndefined:$,bsonRegExp:Y,raw:E,enableUtf8Validation:G}=F;return{fieldsAsRaw:A,useBigInt64:B,promoteValues:D,promoteBuffers:X,promoteLongs:Z,serializeFunctions:J,ignoreUndefined:$,bsonRegExp:Y,raw:E,enableUtf8Validation:G}}function Zi(F,A){let B=A?.bsonOptions;return{raw:F?.raw??B?.raw??!1,useBigInt64:F?.useBigInt64??B?.useBigInt64??!1,promoteLongs:F?.promoteLongs??B?.promoteLongs??!0,promoteValues:F?.promoteValues??B?.promoteValues??!0,promoteBuffers:F?.promoteBuffers??B?.promoteBuffers??!1,ignoreUndefined:F?.ignoreUndefined??B?.ignoreUndefined??!1,bsonRegExp:F?.bsonRegExp??B?.bsonRegExp??!1,serializeFunctions:F?.serializeFunctions??B?.serializeFunctions??!1,fieldsAsRaw:F?.fieldsAsRaw??B?.fieldsAsRaw??{},enableUtf8Validation:F?.enableUtf8Validation??B?.enableUtf8Validation??!0}}function Ji(F){if(F?.enableUtf8Validation===!1)return{utf8:!1};return{utf8:{writeErrors:!1}}}});var l=z((SK)=>{Object.defineProperty(SK,"__esModule",{value:!0});SK.MongoWriteConcernError=SK.MongoServerSelectionError=SK.MongoSystemError=SK.MongoMissingDependencyError=SK.MongoMissingCredentialsError=SK.MongoCompatibilityError=SK.MongoInvalidArgumentError=SK.MongoParseError=SK.MongoNetworkTimeoutError=SK.MongoNetworkError=SK.MongoClientClosedError=SK.MongoTopologyClosedError=SK.MongoCursorExhaustedError=SK.MongoServerClosedError=SK.MongoCursorInUseError=SK.MongoOperationTimeoutError=SK.MongoUnexpectedServerResponseError=SK.MongoGridFSChunkError=SK.MongoGridFSStreamError=SK.MongoTailableCursorError=SK.MongoChangeStreamError=SK.MongoClientBulkWriteExecutionError=SK.MongoClientBulkWriteCursorError=SK.MongoClientBulkWriteError=SK.MongoGCPError=SK.MongoAzureError=SK.MongoOIDCError=SK.MongoAWSError=SK.MongoKerberosError=SK.MongoExpiredSessionError=SK.MongoTransactionError=SK.MongoNotConnectedError=SK.MongoDecompressionError=SK.MongoBatchReExecutionError=SK.MongoStalePrimaryError=SK.MongoRuntimeError=SK.MongoAPIError=SK.MongoDriverError=SK.MongoServerError=SK.MongoError=SK.MongoErrorLabel=SK.GET_MORE_RESUMABLE_CODES=SK.MONGODB_ERROR_CODES=SK.NODE_IS_RECOVERING_ERROR_MESSAGE=SK.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=SK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;SK.needsRetryableWriteLabel=zi;SK.isRetryableWriteError=uK;SK.isRetryableReadError=Qi;SK.isNodeShuttingDownError=wi;SK.isSDAMUnrecoverableError=Ri;SK.isNetworkTimeoutError=Pi;SK.isResumableError=Ii;SK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");SK.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");SK.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");SK.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});SK.GET_MORE_RESUMABLE_CODES=new Set([SK.MONGODB_ERROR_CODES.HostUnreachable,SK.MONGODB_ERROR_CODES.HostNotFound,SK.MONGODB_ERROR_CODES.NetworkTimeout,SK.MONGODB_ERROR_CODES.ShutdownInProgress,SK.MONGODB_ERROR_CODES.PrimarySteppedDown,SK.MONGODB_ERROR_CODES.ExceededTimeLimit,SK.MONGODB_ERROR_CODES.SocketException,SK.MONGODB_ERROR_CODES.NotWritablePrimary,SK.MONGODB_ERROR_CODES.InterruptedAtShutdown,SK.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,SK.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,SK.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,SK.MONGODB_ERROR_CODES.StaleShardVersion,SK.MONGODB_ERROR_CODES.StaleEpoch,SK.MONGODB_ERROR_CODES.StaleConfig,SK.MONGODB_ERROR_CODES.RetryChangeStream,SK.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,SK.MONGODB_ERROR_CODES.CursorNotFound]);SK.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequestedRetry:"PoolRequestedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function qi(F){return F!=null&&typeof F==="object"&&"errors"in F&&Array.isArray(F.errors)}class A3 extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(F,A){super(F,A);this.errorLabelSet=new Set}static buildErrorMessage(F){if(typeof F==="string")return F;if(qi(F)&&F.message.length===0)return F.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":F.errors.map(({message:A})=>A).join(", ");return F!=null&&typeof F==="object"&&"message"in F&&typeof F.message==="string"?F.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(F){return this.errorLabelSet.has(F)}addErrorLabel(F){this.errorLabelSet.add(F)}}SK.MongoError=A3;class OA extends A3{constructor(F){super(F.message||F.errmsg||F.$err||"n/a");if(F.errorLabels)for(let A of F.errorLabels)this.addErrorLabel(A);this.errorResponse=F;for(let A in F)if(A!=="errorLabels"&&A!=="errmsg"&&A!=="message"&&A!=="errorResponse")this[A]=F[A]}get name(){return"MongoServerError"}}SK.MongoServerError=OA;class D7 extends A3{constructor(F,A){super(F,A)}get name(){return"MongoDriverError"}}SK.MongoDriverError=D7;class G2 extends D7{constructor(F,A){super(F,A)}get name(){return"MongoAPIError"}}SK.MongoAPIError=G2;class o2 extends D7{constructor(F,A){super(F,A)}get name(){return"MongoRuntimeError"}}SK.MongoRuntimeError=o2;class FK extends o2{constructor(F,A){super(F,A)}get name(){return"MongoStalePrimaryError"}}SK.MongoStalePrimaryError=FK;class AK extends G2{constructor(F="This batch has already been executed, create new batch to execute"){super(F)}get name(){return"MongoBatchReExecutionError"}}SK.MongoBatchReExecutionError=AK;class BK extends o2{constructor(F){super(F)}get name(){return"MongoDecompressionError"}}SK.MongoDecompressionError=BK;class DK extends G2{constructor(F){super(F)}get name(){return"MongoNotConnectedError"}}SK.MongoNotConnectedError=DK;class XK extends G2{constructor(F){super(F)}get name(){return"MongoTransactionError"}}SK.MongoTransactionError=XK;class ZK extends G2{constructor(F="Cannot use a session that has ended"){super(F)}get name(){return"MongoExpiredSessionError"}}SK.MongoExpiredSessionError=ZK;class JK extends o2{constructor(F){super(F)}get name(){return"MongoKerberosError"}}SK.MongoKerberosError=JK;class YK extends o2{constructor(F,A){super(F,A)}get name(){return"MongoAWSError"}}SK.MongoAWSError=YK;class SA extends o2{constructor(F){super(F)}get name(){return"MongoOIDCError"}}SK.MongoOIDCError=SA;class $K extends SA{constructor(F){super(F)}get name(){return"MongoAzureError"}}SK.MongoAzureError=$K;class EK extends SA{constructor(F){super(F)}get name(){return"MongoGCPError"}}SK.MongoGCPError=EK;class GK extends OA{constructor(F){super(F);this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}}SK.MongoClientBulkWriteError=GK;class CK extends o2{constructor(F){super(F)}get name(){return"MongoClientBulkWriteCursorError"}}SK.MongoClientBulkWriteCursorError=CK;class WK extends o2{constructor(F){super(F)}get name(){return"MongoClientBulkWriteExecutionError"}}SK.MongoClientBulkWriteExecutionError=WK;class HK extends o2{constructor(F){super(F)}get name(){return"MongoChangeStreamError"}}SK.MongoChangeStreamError=HK;class qK extends G2{constructor(F="Tailable cursor does not support this operation"){super(F)}get name(){return"MongoTailableCursorError"}}SK.MongoTailableCursorError=qK;class zK extends o2{constructor(F){super(F)}get name(){return"MongoGridFSStreamError"}}SK.MongoGridFSStreamError=zK;class QK extends o2{constructor(F){super(F)}get name(){return"MongoGridFSChunkError"}}SK.MongoGridFSChunkError=QK;class KK extends o2{constructor(F,A){super(F,A)}get name(){return"MongoUnexpectedServerResponseError"}}SK.MongoUnexpectedServerResponseError=KK;class UK extends D7{get name(){return"MongoOperationTimeoutError"}}SK.MongoOperationTimeoutError=UK;class VK extends G2{constructor(F="Cursor is already initialized"){super(F)}get name(){return"MongoCursorInUseError"}}SK.MongoCursorInUseError=VK;class LK extends G2{constructor(F="Server is closed"){super(F)}get name(){return"MongoServerClosedError"}}SK.MongoServerClosedError=LK;class wK extends G2{constructor(F){super(F||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}}SK.MongoCursorExhaustedError=wK;class RK extends G2{constructor(F="Topology is closed"){super(F)}get name(){return"MongoTopologyClosedError"}}SK.MongoTopologyClosedError=RK;class PK extends G2{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}}SK.MongoClientClosedError=PK;class r4 extends A3{constructor(F,A){super(F,{cause:A?.cause});this.beforeHandshake=!!A?.beforeHandshake}get name(){return"MongoNetworkError"}}SK.MongoNetworkError=r4;class IK extends r4{constructor(F,A){super(F,A)}get name(){return"MongoNetworkTimeoutError"}}SK.MongoNetworkTimeoutError=IK;class WJ extends D7{constructor(F){super(F)}get name(){return"MongoParseError"}}SK.MongoParseError=WJ;class NK extends G2{constructor(F,A){super(F,A)}get name(){return"MongoInvalidArgumentError"}}SK.MongoInvalidArgumentError=NK;class MK extends G2{constructor(F){super(F)}get name(){return"MongoCompatibilityError"}}SK.MongoCompatibilityError=MK;class jK extends G2{constructor(F){super(F)}get name(){return"MongoMissingCredentialsError"}}SK.MongoMissingCredentialsError=jK;class TK extends G2{constructor(F,A){super(F,A);this.dependencyName=A.dependencyName}get name(){return"MongoMissingDependencyError"}}SK.MongoMissingDependencyError=TK;class HJ extends A3{constructor(F,A){if(A&&A.error)super(A3.buildErrorMessage(A.error.message||A.error),{cause:A.error});else super(F);if(A)this.reason=A;this.code=A.error?.code}get name(){return"MongoSystemError"}}SK.MongoSystemError=HJ;class qJ extends HJ{constructor(F,A){super(F,A)}get name(){return"MongoServerSelectionError"}}SK.MongoServerSelectionError=qJ;class zJ extends OA{constructor(F){super({...F.writeConcernError,...F});this.errInfo=F.writeConcernError.errInfo,this.result=F}get name(){return"MongoWriteConcernError"}}SK.MongoWriteConcernError=zJ;var kK=new Set([SK.MONGODB_ERROR_CODES.HostUnreachable,SK.MONGODB_ERROR_CODES.HostNotFound,SK.MONGODB_ERROR_CODES.NetworkTimeout,SK.MONGODB_ERROR_CODES.ShutdownInProgress,SK.MONGODB_ERROR_CODES.PrimarySteppedDown,SK.MONGODB_ERROR_CODES.SocketException,SK.MONGODB_ERROR_CODES.NotWritablePrimary,SK.MONGODB_ERROR_CODES.InterruptedAtShutdown,SK.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,SK.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,SK.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,SK.MONGODB_ERROR_CODES.ExceededTimeLimit,SK.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),CJ=kK;function zi(F,A,B){if(F instanceof r4)return!0;if(F instanceof A3){if((A>=9||uK(F))&&!F.hasErrorLabel(SK.MongoErrorLabel.HandshakeError))return!1}if(F instanceof zJ){if(B==="Mongos"&&A<9)return CJ.has(F.result.code??0);let Z=F.result.writeConcernError.code??Number(F.code);return CJ.has(Number.isNaN(Z)?0:Z)}if(F instanceof A3)return CJ.has(Number(F.code));if(SK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message))return!0;if(SK.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message))return!0;return!1}function uK(F){return F.hasErrorLabel(SK.MongoErrorLabel.RetryableWriteError)||F.hasErrorLabel(SK.MongoErrorLabel.PoolRequestedRetry)}function Qi(F){if(typeof F.code==="number"?kK.has(F.code):!1)return!0;if(F instanceof r4)return!0;if(SK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message))return!0;if(SK.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message))return!0;return!1}var Ki=new Set([SK.MONGODB_ERROR_CODES.ShutdownInProgress,SK.MONGODB_ERROR_CODES.PrimarySteppedDown,SK.MONGODB_ERROR_CODES.InterruptedAtShutdown,SK.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,SK.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),Ui=new Set([SK.MONGODB_ERROR_CODES.NotWritablePrimary,SK.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,SK.MONGODB_ERROR_CODES.LegacyNotPrimary]),Vi=new Set([SK.MONGODB_ERROR_CODES.InterruptedAtShutdown,SK.MONGODB_ERROR_CODES.ShutdownInProgress]);function OK(F){if(typeof F.code==="number")return Ki.has(F.code);return SK.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(F.message)||SK.NODE_IS_RECOVERING_ERROR_MESSAGE.test(F.message)}function Li(F){if(typeof F.code==="number")return Ui.has(F.code);if(OK(F))return!1;return SK.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(F.message)}function wi(F){return!!(typeof F.code==="number"&&Vi.has(F.code))}function Ri(F){if(F instanceof WJ||F==null)return!0;return OK(F)||Li(F)}function Pi(F){return!!(F instanceof r4&&F.message.match(/timed out/))}function Ii(F,A){if(F==null||!(F instanceof A3))return!1;if(F instanceof r4)return!0;if(F instanceof qJ)return!0;if(A!=null&&A>=9){if(F.code===SK.MONGODB_ERROR_CODES.CursorNotFound)return!0;return F.hasErrorLabel(SK.MongoErrorLabel.ResumableChangeStreamError)}if(typeof F.code==="number")return SK.GET_MORE_RESUMABLE_CODES.has(F.code);return!1}});var R3=z((gK)=>{Object.defineProperty(gK,"__esModule",{value:!0});gK.OP_MSG=gK.OP_COMPRESSED=gK.OP_DELETE=gK.OP_QUERY=gK.OP_INSERT=gK.OP_UPDATE=gK.OP_REPLY=gK.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=gK.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=gK.MIN_SUPPORTED_QE_SERVER_VERSION=gK.MIN_SUPPORTED_QE_WIRE_VERSION=gK.MAX_SUPPORTED_WIRE_VERSION=gK.MIN_SUPPORTED_WIRE_VERSION=gK.MIN_SUPPORTED_SNAPSHOT_READS_SERVER_VERSION=gK.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION=gK.MAX_SUPPORTED_SERVER_VERSION=gK.MIN_SUPPORTED_SERVER_VERSION=void 0;gK.MIN_SUPPORTED_SERVER_VERSION="4.2";gK.MAX_SUPPORTED_SERVER_VERSION="8.2";gK.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION=13;gK.MIN_SUPPORTED_SNAPSHOT_READS_SERVER_VERSION="5.0";gK.MIN_SUPPORTED_WIRE_VERSION=8;gK.MAX_SUPPORTED_WIRE_VERSION=27;gK.MIN_SUPPORTED_QE_WIRE_VERSION=21;gK.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";gK.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;gK.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";gK.OP_REPLY=1;gK.OP_UPDATE=2001;gK.OP_INSERT=2002;gK.OP_QUERY=2004;gK.OP_DELETE=2006;gK.OP_COMPRESSED=2012;gK.OP_MSG=2013});var w0=z((yK)=>{Object.defineProperty(yK,"__esModule",{value:!0});yK.END=yK.CHANGE=yK.INIT=yK.MORE=yK.RESPONSE=yK.SERVER_HEARTBEAT_FAILED=yK.SERVER_HEARTBEAT_SUCCEEDED=yK.SERVER_HEARTBEAT_STARTED=yK.COMMAND_FAILED=yK.COMMAND_SUCCEEDED=yK.COMMAND_STARTED=yK.CLUSTER_TIME_RECEIVED=yK.CONNECTION_CHECKED_IN=yK.CONNECTION_CHECKED_OUT=yK.CONNECTION_CHECK_OUT_FAILED=yK.CONNECTION_CHECK_OUT_STARTED=yK.CONNECTION_CLOSED=yK.CONNECTION_READY=yK.CONNECTION_CREATED=yK.CONNECTION_POOL_READY=yK.CONNECTION_POOL_CLEARED=yK.CONNECTION_POOL_CLOSED=yK.CONNECTION_POOL_CREATED=yK.WAITING_FOR_SUITABLE_SERVER=yK.SERVER_SELECTION_SUCCEEDED=yK.SERVER_SELECTION_FAILED=yK.SERVER_SELECTION_STARTED=yK.TOPOLOGY_DESCRIPTION_CHANGED=yK.TOPOLOGY_CLOSED=yK.TOPOLOGY_OPENING=yK.SERVER_DESCRIPTION_CHANGED=yK.SERVER_CLOSED=yK.SERVER_OPENING=yK.DESCRIPTION_RECEIVED=yK.UNPINNED=yK.PINNED=yK.MESSAGE=yK.ENDED=yK.CLOSED=yK.CONNECT=yK.OPEN=yK.CLOSE=yK.TIMEOUT=yK.ERROR=yK.SYSTEM_JS_COLLECTION=yK.SYSTEM_COMMAND_COLLECTION=yK.SYSTEM_USER_COLLECTION=yK.SYSTEM_PROFILE_COLLECTION=yK.SYSTEM_INDEX_COLLECTION=yK.SYSTEM_NAMESPACE_COLLECTION=void 0;yK.kDecoratedKeys=yK.kDecorateResult=yK.LEGACY_HELLO_COMMAND_CAMEL_CASE=yK.LEGACY_HELLO_COMMAND=yK.MONGO_CLIENT_EVENTS=yK.LOCAL_SERVER_EVENTS=yK.SERVER_RELAY_EVENTS=yK.APM_EVENTS=yK.TOPOLOGY_EVENTS=yK.CMAP_EVENTS=yK.HEARTBEAT_EVENTS=yK.RESUME_TOKEN_CHANGED=void 0;yK.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";yK.SYSTEM_INDEX_COLLECTION="system.indexes";yK.SYSTEM_PROFILE_COLLECTION="system.profile";yK.SYSTEM_USER_COLLECTION="system.users";yK.SYSTEM_COMMAND_COLLECTION="$cmd";yK.SYSTEM_JS_COLLECTION="system.js";yK.ERROR="error";yK.TIMEOUT="timeout";yK.CLOSE="close";yK.OPEN="open";yK.CONNECT="connect";yK.CLOSED="closed";yK.ENDED="ended";yK.MESSAGE="message";yK.PINNED="pinned";yK.UNPINNED="unpinned";yK.DESCRIPTION_RECEIVED="descriptionReceived";yK.SERVER_OPENING="serverOpening";yK.SERVER_CLOSED="serverClosed";yK.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";yK.TOPOLOGY_OPENING="topologyOpening";yK.TOPOLOGY_CLOSED="topologyClosed";yK.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";yK.SERVER_SELECTION_STARTED="serverSelectionStarted";yK.SERVER_SELECTION_FAILED="serverSelectionFailed";yK.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";yK.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";yK.CONNECTION_POOL_CREATED="connectionPoolCreated";yK.CONNECTION_POOL_CLOSED="connectionPoolClosed";yK.CONNECTION_POOL_CLEARED="connectionPoolCleared";yK.CONNECTION_POOL_READY="connectionPoolReady";yK.CONNECTION_CREATED="connectionCreated";yK.CONNECTION_READY="connectionReady";yK.CONNECTION_CLOSED="connectionClosed";yK.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";yK.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";yK.CONNECTION_CHECKED_OUT="connectionCheckedOut";yK.CONNECTION_CHECKED_IN="connectionCheckedIn";yK.CLUSTER_TIME_RECEIVED="clusterTimeReceived";yK.COMMAND_STARTED="commandStarted";yK.COMMAND_SUCCEEDED="commandSucceeded";yK.COMMAND_FAILED="commandFailed";yK.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";yK.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";yK.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";yK.RESPONSE="response";yK.MORE="more";yK.INIT="init";yK.CHANGE="change";yK.END="end";yK.RESUME_TOKEN_CHANGED="resumeTokenChanged";yK.HEARTBEAT_EVENTS=Object.freeze([yK.SERVER_HEARTBEAT_STARTED,yK.SERVER_HEARTBEAT_SUCCEEDED,yK.SERVER_HEARTBEAT_FAILED]);yK.CMAP_EVENTS=Object.freeze([yK.CONNECTION_POOL_CREATED,yK.CONNECTION_POOL_READY,yK.CONNECTION_POOL_CLEARED,yK.CONNECTION_POOL_CLOSED,yK.CONNECTION_CREATED,yK.CONNECTION_READY,yK.CONNECTION_CLOSED,yK.CONNECTION_CHECK_OUT_STARTED,yK.CONNECTION_CHECK_OUT_FAILED,yK.CONNECTION_CHECKED_OUT,yK.CONNECTION_CHECKED_IN]);yK.TOPOLOGY_EVENTS=Object.freeze([yK.SERVER_OPENING,yK.SERVER_CLOSED,yK.SERVER_DESCRIPTION_CHANGED,yK.TOPOLOGY_OPENING,yK.TOPOLOGY_CLOSED,yK.TOPOLOGY_DESCRIPTION_CHANGED,yK.ERROR,yK.TIMEOUT,yK.CLOSE]);yK.APM_EVENTS=Object.freeze([yK.COMMAND_STARTED,yK.COMMAND_SUCCEEDED,yK.COMMAND_FAILED]);yK.SERVER_RELAY_EVENTS=Object.freeze([yK.SERVER_HEARTBEAT_STARTED,yK.SERVER_HEARTBEAT_SUCCEEDED,yK.SERVER_HEARTBEAT_FAILED,yK.COMMAND_STARTED,yK.COMMAND_SUCCEEDED,yK.COMMAND_FAILED,...yK.CMAP_EVENTS]);yK.LOCAL_SERVER_EVENTS=Object.freeze([yK.CONNECT,yK.DESCRIPTION_RECEIVED,yK.CLOSED,yK.ENDED]);yK.MONGO_CLIENT_EVENTS=Object.freeze([...yK.CMAP_EVENTS,...yK.APM_EVENTS,...yK.TOPOLOGY_EVENTS,...yK.HEARTBEAT_EVENTS]);yK.LEGACY_HELLO_COMMAND="ismaster";yK.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";yK.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");yK.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var x6=z((qU)=>{Object.defineProperty(qU,"__esModule",{value:!0});qU.ReadConcern=qU.ReadConcernLevel=void 0;qU.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});class Z7{constructor(F){this.level=qU.ReadConcernLevel[F]??F}static fromOptions(F){if(F==null)return;if(F.readConcern){let{readConcern:A}=F;if(A instanceof Z7)return A;else if(typeof A==="string")return new Z7(A);else if("level"in A&&A.level)return new Z7(A.level)}if(F.level)return new Z7(F.level);return}static get MAJORITY(){return qU.ReadConcernLevel.majority}static get AVAILABLE(){return qU.ReadConcernLevel.available}static get LINEARIZABLE(){return qU.ReadConcernLevel.linearizable}static get SNAPSHOT(){return qU.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}}qU.ReadConcern=Z7});var _0=z((QU)=>{Object.defineProperty(QU,"__esModule",{value:!0});QU.ReadPreference=QU.ReadPreferenceMode=void 0;var t4=l();QU.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});class p1{static{this.PRIMARY=QU.ReadPreferenceMode.primary}static{this.PRIMARY_PREFERRED=QU.ReadPreferenceMode.primaryPreferred}static{this.SECONDARY=QU.ReadPreferenceMode.secondary}static{this.SECONDARY_PREFERRED=QU.ReadPreferenceMode.secondaryPreferred}static{this.NEAREST=QU.ReadPreferenceMode.nearest}static{this.primary=new p1(QU.ReadPreferenceMode.primary)}static{this.primaryPreferred=new p1(QU.ReadPreferenceMode.primaryPreferred)}static{this.secondary=new p1(QU.ReadPreferenceMode.secondary)}static{this.secondaryPreferred=new p1(QU.ReadPreferenceMode.secondaryPreferred)}static{this.nearest=new p1(QU.ReadPreferenceMode.nearest)}constructor(F,A,B){if(!p1.isValid(F))throw new t4.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(F)}`);if(B==null&&typeof A==="object"&&!Array.isArray(A))B=A,A=void 0;else if(A&&!Array.isArray(A))throw new t4.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=F,this.tags=A,this.hedge=B?.hedge,this.maxStalenessSeconds=void 0,B=B??{},B.maxStalenessSeconds!=null){if(B.maxStalenessSeconds<=0)throw new t4.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=B.maxStalenessSeconds}if(this.mode===p1.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new t4.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new t4.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new t4.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(F){return new p1(F)}static fromOptions(F){if(!F)return;let A=F.readPreference??F.session?.transaction.options.readPreference,B=F.readPreferenceTags;if(A==null)return;if(typeof A==="string")return new p1(A,B,{maxStalenessSeconds:F.maxStalenessSeconds,hedge:F.hedge});else if(!(A instanceof p1)&&typeof A==="object"){let D=A.mode||A.preference;if(D&&typeof D==="string")return new p1(D,A.tags??B,{maxStalenessSeconds:A.maxStalenessSeconds,hedge:F.hedge})}if(B)A.tags=B;return A}static translate(F){if(F.readPreference==null)return F;let A=F.readPreference;if(typeof A==="string")F.readPreference=new p1(A);else if(A&&!(A instanceof p1)&&typeof A==="object"){let B=A.mode||A.preference;if(B&&typeof B==="string")F.readPreference=new p1(B,A.tags,{maxStalenessSeconds:A.maxStalenessSeconds})}else if(!(A instanceof p1))throw new t4.MongoInvalidArgumentError(`Invalid read preference: ${A}`);return F}static isValid(F){return new Set([p1.PRIMARY,p1.PRIMARY_PREFERRED,p1.SECONDARY,p1.SECONDARY_PREFERRED,p1.NEAREST,null]).has(F)}isValid(F){return p1.isValid(typeof F==="string"?F:this.mode)}secondaryOk(){return new Set([p1.PRIMARY_PREFERRED,p1.SECONDARY,p1.SECONDARY_PREFERRED,p1.NEAREST]).has(this.mode)}equals(F){return F.mode===this.mode}toJSON(){let F={mode:this.mode};if(Array.isArray(this.tags))F.tags=this.tags;if(this.maxStalenessSeconds)F.maxStalenessSeconds=this.maxStalenessSeconds;if(this.hedge)F.hedge=this.hedge;return F}}QU.ReadPreference=p1});var e2=z((UU)=>{Object.defineProperty(UU,"__esModule",{value:!0});UU.ServerType=UU.TopologyType=UU.STATE_CONNECTED=UU.STATE_CONNECTING=UU.STATE_CLOSED=UU.STATE_CLOSING=void 0;UU._advanceClusterTime=Ja;UU.STATE_CLOSING="closing";UU.STATE_CLOSED="closed";UU.STATE_CONNECTING="connecting";UU.STATE_CONNECTED="connected";UU.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});UU.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function Ja(F,A){if(F.clusterTime==null)F.clusterTime=A;else if(A.clusterTime.greaterThan(F.clusterTime.clusterTime))F.clusterTime=A}});var P2=z((wU)=>{Object.defineProperty(wU,"__esModule",{value:!0});wU.WriteConcern=wU.WRITE_CONCERN_KEYS=void 0;wU.throwIfWriteConcernError=qa;var LU=f1(),Ha=l();wU.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];class t8{constructor(F,A,B,D){if(F!=null)if(!Number.isNaN(Number(F)))this.w=Number(F);else this.w=F;if(A!=null)this.wtimeoutMS=this.wtimeout=A;if(B!=null)this.journal=this.j=B;if(D!=null)this.journal=this.j=D?!0:!1}static apply(F,A){let B={};if(A.w!=null)B.w=A.w;if(A.wtimeoutMS!=null)B.wtimeout=A.wtimeoutMS;if(A.journal!=null)B.j=A.j;return F.writeConcern=B,F}static fromOptions(F,A){if(F==null)return;A=A??{};let B;if(typeof F==="string"||typeof F==="number")B={w:F};else if(F instanceof t8)B=F;else B=F.writeConcern;let X={...A instanceof t8?A:A.writeConcern,...B},{w:Z=void 0,wtimeout:J=void 0,j:$=void 0,fsync:Y=void 0,journal:E=void 0,wtimeoutMS:G=void 0}=X;if(Z!=null||J!=null||G!=null||$!=null||E!=null||Y!=null)return new t8(Z,J??G,$??E,Y);return}}wU.WriteConcern=t8;function qa(F){if(typeof F==="object"&&F!=null){let A=LU.MongoDBResponse.is(F)&&F.has("writeConcernError")?F.toObject():!LU.MongoDBResponse.is(F)&&("writeConcernError"in F)?F:null;if(A!=null)throw new Ha.MongoWriteConcernError(A)}}});var s=z((fU)=>{Object.defineProperty(fU,"__esModule",{value:!0});fU.kDispose=fU.randomBytes=fU.COSMOS_DB_MSG=fU.DOCUMENT_DB_MSG=fU.COSMOS_DB_CHECK=fU.DOCUMENT_DB_CHECK=fU.MONGODB_WARNING_CODE=fU.DEFAULT_PK_FACTORY=fU.HostAddress=fU.BufferPool=fU.List=fU.MongoDBCollectionNamespace=fU.MongoDBNamespace=fU.ByteUtils=void 0;fU.isUint8Array=Ia;fU.hostMatchesWildcards=Na;fU.normalizeHintField=Ma;fU.isObject=IJ;fU.mergeOptions=Ta;fU.filterOptions=ka;fU.isPromiseLike=ua;fU.decorateWithCollation=Oa;fU.decorateWithReadConcern=Sa;fU.getTopology=xa;fU.ns=_a;fU.makeCounter=fa;fU.uuidV4=ga;fU.maxWireVersion=ba;fU.arrayStrictEqual=ya;fU.errorStrictEqual=ha;fU.makeStateMachine=va;fU.now=TU;fU.calculateDurationInMs=ma;fU.hasAtomicOperators=kU;fU.resolveTimeoutOptions=da;fU.resolveOptions=ca;fU.isSuperset=uU;fU.isHello=la;fU.setDifference=pa;fU.isRecord=na;fU.emitWarning=SU;fU.emitWarningOnce=aa;fU.enumToString=sa;fU.supportsRetryableWrites=ra;fU.shuffle=ta;fU.commandSupportsReadConcern=oa;fU.compareObjectId=ea;fU.parseInteger=xU;fU.parseUnsignedInteger=Fs;fU.checkParentDomainMatch=As;fU.get=Bs;fU.request=Ds;fU.isHostMatch=Xs;fU.promiseWithResolvers=TJ;fU.squashError=Zs;fU.once=Js;fU.maybeAddIdToDocuments=Ys;fU.fileIsAccessible=$s;fU.csotMin=Es;fU.noop=Gs;fU.decorateDecryptionResult=_U;fU.addAbortListener=kJ;fU.abortable=Cs;var MU=c("crypto"),Ka=c("fs"),jU=c("http"),PJ=c("timers"),Ua=c("url"),Va=c("url"),La=c("util"),NJ=$1(),PU=R3(),fA=w0(),I2=l(),wa=x6(),Ra=_0(),Pa=e2(),IU=P2();fU.ByteUtils={toLocalBufferType(F){return Buffer.isBuffer(F)?F:Buffer.from(F.buffer,F.byteOffset,F.byteLength)},equals(F,A){return fU.ByteUtils.toLocalBufferType(F).equals(A)},compare(F,A){return fU.ByteUtils.toLocalBufferType(F).compare(A)},toBase64(F){return fU.ByteUtils.toLocalBufferType(F).toString("base64")}};function Ia(F){return F!=null&&typeof F==="object"&&Symbol.toStringTag in F&&F[Symbol.toStringTag]==="Uint8Array"}function Na(F,A){for(let B of A)if(F===B||B.startsWith("*.")&&F?.endsWith(B.substring(2,B.length))||B.startsWith("*/")&&F?.endsWith(B.substring(2,B.length)))return!0;return!1}function Ma(F){let A=void 0;if(typeof F==="string")A=F;else if(Array.isArray(F))A={},F.forEach((B)=>{A[B]=1});else if(F!=null&&typeof F==="object"){A={};for(let B in F)A[B]=F[B]}return A}var ja=(F)=>Object.prototype.toString.call(F);function IJ(F){return ja(F)==="[object Object]"}function Ta(F,A){return{...F,...A}}function ka(F,A){let B={};for(let D in F)if(A.includes(D))B[D]=F[D];return B}function ua(F){return F!=null&&typeof F==="object"&&"then"in F&&typeof F.then==="function"}function Oa(F,A){if(A.collation&&typeof A.collation==="object")F.collation=A.collation}function Sa(F,A,B){if(B&&B.session&&B.session.inTransaction())return;let D=Object.assign({},F.readConcern||{});if(A.s.readConcern)Object.assign(D,A.s.readConcern);if(Object.keys(D).length>0)Object.assign(F,{readConcern:D})}function xa(F){if("topology"in F&&F.topology)return F.topology;else if("client"in F&&F.client.topology)return F.client.topology;throw new I2.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function _a(F){return F5.fromString(F)}class F5{constructor(F,A){this.db=F,this.collection=A===""?void 0:A}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(F){return new MJ(this.db,F)}static fromString(F){if(typeof F!=="string"||F==="")throw new I2.MongoRuntimeError(`Cannot parse namespace from "${F}"`);let[A,...B]=F.split("."),D=B.join(".");return new F5(A,D===""?void 0:D)}}fU.MongoDBNamespace=F5;class MJ extends F5{constructor(F,A){super(F,A);this.collection=A}static fromString(F){return super.fromString(F)}}fU.MongoDBCollectionNamespace=MJ;function*fa(F=0){let A=F;while(!0){let B=A;A+=1,yield B}}function ga(){let F=MU.randomBytes(16);return F[6]=F[6]&15|64,F[8]=F[8]&63|128,F}function ba(F){if(F){if(F.hello)return F.hello.maxWireVersion;if(F.serverApi?.version)return PU.MAX_SUPPORTED_WIRE_VERSION;if(F.loadBalanced)return PU.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in F&&typeof F.lastHello==="function"){let A=F.lastHello();if(A)return A.maxWireVersion}if(F.description&&"maxWireVersion"in F.description&&F.description.maxWireVersion!=null)return F.description.maxWireVersion}return 0}function ya(F,A){if(!Array.isArray(F)||!Array.isArray(A))return!1;return F.length===A.length&&F.every((B,D)=>B===A[D])}function ha(F,A){if(F===A)return!0;if(!F||!A)return F===A;if(F==null&&A!=null||F!=null&&A==null)return!1;if(F.constructor.name!==A.constructor.name)return!1;if(F.message!==A.message)return!1;return!0}function va(F){return function A(B,D){let X=F[B.s.state];if(X&&X.indexOf(D)<0)throw new I2.MongoRuntimeError(`illegal state transition from [${B.s.state}] => [${D}], allowed: [${X}]`);B.emit("stateChanged",B.s.state,D),B.s.state=D}}function TU(){let F=process.hrtime();return Math.floor(F[0]*1000+F[1]/1e6)}function ma(F){if(typeof F!=="number")return-1;let A=TU()-F;return A<0?0:A}function kU(F,A){if(Array.isArray(F)){for(let D of F)if(kU(D))return!0;return!1}let B=Object.keys(F);if(A?.ignoreUndefined){let D=!0;for(let X of B)if(F[X]!==void 0){D=!1;break}if(D)throw new I2.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return B.length>0&&B[0][0]==="$"}function da(F,A){let{socketTimeoutMS:B,serverSelectionTimeoutMS:D,waitQueueTimeoutMS:X,timeoutMS:Z}=F.s.options;return{socketTimeoutMS:B,serverSelectionTimeoutMS:D,waitQueueTimeoutMS:X,timeoutMS:Z,...A}}function ca(F,A){let B=Object.assign({},A,NJ.resolveBSONOptions(A,F)),D=A?.timeoutMS??F?.timeoutMS,X=A?.session;if(!X?.inTransaction()){let $=wa.ReadConcern.fromOptions(A)??F?.readConcern;if($)B.readConcern=$;let Y=IU.WriteConcern.fromOptions(A)??F?.writeConcern;if(Y){if(D!=null)Y=IU.WriteConcern.fromOptions({writeConcern:{...Y,wtimeout:void 0,wtimeoutMS:void 0}});B.writeConcern=Y}}B.timeoutMS=D;let Z=Ra.ReadPreference.fromOptions(A)??F?.readPreference;if(Z)B.readPreference=Z;if(X?.explicit&&X?.timeoutContext!=null&&A?.timeoutMS!=null)throw new I2.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return B}function uU(F,A){F=Array.isArray(F)?new Set(F):F,A=Array.isArray(A)?new Set(A):A;for(let B of A)if(!F.has(B))return!1;return!0}function la(F){return F[fA.LEGACY_HELLO_COMMAND]||F.hello?!0:!1}function pa(F,A){let B=new Set(F);for(let D of A)B.delete(D);return B}var ia=(F,A)=>Object.prototype.hasOwnProperty.call(F,A);function na(F,A=void 0){if(!IJ(F))return!1;let B=F.constructor;if(B&&B.prototype){if(!IJ(B.prototype))return!1;if(!ia(B.prototype,"isPrototypeOf"))return!1}if(A){let D=Object.keys(F);return uU(D,A)}return!0}class jJ{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let F of this.nodes())yield F.value}*nodes(){let F=this.head.next;while(F!==this.head){let{next:A}=F;yield F,F=A}}push(F){this.count+=1;let A={next:this.head,prev:this.head.prev,value:F};this.head.prev.next=A,this.head.prev=A}pushMany(F){for(let A of F)this.push(A)}unshift(F){this.count+=1;let A={next:this.head.next,prev:this.head,value:F};this.head.next.prev=A,this.head.next=A}remove(F){if(F===this.head||this.length===0)return null;this.count-=1;let{prev:A,next:B}=F;return A.next=B,B.prev=A,F.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(F){for(let A of this.nodes())if(F(A.value))this.remove(A)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}}fU.List=jJ;class OU{constructor(){this.buffers=new jJ,this.totalByteLength=0}get length(){return this.totalByteLength}append(F){this.buffers.push(F),this.totalByteLength+=F.length}getInt32(){if(this.totalByteLength<4)return null;let F=this.buffers.first();if(F!=null&&F.byteLength>=4)return F.readInt32LE(0);let A=this.read(4),B=A.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(A),B}read(F){if(typeof F!=="number"||F<0)throw new I2.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(F>this.totalByteLength)return Buffer.alloc(0);let A=Buffer.allocUnsafe(F);for(let B=0;B<F;){let D=this.buffers.shift();if(D==null)break;let X=F-B,Z=Math.min(X,D.byteLength),J=D.subarray(0,Z);if(A.set(J,B),B+=Z,this.totalByteLength-=Z,Z<D.byteLength)this.buffers.unshift(D.subarray(Z))}return A}}fU.BufferPool=OU;class e8{constructor(F){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let A=F.split(" ").join("%20");if(A.endsWith(".sock")){this.socketPath=decodeURIComponent(A);return}let B=`iLoveJS://${A}`,D;try{D=new Va.URL(B)}catch($){let Y=new I2.MongoRuntimeError(`Unable to parse ${A} with URL`);throw Y.cause=$,Y}let{hostname:X,port:Z}=D,J=decodeURIComponent(X).toLowerCase();if(J.startsWith("[")&&J.endsWith("]"))this.isIPv6=!0,J=J.substring(1,X.length-1);if(this.host=J.toLowerCase(),typeof Z==="number")this.port=Z;else if(typeof Z==="string"&&Z!=="")this.port=Number.parseInt(Z,10);else this.port=27017;if(this.port===0)throw new I2.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){if(typeof this.host==="string"){if(this.isIPv6)return`[${this.host}]:${this.port}`;return`${this.host}:${this.port}`}return`${this.socketPath}`}static fromString(F){return new e8(F)}static fromHostPort(F,A){if(F.includes(":"))F=`[${F}]`;return e8.fromString(`${F}:${A}`)}static fromSrvRecord({name:F,port:A}){return e8.fromHostPort(F,A)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let F=this.host??"",A=this.port??0;return{host:F,port:A}}}fU.HostAddress=e8;fU.DEFAULT_PK_FACTORY={createPk(){return new NJ.ObjectId}};fU.MONGODB_WARNING_CODE="MONGODB DRIVER";function SU(F){return process.emitWarning(F,{code:fU.MONGODB_WARNING_CODE})}var NU=new Set;function aa(F){if(!NU.has(F))return NU.add(F),SU(F)}function sa(F){return Object.values(F).join(", ")}function ra(F){if(!F)return!1;if(F.loadBalanced)return!0;if(F.description.logicalSessionTimeoutMinutes!=null){if(F.description.type!==Pa.ServerType.Standalone)return!0}return!1}function ta(F,A=0){let B=Array.from(F);if(A>B.length)throw new I2.MongoRuntimeError("Limit must be less than the number of items");let D=B.length,X=A%B.length===0?1:B.length-A;while(D>X){let Z=Math.floor(Math.random()*D);D-=1;let J=B[D];B[D]=B[Z],B[Z]=J}return A%B.length===0?B:B.slice(X)}function oa(F){if(F.aggregate||F.count||F.distinct||F.find||F.geoNear)return!0;return!1}function ea(F,A){if(F==null&&A==null)return 0;if(F==null)return-1;if(A==null)return 1;return fU.ByteUtils.compare(F.id,A.id)}function xU(F){if(typeof F==="number")return Math.trunc(F);let A=Number.parseInt(String(F),10);return Number.isNaN(A)?null:A}function Fs(F){let A=xU(F);return A!=null&&A>=0?A:null}function As(F,A){let B=F.endsWith(".")?F.slice(0,F.length-1):F,D=A.endsWith(".")?A.slice(0,A.length-1):A,X=/^.*?\./,Z=D.split(".").length<3,J=`.${B.replace(X,"")}`,$=Z?D:`.${D.replace(X,"")}`;if(!$.startsWith("."))$="."+$;if(Z&&B.split(".").length<=D.split(".").length)throw new I2.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!J.endsWith($))throw new I2.MongoAPIError("Server record does not share hostname with parent URI")}function Bs(F,A={}){return new Promise((B,D)=>{let X,Z=jU.get(F,A,(J)=>{J.setEncoding("utf8");let $="";J.on("data",(Y)=>$+=Y),J.on("end",()=>{PJ.clearTimeout(X),B({status:J.statusCode,body:$})})}).on("error",(J)=>{PJ.clearTimeout(X),D(J)}).end();X=PJ.setTimeout(()=>{Z.destroy(new I2.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function Ds(F,A={}){return await new Promise((B,D)=>{let X={method:"GET",timeout:1e4,json:!0,...Ua.parse(F),...A},Z=jU.request(X,(J)=>{J.setEncoding("utf8");let $="";J.on("data",(Y)=>{$+=Y}),J.once("end",()=>{if(A.json===!1){B($);return}try{let Y=JSON.parse($);B(Y)}catch{D(new I2.MongoRuntimeError(`Invalid JSON response: "${$}"`))}})});Z.once("timeout",()=>Z.destroy(new I2.MongoNetworkTimeoutError(`Network request to ${F} timed out after ${A.timeout} ms`))),Z.once("error",(J)=>D(J)),Z.end()})}fU.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;fU.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;fU.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";fU.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function Xs(F,A){return A&&F.test(A.toLowerCase())?!0:!1}function TJ(){let F,A;return{promise:new Promise(function D(X,Z){F=X,A=Z}),resolve:F,reject:A}}function Zs(F){return}fU.randomBytes=La.promisify(MU.randomBytes);async function Js(F,A,B){B?.signal?.throwIfAborted();let{promise:D,resolve:X,reject:Z}=TJ(),J=(E)=>X(E),$=(E)=>Z(E),Y=kJ(B?.signal,function(){Z(this.reason)});F.once(A,J).once("error",$);try{return await D}finally{F.off(A,J),F.off("error",$),Y?.[fU.kDispose]()}}function Ys(F,A,B){if(B.forceServerObjectId??F.db.options?.forceServerObjectId??!1)return A;if(A._id==null)A._id=F.s.pkFactory.createPk();return A}async function $s(F,A){try{return await Ka.promises.access(F,A),!0}catch{return!1}}function Es(F,A){if(F===0)return A;if(A===0)return F;return Math.min(F,A)}function Gs(){return}function _U(F,A,B=!0){if(B){if(Buffer.isBuffer(A))A=NJ.deserialize(A);if(Buffer.isBuffer(F))throw new I2.MongoRuntimeError("Expected result of decryption to be deserialized BSON object")}if(!F||typeof F!=="object")return;for(let D of Object.keys(F)){let X=A[D];if(X&&X._bsontype==="Binary"&&X.sub_type===6){if(!F[fA.kDecoratedKeys])Object.defineProperty(F,fA.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1});F[fA.kDecoratedKeys].push(D);continue}_U(F[D],X,!1)}}fU.kDispose=Symbol.dispose??Symbol("dispose");function kJ(F,A){if(F==null)return;return F.addEventListener("abort",A,{once:!0}),{[fU.kDispose]:()=>F.removeEventListener("abort",A)}}async function Cs(F,{signal:A}){if(A==null)return await F;let{promise:B,reject:D}=TJ(),X=A.aborted?D(A.reason):kJ(A,function(){D(this.reason)});try{return await Promise.race([F,B])}finally{X?.[fU.kDispose]()}}});var hU=z((bU)=>{Object.defineProperty(bU,"__esModule",{value:!0});bU.OnDemandDocument=void 0;var w1=$1(),B5={type:0,nameOffset:1,nameLength:2,offset:3,length:4};class gA{constructor(F,A=0,B=!1,D){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=F,this.offset=A,this.isArray=B,this.elements=D??w1.parseToElementsToArray(this.bson,A)}isElementName(F,A){let B=A[B5.nameLength],D=A[B5.nameOffset];if(F.length!==B)return!1;let X=D+B;for(let Z=D,J=0;J<F.length&&Z<X;J++,Z++)if(this.bson[Z]!==F.charCodeAt(J))return!1;return!0}getElement(F){let A=this.cache[F];if(A===!1)return null;if(A!=null)return A;if(typeof F==="number")if(this.isArray)if(F<this.elements.length){let D={element:this.elements[F],value:void 0};return this.cache[F]=D,this.indexFound[F]=!0,D}else return null;else return null;for(let B=0;B<this.elements.length;B++){let D=this.elements[B];if(!(B in this.indexFound)&&this.isElementName(F,D)){let X={element:D,value:void 0};return this.cache[F]=X,this.indexFound[B]=!0,X}}return this.cache[F]=!1,null}toJSValue(F,A){let B=F[B5.type],D=F[B5.offset],X=F[B5.length];if(A!==B)return null;switch(A){case w1.BSONType.null:case w1.BSONType.undefined:return null;case w1.BSONType.double:return w1.getFloat64LE(this.bson,D);case w1.BSONType.int:return w1.getInt32LE(this.bson,D);case w1.BSONType.long:return w1.getBigInt64LE(this.bson,D);case w1.BSONType.bool:return Boolean(this.bson[D]);case w1.BSONType.objectId:return new w1.ObjectId(this.bson.subarray(D,D+12));case w1.BSONType.timestamp:return new w1.Timestamp(w1.getBigInt64LE(this.bson,D));case w1.BSONType.string:return w1.toUTF8(this.bson,D+4,D+X-1,!1);case w1.BSONType.binData:{let Z=w1.getInt32LE(this.bson,D),J=this.bson[D+4];if(J===2){let $=w1.getInt32LE(this.bson,D+1+4);if($<0)throw new w1.BSONError("Negative binary type element size found for subtype 0x02");if($>Z-4)throw new w1.BSONError("Binary type with subtype 0x02 contains too long binary size");if($<Z-4)throw new w1.BSONError("Binary type with subtype 0x02 contains too short binary size");return new w1.Binary(this.bson.subarray(D+1+4+4,D+1+4+4+$),2)}return new w1.Binary(this.bson.subarray(D+1+4,D+1+4+Z),J)}case w1.BSONType.date:return new Date(Number(w1.getBigInt64LE(this.bson,D)));case w1.BSONType.object:return new gA(this.bson,D);case w1.BSONType.array:return new gA(this.bson,D,!0);default:throw new w1.BSONError(`Unsupported BSON type: ${A}`)}}size(){return this.elements.length}has(F){let A=this.cache[F];if(A===!1)return!1;if(A!=null)return!0;return this.getElement(F)!=null}get(F,A,B){let D=this.getElement(F);if(D==null)if(B===!0)throw new w1.BSONError(`BSON element "${F}" is missing`);else return null;if(D.value==null){let X=this.toJSValue(D.element,A);if(X==null)if(B===!0)throw new w1.BSONError(`BSON element "${F}" is missing`);else return null;D.value=X}return D.value}getNumber(F,A){let B=this.get(F,w1.BSONType.bool),D=B==null?null:B?1:0,X=this.get(F,w1.BSONType.long),Z=X==null?null:Number(X),J=D??Z??this.get(F,w1.BSONType.int)??this.get(F,w1.BSONType.double);if(A===!0&&J==null)throw new w1.BSONError(`BSON element "${F}" is missing`);return J}toObject(F){return w1.deserialize(this.bson,{...F,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let F=w1.getInt32LE(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+F)}}bU.OnDemandDocument=gA});var f1=z((lU)=>{Object.defineProperty(lU,"__esModule",{value:!0});lU.ClientBulkWriteCursorResponse=lU.ExplainedCursorResponse=lU.CursorResponse=lU.MongoDBResponse=void 0;lU.isErrorResponse=mU;var I1=$1(),o4=l(),vU=s(),Vr=hU(),bA={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function mU(F,A){for(let B=0;B<A.length;B++){let D=A[B];if(D[bA.nameLength]===2){let X=D[bA.nameOffset];if(F[X]===111&&F[X+1]===107){let Z=D[bA.offset],J=D[bA.length];for(let $=Z;$<Z+J;$++)if(F[$]!==0)return!1;return!0}}}return!0}class J7 extends Vr.OnDemandDocument{get(F,A,B){try{return super.get(F,A,B)}catch(D){throw new o4.MongoUnexpectedServerResponseError(D.message,{cause:D})}}static is(F){return F instanceof J7}static make(F){let A=I1.parseToElementsToArray(F,0);return mU(F,A)?new J7(F,0,!1,A):new this(F,0,!1,A)}static{this.empty=new J7(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]))}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===o4.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",I1.BSONType.object)?.getNumber("code")===o4.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let B=this.get("writeErrors",I1.BSONType.array);if(B?.size()){for(let D=0;D<B.size();D++)if(B.get(D,I1.BSONType.object)?.getNumber("code")===o4.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",I1.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",I1.BSONType.object)?.get("atClusterTime",I1.BSONType.timestamp)??this.get("atClusterTime",I1.BSONType.timestamp)}get operationTime(){return this.get("operationTime",I1.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",I1.BSONType.string)}get errmsg(){return this.get("errmsg",I1.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let F=this.get("$clusterTime",I1.BSONType.object);if(F==null)return this.clusterTime=null,null;let A=F.get("clusterTime",I1.BSONType.timestamp,!0),B=F.get("signature",I1.BSONType.object)?.toObject();this.clusterTime={clusterTime:A,signature:B}}return this.clusterTime??null}toObject(F){let A={...I1.pluckBSONSerializeOptions(F??{}),validation:I1.parseUtf8ValidationOption(F)};return super.toObject(A)}}lU.MongoDBResponse=J7;class e4 extends J7{constructor(){super(...arguments);this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new e4(I1.serialize({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(F){return F instanceof e4||F===e4.emptyGetMore}get cursor(){return this.get("cursor",I1.BSONType.object,!0)}get id(){try{return I1.Long.fromBigInt(this.cursor.get("id",I1.BSONType.long,!0))}catch(F){throw new o4.MongoUnexpectedServerResponseError(F.message,{cause:F})}}get ns(){let F=this.cursor.get("ns",I1.BSONType.string);if(F!=null)return vU.ns(F);return null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let F=this.encryptedResponse?.get("cursor",I1.BSONType.object);if(F?.has("firstBatch"))this._encryptedBatch=F.get("firstBatch",I1.BSONType.array,!0);else if(F?.has("nextBatch"))this._encryptedBatch=F.get("nextBatch",I1.BSONType.array,!0);else throw new o4.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let F=this.cursor;if(F.has("firstBatch"))this._batch=F.get("firstBatch",I1.BSONType.array,!0);else if(F.has("nextBatch"))this._batch=F.get("nextBatch",I1.BSONType.array,!0);else throw new o4.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",I1.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(F){if(this.iterated>=this.batchSize)return null;let A=this.batch.get(this.iterated,I1.BSONType.object,!0)??null,B=this.encryptedBatch?.get(this.iterated,I1.BSONType.object,!0)??null;if(this.iterated+=1,F?.raw)return A.toBytes();else{let D=A.toObject(F);if(B)vU.decorateDecryptionResult(D,B.toObject(F),!0);return D}}clear(){this.iterated=this.batchSize}}lU.CursorResponse=e4;class dU extends e4{constructor(){super(...arguments);this.isExplain=!0,this._length=1}get id(){return I1.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(F){if(this._length===0)return null;return this._length-=1,this.toObject(F)}}lU.ExplainedCursorResponse=dU;class cU extends e4{get insertedCount(){return this.get("nInserted",I1.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",I1.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",I1.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",I1.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",I1.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",I1.BSONType.object,!1)}}lU.ClientBulkWriteCursorResponse=cU});var D5=z((iU)=>{Object.defineProperty(iU,"__esModule",{value:!0});iU.Explain=iU.ExplainVerbosity=void 0;iU.validateExplainTimeoutOptions=Nr;iU.decorateWithExplain=Mr;var Ir=l();iU.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});class yA{constructor(F,A){if(typeof F==="boolean")this.verbosity=F?iU.ExplainVerbosity.allPlansExecution:iU.ExplainVerbosity.queryPlanner;else this.verbosity=F;this.maxTimeMS=A}static fromOptions({explain:F}={}){if(F==null)return;if(typeof F==="boolean"||typeof F==="string")return new yA(F);let{verbosity:A,maxTimeMS:B}=F;return new yA(A,B)}}iU.Explain=yA;function Nr(F,A){let{maxTimeMS:B,timeoutMS:D}=F;if(D!=null&&(B!=null||A?.maxTimeMS!=null))throw new Ir.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function Mr(F,A){let{verbosity:B,maxTimeMS:D}=A,X={explain:F,verbosity:B};if(typeof D==="number")X.maxTimeMS=D;return X}});var h1=z((sU)=>{Object.defineProperty(sU,"__esModule",{value:!0});sU.AbstractOperation=sU.Aspect=void 0;sU.defineAspects=ur;var kr=$1(),OJ=_0();sU.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};class aU{constructor(F={}){this.readPreference=this.hasAspect(sU.Aspect.WRITE_OPERATION)?OJ.ReadPreference.primary:OJ.ReadPreference.fromOptions(F)??OJ.ReadPreference.primary,this.bsonOptions=kr.resolveBSONOptions(F),this._session=F.session!=null?F.session:void 0,this.options=F,this.bypassPinningCheck=!!F.bypassPinningCheck}hasAspect(F){let A=this.constructor;if(A.aspects==null)return!1;return A.aspects.has(F)}get session(){return this._session}set session(F){this._session=F}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(sU.Aspect.RETRYABLE)&&this.hasAspect(sU.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(sU.Aspect.RETRYABLE)&&this.hasAspect(sU.Aspect.WRITE_OPERATION)}handleOk(F){return F.toObject(this.bsonOptions)}handleError(F){throw F}}sU.AbstractOperation=aU;function ur(F,A){if(!Array.isArray(A)&&!(A instanceof Set))A=[A];return A=new Set(A),Object.defineProperty(F,"aspects",{value:A,writable:!1}),A}});var E0=z((eU)=>{Object.defineProperty(eU,"__esModule",{value:!0});eU.CommandOperation=void 0;var Sr=R3(),xr=l(),SJ=D5(),_r=x6(),hA=s(),tU=P2(),F9=h1();class oU extends F9.AbstractOperation{constructor(F,A){super(A);this.options=A??{};let B=A?.dbName||A?.authdb;if(B)this.ns=new hA.MongoDBNamespace(B,"$cmd");else this.ns=F?F.s.namespace.withCollection("$cmd"):new hA.MongoDBNamespace("admin","$cmd");if(this.readConcern=_r.ReadConcern.fromOptions(A),this.writeConcern=tU.WriteConcern.fromOptions(A),this.hasAspect(F9.Aspect.EXPLAINABLE)){if(this.explain=SJ.Explain.fromOptions(A),this.explain)SJ.validateExplainTimeoutOptions(this.options,this.explain)}else if(A?.explain!=null)throw new xr.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){if(this.hasAspect(F9.Aspect.EXPLAINABLE))return this.explain==null;return super.canRetryWrite}buildOptions(F){return{...this.options,...this.bsonOptions,timeoutContext:F,readPreference:this.readPreference,session:this.session}}buildCommand(F,A){let B=this.buildCommandDocument(F,A),D=this.session&&this.session.inTransaction();if(this.readConcern&&hA.commandSupportsReadConcern(B)&&!D)Object.assign(B,{readConcern:this.readConcern});if(this.writeConcern&&this.hasAspect(F9.Aspect.WRITE_OPERATION)&&!D)tU.WriteConcern.apply(B,this.writeConcern);if(this.options.collation&&typeof this.options.collation==="object"&&!this.hasAspect(F9.Aspect.SKIP_COLLATION))Object.assign(B,{collation:this.options.collation});if(typeof this.options.maxTimeMS==="number")B.maxTimeMS=this.options.maxTimeMS;if(this.options.rawData!=null&&this.hasAspect(F9.Aspect.SUPPORTS_RAW_DATA)&&hA.maxWireVersion(F)>=Sr.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION)B.rawData=this.options.rawData;if(this.hasAspect(F9.Aspect.EXPLAINABLE)&&this.explain)return SJ.decorateWithExplain(B,this.explain);return B}}eU.CommandOperation=oU});var gJ=z((AV)=>{Object.defineProperty(AV,"__esModule",{value:!0});AV.DeleteManyOperation=AV.DeleteOneOperation=AV.DeleteOperation=void 0;AV.makeDeleteStatement=fJ;var fr=f1(),X5=l(),gr=s(),br=E0(),N2=h1();class Z5 extends br.CommandOperation{constructor(F,A,B){super(void 0,B);this.SERVER_COMMAND_RESPONSE_TYPE=fr.MongoDBResponse,this.options=B,this.ns=F,this.statements=A}get commandName(){return"delete"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((F)=>F.limit!=null?F.limit>0:!0)}buildCommandDocument(F,A){let B=this.options,D=typeof B.ordered==="boolean"?B.ordered:!0,X={delete:this.ns.collection,deletes:this.statements,ordered:D};if(B.let)X.let=B.let;if(B.comment!==void 0)X.comment=B.comment;if(this.writeConcern&&this.writeConcern.w===0&&gr.maxWireVersion(F)<9){if(this.statements.find((J)=>J.hint))throw new X5.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+")}return X}}AV.DeleteOperation=Z5;class xJ extends Z5{constructor(F,A,B){super(F,[fJ(A,{...B,limit:1})],B)}handleOk(F){let A=super.handleOk(F);if(this.explain)return A;if(A.code)throw new X5.MongoServerError(A);if(A.writeErrors)throw new X5.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:A.n}}}AV.DeleteOneOperation=xJ;class _J extends Z5{constructor(F,A,B){super(F,[fJ(A,B)],B)}handleOk(F){let A=super.handleOk(F);if(this.explain)return A;if(A.code)throw new X5.MongoServerError(A);if(A.writeErrors)throw new X5.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:A.n}}}AV.DeleteManyOperation=_J;function fJ(F,A){let B={q:F,limit:typeof A.limit==="number"?A.limit:0};if(A.collation)B.collation=A.collation;if(A.hint)B.hint=A.hint;return B}N2.defineAspects(Z5,[N2.Aspect.RETRYABLE,N2.Aspect.WRITE_OPERATION,N2.Aspect.SUPPORTS_RAW_DATA]);N2.defineAspects(xJ,[N2.Aspect.RETRYABLE,N2.Aspect.WRITE_OPERATION,N2.Aspect.EXPLAINABLE,N2.Aspect.SKIP_COLLATION,N2.Aspect.SUPPORTS_RAW_DATA]);N2.defineAspects(_J,[N2.Aspect.WRITE_OPERATION,N2.Aspect.EXPLAINABLE,N2.Aspect.SKIP_COLLATION,N2.Aspect.SUPPORTS_RAW_DATA])});var Y5=z((ZV)=>{Object.defineProperty(ZV,"__esModule",{value:!0});ZV.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;ZV.writableServerSelector=dr;ZV.sameServerSelector=cr;ZV.secondaryWritableServerSelector=lr;ZV.readPreferenceServerSelector=yJ;var bJ=l(),J5=_0(),F6=e2(),mr=1e4,DV=90;ZV.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function dr(){return function F(A,B){return vA(A,B.filter((D)=>D.isWritable))}}function cr(F){return function A(B,D){if(!F)return[];return D.filter((X)=>{return X.address===F.address&&X.type!==F6.ServerType.Unknown})}}function lr(F,A){if(!A||!F||F&&F<ZV.MIN_SECONDARY_WRITE_WIRE_VERSION)return yJ(J5.ReadPreference.primary);return yJ(A)}function pr(F,A,B){if(F.maxStalenessSeconds==null||F.maxStalenessSeconds<0)return B;let D=F.maxStalenessSeconds,X=(A.heartbeatFrequencyMS+mr)/1000;if(D<X)throw new bJ.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${X} seconds`);if(D<DV)throw new bJ.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${DV} seconds`);if(A.type===F6.TopologyType.ReplicaSetWithPrimary){let Z=Array.from(A.servers.values()).filter(mA)[0];return B.reduce((J,$)=>{let E=($.lastUpdateTime-$.lastWriteDate-(Z.lastUpdateTime-Z.lastWriteDate)+A.heartbeatFrequencyMS)/1000,G=F.maxStalenessSeconds??0;if(E<=G)J.push($);return J},[])}if(A.type===F6.TopologyType.ReplicaSetNoPrimary){if(B.length===0)return B;let Z=B.reduce((J,$)=>$.lastWriteDate>J.lastWriteDate?$:J);return B.reduce((J,$)=>{let E=(Z.lastWriteDate-$.lastWriteDate+A.heartbeatFrequencyMS)/1000,G=F.maxStalenessSeconds??0;if(E<=G)J.push($);return J},[])}return B}function ir(F,A){let B=Object.keys(F),D=Object.keys(A);for(let X=0;X<B.length;++X){let Z=B[X];if(D.indexOf(Z)===-1||A[Z]!==F[Z])return!1}return!0}function nr(F,A){if(F.tags==null||Array.isArray(F.tags)&&F.tags.length===0)return A;for(let B=0;B<F.tags.length;++B){let D=F.tags[B],X=A.reduce((Z,J)=>{if(ir(D,J.tags))Z.push(J);return Z},[]);if(X.length)return X}return[]}function vA(F,A){let B=A.reduce((X,Z)=>Math.min(Z.roundTripTime,X),1/0),D=B+F.localThresholdMS;return A.reduce((X,Z)=>{if(Z.roundTripTime<=D&&Z.roundTripTime>=B)X.push(Z);return X},[])}function mA(F){return F.type===F6.ServerType.RSPrimary}function ar(F){return F.type===F6.ServerType.RSSecondary}function sr(F){return F.type===F6.ServerType.RSSecondary||F.type===F6.ServerType.RSPrimary}function XV(F){return F.type!==F6.ServerType.Unknown}function rr(F){return F.type===F6.ServerType.LoadBalancer}function yJ(F){if(!F.isValid())throw new bJ.MongoInvalidArgumentError("Invalid read preference specified");return function A(B,D,X=[]){if(B.type===F6.TopologyType.LoadBalanced)return D.filter(rr);if(B.type===F6.TopologyType.Unknown)return[];if(B.type===F6.TopologyType.Single)return vA(B,D.filter(XV));if(B.type===F6.TopologyType.Sharded){let Y=D.filter((G)=>{return!X.includes(G)}),E=Y.length>0?Y:X;return vA(B,E.filter(XV))}let Z=F.mode;if(Z===J5.ReadPreference.PRIMARY)return D.filter(mA);if(Z===J5.ReadPreference.PRIMARY_PREFERRED){let Y=D.filter(mA);if(Y.length)return Y}let J=Z===J5.ReadPreference.NEAREST?sr:ar,$=vA(B,nr(F,pr(F,B,D.filter(J))));if(Z===J5.ReadPreference.SECONDARY_PREFERRED&&$.length===0)return D.filter(mA);return $}}});var f0=z((YV)=>{Object.defineProperty(YV,"__esModule",{value:!0});YV.LegacyTimeoutContext=YV.CSOTTimeoutContext=YV.TimeoutContext=YV.Timeout=YV.TimeoutError=void 0;var JV=c("timers"),A9=l(),vJ=s();class dA extends Error{get name(){return"TimeoutError"}constructor(F,A){super(F,A);this.duration=A.duration}static is(F){return F!=null&&typeof F==="object"&&"name"in F&&F.name==="TimeoutError"}}YV.TimeoutError=dA;class A6 extends Promise{get remainingTime(){if(this.timedOut)return 0;if(this.duration===0)return 1/0;return this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(F=()=>null,A){let B=A?.duration??0,D=!!A?.unref,X=A?.rejection;if(B<0)throw new A9.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let Z;super((J,$)=>{Z=$,F(vJ.noop,$)});if(this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=B,this.start=Math.trunc(performance.now()),X==null&&this.duration>0){if(this.id=JV.setTimeout(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,Z(new dA(`Expired after ${B}ms`,{duration:B}))},this.duration),typeof this.id.unref==="function"&&D)this.id.unref()}else if(X!=null)this.ended=Math.trunc(performance.now()),this.timedOut=!0,Z(X)}clear(){JV.clearTimeout(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,vJ.squashError),new dA("Timed out",{duration:this.duration})}static expires(F,A){return new A6(void 0,{duration:F,unref:A})}static reject(F){return new A6(void 0,{duration:0,unref:!0,rejection:F})}}YV.Timeout=A6;function At(F){return F!=null&&typeof F==="object"&&"serverSelectionTimeoutMS"in F&&typeof F.serverSelectionTimeoutMS==="number"&&"waitQueueTimeoutMS"in F&&typeof F.waitQueueTimeoutMS==="number"}function Bt(F){return F!=null&&typeof F==="object"&&"serverSelectionTimeoutMS"in F&&typeof F.serverSelectionTimeoutMS==="number"&&"timeoutMS"in F&&typeof F.timeoutMS==="number"}class cA{static create(F){if(F.session?.timeoutContext!=null)return F.session?.timeoutContext;if(Bt(F))return new $5(F);else if(At(F))return new lA(F);else throw new A9.MongoRuntimeError("Unrecognized options")}}YV.TimeoutContext=cA;class $5 extends cA{constructor(F){super();this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=F.timeoutMS,this.serverSelectionTimeoutMS=F.serverSelectionTimeoutMS,this.socketTimeoutMS=F.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let F=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-F}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!=="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:F,serverSelectionTimeoutMS:A}=this;if(F<=0)return A6.reject(new A9.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));if(A!==0&&vJ.csotMin(F,A)===A)this._serverSelectionTimeout=A6.expires(A);else if(F>0&&Number.isFinite(F))this._serverSelectionTimeout=A6.expires(F);else this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!=="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout==="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new A9.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:F}=this;if(!Number.isFinite(F))return null;if(F>0)return A6.expires(F);return A6.reject(new A9.MongoOperationTimeoutError("Timed out before socket write"))}get timeoutForSocketRead(){let{remainingTimeMS:F}=this;if(!Number.isFinite(F))return null;if(F>0)return A6.expires(F);return A6.reject(new A9.MongoOperationTimeoutError("Timed out before socket read"))}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(F){let{remainingTimeMS:A}=this;if(A<=0)throw new A9.MongoOperationTimeoutError(F??`Expired after ${this.timeoutMS}ms`);return A}clone(){let F=new $5({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return F.start=this.start,F}refreshed(){return new $5(this)}addMaxTimeMSToCommand(F,A){if(A.omitMaxTimeMS)return;let B=this.remainingTimeMS-this.minRoundTripTime;if(B>0&&Number.isFinite(B))F.maxTimeMS=B}getSocketTimeoutMS(){return 0}}YV.CSOTTimeoutContext=$5;class lA extends cA{constructor(F){super();this.options=F,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){if(this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0)return A6.expires(this.options.serverSelectionTimeoutMS);return null}get connectionCheckoutTimeout(){if(this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0)return A6.expires(this.options.waitQueueTimeoutMS);return null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){return}clear(){return}get maxTimeMS(){return null}refreshed(){return new lA(this.options)}addMaxTimeMSToCommand(F,A){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}}YV.LegacyTimeoutContext=lA});var E5=z((EV)=>{Object.defineProperty(EV,"__esModule",{value:!0});EV.AggregateOperation=EV.DB_AGGREGATE_COLLECTION=void 0;var mJ=f1(),Yt=l(),$t=P2(),Et=E0(),$7=h1();EV.DB_AGGREGATE_COLLECTION=1;class dJ extends Et.CommandOperation{constructor(F,A,B){super(void 0,{...B,dbName:F.db});if(this.SERVER_COMMAND_RESPONSE_TYPE=mJ.CursorResponse,this.options={...B},this.target=F.collection||EV.DB_AGGREGATE_COLLECTION,this.pipeline=A,this.hasWriteStage=!1,typeof B?.out==="string")this.pipeline=this.pipeline.concat({$out:B.out}),this.hasWriteStage=!0;else if(A.length>0){let D=A[A.length-1];if(D.$out||D.$merge)this.hasWriteStage=!0}if(!this.hasWriteStage)delete this.options.writeConcern;if(B?.cursor!=null&&typeof B.cursor!=="object")throw new Yt.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?mJ.ExplainedCursorResponse:mJ.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(F){this.pipeline.push(F)}buildCommandDocument(){let F=this.options,A={aggregate:this.target,pipeline:this.pipeline};if(this.hasWriteStage&&this.writeConcern)$t.WriteConcern.apply(A,this.writeConcern);if(F.bypassDocumentValidation===!0)A.bypassDocumentValidation=F.bypassDocumentValidation;if(typeof F.allowDiskUse==="boolean")A.allowDiskUse=F.allowDiskUse;if(F.hint)A.hint=F.hint;if(F.let)A.let=F.let;if(F.comment!==void 0)A.comment=F.comment;if(A.cursor=F.cursor||{},F.batchSize&&!this.hasWriteStage)A.cursor.batchSize=F.batchSize;return A}handleOk(F){return F}}EV.AggregateOperation=dJ;$7.defineAspects(dJ,[$7.Aspect.READ_OPERATION,$7.Aspect.RETRYABLE,$7.Aspect.EXPLAINABLE,$7.Aspect.CURSOR_CREATING,$7.Aspect.SUPPORTS_RAW_DATA])});var m0=z((QV)=>{Object.defineProperty(QV,"__esModule",{value:!0});QV.executeOperation=qt;QV.autoConnect=zV;var Gt=R3(),C2=l(),WV=_0(),HV=Y5(),Ct=f0(),pA=s(),Wt=E5(),P3=h1(),Ht=C2.MONGODB_ERROR_CODES.IllegalOperation,qV="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function qt(F,A,B){if(!(A instanceof P3.AbstractOperation))throw new C2.MongoRuntimeError("This method requires a valid operation instance");let D=F.topology==null?await pA.abortable(zV(F),A.options):F.topology,X=A.session,Z;if(X==null)Z=Symbol(),X=F.startSession({owner:Z,explicit:!1});else if(X.hasEnded)throw new C2.MongoExpiredSessionError("Use of expired sessions is not permitted");else if(X.snapshotEnabled&&pA.maxWireVersion(D)<Gt.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION)throw new C2.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");else if(X.client!==F)throw new C2.MongoInvalidArgumentError("ClientSession must be from the same MongoClient");A.session??=X;let J=A.readPreference??WV.ReadPreference.primary,$=!!X?.inTransaction(),Y=A.hasAspect(P3.Aspect.READ_OPERATION);if($&&!J.equals(WV.ReadPreference.primary)&&(Y||A.commandName==="runCommand"))throw new C2.MongoTransactionError(`Read preference in a transaction must be primary, not: ${J.mode}`);if(X?.isPinned&&X.transaction.isCommitted&&!A.bypassPinningCheck)X.unpin();B??=Ct.TimeoutContext.create({session:X,serverSelectionTimeoutMS:F.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.s.options.waitQueueTimeoutMS,timeoutMS:A.options.timeoutMS});try{return await zt(A,{topology:D,timeoutContext:B,session:X,readPreference:J})}finally{if(X?.owner!=null&&X.owner===Z)await X.endSession()}}async function zV(F){if(F.topology==null){if(F.s.hasBeenClosed)throw new C2.MongoNotConnectedError("Client must be connected before running operations");F.s.options.__skipPingOnConnect=!0;try{if(await F.connect(),F.topology==null)throw new C2.MongoRuntimeError("client.connect did not create a topology but also did not throw");return F.topology}finally{delete F.s.options.__skipPingOnConnect}}return F.topology}async function zt(F,{topology:A,timeoutContext:B,session:D,readPreference:X}){let Z;if(F.hasAspect(P3.Aspect.MUST_SELECT_SAME_SERVER))Z=HV.sameServerSelector(F.server?.description);else if(F instanceof Wt.AggregateOperation&&F.hasWriteStage)Z=HV.secondaryWritableServerSelector(A.commonWireVersion,X);else Z=X;let J=await A.selectServer(Z,{session:D,operationName:F.commandName,timeoutContext:B,signal:F.options.signal}),$=F.hasAspect(P3.Aspect.READ_OPERATION),Y=F.hasAspect(P3.Aspect.WRITE_OPERATION),E=D?.inTransaction()??!1,G=A.s.options.retryReads&&!E&&F.canRetryRead,C=A.s.options.retryWrites&&!E&&pA.supportsRetryableWrites(J)&&F.canRetryWrite,W=F.hasAspect(P3.Aspect.RETRYABLE)&&D!=null&&($&&G||Y&&C);if(Y&&C&&D!=null)F.options.willRetryWrite=!0,D.incrementTransactionNumber();let H=W?B.csotEnabled()?1/0:2:1,q,Q;for(let K=0;K<H;K++){if(q){if(Y&&q.code===Ht)throw new C2.MongoServerError({message:qV,errmsg:qV,originalError:q});if(F.hasAspect(P3.Aspect.COMMAND_BATCHING)&&!F.canRetryWrite)throw q;if(Y&&!C2.isRetryableWriteError(q))throw q;if($&&!C2.isRetryableReadError(q))throw q;if(q instanceof C2.MongoNetworkError&&F.hasAspect(P3.Aspect.CURSOR_CREATING)&&D!=null&&D.isPinned&&!D.inTransaction())D.unpin({force:!0,forceClear:!0});if(J=await A.selectServer(Z,{session:D,operationName:F.commandName,previousServer:Q,signal:F.options.signal}),Y&&!pA.supportsRetryableWrites(J))throw new C2.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}F.server=J;try{if(K>0&&F.hasAspect(P3.Aspect.COMMAND_BATCHING))F.resetBatch();try{let U=await J.command(F,B);return F.handleOk(U)}catch(U){return F.handleError(U)}}catch(U){if(!(U instanceof C2.MongoError))throw U;if(q!=null&&U.hasErrorLabel(C2.MongoErrorLabel.NoWritesPerformed))throw q;Q=J.description,q=U,B.clear()}}throw q??new C2.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var lJ=z((UV)=>{Object.defineProperty(UV,"__esModule",{value:!0});UV.InsertOneOperation=UV.InsertOperation=void 0;var Ut=f1(),KV=l(),Vt=s(),Lt=E0(),A4=h1();class iA extends Lt.CommandOperation{constructor(F,A,B){super(void 0,B);this.SERVER_COMMAND_RESPONSE_TYPE=Ut.MongoDBResponse,this.options={...B,checkKeys:B.checkKeys??!1},this.ns=F,this.documents=A}get commandName(){return"insert"}buildCommandDocument(F,A){let B=this.options??{},D=typeof B.ordered==="boolean"?B.ordered:!0,X={insert:this.ns.collection,documents:this.documents,ordered:D};if(typeof B.bypassDocumentValidation==="boolean")X.bypassDocumentValidation=B.bypassDocumentValidation;if(B.comment!==void 0)X.comment=B.comment;return X}}UV.InsertOperation=iA;class cJ extends iA{constructor(F,A,B){super(F.s.namespace,[Vt.maybeAddIdToDocuments(F,A,B)],B)}handleOk(F){let A=super.handleOk(F);if(A.code)throw new KV.MongoServerError(A);if(A.writeErrors)throw new KV.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}}UV.InsertOneOperation=cJ;A4.defineAspects(iA,[A4.Aspect.RETRYABLE,A4.Aspect.WRITE_OPERATION,A4.Aspect.SUPPORTS_RAW_DATA]);A4.defineAspects(cJ,[A4.Aspect.RETRYABLE,A4.Aspect.WRITE_OPERATION,A4.Aspect.SUPPORTS_RAW_DATA])});var G7=z((wV)=>{Object.defineProperty(wV,"__esModule",{value:!0});wV.formatSort=St;var LV=l();function E7(F=1){let A=`${F}`.toLowerCase();if(Rt(F))return F;switch(A){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new LV.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(F)}`)}}function Rt(F){return typeof F==="object"&&F!=null&&"$meta"in F&&typeof F.$meta==="string"}function Pt(F){if(Array.isArray(F)&&F.length===2)try{return E7(F[1]),!0}catch{return!1}return!1}function It(F){return Array.isArray(F)&&Array.isArray(F[0])}function Nt(F){return F instanceof Map&&F.size>0}function Mt(F){return Array.isArray(F)}function jt(F){return new Map([[`${F[0]}`,E7([F[1]])]])}function Tt(F){let A=F.map(([B,D])=>[`${B}`,E7(D)]);return new Map(A)}function kt(F){let A=F.map((B)=>[`${B}`,1]);return new Map(A)}function ut(F){let A=Object.entries(F).map(([B,D])=>[`${B}`,E7(D)]);return new Map(A)}function Ot(F){let A=Array.from(F).map(([B,D])=>[`${B}`,E7(D)]);return new Map(A)}function St(F,A){if(F==null)return;if(typeof F==="string")return new Map([[F,E7(A)]]);if(typeof F!=="object")throw new LV.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(F)} Sort must be a valid object`);if(!Mt(F)){if(Nt(F))return Ot(F);if(Object.keys(F).length)return ut(F);return}if(!F.length)return;if(It(F))return Tt(F);if(Pt(F))return jt(F);return kt(F)}});var sJ=z((RV)=>{Object.defineProperty(RV,"__esModule",{value:!0});RV.ReplaceOneOperation=RV.UpdateManyOperation=RV.UpdateOneOperation=RV.UpdateOperation=void 0;RV.makeUpdateStatement=nA;var _t=f1(),f6=l(),ft=G7(),pJ=s(),gt=E0(),R0=h1();class C7 extends gt.CommandOperation{constructor(F,A,B){super(void 0,B);this.SERVER_COMMAND_RESPONSE_TYPE=_t.MongoDBResponse,this.options=B,this.ns=F,this.statements=A}get commandName(){return"update"}get canRetryWrite(){if(super.canRetryWrite===!1)return!1;return this.statements.every((F)=>F.multi==null||F.multi===!1)}buildCommandDocument(F,A){let B=this.options,D={update:this.ns.collection,updates:this.statements,ordered:B.ordered??!0};if(typeof B.bypassDocumentValidation==="boolean")D.bypassDocumentValidation=B.bypassDocumentValidation;if(B.let)D.let=B.let;if(B.comment!==void 0)D.comment=B.comment;return D}}RV.UpdateOperation=C7;class iJ extends C7{constructor(F,A,B,D){super(F,[nA(A,B,{...D,multi:!1})],D);if(!pJ.hasAtomicOperators(B,D))throw new f6.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new f6.MongoServerError(A);if(A.writeErrors)throw new f6.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}RV.UpdateOneOperation=iJ;class nJ extends C7{constructor(F,A,B,D){super(F,[nA(A,B,{...D,multi:!0})],D);if(!pJ.hasAtomicOperators(B,D))throw new f6.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new f6.MongoServerError(A);if(A.writeErrors)throw new f6.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}RV.UpdateManyOperation=nJ;class aJ extends C7{constructor(F,A,B,D){super(F,[nA(A,B,{...D,multi:!1})],D);if(pJ.hasAtomicOperators(B))throw new f6.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk(F){let A=super.handleOk(F);if(this.explain!=null)return A;if(A.code)throw new f6.MongoServerError(A);if(A.writeErrors)throw new f6.MongoServerError(A.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:A.nModified??A.n,upsertedId:Array.isArray(A.upserted)&&A.upserted.length>0?A.upserted[0]._id:null,upsertedCount:Array.isArray(A.upserted)&&A.upserted.length?A.upserted.length:0,matchedCount:Array.isArray(A.upserted)&&A.upserted.length>0?0:A.n}}}RV.ReplaceOneOperation=aJ;function nA(F,A,B){if(F==null||typeof F!=="object")throw new f6.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(A==null||typeof A!=="object")throw new f6.MongoInvalidArgumentError("Document must be a valid JavaScript object");let D={q:F,u:A};if(typeof B.upsert==="boolean")D.upsert=B.upsert;if(B.multi)D.multi=B.multi;if(B.hint)D.hint=B.hint;if(B.arrayFilters)D.arrayFilters=B.arrayFilters;if(B.collation)D.collation=B.collation;if(!B.multi&&B.sort!=null)D.sort=ft.formatSort(B.sort);return D}R0.defineAspects(C7,[R0.Aspect.RETRYABLE,R0.Aspect.WRITE_OPERATION,R0.Aspect.SKIP_COLLATION,R0.Aspect.SUPPORTS_RAW_DATA]);R0.defineAspects(iJ,[R0.Aspect.RETRYABLE,R0.Aspect.WRITE_OPERATION,R0.Aspect.EXPLAINABLE,R0.Aspect.SKIP_COLLATION,R0.Aspect.SUPPORTS_RAW_DATA]);R0.defineAspects(nJ,[R0.Aspect.WRITE_OPERATION,R0.Aspect.EXPLAINABLE,R0.Aspect.SKIP_COLLATION,R0.Aspect.SUPPORTS_RAW_DATA]);R0.defineAspects(aJ,[R0.Aspect.RETRYABLE,R0.Aspect.WRITE_OPERATION,R0.Aspect.SKIP_COLLATION,R0.Aspect.SUPPORTS_RAW_DATA])});var H7=z((uV)=>{Object.defineProperty(uV,"__esModule",{value:!0});uV.BulkOperationBase=uV.FindOperators=uV.MongoBulkWriteError=uV.WriteError=uV.WriteConcernError=uV.BulkWriteResult=uV.Batch=uV.BatchType=void 0;uV.mergeBatchResults=rJ;var MV=$1(),g0=l(),C5=gJ(),mt=m0(),dt=lJ(),B9=sJ(),ct=f0(),B3=s(),IV=P2();uV.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});class jV{constructor(F,A){this.originalZeroIndex=A,this.currentIndex=0,this.originalIndexes=[],this.batchType=F,this.operations=[],this.size=0,this.sizeBytes=0}}uV.Batch=jV;class I3{static generateIdMap(F){let A={};for(let B of F)A[B.index]=B._id;return A}constructor(F,A){this.result=F,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=I3.generateIdMap(this.result.upserted),this.insertedIds=I3.generateIdMap(this.getSuccessfullyInsertedIds(F,A)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(F,A){if(F.writeErrors.length===0)return F.insertedIds;if(A)return F.insertedIds.slice(0,F.writeErrors[0].index);return F.insertedIds.filter(({index:B})=>!F.writeErrors.some((D)=>B===D.index))}getUpsertedIdAt(F){return this.result.upserted[F]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(F){return F<this.result.writeErrors.length?this.result.writeErrors[F]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return;else if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];else{let F="";for(let A=0;A<this.result.writeConcernErrors.length;A++){let B=this.result.writeConcernErrors[A];if(F=F+B.errmsg,A===0)F=F+" and "}return new W5({errmsg:F,code:g0.MONGODB_ERROR_CODES.WriteConcernTimeout})}}toString(){return`BulkWriteResult(${MV.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}}uV.BulkWriteResult=I3;class W5{constructor(F){this.serverError=F}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}}uV.WriteConcernError=W5;class aA{constructor(F){this.err=F}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}}uV.WriteError=aA;function rJ(F,A,B,D){if(B)D=B;else if(D&&D.result)D=D.result;if(D==null)return;if(D.ok===0&&A.ok===1){A.ok=0;let Z={index:0,code:D.code||0,errmsg:D.message,errInfo:D.errInfo,op:F.operations[0]};A.writeErrors.push(new aA(Z));return}else if(D.ok===0&&A.ok===0)return;if(kV(F)&&D.n)A.nInserted=A.nInserted+D.n;if(oJ(F)&&D.n)A.nRemoved=A.nRemoved+D.n;let X=0;if(Array.isArray(D.upserted)){X=D.upserted.length;for(let Z=0;Z<D.upserted.length;Z++)A.upserted.push({index:D.upserted[Z].index+F.originalZeroIndex,_id:D.upserted[Z]._id})}else if(D.upserted)X=1,A.upserted.push({index:F.originalZeroIndex,_id:D.upserted});if(tJ(F)&&D.n){let Z=D.nModified;if(A.nUpserted=A.nUpserted+X,A.nMatched=A.nMatched+(D.n-X),typeof Z==="number")A.nModified=A.nModified+Z;else A.nModified=0}if(Array.isArray(D.writeErrors))for(let Z=0;Z<D.writeErrors.length;Z++){let J={index:F.originalIndexes[D.writeErrors[Z].index],code:D.writeErrors[Z].code,errmsg:D.writeErrors[Z].errmsg,errInfo:D.writeErrors[Z].errInfo,op:F.operations[D.writeErrors[Z].index]};A.writeErrors.push(new aA(J))}if(D.writeConcernError)A.writeConcernErrors.push(new W5(D.writeConcernError))}async function NV(F,A){if(F.s.batches.length===0)return new I3(F.s.bulkResult,F.isOrdered);for(let D of F.s.batches){let X=B3.resolveOptions(F,{...A,ordered:F.isOrdered});if(X.bypassDocumentValidation!==!0)delete X.bypassDocumentValidation;if(F.s.bypassDocumentValidation===!0)X.bypassDocumentValidation=!0;if(F.s.checkKeys===!1)X.checkKeys=!1;if(F.retryWrites){if(tJ(D))F.retryWrites=F.retryWrites&&!D.operations.some((E)=>E.multi);if(oJ(D))F.retryWrites=F.retryWrites&&!D.operations.some((E)=>E.limit===0)}let Z=kV(D)?new dt.InsertOperation(F.s.namespace,D.operations,X):tJ(D)?new B9.UpdateOperation(F.s.namespace,D.operations,X):oJ(D)?new C5.DeleteOperation(F.s.namespace,D.operations,X):null;if(Z==null)throw new g0.MongoRuntimeError(`Unknown batchType: ${D.batchType}`);let J=null,$;try{$=await mt.executeOperation(F.s.collection.client,Z,X.timeoutContext)}catch(E){J=E}if(J!=null)if(J instanceof g0.MongoWriteConcernError){rJ(D,F.s.bulkResult,J,$);let E=new I3(F.s.bulkResult,F.isOrdered);throw new W7({message:J.result.writeConcernError.errmsg,code:J.result.writeConcernError.code},E)}else throw new W7(J,new I3(F.s.bulkResult,F.isOrdered));rJ(D,F.s.bulkResult,J,$);let Y=new I3(F.s.bulkResult,F.isOrdered);F.handleWriteError(Y)}F.s.batches.length=0;let B=new I3(F.s.bulkResult,F.isOrdered);return F.handleWriteError(B),B}class W7 extends g0.MongoServerError{constructor(F,A){super(F);if(this.writeErrors=[],F instanceof W5)this.err=F;else if(!(F instanceof Error))this.message=F.message,this.code=F.code,this.writeErrors=F.writeErrors??[];this.result=A,Object.assign(this,F)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}}uV.MongoBulkWriteError=W7;class eJ{constructor(F){this.bulkOperation=F}update(F){let A=G5(this.bulkOperation);return this.bulkOperation.addToOperationsList(uV.BatchType.UPDATE,B9.makeUpdateStatement(A.selector,F,{...A,multi:!0}))}updateOne(F){if(!B3.hasAtomicOperators(F,this.bulkOperation.bsonOptions))throw new g0.MongoInvalidArgumentError("Update document requires atomic operators");let A=G5(this.bulkOperation);return this.bulkOperation.addToOperationsList(uV.BatchType.UPDATE,B9.makeUpdateStatement(A.selector,F,{...A,multi:!1}))}replaceOne(F){if(B3.hasAtomicOperators(F))throw new g0.MongoInvalidArgumentError("Replacement document must not use atomic operators");let A=G5(this.bulkOperation);return this.bulkOperation.addToOperationsList(uV.BatchType.UPDATE,B9.makeUpdateStatement(A.selector,F,{...A,multi:!1}))}deleteOne(){let F=G5(this.bulkOperation);return this.bulkOperation.addToOperationsList(uV.BatchType.DELETE,C5.makeDeleteStatement(F.selector,{...F,limit:1}))}delete(){let F=G5(this.bulkOperation);return this.bulkOperation.addToOperationsList(uV.BatchType.DELETE,C5.makeDeleteStatement(F.selector,{...F,limit:0}))}upsert(){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.upsert=!0,this}collation(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.collation=F,this}arrayFilters(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.arrayFilters=F,this}hint(F){if(!this.bulkOperation.s.currentOp)this.bulkOperation.s.currentOp={};return this.bulkOperation.s.currentOp.hint=F,this}}uV.FindOperators=eJ;class TV{constructor(F,A,B){this.collection=F,this.retryWrites=F.db.options?.retryWrites,this.isOrdered=B;let D=B3.getTopology(F);A=A==null?{}:A;let X=F.s.namespace,Z=!1,J=void 0,$=D.lastHello(),Y=!!(D.s.options&&D.s.options.autoEncrypter),E=$&&$.maxBsonObjectSize?$.maxBsonObjectSize:16777216,G=Y?2097152:E,C=$&&$.maxWriteBatchSize?$.maxWriteBatchSize:1000,W=(C-1).toString(10).length+2,H={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};if(this.s={bulkResult:H,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:IV.WriteConcern.fromOptions(A),maxBsonObjectSize:E,maxBatchSizeBytes:G,maxWriteBatchSize:C,maxKeySize:W,namespace:X,topology:D,options:A,bsonOptions:MV.resolveBSONOptions(A),currentOp:J,executed:Z,collection:F,err:void 0,checkKeys:typeof A.checkKeys==="boolean"?A.checkKeys:!1},A.bypassDocumentValidation===!0)this.s.bypassDocumentValidation=!0}insert(F){return B3.maybeAddIdToDocuments(this.collection,F,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(uV.BatchType.INSERT,F)}find(F){if(!F)throw new g0.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:F},new eJ(this)}raw(F){if(F==null||typeof F!=="object")throw new g0.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in F){let A=this.shouldForceServerObjectId(),B=F.insertOne&&F.insertOne.document==null?F.insertOne:F.insertOne.document;return B3.maybeAddIdToDocuments(this.collection,B,{forceServerObjectId:A}),this.addToOperationsList(uV.BatchType.INSERT,B)}if("replaceOne"in F||"updateOne"in F||"updateMany"in F){if("replaceOne"in F){if("q"in F.replaceOne)throw new g0.MongoInvalidArgumentError("Raw operations are not allowed");let A=B9.makeUpdateStatement(F.replaceOne.filter,F.replaceOne.replacement,{...F.replaceOne,multi:!1});if(B3.hasAtomicOperators(A.u))throw new g0.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(uV.BatchType.UPDATE,A)}if("updateOne"in F){if("q"in F.updateOne)throw new g0.MongoInvalidArgumentError("Raw operations are not allowed");let A=B9.makeUpdateStatement(F.updateOne.filter,F.updateOne.update,{...F.updateOne,multi:!1});if(!B3.hasAtomicOperators(A.u,this.bsonOptions))throw new g0.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(uV.BatchType.UPDATE,A)}if("updateMany"in F){if("q"in F.updateMany)throw new g0.MongoInvalidArgumentError("Raw operations are not allowed");let A=B9.makeUpdateStatement(F.updateMany.filter,F.updateMany.update,{...F.updateMany,multi:!0});if(!B3.hasAtomicOperators(A.u,this.bsonOptions))throw new g0.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(uV.BatchType.UPDATE,A)}}if("deleteOne"in F){if("q"in F.deleteOne)throw new g0.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(uV.BatchType.DELETE,C5.makeDeleteStatement(F.deleteOne.filter,{...F.deleteOne,limit:1}))}if("deleteMany"in F){if("q"in F.deleteMany)throw new g0.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(uV.BatchType.DELETE,C5.makeDeleteStatement(F.deleteMany.filter,{...F.deleteMany,limit:0}))}throw new g0.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let F=[...this.s.batches];if(this.isOrdered){if(this.s.currentBatch)F.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)F.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)F.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)F.push(this.s.currentRemoveBatch)}return F}async execute(F={}){if(this.s.executed)throw new g0.MongoBatchReExecutionError;let A=IV.WriteConcern.fromOptions(F);if(A)this.s.writeConcern=A;if(this.isOrdered){if(this.s.currentBatch)this.s.batches.push(this.s.currentBatch)}else{if(this.s.currentInsertBatch)this.s.batches.push(this.s.currentInsertBatch);if(this.s.currentUpdateBatch)this.s.batches.push(this.s.currentUpdateBatch);if(this.s.currentRemoveBatch)this.s.batches.push(this.s.currentRemoveBatch)}if(this.s.batches.length===0)throw new g0.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let B=B3.resolveOptions(this.collection,{...this.s.options,...F});if(B.timeoutContext??=ct.TimeoutContext.create({session:B.session,timeoutMS:B.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),B.session==null)return await this.collection.client.withSession({explicit:!1},async(D)=>{return await NV(this,{...B,session:D})});return await NV(this,{...B})}handleWriteError(F){if(this.s.bulkResult.writeErrors.length>0){let B=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new W7({message:B,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},F)}let A=F.getWriteConcernError();if(A)throw new W7(A,F)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}}uV.BulkOperationBase=TV;function kV(F){return F.batchType===uV.BatchType.INSERT}function tJ(F){return F.batchType===uV.BatchType.UPDATE}function oJ(F){return F.batchType===uV.BatchType.DELETE}function G5(F){let{currentOp:A}=F.s;if(F.s.currentOp=void 0,!A)A={};return A}});var xV=z((tL1,SV)=>{var tt=H7().BulkWriteResult;SV.exports=tt});var H5=z((_V,fV)=>{/*!
 * Connection states
 */var M2=fV.exports=_V=Object.create(null);M2[0]="disconnected";M2[1]="connected";M2[2]="connecting";M2[3]="disconnecting";M2[99]="uninitialized";M2.disconnected=0;M2.connected=1;M2.connecting=2;M2.disconnecting=3;M2.uninitialized=99});var B4=z((oL1,gV)=>{/*!
 * Centralize this so we can more easily work around issues with people
 * stubbing out `process.nextTick()` in tests using sinon:
 * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
 * See gh-6074
 */var ot=typeof process!=="undefined"&&typeof process.nextTick==="function"?process.nextTick.bind(process):(F)=>setTimeout(F,0);gV.exports=function F(A){return ot(A)}});var FY=z((eL1,yV)=>{/*!
 * Module dependencies.
 */var et=c("events").EventEmitter,Fo=H5(),bV=B4();function g1(F,A,B){if(B===void 0)B={};if(this.opts=B,this.name=F,this.collectionName=F,this.conn=A,this.queue=[],this.buffer=!A?._hasOpened,this.emitter=new et,Fo.connected===this.conn.readyState)this.onOpen()}g1.prototype.name;g1.prototype.collectionName;g1.prototype.conn;g1.prototype.onOpen=function(){this.buffer=!1,bV(()=>this.doQueue())};g1.prototype.onClose=function(){};g1.prototype.addQueue=function(F,A){return this.queue.push([F,A]),this};g1.prototype.removeQueue=function(F,A){let B=this.queue.findIndex((D)=>D[0]===F&&D[1]===A);if(B===-1)return!1;return this.queue.splice(B,1),!0};g1.prototype.doQueue=function(){for(let A of this.queue)if(typeof A[0]==="function")A[0].apply(this,A[1]);else this[A[0]].apply(this,A[1]);this.queue=[];let F=this;return bV(function(){F.emitter.emit("queue")}),this};g1.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};g1.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};g1.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};g1.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};g1.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};g1.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};g1.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};g1.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};g1.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};g1.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};g1.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};g1.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};g1.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};g1.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};g1.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};g1.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};g1.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};g1.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};/*!
 * ignore
 */g1.prototype._shouldBufferCommands=function F(){let A=this.opts;if(A.bufferCommands!=null)return A.bufferCommands;if(A?.schemaUserProvidedOptions?.bufferCommands!=null)return A.schemaUserProvidedOptions.bufferCommands;return this.conn._shouldBufferCommands()};/*!
 * ignore
 */g1.prototype._getBufferTimeoutMS=function F(){let A=this.conn,B=this.opts;if(B.bufferTimeoutMS!=null)return B.bufferTimeoutMS;if(B?.schemaUserProvidedOptions?.bufferTimeoutMS!=null)return B.schemaUserProvidedOptions.bufferTimeoutMS;return A._getBufferTimeoutMS()};/*!
 * Module exports.
 */yV.exports=g1});var K1=z((Fw1,hV)=>{/*!
 * ignore
 */class AY extends Error{}Object.defineProperty(AY.prototype,"name",{value:"MongooseError"});hV.exports=AY});var cV=z((mV)=>{Object.defineProperty(mV,"__esModule",{value:!0});mV.ListDatabasesOperation=void 0;var Ao=f1(),vV=s(),Bo=E0(),BY=h1();class DY extends Bo.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=Ao.MongoDBResponse,this.options=A??{},this.ns=new vV.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument(F,A){let B={listDatabases:1};if(typeof this.options.nameOnly==="boolean")B.nameOnly=this.options.nameOnly;if(this.options.filter)B.filter=this.options.filter;if(typeof this.options.authorizedDatabases==="boolean")B.authorizedDatabases=this.options.authorizedDatabases;if(vV.maxWireVersion(F)>=9&&this.options.comment!==void 0)B.comment=this.options.comment;return B}}mV.ListDatabasesOperation=DY;BY.defineAspects(DY,[BY.Aspect.READ_OPERATION,BY.Aspect.RETRYABLE])});var ZY=z((pV)=>{Object.defineProperty(pV,"__esModule",{value:!0});pV.RemoveUserOperation=void 0;var Do=f1(),Xo=E0(),lV=h1();class XY extends Xo.CommandOperation{constructor(F,A,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=Do.MongoDBResponse,this.options=B,this.username=A}get commandName(){return"dropUser"}buildCommandDocument(F){return{dropUser:this.username}}handleOk(F){return!0}}pV.RemoveUserOperation=XY;lV.defineAspects(XY,[lV.Aspect.WRITE_OPERATION])});var q5=z((sV)=>{Object.defineProperty(sV,"__esModule",{value:!0});sV.RunCursorCommandOperation=sV.RunCommandOperation=void 0;var nV=f1(),Zo=h1();class JY extends Zo.AbstractOperation{constructor(F,A,B){super(B);this.SERVER_COMMAND_RESPONSE_TYPE=nV.MongoDBResponse,this.command=A,this.options=B,this.ns=F.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand(F,A){return this.command}buildOptions(F){return{...this.options,session:this.session,timeoutContext:F,signal:this.options.signal,readPreference:this.options.readPreference}}}sV.RunCommandOperation=JY;class aV extends JY{constructor(){super(...arguments);this.SERVER_COMMAND_RESPONSE_TYPE=nV.CursorResponse}handleOk(F){return F}}sV.RunCursorCommandOperation=aV});var FL=z((oV)=>{Object.defineProperty(oV,"__esModule",{value:!0});oV.ValidateCollectionOperation=void 0;var Yo=f1(),YY=l(),$o=E0();class tV extends $o.CommandOperation{constructor(F,A,B){super(F.s.db,B);this.SERVER_COMMAND_RESPONSE_TYPE=Yo.MongoDBResponse,this.options=B,this.collectionName=A}get commandName(){return"validate"}buildCommandDocument(F,A){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter((B)=>B[0]!=="session"))}}handleOk(F){let A=super.handleOk(F);if(A.result!=null&&typeof A.result!=="string")throw new YY.MongoUnexpectedServerResponseError("Error with validation data");if(A.result!=null&&A.result.match(/exception|corrupt/)!=null)throw new YY.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(A.valid!=null&&!A.valid)throw new YY.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return F}}oV.ValidateCollectionOperation=tV});var $Y=z((BL)=>{Object.defineProperty(BL,"__esModule",{value:!0});BL.Admin=void 0;var Eo=$1(),sA=m0(),Go=cV(),Co=ZY(),Wo=q5(),Ho=FL(),qo=s();class AL{constructor(F){this.s={db:F}}async command(F,A){return await sA.executeOperation(this.s.db.client,new Wo.RunCommandOperation(new qo.MongoDBNamespace("admin"),F,{...Eo.resolveBSONOptions(A),session:A?.session,readPreference:A?.readPreference,timeoutMS:A?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(F){return await this.command({buildinfo:1},F)}async serverInfo(F){return await this.command({buildinfo:1},F)}async serverStatus(F){return await this.command({serverStatus:1},F)}async ping(F){return await this.command({ping:1},F)}async removeUser(F,A){return await sA.executeOperation(this.s.db.client,new Co.RemoveUserOperation(this.s.db,F,{dbName:"admin",...A}))}async validateCollection(F,A={}){return await sA.executeOperation(this.s.db.client,new Ho.ValidateCollectionOperation(this,F,A))}async listDatabases(F){return await sA.executeOperation(this.s.db.client,new Go.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...F}))}async replSetGetStatus(F){return await this.command({replSetGetStatus:1},F)}}BL.Admin=AL});var EY=z((JL)=>{Object.defineProperty(JL,"__esModule",{value:!0});JL.OrderedBulkOperation=void 0;var zo=$1(),XL=l(),rA=H7();class ZL extends rA.BulkOperationBase{constructor(F,A){super(F,A,!0)}addToOperationsList(F,A){let B=zo.calculateObjectSize(A,{checkKeys:!1,ignoreUndefined:!1});if(B>=this.s.maxBsonObjectSize)throw new XL.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch==null)this.s.currentBatch=new rA.Batch(F,this.s.currentIndex);let D=this.s.maxKeySize;if(this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+D+B>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==F)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new rA.Batch(F,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0;if(F===rA.BatchType.INSERT)this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:A._id});if(Array.isArray(A))throw new XL.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(A),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=D+B,this.s.currentIndex+=1,this}}JL.OrderedBulkOperation=ZL});var GY=z((GL)=>{Object.defineProperty(GL,"__esModule",{value:!0});GL.UnorderedBulkOperation=void 0;var Qo=$1(),$L=l(),N3=H7();class EL extends N3.BulkOperationBase{constructor(F,A){super(F,A,!1)}handleWriteError(F){if(this.s.batches.length)return;return super.handleWriteError(F)}addToOperationsList(F,A){let B=Qo.calculateObjectSize(A,{checkKeys:!1,ignoreUndefined:!1});if(B>=this.s.maxBsonObjectSize)throw new $L.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);if(this.s.currentBatch=void 0,F===N3.BatchType.INSERT)this.s.currentBatch=this.s.currentInsertBatch;else if(F===N3.BatchType.UPDATE)this.s.currentBatch=this.s.currentUpdateBatch;else if(F===N3.BatchType.DELETE)this.s.currentBatch=this.s.currentRemoveBatch;let D=this.s.maxKeySize;if(this.s.currentBatch==null)this.s.currentBatch=new N3.Batch(F,this.s.currentIndex);if(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+D+B>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==F)this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new N3.Batch(F,this.s.currentIndex);if(Array.isArray(A))throw new $L.MongoInvalidArgumentError("Operation passed in cannot be an Array");if(this.s.currentBatch.operations.push(A),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,F===N3.BatchType.INSERT)this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:A._id});else if(F===N3.BatchType.UPDATE)this.s.currentUpdateBatch=this.s.currentBatch;else if(F===N3.BatchType.DELETE)this.s.currentRemoveBatch=this.s.currentBatch;return this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=D+B,this}}GL.UnorderedBulkOperation=EL});var Z4=z((KL)=>{Object.defineProperty(KL,"__esModule",{value:!0});KL.MongoLogger=KL.MongoLoggableComponent=KL.SEVERITY_LEVEL_MAP=KL.DEFAULT_MAX_DOCUMENT_LENGTH=KL.SeverityLevel=void 0;KL.parseSeverityFromString=HY;KL.createStdioLogger=D9;KL.stringifyWithMaxLen=X4;KL.defaultLogTransform=zL;var WL=c("util"),HL=$1(),a1=w0(),X9=s();KL.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});KL.DEFAULT_MAX_DOCUMENT_LENGTH=1000;class qL extends Map{constructor(F){let A=[];for(let[B,D]of F)A.push([D,B]);A.push(...F);super(A)}getNumericSeverityLevel(F){return this.get(F)}getSeverityLevelName(F){return this.get(F)}}KL.SEVERITY_LEVEL_MAP=new qL([[KL.SeverityLevel.OFF,-1/0],[KL.SeverityLevel.EMERGENCY,0],[KL.SeverityLevel.ALERT,1],[KL.SeverityLevel.CRITICAL,2],[KL.SeverityLevel.ERROR,3],[KL.SeverityLevel.WARNING,4],[KL.SeverityLevel.NOTICE,5],[KL.SeverityLevel.INFORMATIONAL,6],[KL.SeverityLevel.DEBUG,7],[KL.SeverityLevel.TRACE,8]]);KL.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function HY(F){let A=Object.values(KL.SeverityLevel),B=F?.toLowerCase();if(B!=null&&A.includes(B))return B;return null}function D9(F){return{write:WL.promisify((A,B)=>{let D=WL.inspect(A,{compact:!0,breakLength:1/0});F.write(`${D}
`,"utf-8",B);return})}}function Ko({MONGODB_LOG_PATH:F},{mongodbLogPath:A}){if(typeof A==="string"&&/^stderr$/i.test(A))return{mongodbLogPath:D9(process.stderr),mongodbLogPathIsStdErr:!0};if(typeof A==="string"&&/^stdout$/i.test(A))return{mongodbLogPath:D9(process.stdout),mongodbLogPathIsStdErr:!1};if(typeof A==="object"&&typeof A?.write==="function")return{mongodbLogPath:A,mongodbLogPathIsStdErr:!1};if(F&&/^stderr$/i.test(F))return{mongodbLogPath:D9(process.stderr),mongodbLogPathIsStdErr:!0};if(F&&/^stdout$/i.test(F))return{mongodbLogPath:D9(process.stdout),mongodbLogPathIsStdErr:!1};return{mongodbLogPath:D9(process.stderr),mongodbLogPathIsStdErr:!0}}function q7(F,A,B){return HY(F)??HY(A)??B}function Uo(F,A){let B=KL.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(F),D=KL.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(A);return B<D?-1:B>D?1:0}function X4(F,A,B={}){let D="",X=0,Z=function J($,Y){if(X>=A)return;if($==="")return X+=1,Y;if(X+=$.length+4,Y==null)return Y;switch(typeof Y){case"string":X+=Y.length+2;break;case"number":case"bigint":X+=String(Y).length;break;case"boolean":X+=Y?4:5;break;case"object":if(X9.isUint8Array(Y))X+=22+Y.byteLength+Y.byteLength*0.33+18|0;else if("_bsontype"in Y){let E=Y;switch(E._bsontype){case"Int32":X+=String(E.value).length;break;case"Double":X+=(E.value|0)===E.value?String(E.value).length+2:String(E.value).length;break;case"Long":X+=E.toString().length;break;case"ObjectId":X+=35;break;case"MaxKey":case"MinKey":X+=13;break;case"Binary":X+=22+Y.position+Y.position*0.33+18|0;break;case"Timestamp":X+=19+String(E.t).length+5+String(E.i).length+2;break;case"Code":if(E.scope==null)X+=E.code.length+10+2;else X+=E.code.length+10+11;break;case"BSONRegExp":X+=34+E.pattern.length+13+E.options.length+3;break}}}return Y};if(typeof F==="string")D=F;else if(typeof F==="function")D=F.name;else try{if(A!==0)D=HL.EJSON.stringify(F,Z,0,B);else D=HL.EJSON.stringify(F,B)}catch(J){D=`Extended JSON serialization failed with: ${J.message}`}if(A!==0&&D.length>A&&D.charCodeAt(A-1)!==D.codePointAt(A-1)){if(A--,A===0)return""}return A!==0&&D.length>A?`${D.slice(0,A)}...`:D}function Vo(F){let A=F;return A.toLog!==void 0&&typeof A.toLog==="function"}function tA(F,A,B=KL.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:D,operation:X,topologyDescription:Z,message:J}=A;return F.selector=X4(D,B),F.operation=X,F.topologyDescription=X4(Z,B),F.message=J,F}function CY(F,A){F.commandName=A.commandName,F.requestId=A.requestId,F.driverConnectionId=A.connectionId;let{host:B,port:D}=X9.HostAddress.fromString(A.address).toHostPort();if(F.serverHost=B,F.serverPort=D,A?.serviceId)F.serviceId=A.serviceId.toHexString();return F.databaseName=A.databaseName,F.serverConnectionId=A.serverConnectionId,F}function B6(F,A){let{host:B,port:D}=X9.HostAddress.fromString(A.address).toHostPort();return F.serverHost=B,F.serverPort=D,F}function D4(F,A){return F.topologyId=A.topologyId,F}function WY(F,A){let{awaited:B,connectionId:D}=A;F.awaited=B,F.driverConnectionId=A.connectionId;let{host:X,port:Z}=X9.HostAddress.fromString(D).toHostPort();return F.serverHost=X,F.serverPort=Z,F}function zL(F,A=KL.DEFAULT_MAX_DOCUMENT_LENGTH){let B=Object.create(null);switch(F.name){case a1.SERVER_SELECTION_STARTED:return B=tA(B,F,A),B;case a1.SERVER_SELECTION_FAILED:return B=tA(B,F,A),B.failure=F.failure?.message,B;case a1.SERVER_SELECTION_SUCCEEDED:return B=tA(B,F,A),B.serverHost=F.serverHost,B.serverPort=F.serverPort,B;case a1.WAITING_FOR_SUITABLE_SERVER:return B=tA(B,F,A),B.remainingTimeMS=F.remainingTimeMS,B;case a1.COMMAND_STARTED:return B=CY(B,F),B.message="Command started",B.command=X4(F.command,A,{relaxed:!0}),B.databaseName=F.databaseName,B;case a1.COMMAND_SUCCEEDED:return B=CY(B,F),B.message="Command succeeded",B.durationMS=F.duration,B.reply=X4(F.reply,A,{relaxed:!0}),B;case a1.COMMAND_FAILED:return B=CY(B,F),B.message="Command failed",B.durationMS=F.duration,B.failure=F.failure?.message??"(redacted)",B;case a1.CONNECTION_POOL_CREATED:if(B=B6(B,F),B.message="Connection pool created",F.options){let{maxIdleTimeMS:D,minPoolSize:X,maxPoolSize:Z,maxConnecting:J,waitQueueTimeoutMS:$}=F.options;B={...B,maxIdleTimeMS:D,minPoolSize:X,maxPoolSize:Z,maxConnecting:J,waitQueueTimeoutMS:$}}return B;case a1.CONNECTION_POOL_READY:return B=B6(B,F),B.message="Connection pool ready",B;case a1.CONNECTION_POOL_CLEARED:if(B=B6(B,F),B.message="Connection pool cleared",F.serviceId?._bsontype==="ObjectId")B.serviceId=F.serviceId?.toHexString();return B;case a1.CONNECTION_POOL_CLOSED:return B=B6(B,F),B.message="Connection pool closed",B;case a1.CONNECTION_CREATED:return B=B6(B,F),B.message="Connection created",B.driverConnectionId=F.connectionId,B;case a1.CONNECTION_READY:return B=B6(B,F),B.message="Connection ready",B.driverConnectionId=F.connectionId,B.durationMS=F.durationMS,B;case a1.CONNECTION_CLOSED:switch(B=B6(B,F),B.message="Connection closed",B.driverConnectionId=F.connectionId,F.reason){case"stale":B.reason="Connection became stale because the pool was cleared";break;case"idle":B.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":if(B.reason="An error occurred while using the connection",F.error)B.error=F.error;break;case"poolClosed":B.reason="Connection pool was closed";break;default:B.reason=`Unknown close reason: ${F.reason}`}return B;case a1.CONNECTION_CHECK_OUT_STARTED:return B=B6(B,F),B.message="Connection checkout started",B;case a1.CONNECTION_CHECK_OUT_FAILED:switch(B=B6(B,F),B.message="Connection checkout failed",F.reason){case"poolClosed":B.reason="Connection pool was closed";break;case"timeout":B.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":if(B.reason="An error occurred while trying to establish a new connection",F.error)B.error=F.error;break;default:B.reason=`Unknown close reason: ${F.reason}`}return B.durationMS=F.durationMS,B;case a1.CONNECTION_CHECKED_OUT:return B=B6(B,F),B.message="Connection checked out",B.driverConnectionId=F.connectionId,B.durationMS=F.durationMS,B;case a1.CONNECTION_CHECKED_IN:return B=B6(B,F),B.message="Connection checked in",B.driverConnectionId=F.connectionId,B;case a1.SERVER_OPENING:return B=D4(B,F),B=B6(B,F),B.message="Starting server monitoring",B;case a1.SERVER_CLOSED:return B=D4(B,F),B=B6(B,F),B.message="Stopped server monitoring",B;case a1.SERVER_HEARTBEAT_STARTED:return B=D4(B,F),B=WY(B,F),B.message="Server heartbeat started",B;case a1.SERVER_HEARTBEAT_SUCCEEDED:return B=D4(B,F),B=WY(B,F),B.message="Server heartbeat succeeded",B.durationMS=F.duration,B.serverConnectionId=F.serverConnectionId,B.reply=X4(F.reply,A,{relaxed:!0}),B;case a1.SERVER_HEARTBEAT_FAILED:return B=D4(B,F),B=WY(B,F),B.message="Server heartbeat failed",B.durationMS=F.duration,B.failure=F.failure?.message,B;case a1.TOPOLOGY_OPENING:return B=D4(B,F),B.message="Starting topology monitoring",B;case a1.TOPOLOGY_CLOSED:return B=D4(B,F),B.message="Stopped topology monitoring",B;case a1.TOPOLOGY_DESCRIPTION_CHANGED:return B=D4(B,F),B.message="Topology description changed",B.previousDescription=B.reply=X4(F.previousDescription,A),B.newDescription=B.reply=X4(F.newDescription,A),B;default:for(let[D,X]of Object.entries(F))if(X!=null)B[D]=X}return B}class QL{constructor(F){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=F.componentSeverities,this.maxDocumentLength=F.maxDocumentLength,this.logDestination=F.logDestination,this.logDestinationIsStdErr=F.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let F=Object();for(let A of Object.values(KL.MongoLoggableComponent)){F[A]={};for(let B of Object.values(KL.SeverityLevel))F[A][B]=Uo(B,this.componentSeverities[A])<=0}return F}turnOffSeverities(){for(let F of Object.values(KL.MongoLoggableComponent)){this.componentSeverities[F]=KL.SeverityLevel.OFF;for(let A of Object.values(KL.SeverityLevel))this.severities[F][A]=!1}}logWriteFailureHandler(F){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=D9(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(KL.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:F.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(F,A){if(A===KL.SeverityLevel.OFF)return!1;return this.severities[F][A]}log(F,A,B){if(!this.willLog(A,F))return;let D={t:new Date,c:A,s:F};if(typeof B==="string")D.message=B;else if(typeof B==="object")if(Vo(B))D={...D,...B.toLog()};else D={...D,...zL(B,this.maxDocumentLength)};if(X9.isPromiseLike(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(D)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let X=this.logDestination.write(D);if(X9.isPromiseLike(X))this.pendingLog=X.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this))}catch(X){this.logWriteFailureHandler(X)}}static resolveOptions(F,A){let B=Ko(F,A),D={...F,...A,mongodbLogPath:B.mongodbLogPath,mongodbLogPathIsStdErr:B.mongodbLogPathIsStdErr},X=q7(D.mongodbLogComponentSeverities?.default,D.MONGODB_LOG_ALL,KL.SeverityLevel.OFF);return{componentSeverities:{command:q7(D.mongodbLogComponentSeverities?.command,D.MONGODB_LOG_COMMAND,X),topology:q7(D.mongodbLogComponentSeverities?.topology,D.MONGODB_LOG_TOPOLOGY,X),serverSelection:q7(D.mongodbLogComponentSeverities?.serverSelection,D.MONGODB_LOG_SERVER_SELECTION,X),connection:q7(D.mongodbLogComponentSeverities?.connection,D.MONGODB_LOG_CONNECTION,X),client:q7(D.mongodbLogComponentSeverities?.client,D.MONGODB_LOG_CLIENT,X),default:X},maxDocumentLength:D.mongodbLogMaxDocumentLength??X9.parseUnsignedInteger(D.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1000,logDestination:D.mongodbLogPath,logDestinationIsStdErr:D.mongodbLogPathIsStdErr}}}KL.MongoLogger=QL});var D6=z((LL)=>{Object.defineProperty(LL,"__esModule",{value:!0});LL.CancellationToken=LL.TypedEventEmitter=void 0;var Io=c("events"),No=Z4(),Mo=s();class QY extends Io.EventEmitter{emitAndLog(F,...A){if(this.emit(F,...A),this.component)this.mongoLogger?.debug(this.component,A[0])}emitAndLogHeartbeat(F,A,B,...D){if(this.emit(F,...D),this.component){let X={topologyId:A,serverConnectionId:B??null,...D[0]};this.mongoLogger?.debug(this.component,X)}}emitAndLogCommand(F,A,B,D,...X){if(F)this.emit(A,...X);if(D){let Z={databaseName:B,...X[0]};this.mongoLogger?.debug(No.MongoLoggableComponent.COMMAND,Z)}}}LL.TypedEventEmitter=QY;class VL extends QY{constructor(...F){super(...F);this.on("error",Mo.noop)}}LL.CancellationToken=VL});var UY=z((PL)=>{Object.defineProperty(PL,"__esModule",{value:!0});PL.GetMoreOperation=void 0;var To=f1(),RL=l(),ko=s(),eA=h1();class KY extends eA.AbstractOperation{constructor(F,A,B,D){super(D);this.SERVER_COMMAND_RESPONSE_TYPE=To.CursorResponse,this.options=D,this.ns=F,this.cursorId=A,this.server=B}get commandName(){return"getMore"}buildCommand(F){if(this.cursorId==null||this.cursorId.isZero())throw new RL.MongoRuntimeError("Unable to iterate cursor with no id");let A=this.ns.collection;if(A==null)throw new RL.MongoRuntimeError("A collection name must be determined before getMore");let B={getMore:this.cursorId,collection:A};if(typeof this.options.batchSize==="number")B.batchSize=Math.abs(this.options.batchSize);if(typeof this.options.maxAwaitTimeMS==="number")B.maxTimeMS=this.options.maxAwaitTimeMS;if(this.options.comment!==void 0&&ko.maxWireVersion(F)>=9)B.comment=this.options.comment;return B}buildOptions(F){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:F,...this.options}}handleOk(F){return F}}PL.GetMoreOperation=KY;eA.defineAspects(KY,[eA.Aspect.READ_OPERATION,eA.Aspect.MUST_SELECT_SAME_SERVER])});var jL=z((NL)=>{Object.defineProperty(NL,"__esModule",{value:!0});NL.KillCursorsOperation=void 0;var uo=f1(),Oo=l(),VY=h1();class LY extends VY.AbstractOperation{constructor(F,A,B,D){super(D);this.SERVER_COMMAND_RESPONSE_TYPE=uo.MongoDBResponse,this.ns=A,this.cursorId=F,this.server=B}get commandName(){return"killCursors"}buildCommand(F,A){let B=this.ns.collection;if(B==null)throw new Oo.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:B,cursors:[this.cursorId]}}buildOptions(F){return{session:this.session,timeoutContext:F}}handleError(F){}}NL.KillCursorsOperation=LY;VY.defineAspects(LY,[VY.Aspect.MUST_SELECT_SAME_SERVER])});var wY=z((TL)=>{Object.defineProperty(TL,"__esModule",{value:!0});TL.ConnectionPoolMetrics=void 0;class z7{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}static{this.TXN="txn"}static{this.CURSOR="cursor"}static{this.OTHER="other"}markPinned(F){if(F===z7.TXN)this.txnConnections+=1;else if(F===z7.CURSOR)this.cursorConnections+=1;else this.otherConnections+=1}markUnpinned(F){if(F===z7.TXN)this.txnConnections-=1;else if(F===z7.CURSOR)this.cursorConnections-=1;else this.otherConnections-=1}info(F){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${F}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}}TL.ConnectionPoolMetrics=z7});var RY=z((SL)=>{Object.defineProperty(SL,"__esModule",{value:!0});SL.Transaction=SL.TxnState=void 0;SL.isTransactionCommand=yo;var uL=l(),So=x6(),xo=_0(),_o=P2();SL.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var fo={[SL.TxnState.NO_TRANSACTION]:[SL.TxnState.NO_TRANSACTION,SL.TxnState.STARTING_TRANSACTION],[SL.TxnState.STARTING_TRANSACTION]:[SL.TxnState.TRANSACTION_IN_PROGRESS,SL.TxnState.TRANSACTION_COMMITTED,SL.TxnState.TRANSACTION_COMMITTED_EMPTY,SL.TxnState.TRANSACTION_ABORTED],[SL.TxnState.TRANSACTION_IN_PROGRESS]:[SL.TxnState.TRANSACTION_IN_PROGRESS,SL.TxnState.TRANSACTION_COMMITTED,SL.TxnState.TRANSACTION_ABORTED],[SL.TxnState.TRANSACTION_COMMITTED]:[SL.TxnState.TRANSACTION_COMMITTED,SL.TxnState.TRANSACTION_COMMITTED_EMPTY,SL.TxnState.STARTING_TRANSACTION,SL.TxnState.NO_TRANSACTION],[SL.TxnState.TRANSACTION_ABORTED]:[SL.TxnState.STARTING_TRANSACTION,SL.TxnState.NO_TRANSACTION],[SL.TxnState.TRANSACTION_COMMITTED_EMPTY]:[SL.TxnState.TRANSACTION_COMMITTED_EMPTY,SL.TxnState.NO_TRANSACTION]},go=new Set([SL.TxnState.STARTING_TRANSACTION,SL.TxnState.TRANSACTION_IN_PROGRESS]),bo=new Set([SL.TxnState.TRANSACTION_COMMITTED,SL.TxnState.TRANSACTION_COMMITTED_EMPTY,SL.TxnState.TRANSACTION_ABORTED]);class OL{constructor(F){F=F??{},this.state=SL.TxnState.NO_TRANSACTION,this.options={};let A=_o.WriteConcern.fromOptions(F);if(A){if(A.w===0)throw new uL.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=A}if(F.readConcern)this.options.readConcern=So.ReadConcern.fromOptions(F);if(F.readPreference)this.options.readPreference=xo.ReadPreference.fromOptions(F);if(F.maxCommitTimeMS)this.options.maxTimeMS=F.maxCommitTimeMS;this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===SL.TxnState.STARTING_TRANSACTION}get isActive(){return go.has(this.state)}get isCommitted(){return bo.has(this.state)}transition(F){let A=fo[this.state];if(A&&A.includes(F)){if(this.state=F,this.state===SL.TxnState.NO_TRANSACTION||this.state===SL.TxnState.STARTING_TRANSACTION||this.state===SL.TxnState.TRANSACTION_ABORTED)this.unpinServer();return}throw new uL.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${F}]`)}pinServer(F){if(this.isActive)this._pinnedServer=F}unpinServer(){this._pinnedServer=void 0}}SL.Transaction=OL;function yo(F){return!!(F.commitTransaction||F.abortTransaction)}});var z5=z((yL)=>{Object.defineProperty(yL,"__esModule",{value:!0});yL.ServerSessionPool=yL.ServerSession=yL.ClientSession=void 0;yL.maybeClearPinnedConnection=BB;yL.applySession=lo;yL.updateSessionFromResponse=po;var AB=$1(),DB=wY(),gL=w0(),E1=l(),vo=D6(),FB=m0(),PY=q5(),mo=x6(),IY=_0(),MY=e2(),NY=f0(),v1=RY(),s0=s(),Q7=P2();class jY extends vo.TypedEventEmitter{constructor(F,A,B,D){super();if(this.timeoutContext=null,this.on("error",s0.noop),F==null)throw new E1.MongoRuntimeError("ClientSession requires a MongoClient");if(A==null||!(A instanceof TY))throw new E1.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(B=B??{},this.snapshotEnabled=B.snapshot===!0,B.causalConsistency===!0&&this.snapshotEnabled)throw new E1.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=F,this.sessionPool=A,this.hasEnded=!1,this.clientOptions=D,this.timeoutMS=B.defaultTimeoutMS??F.s.options?.timeoutMS,this.explicit=!!B.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let X=this.explicit&&B.snapshot!==!0;this.supports={causalConsistency:B.causalConsistency??X},this.clusterTime=B.initialClusterTime,this.operationTime=void 0,this.owner=B.owner,this.defaultTransactionOptions={...B.defaultTransactionOptions},this.transaction=new v1.Transaction}get id(){return this.serverSession?.id}get serverSession(){let F=this._serverSession;if(F==null){if(this.explicit)throw new E1.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new E1.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");F=this.sessionPool.acquire(),this._serverSession=F}return F}get loadBalanced(){return this.client.topology?.description.type===MY.TopologyType.LoadBalanced}pin(F){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=F,F.emit(gL.PINNED,this.inTransaction()?DB.ConnectionPoolMetrics.TXN:DB.ConnectionPoolMetrics.CURSOR)}unpin(F){if(this.loadBalanced)return BB(this,F);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(F){try{if(this.inTransaction())await this.abortTransaction({...F,throwTimeout:!0})}catch(A){if(A.name==="MongoOperationTimeoutError")throw A;s0.squashError(A)}finally{if(!this.hasEnded){let A=this.serverSession;if(A!=null)this.sessionPool.release(A),this._serverSession=new ZB(A);this.hasEnded=!0,this.emit("ended",this)}BB(this,{force:!0,...F})}}async[Symbol.asyncDispose](){await this.endSession({force:!0})}advanceOperationTime(F){if(this.operationTime==null){this.operationTime=F;return}if(F.greaterThan(this.operationTime))this.operationTime=F}advanceClusterTime(F){if(!F||typeof F!=="object")throw new E1.MongoInvalidArgumentError("input cluster time must be an object");if(!F.clusterTime||F.clusterTime._bsontype!=="Timestamp")throw new E1.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!F.signature||F.signature.hash?._bsontype!=="Binary"||typeof F.signature.keyId!=="bigint"&&typeof F.signature.keyId!=="number"&&F.signature.keyId?._bsontype!=="Long")throw new E1.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');MY._advanceClusterTime(this,F)}equals(F){if(!(F instanceof jY))return!1;if(this.id==null||F.id==null)return!1;return s0.ByteUtils.equals(this.id.id.buffer,F.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(F){if(this.snapshotEnabled)throw new E1.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new E1.MongoTransactionError("Transaction already in progress");if(this.isPinned&&this.transaction.isCommitted)this.unpin();this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new v1.Transaction({readConcern:F?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:F?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:F?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:F?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(v1.TxnState.STARTING_TRANSACTION)}async commitTransaction(F){if(this.transaction.state===v1.TxnState.NO_TRANSACTION)throw new E1.MongoTransactionError("No transaction started");if(this.transaction.state===v1.TxnState.STARTING_TRANSACTION||this.transaction.state===v1.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(v1.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===v1.TxnState.TRANSACTION_ABORTED)throw new E1.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let A={commitTransaction:1},B=typeof F?.timeoutMS==="number"?F.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,D=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(D!=null)if(B==null&&this.timeoutContext==null)Q7.WriteConcern.apply(A,{wtimeoutMS:1e4,w:"majority",...D});else{let J=Object.keys(D);if(J.length>2||!J.includes("wtimeoutMS")&&!J.includes("wTimeoutMS"))Q7.WriteConcern.apply(A,{...D,wtimeoutMS:void 0})}if(this.transaction.state===v1.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)if(B==null&&this.timeoutContext==null)Q7.WriteConcern.apply(A,{wtimeoutMS:1e4,...D,w:"majority"});else Q7.WriteConcern.apply(A,{w:"majority",...D,wtimeoutMS:void 0});if(typeof this.transaction.options.maxTimeMS==="number")A.maxTimeMS=this.transaction.options.maxTimeMS;if(this.transaction.recoveryToken)A.recoveryToken=this.transaction.recoveryToken;let X=new PY.RunCommandOperation(new s0.MongoDBNamespace("admin"),A,{session:this,readPreference:IY.ReadPreference.primary,bypassPinningCheck:!0}),Z=this.timeoutContext??(typeof B==="number"?NY.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:B}):null);try{await FB.executeOperation(this.client,X,Z),this.commitAttempted=void 0;return}catch(J){if(this.commitAttempted=!0,J instanceof E1.MongoError&&E1.isRetryableWriteError(J)){Q7.WriteConcern.apply(A,{wtimeoutMS:1e4,...D,w:"majority"}),this.unpin({force:!0});try{await FB.executeOperation(this.client,new PY.RunCommandOperation(new s0.MongoDBNamespace("admin"),A,{session:this,readPreference:IY.ReadPreference.primary,bypassPinningCheck:!0}),Z);return}catch($){if(fL($))$.addErrorLabel(E1.MongoErrorLabel.UnknownTransactionCommitResult);if(_L($))this.unpin({error:$});throw $}}if(fL(J))J.addErrorLabel(E1.MongoErrorLabel.UnknownTransactionCommitResult);if(_L(J))this.unpin({error:J});throw J}finally{this.transaction.transition(v1.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(F){if(this.transaction.state===v1.TxnState.NO_TRANSACTION)throw new E1.MongoTransactionError("No transaction started");if(this.transaction.state===v1.TxnState.STARTING_TRANSACTION){this.transaction.transition(v1.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===v1.TxnState.TRANSACTION_ABORTED)throw new E1.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===v1.TxnState.TRANSACTION_COMMITTED||this.transaction.state===v1.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new E1.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let A={abortTransaction:1},B=typeof F?.timeoutMS==="number"?F.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS==="number"?this.timeoutMS:null,D=B!=null?NY.TimeoutContext.create({timeoutMS:B,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,X=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(X!=null&&B==null)Q7.WriteConcern.apply(A,{wtimeoutMS:1e4,w:"majority",...X});if(this.transaction.recoveryToken)A.recoveryToken=this.transaction.recoveryToken;let Z=new PY.RunCommandOperation(new s0.MongoDBNamespace("admin"),A,{session:this,readPreference:IY.ReadPreference.primary,bypassPinningCheck:!0});try{await FB.executeOperation(this.client,Z,D),this.unpin();return}catch(J){if(this.unpin(),J.name==="MongoRuntimeError")throw J;if(F?.throwTimeout&&J.name==="MongoOperationTimeoutError")throw J;if(J instanceof E1.MongoError&&E1.isRetryableWriteError(J))try{await FB.executeOperation(this.client,Z,D);return}catch($){if($.name==="MongoRuntimeError")throw $;if(F?.throwTimeout&&$.name==="MongoOperationTimeoutError")throw $}}finally{if(this.transaction.transition(v1.TxnState.TRANSACTION_ABORTED),this.loadBalanced)BB(this,{force:!1})}}toBSON(){throw new E1.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(F,A){let D=A?.timeoutMS??this.timeoutMS??null;this.timeoutContext=D!=null?NY.TimeoutContext.create({timeoutMS:D,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let X=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:s0.now(),Z=!1,J;try{while(!Z){this.startTransaction(A);try{let $=F(this);if(!s0.isPromiseLike($))throw new E1.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(J=await $,this.transaction.state===v1.TxnState.NO_TRANSACTION||this.transaction.state===v1.TxnState.TRANSACTION_COMMITTED||this.transaction.state===v1.TxnState.TRANSACTION_ABORTED)return J}catch($){if(!($ instanceof E1.MongoError)||$ instanceof E1.MongoInvalidArgumentError)throw await this.abortTransaction(),$;if(this.transaction.state===v1.TxnState.STARTING_TRANSACTION||this.transaction.state===v1.TxnState.TRANSACTION_IN_PROGRESS)await this.abortTransaction();if($.hasErrorLabel(E1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||s0.now()-X<120000))continue;throw $}while(!Z)try{await this.commitTransaction(),Z=!0}catch($){if(!XB($)&&$.hasErrorLabel(E1.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||s0.now()-X<120000))continue;if($.hasErrorLabel(E1.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||s0.now()-X<120000))break;throw $}}return J}finally{this.timeoutContext=null}}}yL.ClientSession=jY;var co=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function _L(F){if(F instanceof E1.MongoError){if(E1.isRetryableWriteError(F)||F instanceof E1.MongoWriteConcernError||XB(F)){if(bL(F))return!0}else if(F.hasErrorLabel(E1.MongoErrorLabel.TransientTransactionError))return!0}return!1}function fL(F){let A=E1.isRetryableWriteError(F);return A||=F instanceof E1.MongoWriteConcernError,A||=XB(F),A&&=bL(F),A}function bL(F){let A=F instanceof E1.MongoServerError&&F.codeName&&co.has(F.codeName);return XB(F)||!A&&F.code!==E1.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&F.code!==E1.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function BB(F,A){let B=F.pinnedConnection,D=A?.error;if(F.inTransaction()&&D&&D instanceof E1.MongoError&&D.hasErrorLabel(E1.MongoErrorLabel.TransientTransactionError))return;let X=F.client.topology;if(B&&X!=null){let J=Array.from(X.s.servers.values())[0];if(A?.error==null||A?.force){if(J.pool.checkIn(B),F.pinnedConnection=void 0,B.emit(gL.UNPINNED,F.transaction.state!==v1.TxnState.NO_TRANSACTION?DB.ConnectionPoolMetrics.TXN:DB.ConnectionPoolMetrics.CURSOR),A?.forceClear)J.pool.clear({serviceId:B.serviceId})}}}function XB(F){if(F==null||!(F instanceof E1.MongoServerError))return!1;return F.code===E1.MONGODB_ERROR_CODES.MaxTimeMSExpired||F.writeConcernError?.code===E1.MONGODB_ERROR_CODES.MaxTimeMSExpired}class ZB{constructor(F){if(F!=null){let A=Buffer.allocUnsafe(16);A.set(F.id.id.buffer),this.id={id:new AB.Binary(A,F.id.id.sub_type)},this.lastUse=F.lastUse,this.txnNumber=F.txnNumber,this.isDirty=F.isDirty;return}this.id={id:new AB.Binary(s0.uuidV4(),AB.Binary.SUBTYPE_UUID)},this.lastUse=s0.now(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(F){return Math.round(s0.calculateDurationInMs(this.lastUse)%86400000%3600000/60000)>F-1}}yL.ServerSession=ZB;class TY{constructor(F){if(F==null)throw new E1.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=F,this.sessions=new s0.List}acquire(){let F=this.client.topology?.logicalSessionTimeoutMinutes??10,A=null;while(this.sessions.length>0){let B=this.sessions.shift();if(B!=null&&(!!this.client.topology?.loadBalanced||!B.hasTimedOut(F))){A=B;break}}if(A==null)A=new ZB;return A}release(F){let A=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!A)this.sessions.unshift(F);if(!A)return;if(this.sessions.prune((B)=>B.hasTimedOut(A)),!F.hasTimedOut(A)){if(F.isDirty)return;this.sessions.unshift(F)}}}yL.ServerSessionPool=TY;function lo(F,A,B){if(F.hasEnded)return new E1.MongoExpiredSessionError;let D=F.serverSession;if(D==null)return new E1.MongoRuntimeError("Unable to acquire server session");if(B.writeConcern?.w===0){if(F&&F.explicit)return new E1.MongoAPIError("Cannot have explicit session with unacknowledged writes");return}D.lastUse=s0.now(),A.lsid=D.id;let X=F.inTransaction()||v1.isTransactionCommand(A);if(!!B.willRetryWrite||X)D.txnNumber+=F.txnNumberIncrement,F.txnNumberIncrement=0,A.txnNumber=AB.Long.fromNumber(D.txnNumber);if(!X){if(F.transaction.state!==v1.TxnState.NO_TRANSACTION)F.transaction.transition(v1.TxnState.NO_TRANSACTION);if(F.supports.causalConsistency&&F.operationTime&&s0.commandSupportsReadConcern(A))A.readConcern=A.readConcern||{},Object.assign(A.readConcern,{afterClusterTime:F.operationTime});else if(F.snapshotEnabled){if(A.readConcern=A.readConcern||{level:mo.ReadConcernLevel.snapshot},F.snapshotTime!=null)Object.assign(A.readConcern,{atClusterTime:F.snapshotTime})}return}if(A.autocommit=!1,F.transaction.state===v1.TxnState.STARTING_TRANSACTION){F.transaction.transition(v1.TxnState.TRANSACTION_IN_PROGRESS),A.startTransaction=!0;let J=F.transaction.options.readConcern||F?.clientOptions?.readConcern;if(J)A.readConcern=J;if(F.supports.causalConsistency&&F.operationTime)A.readConcern=A.readConcern||{},Object.assign(A.readConcern,{afterClusterTime:F.operationTime})}return}function po(F,A){if(A.$clusterTime)MY._advanceClusterTime(F,A.$clusterTime);if(A.operationTime&&F&&F.supports.causalConsistency)F.advanceOperationTime(A.operationTime);if(A.recoveryToken&&F&&F.inTransaction())F.transaction._recoveryToken=A.recoveryToken;if(F?.snapshotEnabled&&F.snapshotTime==null){let B=A.atClusterTime;if(B)F.snapshotTime=B}}});var H2=z((pL)=>{Object.defineProperty(pL,"__esModule",{value:!0});pL.CursorTimeoutContext=pL.AbstractCursor=pL.CursorTimeoutMode=pL.CURSOR_FLAGS=void 0;var to=c("stream"),K7=$1(),b0=l(),oo=D6(),vL=m0(),eo=UY(),Fe=jL(),mL=x6(),JB=_0(),Ae=z5(),kY=f0(),X6=s();pL.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function dL(){this.client.s.activeCursors.delete(this)}pL.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});class cL extends oo.TypedEventEmitter{static{this.CLOSE="close"}constructor(F,A,B={}){super();if(this.documents=null,this.hasEmittedClose=!1,this.on("error",X6.noop),!F.s.isMongoClient)throw new b0.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=F,this.cursorNamespace=A,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:B.readPreference&&B.readPreference instanceof JB.ReadPreference?B.readPreference:JB.ReadPreference.primary,...K7.pluckBSONSerializeOptions(B),timeoutMS:B?.timeoutContext?.csotEnabled()?B.timeoutContext.timeoutMS:B.timeoutMS,tailable:B.tailable,awaitData:B.awaitData},this.cursorOptions.timeoutMS!=null)if(B.timeoutMode==null)if(B.tailable){if(B.awaitData){if(B.maxAwaitTimeMS!=null&&B.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new b0.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor")}this.cursorOptions.timeoutMode=pL.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=pL.CursorTimeoutMode.LIFETIME;else{if(B.tailable&&B.timeoutMode===pL.CursorTimeoutMode.LIFETIME)throw new b0.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=B.timeoutMode}else if(B.timeoutMode!=null)throw new b0.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===pL.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let D=mL.ReadConcern.fromOptions(B);if(D)this.cursorOptions.readConcern=D;if(typeof B.batchSize==="number")this.cursorOptions.batchSize=B.batchSize;if(B.comment!==void 0)this.cursorOptions.comment=B.comment;if(typeof B.maxTimeMS==="number")this.cursorOptions.maxTimeMS=B.maxTimeMS;if(typeof B.maxAwaitTimeMS==="number")this.cursorOptions.maxAwaitTimeMS=B.maxAwaitTimeMS;this.cursorSession=B.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:B?.enableUtf8Validation===!1?!1:!0}},this.timeoutContext=B.timeoutContext,this.signal=B.signal,this.abortListener=X6.addAbortListener(this.signal,()=>void this.close().then(void 0,X6.squashError)),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(F){this.cursorSession=F}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async[Symbol.asyncDispose](){await this.close()}trackCursor(){if(this.cursorClient.s.activeCursors.add(this),!this.listeners("close").includes(dL))this.once("close",dL)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(F){let A=[],B=Math.min(F??this.documents?.length??0,this.documents?.length??0);for(let D=0;D<B;D++){let X=this.documents?.shift(this.deserializationOptions);if(X!=null)A.push(X)}return A}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),this.closed)return;try{while(!0){if(this.isKilled)return;if(this.closed)return;if(this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let F=await this.next();if(F===null)return;yield F,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(F){X6.squashError(F)}}}stream(){let F=new lL(this),A=X6.addAbortListener(this.signal,function(){F.destroy(this.reason)});return F.once("end",()=>{A?.[X6.kDispose]()}),F}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===K7.Long.ZERO)return!1;if(this.cursorOptions.timeoutMode===pL.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===pL.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===K7.Long.ZERO)throw new b0.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===pL.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{do{let F=this.documents?.shift(this.deserializationOptions);if(F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{if(this.cursorOptions.timeoutMode===pL.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===K7.Long.ZERO)throw new b0.MongoCursorExhaustedError;if(this.cursorOptions.timeoutMode===pL.CursorTimeoutMode.ITERATION&&this.cursorId!=null)this.timeoutContext?.refresh();try{let F=this.documents?.shift(this.deserializationOptions);if(F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}if(await this.fetchBatch(),F=this.documents?.shift(this.deserializationOptions),F!=null){if(this.transform!=null)return await this.transformDocument(F);return F}}finally{if(this.cursorOptions.timeoutMode===pL.CursorTimeoutMode.ITERATION)this.timeoutContext?.clear()}return null}async forEach(F){if(this.signal?.throwIfAborted(),typeof F!=="function")throw new b0.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let A of this)if(F(A)===!1)break}async close(F){await this.cleanup(F?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let F=[];for await(let A of this){F.push(A);let B=this.readBufferedDocuments();if(this.transform!=null)for(let D of B)F.push(await this.transformDocument(D));else for(let D of B)F.push(D)}return F}addCursorFlag(F,A){if(this.throwIfInitialized(),!pL.CURSOR_FLAGS.includes(F))throw new b0.MongoInvalidArgumentError(`Flag ${F} is not one of ${pL.CURSOR_FLAGS}`);if(typeof A!=="boolean")throw new b0.MongoInvalidArgumentError(`Flag ${F} must be a boolean value`);return this.cursorOptions[F]=A,this}map(F){this.throwIfInitialized();let A=this.transform;if(A)this.transform=(B)=>{return F(A(B))};else this.transform=F;return this}withReadPreference(F){if(this.throwIfInitialized(),F instanceof JB.ReadPreference)this.cursorOptions.readPreference=F;else if(typeof F==="string")this.cursorOptions.readPreference=JB.ReadPreference.fromString(F);else throw new b0.MongoInvalidArgumentError(`Invalid read preference: ${F}`);return this}withReadConcern(F){this.throwIfInitialized();let A=mL.ReadConcern.fromOptions({readConcern:F});if(A)this.cursorOptions.readConcern=A;return this}maxTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new b0.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=F,this}batchSize(F){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new b0.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof F!=="number")throw new b0.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=F,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new b0.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");if(!this.initialized)return;if(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1){if(!this.cursorSession.hasEnded)this.cursorSession.endSession().then(void 0,X6.squashError);this.cursorSession=null}}async getMore(){if(this.cursorId==null)throw new b0.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new b0.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new b0.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let F={...this.cursorOptions,session:this.cursorSession,batchSize:this.cursorOptions.batchSize},A=new eo.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,F);return await vL.executeOperation(this.cursorClient,A,this.timeoutContext)}async cursorInit(){if(this.cursorOptions.timeoutMS!=null)this.timeoutContext??=new Q5(kY.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this);try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let F=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let A=F.response;this.selectedServer=F.server,this.cursorId=A.id,this.cursorNamespace=A.ns??this.namespace,this.documents=A,this.initialized=!0}catch(F){throw this.initialized=!0,await this.cleanup(void 0,F),F}if(this.isDead)await this.cleanup();return}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null){if(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead)return}try{let F=await this.getMore();this.cursorId=F.id,this.documents=F}catch(F){try{await this.cleanup(void 0,F)}catch(A){X6.squashError(A)}throw F}if(this.isDead)await this.cleanup()}async cleanup(F,A){this.abortListener?.[X6.kDispose](),this.isClosed=!0;let B=()=>{if(F!=null)return this.timeoutContext?.clear(),new Q5(kY.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:F}),this);else return this.timeoutContext?.refreshed()};await(async(Z)=>{try{await Z()}finally{this.emitClose()}})(async()=>{let Z=this.cursorSession;if(!Z)return;try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!Z.hasEnded){this.isKilled=!0;let J=this.cursorId;this.cursorId=K7.Long.ZERO,await vL.executeOperation(this.cursorClient,new Fe.KillCursorsOperation(J,this.cursorNamespace,this.selectedServer,{session:Z}),B())}}catch(J){X6.squashError(J)}finally{if(Z.owner===this)await Z.endSession({error:A});if(!Z.inTransaction())Ae.maybeClearPinnedConnection(Z,{error:A})}})}emitClose(){try{if(!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed))this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(F){if(this.transform==null)return F;try{let A=this.transform(F);if(A===null)throw new b0.MongoAPIError("Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.");return A}catch(A){try{await this.close()}catch(B){X6.squashError(B)}throw A}}throwIfInitialized(){if(this.initialized)throw new b0.MongoCursorInUseError}}pL.AbstractCursor=cL;class lL extends to.Readable{constructor(F){super({objectMode:!0,autoDestroy:!1,highWaterMark:1});this._readInProgress=!1,this._cursor=F}_read(F){if(!this._readInProgress)this._readInProgress=!0,this._readNext()}_destroy(F,A){this._cursor.close().then(()=>A(F),(B)=>A(B))}_readNext(){if(this._cursor.id===K7.Long.ZERO){this.push(null);return}this._cursor.next().then((F)=>{if(F==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,X6.squashError);else{if(this.push(F))return this._readNext();this._readInProgress=!1}},(F)=>{if(F.message.match(/server is closed/))return this._cursor.close().then(void 0,X6.squashError),this.push(null);if(F.message.match(/operation was interrupted/))return this.push(null);return this.destroy(F)}).catch((F)=>{this._readInProgress=!1,this.destroy(F)})}}class Q5 extends kY.TimeoutContext{constructor(F,A){super();this.timeoutContext=F,this.owner=A}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!=="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!=="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new Q5(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(F,A){this.timeoutContext.addMaxTimeMSToCommand(F,A)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}}pL.CursorTimeoutContext=Q5});var YB=z((aL)=>{Object.defineProperty(aL,"__esModule",{value:!0});aL.ExplainableCursor=void 0;var De=H2();class nL extends De.AbstractCursor{resolveExplainTimeoutOptions(F,A){let B,D;if(F==null&&A==null)B=void 0,D=void 0;else if(F!=null&&A==null)B=typeof F!=="object"?F:("verbosity"in F)?F:void 0,D=typeof F==="object"&&"timeoutMS"in F?F:void 0;else B=F,D=A;return{timeout:D,explain:B}}}aL.ExplainableCursor=nL});var K5=z((Fw)=>{Object.defineProperty(Fw,"__esModule",{value:!0});Fw.AggregationCursor=void 0;var OY=l(),rL=D5(),tL=E5(),oL=m0(),Xe=s(),eL=H2(),Ze=YB();class SY extends Ze.ExplainableCursor{constructor(F,A,B=[],D={}){super(F,A,D);this.pipeline=B,this.aggregateOptions=D;let X=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===eL.CursorTimeoutMode.ITERATION&&(X?.$merge!=null||X?.$out!=null))throw new OY.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let F=Xe.mergeOptions({},this.aggregateOptions);return delete F.session,new SY(this.client,this.namespace,this.pipeline,{...F})}map(F){return super.map(F)}async _initialize(F){let A={...this.aggregateOptions,...this.cursorOptions,session:F,signal:this.signal};if(A.explain)try{rL.validateExplainTimeoutOptions(A,rL.Explain.fromOptions(A))}catch{throw new OY.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let B=new tL.AggregateOperation(this.namespace,this.pipeline,A),D=await oL.executeOperation(this.client,B,this.timeoutContext);return{server:B.server,session:F,response:D}}async explain(F,A){let{explain:B,timeout:D}=this.resolveExplainTimeoutOptions(F,A);return(await oL.executeOperation(this.client,new tL.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...D,explain:B??!0}))).shift(this.deserializationOptions)}addStage(F){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===eL.CursorTimeoutMode.ITERATION&&(F.$out!=null||F.$merge!=null))throw new OY.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(F),this}group(F){return this.addStage({$group:F})}limit(F){return this.addStage({$limit:F})}match(F){return this.addStage({$match:F})}out(F){return this.addStage({$out:F})}project(F){return this.addStage({$project:F})}lookup(F){return this.addStage({$lookup:F})}redact(F){return this.addStage({$redact:F})}skip(F){return this.addStage({$skip:F})}sort(F){return this.addStage({$sort:F})}unwind(F){return this.addStage({$unwind:F})}geoNear(F){return this.addStage({$geoNear:F})}}Fw.AggregationCursor=SY});var _Y=z((Bw)=>{Object.defineProperty(Bw,"__esModule",{value:!0});Bw.CountOperation=void 0;var Je=f1(),Ye=E0(),$B=h1();class xY extends Ye.CommandOperation{constructor(F,A,B){super({s:{namespace:F}},B);this.SERVER_COMMAND_RESPONSE_TYPE=Je.MongoDBResponse,this.options=B,this.collectionName=F.collection,this.query=A}get commandName(){return"count"}buildCommandDocument(F,A){let B=this.options,D={count:this.collectionName,query:this.query};if(typeof B.limit==="number")D.limit=B.limit;if(typeof B.skip==="number")D.skip=B.skip;if(B.hint!=null)D.hint=B.hint;if(typeof B.maxTimeMS==="number")D.maxTimeMS=B.maxTimeMS;return D}handleOk(F){return F.getNumber("n")??0}}Bw.CountOperation=xY;$B.defineAspects(xY,[$B.Aspect.READ_OPERATION,$B.Aspect.RETRYABLE,$B.Aspect.SUPPORTS_RAW_DATA])});var Jw=z((Xw)=>{Object.defineProperty(Xw,"__esModule",{value:!0});Xw.FindOperation=void 0;var fY=f1(),$e=l(),Ee=G7(),Ge=s(),Ce=E0(),U7=h1();class gY extends Ce.CommandOperation{constructor(F,A={},B={}){super(void 0,B);if(this.SERVER_COMMAND_RESPONSE_TYPE=fY.CursorResponse,this.options={...B},delete this.options.writeConcern,this.ns=F,typeof A!=="object"||Array.isArray(A))throw new $e.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=A!=null&&A._bsontype==="ObjectId"?{_id:A}:A,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?fY.ExplainedCursorResponse:fY.CursorResponse}get commandName(){return"find"}buildOptions(F){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:F}}handleOk(F){return F}buildCommandDocument(){return We(this.ns,this.filter,this.options)}}Xw.FindOperation=gY;function We(F,A,B){let D={find:F.collection,filter:A};if(B.sort)D.sort=Ee.formatSort(B.sort);if(B.projection){let X=B.projection;if(X&&Array.isArray(X))X=X.length?X.reduce((Z,J)=>{return Z[J]=1,Z},{}):{_id:1};D.projection=X}if(B.hint)D.hint=Ge.normalizeHintField(B.hint);if(typeof B.skip==="number")D.skip=B.skip;if(typeof B.limit==="number")if(B.limit<0)D.limit=-B.limit,D.singleBatch=!0;else D.limit=B.limit;if(typeof B.batchSize==="number")if(B.batchSize<0)D.limit=-B.batchSize;else if(B.batchSize===B.limit)D.batchSize=B.batchSize+1;else D.batchSize=B.batchSize;if(typeof B.singleBatch==="boolean")D.singleBatch=B.singleBatch;if(B.comment!==void 0)D.comment=B.comment;if(B.max)D.max=B.max;if(B.min)D.min=B.min;if(typeof B.returnKey==="boolean")D.returnKey=B.returnKey;if(typeof B.showRecordId==="boolean")D.showRecordId=B.showRecordId;if(typeof B.tailable==="boolean")D.tailable=B.tailable;if(typeof B.oplogReplay==="boolean")D.oplogReplay=B.oplogReplay;if(typeof B.timeout==="boolean")D.noCursorTimeout=!B.timeout;else if(typeof B.noCursorTimeout==="boolean")D.noCursorTimeout=B.noCursorTimeout;if(typeof B.awaitData==="boolean")D.awaitData=B.awaitData;if(typeof B.allowPartialResults==="boolean")D.allowPartialResults=B.allowPartialResults;if(typeof B.allowDiskUse==="boolean")D.allowDiskUse=B.allowDiskUse;if(B.let)D.let=B.let;return D}U7.defineAspects(gY,[U7.Aspect.READ_OPERATION,U7.Aspect.RETRYABLE,U7.Aspect.EXPLAINABLE,U7.Aspect.CURSOR_CREATING,U7.Aspect.SUPPORTS_RAW_DATA])});var vY=z((Ew)=>{Object.defineProperty(Ew,"__esModule",{value:!0});Ew.FindCursor=Ew.FLAGS=void 0;var He=f1(),K6=l(),Yw=D5(),qe=_Y(),bY=m0(),$w=Jw(),yY=G7(),EB=s(),ze=YB();Ew.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];class hY extends ze.ExplainableCursor{constructor(F,A,B={},D={}){super(F,A,D);if(this.numReturned=0,this.cursorFilter=B,this.findOptions=D,D.sort!=null)this.findOptions.sort=yY.formatSort(D.sort)}clone(){let F=EB.mergeOptions({},this.findOptions);return delete F.session,new hY(this.client,this.namespace,this.cursorFilter,{...F})}map(F){return super.map(F)}async _initialize(F){let A={...this.findOptions,...this.cursorOptions,session:F,signal:this.signal};if(A.explain)try{Yw.validateExplainTimeoutOptions(A,Yw.Explain.fromOptions(A))}catch{throw new K6.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let B=new $w.FindOperation(this.namespace,this.cursorFilter,A),D=await bY.executeOperation(this.client,B,this.timeoutContext);return this.numReturned=D.batchSize,{server:B.server,session:F,response:D}}async getMore(){let F=this.numReturned,A=this.findOptions.limit??1/0,B=A-F;if(F===A&&!this.id?.isZero()){try{await this.close()}catch(Z){EB.squashError(Z)}return He.CursorResponse.emptyGetMore}let D=EB.noop,{batchSize:X}=this.cursorOptions;if(X!=null&&X>B)this.cursorOptions.batchSize=B,D=()=>{this.cursorOptions.batchSize=X};try{let Z=await super.getMore();return this.numReturned=this.numReturned+Z.batchSize,Z}finally{D?.()}}async count(F){if(EB.emitWarningOnce("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof F==="boolean")throw new K6.MongoInvalidArgumentError("Invalid first parameter to count");return await bY.executeOperation(this.client,new qe.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...F}))}async explain(F,A){let{explain:B,timeout:D}=this.resolveExplainTimeoutOptions(F,A);return(await bY.executeOperation(this.client,new $w.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...D,explain:B??!0}))).shift(this.deserializationOptions)}filter(F){return this.throwIfInitialized(),this.cursorFilter=F,this}hint(F){return this.throwIfInitialized(),this.findOptions.hint=F,this}min(F){return this.throwIfInitialized(),this.findOptions.min=F,this}max(F){return this.throwIfInitialized(),this.findOptions.max=F,this}returnKey(F){return this.throwIfInitialized(),this.findOptions.returnKey=F,this}showRecordId(F){return this.throwIfInitialized(),this.findOptions.showRecordId=F,this}addQueryModifier(F,A){if(this.throwIfInitialized(),F[0]!=="$")throw new K6.MongoInvalidArgumentError(`${F} is not a valid query modifier`);switch(F.substr(1)){case"comment":this.findOptions.comment=A;break;case"explain":this.findOptions.explain=A;break;case"hint":this.findOptions.hint=A;break;case"max":this.findOptions.max=A;break;case"maxTimeMS":this.findOptions.maxTimeMS=A;break;case"min":this.findOptions.min=A;break;case"orderby":this.findOptions.sort=yY.formatSort(A);break;case"query":this.cursorFilter=A;break;case"returnKey":this.findOptions.returnKey=A;break;case"showDiskLoc":this.findOptions.showRecordId=A;break;default:throw new K6.MongoInvalidArgumentError(`Invalid query modifier: ${F}`)}return this}comment(F){return this.throwIfInitialized(),this.findOptions.comment=F,this}maxAwaitTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new K6.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=F,this}maxTimeMS(F){if(this.throwIfInitialized(),typeof F!=="number")throw new K6.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=F,this}project(F){return this.throwIfInitialized(),this.findOptions.projection=F,this}sort(F,A){if(this.throwIfInitialized(),this.findOptions.tailable)throw new K6.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=yY.formatSort(F,A),this}allowDiskUse(F=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new K6.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');if(!F)return this.findOptions.allowDiskUse=!1,this;return this.findOptions.allowDiskUse=!0,this}collation(F){return this.throwIfInitialized(),this.findOptions.collation=F,this}limit(F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new K6.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof F!=="number")throw new K6.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=F,this}skip(F){if(this.throwIfInitialized(),this.findOptions.tailable)throw new K6.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof F!=="number")throw new K6.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=F,this}}Ew.FindCursor=hY});var V5=z((Cw)=>{Object.defineProperty(Cw,"__esModule",{value:!0});Cw.ListIndexesOperation=Cw.DropIndexOperation=Cw.CreateIndexesOperation=void 0;var mY=f1(),Ke=l(),dY=s(),cY=E0(),b6=h1(),Ue=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function Ve(F){return typeof F==="number"||F==="2d"||F==="2dsphere"||F==="text"||F==="geoHaystack"}function Le(F){return Array.isArray(F)&&F.length===2&&Ve(F[1])}function we(F){let A=new Map,B=!Array.isArray(F)||Le(F)?[F]:F;for(let D of B)if(typeof D==="string")A.set(D,1);else if(Array.isArray(D))A.set(D[0],D[1]??1);else if(D instanceof Map)for(let[X,Z]of D)A.set(X,Z);else if(dY.isObject(D))for(let[X,Z]of Object.entries(D))A.set(X,Z);return A}function Re(F){let A=Object.entries(F).filter(([B])=>Ue.has(B));return Object.fromEntries(A.map(([B,D])=>B==="version"?["v",D]:[B,D]))}class U5 extends cY.CommandOperation{constructor(F,A,B,D){super(F,D);this.SERVER_COMMAND_RESPONSE_TYPE=mY.MongoDBResponse,this.options=D??{},this.options.collation=void 0,this.collectionName=A,this.indexes=B.map((X)=>{let Z=X.key instanceof Map?X.key:new Map(Object.entries(X.key)),J=X.name??Array.from(Z).flat().join("_");return{...Re(X),name:J,key:Z}}),this.ns=F.s.namespace}static fromIndexDescriptionArray(F,A,B,D){return new U5(F,A,B,D)}static fromIndexSpecification(F,A,B,D={}){let X=we(B),Z={...D,key:X};return new U5(F,A,[Z],D)}get commandName(){return"createIndexes"}buildCommandDocument(F){let A=this.options,B=this.indexes,D=dY.maxWireVersion(F),X={createIndexes:this.collectionName,indexes:B};if(A.commitQuorum!=null){if(D<9)throw new Ke.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");X.commitQuorum=A.commitQuorum}return X}handleOk(F){return this.indexes.map((B)=>B.name||"")}}Cw.CreateIndexesOperation=U5;class lY extends cY.CommandOperation{constructor(F,A,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=mY.MongoDBResponse,this.options=B??{},this.collection=F,this.indexName=A,this.ns=F.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument(F){return{dropIndexes:this.collection.collectionName,index:this.indexName}}}Cw.DropIndexOperation=lY;class pY extends cY.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=mY.CursorResponse,this.options={...A},delete this.options.writeConcern,this.collectionNamespace=F.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument(F){let A=dY.maxWireVersion(F),B=this.options.batchSize?{batchSize:this.options.batchSize}:{},D={listIndexes:this.collectionNamespace.collection,cursor:B};if(A>=9&&this.options.comment!==void 0)D.comment=this.options.comment;return D}handleOk(F){return F}}Cw.ListIndexesOperation=pY;b6.defineAspects(pY,[b6.Aspect.READ_OPERATION,b6.Aspect.RETRYABLE,b6.Aspect.CURSOR_CREATING,b6.Aspect.SUPPORTS_RAW_DATA]);b6.defineAspects(U5,[b6.Aspect.WRITE_OPERATION,b6.Aspect.SUPPORTS_RAW_DATA]);b6.defineAspects(lY,[b6.Aspect.WRITE_OPERATION,b6.Aspect.SUPPORTS_RAW_DATA])});var nY=z((Hw)=>{Object.defineProperty(Hw,"__esModule",{value:!0});Hw.ListIndexesCursor=void 0;var Ne=m0(),Me=V5(),je=H2();class iY extends je.AbstractCursor{constructor(F,A){super(F.client,F.s.namespace,A);this.parent=F,this.options=A}clone(){return new iY(this.parent,{...this.options,...this.cursorOptions})}async _initialize(F){let A=new Me.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:F}),B=await Ne.executeOperation(this.parent.client,A,this.timeoutContext);return{server:A.server,session:F,response:B}}}Hw.ListIndexesCursor=iY});var Uw=z((Qw)=>{Object.defineProperty(Qw,"__esModule",{value:!0});Qw.ListSearchIndexesCursor=void 0;var Te=K5();class zw extends Te.AggregationCursor{constructor({fullNamespace:F,client:A},B,D={}){let X=B==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:B}}];super(A,F,X,D)}}Qw.ListSearchIndexesCursor=zw});var ww=z((Vw)=>{Object.defineProperty(Vw,"__esModule",{value:!0});Vw.DistinctOperation=void 0;var ke=f1(),ue=E0(),L5=h1();class aY extends ue.CommandOperation{constructor(F,A,B,D){super(F,D);this.SERVER_COMMAND_RESPONSE_TYPE=ke.MongoDBResponse,this.options=D??{},this.collection=F,this.key=A,this.query=B}get commandName(){return"distinct"}buildCommandDocument(F){let A={distinct:this.collection.collectionName,key:this.key,query:this.query};if(this.options.comment!==void 0)A.comment=this.options.comment;if(this.options.hint!=null)A.hint=this.options.hint;return A}handleOk(F){if(this.explain)return F.toObject(this.bsonOptions);return F.toObject(this.bsonOptions).values}}Vw.DistinctOperation=aY;L5.defineAspects(aY,[L5.Aspect.READ_OPERATION,L5.Aspect.RETRYABLE,L5.Aspect.EXPLAINABLE,L5.Aspect.SUPPORTS_RAW_DATA])});var Iw=z((Rw)=>{Object.defineProperty(Rw,"__esModule",{value:!0});Rw.EstimatedDocumentCountOperation=void 0;var Oe=f1(),Se=E0(),w5=h1();class sY extends Se.CommandOperation{constructor(F,A={}){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=Oe.MongoDBResponse,this.options=A,this.collectionName=F.collectionName}get commandName(){return"count"}buildCommandDocument(F,A){let B={count:this.collectionName};if(typeof this.options.maxTimeMS==="number")B.maxTimeMS=this.options.maxTimeMS;if(this.options.comment!==void 0)B.comment=this.options.comment;return B}handleOk(F){return F.getNumber("n")??0}}Rw.EstimatedDocumentCountOperation=sY;w5.defineAspects(sY,[w5.Aspect.READ_OPERATION,w5.Aspect.RETRYABLE,w5.Aspect.CURSOR_CREATING,w5.Aspect.SUPPORTS_RAW_DATA])});var rY=z((kw)=>{Object.defineProperty(kw,"__esModule",{value:!0});kw.FindOneAndUpdateOperation=kw.FindOneAndReplaceOperation=kw.FindOneAndDeleteOperation=kw.FindAndModifyOperation=kw.ReturnDocument=void 0;var xe=f1(),J4=l(),_e=_0(),fe=G7(),GB=s(),ge=E0(),R5=h1();kw.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function Nw(F,A){if(F.new=A.returnDocument===kw.ReturnDocument.AFTER,F.upsert=A.upsert===!0,A.bypassDocumentValidation===!0)F.bypassDocumentValidation=A.bypassDocumentValidation;return F}class V7 extends ge.CommandOperation{constructor(F,A,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=xe.MongoDBResponse,this.options=B,this.readPreference=_e.ReadPreference.primary,this.collection=F,this.query=A}get commandName(){return"findAndModify"}buildCommandDocument(F,A){let B=this.options,D={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};B.includeResultMetadata??=!1;let X=fe.formatSort(B.sort);if(X)D.sort=X;if(B.projection)D.fields=B.projection;if(B.maxTimeMS)D.maxTimeMS=B.maxTimeMS;if(B.writeConcern)D.writeConcern=B.writeConcern;if(B.let)D.let=B.let;if(B.comment!==void 0)D.comment=B.comment;if(GB.decorateWithCollation(D,B),B.hint){if(this.writeConcern?.w===0&&GB.maxWireVersion(F)<9)throw new J4.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");D.hint=B.hint}return D}handleOk(F){let A=super.handleOk(F);return this.options.includeResultMetadata?A:A.value??null}}kw.FindAndModifyOperation=V7;class Mw extends V7{constructor(F,A,B){if(A==null||typeof A!=="object")throw new J4.MongoInvalidArgumentError('Argument "filter" must be an object');super(F,A,B)}buildCommandDocument(F,A){let B=super.buildCommandDocument(F,A);return B.remove=!0,B}}kw.FindOneAndDeleteOperation=Mw;class jw extends V7{constructor(F,A,B,D){if(A==null||typeof A!=="object")throw new J4.MongoInvalidArgumentError('Argument "filter" must be an object');if(B==null||typeof B!=="object")throw new J4.MongoInvalidArgumentError('Argument "replacement" must be an object');if(GB.hasAtomicOperators(B))throw new J4.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(F,A,D);this.replacement=B}buildCommandDocument(F,A){let B=super.buildCommandDocument(F,A);return B.update=this.replacement,Nw(B,this.options),B}}kw.FindOneAndReplaceOperation=jw;class Tw extends V7{constructor(F,A,B,D){if(A==null||typeof A!=="object")throw new J4.MongoInvalidArgumentError('Argument "filter" must be an object');if(B==null||typeof B!=="object")throw new J4.MongoInvalidArgumentError('Argument "update" must be an object');if(!GB.hasAtomicOperators(B,D))throw new J4.MongoInvalidArgumentError("Update document requires atomic operators");super(F,A,D);this.update=B,this.options=D}buildCommandDocument(F,A){let B=super.buildCommandDocument(F,A);if(B.update=this.update,Nw(B,this.options),this.options.arrayFilters)B.arrayFilters=this.options.arrayFilters;return B}}kw.FindOneAndUpdateOperation=Tw;R5.defineAspects(V7,[R5.Aspect.WRITE_OPERATION,R5.Aspect.RETRYABLE,R5.Aspect.EXPLAINABLE,R5.Aspect.SUPPORTS_RAW_DATA])});var oY=z((xw)=>{Object.defineProperty(xw,"__esModule",{value:!0});xw.RenameOperation=void 0;var ve=f1(),me=L7(),de=s(),ce=E0(),Sw=h1();class tY extends ce.CommandOperation{constructor(F,A,B){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=ve.MongoDBResponse,this.collection=F,this.newName=A,this.options=B,this.ns=new de.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument(F,A){let B=this.collection.namespace,D=this.collection.s.namespace.withCollection(this.newName).toString(),X=typeof this.options.dropTarget==="boolean"?this.options.dropTarget:!1;return{renameCollection:B,to:D,dropTarget:X}}handleOk(F){return new me.Collection(this.collection.db,this.newName,this.collection.s.options)}}xw.RenameOperation=tY;Sw.defineAspects(tY,[Sw.Aspect.WRITE_OPERATION])});var yw=z((gw)=>{Object.defineProperty(gw,"__esModule",{value:!0});gw.CreateSearchIndexesOperation=void 0;var le=f1(),pe=h1();class fw extends pe.AbstractOperation{constructor(F,A){super();this.SERVER_COMMAND_RESPONSE_TYPE=le.MongoDBResponse,this.collection=F,this.descriptions=A,this.ns=F.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand(F,A){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk(F){return super.handleOk(F).indexesCreated.map((A)=>A.name)}buildOptions(F){return{session:this.session,timeoutContext:F}}}gw.CreateSearchIndexesOperation=fw});var cw=z((mw)=>{Object.defineProperty(mw,"__esModule",{value:!0});mw.DropSearchIndexOperation=void 0;var ie=f1(),hw=l(),ne=h1();class vw extends ne.AbstractOperation{constructor(F,A){super();this.SERVER_COMMAND_RESPONSE_TYPE=ie.MongoDBResponse,this.collection=F,this.name=A,this.ns=F.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand(F,A){let D={dropSearchIndex:this.collection.fullNamespace.collection};if(typeof this.name==="string")D.name=this.name;return D}handleOk(F){}buildOptions(F){return{session:this.session,timeoutContext:F}}handleError(F){if(!(F instanceof hw.MongoServerError&&F.code===hw.MONGODB_ERROR_CODES.NamespaceNotFound))throw F}}mw.DropSearchIndexOperation=vw});var nw=z((pw)=>{Object.defineProperty(pw,"__esModule",{value:!0});pw.UpdateSearchIndexOperation=void 0;var ae=f1(),se=h1();class lw extends se.AbstractOperation{constructor(F,A,B){super();this.SERVER_COMMAND_RESPONSE_TYPE=ae.MongoDBResponse,this.collection=F,this.name=A,this.definition=B,this.ns=F.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand(F,A){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk(F){}buildOptions(F){return{session:this.session,timeoutContext:F}}}pw.UpdateSearchIndexOperation=lw});var L7=z((tw)=>{Object.defineProperty(tw,"__esModule",{value:!0});tw.Collection=void 0;var re=$1(),te=EY(),oe=GY(),ee=R7(),F11=K5(),A11=vY(),B11=nY(),D11=Uw(),w7=l(),X11=_Y(),aw=gJ(),Z11=ww(),J11=Iw(),P0=m0(),eY=rY(),CB=V5(),Y11=lJ(),$11=oY(),E11=yw(),G11=cw(),C11=nw(),F$=sJ(),W11=x6(),A$=_0(),b1=s(),sw=P2();class rw{constructor(F,A,B){this.db=F,this.s={db:F,options:B,namespace:new b1.MongoDBCollectionNamespace(F.databaseName,A),pkFactory:F.options?.pkFactory??b1.DEFAULT_PK_FACTORY,readPreference:A$.ReadPreference.fromOptions(B),bsonOptions:re.resolveBSONOptions(B,F),readConcern:W11.ReadConcern.fromOptions(B),writeConcern:sw.WriteConcern.fromOptions(B)},this.client=F.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){if(this.s.readConcern==null)return this.db.readConcern;return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.db.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){if(this.s.writeConcern==null)return this.db.writeConcern;return this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(F){this.s.collectionHint=b1.normalizeHintField(F)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(F,A){return await P0.executeOperation(this.client,new Y11.InsertOneOperation(this,F,b1.resolveOptions(this,A)))}async insertMany(F,A){if(!Array.isArray(F))throw new w7.MongoInvalidArgumentError('Argument "docs" must be an array of documents');A=b1.resolveOptions(this,A??{});let B=sw.WriteConcern.fromOptions(A)?.w!==0;try{let D=await this.bulkWrite(F.map((X)=>({insertOne:{document:X}})),A);return{acknowledged:B,insertedCount:D.insertedCount,insertedIds:D.insertedIds}}catch(D){if(D&&D.message==="Operation must be an object with an operation key")throw new w7.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values");throw D}}async bulkWrite(F,A){if(!Array.isArray(F))throw new w7.MongoInvalidArgumentError('Argument "operations" must be an array of documents');if(A=b1.resolveOptions(this,A??{}),this.client.topology==null)await P0.autoConnect(this.client);let D=A.ordered===!1?this.initializeUnorderedBulkOp(A):this.initializeOrderedBulkOp(A);for(let X of F)D.raw(X);return await D.execute({...A})}async updateOne(F,A,B){return await P0.executeOperation(this.client,new F$.UpdateOneOperation(this.s.namespace,F,A,b1.resolveOptions(this,B)))}async replaceOne(F,A,B){return await P0.executeOperation(this.client,new F$.ReplaceOneOperation(this.s.namespace,F,A,b1.resolveOptions(this,B)))}async updateMany(F,A,B){return await P0.executeOperation(this.client,new F$.UpdateManyOperation(this.s.namespace,F,A,b1.resolveOptions(this,B)))}async deleteOne(F={},A={}){return await P0.executeOperation(this.client,new aw.DeleteOneOperation(this.s.namespace,F,b1.resolveOptions(this,A)))}async deleteMany(F={},A={}){return await P0.executeOperation(this.client,new aw.DeleteManyOperation(this.s.namespace,F,b1.resolveOptions(this,A)))}async rename(F,A){return await P0.executeOperation(this.client,new $11.RenameOperation(this,F,b1.resolveOptions(void 0,{...A,readPreference:A$.ReadPreference.PRIMARY})))}async drop(F){return await this.db.dropCollection(this.collectionName,F)}async findOne(F={},A={}){let{...B}=A;B.singleBatch=!0;let D=this.find(F,B).limit(1),X=await D.next();return await D.close(),X}find(F={},A={}){return new A11.FindCursor(this.client,this.s.namespace,F,b1.resolveOptions(this,A))}async options(F){F=b1.resolveOptions(this,F);let[A]=await this.db.listCollections({name:this.collectionName},{...F,nameOnly:!1}).toArray();if(A==null||A.options==null)throw new w7.MongoAPIError(`collection ${this.namespace} not found`);return A.options}async isCapped(F){let{capped:A}=await this.options(F);return Boolean(A)}async createIndex(F,A){return(await P0.executeOperation(this.client,CB.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,F,b1.resolveOptions(this,A))))[0]}async createIndexes(F,A){return await P0.executeOperation(this.client,CB.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,F,b1.resolveOptions(this,{...A,maxTimeMS:void 0})))}async dropIndex(F,A){return await P0.executeOperation(this.client,new CB.DropIndexOperation(this,F,{...b1.resolveOptions(this,A),readPreference:A$.ReadPreference.primary}))}async dropIndexes(F){try{return await P0.executeOperation(this.client,new CB.DropIndexOperation(this,"*",b1.resolveOptions(this,F))),!0}catch(A){if(A instanceof w7.MongoOperationTimeoutError)throw A;return!1}}listIndexes(F){return new B11.ListIndexesCursor(this,b1.resolveOptions(this,F))}async indexExists(F,A){let B=Array.isArray(F)?F:[F],D=new Set(await this.listIndexes(A).map(({name:X})=>X).toArray());return B.every((X)=>D.has(X))}async indexInformation(F){return await this.indexes({...F,full:F?.full??!1})}async estimatedDocumentCount(F){return await P0.executeOperation(this.client,new J11.EstimatedDocumentCountOperation(this,b1.resolveOptions(this,F)))}async countDocuments(F={},A={}){let B=[];if(B.push({$match:F}),typeof A.skip==="number")B.push({$skip:A.skip});if(typeof A.limit==="number")B.push({$limit:A.limit});B.push({$group:{_id:1,n:{$sum:1}}});let D=this.aggregate(B,A),X=await D.next();return await D.close(),X?.n??0}async distinct(F,A={},B={}){return await P0.executeOperation(this.client,new Z11.DistinctOperation(this,F,A,b1.resolveOptions(this,B)))}async indexes(F){let A=await this.listIndexes(F).toArray();if(F?.full??!0)return A;return Object.fromEntries(A.map(({name:X,key:Z})=>[X,Object.entries(Z)]))}async findOneAndDelete(F,A){return await P0.executeOperation(this.client,new eY.FindOneAndDeleteOperation(this,F,b1.resolveOptions(this,A)))}async findOneAndReplace(F,A,B){return await P0.executeOperation(this.client,new eY.FindOneAndReplaceOperation(this,F,A,b1.resolveOptions(this,B)))}async findOneAndUpdate(F,A,B){return await P0.executeOperation(this.client,new eY.FindOneAndUpdateOperation(this,F,A,b1.resolveOptions(this,B)))}aggregate(F=[],A){if(!Array.isArray(F))throw new w7.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new F11.AggregationCursor(this.client,this.s.namespace,F,b1.resolveOptions(this,A))}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new ee.ChangeStream(this,F,b1.resolveOptions(this,A))}initializeUnorderedBulkOp(F){return new oe.UnorderedBulkOperation(this,b1.resolveOptions(this,F))}initializeOrderedBulkOp(F){return new te.OrderedBulkOperation(this,b1.resolveOptions(this,F))}async count(F={},A={}){return await P0.executeOperation(this.client,new X11.CountOperation(this.fullNamespace,F,b1.resolveOptions(this,A)))}listSearchIndexes(F,A){A=typeof F==="object"?F:A==null?{}:A;let B=F==null?null:typeof F==="object"?null:F;return new D11.ListSearchIndexesCursor(this,B,A)}async createSearchIndex(F){let[A]=await this.createSearchIndexes([F]);return A}async createSearchIndexes(F){return await P0.executeOperation(this.client,new E11.CreateSearchIndexesOperation(this,F))}async dropSearchIndex(F){return await P0.executeOperation(this.client,new G11.DropSearchIndexOperation(this,F))}async updateSearchIndex(F,A){return await P0.executeOperation(this.client,new C11.UpdateSearchIndexOperation(this,F,A))}}tw.Collection=rw});var X$=z((AR)=>{Object.defineProperty(AR,"__esModule",{value:!0});AR.ChangeStreamCursor=void 0;var B$=R7(),ew=w0(),H11=E5(),q11=m0(),FR=s(),z11=H2();class D$ extends z11.AbstractCursor{constructor(F,A,B=[],D={}){super(F,A,{...D,tailable:!0,awaitData:!0});if(this.pipeline=B,this.changeStreamCursorOptions=D,this._resumeToken=null,this.startAtOperationTime=D.startAtOperationTime??null,D.startAfter)this.resumeToken=D.startAfter;else if(D.resumeAfter)this.resumeToken=D.resumeAfter}set resumeToken(F){this._resumeToken=F,this.emit(B$.ChangeStream.RESUME_TOKEN_CHANGED,F)}get resumeToken(){return this._resumeToken}get resumeOptions(){let F={...this.changeStreamCursorOptions};for(let A of["resumeAfter","startAfter","startAtOperationTime"])delete F[A];if(this.resumeToken!=null)if(this.changeStreamCursorOptions.startAfter&&!this.hasReceived)F.startAfter=this.resumeToken;else F.resumeAfter=this.resumeToken;else if(this.startAtOperationTime!=null)F.startAtOperationTime=this.startAtOperationTime;return F}cacheResumeToken(F){if(this.bufferedCount()===0&&this.postBatchResumeToken)this.resumeToken=this.postBatchResumeToken;else this.resumeToken=F;this.hasReceived=!0}_processBatch(F){let{postBatchResumeToken:A}=F;if(A){if(this.postBatchResumeToken=A,F.batchSize===0)this.resumeToken=A}}clone(){return new D$(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(F){let A=new H11.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:F}),B=await q11.executeOperation(F.client,A,this.timeoutContext),D=A.server;if(this.maxWireVersion=FR.maxWireVersion(D),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null)this.startAtOperationTime=B.operationTime;return this._processBatch(B),this.emit(ew.INIT,B),this.emit(ew.RESPONSE),{server:D,session:F,response:B}}async getMore(){let F=await super.getMore();return this.maxWireVersion=FR.maxWireVersion(this.server),this._processBatch(F),this.emit(B$.ChangeStream.MORE,F),this.emit(B$.ChangeStream.RESPONSE),F}}AR.ChangeStreamCursor=D$});var ZR=z((DR)=>{Object.defineProperty(DR,"__esModule",{value:!0});DR.ListCollectionsOperation=void 0;var Z$=f1(),Q11=s(),K11=E0(),P5=h1();class J$ extends K11.CommandOperation{constructor(F,A,B){super(F,B);if(this.SERVER_COMMAND_RESPONSE_TYPE=Z$.CursorResponse,this.options={...B},delete this.options.writeConcern,this.db=F,this.filter=A,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize==="number")this.batchSize=this.options.batchSize;this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?Z$.ExplainedCursorResponse:Z$.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument(F){let A={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};if(Q11.maxWireVersion(F)>=9&&this.options.comment!==void 0)A.comment=this.options.comment;return A}handleOk(F){return F}}DR.ListCollectionsOperation=J$;P5.defineAspects(J$,[P5.Aspect.READ_OPERATION,P5.Aspect.RETRYABLE,P5.Aspect.CURSOR_CREATING,P5.Aspect.SUPPORTS_RAW_DATA])});var $$=z((JR)=>{Object.defineProperty(JR,"__esModule",{value:!0});JR.ListCollectionsCursor=void 0;var U11=m0(),V11=ZR(),L11=H2();class Y$ extends L11.AbstractCursor{constructor(F,A,B){super(F.client,F.s.namespace,B);this.parent=F,this.filter=A,this.options=B}clone(){return new Y$(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(F){let A=new V11.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:F,signal:this.signal}),B=await U11.executeOperation(this.parent.client,A,this.timeoutContext);return{server:A.server,session:F,response:B}}}JR.ListCollectionsCursor=Y$});var WR=z((GR)=>{Object.defineProperty(GR,"__esModule",{value:!0});GR.RunCommandCursor=void 0;var P7=l(),$R=m0(),w11=UY(),R11=q5(),P11=s(),I11=H2();class ER extends I11.AbstractCursor{setComment(F){return this.getMoreOptions.comment=F,this}setMaxTimeMS(F){return this.getMoreOptions.maxAwaitTimeMS=F,this}setBatchSize(F){return this.getMoreOptions.batchSize=F,this}clone(){throw new P7.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(F){throw new P7.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(F,A){throw new P7.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(F){throw new P7.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(F){throw new P7.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(F,A,B={}){super(F.client,P11.ns(F.namespace),B);this.getMoreOptions={},this.db=F,this.command=Object.freeze({...A})}async _initialize(F){let A=new R11.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:F,readPreference:this.cursorOptions.readPreference}),B=await $R.executeOperation(this.client,A,this.timeoutContext);return{server:A.server,session:F,response:B}}async getMore(){if(!this.session)throw new P7.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let F=new w11.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await $R.executeOperation(this.client,F,this.timeoutContext)}}GR.RunCommandCursor=ER});var KR=z((zR)=>{Object.defineProperty(zR,"__esModule",{value:!0});zR.CreateCollectionOperation=void 0;zR.createCollections=_11;var HR=R3(),N11=f1(),M11=L7(),j11=l(),T11=f0(),k11=s(),u11=E0(),E$=m0(),O11=V5(),qR=h1(),S11=new Set(["w","wtimeout","timeoutMS","j","fsync","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),x11="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.";class I5 extends u11.CommandOperation{constructor(F,A,B={}){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=N11.MongoDBResponse,this.options=B,this.db=F,this.name=A}get commandName(){return"create"}buildCommandDocument(F,A){let B=([D,X])=>X!=null&&typeof X!=="function"&&!S11.has(D);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter(B))}}handleOk(F){return new M11.Collection(this.db,this.name,this.options)}}zR.CreateCollectionOperation=I5;async function _11(F,A,B){let D=T11.TimeoutContext.create({session:B.session,serverSelectionTimeoutMS:F.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.client.s.options.waitQueueTimeoutMS,timeoutMS:B.timeoutMS}),X=B.encryptedFields??F.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${F.databaseName}.${A}`];if(X){class J extends I5{buildCommandDocument(E,G){if(!E.description.loadBalanced&&k11.maxWireVersion(E)<HR.MIN_SUPPORTED_QE_WIRE_VERSION)throw new j11.MongoCompatibilityError(`${x11} The minimum server version required is ${HR.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(E,G)}}let $=X.escCollection??`enxcol_.${A}.esc`,Y=X.ecocCollection??`enxcol_.${A}.ecoc`;for(let E of[$,Y]){let G=new J(F,E,{clusteredIndex:{key:{_id:1},unique:!0},session:B.session});await E$.executeOperation(F.client,G,D)}if(!B.encryptedFields)B={...B,encryptedFields:X}}let Z=await E$.executeOperation(F.client,new I5(F,A,B),D);if(X){let J=O11.CreateIndexesOperation.fromIndexSpecification(F,A,{__safeContent__:1},{session:B.session});await E$.executeOperation(F.client,J,D)}return Z}qR.defineAspects(I5,[qR.Aspect.WRITE_OPERATION])});var PR=z((wR)=>{Object.defineProperty(wR,"__esModule",{value:!0});wR.DropDatabaseOperation=wR.DropCollectionOperation=void 0;wR.dropCollections=v11;var g11=Y4(),VR=f1(),b11=H2(),y11=l(),h11=f0(),LR=E0(),UR=m0(),WB=h1();class N5 extends LR.CommandOperation{constructor(F,A,B={}){super(F,B);this.SERVER_COMMAND_RESPONSE_TYPE=VR.MongoDBResponse,this.options=B,this.name=A}get commandName(){return"drop"}buildCommandDocument(F,A){return{drop:this.name}}handleOk(F){return!0}handleError(F){if(!(F instanceof g11.MongoServerError))throw F;if(Number(F.code)!==y11.MONGODB_ERROR_CODES.NamespaceNotFound)throw F;return!1}}wR.DropCollectionOperation=N5;async function v11(F,A,B){let D=h11.TimeoutContext.create({session:B.session,serverSelectionTimeoutMS:F.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:F.client.s.options.waitQueueTimeoutMS,timeoutMS:B.timeoutMS}),X=F.client.s.options.autoEncryption?.encryptedFieldsMap,Z=B.encryptedFields??X?.[`${F.databaseName}.${A}`];if(!Z&&X)Z=(await F.listCollections({name:A},{nameOnly:!1,session:B.session,timeoutContext:new b11.CursorTimeoutContext(D,Symbol())}).toArray())?.[0]?.options?.encryptedFields;if(Z){let J=Z.escCollection||`enxcol_.${A}.esc`,$=Z.ecocCollection||`enxcol_.${A}.ecoc`;for(let Y of[J,$]){let E=new N5(F,Y,B);await UR.executeOperation(F.client,E,D)}}return await UR.executeOperation(F.client,new N5(F,A,B),D)}class G$ extends LR.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=VR.MongoDBResponse,this.options=A}get commandName(){return"dropDatabase"}buildCommandDocument(F,A){return{dropDatabase:1}}handleOk(F){return!0}}wR.DropDatabaseOperation=G$;WB.defineAspects(N5,[WB.Aspect.WRITE_OPERATION]);WB.defineAspects(G$,[WB.Aspect.WRITE_OPERATION])});var kR=z((jR)=>{Object.defineProperty(jR,"__esModule",{value:!0});jR.ProfilingLevelOperation=void 0;var c11=$1(),l11=f1(),IR=l(),p11=E0();class NR extends l11.MongoDBResponse{get was(){return this.get("was",c11.BSONType.int,!0)}}class MR extends p11.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=NR,this.options=A}get commandName(){return"profile"}buildCommandDocument(F){return{profile:-1}}handleOk(F){if(F.ok===1){let A=F.was;if(A===0)return"off";if(A===1)return"slow_only";if(A===2)return"all";throw new IR.MongoUnexpectedServerResponseError(`Illegal profiling level value ${A}`)}else throw new IR.MongoUnexpectedServerResponseError("Error with profile command")}}jR.ProfilingLevelOperation=MR});var C$=z((OR)=>{Object.defineProperty(OR,"__esModule",{value:!0});OR.SetProfilingLevelOperation=OR.ProfilingLevel=void 0;var i11=f1(),n11=l(),a11=s(),s11=E0(),r11=new Set(["off","slow_only","all"]);OR.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});class uR extends s11.CommandOperation{constructor(F,A,B){super(F,B);switch(this.SERVER_COMMAND_RESPONSE_TYPE=i11.MongoDBResponse,this.options=B,A){case OR.ProfilingLevel.off:this.profile=0;break;case OR.ProfilingLevel.slowOnly:this.profile=1;break;case OR.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=A}get commandName(){return"profile"}buildCommandDocument(F){let A=this.level;if(!r11.has(A))throw new n11.MongoInvalidArgumentError(`Profiling level must be one of "${a11.enumToString(OR.ProfilingLevel)}"`);return{profile:this.profile}}handleOk(F){return this.level}}OR.SetProfilingLevelOperation=uR});var gR=z((_R)=>{Object.defineProperty(_R,"__esModule",{value:!0});_R.DbStatsOperation=void 0;var t11=f1(),o11=E0(),xR=h1();class W$ extends o11.CommandOperation{constructor(F,A){super(F,A);this.SERVER_COMMAND_RESPONSE_TYPE=t11.MongoDBResponse,this.options=A}get commandName(){return"dbStats"}buildCommandDocument(F){let A={dbStats:!0};if(this.options.scale!=null)A.scale=this.options.scale;return A}}_R.DbStatsOperation=W$;xR.defineAspects(W$,[xR.Aspect.READ_OPERATION])});var HB=z((cR)=>{Object.defineProperty(cR,"__esModule",{value:!0});cR.Db=void 0;var e11=$Y(),bR=$1(),F01=R7(),yR=L7(),I7=w0(),A01=K5(),B01=$$(),D01=WR(),hR=l(),X01=KR(),vR=PR(),$4=m0(),Z01=V5(),J01=kR(),Y01=ZY(),$01=oY(),E01=q5(),G01=C$(),C01=gR(),W01=x6(),mR=_0(),d0=s(),H01=P2(),q01=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"];class dR{static{this.SYSTEM_NAMESPACE_COLLECTION=I7.SYSTEM_NAMESPACE_COLLECTION}static{this.SYSTEM_INDEX_COLLECTION=I7.SYSTEM_INDEX_COLLECTION}static{this.SYSTEM_PROFILE_COLLECTION=I7.SYSTEM_PROFILE_COLLECTION}static{this.SYSTEM_USER_COLLECTION=I7.SYSTEM_USER_COLLECTION}static{this.SYSTEM_COMMAND_COLLECTION=I7.SYSTEM_COMMAND_COLLECTION}static{this.SYSTEM_JS_COLLECTION=I7.SYSTEM_JS_COLLECTION}constructor(F,A,B){if(B=B??{},B=d0.filterOptions(B,q01),typeof A==="string"&&A.includes("."))throw new hR.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:B,readPreference:mR.ReadPreference.fromOptions(B),bsonOptions:bR.resolveBSONOptions(B,F),pkFactory:B?.pkFactory??d0.DEFAULT_PK_FACTORY,readConcern:W01.ReadConcern.fromOptions(B),writeConcern:H01.WriteConcern.fromOptions(B),namespace:new d0.MongoDBNamespace(A)},this.client=F}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){if(this.s.readPreference==null)return this.client.readPreference;return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(F,A){return A=d0.resolveOptions(this,A),await X01.createCollections(this,F,A)}async command(F,A){return await $4.executeOperation(this.client,new E01.RunCommandOperation(this.s.namespace,F,d0.resolveOptions(void 0,{...bR.resolveBSONOptions(A),timeoutMS:A?.timeoutMS??this.timeoutMS,session:A?.session,readPreference:A?.readPreference,signal:A?.signal})))}aggregate(F=[],A){return new A01.AggregationCursor(this.client,this.s.namespace,F,d0.resolveOptions(this,A))}admin(){return new e11.Admin(this)}collection(F,A={}){if(typeof A==="function")throw new hR.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new yR.Collection(this,F,d0.resolveOptions(this,A))}async stats(F){return await $4.executeOperation(this.client,new C01.DbStatsOperation(this,d0.resolveOptions(this,F)))}listCollections(F={},A={}){return new B01.ListCollectionsCursor(this,F,d0.resolveOptions(this,A))}async renameCollection(F,A,B){return await $4.executeOperation(this.client,new $01.RenameOperation(this.collection(F),A,d0.resolveOptions(void 0,{...B,new_collection:!0,readPreference:mR.ReadPreference.primary})))}async dropCollection(F,A){return A=d0.resolveOptions(this,A),await vR.dropCollections(this,F,A)}async dropDatabase(F){return await $4.executeOperation(this.client,new vR.DropDatabaseOperation(this,d0.resolveOptions(this,F)))}async collections(F){return F=d0.resolveOptions(this,F),(await this.listCollections({},{...F,nameOnly:!0}).toArray()).filter(({name:B})=>!B.includes("$")).map(({name:B})=>new yR.Collection(this,B,this.s.options))}async createIndex(F,A,B){return(await $4.executeOperation(this.client,Z01.CreateIndexesOperation.fromIndexSpecification(this,F,A,B)))[0]}async removeUser(F,A){return await $4.executeOperation(this.client,new Y01.RemoveUserOperation(this,F,d0.resolveOptions(this,A)))}async setProfilingLevel(F,A){return await $4.executeOperation(this.client,new G01.SetProfilingLevelOperation(this,F,d0.resolveOptions(this,A)))}async profilingLevel(F){return await $4.executeOperation(this.client,new J01.ProfilingLevelOperation(this,d0.resolveOptions(this,F)))}async indexInformation(F,A){return await this.collection(F).indexInformation(d0.resolveOptions(this,A))}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new F01.ChangeStream(this,F,d0.resolveOptions(this,A))}runCursorCommand(F,A){return new D01.RunCommandCursor(this,F,A)}}cR.Db=dR});var iR=z((pR)=>{var X1=pR,qB=c("buffer").Buffer,z01=c("os");X1.toBuffer=function(F,A,B){B=~~B;var D;if(this.isV4Format(F))D=A||new qB(B+4),F.split(/\./g).map(function(G){D[B++]=parseInt(G,10)&255});else if(this.isV6Format(F)){var X=F.split(":",8),Z;for(Z=0;Z<X.length;Z++){var J=this.isV4Format(X[Z]),$;if(J)$=this.toBuffer(X[Z]),X[Z]=$.slice(0,2).toString("hex");if($&&++Z<8)X.splice(Z,0,$.slice(2,4).toString("hex"))}if(X[0]==="")while(X.length<8)X.unshift("0");else if(X[X.length-1]==="")while(X.length<8)X.push("0");else if(X.length<8){for(Z=0;Z<X.length&&X[Z]!=="";Z++);var Y=[Z,1];for(Z=9-X.length;Z>0;Z--)Y.push("0");X.splice.apply(X,Y)}D=A||new qB(B+16);for(Z=0;Z<X.length;Z++){var E=parseInt(X[Z],16);D[B++]=E>>8&255,D[B++]=E&255}}if(!D)throw Error("Invalid ip address: "+F);return D};X1.toString=function(F,A,B){A=~~A,B=B||F.length-A;var D=[];if(B===4){for(var X=0;X<B;X++)D.push(F[A+X]);D=D.join(".")}else if(B===16){for(var X=0;X<B;X+=2)D.push(F.readUInt16BE(A+X).toString(16));D=D.join(":"),D=D.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),D=D.replace(/:{3,4}/,"::")}return D};var Q01=/^(\d{1,3}\.){3,3}\d{1,3}$/,K01=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;X1.isV4Format=function(F){return Q01.test(F)};X1.isV6Format=function(F){return K01.test(F)};function H$(F){return F?F.toLowerCase():"ipv4"}X1.fromPrefixLen=function(F,A){if(F>32)A="ipv6";else A=H$(A);var B=4;if(A==="ipv6")B=16;var D=new qB(B);for(var X=0,Z=D.length;X<Z;++X){var J=8;if(F<8)J=F;F-=J,D[X]=~(255>>J)&255}return X1.toString(D)};X1.mask=function(F,A){F=X1.toBuffer(F),A=X1.toBuffer(A);var B=new qB(Math.max(F.length,A.length)),D=0;if(F.length===A.length)for(D=0;D<F.length;D++)B[D]=F[D]&A[D];else if(A.length===4)for(D=0;D<A.length;D++)B[D]=F[F.length-4+D]&A[D];else{for(var D=0;D<B.length-6;D++)B[D]=0;B[10]=255,B[11]=255;for(D=0;D<F.length;D++)B[D+12]=F[D]&A[D+12];D=D+12}for(;D<B.length;D++)B[D]=0;return X1.toString(B)};X1.cidr=function(F){var A=F.split("/"),B=A[0];if(A.length!==2)throw new Error("invalid CIDR subnet: "+B);var D=X1.fromPrefixLen(parseInt(A[1],10));return X1.mask(B,D)};X1.subnet=function(F,A){var B=X1.toLong(X1.mask(F,A)),D=X1.toBuffer(A),X=0;for(var Z=0;Z<D.length;Z++)if(D[Z]===255)X+=8;else{var J=D[Z]&255;while(J)J=J<<1&255,X++}var $=Math.pow(2,32-X);return{networkAddress:X1.fromLong(B),firstAddress:$<=2?X1.fromLong(B):X1.fromLong(B+1),lastAddress:$<=2?X1.fromLong(B+$-1):X1.fromLong(B+$-2),broadcastAddress:X1.fromLong(B+$-1),subnetMask:A,subnetMaskLength:X,numHosts:$<=2?$:$-2,length:$,contains:function(Y){return B===X1.toLong(X1.mask(Y,A))}}};X1.cidrSubnet=function(F){var A=F.split("/"),B=A[0];if(A.length!==2)throw new Error("invalid CIDR subnet: "+B);var D=X1.fromPrefixLen(parseInt(A[1],10));return X1.subnet(B,D)};X1.not=function(F){var A=X1.toBuffer(F);for(var B=0;B<A.length;B++)A[B]=255^A[B];return X1.toString(A)};X1.or=function(F,A){if(F=X1.toBuffer(F),A=X1.toBuffer(A),F.length===A.length){for(var B=0;B<F.length;++B)F[B]|=A[B];return X1.toString(F)}else{var D=F,X=A;if(A.length>F.length)D=A,X=F;var Z=D.length-X.length;for(var B=Z;B<D.length;++B)D[B]|=X[B-Z];return X1.toString(D)}};X1.isEqual=function(F,A){if(F=X1.toBuffer(F),A=X1.toBuffer(A),F.length===A.length){for(var B=0;B<F.length;B++)if(F[B]!==A[B])return!1;return!0}if(A.length===4){var D=A;A=F,F=D}for(var B=0;B<10;B++)if(A[B]!==0)return!1;var X=A.readUInt16BE(10);if(X!==0&&X!==65535)return!1;for(var B=0;B<4;B++)if(F[B]!==A[B+12])return!1;return!0};X1.isPrivate=function(F){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(F)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(F)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(F)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(F)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(F)||/^f[cd][0-9a-f]{2}:/i.test(F)||/^fe80:/i.test(F)||/^::1$/.test(F)||/^::$/.test(F)};X1.isPublic=function(F){return!X1.isPrivate(F)};X1.isLoopback=function(F){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(F)||/^fe80::1$/.test(F)||/^::1$/.test(F)||/^::$/.test(F)};X1.loopback=function(F){if(F=H$(F),F!=="ipv4"&&F!=="ipv6")throw new Error("family must be ipv4 or ipv6");return F==="ipv4"?"127.0.0.1":"fe80::1"};X1.address=function(F,A){var B=z01.networkInterfaces(),X;if(A=H$(A),F&&F!=="private"&&F!=="public"){var D=B[F].filter(function(Z){var J=Z.family.toLowerCase();return J===A});if(D.length===0)return;return D[0].address}var X=Object.keys(B).map(function(Z){var J=B[Z].filter(function($){if($.family=$.family.toLowerCase(),$.family!==A||X1.isLoopback($.address))return!1;else if(!F)return!0;return F==="public"?X1.isPrivate($.address):X1.isPublic($.address)});return J.length?J[0].address:void 0}).filter(Boolean);return!X.length?X1.loopback(A):X[0]};X1.toLong=function(F){var A=0;return F.split(".").forEach(function(B){A<<=8,A+=parseInt(B)}),A>>>0};X1.fromLong=function(F){return(F>>>24)+"."+(F>>16&255)+"."+(F>>8&255)+"."+(F&255)}});var tR=z((rR)=>{Object.defineProperty(rR,"__esModule",{value:!0});var nR=c("buffer"),Z9={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};rR.ERRORS=Z9;function U01(F){if(!nR.Buffer.isEncoding(F))throw new Error(Z9.INVALID_ENCODING)}rR.checkEncoding=U01;function aR(F){return typeof F==="number"&&isFinite(F)&&R01(F)}rR.isFiniteInteger=aR;function sR(F,A){if(typeof F==="number"){if(!aR(F)||F<0)throw new Error(A?Z9.INVALID_OFFSET:Z9.INVALID_LENGTH)}else throw new Error(A?Z9.INVALID_OFFSET_NON_NUMBER:Z9.INVALID_LENGTH_NON_NUMBER)}function V01(F){sR(F,!1)}rR.checkLengthValue=V01;function L01(F){sR(F,!0)}rR.checkOffsetValue=L01;function w01(F,A){if(F<0||F>A.length)throw new Error(Z9.INVALID_TARGET_OFFSET)}rR.checkTargetOffset=w01;function R01(F){return typeof F==="number"&&isFinite(F)&&Math.floor(F)===F}function P01(F){if(typeof BigInt==="undefined")throw new Error("Platform does not support JS BigInt type.");if(typeof nR.Buffer.prototype[F]==="undefined")throw new Error(`Platform does not support Buffer.prototype.${F}.`)}rR.bigIntAndBufferInt64Check=P01});var FP=z((eR)=>{Object.defineProperty(eR,"__esModule",{value:!0});var U1=tR(),oR=4096,O01="utf8";class q${constructor(F){if(this.length=0,this._encoding=O01,this._writeOffset=0,this._readOffset=0,q$.isSmartBufferOptions(F)){if(F.encoding)U1.checkEncoding(F.encoding),this._encoding=F.encoding;if(F.size)if(U1.isFiniteInteger(F.size)&&F.size>0)this._buff=Buffer.allocUnsafe(F.size);else throw new Error(U1.ERRORS.INVALID_SMARTBUFFER_SIZE);else if(F.buff)if(Buffer.isBuffer(F.buff))this._buff=F.buff,this.length=F.buff.length;else throw new Error(U1.ERRORS.INVALID_SMARTBUFFER_BUFFER);else this._buff=Buffer.allocUnsafe(oR)}else{if(typeof F!=="undefined")throw new Error(U1.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(oR)}}static fromSize(F,A){return new this({size:F,encoding:A})}static fromBuffer(F,A){return new this({buff:F,encoding:A})}static fromOptions(F){return new this(F)}static isSmartBufferOptions(F){let A=F;return A&&(A.encoding!==void 0||A.size!==void 0||A.buff!==void 0)}readInt8(F){return this._readNumberValue(Buffer.prototype.readInt8,1,F)}readInt16BE(F){return this._readNumberValue(Buffer.prototype.readInt16BE,2,F)}readInt16LE(F){return this._readNumberValue(Buffer.prototype.readInt16LE,2,F)}readInt32BE(F){return this._readNumberValue(Buffer.prototype.readInt32BE,4,F)}readInt32LE(F){return this._readNumberValue(Buffer.prototype.readInt32LE,4,F)}readBigInt64BE(F){return U1.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,F)}readBigInt64LE(F){return U1.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,F)}writeInt8(F,A){return this._writeNumberValue(Buffer.prototype.writeInt8,1,F,A),this}insertInt8(F,A){return this._insertNumberValue(Buffer.prototype.writeInt8,1,F,A)}writeInt16BE(F,A){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,F,A)}insertInt16BE(F,A){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,F,A)}writeInt16LE(F,A){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,F,A)}insertInt16LE(F,A){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,F,A)}writeInt32BE(F,A){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,F,A)}insertInt32BE(F,A){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,F,A)}writeInt32LE(F,A){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,F,A)}insertInt32LE(F,A){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,F,A)}writeBigInt64BE(F,A){return U1.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,F,A)}insertBigInt64BE(F,A){return U1.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,F,A)}writeBigInt64LE(F,A){return U1.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,F,A)}insertBigInt64LE(F,A){return U1.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,F,A)}readUInt8(F){return this._readNumberValue(Buffer.prototype.readUInt8,1,F)}readUInt16BE(F){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,F)}readUInt16LE(F){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,F)}readUInt32BE(F){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,F)}readUInt32LE(F){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,F)}readBigUInt64BE(F){return U1.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,F)}readBigUInt64LE(F){return U1.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,F)}writeUInt8(F,A){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,F,A)}insertUInt8(F,A){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,F,A)}writeUInt16BE(F,A){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,F,A)}insertUInt16BE(F,A){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,F,A)}writeUInt16LE(F,A){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,F,A)}insertUInt16LE(F,A){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,F,A)}writeUInt32BE(F,A){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,F,A)}insertUInt32BE(F,A){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,F,A)}writeUInt32LE(F,A){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,F,A)}insertUInt32LE(F,A){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,F,A)}writeBigUInt64BE(F,A){return U1.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,F,A)}insertBigUInt64BE(F,A){return U1.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,F,A)}writeBigUInt64LE(F,A){return U1.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,F,A)}insertBigUInt64LE(F,A){return U1.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,F,A)}readFloatBE(F){return this._readNumberValue(Buffer.prototype.readFloatBE,4,F)}readFloatLE(F){return this._readNumberValue(Buffer.prototype.readFloatLE,4,F)}writeFloatBE(F,A){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,F,A)}insertFloatBE(F,A){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,F,A)}writeFloatLE(F,A){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,F,A)}insertFloatLE(F,A){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,F,A)}readDoubleBE(F){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,F)}readDoubleLE(F){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,F)}writeDoubleBE(F,A){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,F,A)}insertDoubleBE(F,A){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,F,A)}writeDoubleLE(F,A){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,F,A)}insertDoubleLE(F,A){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,F,A)}readString(F,A){let B;if(typeof F==="number")U1.checkLengthValue(F),B=Math.min(F,this.length-this._readOffset);else A=F,B=this.length-this._readOffset;if(typeof A!=="undefined")U1.checkEncoding(A);let D=this._buff.slice(this._readOffset,this._readOffset+B).toString(A||this._encoding);return this._readOffset+=B,D}insertString(F,A,B){return U1.checkOffsetValue(A),this._handleString(F,!0,A,B)}writeString(F,A,B){return this._handleString(F,!1,A,B)}readStringNT(F){if(typeof F!=="undefined")U1.checkEncoding(F);let A=this.length;for(let D=this._readOffset;D<this.length;D++)if(this._buff[D]===0){A=D;break}let B=this._buff.slice(this._readOffset,A);return this._readOffset=A+1,B.toString(F||this._encoding)}insertStringNT(F,A,B){return U1.checkOffsetValue(A),this.insertString(F,A,B),this.insertUInt8(0,A+F.length),this}writeStringNT(F,A,B){return this.writeString(F,A,B),this.writeUInt8(0,typeof A==="number"?A+F.length:this.writeOffset),this}readBuffer(F){if(typeof F!=="undefined")U1.checkLengthValue(F);let A=typeof F==="number"?F:this.length,B=Math.min(this.length,this._readOffset+A),D=this._buff.slice(this._readOffset,B);return this._readOffset=B,D}insertBuffer(F,A){return U1.checkOffsetValue(A),this._handleBuffer(F,!0,A)}writeBuffer(F,A){return this._handleBuffer(F,!1,A)}readBufferNT(){let F=this.length;for(let B=this._readOffset;B<this.length;B++)if(this._buff[B]===0){F=B;break}let A=this._buff.slice(this._readOffset,F);return this._readOffset=F+1,A}insertBufferNT(F,A){return U1.checkOffsetValue(A),this.insertBuffer(F,A),this.insertUInt8(0,A+F.length),this}writeBufferNT(F,A){if(typeof A!=="undefined")U1.checkOffsetValue(A);return this.writeBuffer(F,A),this.writeUInt8(0,typeof A==="number"?A+F.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(F){U1.checkOffsetValue(F),U1.checkTargetOffset(F,this),this._readOffset=F}get writeOffset(){return this._writeOffset}set writeOffset(F){U1.checkOffsetValue(F),U1.checkTargetOffset(F,this),this._writeOffset=F}get encoding(){return this._encoding}set encoding(F){U1.checkEncoding(F),this._encoding=F}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(F){let A=typeof F==="string"?F:this._encoding;return U1.checkEncoding(A),this._buff.toString(A,0,this.length)}destroy(){return this.clear(),this}_handleString(F,A,B,D){let X=this._writeOffset,Z=this._encoding;if(typeof B==="number")X=B;else if(typeof B==="string")U1.checkEncoding(B),Z=B;if(typeof D==="string")U1.checkEncoding(D),Z=D;let J=Buffer.byteLength(F,Z);if(A)this.ensureInsertable(J,X);else this._ensureWriteable(J,X);if(this._buff.write(F,X,J,Z),A)this._writeOffset+=J;else if(typeof B==="number")this._writeOffset=Math.max(this._writeOffset,X+J);else this._writeOffset+=J;return this}_handleBuffer(F,A,B){let D=typeof B==="number"?B:this._writeOffset;if(A)this.ensureInsertable(F.length,D);else this._ensureWriteable(F.length,D);if(F.copy(this._buff,D),A)this._writeOffset+=F.length;else if(typeof B==="number")this._writeOffset=Math.max(this._writeOffset,D+F.length);else this._writeOffset+=F.length;return this}ensureReadable(F,A){let B=this._readOffset;if(typeof A!=="undefined")U1.checkOffsetValue(A),B=A;if(B<0||B+F>this.length)throw new Error(U1.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(F,A){if(U1.checkOffsetValue(A),this._ensureCapacity(this.length+F),A<this.length)this._buff.copy(this._buff,A+F,A,this._buff.length);if(A+F>this.length)this.length=A+F;else this.length+=F}_ensureWriteable(F,A){let B=typeof A==="number"?A:this._writeOffset;if(this._ensureCapacity(B+F),B+F>this.length)this.length=B+F}_ensureCapacity(F){let A=this._buff.length;if(F>A){let B=this._buff,D=A*3/2+1;if(D<F)D=F;this._buff=Buffer.allocUnsafe(D),B.copy(this._buff,0,0,A)}}_readNumberValue(F,A,B){this.ensureReadable(A,B);let D=F.call(this._buff,typeof B==="number"?B:this._readOffset);if(typeof B==="undefined")this._readOffset+=A;return D}_insertNumberValue(F,A,B,D){return U1.checkOffsetValue(D),this.ensureInsertable(A,D),F.call(this._buff,B,D),this._writeOffset+=A,this}_writeNumberValue(F,A,B,D){if(typeof D==="number"){if(D<0)throw new Error(U1.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);U1.checkOffsetValue(D)}let X=typeof D==="number"?D:this._writeOffset;if(this._ensureWriteable(A,X),F.call(this._buff,B,X),typeof D==="number")this._writeOffset=Math.max(this._writeOffset,X+A);else this._writeOffset+=A;return this}}eR.SmartBuffer=q$});var w$=z((AP)=>{Object.defineProperty(AP,"__esModule",{value:!0});var x01=30000;AP.DEFAULT_TIMEOUT=x01;var _01={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"};AP.ERRORS=_01;var f01={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:(F)=>F+7,Socks4Response:8};AP.SOCKS_INCOMING_PACKET_SIZES=f01;var z$;(function(F){F[F.connect=1]="connect",F[F.bind=2]="bind",F[F.associate=3]="associate"})(z$||(z$={}));AP.SocksCommand=z$;var Q$;(function(F){F[F.Granted=90]="Granted",F[F.Failed=91]="Failed",F[F.Rejected=92]="Rejected",F[F.RejectedIdent=93]="RejectedIdent"})(Q$||(Q$={}));AP.Socks4Response=Q$;var K$;(function(F){F[F.NoAuth=0]="NoAuth",F[F.GSSApi=1]="GSSApi",F[F.UserPass=2]="UserPass"})(K$||(K$={}));AP.Socks5Auth=K$;var U$;(function(F){F[F.Granted=0]="Granted",F[F.Failure=1]="Failure",F[F.NotAllowed=2]="NotAllowed",F[F.NetworkUnreachable=3]="NetworkUnreachable",F[F.HostUnreachable=4]="HostUnreachable",F[F.ConnectionRefused=5]="ConnectionRefused",F[F.TTLExpired=6]="TTLExpired",F[F.CommandNotSupported=7]="CommandNotSupported",F[F.AddressNotSupported=8]="AddressNotSupported"})(U$||(U$={}));AP.Socks5Response=U$;var V$;(function(F){F[F.IPv4=1]="IPv4",F[F.Hostname=3]="Hostname",F[F.IPv6=4]="IPv6"})(V$||(V$={}));AP.Socks5HostType=V$;var L$;(function(F){F[F.Created=0]="Created",F[F.Connecting=1]="Connecting",F[F.Connected=2]="Connected",F[F.SentInitialHandshake=3]="SentInitialHandshake",F[F.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",F[F.SentAuthentication=5]="SentAuthentication",F[F.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",F[F.SentFinalHandshake=7]="SentFinalHandshake",F[F.ReceivedFinalResponse=8]="ReceivedFinalResponse",F[F.BoundWaitingForConnection=9]="BoundWaitingForConnection",F[F.Established=10]="Established",F[F.Disconnected=11]="Disconnected",F[F.Error=99]="Error"})(L$||(L$={}));AP.SocksClientState=L$});var R$=z((DP)=>{Object.defineProperty(DP,"__esModule",{value:!0});class BP extends Error{constructor(F,A){super(F);this.options=A}}DP.SocksClientError=BP;function p01(F){for(let A=F.length-1;A>0;A--){let B=Math.floor(Math.random()*(A+1));[F[A],F[B]]=[F[B],F[A]]}}DP.shuffleArray=p01});var $P=z((YP)=>{Object.defineProperty(YP,"__esModule",{value:!0});var y6=R$(),U6=w$(),a01=c("stream");function s01(F,A=["connect","bind","associate"]){if(!U6.SocksCommand[F.command])throw new y6.SocksClientError(U6.ERRORS.InvalidSocksCommand,F);if(A.indexOf(F.command)===-1)throw new y6.SocksClientError(U6.ERRORS.InvalidSocksCommandForOperation,F);if(!XP(F.destination))throw new y6.SocksClientError(U6.ERRORS.InvalidSocksClientOptionsDestination,F);if(!ZP(F.proxy))throw new y6.SocksClientError(U6.ERRORS.InvalidSocksClientOptionsProxy,F);if(F.timeout&&!JP(F.timeout))throw new y6.SocksClientError(U6.ERRORS.InvalidSocksClientOptionsTimeout,F);if(F.existing_socket&&!(F.existing_socket instanceof a01.Duplex))throw new y6.SocksClientError(U6.ERRORS.InvalidSocksClientOptionsExistingSocket,F)}YP.validateSocksClientOptions=s01;function r01(F){if(F.command!=="connect")throw new y6.SocksClientError(U6.ERRORS.InvalidSocksCommandChain,F);if(!XP(F.destination))throw new y6.SocksClientError(U6.ERRORS.InvalidSocksClientOptionsDestination,F);if(!(F.proxies&&Array.isArray(F.proxies)&&F.proxies.length>=2))throw new y6.SocksClientError(U6.ERRORS.InvalidSocksClientOptionsProxiesLength,F);if(F.proxies.forEach((A)=>{if(!ZP(A))throw new y6.SocksClientError(U6.ERRORS.InvalidSocksClientOptionsProxy,F)}),F.timeout&&!JP(F.timeout))throw new y6.SocksClientError(U6.ERRORS.InvalidSocksClientOptionsTimeout,F)}YP.validateSocksClientChainOptions=r01;function XP(F){return F&&typeof F.host==="string"&&typeof F.port==="number"&&F.port>=0&&F.port<=65535}function ZP(F){return F&&(typeof F.host==="string"||typeof F.ipaddress==="string")&&typeof F.port==="number"&&F.port>=0&&F.port<=65535&&(F.type===4||F.type===5)}function JP(F){return typeof F==="number"&&F>0}});var CP=z((GP)=>{Object.defineProperty(GP,"__esModule",{value:!0});class EP{constructor(F=4096){this._buffer=Buffer.allocUnsafe(F),this._offset=0,this._originalSize=F}get length(){return this._offset}append(F){if(!Buffer.isBuffer(F))throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this._offset+F.length>=this._buffer.length){let A=this._buffer;this._buffer=Buffer.allocUnsafe(Math.max(this._buffer.length+this._originalSize,this._buffer.length+F.length)),A.copy(this._buffer)}return F.copy(this._buffer,this._offset),this._offset+=F.length}peek(F){if(F>this._offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");return this._buffer.slice(0,F)}get(F){if(F>this._offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");let A=Buffer.allocUnsafe(F);return this._buffer.slice(0,F).copy(A),this._buffer.copyWithin(0,F,F+this._offset-F),this._offset-=F,A}}GP.ReceiveBuffer=EP});var HP=z((j5)=>{var F21=j5&&j5.__awaiter||function(F,A,B,D){function X(Z){return Z instanceof B?Z:new B(function(J){J(Z)})}return new(B||(B=Promise))(function(Z,J){function $(G){try{E(D.next(G))}catch(C){J(C)}}function Y(G){try{E(D.throw(G))}catch(C){J(C)}}function E(G){G.done?Z(G.value):X(G.value).then($,Y)}E((D=D.apply(F,A||[])).next())})};Object.defineProperty(j5,"__esModule",{value:!0});var A21=c("events"),N7=c("net"),Z6=iR(),g2=FP(),p=w$(),P$=$P(),B21=CP(),WP=R$();class zB extends A21.EventEmitter{constructor(F){super();this._options=Object.assign({},F),P$.validateSocksClientOptions(F),this.state=p.SocksClientState.Created}static createConnection(F,A){return P$.validateSocksClientOptions(F,["connect"]),new Promise((B,D)=>{let X=new zB(F);X.connect(F.existing_socket),X.once("established",(Z)=>{if(X.removeAllListeners(),typeof A==="function")A(null,Z),B();else B(Z)}),X.once("error",(Z)=>{if(X.removeAllListeners(),typeof A==="function")A(Z),B();else D(Z)})})}static createConnectionChain(F,A){if(P$.validateSocksClientChainOptions(F),F.randomizeChain)WP.shuffleArray(F.proxies);return new Promise((B,D)=>F21(this,void 0,void 0,function*(){let X;try{for(let Z=0;Z<F.proxies.length;Z++){let J=F.proxies[Z],$=Z===F.proxies.length-1?F.destination:{host:F.proxies[Z+1].ipaddress,port:F.proxies[Z+1].port},Y=yield zB.createConnection({command:"connect",proxy:J,destination:$});if(!X)X=Y.socket}if(typeof A==="function")A(null,{socket:X}),B();else B({socket:X})}catch(Z){if(typeof A==="function")A(Z),B();else D(Z)}}))}static createUDPFrame(F){let A=new g2.SmartBuffer;if(A.writeUInt16BE(0),A.writeUInt8(F.frameNumber||0),N7.isIPv4(F.remoteHost.host))A.writeUInt8(p.Socks5HostType.IPv4),A.writeUInt32BE(Z6.toLong(F.remoteHost.host));else if(N7.isIPv6(F.remoteHost.host))A.writeUInt8(p.Socks5HostType.IPv6),A.writeBuffer(Z6.toBuffer(F.remoteHost.host));else A.writeUInt8(p.Socks5HostType.Hostname),A.writeUInt8(Buffer.byteLength(F.remoteHost.host)),A.writeString(F.remoteHost.host);return A.writeUInt16BE(F.remoteHost.port),A.writeBuffer(F.data),A.toBuffer()}static parseUDPFrame(F){let A=g2.SmartBuffer.fromBuffer(F);A.readOffset=2;let B=A.readUInt8(),D=A.readUInt8(),X;if(D===p.Socks5HostType.IPv4)X=Z6.fromLong(A.readUInt32BE());else if(D===p.Socks5HostType.IPv6)X=Z6.toString(A.readBuffer(16));else X=A.readString(A.readUInt8());let Z=A.readUInt16BE();return{frameNumber:B,remoteHost:{host:X,port:Z},data:A.readBuffer()}}get state(){return this._state}set state(F){if(this._state!==p.SocksClientState.Error)this._state=F}connect(F){this._onDataReceived=(B)=>this.onDataReceived(B),this._onClose=()=>this.onClose(),this._onError=(B)=>this.onError(B),this._onConnect=()=>this.onConnect();let A=setTimeout(()=>this.onEstablishedTimeout(),this._options.timeout||p.DEFAULT_TIMEOUT);if(A.unref&&typeof A.unref==="function")A.unref();if(F)this._socket=F;else this._socket=new N7.Socket;if(this._socket.once("close",this._onClose),this._socket.once("error",this._onError),this._socket.once("connect",this._onConnect),this._socket.on("data",this._onDataReceived),this.state=p.SocksClientState.Connecting,this._receiveBuffer=new B21.ReceiveBuffer,F)this._socket.emit("connect");else if(this._socket.connect(this.getSocketOptions()),this._options.set_tcp_nodelay!==void 0&&this._options.set_tcp_nodelay!==null)this._socket.setNoDelay(!!this._options.set_tcp_nodelay);this.prependOnceListener("established",(B)=>{setImmediate(()=>{if(this._receiveBuffer.length>0){let D=this._receiveBuffer.get(this._receiveBuffer.length);B.socket.emit("data",D)}B.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this._options.socket_options),{host:this._options.proxy.host||this._options.proxy.ipaddress,port:this._options.proxy.port})}onEstablishedTimeout(){if(this.state!==p.SocksClientState.Established&&this.state!==p.SocksClientState.BoundWaitingForConnection)this._closeSocket(p.ERRORS.ProxyConnectionTimedOut)}onConnect(){if(this.state=p.SocksClientState.Connected,this._options.proxy.type===4)this.sendSocks4InitialHandshake();else this.sendSocks5InitialHandshake();this.state=p.SocksClientState.SentInitialHandshake}onDataReceived(F){this._receiveBuffer.append(F),this.processData()}processData(){if(this._receiveBuffer.length>=this._nextRequiredPacketBufferSize)if(this.state===p.SocksClientState.SentInitialHandshake)if(this._options.proxy.type===4)this.handleSocks4FinalHandshakeResponse();else this.handleInitialSocks5HandshakeResponse();else if(this.state===p.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===p.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else if(this.state===p.SocksClientState.BoundWaitingForConnection)if(this._options.proxy.type===4)this.handleSocks4IncomingConnectionResponse();else this.handleSocks5IncomingConnectionResponse();else if(this.state===p.SocksClientState.Established);else this._closeSocket(p.ERRORS.InternalError)}onClose(){this._closeSocket(p.ERRORS.SocketClosed)}onError(F){this._closeSocket(F.message)}removeInternalSocketHandlers(){this._socket.pause(),this._socket.removeListener("data",this._onDataReceived),this._socket.removeListener("close",this._onClose),this._socket.removeListener("error",this._onError),this._socket.removeListener("connect",this.onConnect)}_closeSocket(F){if(this.state!==p.SocksClientState.Error)this.state=p.SocksClientState.Error,this._socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new WP.SocksClientError(F,this._options))}sendSocks4InitialHandshake(){let F=this._options.proxy.userId||"",A=new g2.SmartBuffer;if(A.writeUInt8(4),A.writeUInt8(p.SocksCommand[this._options.command]),A.writeUInt16BE(this._options.destination.port),N7.isIPv4(this._options.destination.host))A.writeBuffer(Z6.toBuffer(this._options.destination.host)),A.writeStringNT(F);else A.writeUInt8(0),A.writeUInt8(0),A.writeUInt8(0),A.writeUInt8(1),A.writeStringNT(F),A.writeStringNT(this._options.destination.host);this._nextRequiredPacketBufferSize=p.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this._socket.write(A.toBuffer())}handleSocks4FinalHandshakeResponse(){let F=this._receiveBuffer.get(8);if(F[1]!==p.Socks4Response.Granted)this._closeSocket(`${p.ERRORS.Socks4ProxyRejectedConnection} - (${p.Socks4Response[F[1]]})`);else if(p.SocksCommand[this._options.command]===p.SocksCommand.bind){let A=g2.SmartBuffer.fromBuffer(F);A.readOffset=2;let B={port:A.readUInt16BE(),host:Z6.fromLong(A.readUInt32BE())};if(B.host==="0.0.0.0")B.host=this._options.proxy.ipaddress;this.state=p.SocksClientState.BoundWaitingForConnection,this.emit("bound",{socket:this._socket,remoteHost:B})}else this.state=p.SocksClientState.Established,this.removeInternalSocketHandlers(),this.emit("established",{socket:this._socket})}handleSocks4IncomingConnectionResponse(){let F=this._receiveBuffer.get(8);if(F[1]!==p.Socks4Response.Granted)this._closeSocket(`${p.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${p.Socks4Response[F[1]]})`);else{let A=g2.SmartBuffer.fromBuffer(F);A.readOffset=2;let B={port:A.readUInt16BE(),host:Z6.fromLong(A.readUInt32BE())};this.state=p.SocksClientState.Established,this.removeInternalSocketHandlers(),this.emit("established",{socket:this._socket,remoteHost:B})}}sendSocks5InitialHandshake(){let F=new g2.SmartBuffer;if(F.writeUInt8(5),this._options.proxy.userId||this._options.proxy.password)F.writeUInt8(2),F.writeUInt8(p.Socks5Auth.NoAuth),F.writeUInt8(p.Socks5Auth.UserPass);else F.writeUInt8(1),F.writeUInt8(p.Socks5Auth.NoAuth);this._nextRequiredPacketBufferSize=p.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this._socket.write(F.toBuffer()),this.state=p.SocksClientState.SentInitialHandshake}handleInitialSocks5HandshakeResponse(){let F=this._receiveBuffer.get(2);if(F[0]!==5)this._closeSocket(p.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion);else if(F[1]===255)this._closeSocket(p.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType);else if(F[1]===p.Socks5Auth.NoAuth)this.sendSocks5CommandRequest();else if(F[1]===p.Socks5Auth.UserPass)this.sendSocks5UserPassAuthentication();else this._closeSocket(p.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){let F=this._options.proxy.userId||"",A=this._options.proxy.password||"",B=new g2.SmartBuffer;B.writeUInt8(1),B.writeUInt8(Buffer.byteLength(F)),B.writeString(F),B.writeUInt8(Buffer.byteLength(A)),B.writeString(A),this._nextRequiredPacketBufferSize=p.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this._socket.write(B.toBuffer()),this.state=p.SocksClientState.SentAuthentication}handleInitialSocks5AuthenticationHandshakeResponse(){if(this.state=p.SocksClientState.ReceivedAuthenticationResponse,this._receiveBuffer.get(2)[1]!==0)this._closeSocket(p.ERRORS.Socks5AuthenticationFailed);else this.sendSocks5CommandRequest()}sendSocks5CommandRequest(){let F=new g2.SmartBuffer;if(F.writeUInt8(5),F.writeUInt8(p.SocksCommand[this._options.command]),F.writeUInt8(0),N7.isIPv4(this._options.destination.host))F.writeUInt8(p.Socks5HostType.IPv4),F.writeBuffer(Z6.toBuffer(this._options.destination.host));else if(N7.isIPv6(this._options.destination.host))F.writeUInt8(p.Socks5HostType.IPv6),F.writeBuffer(Z6.toBuffer(this._options.destination.host));else F.writeUInt8(p.Socks5HostType.Hostname),F.writeUInt8(this._options.destination.host.length),F.writeString(this._options.destination.host);F.writeUInt16BE(this._options.destination.port),this._nextRequiredPacketBufferSize=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this._socket.write(F.toBuffer()),this.state=p.SocksClientState.SentFinalHandshake}handleSocks5FinalHandshakeResponse(){let F=this._receiveBuffer.peek(5);if(F[0]!==5||F[1]!==p.Socks5Response.Granted)this._closeSocket(`${p.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${p.Socks5Response[F[1]]}`);else{let A=F[3],B,D;if(A===p.Socks5HostType.IPv4){let X=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this._receiveBuffer.length<X){this._nextRequiredPacketBufferSize=X;return}if(D=g2.SmartBuffer.fromBuffer(this._receiveBuffer.get(X).slice(4)),B={host:Z6.fromLong(D.readUInt32BE()),port:D.readUInt16BE()},B.host==="0.0.0.0")B.host=this._options.proxy.ipaddress}else if(A===p.Socks5HostType.Hostname){let X=F[4],Z=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(X);if(this._receiveBuffer.length<Z){this._nextRequiredPacketBufferSize=Z;return}D=g2.SmartBuffer.fromBuffer(this._receiveBuffer.get(Z).slice(5)),B={host:D.readString(X),port:D.readUInt16BE()}}else if(A===p.Socks5HostType.IPv6){let X=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this._receiveBuffer.length<X){this._nextRequiredPacketBufferSize=X;return}D=g2.SmartBuffer.fromBuffer(this._receiveBuffer.get(X).slice(4)),B={host:Z6.toString(D.readBuffer(16)),port:D.readUInt16BE()}}if(this.state=p.SocksClientState.ReceivedFinalResponse,p.SocksCommand[this._options.command]===p.SocksCommand.connect)this.state=p.SocksClientState.Established,this.removeInternalSocketHandlers(),this.emit("established",{socket:this._socket});else if(p.SocksCommand[this._options.command]===p.SocksCommand.bind)this.state=p.SocksClientState.BoundWaitingForConnection,this._nextRequiredPacketBufferSize=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{socket:this._socket,remoteHost:B});else if(p.SocksCommand[this._options.command]===p.SocksCommand.associate)this.state=p.SocksClientState.Established,this.removeInternalSocketHandlers(),this.emit("established",{socket:this._socket,remoteHost:B})}}handleSocks5IncomingConnectionResponse(){let F=this._receiveBuffer.peek(5);if(F[0]!==5||F[1]!==p.Socks5Response.Granted)this._closeSocket(`${p.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${p.Socks5Response[F[1]]}`);else{let A=F[3],B,D;if(A===p.Socks5HostType.IPv4){let X=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this._receiveBuffer.length<X){this._nextRequiredPacketBufferSize=X;return}if(D=g2.SmartBuffer.fromBuffer(this._receiveBuffer.get(X).slice(4)),B={host:Z6.fromLong(D.readUInt32BE()),port:D.readUInt16BE()},B.host==="0.0.0.0")B.host=this._options.proxy.ipaddress}else if(A===p.Socks5HostType.Hostname){let X=F[4],Z=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(X);if(this._receiveBuffer.length<Z){this._nextRequiredPacketBufferSize=Z;return}D=g2.SmartBuffer.fromBuffer(this._receiveBuffer.get(Z).slice(5)),B={host:D.readString(X),port:D.readUInt16BE()}}else if(A===p.Socks5HostType.IPv6){let X=p.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this._receiveBuffer.length<X){this._nextRequiredPacketBufferSize=X;return}D=g2.SmartBuffer.fromBuffer(this._receiveBuffer.get(X).slice(4)),B={host:Z6.toString(D.readBuffer(16)),port:D.readUInt16BE()}}this.state=p.SocksClientState.Established,this.removeInternalSocketHandlers(),this.emit("established",{socket:this._socket,remoteHost:B})}}get socksClientOptions(){return Object.assign({},this._options)}}j5.SocksClient=zB});var qP=z((I$)=>{function D21(F){for(var A in F)if(!I$.hasOwnProperty(A))I$[A]=F[A]}Object.defineProperty(I$,"__esModule",{value:!0});D21(HP())});var h6=z((zP)=>{Object.defineProperty(zP,"__esModule",{value:!0});zP.aws4=void 0;zP.getKerberos=X21;zP.getZstdLibrary=Z21;zP.getAwsCredentialProvider=J21;zP.getGcpMetadata=Y21;zP.getSnappy=$21;zP.getSocks=E21;zP.getMongoDBClientEncryption=C21;var E4=l();function T5(F){return new Proxy(F?{kModuleError:F}:{},{get:(B,D)=>{if(D==="kModuleError")return F;throw F},set:()=>{throw F}})}function X21(){let F;try{F=(()=>{throw new Error("Cannot require module "+"kerberos");})()}catch(A){F=T5(new E4.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:A,dependencyName:"kerberos"}))}return F}function Z21(){let F;try{F=(()=>{throw new Error("Cannot require module "+"@mongodb-js/zstd");})()}catch(A){F=T5(new E4.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:A,dependencyName:"zstd"}))}return F}function J21(){try{return (()=>{throw new Error("Cannot require module "+"@aws-sdk/credential-providers");})()}catch(F){return T5(new E4.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:F,dependencyName:"@aws-sdk/credential-providers"}))}}function Y21(){try{return (()=>{throw new Error("Cannot require module "+"gcp-metadata");})()}catch(F){return T5(new E4.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:F,dependencyName:"gcp-metadata"}))}}function $21(){try{return (()=>{throw new Error("Cannot require module "+"snappy");})()}catch(F){return{kModuleError:new E4.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:F,dependencyName:"snappy"})}}}function E21(){try{return qP()}catch(F){return{kModuleError:new E4.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:F,dependencyName:"socks"})}}}zP.aws4=G21();function G21(){let F;try{F=(()=>{throw new Error("Cannot require module "+"aws4");})()}catch(A){F=T5(new E4.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:A,dependencyName:"aws4"}))}return F}function C21(){let F=null;try{F=(()=>{throw new Error("Cannot require module "+"mongodb-client-encryption");})()}catch(A){return{kModuleError:new E4.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:A,dependencyName:"mongodb-client-encryption"})}}return F}});var G4=z((VP)=>{Object.defineProperty(VP,"__esModule",{value:!0});VP.AuthProvider=VP.AuthContext=void 0;var V21=l();class KP{constructor(F,A,B){this.reauthenticating=!1,this.connection=F,this.credentials=A,this.options=B}}VP.AuthContext=KP;class UP{async prepare(F,A){return F}async reauth(F){if(F.reauthenticating)throw new V21.MongoRuntimeError("Reauthentication already in progress.");try{F.reauthenticating=!0,await this.auth(F)}finally{F.reauthenticating=!1}}}VP.AuthProvider=UP});var KB=z((NP)=>{Object.defineProperty(NP,"__esModule",{value:!0});NP.GSSAPI=NP.GSSAPICanonicalizationValue=void 0;NP.performGSSAPICanonicalizeHostName=IP;NP.resolveCname=j$;var M$=c("dns"),w21=h6(),wP=l(),R21=s(),P21=G4();NP.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function N$(F,A){return await F.command(R21.ns("$external.$cmd"),A)}var k5;class RP extends P21.AuthProvider{async auth(F){let{connection:A,credentials:B}=F;if(B==null)throw new wP.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:D}=B,X=await I21(F),Z=await X.step(""),J=await N$(A,N21(Z)),$=await PP(X,10,J.payload),Y=await N$(A,M21($,J.conversationId)),E=await j21(X,D,Y.payload);await N$(A,{saslContinue:1,conversationId:Y.conversationId,payload:E})}}NP.GSSAPI=RP;async function I21(F){let{hostAddress:A}=F.options,{credentials:B}=F;if(!A||typeof A.host!=="string"||!B)throw new wP.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(T21(),"kModuleError"in k5)throw k5.kModuleError;let{initializeClient:D}=k5,{username:X,password:Z}=B,J=B.mechanismProperties,$=J.SERVICE_NAME??"mongodb",Y=await IP(A.host,J),E={};if(Z!=null)Object.assign(E,{user:X,password:Z});let G=J.SERVICE_HOST??Y,C=`${$}${process.platform==="win32"?"/":"@"}${G}`;if("SERVICE_REALM"in J)C=`${C}@${J.SERVICE_REALM}`;return await D(C,E)}function N21(F){return{saslStart:1,mechanism:"GSSAPI",payload:F,autoAuthorize:1}}function M21(F,A){return{saslContinue:1,conversationId:A,payload:F}}async function PP(F,A,B){try{return await F.step(B)||""}catch(D){if(A===0)throw D;return await PP(F,A-1,B)}}async function j21(F,A,B){let D=await F.unwrap(B);return await F.wrap(D||"",{user:A})}async function IP(F,A){let B=A.CANONICALIZE_HOST_NAME;if(!B||B===NP.GSSAPICanonicalizationValue.none)return F;if(B===NP.GSSAPICanonicalizationValue.on||B===NP.GSSAPICanonicalizationValue.forwardAndReverse){let{address:D}=await M$.promises.lookup(F);try{let X=await M$.promises.resolvePtr(D);return X.length>0?X[0]:F}catch{return await j$(F)}}else return await j$(F)}async function j$(F){try{let A=await M$.promises.resolveCname(F);return A.length>0?A[0]:F}catch{return F}}function T21(){if(!k5)k5=w21.getKerberos()}});var D3=z((jP)=>{Object.defineProperty(jP,"__esModule",{value:!0});jP.AUTH_MECHS_AUTH_SRC_EXTERNAL=jP.AuthMechanism=void 0;jP.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});jP.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([jP.AuthMechanism.MONGODB_GSSAPI,jP.AuthMechanism.MONGODB_AWS,jP.AuthMechanism.MONGODB_OIDC,jP.AuthMechanism.MONGODB_X509])});var VB=z((OP)=>{Object.defineProperty(OP,"__esModule",{value:!0});OP.MongoCredentials=OP.DEFAULT_ALLOWED_HOSTS=void 0;var V6=l(),O21=KB(),j2=D3();function S21(F){if(F){if(Array.isArray(F.saslSupportedMechs))return F.saslSupportedMechs.includes(j2.AuthMechanism.MONGODB_SCRAM_SHA256)?j2.AuthMechanism.MONGODB_SCRAM_SHA256:j2.AuthMechanism.MONGODB_SCRAM_SHA1}return j2.AuthMechanism.MONGODB_SCRAM_SHA256}var kP=["test","azure","gcp","k8s"],uP="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";OP.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var x21="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.";class UB{constructor(F){if(this.username=F.username??"",this.password=F.password,this.source=F.source,!this.source&&F.db)this.source=F.db;if(this.mechanism=F.mechanism||j2.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=F.mechanismProperties||{},this.mechanism===j2.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS)this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:OP.DEFAULT_ALLOWED_HOSTS};Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(F){return this.mechanism===F.mechanism&&this.username===F.username&&this.password===F.password&&this.source===F.source}resolveAuthMechanism(F){if(this.mechanism.match(/DEFAULT/i))return new UB({username:this.username,password:this.password,source:this.source,mechanism:S21(F),mechanismProperties:this.mechanismProperties});return this}validate(){if((this.mechanism===j2.AuthMechanism.MONGODB_GSSAPI||this.mechanism===j2.AuthMechanism.MONGODB_PLAIN||this.mechanism===j2.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===j2.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new V6.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===j2.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new V6.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new V6.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new V6.MongoInvalidArgumentError(x21);if(this.mechanismProperties.ENVIRONMENT&&!kP.includes(this.mechanismProperties.ENVIRONMENT))throw new V6.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${kP.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new V6.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let A=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(A))throw new V6.MongoInvalidArgumentError(uP);for(let B of A)if(typeof B!=="string")throw new V6.MongoInvalidArgumentError(uP)}}if(j2.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)){if(this.source!=null&&this.source!=="$external")throw new V6.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`)}if(this.mechanism===j2.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new V6.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===j2.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new V6.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let F=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(O21.GSSAPICanonicalizationValue).includes(F))throw new V6.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${F}`)}static merge(F,A){return new UB({username:A.username??F?.username??"",password:A.password??F?.password??"",mechanism:A.mechanism??F?.mechanism??j2.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:A.mechanismProperties??F?.mechanismProperties??{},source:A.source??A.db??F?.source??"admin"})}}OP.MongoCredentials=UB});var _P=z((DR1,_21)=>{_21.exports={name:"mongodb",version:"7.0.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^7.0.0","mongodb-connection-string-url":"^7.0.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.806.0","@mongodb-js/zstd":"^7.0.0","gcp-metadata":"^7.0.1",kerberos:"^7.0.0","mongodb-client-encryption":">=7.0.0 <7.1.0",snappy:"^7.3.2",socks:"^2.8.6"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^7.0.0","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^7.0.1","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^7.0.0",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=20.19.0"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --target es2023 --module commonjs --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts test/integration/auth/mongodb_aws.prose.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var T$=z((yP)=>{Object.defineProperty(yP,"__esModule",{value:!0});yP.LimitedSizeDocument=void 0;yP.isDriverInfoEqual=b21;yP.makeClientMetadata=y21;yP.getFAASEnv=bP;var O5=c("os"),S5=c("process"),M7=$1(),fP=l(),f21=s(),g21=_P().version;function b21(F,A){let B=(D,X)=>{return D||=void 0,X||=void 0,D===X};return B(F.name,A.name)&&B(F.platform,A.platform)&&B(F.version,A.version)}class LB{constructor(F){this.document=new Map,this.documentSize=5,this.maxSize=F}ifItFitsItSits(F,A){let B=M7.BSON.serialize(new Map().set(F,A)).byteLength-5;if(B+this.documentSize>this.maxSize)return!1;return this.documentSize+=B,this.document.set(F,A),!0}toObject(){return M7.BSON.deserialize(M7.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}}yP.LimitedSizeDocument=LB;async function y21(F,{appName:A=""}){let B=new LB(512);if(A.length>0){let $=Buffer.byteLength(A,"utf8")<=128?A:Buffer.from(A,"utf8").subarray(0,128).toString("utf8");B.ifItFitsItSits("application",{name:$})}let D={name:"nodejs",version:g21};for(let{name:$="",version:Y=""}of F){if($.length>0)D.name=`${D.name}|${$}`;if(Y.length>0)D.version=`${D.version}|${Y}`}if(!B.ifItFitsItSits("driver",D))throw new fP.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let X=m21();for(let{platform:$=""}of F)if($.length>0)X=`${X}|${$}`;if(!B.ifItFitsItSits("platform",X))throw new fP.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let Z=new Map().set("name",S5.platform).set("architecture",S5.arch).set("version",O5.release()).set("type",O5.type());if(!B.ifItFitsItSits("os",Z))for(let $ of Z.keys()){if(Z.delete($),Z.size===0)break;if(B.ifItFitsItSits("os",Z))break}let J=bP();if(J!=null){if(!B.ifItFitsItSits("env",J))for(let $ of J.keys()){if(J.delete($),J.size===0)break;if(B.ifItFitsItSits("env",J))break}}return await v21(B.toObject())}var gP;async function h21(){gP??=f21.fileIsAccessible("/.dockerenv");let F=await gP,{KUBERNETES_SERVICE_HOST:A=""}=S5.env,B=A.length>0?!0:!1,D={};if(F)D.runtime="docker";if(B)D.orchestrator="kubernetes";return D}async function v21(F){let A=await h21();if(Object.keys(A).length===0)return F;let B=new LB(512),D={...F?.env,container:A};for(let[X,Z]of Object.entries(F))if(X!=="env")B.ifItFitsItSits(X,Z);else if(!B.ifItFitsItSits("env",D))B.ifItFitsItSits("env",Z);if(!("env"in F))B.ifItFitsItSits("env",D);return B.toObject()}function bP(){let{AWS_EXECUTION_ENV:F="",AWS_LAMBDA_RUNTIME_API:A="",FUNCTIONS_WORKER_RUNTIME:B="",K_SERVICE:D="",FUNCTION_NAME:X="",VERCEL:Z="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:J="",AWS_REGION:$="",FUNCTION_MEMORY_MB:Y="",FUNCTION_REGION:E="",FUNCTION_TIMEOUT_SEC:G="",VERCEL_REGION:C=""}=S5.env,W=F.startsWith("AWS_Lambda_")||A.length>0,H=B.length>0,q=D.length>0||X.length>0,Q=Z.length>0,K=new Map;if(Q&&!(H||q)){if(C.length>0)K.set("region",C);return K.set("name","vercel"),K}if(W&&!(H||q||Q)){if($.length>0)K.set("region",$);if(J.length>0&&Number.isInteger(+J))K.set("memory_mb",new M7.Int32(J));return K.set("name","aws.lambda"),K}if(H&&!(q||W||Q))return K.set("name","azure.func"),K;if(q&&!(H||W||Q)){if(E.length>0)K.set("region",E);if(Y.length>0&&Number.isInteger(+Y))K.set("memory_mb",new M7.Int32(Y));if(G.length>0&&Number.isInteger(+G))K.set("timeout_sec",new M7.Int32(G));return K.set("name","gcp.func"),K}return null}function m21(){if("Deno"in globalThis)return`Deno v${typeof Deno?.version?.deno==="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${O5.endianness()}`;if("Bun"in globalThis)return`Bun v${typeof Bun?.version==="string"?Bun?.version:"0.0.0-unknown"}, ${O5.endianness()}`;return`Node.js ${S5.version}, ${O5.endianness()}`}});var RB=z((cP)=>{function m1(F,A,B){if(B.globals)F=B.globals[F.name];return new F(`${B.context?B.context:"Value"} ${A}.`)}function k7(F,A){if(typeof F==="bigint")throw m1(TypeError,"is a BigInt which cannot be converted to a number",A);if(!A.globals)return Number(F);return A.globals.Number(F)}function mP(F){if(F>0&&F%1===0.5&&(F&1)===0||F<0&&F%1===-0.5&&(F&1)===1)return x5(Math.floor(F));return x5(Math.round(F))}function wB(F){return x5(Math.trunc(F))}function vP(F){return F<0?-1:1}function p21(F,A){let B=F%A;if(vP(A)!==vP(B))return B+A;return B}function x5(F){return F===0?0:F}function u7(F,{unsigned:A}){let B,D;if(A)B=0,D=2**F-1;else B=-(2**(F-1)),D=2**(F-1)-1;let X=2**F,Z=2**(F-1);return(J,$={})=>{let Y=k7(J,$);if(Y=x5(Y),$.enforceRange){if(!Number.isFinite(Y))throw m1(TypeError,"is not a finite number",$);if(Y=wB(Y),Y<B||Y>D)throw m1(TypeError,`is outside the accepted range of ${B} to ${D}, inclusive`,$);return Y}if(!Number.isNaN(Y)&&$.clamp)return Y=Math.min(Math.max(Y,B),D),Y=mP(Y),Y;if(!Number.isFinite(Y)||Y===0)return 0;if(Y=wB(Y),Y>=B&&Y<=D)return Y;if(Y=p21(Y,X),!A&&Y>=Z)return Y-X;return Y}}function dP(F,{unsigned:A}){let B=Number.MAX_SAFE_INTEGER,D=A?0:Number.MIN_SAFE_INTEGER,X=A?BigInt.asUintN:BigInt.asIntN;return(Z,J={})=>{let $=k7(Z,J);if($=x5($),J.enforceRange){if(!Number.isFinite($))throw m1(TypeError,"is not a finite number",J);if($=wB($),$<D||$>B)throw m1(TypeError,`is outside the accepted range of ${D} to ${B}, inclusive`,J);return $}if(!Number.isNaN($)&&J.clamp)return $=Math.min(Math.max($,D),B),$=mP($),$;if(!Number.isFinite($)||$===0)return 0;let Y=BigInt(wB($));return Y=X(F,Y),Number(Y)}}cP.any=(F)=>{return F};cP.undefined=()=>{return};cP.boolean=(F)=>{return Boolean(F)};cP.byte=u7(8,{unsigned:!1});cP.octet=u7(8,{unsigned:!0});cP.short=u7(16,{unsigned:!1});cP["unsigned short"]=u7(16,{unsigned:!0});cP.long=u7(32,{unsigned:!1});cP["unsigned long"]=u7(32,{unsigned:!0});cP["long long"]=dP(64,{unsigned:!1});cP["unsigned long long"]=dP(64,{unsigned:!0});cP.double=(F,A={})=>{let B=k7(F,A);if(!Number.isFinite(B))throw m1(TypeError,"is not a finite floating-point value",A);return B};cP["unrestricted double"]=(F,A={})=>{return k7(F,A)};cP.float=(F,A={})=>{let B=k7(F,A);if(!Number.isFinite(B))throw m1(TypeError,"is not a finite floating-point value",A);if(Object.is(B,-0))return B;let D=Math.fround(B);if(!Number.isFinite(D))throw m1(TypeError,"is outside the range of a single-precision floating-point value",A);return D};cP["unrestricted float"]=(F,A={})=>{let B=k7(F,A);if(isNaN(B))return B;if(Object.is(B,-0))return B;return Math.fround(B)};cP.DOMString=(F,A={})=>{if(A.treatNullAsEmptyString&&F===null)return"";if(typeof F==="symbol")throw m1(TypeError,"is a symbol, which cannot be converted to a string",A);return(A.globals?A.globals.String:String)(F)};cP.ByteString=(F,A={})=>{let B=cP.DOMString(F,A),D;for(let X=0;(D=B.codePointAt(X))!==void 0;++X)if(D>255)throw m1(TypeError,"is not a valid ByteString",A);return B};cP.USVString=(F,A={})=>{let B=cP.DOMString(F,A),D=B.length,X=[];for(let Z=0;Z<D;++Z){let J=B.charCodeAt(Z);if(J<55296||J>57343)X.push(String.fromCodePoint(J));else if(56320<=J&&J<=57343)X.push(String.fromCodePoint(65533));else if(Z===D-1)X.push(String.fromCodePoint(65533));else{let $=B.charCodeAt(Z+1);if(56320<=$&&$<=57343){let Y=J&1023,E=$&1023;X.push(String.fromCodePoint(65536+1024*Y+E)),++Z}else X.push(String.fromCodePoint(65533))}}return X.join("")};cP.object=(F,A={})=>{if(F===null||typeof F!=="object"&&typeof F!=="function")throw m1(TypeError,"is not an object",A);return F};var i21=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,n21=typeof SharedArrayBuffer==="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function k$(F){try{return i21.call(F),!0}catch{return!1}}function j7(F){try{return n21.call(F),!0}catch{return!1}}function T7(F){try{return new Uint8Array(F),!1}catch{return!0}}cP.ArrayBuffer=(F,A={})=>{if(!k$(F)){if(A.allowShared&&!j7(F))throw m1(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",A);throw m1(TypeError,"is not an ArrayBuffer",A)}if(T7(F))throw m1(TypeError,"is a detached ArrayBuffer",A);return F};var a21=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;cP.DataView=(F,A={})=>{try{a21.call(F)}catch(B){throw m1(TypeError,"is not a DataView",A)}if(!A.allowShared&&j7(F.buffer))throw m1(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",A);if(T7(F.buffer))throw m1(TypeError,"is backed by a detached ArrayBuffer",A);return F};var s21=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach((F)=>{let{name:A}=F,B=/^[AEIOU]/u.test(A)?"an":"a";cP[A]=(D,X={})=>{if(!ArrayBuffer.isView(D)||s21.call(D)!==A)throw m1(TypeError,`is not ${B} ${A} object`,X);if(!X.allowShared&&j7(D.buffer))throw m1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",X);if(T7(D.buffer))throw m1(TypeError,"is a view on a detached ArrayBuffer",X);return D}});cP.ArrayBufferView=(F,A={})=>{if(!ArrayBuffer.isView(F))throw m1(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",A);if(!A.allowShared&&j7(F.buffer))throw m1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",A);if(T7(F.buffer))throw m1(TypeError,"is a view on a detached ArrayBuffer",A);return F};cP.BufferSource=(F,A={})=>{if(ArrayBuffer.isView(F)){if(!A.allowShared&&j7(F.buffer))throw m1(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",A);if(T7(F.buffer))throw m1(TypeError,"is a view on a detached ArrayBuffer",A);return F}if(!A.allowShared&&!k$(F))throw m1(TypeError,"is not an ArrayBuffer or a view on one",A);if(A.allowShared&&!j7(F)&&!k$(F))throw m1(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",A);if(T7(F))throw m1(TypeError,"is a detached ArrayBuffer",A);return F};cP.DOMTimeStamp=cP["unsigned long long"]});var IB=z((tP,oP)=>{function U61(F){return typeof F==="object"&&F!==null||typeof F==="function"}var pP=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function V61(F,A){for(let B of Reflect.ownKeys(A)){let D=Reflect.getOwnPropertyDescriptor(A,B);if(D&&!Reflect.defineProperty(F,B,D))throw new TypeError(`Cannot redefine property: ${String(B)}`)}}function L61(F,A){let B=aP(F);return Object.defineProperties(Object.create(B["%Object.prototype%"]),Object.getOwnPropertyDescriptors(A))}var iP=Symbol("wrapper"),nP=Symbol("impl"),O7=Symbol("SameObject caches"),PB=Symbol.for("[webidl2js] constructor registry"),w61=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function aP(F){if(pP(F,PB))return F[PB];let A=Object.create(null);A["%Object.prototype%"]=F.Object.prototype,A["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new F.Array()[Symbol.iterator]()));try{A["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(F.eval("(async function* () {})").prototype))}catch{A["%AsyncIteratorPrototype%"]=w61}return F[PB]=A,A}function R61(F,A,B){if(!F[O7])F[O7]=Object.create(null);if(A in F[O7])return F[O7][A];return F[O7][A]=B(),F[O7][A]}function sP(F){return F?F[iP]:null}function rP(F){return F?F[nP]:null}function P61(F){let A=sP(F);return A?A:F}function I61(F){let A=rP(F);return A?A:F}var N61=Symbol("internal");function M61(F){if(typeof F!=="string")return!1;let A=F>>>0;if(A===4294967295)return!1;let B=`${A}`;if(F!==B)return!1;return!0}var j61=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function T61(F){try{return j61.call(F),!0}catch(A){return!1}}function k61([F,A],B){let D;switch(B){case"key":D=F;break;case"value":D=A;break;case"key+value":D=[F,A];break}return{value:D,done:!1}}var u61=Symbol("supports property index"),O61=Symbol("supported property indices"),S61=Symbol("supports property name"),x61=Symbol("supported property names"),_61=Symbol("indexed property get"),f61=Symbol("indexed property set new"),g61=Symbol("indexed property set existing"),b61=Symbol("named property get"),y61=Symbol("named property set new"),h61=Symbol("named property set existing"),v61=Symbol("named property delete"),m61=Symbol("async iterator get the next iteration result"),d61=Symbol("async iterator return steps"),c61=Symbol("async iterator initialization steps"),l61=Symbol("async iterator end of iteration");oP.exports=tP={isObject:U61,hasOwn:pP,define:V61,newObjectInRealm:L61,wrapperSymbol:iP,implSymbol:nP,getSameObject:R61,ctorRegistrySymbol:PB,initCtorRegistry:aP,wrapperForImpl:sP,implForWrapper:rP,tryWrapperForImpl:P61,tryImplForWrapper:I61,iterInternalSymbol:N61,isArrayBuffer:T61,isArrayIndexPropName:M61,supportsPropertyIndex:u61,supportedPropertyIndices:O61,supportsPropertyName:S61,supportedPropertyNames:x61,indexedGet:_61,indexedSetNew:f61,indexedSetExisting:g61,namedGet:b61,namedSetNew:y61,namedSetExisting:h61,namedDelete:v61,asyncIteratorNext:m61,asyncIteratorReturn:d61,asyncIteratorInit:c61,asyncIteratorEOI:l61,iteratorResult:k61}});var JI=z((JR1,ZI)=>{var p61=/^xn--/,i61=/[^\0-\x7F]/,n61=/[\x2E\u3002\uFF0E\uFF61]/g,a61={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X3=Math.floor,O$=String.fromCharCode;function C4(F){throw new RangeError(a61[F])}function s61(F,A){let B=[],D=F.length;while(D--)B[D]=A(F[D]);return B}function FI(F,A){let B=F.split("@"),D="";if(B.length>1)D=B[0]+"@",F=B[1];F=F.replace(n61,".");let X=F.split("."),Z=s61(X,A).join(".");return D+Z}function AI(F){let A=[],B=0,D=F.length;while(B<D){let X=F.charCodeAt(B++);if(X>=55296&&X<=56319&&B<D){let Z=F.charCodeAt(B++);if((Z&64512)==56320)A.push(((X&1023)<<10)+(Z&1023)+65536);else A.push(X),B--}else A.push(X)}return A}var r61=(F)=>String.fromCodePoint(...F),t61=function(F){if(F>=48&&F<58)return 26+(F-48);if(F>=65&&F<91)return F-65;if(F>=97&&F<123)return F-97;return 36},eP=function(F,A){return F+22+75*(F<26)-((A!=0)<<5)},BI=function(F,A,B){let D=0;F=B?X3(F/700):F>>1,F+=X3(F/A);for(;F>455;D+=36)F=X3(F/35);return X3(D+36*F/(F+38))},DI=function(F){let A=[],B=F.length,D=0,X=128,Z=72,J=F.lastIndexOf("-");if(J<0)J=0;for(let $=0;$<J;++$){if(F.charCodeAt($)>=128)C4("not-basic");A.push(F.charCodeAt($))}for(let $=J>0?J+1:0;$<B;){let Y=D;for(let G=1,C=36;;C+=36){if($>=B)C4("invalid-input");let W=t61(F.charCodeAt($++));if(W>=36)C4("invalid-input");if(W>X3((2147483647-D)/G))C4("overflow");D+=W*G;let H=C<=Z?1:C>=Z+26?26:C-Z;if(W<H)break;let q=36-H;if(G>X3(2147483647/q))C4("overflow");G*=q}let E=A.length+1;if(Z=BI(D-Y,E,Y==0),X3(D/E)>2147483647-X)C4("overflow");X+=X3(D/E),D%=E,A.splice(D++,0,X)}return String.fromCodePoint(...A)},XI=function(F){let A=[];F=AI(F);let B=F.length,D=128,X=0,Z=72;for(let Y of F)if(Y<128)A.push(O$(Y));let J=A.length,$=J;if(J)A.push("-");while($<B){let Y=2147483647;for(let G of F)if(G>=D&&G<Y)Y=G;let E=$+1;if(Y-D>X3((2147483647-X)/E))C4("overflow");X+=(Y-D)*E,D=Y;for(let G of F){if(G<D&&++X>2147483647)C4("overflow");if(G===D){let C=X;for(let W=36;;W+=36){let H=W<=Z?1:W>=Z+26?26:W-Z;if(C<H)break;let q=C-H,Q=36-H;A.push(O$(eP(H+q%Q,0))),C=X3(q/Q)}A.push(O$(eP(C,0))),Z=BI(X,E,$===J),X=0,++$}}++X,++D}return A.join("")},o61=function(F){return FI(F,function(A){return p61.test(A)?DI(A.slice(4).toLowerCase()):A})},e61=function(F){return FI(F,function(A){return i61.test(A)?"xn--"+XI(A):A})},F31={version:"2.3.1",ucs2:{decode:AI,encode:r61},decode:DI,encode:XI,toASCII:e61,toUnicode:o61};ZI.exports=F31});var $I=z((YR1,YI)=>{var A31=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,B31=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,D31=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,X31=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,Z31=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,J31=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,Y31=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,$31=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,E31=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,G31=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,C31=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,W31=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;YI.exports={combiningMarks:A31,combiningClassVirama:B31,validZWNJ:D31,bidiDomain:X31,bidiS1LTR:Z31,bidiS1RTL:J31,bidiS2:Y31,bidiS3:$31,bidiS4EN:E31,bidiS4AN:G31,bidiS5:C31,bidiS6:W31}});var EI=z(($R1,H31)=>{H31.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," "],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," "],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," "],[181,1,""],[182,2],[183,2],[184,1," "],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"14"],[189,1,"12"],[190,1,"34"],[191,2],[192,1,""],[193,1,""],[194,1,""],[195,1,""],[196,1,""],[197,1,""],[198,1,""],[199,1,""],[200,1,""],[201,1,""],[202,1,""],[203,1,""],[204,1,""],[205,1,""],[206,1,""],[207,1,""],[208,1,""],[209,1,""],[210,1,""],[211,1,""],[212,1,""],[213,1,""],[214,1,""],[215,2],[216,1,""],[217,1,""],[218,1,""],[219,1,""],[220,1,""],[221,1,""],[222,1,""],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,""],[257,2],[258,1,""],[259,2],[260,1,""],[261,2],[262,1,""],[263,2],[264,1,""],[265,2],[266,1,""],[267,2],[268,1,""],[269,2],[270,1,""],[271,2],[272,1,""],[273,2],[274,1,""],[275,2],[276,1,""],[277,2],[278,1,""],[279,2],[280,1,""],[281,2],[282,1,""],[283,2],[284,1,""],[285,2],[286,1,""],[287,2],[288,1,""],[289,2],[290,1,""],[291,2],[292,1,""],[293,2],[294,1,""],[295,2],[296,1,""],[297,2],[298,1,""],[299,2],[300,1,""],[301,2],[302,1,""],[303,2],[304,1,"i"],[305,2],[[306,307],1,"ij"],[308,1,""],[309,2],[310,1,""],[[311,312],2],[313,1,""],[314,2],[315,1,""],[316,2],[317,1,""],[318,2],[[319,320],1,"l"],[321,1,""],[322,2],[323,1,""],[324,2],[325,1,""],[326,2],[327,1,""],[328,2],[329,1,"n"],[330,1,""],[331,2],[332,1,""],[333,2],[334,1,""],[335,2],[336,1,""],[337,2],[338,1,""],[339,2],[340,1,""],[341,2],[342,1,""],[343,2],[344,1,""],[345,2],[346,1,""],[347,2],[348,1,""],[349,2],[350,1,""],[351,2],[352,1,""],[353,2],[354,1,""],[355,2],[356,1,""],[357,2],[358,1,""],[359,2],[360,1,""],[361,2],[362,1,""],[363,2],[364,1,""],[365,2],[366,1,""],[367,2],[368,1,""],[369,2],[370,1,""],[371,2],[372,1,""],[373,2],[374,1,""],[375,2],[376,1,""],[377,1,""],[378,2],[379,1,""],[380,2],[381,1,""],[382,2],[383,1,"s"],[384,2],[385,1,""],[386,1,""],[387,2],[388,1,""],[389,2],[390,1,""],[391,1,""],[392,2],[393,1,""],[394,1,""],[395,1,""],[[396,397],2],[398,1,""],[399,1,""],[400,1,""],[401,1,""],[402,2],[403,1,""],[404,1,""],[405,2],[406,1,""],[407,1,""],[408,1,""],[[409,411],2],[412,1,""],[413,1,""],[414,2],[415,1,""],[416,1,""],[417,2],[418,1,""],[419,2],[420,1,""],[421,2],[422,1,""],[423,1,""],[424,2],[425,1,""],[[426,427],2],[428,1,""],[429,2],[430,1,""],[431,1,""],[432,2],[433,1,""],[434,1,""],[435,1,""],[436,2],[437,1,""],[438,2],[439,1,""],[440,1,""],[[441,443],2],[444,1,""],[[445,451],2],[[452,454],1,"d"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,""],[462,2],[463,1,""],[464,2],[465,1,""],[466,2],[467,1,""],[468,2],[469,1,""],[470,2],[471,1,""],[472,2],[473,1,""],[474,2],[475,1,""],[[476,477],2],[478,1,""],[479,2],[480,1,""],[481,2],[482,1,""],[483,2],[484,1,""],[485,2],[486,1,""],[487,2],[488,1,""],[489,2],[490,1,""],[491,2],[492,1,""],[493,2],[494,1,""],[[495,496],2],[[497,499],1,"dz"],[500,1,""],[501,2],[502,1,""],[503,1,""],[504,1,""],[505,2],[506,1,""],[507,2],[508,1,""],[509,2],[510,1,""],[511,2],[512,1,""],[513,2],[514,1,""],[515,2],[516,1,""],[517,2],[518,1,""],[519,2],[520,1,""],[521,2],[522,1,""],[523,2],[524,1,""],[525,2],[526,1,""],[527,2],[528,1,""],[529,2],[530,1,""],[531,2],[532,1,""],[533,2],[534,1,""],[535,2],[536,1,""],[537,2],[538,1,""],[539,2],[540,1,""],[541,2],[542,1,""],[543,2],[544,1,""],[545,2],[546,1,""],[547,2],[548,1,""],[549,2],[550,1,""],[551,2],[552,1,""],[553,2],[554,1,""],[555,2],[556,1,""],[557,2],[558,1,""],[559,2],[560,1,""],[561,2],[562,1,""],[563,2],[[564,566],2],[[567,569],2],[570,1,""],[571,1,""],[572,2],[573,1,""],[574,1,""],[[575,576],2],[577,1,""],[578,2],[579,1,""],[580,1,""],[581,1,""],[582,1,""],[583,2],[584,1,""],[585,2],[586,1,""],[587,2],[588,1,""],[589,2],[590,1,""],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,""],[690,1,"j"],[691,1,"r"],[692,1,""],[693,1,""],[694,1,""],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," "],[729,1," "],[730,1," "],[731,1," "],[732,1," "],[733,1," "],[734,2],[735,2],[736,1,""],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,""],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,""],[833,1,""],[834,2],[835,1,""],[836,1,""],[837,1,""],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,""],[881,2],[882,1,""],[883,2],[884,1,""],[885,2],[886,1,""],[887,2],[[888,889],3],[890,1," "],[[891,893],2],[894,1,";"],[895,1,""],[[896,899],3],[900,1," "],[901,1," "],[902,1,""],[903,1,""],[904,1,""],[905,1,""],[906,1,""],[907,3],[908,1,""],[909,3],[910,1,""],[911,1,""],[912,2],[913,1,""],[914,1,""],[915,1,""],[916,1,""],[917,1,""],[918,1,""],[919,1,""],[920,1,""],[921,1,""],[922,1,""],[923,1,""],[924,1,""],[925,1,""],[926,1,""],[927,1,""],[928,1,""],[929,1,""],[930,3],[931,1,""],[932,1,""],[933,1,""],[934,1,""],[935,1,""],[936,1,""],[937,1,""],[938,1,""],[939,1,""],[[940,961],2],[962,6,""],[[963,974],2],[975,1,""],[976,1,""],[977,1,""],[978,1,""],[979,1,""],[980,1,""],[981,1,""],[982,1,""],[983,2],[984,1,""],[985,2],[986,1,""],[987,2],[988,1,""],[989,2],[990,1,""],[991,2],[992,1,""],[993,2],[994,1,""],[995,2],[996,1,""],[997,2],[998,1,""],[999,2],[1000,1,""],[1001,2],[1002,1,""],[1003,2],[1004,1,""],[1005,2],[1006,1,""],[1007,2],[1008,1,""],[1009,1,""],[1010,1,""],[1011,2],[1012,1,""],[1013,1,""],[1014,2],[1015,1,""],[1016,2],[1017,1,""],[1018,1,""],[1019,2],[1020,2],[1021,1,""],[1022,1,""],[1023,1,""],[1024,1,""],[1025,1,""],[1026,1,""],[1027,1,""],[1028,1,""],[1029,1,""],[1030,1,""],[1031,1,""],[1032,1,""],[1033,1,""],[1034,1,""],[1035,1,""],[1036,1,""],[1037,1,""],[1038,1,""],[1039,1,""],[1040,1,""],[1041,1,""],[1042,1,""],[1043,1,""],[1044,1,""],[1045,1,""],[1046,1,""],[1047,1,""],[1048,1,""],[1049,1,""],[1050,1,""],[1051,1,""],[1052,1,""],[1053,1,""],[1054,1,""],[1055,1,""],[1056,1,""],[1057,1,""],[1058,1,""],[1059,1,""],[1060,1,""],[1061,1,""],[1062,1,""],[1063,1,""],[1064,1,""],[1065,1,""],[1066,1,""],[1067,1,""],[1068,1,""],[1069,1,""],[1070,1,""],[1071,1,""],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,""],[1121,2],[1122,1,""],[1123,2],[1124,1,""],[1125,2],[1126,1,""],[1127,2],[1128,1,""],[1129,2],[1130,1,""],[1131,2],[1132,1,""],[1133,2],[1134,1,""],[1135,2],[1136,1,""],[1137,2],[1138,1,""],[1139,2],[1140,1,""],[1141,2],[1142,1,""],[1143,2],[1144,1,""],[1145,2],[1146,1,""],[1147,2],[1148,1,""],[1149,2],[1150,1,""],[1151,2],[1152,1,""],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,""],[1163,2],[1164,1,""],[1165,2],[1166,1,""],[1167,2],[1168,1,""],[1169,2],[1170,1,""],[1171,2],[1172,1,""],[1173,2],[1174,1,""],[1175,2],[1176,1,""],[1177,2],[1178,1,""],[1179,2],[1180,1,""],[1181,2],[1182,1,""],[1183,2],[1184,1,""],[1185,2],[1186,1,""],[1187,2],[1188,1,""],[1189,2],[1190,1,""],[1191,2],[1192,1,""],[1193,2],[1194,1,""],[1195,2],[1196,1,""],[1197,2],[1198,1,""],[1199,2],[1200,1,""],[1201,2],[1202,1,""],[1203,2],[1204,1,""],[1205,2],[1206,1,""],[1207,2],[1208,1,""],[1209,2],[1210,1,""],[1211,2],[1212,1,""],[1213,2],[1214,1,""],[1215,2],[1216,1,""],[1217,1,""],[1218,2],[1219,1,""],[1220,2],[1221,1,""],[1222,2],[1223,1,""],[1224,2],[1225,1,""],[1226,2],[1227,1,""],[1228,2],[1229,1,""],[1230,2],[1231,2],[1232,1,""],[1233,2],[1234,1,""],[1235,2],[1236,1,""],[1237,2],[1238,1,""],[1239,2],[1240,1,""],[1241,2],[1242,1,""],[1243,2],[1244,1,""],[1245,2],[1246,1,""],[1247,2],[1248,1,""],[1249,2],[1250,1,""],[1251,2],[1252,1,""],[1253,2],[1254,1,""],[1255,2],[1256,1,""],[1257,2],[1258,1,""],[1259,2],[1260,1,""],[1261,2],[1262,1,""],[1263,2],[1264,1,""],[1265,2],[1266,1,""],[1267,2],[1268,1,""],[1269,2],[1270,1,""],[1271,2],[1272,1,""],[1273,2],[1274,1,""],[1275,2],[1276,1,""],[1277,2],[1278,1,""],[1279,2],[1280,1,""],[1281,2],[1282,1,""],[1283,2],[1284,1,""],[1285,2],[1286,1,""],[1287,2],[1288,1,""],[1289,2],[1290,1,""],[1291,2],[1292,1,""],[1293,2],[1294,1,""],[1295,2],[1296,1,""],[1297,2],[1298,1,""],[1299,2],[1300,1,""],[1301,2],[1302,1,""],[1303,2],[1304,1,""],[1305,2],[1306,1,""],[1307,2],[1308,1,""],[1309,2],[1310,1,""],[1311,2],[1312,1,""],[1313,2],[1314,1,""],[1315,2],[1316,1,""],[1317,2],[1318,1,""],[1319,2],[1320,1,""],[1321,2],[1322,1,""],[1323,2],[1324,1,""],[1325,2],[1326,1,""],[1327,2],[1328,3],[1329,1,""],[1330,1,""],[1331,1,""],[1332,1,""],[1333,1,""],[1334,1,""],[1335,1,""],[1336,1,""],[1337,1,""],[1338,1,""],[1339,1,""],[1340,1,""],[1341,1,""],[1342,1,""],[1343,1,""],[1344,1,""],[1345,1,""],[1346,1,""],[1347,1,""],[1348,1,""],[1349,1,""],[1350,1,""],[1351,1,""],[1352,1,""],[1353,1,""],[1354,1,""],[1355,1,""],[1356,1,""],[1357,1,""],[1358,1,""],[1359,1,""],[1360,1,""],[1361,1,""],[1362,1,""],[1363,1,""],[1364,1,""],[1365,1,""],[1366,1,""],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,""],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,""],[1654,1,""],[1655,1,""],[1656,1,""],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,""],[2393,1,""],[2394,1,""],[2395,1,""],[2396,1,""],[2397,1,""],[2398,1,""],[2399,1,""],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,""],[2525,1,""],[2526,3],[2527,1,""],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,""],[2612,3],[2613,2],[2614,1,""],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,""],[2650,1,""],[2651,1,""],[2652,2],[2653,3],[2654,1,""],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,""],[2909,1,""],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,""],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,""],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,""],[3805,1,""],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,""],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,""],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,""],[[3918,3921],2],[3922,1,""],[[3923,3926],2],[3927,1,""],[[3928,3931],2],[3932,1,""],[[3933,3944],2],[3945,1,""],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,""],[3956,2],[3957,1,""],[3958,1,""],[3959,1,""],[3960,1,""],[3961,1,""],[[3962,3968],2],[3969,1,""],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,""],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,""],[[3998,4001],2],[4002,1,""],[[4003,4006],2],[4007,1,""],[[4008,4011],2],[4012,1,""],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,""],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,""],[4257,1,""],[4258,1,""],[4259,1,""],[4260,1,""],[4261,1,""],[4262,1,""],[4263,1,""],[4264,1,""],[4265,1,""],[4266,1,""],[4267,1,""],[4268,1,""],[4269,1,""],[4270,1,""],[4271,1,""],[4272,1,""],[4273,1,""],[4274,1,""],[4275,1,""],[4276,1,""],[4277,1,""],[4278,1,""],[4279,1,""],[4280,1,""],[4281,1,""],[4282,1,""],[4283,1,""],[4284,1,""],[4285,1,""],[4286,1,""],[4287,1,""],[4288,1,""],[4289,1,""],[4290,1,""],[4291,1,""],[4292,1,""],[4293,1,""],[4294,3],[4295,1,""],[[4296,4300],3],[4301,1,""],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,""],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,""],[5113,1,""],[5114,1,""],[5115,1,""],[5116,1,""],[5117,1,""],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6000],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,""],[7297,1,""],[7298,1,""],[7299,1,""],[[7300,7301],1,""],[7302,1,""],[7303,1,""],[7304,1,""],[7305,1,""],[7306,2],[[7307,7311],3],[7312,1,""],[7313,1,""],[7314,1,""],[7315,1,""],[7316,1,""],[7317,1,""],[7318,1,""],[7319,1,""],[7320,1,""],[7321,1,""],[7322,1,""],[7323,1,""],[7324,1,""],[7325,1,""],[7326,1,""],[7327,1,""],[7328,1,""],[7329,1,""],[7330,1,""],[7331,1,""],[7332,1,""],[7333,1,""],[7334,1,""],[7335,1,""],[7336,1,""],[7337,1,""],[7338,1,""],[7339,1,""],[7340,1,""],[7341,1,""],[7342,1,""],[7343,1,""],[7344,1,""],[7345,1,""],[7346,1,""],[7347,1,""],[7348,1,""],[7349,1,""],[7350,1,""],[7351,1,""],[7352,1,""],[7353,1,""],[7354,1,""],[[7355,7356],3],[7357,1,""],[7358,1,""],[7359,1,""],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,""],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,""],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,""],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,""],[7493,1,""],[7494,1,""],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,""],[7499,1,""],[7500,1,""],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,""],[7506,1,"o"],[7507,1,""],[7508,1,""],[7509,1,""],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,""],[7514,1,""],[7515,1,"v"],[7516,1,""],[7517,1,""],[7518,1,""],[7519,1,""],[7520,1,""],[7521,1,""],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,""],[7527,1,""],[7528,1,""],[7529,1,""],[7530,1,""],[7531,2],[[7532,7543],2],[7544,1,""],[[7545,7578],2],[7579,1,""],[7580,1,"c"],[7581,1,""],[7582,1,""],[7583,1,""],[7584,1,"f"],[7585,1,""],[7586,1,""],[7587,1,""],[7588,1,""],[7589,1,""],[7590,1,""],[7591,1,""],[7592,1,""],[7593,1,""],[7594,1,""],[7595,1,""],[7596,1,""],[7597,1,""],[7598,1,""],[7599,1,""],[7600,1,""],[7601,1,""],[7602,1,""],[7603,1,""],[7604,1,""],[7605,1,""],[7606,1,""],[7607,1,""],[7608,1,""],[7609,1,""],[7610,1,""],[7611,1,"z"],[7612,1,""],[7613,1,""],[7614,1,""],[7615,1,""],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,""],[7681,2],[7682,1,""],[7683,2],[7684,1,""],[7685,2],[7686,1,""],[7687,2],[7688,1,""],[7689,2],[7690,1,""],[7691,2],[7692,1,""],[7693,2],[7694,1,""],[7695,2],[7696,1,""],[7697,2],[7698,1,""],[7699,2],[7700,1,""],[7701,2],[7702,1,""],[7703,2],[7704,1,""],[7705,2],[7706,1,""],[7707,2],[7708,1,""],[7709,2],[7710,1,""],[7711,2],[7712,1,""],[7713,2],[7714,1,""],[7715,2],[7716,1,""],[7717,2],[7718,1,""],[7719,2],[7720,1,""],[7721,2],[7722,1,""],[7723,2],[7724,1,""],[7725,2],[7726,1,""],[7727,2],[7728,1,""],[7729,2],[7730,1,""],[7731,2],[7732,1,""],[7733,2],[7734,1,""],[7735,2],[7736,1,""],[7737,2],[7738,1,""],[7739,2],[7740,1,""],[7741,2],[7742,1,""],[7743,2],[7744,1,""],[7745,2],[7746,1,""],[7747,2],[7748,1,""],[7749,2],[7750,1,""],[7751,2],[7752,1,""],[7753,2],[7754,1,""],[7755,2],[7756,1,""],[7757,2],[7758,1,""],[7759,2],[7760,1,""],[7761,2],[7762,1,""],[7763,2],[7764,1,""],[7765,2],[7766,1,""],[7767,2],[7768,1,""],[7769,2],[7770,1,""],[7771,2],[7772,1,""],[7773,2],[7774,1,""],[7775,2],[7776,1,""],[7777,2],[7778,1,""],[7779,2],[7780,1,""],[7781,2],[7782,1,""],[7783,2],[7784,1,""],[7785,2],[7786,1,""],[7787,2],[7788,1,""],[7789,2],[7790,1,""],[7791,2],[7792,1,""],[7793,2],[7794,1,""],[7795,2],[7796,1,""],[7797,2],[7798,1,""],[7799,2],[7800,1,""],[7801,2],[7802,1,""],[7803,2],[7804,1,""],[7805,2],[7806,1,""],[7807,2],[7808,1,""],[7809,2],[7810,1,""],[7811,2],[7812,1,""],[7813,2],[7814,1,""],[7815,2],[7816,1,""],[7817,2],[7818,1,""],[7819,2],[7820,1,""],[7821,2],[7822,1,""],[7823,2],[7824,1,""],[7825,2],[7826,1,""],[7827,2],[7828,1,""],[[7829,7833],2],[7834,1,"a"],[7835,1,""],[[7836,7837],2],[7838,1,""],[7839,2],[7840,1,""],[7841,2],[7842,1,""],[7843,2],[7844,1,""],[7845,2],[7846,1,""],[7847,2],[7848,1,""],[7849,2],[7850,1,""],[7851,2],[7852,1,""],[7853,2],[7854,1,""],[7855,2],[7856,1,""],[7857,2],[7858,1,""],[7859,2],[7860,1,""],[7861,2],[7862,1,""],[7863,2],[7864,1,""],[7865,2],[7866,1,""],[7867,2],[7868,1,""],[7869,2],[7870,1,""],[7871,2],[7872,1,""],[7873,2],[7874,1,""],[7875,2],[7876,1,""],[7877,2],[7878,1,""],[7879,2],[7880,1,""],[7881,2],[7882,1,""],[7883,2],[7884,1,""],[7885,2],[7886,1,""],[7887,2],[7888,1,""],[7889,2],[7890,1,""],[7891,2],[7892,1,""],[7893,2],[7894,1,""],[7895,2],[7896,1,""],[7897,2],[7898,1,""],[7899,2],[7900,1,""],[7901,2],[7902,1,""],[7903,2],[7904,1,""],[7905,2],[7906,1,""],[7907,2],[7908,1,""],[7909,2],[7910,1,""],[7911,2],[7912,1,""],[7913,2],[7914,1,""],[7915,2],[7916,1,""],[7917,2],[7918,1,""],[7919,2],[7920,1,""],[7921,2],[7922,1,""],[7923,2],[7924,1,""],[7925,2],[7926,1,""],[7927,2],[7928,1,""],[7929,2],[7930,1,""],[7931,2],[7932,1,""],[7933,2],[7934,1,""],[7935,2],[[7936,7943],2],[7944,1,""],[7945,1,""],[7946,1,""],[7947,1,""],[7948,1,""],[7949,1,""],[7950,1,""],[7951,1,""],[[7952,7957],2],[[7958,7959],3],[7960,1,""],[7961,1,""],[7962,1,""],[7963,1,""],[7964,1,""],[7965,1,""],[[7966,7967],3],[[7968,7975],2],[7976,1,""],[7977,1,""],[7978,1,""],[7979,1,""],[7980,1,""],[7981,1,""],[7982,1,""],[7983,1,""],[[7984,7991],2],[7992,1,""],[7993,1,""],[7994,1,""],[7995,1,""],[7996,1,""],[7997,1,""],[7998,1,""],[7999,1,""],[[8000,8005],2],[[8006,8007],3],[8008,1,""],[8009,1,""],[8010,1,""],[8011,1,""],[8012,1,""],[8013,1,""],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,""],[8026,3],[8027,1,""],[8028,3],[8029,1,""],[8030,3],[8031,1,""],[[8032,8039],2],[8040,1,""],[8041,1,""],[8042,1,""],[8043,1,""],[8044,1,""],[8045,1,""],[8046,1,""],[8047,1,""],[8048,2],[8049,1,""],[8050,2],[8051,1,""],[8052,2],[8053,1,""],[8054,2],[8055,1,""],[8056,2],[8057,1,""],[8058,2],[8059,1,""],[8060,2],[8061,1,""],[[8062,8063],3],[8064,1,""],[8065,1,""],[8066,1,""],[8067,1,""],[8068,1,""],[8069,1,""],[8070,1,""],[8071,1,""],[8072,1,""],[8073,1,""],[8074,1,""],[8075,1,""],[8076,1,""],[8077,1,""],[8078,1,""],[8079,1,""],[8080,1,""],[8081,1,""],[8082,1,""],[8083,1,""],[8084,1,""],[8085,1,""],[8086,1,""],[8087,1,""],[8088,1,""],[8089,1,""],[8090,1,""],[8091,1,""],[8092,1,""],[8093,1,""],[8094,1,""],[8095,1,""],[8096,1,""],[8097,1,""],[8098,1,""],[8099,1,""],[8100,1,""],[8101,1,""],[8102,1,""],[8103,1,""],[8104,1,""],[8105,1,""],[8106,1,""],[8107,1,""],[8108,1,""],[8109,1,""],[8110,1,""],[8111,1,""],[[8112,8113],2],[8114,1,""],[8115,1,""],[8116,1,""],[8117,3],[8118,2],[8119,1,""],[8120,1,""],[8121,1,""],[8122,1,""],[8123,1,""],[8124,1,""],[8125,1," "],[8126,1,""],[8127,1," "],[8128,1," "],[8129,1," "],[8130,1,""],[8131,1,""],[8132,1,""],[8133,3],[8134,2],[8135,1,""],[8136,1,""],[8137,1,""],[8138,1,""],[8139,1,""],[8140,1,""],[8141,1," "],[8142,1," "],[8143,1," "],[[8144,8146],2],[8147,1,""],[[8148,8149],3],[[8150,8151],2],[8152,1,""],[8153,1,""],[8154,1,""],[8155,1,""],[8156,3],[8157,1," "],[8158,1," "],[8159,1," "],[[8160,8162],2],[8163,1,""],[[8164,8167],2],[8168,1,""],[8169,1,""],[8170,1,""],[8171,1,""],[8172,1,""],[8173,1," "],[8174,1," "],[8175,1,"`"],[[8176,8177],3],[8178,1,""],[8179,1,""],[8180,1,""],[8181,3],[8182,2],[8183,1,""],[8184,1,""],[8185,1,""],[8186,1,""],[8187,1,""],[8188,1,""],[8189,1," "],[8190,1," "],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,""],[[8210,8214],2],[8215,1," "],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,""],[8244,1,""],[8245,2],[8246,1,""],[8247,1,""],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," "],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,""],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,""],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,""],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,""],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,""],[8456,2],[8457,1,"f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,""],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,""],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,""],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,""],[8499,1,"m"],[8500,1,"o"],[8501,1,""],[8502,1,""],[8503,1,""],[8504,1,""],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,""],[[8509,8510],1,""],[8511,1,""],[8512,1,""],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"17"],[8529,1,"19"],[8530,1,"110"],[8531,1,"13"],[8532,1,"23"],[8533,1,"15"],[8534,1,"25"],[8535,1,"35"],[8536,1,"45"],[8537,1,"16"],[8538,1,"56"],[8539,1,"18"],[8540,1,"38"],[8541,1,"58"],[8542,1,"78"],[8543,1,"1"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,""],[8580,2],[[8581,8584],2],[8585,1,"03"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,""],[8749,1,""],[8750,2],[8751,1,""],[8752,1,""],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9000],2],[9001,1,""],[9002,1,""],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,""],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,""],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,""],[11265,1,""],[11266,1,""],[11267,1,""],[11268,1,""],[11269,1,""],[11270,1,""],[11271,1,""],[11272,1,""],[11273,1,""],[11274,1,""],[11275,1,""],[11276,1,""],[11277,1,""],[11278,1,""],[11279,1,""],[11280,1,""],[11281,1,""],[11282,1,""],[11283,1,""],[11284,1,""],[11285,1,""],[11286,1,""],[11287,1,""],[11288,1,""],[11289,1,""],[11290,1,""],[11291,1,""],[11292,1,""],[11293,1,""],[11294,1,""],[11295,1,""],[11296,1,""],[11297,1,""],[11298,1,""],[11299,1,""],[11300,1,""],[11301,1,""],[11302,1,""],[11303,1,""],[11304,1,""],[11305,1,""],[11306,1,""],[11307,1,""],[11308,1,""],[11309,1,""],[11310,1,""],[11311,1,""],[[11312,11358],2],[11359,2],[11360,1,""],[11361,2],[11362,1,""],[11363,1,""],[11364,1,""],[[11365,11366],2],[11367,1,""],[11368,2],[11369,1,""],[11370,2],[11371,1,""],[11372,2],[11373,1,""],[11374,1,""],[11375,1,""],[11376,1,""],[11377,2],[11378,1,""],[11379,2],[11380,2],[11381,1,""],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,""],[11391,1,""],[11392,1,""],[11393,2],[11394,1,""],[11395,2],[11396,1,""],[11397,2],[11398,1,""],[11399,2],[11400,1,""],[11401,2],[11402,1,""],[11403,2],[11404,1,""],[11405,2],[11406,1,""],[11407,2],[11408,1,""],[11409,2],[11410,1,""],[11411,2],[11412,1,""],[11413,2],[11414,1,""],[11415,2],[11416,1,""],[11417,2],[11418,1,""],[11419,2],[11420,1,""],[11421,2],[11422,1,""],[11423,2],[11424,1,""],[11425,2],[11426,1,""],[11427,2],[11428,1,""],[11429,2],[11430,1,""],[11431,2],[11432,1,""],[11433,2],[11434,1,""],[11435,2],[11436,1,""],[11437,2],[11438,1,""],[11439,2],[11440,1,""],[11441,2],[11442,1,""],[11443,2],[11444,1,""],[11445,2],[11446,1,""],[11447,2],[11448,1,""],[11449,2],[11450,1,""],[11451,2],[11452,1,""],[11453,2],[11454,1,""],[11455,2],[11456,1,""],[11457,2],[11458,1,""],[11459,2],[11460,1,""],[11461,2],[11462,1,""],[11463,2],[11464,1,""],[11465,2],[11466,1,""],[11467,2],[11468,1,""],[11469,2],[11470,1,""],[11471,2],[11472,1,""],[11473,2],[11474,1,""],[11475,2],[11476,1,""],[11477,2],[11478,1,""],[11479,2],[11480,1,""],[11481,2],[11482,1,""],[11483,2],[11484,1,""],[11485,2],[11486,1,""],[11487,2],[11488,1,""],[11489,2],[11490,1,""],[[11491,11492],2],[[11493,11498],2],[11499,1,""],[11500,2],[11501,1,""],[[11502,11505],2],[11506,1,""],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,""],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,""],[[11936,12018],2],[12019,1,""],[[12020,12031],3],[12032,1,""],[12033,1,""],[12034,1,""],[12035,1,""],[12036,1,""],[12037,1,""],[12038,1,""],[12039,1,""],[12040,1,""],[12041,1,""],[12042,1,""],[12043,1,""],[12044,1,""],[12045,1,""],[12046,1,""],[12047,1,""],[12048,1,""],[12049,1,""],[12050,1,""],[12051,1,""],[12052,1,""],[12053,1,""],[12054,1,""],[12055,1,""],[12056,1,""],[12057,1,""],[12058,1,""],[12059,1,""],[12060,1,""],[12061,1,""],[12062,1,""],[12063,1,""],[12064,1,""],[12065,1,""],[12066,1,""],[12067,1,""],[12068,1,""],[12069,1,""],[12070,1,""],[12071,1,""],[12072,1,""],[12073,1,""],[12074,1,""],[12075,1,""],[12076,1,""],[12077,1,""],[12078,1,""],[12079,1,""],[12080,1,""],[12081,1,""],[12082,1,""],[12083,1,""],[12084,1,""],[12085,1,""],[12086,1,""],[12087,1,""],[12088,1,""],[12089,1,""],[12090,1,""],[12091,1,""],[12092,1,""],[12093,1,""],[12094,1,""],[12095,1,""],[12096,1,""],[12097,1,""],[12098,1,""],[12099,1,""],[12100,1,""],[12101,1,""],[12102,1,""],[12103,1,""],[12104,1,""],[12105,1,""],[12106,1,""],[12107,1,""],[12108,1,""],[12109,1,""],[12110,1,""],[12111,1,""],[12112,1,""],[12113,1,""],[12114,1,""],[12115,1,""],[12116,1,""],[12117,1,""],[12118,1,""],[12119,1,""],[12120,1,""],[12121,1,""],[12122,1,""],[12123,1,""],[12124,1,""],[12125,1,""],[12126,1,""],[12127,1,""],[12128,1,""],[12129,1,""],[12130,1,""],[12131,1,""],[12132,1,""],[12133,1,""],[12134,1,""],[12135,1,""],[12136,1,""],[12137,1,""],[12138,1,""],[12139,1,""],[12140,1,""],[12141,1,""],[12142,1,""],[12143,1,""],[12144,1,""],[12145,1,""],[12146,1,""],[12147,1,""],[12148,1,""],[12149,1,""],[12150,1,""],[12151,1,""],[12152,1,""],[12153,1,""],[12154,1,""],[12155,1,""],[12156,1,""],[12157,1,""],[12158,1,""],[12159,1,""],[12160,1,""],[12161,1,""],[12162,1,""],[12163,1,""],[12164,1,""],[12165,1,""],[12166,1,""],[12167,1,""],[12168,1,""],[12169,1,""],[12170,1,""],[12171,1,""],[12172,1,""],[12173,1,""],[12174,1,""],[12175,1,""],[12176,1,""],[12177,1,""],[12178,1,""],[12179,1,""],[12180,1,""],[12181,1,""],[12182,1,""],[12183,1,""],[12184,1,""],[12185,1,""],[12186,1,""],[12187,1,""],[12188,1,""],[12189,1,""],[12190,1,""],[12191,1,""],[12192,1,""],[12193,1,""],[12194,1,""],[12195,1,""],[12196,1,""],[12197,1,""],[12198,1,""],[12199,1,""],[12200,1,""],[12201,1,""],[12202,1,""],[12203,1,""],[12204,1,""],[12205,1,""],[12206,1,""],[12207,1,""],[12208,1,""],[12209,1,""],[12210,1,""],[12211,1,""],[12212,1,""],[12213,1,""],[12214,1,""],[12215,1,""],[12216,1,""],[12217,1,""],[12218,1,""],[12219,1,""],[12220,1,""],[12221,1,""],[12222,1,""],[12223,1,""],[12224,1,""],[12225,1,""],[12226,1,""],[12227,1,""],[12228,1,""],[12229,1,""],[12230,1,""],[12231,1,""],[12232,1,""],[12233,1,""],[12234,1,""],[12235,1,""],[12236,1,""],[12237,1,""],[12238,1,""],[12239,1,""],[12240,1,""],[12241,1,""],[12242,1,""],[12243,1,""],[12244,1,""],[12245,1,""],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,""],[12343,2],[12344,1,""],[12345,1,""],[12346,1,""],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," "],[12444,1," "],[[12445,12446],2],[12447,1,""],[12448,2],[[12449,12542],2],[12543,1,""],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,""],[12594,1,""],[12595,1,""],[12596,1,""],[12597,1,""],[12598,1,""],[12599,1,""],[12600,1,""],[12601,1,""],[12602,1,""],[12603,1,""],[12604,1,""],[12605,1,""],[12606,1,""],[12607,1,""],[12608,1,""],[12609,1,""],[12610,1,""],[12611,1,""],[12612,1,""],[12613,1,""],[12614,1,""],[12615,1,""],[12616,1,""],[12617,1,""],[12618,1,""],[12619,1,""],[12620,1,""],[12621,1,""],[12622,1,""],[12623,1,""],[12624,1,""],[12625,1,""],[12626,1,""],[12627,1,""],[12628,1,""],[12629,1,""],[12630,1,""],[12631,1,""],[12632,1,""],[12633,1,""],[12634,1,""],[12635,1,""],[12636,1,""],[12637,1,""],[12638,1,""],[12639,1,""],[12640,1,""],[12641,1,""],[12642,1,""],[12643,1,""],[12644,7],[12645,1,""],[12646,1,""],[12647,1,""],[12648,1,""],[12649,1,""],[12650,1,""],[12651,1,""],[12652,1,""],[12653,1,""],[12654,1,""],[12655,1,""],[12656,1,""],[12657,1,""],[12658,1,""],[12659,1,""],[12660,1,""],[12661,1,""],[12662,1,""],[12663,1,""],[12664,1,""],[12665,1,""],[12666,1,""],[12667,1,""],[12668,1,""],[12669,1,""],[12670,1,""],[12671,1,""],[12672,1,""],[12673,1,""],[12674,1,""],[12675,1,""],[12676,1,""],[12677,1,""],[12678,1,""],[12679,1,""],[12680,1,""],[12681,1,""],[12682,1,""],[12683,1,""],[12684,1,""],[12685,1,""],[12686,1,""],[12687,3],[[12688,12689],2],[12690,1,""],[12691,1,""],[12692,1,""],[12693,1,""],[12694,1,""],[12695,1,""],[12696,1,""],[12697,1,""],[12698,1,""],[12699,1,""],[12700,1,""],[12701,1,""],[12702,1,""],[12703,1,""],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"()"],[12801,1,"()"],[12802,1,"()"],[12803,1,"()"],[12804,1,"()"],[12805,1,"()"],[12806,1,"()"],[12807,1,"()"],[12808,1,"()"],[12809,1,"()"],[12810,1,"()"],[12811,1,"()"],[12812,1,"()"],[12813,1,"()"],[12814,1,"()"],[12815,1,"()"],[12816,1,"()"],[12817,1,"()"],[12818,1,"()"],[12819,1,"()"],[12820,1,"()"],[12821,1,"()"],[12822,1,"()"],[12823,1,"()"],[12824,1,"()"],[12825,1,"()"],[12826,1,"()"],[12827,1,"()"],[12828,1,"()"],[12829,1,"()"],[12830,1,"()"],[12831,3],[12832,1,"()"],[12833,1,"()"],[12834,1,"()"],[12835,1,"()"],[12836,1,"()"],[12837,1,"()"],[12838,1,"()"],[12839,1,"()"],[12840,1,"()"],[12841,1,"()"],[12842,1,"()"],[12843,1,"()"],[12844,1,"()"],[12845,1,"()"],[12846,1,"()"],[12847,1,"()"],[12848,1,"()"],[12849,1,"()"],[12850,1,"()"],[12851,1,"()"],[12852,1,"()"],[12853,1,"()"],[12854,1,"()"],[12855,1,"()"],[12856,1,"()"],[12857,1,"()"],[12858,1,"()"],[12859,1,"()"],[12860,1,"()"],[12861,1,"()"],[12862,1,"()"],[12863,1,"()"],[12864,1,"()"],[12865,1,"()"],[12866,1,"()"],[12867,1,"()"],[12868,1,""],[12869,1,""],[12870,1,""],[12871,1,""],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,""],[12897,1,""],[12898,1,""],[12899,1,""],[12900,1,""],[12901,1,""],[12902,1,""],[12903,1,""],[12904,1,""],[12905,1,""],[12906,1,""],[12907,1,""],[12908,1,""],[12909,1,""],[12910,1,""],[12911,1,""],[12912,1,""],[12913,1,""],[12914,1,""],[12915,1,""],[12916,1,""],[12917,1,""],[12918,1,""],[12919,1,""],[12920,1,""],[12921,1,""],[12922,1,""],[12923,1,""],[12924,1,""],[12925,1,""],[12926,1,""],[12927,2],[12928,1,""],[12929,1,""],[12930,1,""],[12931,1,""],[12932,1,""],[12933,1,""],[12934,1,""],[12935,1,""],[12936,1,""],[12937,1,""],[12938,1,""],[12939,1,""],[12940,1,""],[12941,1,""],[12942,1,""],[12943,1,""],[12944,1,""],[12945,1,""],[12946,1,""],[12947,1,""],[12948,1,""],[12949,1,""],[12950,1,""],[12951,1,""],[12952,1,""],[12953,1,""],[12954,1,""],[12955,1,""],[12956,1,""],[12957,1,""],[12958,1,""],[12959,1,""],[12960,1,""],[12961,1,""],[12962,1,""],[12963,1,""],[12964,1,""],[12965,1,""],[12966,1,""],[12967,1,""],[12968,1,""],[12969,1,""],[12970,1,""],[12971,1,""],[12972,1,""],[12973,1,""],[12974,1,""],[12975,1,""],[12976,1,""],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1"],[12993,1,"2"],[12994,1,"3"],[12995,1,"4"],[12996,1,"5"],[12997,1,"6"],[12998,1,"7"],[12999,1,"8"],[13000,1,"9"],[13001,1,"10"],[13002,1,"11"],[13003,1,"12"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,""],[13009,1,""],[13010,1,""],[13011,1,""],[13012,1,""],[13013,1,""],[13014,1,""],[13015,1,""],[13016,1,""],[13017,1,""],[13018,1,""],[13019,1,""],[13020,1,""],[13021,1,""],[13022,1,""],[13023,1,""],[13024,1,""],[13025,1,""],[13026,1,""],[13027,1,""],[13028,1,""],[13029,1,""],[13030,1,""],[13031,1,""],[13032,1,""],[13033,1,""],[13034,1,""],[13035,1,""],[13036,1,""],[13037,1,""],[13038,1,""],[13039,1,""],[13040,1,""],[13041,1,""],[13042,1,""],[13043,1,""],[13044,1,""],[13045,1,""],[13046,1,""],[13047,1,""],[13048,1,""],[13049,1,""],[13050,1,""],[13051,1,""],[13052,1,""],[13053,1,""],[13054,1,""],[13055,1,""],[13056,1,""],[13057,1,""],[13058,1,""],[13059,1,""],[13060,1,""],[13061,1,""],[13062,1,""],[13063,1,""],[13064,1,""],[13065,1,""],[13066,1,""],[13067,1,""],[13068,1,""],[13069,1,""],[13070,1,""],[13071,1,""],[13072,1,""],[13073,1,""],[13074,1,""],[13075,1,""],[13076,1,""],[13077,1,""],[13078,1,""],[13079,1,""],[13080,1,""],[13081,1,""],[13082,1,""],[13083,1,""],[13084,1,""],[13085,1,""],[13086,1,""],[13087,1,""],[13088,1,""],[13089,1,""],[13090,1,""],[13091,1,""],[13092,1,""],[13093,1,""],[13094,1,""],[13095,1,""],[13096,1,""],[13097,1,""],[13098,1,""],[13099,1,""],[13100,1,""],[13101,1,""],[13102,1,""],[13103,1,""],[13104,1,""],[13105,1,""],[13106,1,""],[13107,1,""],[13108,1,""],[13109,1,""],[13110,1,""],[13111,1,""],[13112,1,""],[13113,1,""],[13114,1,""],[13115,1,""],[13116,1,""],[13117,1,""],[13118,1,""],[13119,1,""],[13120,1,""],[13121,1,""],[13122,1,""],[13123,1,""],[13124,1,""],[13125,1,""],[13126,1,""],[13127,1,""],[13128,1,""],[13129,1,""],[13130,1,""],[13131,1,""],[13132,1,""],[13133,1,""],[13134,1,""],[13135,1,""],[13136,1,""],[13137,1,""],[13138,1,""],[13139,1,""],[13140,1,""],[13141,1,""],[13142,1,""],[13143,1,""],[13144,1,"0"],[13145,1,"1"],[13146,1,"2"],[13147,1,"3"],[13148,1,"4"],[13149,1,"5"],[13150,1,"6"],[13151,1,"7"],[13152,1,"8"],[13153,1,"9"],[13154,1,"10"],[13155,1,"11"],[13156,1,"12"],[13157,1,"13"],[13158,1,"14"],[13159,1,"15"],[13160,1,"16"],[13161,1,"17"],[13162,1,"18"],[13163,1,"19"],[13164,1,"20"],[13165,1,"21"],[13166,1,"22"],[13167,1,"23"],[13168,1,"24"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,""],[13180,1,""],[13181,1,""],[13182,1,""],[13183,1,""],[13184,1,"pa"],[13185,1,"na"],[13186,1,"a"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"f"],[13197,1,"g"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"l"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"m"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"ms"],[13224,1,"ms2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rads"],[13231,1,"rads2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"s"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"v"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"w"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k"],[13249,1,"m"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"ckg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"vm"],[13279,1,"am"],[13280,1,"1"],[13281,1,"2"],[13282,1,"3"],[13283,1,"4"],[13284,1,"5"],[13285,1,"6"],[13286,1,"7"],[13287,1,"8"],[13288,1,"9"],[13289,1,"10"],[13290,1,"11"],[13291,1,"12"],[13292,1,"13"],[13293,1,"14"],[13294,1,"15"],[13295,1,"16"],[13296,1,"17"],[13297,1,"18"],[13298,1,"19"],[13299,1,"20"],[13300,1,"21"],[13301,1,"22"],[13302,1,"23"],[13303,1,"24"],[13304,1,"25"],[13305,1,"26"],[13306,1,"27"],[13307,1,"28"],[13308,1,"29"],[13309,1,"30"],[13310,1,"31"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,""],[42561,2],[42562,1,""],[42563,2],[42564,1,""],[42565,2],[42566,1,""],[42567,2],[42568,1,""],[42569,2],[42570,1,""],[42571,2],[42572,1,""],[42573,2],[42574,1,""],[42575,2],[42576,1,""],[42577,2],[42578,1,""],[42579,2],[42580,1,""],[42581,2],[42582,1,""],[42583,2],[42584,1,""],[42585,2],[42586,1,""],[42587,2],[42588,1,""],[42589,2],[42590,1,""],[42591,2],[42592,1,""],[42593,2],[42594,1,""],[42595,2],[42596,1,""],[42597,2],[42598,1,""],[42599,2],[42600,1,""],[42601,2],[42602,1,""],[42603,2],[42604,1,""],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,""],[42625,2],[42626,1,""],[42627,2],[42628,1,""],[42629,2],[42630,1,""],[42631,2],[42632,1,""],[42633,2],[42634,1,""],[42635,2],[42636,1,""],[42637,2],[42638,1,""],[42639,2],[42640,1,""],[42641,2],[42642,1,""],[42643,2],[42644,1,""],[42645,2],[42646,1,""],[42647,2],[42648,1,""],[42649,2],[42650,1,""],[42651,2],[42652,1,""],[42653,1,""],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,""],[42787,2],[42788,1,""],[42789,2],[42790,1,""],[42791,2],[42792,1,""],[42793,2],[42794,1,""],[42795,2],[42796,1,""],[42797,2],[42798,1,""],[[42799,42801],2],[42802,1,""],[42803,2],[42804,1,""],[42805,2],[42806,1,""],[42807,2],[42808,1,""],[42809,2],[42810,1,""],[42811,2],[42812,1,""],[42813,2],[42814,1,""],[42815,2],[42816,1,""],[42817,2],[42818,1,""],[42819,2],[42820,1,""],[42821,2],[42822,1,""],[42823,2],[42824,1,""],[42825,2],[42826,1,""],[42827,2],[42828,1,""],[42829,2],[42830,1,""],[42831,2],[42832,1,""],[42833,2],[42834,1,""],[42835,2],[42836,1,""],[42837,2],[42838,1,""],[42839,2],[42840,1,""],[42841,2],[42842,1,""],[42843,2],[42844,1,""],[42845,2],[42846,1,""],[42847,2],[42848,1,""],[42849,2],[42850,1,""],[42851,2],[42852,1,""],[42853,2],[42854,1,""],[42855,2],[42856,1,""],[42857,2],[42858,1,""],[42859,2],[42860,1,""],[42861,2],[42862,1,""],[42863,2],[42864,1,""],[[42865,42872],2],[42873,1,""],[42874,2],[42875,1,""],[42876,2],[42877,1,""],[42878,1,""],[42879,2],[42880,1,""],[42881,2],[42882,1,""],[42883,2],[42884,1,""],[42885,2],[42886,1,""],[[42887,42888],2],[[42889,42890],2],[42891,1,""],[42892,2],[42893,1,""],[42894,2],[42895,2],[42896,1,""],[42897,2],[42898,1,""],[42899,2],[[42900,42901],2],[42902,1,""],[42903,2],[42904,1,""],[42905,2],[42906,1,""],[42907,2],[42908,1,""],[42909,2],[42910,1,""],[42911,2],[42912,1,""],[42913,2],[42914,1,""],[42915,2],[42916,1,""],[42917,2],[42918,1,""],[42919,2],[42920,1,""],[42921,2],[42922,1,""],[42923,1,""],[42924,1,""],[42925,1,""],[42926,1,""],[42927,2],[42928,1,""],[42929,1,""],[42930,1,""],[42931,1,""],[42932,1,""],[42933,2],[42934,1,""],[42935,2],[42936,1,""],[42937,2],[42938,1,""],[42939,2],[42940,1,""],[42941,2],[42942,1,""],[42943,2],[42944,1,""],[42945,2],[42946,1,""],[42947,2],[42948,1,""],[42949,1,""],[42950,1,""],[42951,1,""],[42952,2],[42953,1,""],[42954,2],[42955,1,""],[42956,1,""],[42957,2],[[42958,42959],3],[42960,1,""],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,""],[42967,2],[42968,1,""],[42969,2],[42970,1,""],[42971,2],[42972,1,""],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,""],[42998,2],[42999,2],[43000,1,""],[43001,1,""],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,""],[43869,1,""],[43870,1,""],[43871,1,""],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,""],[[43882,43883],2],[[43884,43887],3],[43888,1,""],[43889,1,""],[43890,1,""],[43891,1,""],[43892,1,""],[43893,1,""],[43894,1,""],[43895,1,""],[43896,1,""],[43897,1,""],[43898,1,""],[43899,1,""],[43900,1,""],[43901,1,""],[43902,1,""],[43903,1,""],[43904,1,""],[43905,1,""],[43906,1,""],[43907,1,""],[43908,1,""],[43909,1,""],[43910,1,""],[43911,1,""],[43912,1,""],[43913,1,""],[43914,1,""],[43915,1,""],[43916,1,""],[43917,1,""],[43918,1,""],[43919,1,""],[43920,1,""],[43921,1,""],[43922,1,""],[43923,1,""],[43924,1,""],[43925,1,""],[43926,1,""],[43927,1,""],[43928,1,""],[43929,1,""],[43930,1,""],[43931,1,""],[43932,1,""],[43933,1,""],[43934,1,""],[43935,1,""],[43936,1,""],[43937,1,""],[43938,1,""],[43939,1,""],[43940,1,""],[43941,1,""],[43942,1,""],[43943,1,""],[43944,1,""],[43945,1,""],[43946,1,""],[43947,1,""],[43948,1,""],[43949,1,""],[43950,1,""],[43951,1,""],[43952,1,""],[43953,1,""],[43954,1,""],[43955,1,""],[43956,1,""],[43957,1,""],[43958,1,""],[43959,1,""],[43960,1,""],[43961,1,""],[43962,1,""],[43963,1,""],[43964,1,""],[43965,1,""],[43966,1,""],[43967,1,""],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,""],[63745,1,""],[63746,1,""],[63747,1,""],[63748,1,""],[63749,1,""],[63750,1,""],[[63751,63752],1,""],[63753,1,""],[63754,1,""],[63755,1,""],[63756,1,""],[63757,1,""],[63758,1,""],[63759,1,""],[63760,1,""],[63761,1,""],[63762,1,""],[63763,1,""],[63764,1,""],[63765,1,""],[63766,1,""],[63767,1,""],[63768,1,""],[63769,1,""],[63770,1,""],[63771,1,""],[63772,1,""],[63773,1,""],[63774,1,""],[63775,1,""],[63776,1,""],[63777,1,""],[63778,1,""],[63779,1,""],[63780,1,""],[63781,1,""],[63782,1,""],[63783,1,""],[63784,1,""],[63785,1,""],[63786,1,""],[63787,1,""],[63788,1,""],[63789,1,""],[63790,1,""],[63791,1,""],[63792,1,""],[63793,1,""],[63794,1,""],[63795,1,""],[63796,1,""],[63797,1,""],[63798,1,""],[63799,1,""],[63800,1,""],[63801,1,""],[63802,1,""],[63803,1,""],[63804,1,""],[63805,1,""],[63806,1,""],[63807,1,""],[63808,1,""],[63809,1,""],[63810,1,""],[63811,1,""],[63812,1,""],[63813,1,""],[63814,1,""],[63815,1,""],[63816,1,""],[63817,1,""],[63818,1,""],[63819,1,""],[63820,1,""],[63821,1,""],[63822,1,""],[63823,1,""],[63824,1,""],[63825,1,""],[63826,1,""],[63827,1,""],[63828,1,""],[63829,1,""],[63830,1,""],[63831,1,""],[63832,1,""],[63833,1,""],[63834,1,""],[63835,1,""],[63836,1,""],[63837,1,""],[63838,1,""],[63839,1,""],[63840,1,""],[63841,1,""],[63842,1,""],[63843,1,""],[63844,1,""],[63845,1,""],[63846,1,""],[63847,1,""],[63848,1,""],[63849,1,""],[63850,1,""],[63851,1,""],[63852,1,""],[63853,1,""],[63854,1,""],[63855,1,""],[63856,1,""],[63857,1,""],[63858,1,""],[63859,1,""],[63860,1,""],[63861,1,""],[63862,1,""],[63863,1,""],[63864,1,""],[63865,1,""],[63866,1,""],[63867,1,""],[63868,1,""],[63869,1,""],[63870,1,""],[63871,1,""],[63872,1,""],[63873,1,""],[63874,1,""],[63875,1,""],[63876,1,""],[63877,1,""],[63878,1,""],[63879,1,""],[63880,1,""],[63881,1,""],[63882,1,""],[63883,1,""],[63884,1,""],[63885,1,""],[63886,1,""],[63887,1,""],[63888,1,""],[63889,1,""],[63890,1,""],[63891,1,""],[63892,1,""],[63893,1,""],[63894,1,""],[63895,1,""],[63896,1,""],[63897,1,""],[63898,1,""],[63899,1,""],[63900,1,""],[63901,1,""],[63902,1,""],[63903,1,""],[63904,1,""],[63905,1,""],[63906,1,""],[63907,1,""],[63908,1,""],[63909,1,""],[63910,1,""],[63911,1,""],[63912,1,""],[63913,1,""],[63914,1,""],[63915,1,""],[63916,1,""],[63917,1,""],[63918,1,""],[63919,1,""],[63920,1,""],[63921,1,""],[63922,1,""],[63923,1,""],[63924,1,""],[63925,1,""],[63926,1,""],[63927,1,""],[63928,1,""],[63929,1,""],[63930,1,""],[63931,1,""],[63932,1,""],[63933,1,""],[63934,1,""],[63935,1,""],[63936,1,""],[63937,1,""],[63938,1,""],[63939,1,""],[63940,1,""],[63941,1,""],[63942,1,""],[63943,1,""],[63944,1,""],[63945,1,""],[63946,1,""],[63947,1,""],[63948,1,""],[63949,1,""],[63950,1,""],[63951,1,""],[63952,1,""],[63953,1,""],[63954,1,""],[63955,1,""],[63956,1,""],[63957,1,""],[63958,1,""],[63959,1,""],[63960,1,""],[63961,1,""],[63962,1,""],[63963,1,""],[63964,1,""],[63965,1,""],[63966,1,""],[63967,1,""],[63968,1,""],[63969,1,""],[63970,1,""],[63971,1,""],[63972,1,""],[63973,1,""],[63974,1,""],[63975,1,""],[63976,1,""],[63977,1,""],[63978,1,""],[63979,1,""],[63980,1,""],[63981,1,""],[63982,1,""],[63983,1,""],[63984,1,""],[63985,1,""],[63986,1,""],[63987,1,""],[63988,1,""],[63989,1,""],[63990,1,""],[63991,1,""],[63992,1,""],[63993,1,""],[63994,1,""],[63995,1,""],[63996,1,""],[63997,1,""],[63998,1,""],[63999,1,""],[64000,1,""],[64001,1,""],[64002,1,""],[64003,1,""],[64004,1,""],[64005,1,""],[64006,1,""],[64007,1,""],[64008,1,""],[64009,1,""],[64010,1,""],[64011,1,""],[64012,1,""],[64013,1,""],[[64014,64015],2],[64016,1,""],[64017,2],[64018,1,""],[[64019,64020],2],[64021,1,""],[64022,1,""],[64023,1,""],[64024,1,""],[64025,1,""],[64026,1,""],[64027,1,""],[64028,1,""],[64029,1,""],[64030,1,""],[64031,2],[64032,1,""],[64033,2],[64034,1,""],[[64035,64036],2],[64037,1,""],[64038,1,""],[[64039,64041],2],[64042,1,""],[64043,1,""],[64044,1,""],[64045,1,""],[64046,1,""],[64047,1,""],[64048,1,""],[64049,1,""],[64050,1,""],[64051,1,""],[64052,1,""],[64053,1,""],[64054,1,""],[64055,1,""],[64056,1,""],[64057,1,""],[64058,1,""],[64059,1,""],[64060,1,""],[64061,1,""],[64062,1,""],[64063,1,""],[64064,1,""],[64065,1,""],[64066,1,""],[64067,1,""],[64068,1,""],[64069,1,""],[64070,1,""],[64071,1,""],[64072,1,""],[64073,1,""],[64074,1,""],[64075,1,""],[64076,1,""],[64077,1,""],[64078,1,""],[64079,1,""],[64080,1,""],[64081,1,""],[64082,1,""],[64083,1,""],[64084,1,""],[64085,1,""],[64086,1,""],[64087,1,""],[64088,1,""],[64089,1,""],[64090,1,""],[64091,1,""],[64092,1,""],[[64093,64094],1,""],[64095,1,""],[64096,1,""],[64097,1,""],[64098,1,""],[64099,1,""],[64100,1,""],[64101,1,""],[64102,1,""],[64103,1,""],[64104,1,""],[64105,1,""],[64106,1,""],[64107,1,""],[64108,1,"\uD850\uDEEE"],[64109,1,""],[[64110,64111],3],[64112,1,""],[64113,1,""],[64114,1,""],[64115,1,""],[64116,1,""],[64117,1,""],[64118,1,""],[64119,1,""],[64120,1,""],[64121,1,""],[64122,1,""],[64123,1,""],[64124,1,""],[64125,1,""],[64126,1,""],[64127,1,""],[64128,1,""],[64129,1,""],[64130,1,""],[64131,1,""],[64132,1,""],[64133,1,""],[64134,1,""],[64135,1,""],[64136,1,""],[64137,1,""],[64138,1,""],[64139,1,""],[64140,1,""],[64141,1,""],[64142,1,""],[64143,1,""],[64144,1,""],[64145,1,""],[64146,1,""],[64147,1,""],[64148,1,""],[64149,1,""],[64150,1,""],[64151,1,""],[64152,1,""],[64153,1,""],[64154,1,""],[64155,1,""],[64156,1,""],[64157,1,""],[64158,1,""],[64159,1,""],[64160,1,""],[64161,1,""],[64162,1,""],[64163,1,""],[64164,1,""],[64165,1,""],[64166,1,""],[64167,1,""],[64168,1,""],[64169,1,""],[64170,1,""],[64171,1,""],[64172,1,""],[64173,1,""],[64174,1,""],[64175,1,""],[64176,1,""],[64177,1,""],[64178,1,""],[64179,1,""],[64180,1,""],[64181,1,""],[64182,1,""],[64183,1,""],[64184,1,""],[64185,1,""],[64186,1,""],[64187,1,""],[64188,1,""],[64189,1,""],[64190,1,""],[64191,1,""],[64192,1,""],[64193,1,""],[64194,1,""],[64195,1,""],[64196,1,""],[64197,1,""],[64198,1,""],[64199,1,""],[64200,1,""],[64201,1,""],[64202,1,""],[64203,1,""],[64204,1,""],[64205,1,""],[64206,1,""],[64207,1,"\uD84A\uDC4A"],[64208,1,"\uD84A\uDC44"],[64209,1,"\uD84C\uDFD5"],[64210,1,""],[64211,1,""],[64212,1,""],[64213,1,"\uD854\uDE49"],[64214,1,"\uD857\uDCD0"],[64215,1,"\uD85F\uDED3"],[64216,1,""],[64217,1,""],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,""],[64276,1,""],[64277,1,""],[64278,1,""],[64279,1,""],[[64280,64284],3],[64285,1,""],[64286,2],[64287,1,""],[64288,1,""],[64289,1,""],[64290,1,""],[64291,1,""],[64292,1,""],[64293,1,""],[64294,1,""],[64295,1,""],[64296,1,""],[64297,1,"+"],[64298,1,""],[64299,1,""],[64300,1,""],[64301,1,""],[64302,1,""],[64303,1,""],[64304,1,""],[64305,1,""],[64306,1,""],[64307,1,""],[64308,1,""],[64309,1,""],[64310,1,""],[64311,3],[64312,1,""],[64313,1,""],[64314,1,""],[64315,1,""],[64316,1,""],[64317,3],[64318,1,""],[64319,3],[64320,1,""],[64321,1,""],[64322,3],[64323,1,""],[64324,1,""],[64325,3],[64326,1,""],[64327,1,""],[64328,1,""],[64329,1,""],[64330,1,""],[64331,1,""],[64332,1,""],[64333,1,""],[64334,1,""],[64335,1,""],[[64336,64337],1,""],[[64338,64341],1,""],[[64342,64345],1,""],[[64346,64349],1,""],[[64350,64353],1,""],[[64354,64357],1,""],[[64358,64361],1,""],[[64362,64365],1,""],[[64366,64369],1,""],[[64370,64373],1,""],[[64374,64377],1,""],[[64378,64381],1,""],[[64382,64385],1,""],[[64386,64387],1,""],[[64388,64389],1,""],[[64390,64391],1,""],[[64392,64393],1,""],[[64394,64395],1,""],[[64396,64397],1,""],[[64398,64401],1,""],[[64402,64405],1,""],[[64406,64409],1,""],[[64410,64413],1,""],[[64414,64415],1,""],[[64416,64419],1,""],[[64420,64421],1,""],[[64422,64425],1,""],[[64426,64429],1,""],[[64430,64431],1,""],[[64432,64433],1,""],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,""],[[64471,64472],1,""],[[64473,64474],1,""],[[64475,64476],1,""],[64477,1,""],[[64478,64479],1,""],[[64480,64481],1,""],[[64482,64483],1,""],[[64484,64487],1,""],[[64488,64489],1,""],[[64490,64491],1,""],[[64492,64493],1,""],[[64494,64495],1,""],[[64496,64497],1,""],[[64498,64499],1,""],[[64500,64501],1,""],[[64502,64504],1,""],[[64505,64507],1,""],[[64508,64511],1,""],[64512,1,""],[64513,1,""],[64514,1,""],[64515,1,""],[64516,1,""],[64517,1,""],[64518,1,""],[64519,1,""],[64520,1,""],[64521,1,""],[64522,1,""],[64523,1,""],[64524,1,""],[64525,1,""],[64526,1,""],[64527,1,""],[64528,1,""],[64529,1,""],[64530,1,""],[64531,1,""],[64532,1,""],[64533,1,""],[64534,1,""],[64535,1,""],[64536,1,""],[64537,1,""],[64538,1,""],[64539,1,""],[64540,1,""],[64541,1,""],[64542,1,""],[64543,1,""],[64544,1,""],[64545,1,""],[64546,1,""],[64547,1,""],[64548,1,""],[64549,1,""],[64550,1,""],[64551,1,""],[64552,1,""],[64553,1,""],[64554,1,""],[64555,1,""],[64556,1,""],[64557,1,""],[64558,1,""],[64559,1,""],[64560,1,""],[64561,1,""],[64562,1,""],[64563,1,""],[64564,1,""],[64565,1,""],[64566,1,""],[64567,1,""],[64568,1,""],[64569,1,""],[64570,1,""],[64571,1,""],[64572,1,""],[64573,1,""],[64574,1,""],[64575,1,""],[64576,1,""],[64577,1,""],[64578,1,""],[64579,1,""],[64580,1,""],[64581,1,""],[64582,1,""],[64583,1,""],[64584,1,""],[64585,1,""],[64586,1,""],[64587,1,""],[64588,1,""],[64589,1,""],[64590,1,""],[64591,1,""],[64592,1,""],[64593,1,""],[64594,1,""],[64595,1,""],[64596,1,""],[64597,1,""],[64598,1,""],[64599,1,""],[64600,1,""],[64601,1,""],[64602,1,""],[64603,1,""],[64604,1,""],[64605,1,""],[64606,1," "],[64607,1," "],[64608,1," "],[64609,1," "],[64610,1," "],[64611,1," "],[64612,1,""],[64613,1,""],[64614,1,""],[64615,1,""],[64616,1,""],[64617,1,""],[64618,1,""],[64619,1,""],[64620,1,""],[64621,1,""],[64622,1,""],[64623,1,""],[64624,1,""],[64625,1,""],[64626,1,""],[64627,1,""],[64628,1,""],[64629,1,""],[64630,1,""],[64631,1,""],[64632,1,""],[64633,1,""],[64634,1,""],[64635,1,""],[64636,1,""],[64637,1,""],[64638,1,""],[64639,1,""],[64640,1,""],[64641,1,""],[64642,1,""],[64643,1,""],[64644,1,""],[64645,1,""],[64646,1,""],[64647,1,""],[64648,1,""],[64649,1,""],[64650,1,""],[64651,1,""],[64652,1,""],[64653,1,""],[64654,1,""],[64655,1,""],[64656,1,""],[64657,1,""],[64658,1,""],[64659,1,""],[64660,1,""],[64661,1,""],[64662,1,""],[64663,1,""],[64664,1,""],[64665,1,""],[64666,1,""],[64667,1,""],[64668,1,""],[64669,1,""],[64670,1,""],[64671,1,""],[64672,1,""],[64673,1,""],[64674,1,""],[64675,1,""],[64676,1,""],[64677,1,""],[64678,1,""],[64679,1,""],[64680,1,""],[64681,1,""],[64682,1,""],[64683,1,""],[64684,1,""],[64685,1,""],[64686,1,""],[64687,1,""],[64688,1,""],[64689,1,""],[64690,1,""],[64691,1,""],[64692,1,""],[64693,1,""],[64694,1,""],[64695,1,""],[64696,1,""],[64697,1,""],[64698,1,""],[64699,1,""],[64700,1,""],[64701,1,""],[64702,1,""],[64703,1,""],[64704,1,""],[64705,1,""],[64706,1,""],[64707,1,""],[64708,1,""],[64709,1,""],[64710,1,""],[64711,1,""],[64712,1,""],[64713,1,""],[64714,1,""],[64715,1,""],[64716,1,""],[64717,1,""],[64718,1,""],[64719,1,""],[64720,1,""],[64721,1,""],[64722,1,""],[64723,1,""],[64724,1,""],[64725,1,""],[64726,1,""],[64727,1,""],[64728,1,""],[64729,1,""],[64730,1,""],[64731,1,""],[64732,1,""],[64733,1,""],[64734,1,""],[64735,1,""],[64736,1,""],[64737,1,""],[64738,1,""],[64739,1,""],[64740,1,""],[64741,1,""],[64742,1,""],[64743,1,""],[64744,1,""],[64745,1,""],[64746,1,""],[64747,1,""],[64748,1,""],[64749,1,""],[64750,1,""],[64751,1,""],[64752,1,""],[64753,1,""],[64754,1,""],[64755,1,""],[64756,1,""],[64757,1,""],[64758,1,""],[64759,1,""],[64760,1,""],[64761,1,""],[64762,1,""],[64763,1,""],[64764,1,""],[64765,1,""],[64766,1,""],[64767,1,""],[64768,1,""],[64769,1,""],[64770,1,""],[64771,1,""],[64772,1,""],[64773,1,""],[64774,1,""],[64775,1,""],[64776,1,""],[64777,1,""],[64778,1,""],[64779,1,""],[64780,1,""],[64781,1,""],[64782,1,""],[64783,1,""],[64784,1,""],[64785,1,""],[64786,1,""],[64787,1,""],[64788,1,""],[64789,1,""],[64790,1,""],[64791,1,""],[64792,1,""],[64793,1,""],[64794,1,""],[64795,1,""],[64796,1,""],[64797,1,""],[64798,1,""],[64799,1,""],[64800,1,""],[64801,1,""],[64802,1,""],[64803,1,""],[64804,1,""],[64805,1,""],[64806,1,""],[64807,1,""],[64808,1,""],[64809,1,""],[64810,1,""],[64811,1,""],[64812,1,""],[64813,1,""],[64814,1,""],[64815,1,""],[64816,1,""],[64817,1,""],[64818,1,""],[64819,1,""],[64820,1,""],[64821,1,""],[64822,1,""],[64823,1,""],[64824,1,""],[64825,1,""],[64826,1,""],[64827,1,""],[[64828,64829],1,""],[[64830,64831],2],[[64832,64847],2],[64848,1,""],[[64849,64850],1,""],[64851,1,""],[64852,1,""],[64853,1,""],[64854,1,""],[64855,1,""],[[64856,64857],1,""],[64858,1,""],[64859,1,""],[64860,1,""],[64861,1,""],[64862,1,""],[[64863,64864],1,""],[64865,1,""],[[64866,64867],1,""],[[64868,64869],1,""],[64870,1,""],[[64871,64872],1,""],[64873,1,""],[[64874,64875],1,""],[[64876,64877],1,""],[64878,1,""],[[64879,64880],1,""],[[64881,64882],1,""],[64883,1,""],[64884,1,""],[64885,1,""],[[64886,64887],1,""],[64888,1,""],[64889,1,""],[64890,1,""],[64891,1,""],[[64892,64893],1,""],[64894,1,""],[64895,1,""],[64896,1,""],[64897,1,""],[64898,1,""],[[64899,64900],1,""],[[64901,64902],1,""],[[64903,64904],1,""],[64905,1,""],[64906,1,""],[64907,1,""],[64908,1,""],[64909,1,""],[64910,1,""],[64911,1,""],[[64912,64913],3],[64914,1,""],[64915,1,""],[64916,1,""],[64917,1,""],[64918,1,""],[[64919,64920],1,""],[64921,1,""],[64922,1,""],[64923,1,""],[[64924,64925],1,""],[64926,1,""],[64927,1,""],[64928,1,""],[64929,1,""],[64930,1,""],[64931,1,""],[64932,1,""],[64933,1,""],[64934,1,""],[64935,1,""],[64936,1,""],[64937,1,""],[64938,1,""],[64939,1,""],[64940,1,""],[64941,1,""],[64942,1,""],[64943,1,""],[64944,1,""],[64945,1,""],[64946,1,""],[64947,1,""],[64948,1,""],[64949,1,""],[64950,1,""],[64951,1,""],[64952,1,""],[64953,1,""],[64954,1,""],[64955,1,""],[64956,1,""],[64957,1,""],[64958,1,""],[64959,1,""],[64960,1,""],[64961,1,""],[64962,1,""],[64963,1,""],[64964,1,""],[64965,1,""],[64966,1,""],[64967,1,""],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,""],[65009,1,""],[65010,1,""],[65011,1,""],[65012,1,""],[65013,1,""],[65014,1,""],[65015,1,""],[65016,1,""],[65017,1,""],[65018,1,"   "],[65019,1," "],[65020,1,""],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,""],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,""],[65048,1,""],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,""],[65074,1,""],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,""],[65082,1,""],[65083,1,""],[65084,1,""],[65085,1,""],[65086,1,""],[65087,1,""],[65088,1,""],[65089,1,""],[65090,1,""],[65091,1,""],[65092,1,""],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," "],[[65101,65103],1,"_"],[65104,1,","],[65105,1,""],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,""],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,""],[65118,1,""],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," "],[65137,1,""],[65138,1," "],[65139,2],[65140,1," "],[65141,3],[65142,1," "],[65143,1,""],[65144,1," "],[65145,1,""],[65146,1," "],[65147,1,""],[65148,1," "],[65149,1,""],[65150,1," "],[65151,1,""],[65152,1,""],[[65153,65154],1,""],[[65155,65156],1,""],[[65157,65158],1,""],[[65159,65160],1,""],[[65161,65164],1,""],[[65165,65166],1,""],[[65167,65170],1,""],[[65171,65172],1,""],[[65173,65176],1,""],[[65177,65180],1,""],[[65181,65184],1,""],[[65185,65188],1,""],[[65189,65192],1,""],[[65193,65194],1,""],[[65195,65196],1,""],[[65197,65198],1,""],[[65199,65200],1,""],[[65201,65204],1,""],[[65205,65208],1,""],[[65209,65212],1,""],[[65213,65216],1,""],[[65217,65220],1,""],[[65221,65224],1,""],[[65225,65228],1,""],[[65229,65232],1,""],[[65233,65236],1,""],[[65237,65240],1,""],[[65241,65244],1,""],[[65245,65248],1,""],[[65249,65252],1,""],[[65253,65256],1,""],[[65257,65260],1,""],[[65261,65262],1,""],[[65263,65264],1,""],[[65265,65268],1,""],[[65269,65270],1,""],[[65271,65272],1,""],[[65273,65274],1,""],[[65275,65276],1,""],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,""],[65376,1,""],[65377,1,"."],[65378,1,""],[65379,1,""],[65380,1,""],[65381,1,""],[65382,1,""],[65383,1,""],[65384,1,""],[65385,1,""],[65386,1,""],[65387,1,""],[65388,1,""],[65389,1,""],[65390,1,""],[65391,1,""],[65392,1,""],[65393,1,""],[65394,1,""],[65395,1,""],[65396,1,""],[65397,1,""],[65398,1,""],[65399,1,""],[65400,1,""],[65401,1,""],[65402,1,""],[65403,1,""],[65404,1,""],[65405,1,""],[65406,1,""],[65407,1,""],[65408,1,""],[65409,1,""],[65410,1,""],[65411,1,""],[65412,1,""],[65413,1,""],[65414,1,""],[65415,1,""],[65416,1,""],[65417,1,""],[65418,1,""],[65419,1,""],[65420,1,""],[65421,1,""],[65422,1,""],[65423,1,""],[65424,1,""],[65425,1,""],[65426,1,""],[65427,1,""],[65428,1,""],[65429,1,""],[65430,1,""],[65431,1,""],[65432,1,""],[65433,1,""],[65434,1,""],[65435,1,""],[65436,1,""],[65437,1,""],[65438,1,""],[65439,1,""],[65440,7],[65441,1,""],[65442,1,""],[65443,1,""],[65444,1,""],[65445,1,""],[65446,1,""],[65447,1,""],[65448,1,""],[65449,1,""],[65450,1,""],[65451,1,""],[65452,1,""],[65453,1,""],[65454,1,""],[65455,1,""],[65456,1,""],[65457,1,""],[65458,1,""],[65459,1,""],[65460,1,""],[65461,1,""],[65462,1,""],[65463,1,""],[65464,1,""],[65465,1,""],[65466,1,""],[65467,1,""],[65468,1,""],[65469,1,""],[65470,1,""],[[65471,65473],3],[65474,1,""],[65475,1,""],[65476,1,""],[65477,1,""],[65478,1,""],[65479,1,""],[[65480,65481],3],[65482,1,""],[65483,1,""],[65484,1,""],[65485,1,""],[65486,1,""],[65487,1,""],[[65488,65489],3],[65490,1,""],[65491,1,""],[65492,1,""],[65493,1,""],[65494,1,""],[65495,1,""],[[65496,65497],3],[65498,1,""],[65499,1,""],[65500,1,""],[[65501,65503],3],[65504,1,""],[65505,1,""],[65506,1,""],[65507,1," "],[65508,1,""],[65509,1,""],[65510,1,""],[65511,3],[65512,1,""],[65513,1,""],[65514,1,""],[65515,1,""],[65516,1,""],[65517,1,""],[65518,1,""],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66000,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\uD801\uDC28"],[66561,1,"\uD801\uDC29"],[66562,1,"\uD801\uDC2A"],[66563,1,"\uD801\uDC2B"],[66564,1,"\uD801\uDC2C"],[66565,1,"\uD801\uDC2D"],[66566,1,"\uD801\uDC2E"],[66567,1,"\uD801\uDC2F"],[66568,1,"\uD801\uDC30"],[66569,1,"\uD801\uDC31"],[66570,1,"\uD801\uDC32"],[66571,1,"\uD801\uDC33"],[66572,1,"\uD801\uDC34"],[66573,1,"\uD801\uDC35"],[66574,1,"\uD801\uDC36"],[66575,1,"\uD801\uDC37"],[66576,1,"\uD801\uDC38"],[66577,1,"\uD801\uDC39"],[66578,1,"\uD801\uDC3A"],[66579,1,"\uD801\uDC3B"],[66580,1,"\uD801\uDC3C"],[66581,1,"\uD801\uDC3D"],[66582,1,"\uD801\uDC3E"],[66583,1,"\uD801\uDC3F"],[66584,1,"\uD801\uDC40"],[66585,1,"\uD801\uDC41"],[66586,1,"\uD801\uDC42"],[66587,1,"\uD801\uDC43"],[66588,1,"\uD801\uDC44"],[66589,1,"\uD801\uDC45"],[66590,1,"\uD801\uDC46"],[66591,1,"\uD801\uDC47"],[66592,1,"\uD801\uDC48"],[66593,1,"\uD801\uDC49"],[66594,1,"\uD801\uDC4A"],[66595,1,"\uD801\uDC4B"],[66596,1,"\uD801\uDC4C"],[66597,1,"\uD801\uDC4D"],[66598,1,"\uD801\uDC4E"],[66599,1,"\uD801\uDC4F"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\uD801\uDCD8"],[66737,1,"\uD801\uDCD9"],[66738,1,"\uD801\uDCDA"],[66739,1,"\uD801\uDCDB"],[66740,1,"\uD801\uDCDC"],[66741,1,"\uD801\uDCDD"],[66742,1,"\uD801\uDCDE"],[66743,1,"\uD801\uDCDF"],[66744,1,"\uD801\uDCE0"],[66745,1,"\uD801\uDCE1"],[66746,1,"\uD801\uDCE2"],[66747,1,"\uD801\uDCE3"],[66748,1,"\uD801\uDCE4"],[66749,1,"\uD801\uDCE5"],[66750,1,"\uD801\uDCE6"],[66751,1,"\uD801\uDCE7"],[66752,1,"\uD801\uDCE8"],[66753,1,"\uD801\uDCE9"],[66754,1,"\uD801\uDCEA"],[66755,1,"\uD801\uDCEB"],[66756,1,"\uD801\uDCEC"],[66757,1,"\uD801\uDCED"],[66758,1,"\uD801\uDCEE"],[66759,1,"\uD801\uDCEF"],[66760,1,"\uD801\uDCF0"],[66761,1,"\uD801\uDCF1"],[66762,1,"\uD801\uDCF2"],[66763,1,"\uD801\uDCF3"],[66764,1,"\uD801\uDCF4"],[66765,1,"\uD801\uDCF5"],[66766,1,"\uD801\uDCF6"],[66767,1,"\uD801\uDCF7"],[66768,1,"\uD801\uDCF8"],[66769,1,"\uD801\uDCF9"],[66770,1,"\uD801\uDCFA"],[66771,1,"\uD801\uDCFB"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\uD801\uDD97"],[66929,1,"\uD801\uDD98"],[66930,1,"\uD801\uDD99"],[66931,1,"\uD801\uDD9A"],[66932,1,"\uD801\uDD9B"],[66933,1,"\uD801\uDD9C"],[66934,1,"\uD801\uDD9D"],[66935,1,"\uD801\uDD9E"],[66936,1,"\uD801\uDD9F"],[66937,1,"\uD801\uDDA0"],[66938,1,"\uD801\uDDA1"],[66939,3],[66940,1,"\uD801\uDDA3"],[66941,1,"\uD801\uDDA4"],[66942,1,"\uD801\uDDA5"],[66943,1,"\uD801\uDDA6"],[66944,1,"\uD801\uDDA7"],[66945,1,"\uD801\uDDA8"],[66946,1,"\uD801\uDDA9"],[66947,1,"\uD801\uDDAA"],[66948,1,"\uD801\uDDAB"],[66949,1,"\uD801\uDDAC"],[66950,1,"\uD801\uDDAD"],[66951,1,"\uD801\uDDAE"],[66952,1,"\uD801\uDDAF"],[66953,1,"\uD801\uDDB0"],[66954,1,"\uD801\uDDB1"],[66955,3],[66956,1,"\uD801\uDDB3"],[66957,1,"\uD801\uDDB4"],[66958,1,"\uD801\uDDB5"],[66959,1,"\uD801\uDDB6"],[66960,1,"\uD801\uDDB7"],[66961,1,"\uD801\uDDB8"],[66962,1,"\uD801\uDDB9"],[66963,3],[66964,1,"\uD801\uDDBB"],[66965,1,"\uD801\uDDBC"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,""],[67458,1,""],[67459,1,""],[67460,1,""],[67461,1,""],[67462,3],[67463,1,""],[67464,1,""],[67465,1,""],[67466,1,""],[67467,1,""],[67468,1,""],[67469,1,""],[67470,1,""],[67471,1,""],[67472,1,""],[67473,1,""],[67474,1,""],[67475,1,""],[67476,1,""],[67477,1,""],[67478,1,""],[67479,1,""],[67480,1,""],[67481,1,""],[67482,1,""],[67483,1,""],[67484,1,"\uD837\uDF04"],[67485,1,""],[67486,1,""],[67487,1,"\uD837\uDF05"],[67488,1,""],[67489,1,"\uD837\uDF06"],[67490,1,""],[67491,1,""],[67492,1,""],[67493,1,"q"],[67494,1,""],[67495,1,"\uD837\uDF08"],[67496,1,""],[67497,1,""],[67498,1,""],[67499,1,""],[67500,1,""],[67501,1,""],[67502,1,""],[67503,1,""],[67504,1,""],[67505,3],[67506,1,""],[67507,1,""],[67508,1,""],[67509,1,""],[67510,1,""],[67511,1,""],[67512,1,""],[67513,1,"\uD837\uDF0A"],[67514,1,"\uD837\uDF1E"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\uD803\uDCC0"],[68737,1,"\uD803\uDCC1"],[68738,1,"\uD803\uDCC2"],[68739,1,"\uD803\uDCC3"],[68740,1,"\uD803\uDCC4"],[68741,1,"\uD803\uDCC5"],[68742,1,"\uD803\uDCC6"],[68743,1,"\uD803\uDCC7"],[68744,1,"\uD803\uDCC8"],[68745,1,"\uD803\uDCC9"],[68746,1,"\uD803\uDCCA"],[68747,1,"\uD803\uDCCB"],[68748,1,"\uD803\uDCCC"],[68749,1,"\uD803\uDCCD"],[68750,1,"\uD803\uDCCE"],[68751,1,"\uD803\uDCCF"],[68752,1,"\uD803\uDCD0"],[68753,1,"\uD803\uDCD1"],[68754,1,"\uD803\uDCD2"],[68755,1,"\uD803\uDCD3"],[68756,1,"\uD803\uDCD4"],[68757,1,"\uD803\uDCD5"],[68758,1,"\uD803\uDCD6"],[68759,1,"\uD803\uDCD7"],[68760,1,"\uD803\uDCD8"],[68761,1,"\uD803\uDCD9"],[68762,1,"\uD803\uDCDA"],[68763,1,"\uD803\uDCDB"],[68764,1,"\uD803\uDCDC"],[68765,1,"\uD803\uDCDD"],[68766,1,"\uD803\uDCDE"],[68767,1,"\uD803\uDCDF"],[68768,1,"\uD803\uDCE0"],[68769,1,"\uD803\uDCE1"],[68770,1,"\uD803\uDCE2"],[68771,1,"\uD803\uDCE3"],[68772,1,"\uD803\uDCE4"],[68773,1,"\uD803\uDCE5"],[68774,1,"\uD803\uDCE6"],[68775,1,"\uD803\uDCE7"],[68776,1,"\uD803\uDCE8"],[68777,1,"\uD803\uDCE9"],[68778,1,"\uD803\uDCEA"],[68779,1,"\uD803\uDCEB"],[68780,1,"\uD803\uDCEC"],[68781,1,"\uD803\uDCED"],[68782,1,"\uD803\uDCEE"],[68783,1,"\uD803\uDCEF"],[68784,1,"\uD803\uDCF0"],[68785,1,"\uD803\uDCF1"],[68786,1,"\uD803\uDCF2"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\uD803\uDD70"],[68945,1,"\uD803\uDD71"],[68946,1,"\uD803\uDD72"],[68947,1,"\uD803\uDD73"],[68948,1,"\uD803\uDD74"],[68949,1,"\uD803\uDD75"],[68950,1,"\uD803\uDD76"],[68951,1,"\uD803\uDD77"],[68952,1,"\uD803\uDD78"],[68953,1,"\uD803\uDD79"],[68954,1,"\uD803\uDD7A"],[68955,1,"\uD803\uDD7B"],[68956,1,"\uD803\uDD7C"],[68957,1,"\uD803\uDD7D"],[68958,1,"\uD803\uDD7E"],[68959,1,"\uD803\uDD7F"],[68960,1,"\uD803\uDD80"],[68961,1,"\uD803\uDD81"],[68962,1,"\uD803\uDD82"],[68963,1,"\uD803\uDD83"],[68964,1,"\uD803\uDD84"],[68965,1,"\uD803\uDD85"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\uD806\uDCC0"],[71841,1,"\uD806\uDCC1"],[71842,1,"\uD806\uDCC2"],[71843,1,"\uD806\uDCC3"],[71844,1,"\uD806\uDCC4"],[71845,1,"\uD806\uDCC5"],[71846,1,"\uD806\uDCC6"],[71847,1,"\uD806\uDCC7"],[71848,1,"\uD806\uDCC8"],[71849,1,"\uD806\uDCC9"],[71850,1,"\uD806\uDCCA"],[71851,1,"\uD806\uDCCB"],[71852,1,"\uD806\uDCCC"],[71853,1,"\uD806\uDCCD"],[71854,1,"\uD806\uDCCE"],[71855,1,"\uD806\uDCCF"],[71856,1,"\uD806\uDCD0"],[71857,1,"\uD806\uDCD1"],[71858,1,"\uD806\uDCD2"],[71859,1,"\uD806\uDCD3"],[71860,1,"\uD806\uDCD4"],[71861,1,"\uD806\uDCD5"],[71862,1,"\uD806\uDCD6"],[71863,1,"\uD806\uDCD7"],[71864,1,"\uD806\uDCD8"],[71865,1,"\uD806\uDCD9"],[71866,1,"\uD806\uDCDA"],[71867,1,"\uD806\uDCDB"],[71868,1,"\uD806\uDCDC"],[71869,1,"\uD806\uDCDD"],[71870,1,"\uD806\uDCDE"],[71871,1,"\uD806\uDCDF"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\uD81B\uDE60"],[93761,1,"\uD81B\uDE61"],[93762,1,"\uD81B\uDE62"],[93763,1,"\uD81B\uDE63"],[93764,1,"\uD81B\uDE64"],[93765,1,"\uD81B\uDE65"],[93766,1,"\uD81B\uDE66"],[93767,1,"\uD81B\uDE67"],[93768,1,"\uD81B\uDE68"],[93769,1,"\uD81B\uDE69"],[93770,1,"\uD81B\uDE6A"],[93771,1,"\uD81B\uDE6B"],[93772,1,"\uD81B\uDE6C"],[93773,1,"\uD81B\uDE6D"],[93774,1,"\uD81B\uDE6E"],[93775,1,"\uD81B\uDE6F"],[93776,1,"\uD81B\uDE70"],[93777,1,"\uD81B\uDE71"],[93778,1,"\uD81B\uDE72"],[93779,1,"\uD81B\uDE73"],[93780,1,"\uD81B\uDE74"],[93781,1,"\uD81B\uDE75"],[93782,1,"\uD81B\uDE76"],[93783,1,"\uD81B\uDE77"],[93784,1,"\uD81B\uDE78"],[93785,1,"\uD81B\uDE79"],[93786,1,"\uD81B\uDE7A"],[93787,1,"\uD81B\uDE7B"],[93788,1,"\uD81B\uDE7C"],[93789,1,"\uD81B\uDE7D"],[93790,1,"\uD81B\uDE7E"],[93791,1,"\uD81B\uDE7F"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118000,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\uD834\uDD57\uD834\uDD65"],[119135,1,"\uD834\uDD58\uD834\uDD65"],[119136,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6E"],[119137,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD6F"],[119138,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD70"],[119139,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD71"],[119140,1,"\uD834\uDD58\uD834\uDD65\uD834\uDD72"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\uD834\uDDB9\uD834\uDD65"],[119228,1,"\uD834\uDDBA\uD834\uDD65"],[119229,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6E"],[119230,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6E"],[119231,1,"\uD834\uDDB9\uD834\uDD65\uD834\uDD6F"],[119232,1,"\uD834\uDDBA\uD834\uDD65\uD834\uDD6F"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[120000,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,""],[120485,1,""],[[120486,120487],3],[120488,1,""],[120489,1,""],[120490,1,""],[120491,1,""],[120492,1,""],[120493,1,""],[120494,1,""],[120495,1,""],[120496,1,""],[120497,1,""],[120498,1,""],[120499,1,""],[120500,1,""],[120501,1,""],[120502,1,""],[120503,1,""],[120504,1,""],[120505,1,""],[120506,1,""],[120507,1,""],[120508,1,""],[120509,1,""],[120510,1,""],[120511,1,""],[120512,1,""],[120513,1,""],[120514,1,""],[120515,1,""],[120516,1,""],[120517,1,""],[120518,1,""],[120519,1,""],[120520,1,""],[120521,1,""],[120522,1,""],[120523,1,""],[120524,1,""],[120525,1,""],[120526,1,""],[120527,1,""],[120528,1,""],[120529,1,""],[120530,1,""],[[120531,120532],1,""],[120533,1,""],[120534,1,""],[120535,1,""],[120536,1,""],[120537,1,""],[120538,1,""],[120539,1,""],[120540,1,""],[120541,1,""],[120542,1,""],[120543,1,""],[120544,1,""],[120545,1,""],[120546,1,""],[120547,1,""],[120548,1,""],[120549,1,""],[120550,1,""],[120551,1,""],[120552,1,""],[120553,1,""],[120554,1,""],[120555,1,""],[120556,1,""],[120557,1,""],[120558,1,""],[120559,1,""],[120560,1,""],[120561,1,""],[120562,1,""],[120563,1,""],[120564,1,""],[120565,1,""],[120566,1,""],[120567,1,""],[120568,1,""],[120569,1,""],[120570,1,""],[120571,1,""],[120572,1,""],[120573,1,""],[120574,1,""],[120575,1,""],[120576,1,""],[120577,1,""],[120578,1,""],[120579,1,""],[120580,1,""],[120581,1,""],[120582,1,""],[120583,1,""],[120584,1,""],[120585,1,""],[120586,1,""],[120587,1,""],[120588,1,""],[[120589,120590],1,""],[120591,1,""],[120592,1,""],[120593,1,""],[120594,1,""],[120595,1,""],[120596,1,""],[120597,1,""],[120598,1,""],[120599,1,""],[120600,1,""],[120601,1,""],[120602,1,""],[120603,1,""],[120604,1,""],[120605,1,""],[120606,1,""],[120607,1,""],[120608,1,""],[120609,1,""],[120610,1,""],[120611,1,""],[120612,1,""],[120613,1,""],[120614,1,""],[120615,1,""],[120616,1,""],[120617,1,""],[120618,1,""],[120619,1,""],[120620,1,""],[120621,1,""],[120622,1,""],[120623,1,""],[120624,1,""],[120625,1,""],[120626,1,""],[120627,1,""],[120628,1,""],[120629,1,""],[120630,1,""],[120631,1,""],[120632,1,""],[120633,1,""],[120634,1,""],[120635,1,""],[120636,1,""],[120637,1,""],[120638,1,""],[120639,1,""],[120640,1,""],[120641,1,""],[120642,1,""],[120643,1,""],[120644,1,""],[120645,1,""],[120646,1,""],[[120647,120648],1,""],[120649,1,""],[120650,1,""],[120651,1,""],[120652,1,""],[120653,1,""],[120654,1,""],[120655,1,""],[120656,1,""],[120657,1,""],[120658,1,""],[120659,1,""],[120660,1,""],[120661,1,""],[120662,1,""],[120663,1,""],[120664,1,""],[120665,1,""],[120666,1,""],[120667,1,""],[120668,1,""],[120669,1,""],[120670,1,""],[120671,1,""],[120672,1,""],[120673,1,""],[120674,1,""],[120675,1,""],[120676,1,""],[120677,1,""],[120678,1,""],[120679,1,""],[120680,1,""],[120681,1,""],[120682,1,""],[120683,1,""],[120684,1,""],[120685,1,""],[120686,1,""],[120687,1,""],[120688,1,""],[120689,1,""],[120690,1,""],[120691,1,""],[120692,1,""],[120693,1,""],[120694,1,""],[120695,1,""],[120696,1,""],[120697,1,""],[120698,1,""],[120699,1,""],[120700,1,""],[120701,1,""],[120702,1,""],[120703,1,""],[120704,1,""],[[120705,120706],1,""],[120707,1,""],[120708,1,""],[120709,1,""],[120710,1,""],[120711,1,""],[120712,1,""],[120713,1,""],[120714,1,""],[120715,1,""],[120716,1,""],[120717,1,""],[120718,1,""],[120719,1,""],[120720,1,""],[120721,1,""],[120722,1,""],[120723,1,""],[120724,1,""],[120725,1,""],[120726,1,""],[120727,1,""],[120728,1,""],[120729,1,""],[120730,1,""],[120731,1,""],[120732,1,""],[120733,1,""],[120734,1,""],[120735,1,""],[120736,1,""],[120737,1,""],[120738,1,""],[120739,1,""],[120740,1,""],[120741,1,""],[120742,1,""],[120743,1,""],[120744,1,""],[120745,1,""],[120746,1,""],[120747,1,""],[120748,1,""],[120749,1,""],[120750,1,""],[120751,1,""],[120752,1,""],[120753,1,""],[120754,1,""],[120755,1,""],[120756,1,""],[120757,1,""],[120758,1,""],[120759,1,""],[120760,1,""],[120761,1,""],[120762,1,""],[[120763,120764],1,""],[120765,1,""],[120766,1,""],[120767,1,""],[120768,1,""],[120769,1,""],[120770,1,""],[120771,1,""],[120772,1,""],[120773,1,""],[120774,1,""],[120775,1,""],[120776,1,""],[120777,1,""],[[120778,120779],1,""],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,""],[122929,1,""],[122930,1,""],[122931,1,""],[122932,1,""],[122933,1,""],[122934,1,""],[122935,1,""],[122936,1,""],[122937,1,""],[122938,1,""],[122939,1,""],[122940,1,""],[122941,1,""],[122942,1,""],[122943,1,""],[122944,1,""],[122945,1,""],[122946,1,""],[122947,1,""],[122948,1,""],[122949,1,""],[122950,1,""],[122951,1,""],[122952,1,""],[122953,1,""],[122954,1,""],[122955,1,""],[122956,1,""],[122957,1,""],[122958,1,""],[122959,1,""],[122960,1,""],[122961,1,""],[122962,1,""],[122963,1,""],[122964,1,""],[122965,1,""],[122966,1,""],[122967,1,""],[122968,1,""],[122969,1,""],[122970,1,""],[122971,1,""],[122972,1,""],[122973,1,""],[122974,1,""],[122975,1,""],[122976,1,""],[122977,1,""],[122978,1,""],[122979,1,""],[122980,1,""],[122981,1,""],[122982,1,""],[122983,1,""],[122984,1,""],[122985,1,""],[122986,1,""],[122987,1,""],[122988,1,""],[122989,1,""],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\uD83A\uDD22"],[125185,1,"\uD83A\uDD23"],[125186,1,"\uD83A\uDD24"],[125187,1,"\uD83A\uDD25"],[125188,1,"\uD83A\uDD26"],[125189,1,"\uD83A\uDD27"],[125190,1,"\uD83A\uDD28"],[125191,1,"\uD83A\uDD29"],[125192,1,"\uD83A\uDD2A"],[125193,1,"\uD83A\uDD2B"],[125194,1,"\uD83A\uDD2C"],[125195,1,"\uD83A\uDD2D"],[125196,1,"\uD83A\uDD2E"],[125197,1,"\uD83A\uDD2F"],[125198,1,"\uD83A\uDD30"],[125199,1,"\uD83A\uDD31"],[125200,1,"\uD83A\uDD32"],[125201,1,"\uD83A\uDD33"],[125202,1,"\uD83A\uDD34"],[125203,1,"\uD83A\uDD35"],[125204,1,"\uD83A\uDD36"],[125205,1,"\uD83A\uDD37"],[125206,1,"\uD83A\uDD38"],[125207,1,"\uD83A\uDD39"],[125208,1,"\uD83A\uDD3A"],[125209,1,"\uD83A\uDD3B"],[125210,1,"\uD83A\uDD3C"],[125211,1,"\uD83A\uDD3D"],[125212,1,"\uD83A\uDD3E"],[125213,1,"\uD83A\uDD3F"],[125214,1,"\uD83A\uDD40"],[125215,1,"\uD83A\uDD41"],[125216,1,"\uD83A\uDD42"],[125217,1,"\uD83A\uDD43"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,""],[126465,1,""],[126466,1,""],[126467,1,""],[126468,3],[126469,1,""],[126470,1,""],[126471,1,""],[126472,1,""],[126473,1,""],[126474,1,""],[126475,1,""],[126476,1,""],[126477,1,""],[126478,1,""],[126479,1,""],[126480,1,""],[126481,1,""],[126482,1,""],[126483,1,""],[126484,1,""],[126485,1,""],[126486,1,""],[126487,1,""],[126488,1,""],[126489,1,""],[126490,1,""],[126491,1,""],[126492,1,""],[126493,1,""],[126494,1,""],[126495,1,""],[126496,3],[126497,1,""],[126498,1,""],[126499,3],[126500,1,""],[[126501,126502],3],[126503,1,""],[126504,3],[126505,1,""],[126506,1,""],[126507,1,""],[126508,1,""],[126509,1,""],[126510,1,""],[126511,1,""],[126512,1,""],[126513,1,""],[126514,1,""],[126515,3],[126516,1,""],[126517,1,""],[126518,1,""],[126519,1,""],[126520,3],[126521,1,""],[126522,3],[126523,1,""],[[126524,126529],3],[126530,1,""],[[126531,126534],3],[126535,1,""],[126536,3],[126537,1,""],[126538,3],[126539,1,""],[126540,3],[126541,1,""],[126542,1,""],[126543,1,""],[126544,3],[126545,1,""],[126546,1,""],[126547,3],[126548,1,""],[[126549,126550],3],[126551,1,""],[126552,3],[126553,1,""],[126554,3],[126555,1,""],[126556,3],[126557,1,""],[126558,3],[126559,1,""],[126560,3],[126561,1,""],[126562,1,""],[126563,3],[126564,1,""],[[126565,126566],3],[126567,1,""],[126568,1,""],[126569,1,""],[126570,1,""],[126571,3],[126572,1,""],[126573,1,""],[126574,1,""],[126575,1,""],[126576,1,""],[126577,1,""],[126578,1,""],[126579,3],[126580,1,""],[126581,1,""],[126582,1,""],[126583,1,""],[126584,3],[126585,1,""],[126586,1,""],[126587,1,""],[126588,1,""],[126589,3],[126590,1,""],[126591,3],[126592,1,""],[126593,1,""],[126594,1,""],[126595,1,""],[126596,1,""],[126597,1,""],[126598,1,""],[126599,1,""],[126600,1,""],[126601,1,""],[126602,3],[126603,1,""],[126604,1,""],[126605,1,""],[126606,1,""],[126607,1,""],[126608,1,""],[126609,1,""],[126610,1,""],[126611,1,""],[126612,1,""],[126613,1,""],[126614,1,""],[126615,1,""],[126616,1,""],[126617,1,""],[126618,1,""],[126619,1,""],[[126620,126624],3],[126625,1,""],[126626,1,""],[126627,1,""],[126628,3],[126629,1,""],[126630,1,""],[126631,1,""],[126632,1,""],[126633,1,""],[126634,3],[126635,1,""],[126636,1,""],[126637,1,""],[126638,1,""],[126639,1,""],[126640,1,""],[126641,1,""],[126642,1,""],[126643,1,""],[126644,1,""],[126645,1,""],[126646,1,""],[126647,1,""],[126648,1,""],[126649,1,""],[126650,1,""],[126651,1,""],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"s"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,""],[127489,1,""],[127490,1,""],[[127491,127503],3],[127504,1,""],[127505,1,""],[127506,1,""],[127507,1,""],[127508,1,""],[127509,1,""],[127510,1,""],[127511,1,""],[127512,1,""],[127513,1,""],[127514,1,""],[127515,1,""],[127516,1,""],[127517,1,""],[127518,1,""],[127519,1,""],[127520,1,""],[127521,1,""],[127522,1,""],[127523,1,""],[127524,1,""],[127525,1,""],[127526,1,""],[127527,1,""],[127528,1,""],[127529,1,""],[127530,1,""],[127531,1,""],[127532,1,""],[127533,1,""],[127534,1,""],[127535,1,""],[127536,1,""],[127537,1,""],[127538,1,""],[127539,1,""],[127540,1,""],[127541,1,""],[127542,1,""],[127543,1,""],[127544,1,""],[127545,1,""],[127546,1,""],[127547,1,""],[[127548,127551],3],[127552,1,""],[127553,1,""],[127554,1,""],[127555,1,""],[127556,1,""],[127557,1,""],[127558,1,""],[127559,1,""],[127560,1,""],[[127561,127567],3],[127568,1,""],[127569,1,""],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128000,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,""],[194561,1,""],[194562,1,""],[194563,1,"\uD840\uDD22"],[194564,1,""],[194565,1,""],[194566,1,""],[194567,1,""],[194568,1,""],[194569,1,""],[194570,1,""],[194571,1,""],[194572,1,""],[194573,1,"\uD841\uDE3A"],[194574,1,""],[194575,1,""],[194576,1,""],[194577,1,""],[194578,1,"\uD841\uDD1C"],[194579,1,""],[194580,1,""],[194581,1,""],[194582,1,"\uD841\uDD4B"],[194583,1,""],[194584,1,""],[194585,1,""],[194586,1,""],[194587,1,""],[194588,1,"\uD864\uDDDF"],[194589,1,""],[194590,1,""],[194591,1,""],[194592,1,""],[194593,1,""],[194594,1,""],[194595,1,""],[194596,1,""],[194597,1,""],[194598,1,""],[194599,1,""],[194600,1,""],[194601,1,""],[194602,1,""],[194603,1,""],[194604,1,""],[194605,1,""],[194606,1,""],[194607,1,""],[194608,1,""],[[194609,194611],1,""],[194612,1,"\uD842\uDE2C"],[194613,1,""],[194614,1,""],[194615,1,""],[194616,1,"\uD842\uDF63"],[194617,1,""],[194618,1,""],[194619,1,""],[194620,1,""],[194621,1,""],[194622,1,""],[194623,1,""],[194624,1,""],[194625,1,""],[194626,1,""],[194627,1,""],[194628,1,""],[[194629,194630],1,""],[194631,1,""],[194632,1,""],[194633,1,""],[194634,1,""],[194635,1,""],[194636,1,""],[194637,1,""],[194638,1,""],[194639,1,""],[194640,1,""],[194641,1,""],[194642,1,""],[194643,1,""],[194644,1,""],[194645,1,""],[194646,1,""],[194647,1,""],[194648,1,""],[194649,1,"\uD845\uDCE4"],[194650,1,""],[194651,1,""],[194652,1,""],[194653,1,""],[194654,1,""],[194655,1,""],[194656,1,"\uD845\uDEA8"],[194657,1,"\uD845\uDEEA"],[194658,1,""],[194659,1,""],[194660,1,""],[194661,1,""],[194662,1,""],[194663,1,""],[194664,1,""],[194665,1,""],[[194666,194667],1,""],[194668,1,"\uD846\uDDC8"],[194669,1,""],[194670,1,""],[194671,1,""],[194672,1,""],[194673,1,"\uD846\uDF18"],[194674,1,""],[194675,1,""],[194676,1,""],[194677,1,""],[194678,1,""],[194679,1,""],[194680,1,""],[194681,1,""],[194682,1,""],[194683,1,"\uD847\uDDE4"],[194684,1,""],[194685,1,"\uD847\uDDE6"],[194686,1,""],[194687,1,""],[194688,1,""],[194689,1,""],[194690,1,""],[194691,1,""],[194692,1,""],[194693,1,""],[194694,1,""],[194695,1,""],[194696,1,""],[194697,1,"\uD848\uDD83"],[194698,1,""],[194699,1,""],[194700,1,""],[194701,1,""],[194702,1,""],[194703,1,"\uD868\uDF92"],[194704,1,""],[[194705,194706],1,"\uD848\uDF31"],[194707,1,""],[[194708,194709],1,""],[194710,1,""],[194711,1,"\uD84C\uDEB8"],[194712,1,"\uD858\uDDDA"],[194713,1,""],[194714,1,""],[194715,1,""],[194716,1,""],[194717,1,""],[194718,1,""],[194719,1,""],[194720,1,""],[194721,1,""],[194722,1,""],[194723,1,""],[194724,1,"\uD849\uDED4"],[194725,1,""],[194726,1,""],[194727,1,""],[194728,1,""],[194729,1,""],[194730,1,""],[194731,1,""],[194732,1,""],[194733,1,""],[194734,1,""],[194735,1,""],[194736,1,""],[194737,1,""],[194738,1,""],[194739,1,""],[194740,1,""],[194741,1,""],[194742,1,""],[194743,1,""],[194744,1,"\uD84A\uDF0C"],[194745,1,""],[194746,1,""],[194747,1,""],[194748,1,""],[194749,1,""],[194750,1,"\uD84A\uDFF1"],[194751,1,""],[194752,1,""],[194753,1,""],[194754,1,""],[194755,1,""],[194756,1,""],[194757,1,""],[194758,1,""],[194759,1,""],[194760,1,""],[194761,1,""],[194762,1,"\uD84C\uDC0A"],[194763,1,""],[194764,1,""],[194765,1,""],[194766,1,""],[194767,1,""],[194768,1,""],[194769,1,""],[194770,1,""],[194771,1,""],[194772,1,""],[194773,1,""],[194774,1,""],[194775,1,""],[194776,1,""],[194777,1,""],[194778,1,""],[194779,1,""],[194780,1,""],[194781,1,"\uD84C\uDFC3"],[194782,1,""],[194783,1,""],[194784,1,""],[194785,1,""],[194786,1,""],[194787,1,"\uD84D\uDC6D"],[194788,1,""],[194789,1,""],[194790,1,""],[194791,1,""],[194792,1,""],[194793,1,""],[194794,1,""],[194795,1,""],[194796,1,"\uD84D\uDEA3"],[194797,1,""],[194798,1,""],[194799,1,""],[194800,1,"\uD84E\uDCA7"],[194801,1,""],[194802,1,""],[194803,1,""],[194804,1,""],[194805,1,""],[194806,1,""],[194807,1,"\uD84E\uDE8D"],[194808,1,"\uD847\uDD0B"],[194809,1,"\uD84E\uDEFA"],[194810,1,""],[194811,1,"\uD84F\uDCBC"],[194812,1,""],[194813,1,""],[194814,1,""],[194815,1,""],[194816,1,""],[194817,1,""],[194818,1,""],[194819,1,""],[194820,1,""],[194821,1,""],[194822,1,"\uD84F\uDD1E"],[194823,1,""],[194824,1,""],[194825,1,""],[194826,1,""],[194827,1,""],[194828,1,""],[194829,1,"\uD84F\uDED1"],[194830,1,""],[194831,1,""],[194832,1,"\uD84F\uDF5E"],[194833,1,"\uD84F\uDF8E"],[194834,1,""],[194835,1,""],[194836,1,""],[194837,1,""],[194838,1,""],[194839,1,""],[194840,1,""],[194841,1,""],[194842,1,""],[194843,1,"\uD841\uDD25"],[194844,1,""],[194845,1,"\uD850\uDE63"],[194846,1,""],[194847,1,"\uD850\uDFAB"],[194848,1,""],[194849,1,""],[194850,1,""],[194851,1,"\uD851\uDE08"],[194852,1,""],[194853,1,""],[194854,1,"\uD851\uDF35"],[194855,1,"\uD852\uDC14"],[194856,1,""],[194857,1,""],[194858,1,""],[194859,1,""],[[194860,194861],1,""],[194862,1,""],[194863,1,""],[194864,1,""],[194865,1,""],[194866,1,""],[194867,1,""],[194868,1,""],[194869,1,"\uD853\uDC36"],[194870,1,""],[194871,1,"\uD853\uDC92"],[194872,1,""],[194873,1,"\uD848\uDD9F"],[194874,1,""],[194875,1,"\uD853\uDFA1"],[194876,1,"\uD853\uDFB8"],[194877,1,"\uD854\uDC44"],[194878,1,""],[194879,1,""],[194880,1,""],[194881,1,"\uD854\uDCF3"],[194882,1,"\uD854\uDCF2"],[194883,1,"\uD854\uDD19"],[194884,1,"\uD854\uDD33"],[194885,1,""],[[194886,194887],1,""],[194888,1,""],[194889,1,""],[194890,1,""],[194891,1,""],[194892,1,""],[194893,1,"\uD855\uDC1D"],[194894,1,""],[194895,1,""],[194896,1,""],[194897,1,""],[194898,1,"\uD855\uDE26"],[194899,1,""],[194900,1,"\uD855\uDE9A"],[194901,1,"\uD855\uDEC5"],[194902,1,""],[194903,1,""],[194904,1,""],[194905,1,""],[194906,1,""],[194907,1,""],[194908,1,"\uD856\uDD7C"],[[194909,194910],1,"\uD856\uDEA7"],[194911,1,""],[194912,1,""],[194913,1,"\uD856\uDFAB"],[194914,1,""],[194915,1,""],[194916,1,""],[194917,1,"\uD857\uDC80"],[194918,1,""],[194919,1,""],[194920,1,""],[194921,1,""],[194922,1,""],[194923,1,"\uD857\uDF86"],[194924,1,""],[194925,1,""],[194926,1,""],[194927,1,""],[194928,1,""],[194929,1,""],[194930,1,"\uD858\uDE28"],[194931,1,"\uD858\uDE47"],[194932,1,""],[194933,1,"\uD858\uDED9"],[194934,1,""],[194935,1,"\uD858\uDF3E"],[194936,1,""],[194937,1,""],[194938,1,""],[194939,1,"\uD859\uDCDA"],[194940,1,"\uD859\uDD23"],[194941,1,""],[194942,1,"\uD859\uDDA8"],[194943,1,""],[194944,1,"\uD84C\uDF5F"],[194945,1,""],[194946,1,""],[194947,1,""],[194948,1,""],[194949,1,""],[194950,1,""],[194951,1,"\uD859\uDFA7"],[194952,1,"\uD859\uDFB5"],[194953,1,"\uD84C\uDF93"],[194954,1,"\uD84C\uDF9C"],[194955,1,""],[194956,1,""],[194957,1,""],[194958,1,""],[194959,1,""],[194960,1,""],[194961,1,""],[194962,1,""],[194963,1,""],[194964,1,""],[194965,1,""],[194966,1,""],[194967,1,"\uD85A\uDF3C"],[194968,1,""],[194969,1,""],[194970,1,""],[194971,1,""],[194972,1,""],[194973,1,""],[194974,1,""],[194975,1,""],[194976,1,""],[194977,1,""],[194978,1,""],[194979,1,""],[194980,1,"\uD85B\uDC36"],[194981,1,"\uD85B\uDD6B"],[194982,1,"\uD85B\uDCD5"],[194983,1,""],[194984,1,""],[194985,1,""],[194986,1,""],[194987,1,"\uD85C\uDFCA"],[194988,1,""],[194989,1,"\uD85B\uDF2C"],[194990,1,""],[194991,1,""],[194992,1,"\uD85B\uDFB1"],[194993,1,"\uD85C\uDCD2"],[194994,1,""],[194995,1,""],[194996,1,""],[194997,1,""],[194998,1,""],[194999,1,""],[195000,1,""],[195001,1,""],[195002,1,""],[195003,1,""],[195004,1,""],[195005,1,""],[195006,1,""],[195007,1,""],[195008,1,""],[195009,1,""],[195010,1,""],[195011,1,""],[195012,1,""],[195013,1,"\uD85D\uDE67"],[195014,1,""],[195015,1,""],[195016,1,""],[195017,1,""],[195018,1,""],[195019,1,"\uD85E\uDCAE"],[195020,1,"\uD85E\uDD66"],[195021,1,""],[195022,1,""],[195023,1,""],[195024,1,""],[195025,1,""],[195026,1,""],[195027,1,"\uD85F\uDCA8"],[195028,1,""],[195029,1,""],[195030,1,""],[195031,1,""],[195032,1,"\uD85F\uDF2F"],[195033,1,"\uD842\uDC04"],[195034,1,""],[195035,1,""],[195036,1,""],[195037,1,"\uD842\uDCDE"],[195038,1,""],[195039,1,""],[195040,1,"\uD861\uDDD2"],[195041,1,"\uD861\uDDED"],[195042,1,""],[195043,1,""],[195044,1,""],[195045,1,"\uD861\uDF2E"],[195046,1,""],[195047,1,""],[195048,1,""],[195049,1,""],[195050,1,""],[195051,1,""],[195052,1,""],[195053,1,"\uD862\uDFFA"],[195054,1,""],[195055,1,""],[195056,1,""],[195057,1,"\uD863\uDD77"],[195058,1,""],[195059,1,""],[195060,1,""],[195061,1,""],[195062,1,"\uD864\uDD45"],[195063,1,"\uD864\uDE1A"],[195064,1,""],[195065,1,""],[195066,1,""],[195067,1,"\uD865\uDC0A"],[195068,1,""],[195069,1,"\uD865\uDC96"],[[195070,195071],1,""],[195072,1,""],[195073,1,"\uD865\uDDB6"],[195074,1,""],[195075,1,""],[195076,1,""],[195077,1,""],[195078,1,""],[195079,1,""],[195080,1,""],[195081,1,"\uD866\uDF30"],[195082,1,""],[195083,1,""],[195084,1,""],[195085,1,""],[195086,1,""],[195087,1,""],[195088,1,"\uD868\uDCCE"],[195089,1,""],[195090,1,"\uD868\uDD05"],[195091,1,"\uD868\uDE0E"],[195092,1,"\uD868\uDE91"],[195093,1,""],[195094,1,""],[195095,1,""],[195096,1,""],[195097,1,""],[195098,1,""],[195099,1,""],[195100,1,""],[195101,1,"\uD869\uDE00"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918000,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var CI=z((q31,GI)=>{q31.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var QI=z((ER1,zI)=>{var x$=JI(),L6=$I(),WI=EI(),{STATUS_MAPPING:W4}=CI();function S$(F){return/[^\x00-\x7F]/u.test(F)}function HI(F){let A=0,B=WI.length-1;while(A<=B){let D=Math.floor((A+B)/2),X=WI[D],Z=Array.isArray(X[0])?X[0][0]:X[0],J=Array.isArray(X[0])?X[0][1]:X[0];if(Z<=F&&J>=F)return X.slice(1);else if(Z>F)B=D-1;else A=D+1}return null}function Q31(F,{transitionalProcessing:A}){let B="";for(let D of F){let[X,Z]=HI(D.codePointAt(0));switch(X){case W4.disallowed:B+=D;break;case W4.ignored:break;case W4.mapped:if(A&&D==="")B+="ss";else B+=Z;break;case W4.deviation:if(A)B+=Z;else B+=D;break;case W4.valid:B+=D;break}}return B}function K31(F,{checkHyphens:A,checkBidi:B,checkJoiners:D,transitionalProcessing:X,useSTD3ASCIIRules:Z,isBidi:J}){if(F.length===0)return!0;if(F.normalize("NFC")!==F)return!1;let $=Array.from(F);if(A){if($[2]==="-"&&$[3]==="-"||(F.startsWith("-")||F.endsWith("-")))return!1}if(!A){if(F.startsWith("xn--"))return!1}if(F.includes("."))return!1;if(L6.combiningMarks.test($[0]))return!1;for(let Y of $){let E=Y.codePointAt(0),[G]=HI(E);if(X){if(G!==W4.valid)return!1}else if(G!==W4.valid&&G!==W4.deviation)return!1;if(Z&&E<=127){if(!/^(?:[a-z]|[0-9]|-)$/u.test(Y))return!1}}if(D){let Y=0;for(let[E,G]of $.entries())if(G===""||G===""){if(E>0){if(L6.combiningClassVirama.test($[E-1]))continue;if(G===""){let C=$.indexOf("",E+1),W=C<0?$.slice(Y):$.slice(Y,C);if(L6.validZWNJ.test(W.join(""))){Y=E+1;continue}}}return!1}}if(B&&J){let Y;if(L6.bidiS1LTR.test($[0]))Y=!1;else if(L6.bidiS1RTL.test($[0]))Y=!0;else return!1;if(Y){if(!L6.bidiS2.test(F)||!L6.bidiS3.test(F)||L6.bidiS4EN.test(F)&&L6.bidiS4AN.test(F))return!1}else if(!L6.bidiS5.test(F)||!L6.bidiS6.test(F))return!1}return!0}function U31(F){let A=F.map((B)=>{if(B.startsWith("xn--"))try{return x$.decode(B.substring(4))}catch{return""}return B}).join(".");return L6.bidiDomain.test(A)}function qI(F,A){let B=Q31(F,A);B=B.normalize("NFC");let D=B.split("."),X=U31(D),Z=!1;for(let[J,$]of D.entries()){let Y=$,E=A.transitionalProcessing;if(Y.startsWith("xn--")){if(S$(Y)){Z=!0;continue}try{Y=x$.decode(Y.substring(4))}catch{if(!A.ignoreInvalidPunycode){Z=!0;continue}}if(D[J]=Y,Y===""||!S$(Y))Z=!0;E=!1}if(Z)continue;if(!K31(Y,{...A,transitionalProcessing:E,isBidi:X}))Z=!0}return{string:D.join("."),error:Z}}function V31(F,{checkHyphens:A=!1,checkBidi:B=!1,checkJoiners:D=!1,useSTD3ASCIIRules:X=!1,verifyDNSLength:Z=!1,transitionalProcessing:J=!1,ignoreInvalidPunycode:$=!1}={}){let Y=qI(F,{checkHyphens:A,checkBidi:B,checkJoiners:D,useSTD3ASCIIRules:X,transitionalProcessing:J,ignoreInvalidPunycode:$}),E=Y.string.split(".");if(E=E.map((G)=>{if(S$(G))try{return`xn--${x$.encode(G)}`}catch{Y.error=!0}return G}),Z){let G=E.join(".").length;if(G>253||G===0)Y.error=!0;for(let C=0;C<E.length;++C)if(E[C].length>63||E[C].length===0){Y.error=!0;break}}if(Y.error)return null;return E.join(".")}function L31(F,{checkHyphens:A=!1,checkBidi:B=!1,checkJoiners:D=!1,useSTD3ASCIIRules:X=!1,transitionalProcessing:Z=!1,ignoreInvalidPunycode:J=!1}={}){let $=qI(F,{checkHyphens:A,checkBidi:B,checkJoiners:D,useSTD3ASCIIRules:X,transitionalProcessing:Z,ignoreInvalidPunycode:J});return{domain:$.string,error:$.error}}zI.exports={toASCII:V31,toUnicode:L31}});var f$=z((GR1,UI)=>{function _$(F){return F>=48&&F<=57}function KI(F){return F>=65&&F<=90||F>=97&&F<=122}function w31(F){return KI(F)||_$(F)}function R31(F){return _$(F)||F>=65&&F<=70||F>=97&&F<=102}UI.exports={isASCIIDigit:_$,isASCIIAlpha:KI,isASCIIAlphanumeric:w31,isASCIIHex:R31}});var NB=z((CR1,VI)=>{var P31=new TextEncoder,I31=new TextDecoder("utf-8",{ignoreBOM:!0});function N31(F){return P31.encode(F)}function M31(F){return I31.decode(F)}VI.exports={utf8Encode:N31,utf8DecodeWithoutBOM:M31}});var MB=z((WR1,MI)=>{var{isASCIIHex:LI}=f$(),{utf8Encode:wI}=NB();function M1(F){return F.codePointAt(0)}function j31(F){let A=F.toString(16).toUpperCase();if(A.length===1)A=`0${A}`;return`%${A}`}function RI(F){let A=new Uint8Array(F.byteLength),B=0;for(let D=0;D<F.byteLength;++D){let X=F[D];if(X!==37)A[B++]=X;else if(X===37&&(!LI(F[D+1])||!LI(F[D+2])))A[B++]=X;else{let Z=parseInt(String.fromCodePoint(F[D+1],F[D+2]),16);A[B++]=Z,D+=2}}return A.slice(0,B)}function T31(F){let A=wI(F);return RI(A)}function g$(F){return F<=31||F>126}var k31=new Set([M1(" "),M1('"'),M1("<"),M1(">"),M1("`")]);function u31(F){return g$(F)||k31.has(F)}var O31=new Set([M1(" "),M1('"'),M1("#"),M1("<"),M1(">")]);function b$(F){return g$(F)||O31.has(F)}function S31(F){return b$(F)||F===M1("'")}var x31=new Set([M1("?"),M1("`"),M1("{"),M1("}"),M1("^")]);function PI(F){return b$(F)||x31.has(F)}var _31=new Set([M1("/"),M1(":"),M1(";"),M1("="),M1("@"),M1("["),M1("\\"),M1("]"),M1("|")]);function II(F){return PI(F)||_31.has(F)}var f31=new Set([M1("$"),M1("%"),M1("&"),M1("+"),M1(",")]);function g31(F){return II(F)||f31.has(F)}var b31=new Set([M1("!"),M1("'"),M1("("),M1(")"),M1("~")]);function y31(F){return g31(F)||b31.has(F)}function NI(F,A){let B=wI(F),D="";for(let X of B)if(!A(X))D+=String.fromCharCode(X);else D+=j31(X);return D}function h31(F,A){return NI(String.fromCodePoint(F),A)}function v31(F,A,B=!1){let D="";for(let X of F)if(B&&X===" ")D+="+";else D+=NI(X,A);return D}MI.exports={isC0ControlPercentEncode:g$,isFragmentPercentEncode:u31,isQueryPercentEncode:b$,isSpecialQueryPercentEncode:S31,isPathPercentEncode:PI,isUserinfoPercentEncode:II,isURLEncodedPercentEncode:y31,percentDecodeString:T31,percentDecodeBytes:RI,utf8PercentEncodeString:v31,utf8PercentEncodeCodePoint:h31}});var c$=z((H41,T2)=>{var m31=QI(),t0=f$(),{utf8DecodeWithoutBOM:d31}=NB(),{percentDecodeString:c31,utf8PercentEncodeCodePoint:TB,utf8PercentEncodeString:kB,isC0ControlPercentEncode:OI,isFragmentPercentEncode:l31,isQueryPercentEncode:p31,isSpecialQueryPercentEncode:i31,isPathPercentEncode:n31,isUserinfoPercentEncode:v$}=MB();function d(F){return F.codePointAt(0)}var SI={ftp:21,file:null,http:80,https:443,ws:80,wss:443},z1=Symbol("failure");function jI(F){return[...F].length}function TI(F,A){let B=F[A];return isNaN(B)?void 0:String.fromCodePoint(B)}function kI(F){return F==="."||F.toLowerCase()==="%2e"}function a31(F){return F=F.toLowerCase(),F===".."||F==="%2e."||F===".%2e"||F==="%2e%2e"}function s31(F,A){return t0.isASCIIAlpha(F)&&(A===d(":")||A===d("|"))}function xI(F){return F.length===2&&t0.isASCIIAlpha(F.codePointAt(0))&&(F[1]===":"||F[1]==="|")}function r31(F){return F.length===2&&t0.isASCIIAlpha(F.codePointAt(0))&&F[1]===":"}function _I(F){return F.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function t31(F){return _I(F)||F.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function jB(F){return SI[F]!==void 0}function r0(F){return jB(F.scheme)}function y$(F){return!jB(F.scheme)}function fI(F){return SI[F]}function gI(F){if(F==="")return z1;let A=10;if(F.length>=2&&F.charAt(0)==="0"&&F.charAt(1).toLowerCase()==="x")F=F.substring(2),A=16;else if(F.length>=2&&F.charAt(0)==="0")F=F.substring(1),A=8;if(F==="")return 0;let B=/[^0-7]/u;if(A===10)B=/[^0-9]/u;if(A===16)B=/[^0-9A-Fa-f]/u;if(B.test(F))return z1;return parseInt(F,A)}function o31(F){let A=F.split(".");if(A[A.length-1]===""){if(A.length>1)A.pop()}if(A.length>4)return z1;let B=[];for(let Z of A){let J=gI(Z);if(J===z1)return z1;B.push(J)}for(let Z=0;Z<B.length-1;++Z)if(B[Z]>255)return z1;if(B[B.length-1]>=256**(5-B.length))return z1;let D=B.pop(),X=0;for(let Z of B)D+=Z*256**(3-X),++X;return D}function e31(F){let A="",B=F;for(let D=1;D<=4;++D){if(A=String(B%256)+A,D!==4)A=`.${A}`;B=Math.floor(B/256)}return A}function F41(F){let A=[0,0,0,0,0,0,0,0],B=0,D=null,X=0;if(F=Array.from(F,(Z)=>Z.codePointAt(0)),F[X]===d(":")){if(F[X+1]!==d(":"))return z1;X+=2,++B,D=B}while(X<F.length){if(B===8)return z1;if(F[X]===d(":")){if(D!==null)return z1;++X,++B,D=B;continue}let Z=0,J=0;while(J<4&&t0.isASCIIHex(F[X]))Z=Z*16+parseInt(TI(F,X),16),++X,++J;if(F[X]===d(".")){if(J===0)return z1;if(X-=J,B>6)return z1;let $=0;while(F[X]!==void 0){let Y=null;if($>0)if(F[X]===d(".")&&$<4)++X;else return z1;if(!t0.isASCIIDigit(F[X]))return z1;while(t0.isASCIIDigit(F[X])){let E=parseInt(TI(F,X));if(Y===null)Y=E;else if(Y===0)return z1;else Y=Y*10+E;if(Y>255)return z1;++X}if(A[B]=A[B]*256+Y,++$,$===2||$===4)++B}if($!==4)return z1;break}else if(F[X]===d(":")){if(++X,F[X]===void 0)return z1}else if(F[X]!==void 0)return z1;A[B]=Z,++B}if(D!==null){let Z=B-D;B=7;while(B!==0&&Z>0){let J=A[D+Z-1];A[D+Z-1]=A[B],A[B]=J,--B,--Z}}else if(D===null&&B!==8)return z1;return A}function A41(F){let A="",B=X41(F),D=!1;for(let X=0;X<=7;++X){if(D&&F[X]===0)continue;else if(D)D=!1;if(B===X){A+=X===0?"::":":",D=!0;continue}if(A+=F[X].toString(16),X!==7)A+=":"}return A}function h$(F,A=!1){if(F[0]==="["){if(F[F.length-1]!=="]")return z1;return F41(F.substring(1,F.length-1))}if(A)return D41(F);let B=d31(c31(F)),D=Z41(B);if(D===z1)return z1;if(B41(D))return o31(D);return D}function B41(F){let A=F.split(".");if(A[A.length-1]===""){if(A.length===1)return!1;A.pop()}let B=A[A.length-1];if(gI(B)!==z1)return!0;if(/^[0-9]+$/u.test(B))return!0;return!1}function D41(F){if(_I(F))return z1;return kB(F,OI)}function X41(F){let A=null,B=1,D=null,X=0;for(let Z=0;Z<F.length;++Z)if(F[Z]!==0){if(X>B)A=D,B=X;D=null,X=0}else{if(D===null)D=Z;++X}if(X>B)return D;return A}function m$(F){if(typeof F==="number")return e31(F);if(F instanceof Array)return`[${A41(F)}]`;return F}function Z41(F,A=!1){let B=m31.toASCII(F,{checkHyphens:A,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:A,transitionalProcessing:!1,verifyDNSLength:A,ignoreInvalidPunycode:!1});if(B===null)return z1;if(!A){if(B==="")return z1;if(t31(B))return z1}return B}function J41(F){let A=0,B=F.length;for(;A<B;++A)if(F.charCodeAt(A)>32)break;for(;B>A;--B)if(F.charCodeAt(B-1)>32)break;return F.substring(A,B)}function Y41(F){return F.replace(/\u0009|\u000A|\u000D/ug,"")}function bI(F){let{path:A}=F;if(A.length===0)return;if(F.scheme==="file"&&A.length===1&&E41(A[0]))return;A.pop()}function yI(F){return F.username!==""||F.password!==""}function $41(F){return F.host===null||F.host===""||F.scheme==="file"}function _5(F){return typeof F.path==="string"}function E41(F){return/^[A-Za-z]:$/u.test(F)}function q0(F,A,B,D,X){if(this.pointer=0,this.input=F,this.base=A||null,this.encodingOverride=B||"utf-8",this.stateOverride=X,this.url=D,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let J=J41(this.input);if(J!==this.input)this.parseError=!0;this.input=J}let Z=Y41(this.input);if(Z!==this.input)this.parseError=!0;this.input=Z,this.state=X||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,(J)=>J.codePointAt(0));for(;this.pointer<=this.input.length;++this.pointer){let J=this.input[this.pointer],$=isNaN(J)?void 0:String.fromCodePoint(J),Y=this[`parse ${this.state}`](J,$);if(!Y)break;else if(Y===z1){this.failure=!0;break}}}q0.prototype["parse scheme start"]=function F(A,B){if(t0.isASCIIAlpha(A))this.buffer+=B.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,z1;return!0};q0.prototype["parse scheme"]=function F(A,B){if(t0.isASCIIAlphanumeric(A)||A===d("+")||A===d("-")||A===d("."))this.buffer+=B.toLowerCase();else if(A===d(":")){if(this.stateOverride){if(r0(this.url)&&!jB(this.buffer))return!1;if(!r0(this.url)&&jB(this.buffer))return!1;if((yI(this.url)||this.url.port!==null)&&this.buffer==="file")return!1;if(this.url.scheme==="file"&&this.url.host==="")return!1}if(this.url.scheme=this.buffer,this.stateOverride){if(this.url.port===fI(this.url.scheme))this.url.port=null;return!1}if(this.buffer="",this.url.scheme==="file"){if(this.input[this.pointer+1]!==d("/")||this.input[this.pointer+2]!==d("/"))this.parseError=!0;this.state="file"}else if(r0(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme)this.state="special relative or authority";else if(r0(this.url))this.state="special authority slashes";else if(this.input[this.pointer+1]===d("/"))this.state="path or authority",++this.pointer;else this.url.path="",this.state="opaque path"}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,z1;return!0};q0.prototype["parse no scheme"]=function F(A){if(this.base===null||_5(this.base)&&A!==d("#"))return z1;else if(_5(this.base)&&A===d("#"))this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment";else if(this.base.scheme==="file")this.state="file",--this.pointer;else this.state="relative",--this.pointer;return!0};q0.prototype["parse special relative or authority"]=function F(A){if(A===d("/")&&this.input[this.pointer+1]===d("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="relative",--this.pointer;return!0};q0.prototype["parse path or authority"]=function F(A){if(A===d("/"))this.state="authority";else this.state="path",--this.pointer;return!0};q0.prototype["parse relative"]=function F(A){if(this.url.scheme=this.base.scheme,A===d("/"))this.state="relative slash";else if(r0(this.url)&&A===d("\\"))this.parseError=!0,this.state="relative slash";else if(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,A===d("?"))this.url.query="",this.state="query";else if(A===d("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(A))this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer;return!0};q0.prototype["parse relative slash"]=function F(A){if(r0(this.url)&&(A===d("/")||A===d("\\"))){if(A===d("\\"))this.parseError=!0;this.state="special authority ignore slashes"}else if(A===d("/"))this.state="authority";else this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer;return!0};q0.prototype["parse special authority slashes"]=function F(A){if(A===d("/")&&this.input[this.pointer+1]===d("/"))this.state="special authority ignore slashes",++this.pointer;else this.parseError=!0,this.state="special authority ignore slashes",--this.pointer;return!0};q0.prototype["parse special authority ignore slashes"]=function F(A){if(A!==d("/")&&A!==d("\\"))this.state="authority",--this.pointer;else this.parseError=!0;return!0};q0.prototype["parse authority"]=function F(A,B){if(A===d("@")){if(this.parseError=!0,this.atFlag)this.buffer=`%40${this.buffer}`;this.atFlag=!0;let D=jI(this.buffer);for(let X=0;X<D;++X){let Z=this.buffer.codePointAt(X);if(Z===d(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let J=TB(Z,v$);if(this.passwordTokenSeenFlag)this.url.password+=J;else this.url.username+=J}this.buffer=""}else if(isNaN(A)||A===d("/")||A===d("?")||A===d("#")||r0(this.url)&&A===d("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,z1;this.pointer-=jI(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=B;return!0};q0.prototype["parse hostname"]=q0.prototype["parse host"]=function F(A,B){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(A===d(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,z1;if(this.stateOverride==="hostname")return!1;let D=h$(this.buffer,y$(this.url));if(D===z1)return z1;this.url.host=D,this.buffer="",this.state="port"}else if(isNaN(A)||A===d("/")||A===d("?")||A===d("#")||r0(this.url)&&A===d("\\")){if(--this.pointer,r0(this.url)&&this.buffer==="")return this.parseError=!0,z1;else if(this.stateOverride&&this.buffer===""&&(yI(this.url)||this.url.port!==null))return this.parseError=!0,!1;let D=h$(this.buffer,y$(this.url));if(D===z1)return z1;if(this.url.host=D,this.buffer="",this.state="path start",this.stateOverride)return!1}else{if(A===d("["))this.arrFlag=!0;else if(A===d("]"))this.arrFlag=!1;this.buffer+=B}return!0};q0.prototype["parse port"]=function F(A,B){if(t0.isASCIIDigit(A))this.buffer+=B;else if(isNaN(A)||A===d("/")||A===d("?")||A===d("#")||r0(this.url)&&A===d("\\")||this.stateOverride){if(this.buffer!==""){let D=parseInt(this.buffer);if(D>65535)return this.parseError=!0,z1;this.url.port=D===fI(this.url.scheme)?null:D,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,z1;return!0};var G41=new Set([d("/"),d("\\"),d("?"),d("#")]);function hI(F,A){let B=F.length-A;return B>=2&&s31(F[A],F[A+1])&&(B===2||G41.has(F[A+2]))}q0.prototype["parse file"]=function F(A){if(this.url.scheme="file",this.url.host="",A===d("/")||A===d("\\")){if(A===d("\\"))this.parseError=!0;this.state="file slash"}else if(this.base!==null&&this.base.scheme==="file"){if(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,A===d("?"))this.url.query="",this.state="query";else if(A===d("#"))this.url.fragment="",this.state="fragment";else if(!isNaN(A)){if(this.url.query=null,!hI(this.input,this.pointer))bI(this.url);else this.parseError=!0,this.url.path=[];this.state="path",--this.pointer}}else this.state="path",--this.pointer;return!0};q0.prototype["parse file slash"]=function F(A){if(A===d("/")||A===d("\\")){if(A===d("\\"))this.parseError=!0;this.state="file host"}else{if(this.base!==null&&this.base.scheme==="file"){if(!hI(this.input,this.pointer)&&r31(this.base.path[0]))this.url.path.push(this.base.path[0]);this.url.host=this.base.host}this.state="path",--this.pointer}return!0};q0.prototype["parse file host"]=function F(A,B){if(isNaN(A)||A===d("/")||A===d("\\")||A===d("?")||A===d("#"))if(--this.pointer,!this.stateOverride&&xI(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let D=h$(this.buffer,y$(this.url));if(D===z1)return z1;if(D==="localhost")D="";if(this.url.host=D,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=B;return!0};q0.prototype["parse path start"]=function F(A){if(r0(this.url)){if(A===d("\\"))this.parseError=!0;if(this.state="path",A!==d("/")&&A!==d("\\"))--this.pointer}else if(!this.stateOverride&&A===d("?"))this.url.query="",this.state="query";else if(!this.stateOverride&&A===d("#"))this.url.fragment="",this.state="fragment";else if(A!==void 0){if(this.state="path",A!==d("/"))--this.pointer}else if(this.stateOverride&&this.url.host===null)this.url.path.push("");return!0};q0.prototype["parse path"]=function F(A){if(isNaN(A)||A===d("/")||r0(this.url)&&A===d("\\")||!this.stateOverride&&(A===d("?")||A===d("#"))){if(r0(this.url)&&A===d("\\"))this.parseError=!0;if(a31(this.buffer)){if(bI(this.url),A!==d("/")&&!(r0(this.url)&&A===d("\\")))this.url.path.push("")}else if(kI(this.buffer)&&A!==d("/")&&!(r0(this.url)&&A===d("\\")))this.url.path.push("");else if(!kI(this.buffer)){if(this.url.scheme==="file"&&this.url.path.length===0&&xI(this.buffer))this.buffer=`${this.buffer[0]}:`;this.url.path.push(this.buffer)}if(this.buffer="",A===d("?"))this.url.query="",this.state="query";if(A===d("#"))this.url.fragment="",this.state="fragment"}else{if(A===d("%")&&(!t0.isASCIIHex(this.input[this.pointer+1])||!t0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=TB(A,n31)}return!0};q0.prototype["parse opaque path"]=function F(A){if(A===d("?"))this.url.query="",this.state="query";else if(A===d("#"))this.url.fragment="",this.state="fragment";else if(A===d(" ")){let B=this.input[this.pointer+1];if(B===d("?")||B===d("#"))this.url.path+="%20";else this.url.path+=" "}else{if(!isNaN(A)&&A!==d("%"))this.parseError=!0;if(A===d("%")&&(!t0.isASCIIHex(this.input[this.pointer+1])||!t0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;if(!isNaN(A))this.url.path+=TB(A,OI)}return!0};q0.prototype["parse query"]=function F(A,B){if(!r0(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")this.encodingOverride="utf-8";if(!this.stateOverride&&A===d("#")||isNaN(A)){let D=r0(this.url)?i31:p31;if(this.url.query+=kB(this.buffer,D),this.buffer="",A===d("#"))this.url.fragment="",this.state="fragment"}else if(!isNaN(A)){if(A===d("%")&&(!t0.isASCIIHex(this.input[this.pointer+1])||!t0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.buffer+=B}return!0};q0.prototype["parse fragment"]=function F(A){if(!isNaN(A)){if(A===d("%")&&(!t0.isASCIIHex(this.input[this.pointer+1])||!t0.isASCIIHex(this.input[this.pointer+2])))this.parseError=!0;this.url.fragment+=TB(A,l31)}return!0};function C41(F,A){let B=`${F.scheme}:`;if(F.host!==null){if(B+="//",F.username!==""||F.password!==""){if(B+=F.username,F.password!=="")B+=`:${F.password}`;B+="@"}if(B+=m$(F.host),F.port!==null)B+=`:${F.port}`}if(F.host===null&&!_5(F)&&F.path.length>1&&F.path[0]==="")B+="/.";if(B+=d$(F),F.query!==null)B+=`?${F.query}`;if(!A&&F.fragment!==null)B+=`#${F.fragment}`;return B}function W41(F){let A=`${F.scheme}://`;if(A+=m$(F.host),F.port!==null)A+=`:${F.port}`;return A}function d$(F){if(_5(F))return F.path;let A="";for(let B of F.path)A+=`/${B}`;return A}H41.serializeURL=C41;H41.serializePath=d$;H41.serializeURLOrigin=function(F){switch(F.scheme){case"blob":{let A=H41.parseURL(d$(F));if(A===null)return"null";if(A.scheme!=="http"&&A.scheme!=="https")return"null";return H41.serializeURLOrigin(A)}case"ftp":case"http":case"https":case"ws":case"wss":return W41({scheme:F.scheme,host:F.host,port:F.port});case"file":return"null";default:return"null"}};H41.basicURLParse=function(F,A){if(A===void 0)A={};let B=new q0(F,A.baseURL,A.encodingOverride,A.url,A.stateOverride);if(B.failure)return null;return B.url};H41.setTheUsername=function(F,A){F.username=kB(A,v$)};H41.setThePassword=function(F,A){F.password=kB(A,v$)};H41.serializeHost=m$;H41.cannotHaveAUsernamePasswordPort=$41;H41.hasAnOpaquePath=_5;H41.serializeInteger=function(F){return String(F)};H41.parseURL=function(F,A){if(A===void 0)A={};return H41.basicURLParse(F,{baseURL:A.baseURL,encodingOverride:A.encodingOverride})}});var l$=z((HR1,nI)=>{var{utf8Encode:P41,utf8DecodeWithoutBOM:mI}=NB(),{percentDecodeBytes:dI,utf8PercentEncodeString:cI,isURLEncodedPercentEncode:lI}=MB();function pI(F){return F.codePointAt(0)}function I41(F){let A=j41(F,pI("&")),B=[];for(let D of A){if(D.length===0)continue;let X,Z,J=D.indexOf(pI("="));if(J>=0)X=D.slice(0,J),Z=D.slice(J+1);else X=D,Z=new Uint8Array(0);X=iI(X,43,32),Z=iI(Z,43,32);let $=mI(dI(X)),Y=mI(dI(Z));B.push([$,Y])}return B}function N41(F){return I41(P41(F))}function M41(F){let A="";for(let[B,D]of F.entries()){let X=cI(D[0],lI,!0),Z=cI(D[1],lI,!0);if(B!==0)A+="&";A+=`${X}=${Z}`}return A}function j41(F,A){let B=[],D=0,X=F.indexOf(A);while(X>=0)B.push(F.slice(D,X)),D=X+1,X=F.indexOf(A,D);if(D!==F.length)B.push(F.slice(D));return B}function iI(F,A,B){let D=F.indexOf(A);while(D>=0)F[D]=B,D=F.indexOf(A,D+1);return F}nI.exports={parseUrlencodedString:N41,serializeUrlencoded:M41}});var sI=z((T41)=>{var aI=RB(),uB=IB();T41.convert=(F,A,{context:B="The provided value"}={})=>{if(typeof A!=="function")throw new F.TypeError(B+" is not a function");function D(...X){let Z=uB.tryWrapperForImpl(this),J;for(let $=0;$<X.length;$++)X[$]=uB.tryWrapperForImpl(X[$]);return J=Reflect.apply(A,Z,X),J=aI.any(J,{context:B,globals:F}),J}return D.construct=(...X)=>{for(let J=0;J<X.length;J++)X[J]=uB.tryWrapperForImpl(X[J]);let Z=Reflect.construct(A,X);return Z=aI.any(Z,{context:B,globals:F}),Z},D[uB.wrapperSymbol]=A,D.objectReference=A,D}});var rI=z((u41)=>{var p$=l$();u41.implementation=class F{constructor(A,B,{doNotStripQMark:D=!1}){let X=B[0];if(this._list=[],this._url=null,!D&&typeof X==="string"&&X[0]==="?")X=X.slice(1);if(Array.isArray(X))for(let Z of X){if(Z.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([Z[0],Z[1]])}else if(typeof X==="object"&&Object.getPrototypeOf(X)===null)for(let Z of Object.keys(X)){let J=X[Z];this._list.push([Z,J])}else this._list=p$.parseUrlencodedString(X)}_updateSteps(){if(this._url!==null){let A=p$.serializeUrlencoded(this._list);if(A==="")A=null;this._url._url.query=A}}get size(){return this._list.length}append(A,B){this._list.push([A,B]),this._updateSteps()}delete(A,B){let D=0;while(D<this._list.length)if(this._list[D][0]===A&&(B===void 0||this._list[D][1]===B))this._list.splice(D,1);else D++;this._updateSteps()}get(A){for(let B of this._list)if(B[0]===A)return B[1];return null}getAll(A){let B=[];for(let D of this._list)if(D[0]===A)B.push(D[1]);return B}has(A,B){for(let D of this._list)if(D[0]===A&&(B===void 0||D[1]===B))return!0;return!1}set(A,B){let D=!1,X=0;while(X<this._list.length)if(this._list[X][0]===A)if(D)this._list.splice(X,1);else D=!0,this._list[X][1]=B,X++;else X++;if(!D)this._list.push([A,B]);this._updateSteps()}sort(){this._list.sort((A,B)=>{if(A[0]<B[0])return-1;if(A[0]>B[0])return 1;return 0}),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return p$.serializeUrlencoded(this._list)}}});var n$=z((_41)=>{var b2=RB(),i1=IB(),S41=sI(),tI=i1.newObjectInRealm,I0=i1.implSymbol,oI=i1.ctorRegistrySymbol;_41.is=(F)=>{return i1.isObject(F)&&i1.hasOwn(F,I0)&&F[I0]instanceof H4.implementation};_41.isImpl=(F)=>{return i1.isObject(F)&&F instanceof H4.implementation};_41.convert=(F,A,{context:B="The provided value"}={})=>{if(_41.is(A))return i1.implForWrapper(A);throw new F.TypeError(`${B} is not of type 'URLSearchParams'.`)};_41.createDefaultIterator=(F,A,B)=>{let X=F[oI]["URLSearchParams Iterator"],Z=Object.create(X);return Object.defineProperty(Z,i1.iterInternalSymbol,{value:{target:A,kind:B,index:0},configurable:!0}),Z};function eI(F,A){let B;if(A!==void 0)B=A.prototype;if(!i1.isObject(B))B=F[oI].URLSearchParams.prototype;return Object.create(B)}_41.create=(F,A,B)=>{let D=eI(F);return _41.setup(D,F,A,B)};_41.createImpl=(F,A,B)=>{let D=_41.create(F,A,B);return i1.implForWrapper(D)};_41._internalSetup=(F,A)=>{};_41.setup=(F,A,B=[],D={})=>{if(D.wrapper=F,_41._internalSetup(F,A),Object.defineProperty(F,I0,{value:new H4.implementation(A,B,D),configurable:!0}),F[I0][i1.wrapperSymbol]=F,H4.init)H4.init(F[I0]);return F};_41.new=(F,A)=>{let B=eI(F,A);if(_41._internalSetup(B,F),Object.defineProperty(B,I0,{value:Object.create(H4.implementation.prototype),configurable:!0}),B[I0][i1.wrapperSymbol]=B,H4.init)H4.init(B[I0]);return B[I0]};var x41=new Set(["Window","Worker"]);_41.install=(F,A)=>{if(!A.some((X)=>x41.has(X)))return;let B=i1.initCtorRegistry(F);class D{constructor(){let X=[];{let Z=arguments[0];if(Z!==void 0)if(i1.isObject(Z))if(Z[Symbol.iterator]!==void 0)if(!i1.isObject(Z))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else{let J=[],$=Z;for(let Y of $){if(!i1.isObject(Y))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");else{let E=[],G=Y;for(let C of G)C=b2.USVString(C,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:F}),E.push(C);Y=E}J.push(Y)}Z=J}else if(!i1.isObject(Z))throw new F.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else{let J=Object.create(null);for(let $ of Reflect.ownKeys(Z)){let Y=Object.getOwnPropertyDescriptor(Z,$);if(Y&&Y.enumerable){let E=$;E=b2.USVString(E,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:F});let G=Z[$];G=b2.USVString(G,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:F}),J[E]=G}}Z=J}else Z=b2.USVString(Z,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:F});else Z="";X.push(Z)}return _41.setup(Object.create(new.target.prototype),F,X)}append(X,Z){let J=this!==null&&this!==void 0?this:F;if(!_41.is(J))throw new F.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new F.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let $=[];{let Y=arguments[0];Y=b2.USVString(Y,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:F}),$.push(Y)}{let Y=arguments[1];Y=b2.USVString(Y,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:F}),$.push(Y)}return i1.tryWrapperForImpl(J[I0].append(...$))}delete(X){let Z=this!==null&&this!==void 0?this:F;if(!_41.is(Z))throw new F.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let J=[];{let $=arguments[0];$=b2.USVString($,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:F}),J.push($)}{let $=arguments[1];if($!==void 0)$=b2.USVString($,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:F});J.push($)}return i1.tryWrapperForImpl(Z[I0].delete(...J))}get(X){let Z=this!==null&&this!==void 0?this:F;if(!_41.is(Z))throw new F.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let J=[];{let $=arguments[0];$=b2.USVString($,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:F}),J.push($)}return Z[I0].get(...J)}getAll(X){let Z=this!==null&&this!==void 0?this:F;if(!_41.is(Z))throw new F.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let J=[];{let $=arguments[0];$=b2.USVString($,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:F}),J.push($)}return i1.tryWrapperForImpl(Z[I0].getAll(...J))}has(X){let Z=this!==null&&this!==void 0?this:F;if(!_41.is(Z))throw new F.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let J=[];{let $=arguments[0];$=b2.USVString($,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:F}),J.push($)}{let $=arguments[1];if($!==void 0)$=b2.USVString($,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:F});J.push($)}return Z[I0].has(...J)}set(X,Z){let J=this!==null&&this!==void 0?this:F;if(!_41.is(J))throw new F.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new F.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let $=[];{let Y=arguments[0];Y=b2.USVString(Y,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:F}),$.push(Y)}{let Y=arguments[1];Y=b2.USVString(Y,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:F}),$.push(Y)}return i1.tryWrapperForImpl(J[I0].set(...$))}sort(){let X=this!==null&&this!==void 0?this:F;if(!_41.is(X))throw new F.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return i1.tryWrapperForImpl(X[I0].sort())}toString(){let X=this!==null&&this!==void 0?this:F;if(!_41.is(X))throw new F.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return X[I0].toString()}keys(){if(!_41.is(this))throw new F.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return _41.createDefaultIterator(F,this,"key")}values(){if(!_41.is(this))throw new F.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return _41.createDefaultIterator(F,this,"value")}entries(){if(!_41.is(this))throw new F.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return _41.createDefaultIterator(F,this,"key+value")}forEach(X){if(!_41.is(this))throw new F.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new F.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");X=S41.convert(F,X,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let Z=arguments[1],J=Array.from(this[I0]),$=0;while($<J.length){let[Y,E]=J[$].map(i1.tryWrapperForImpl);X.call(Z,E,Y,this),J=Array.from(this[I0]),$++}}get size(){let X=this!==null&&this!==void 0?this:F;if(!_41.is(X))throw new F.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return X[I0].size}}Object.defineProperties(D.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:D.prototype.entries,configurable:!0,writable:!0}}),B.URLSearchParams=D,B["URLSearchParams Iterator"]=Object.create(B["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),i1.define(B["URLSearchParams Iterator"],{next(){let X=this&&this[i1.iterInternalSymbol];if(!X)throw new F.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:Z,kind:J,index:$}=X,Y=Array.from(Z[I0]),E=Y.length;if($>=E)return tI(F,{value:void 0,done:!0});let G=Y[$];return X.index=$+1,tI(F,i1.iteratorResult(G.map(i1.tryWrapperForImpl),J))}}),Object.defineProperty(F,"URLSearchParams",{configurable:!0,writable:!0,value:D})};var H4=rI()});var DN=z((m41)=>{var d1=c$(),BN=l$(),v41=n$();m41.implementation=class F{constructor(A,[B,D]){let X=null;if(D!==void 0){if(X=d1.basicURLParse(D),X===null)throw new TypeError(`Invalid base URL: ${D}`)}let Z=d1.basicURLParse(B,{baseURL:X});if(Z===null)throw new TypeError(`Invalid URL: ${B}`);let J=Z.query!==null?Z.query:"";this._url=Z,this._query=v41.createImpl(A,[J],{doNotStripQMark:!0}),this._query._url=this}static parse(A,B,D){try{return new F(A,[B,D])}catch{return null}}static canParse(A,B){let D=null;if(B!==void 0){if(D=d1.basicURLParse(B),D===null)return!1}if(d1.basicURLParse(A,{baseURL:D})===null)return!1;return!0}get href(){return d1.serializeURL(this._url)}set href(A){let B=d1.basicURLParse(A);if(B===null)throw new TypeError(`Invalid URL: ${A}`);this._url=B,this._query._list.splice(0);let{query:D}=B;if(D!==null)this._query._list=BN.parseUrlencodedString(D)}get origin(){return d1.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(A){d1.basicURLParse(`${A}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(A){if(d1.cannotHaveAUsernamePasswordPort(this._url))return;d1.setTheUsername(this._url,A)}get password(){return this._url.password}set password(A){if(d1.cannotHaveAUsernamePasswordPort(this._url))return;d1.setThePassword(this._url,A)}get host(){let A=this._url;if(A.host===null)return"";if(A.port===null)return d1.serializeHost(A.host);return`${d1.serializeHost(A.host)}:${d1.serializeInteger(A.port)}`}set host(A){if(d1.hasAnOpaquePath(this._url))return;d1.basicURLParse(A,{url:this._url,stateOverride:"host"})}get hostname(){if(this._url.host===null)return"";return d1.serializeHost(this._url.host)}set hostname(A){if(d1.hasAnOpaquePath(this._url))return;d1.basicURLParse(A,{url:this._url,stateOverride:"hostname"})}get port(){if(this._url.port===null)return"";return d1.serializeInteger(this._url.port)}set port(A){if(d1.cannotHaveAUsernamePasswordPort(this._url))return;if(A==="")this._url.port=null;else d1.basicURLParse(A,{url:this._url,stateOverride:"port"})}get pathname(){return d1.serializePath(this._url)}set pathname(A){if(d1.hasAnOpaquePath(this._url))return;this._url.path=[],d1.basicURLParse(A,{url:this._url,stateOverride:"path start"})}get search(){if(this._url.query===null||this._url.query==="")return"";return`?${this._url.query}`}set search(A){let B=this._url;if(A===""){B.query=null,this._query._list=[];return}let D=A[0]==="?"?A.substring(1):A;B.query="",d1.basicURLParse(D,{url:B,stateOverride:"query"}),this._query._list=BN.parseUrlencodedString(D)}get searchParams(){return this._query}get hash(){if(this._url.fragment===null||this._url.fragment==="")return"";return`#${this._url.fragment}`}set hash(A){if(A===""){this._url.fragment=null;return}let B=A[0]==="#"?A.substring(1):A;this._url.fragment="",d1.basicURLParse(B,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var YN=z((p41)=>{var q2=RB(),y2=IB(),x1=y2.implSymbol,c41=y2.ctorRegistrySymbol;p41.is=(F)=>{return y2.isObject(F)&&y2.hasOwn(F,x1)&&F[x1]instanceof Z3.implementation};p41.isImpl=(F)=>{return y2.isObject(F)&&F instanceof Z3.implementation};p41.convert=(F,A,{context:B="The provided value"}={})=>{if(p41.is(A))return y2.implForWrapper(A);throw new F.TypeError(`${B} is not of type 'URL'.`)};function XN(F,A){let B;if(A!==void 0)B=A.prototype;if(!y2.isObject(B))B=F[c41].URL.prototype;return Object.create(B)}p41.create=(F,A,B)=>{let D=XN(F);return p41.setup(D,F,A,B)};p41.createImpl=(F,A,B)=>{let D=p41.create(F,A,B);return y2.implForWrapper(D)};p41._internalSetup=(F,A)=>{};p41.setup=(F,A,B=[],D={})=>{if(D.wrapper=F,p41._internalSetup(F,A),Object.defineProperty(F,x1,{value:new Z3.implementation(A,B,D),configurable:!0}),F[x1][y2.wrapperSymbol]=F,Z3.init)Z3.init(F[x1]);return F};p41.new=(F,A)=>{let B=XN(F,A);if(p41._internalSetup(B,F),Object.defineProperty(B,x1,{value:Object.create(Z3.implementation.prototype),configurable:!0}),B[x1][y2.wrapperSymbol]=B,Z3.init)Z3.init(B[x1]);return B[x1]};var l41=new Set(["Window","Worker"]);p41.install=(F,A)=>{if(!A.some((X)=>l41.has(X)))return;let B=y2.initCtorRegistry(F);class D{constructor(X){if(arguments.length<1)throw new F.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let Z=[];{let J=arguments[0];J=q2.USVString(J,{context:"Failed to construct 'URL': parameter 1",globals:F}),Z.push(J)}{let J=arguments[1];if(J!==void 0)J=q2.USVString(J,{context:"Failed to construct 'URL': parameter 2",globals:F});Z.push(J)}return p41.setup(Object.create(new.target.prototype),F,Z)}toJSON(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return X[x1].toJSON()}get href(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get href' called on an object that is not a valid instance of URL.");return X[x1].href}set href(X){let Z=this!==null&&this!==void 0?this:F;if(!p41.is(Z))throw new F.TypeError("'set href' called on an object that is not a valid instance of URL.");X=q2.USVString(X,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:F}),Z[x1].href=X}toString(){let X=this;if(!p41.is(X))throw new F.TypeError("'toString' called on an object that is not a valid instance of URL.");return X[x1].href}get origin(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get origin' called on an object that is not a valid instance of URL.");return X[x1].origin}get protocol(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return X[x1].protocol}set protocol(X){let Z=this!==null&&this!==void 0?this:F;if(!p41.is(Z))throw new F.TypeError("'set protocol' called on an object that is not a valid instance of URL.");X=q2.USVString(X,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:F}),Z[x1].protocol=X}get username(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get username' called on an object that is not a valid instance of URL.");return X[x1].username}set username(X){let Z=this!==null&&this!==void 0?this:F;if(!p41.is(Z))throw new F.TypeError("'set username' called on an object that is not a valid instance of URL.");X=q2.USVString(X,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:F}),Z[x1].username=X}get password(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get password' called on an object that is not a valid instance of URL.");return X[x1].password}set password(X){let Z=this!==null&&this!==void 0?this:F;if(!p41.is(Z))throw new F.TypeError("'set password' called on an object that is not a valid instance of URL.");X=q2.USVString(X,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:F}),Z[x1].password=X}get host(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get host' called on an object that is not a valid instance of URL.");return X[x1].host}set host(X){let Z=this!==null&&this!==void 0?this:F;if(!p41.is(Z))throw new F.TypeError("'set host' called on an object that is not a valid instance of URL.");X=q2.USVString(X,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:F}),Z[x1].host=X}get hostname(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return X[x1].hostname}set hostname(X){let Z=this!==null&&this!==void 0?this:F;if(!p41.is(Z))throw new F.TypeError("'set hostname' called on an object that is not a valid instance of URL.");X=q2.USVString(X,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:F}),Z[x1].hostname=X}get port(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get port' called on an object that is not a valid instance of URL.");return X[x1].port}set port(X){let Z=this!==null&&this!==void 0?this:F;if(!p41.is(Z))throw new F.TypeError("'set port' called on an object that is not a valid instance of URL.");X=q2.USVString(X,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:F}),Z[x1].port=X}get pathname(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return X[x1].pathname}set pathname(X){let Z=this!==null&&this!==void 0?this:F;if(!p41.is(Z))throw new F.TypeError("'set pathname' called on an object that is not a valid instance of URL.");X=q2.USVString(X,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:F}),Z[x1].pathname=X}get search(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get search' called on an object that is not a valid instance of URL.");return X[x1].search}set search(X){let Z=this!==null&&this!==void 0?this:F;if(!p41.is(Z))throw new F.TypeError("'set search' called on an object that is not a valid instance of URL.");X=q2.USVString(X,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:F}),Z[x1].search=X}get searchParams(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return y2.getSameObject(this,"searchParams",()=>{return y2.tryWrapperForImpl(X[x1].searchParams)})}get hash(){let X=this!==null&&this!==void 0?this:F;if(!p41.is(X))throw new F.TypeError("'get hash' called on an object that is not a valid instance of URL.");return X[x1].hash}set hash(X){let Z=this!==null&&this!==void 0?this:F;if(!p41.is(Z))throw new F.TypeError("'set hash' called on an object that is not a valid instance of URL.");X=q2.USVString(X,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:F}),Z[x1].hash=X}static parse(X){if(arguments.length<1)throw new F.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let Z=[];{let J=arguments[0];J=q2.USVString(J,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:F}),Z.push(J)}{let J=arguments[1];if(J!==void 0)J=q2.USVString(J,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:F});Z.push(J)}return y2.tryWrapperForImpl(Z3.implementation.parse(F,...Z))}static canParse(X){if(arguments.length<1)throw new F.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let Z=[];{let J=arguments[0];J=q2.USVString(J,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:F}),Z.push(J)}{let J=arguments[1];if(J!==void 0)J=q2.USVString(J,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:F});Z.push(J)}return Z3.implementation.canParse(...Z)}}if(Object.defineProperties(D.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(D,{parse:{enumerable:!0},canParse:{enumerable:!0}}),B.URL=D,Object.defineProperty(F,"URL",{configurable:!0,writable:!0,value:D}),A.includes("Window"))Object.defineProperty(F,"webkitURL",{configurable:!0,writable:!0,value:D})};var Z3=DN()});var $N=z((e41)=>{var t41=YN(),o41=n$();e41.URL=t41;e41.URLSearchParams=o41});var GN=z((X91)=>{var{URL:B91,URLSearchParams:D91}=$N(),v6=c$(),EN=MB(),SB={Array,Object,Promise,String,TypeError};B91.install(SB,["Window"]);D91.install(SB,["Window"]);X91.URL=SB.URL;X91.URLSearchParams=SB.URLSearchParams;X91.parseURL=v6.parseURL;X91.basicURLParse=v6.basicURLParse;X91.serializeURL=v6.serializeURL;X91.serializePath=v6.serializePath;X91.serializeHost=v6.serializeHost;X91.serializeInteger=v6.serializeInteger;X91.serializeURLOrigin=v6.serializeURLOrigin;X91.setTheUsername=v6.setTheUsername;X91.setThePassword=v6.setThePassword;X91.cannotHaveAUsernamePasswordPort=v6.cannotHaveAUsernamePasswordPort;X91.hasAnOpaquePath=v6.hasAnOpaquePath;X91.percentDecodeString=EN.percentDecodeString;X91.percentDecodeBytes=EN.percentDecodeBytes});var WN=z((J3)=>{var L91=J3&&J3.__createBinding||(Object.create?function(F,A,B,D){if(D===void 0)D=B;var X=Object.getOwnPropertyDescriptor(A,B);if(!X||("get"in X?!A.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return A[B]}};Object.defineProperty(F,D,X)}:function(F,A,B,D){if(D===void 0)D=B;F[D]=A[B]}),w91=J3&&J3.__setModuleDefault||(Object.create?function(F,A){Object.defineProperty(F,"default",{enumerable:!0,value:A})}:function(F,A){F.default=A}),R91=J3&&J3.__importStar||function(){var F=function(A){return F=Object.getOwnPropertyNames||function(B){var D=[];for(var X in B)if(Object.prototype.hasOwnProperty.call(B,X))D[D.length]=X;return D},F(A)};return function(A){if(A&&A.__esModule)return A;var B={};if(A!=null){for(var D=F(A),X=0;X<D.length;X++)if(D[X]!=="default")L91(B,A,D[X])}return w91(B,A),B}}();Object.defineProperty(J3,"__esModule",{value:!0});J3.redactValidConnectionString=P91;J3.redactConnectionString=I91;var CN=R91(s$());function P91(F,A){let B=F.clone(),D=A?.replacementString??"_credentials_",X=A?.redactUsernames??!0;if((B.username||B.password)&&X)B.username=D,B.password="";else if(B.password)B.password=D;if(B.searchParams.has("authMechanismProperties")){let Z=new CN.CommaAndColonSeparatedRecord(B.searchParams.get("authMechanismProperties"));if(Z.get("AWS_SESSION_TOKEN"))Z.set("AWS_SESSION_TOKEN",D),B.searchParams.set("authMechanismProperties",Z.toString())}if(B.searchParams.has("tlsCertificateKeyFilePassword"))B.searchParams.set("tlsCertificateKeyFilePassword",D);if(B.searchParams.has("proxyUsername")&&X)B.searchParams.set("proxyUsername",D);if(B.searchParams.has("proxyPassword"))B.searchParams.set("proxyPassword",D);return B}function I91(F,A){let B=A?.replacementString??"<credentials>",D=A?.redactUsernames??!0,X;try{X=new CN.default(F)}catch{}if(X)return A={...A,replacementString:"___credentials___"},X.redact(A).toString().replace(/___credentials___/g,B);let Z=B,J=[($)=>$.replace(D?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${Z}$3`),($)=>$.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${Z}`),($)=>$.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${Z}`),($)=>D?$.replace(/(proxyUsername=)([^&]+)/gi,`$1${Z}`):$,($)=>$.replace(/(proxyPassword=)([^&]+)/gi,`$1${Z}`)];for(let $ of J)F=$(F);return F}});var s$=z((t$)=>{Object.defineProperty(t$,"__esModule",{value:!0});t$.CommaAndColonSeparatedRecord=t$.ConnectionString=t$.redactConnectionString=void 0;var N91=GN(),HN=WN();Object.defineProperty(t$,"redactConnectionString",{enumerable:!0,get:function(){return HN.redactConnectionString}});var f5="__this_is_a_placeholder__";function M91(F){return F.startsWith("mongodb://")||F.startsWith("mongodb+srv://")}var j91=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/;class r$ extends Map{delete(F){return super.delete(this._normalizeKey(F))}get(F){return super.get(this._normalizeKey(F))}has(F){return super.has(this._normalizeKey(F))}set(F,A){return super.set(this._normalizeKey(F),A)}_normalizeKey(F){F=`${F}`;for(let A of this.keys())if(A.toLowerCase()===F.toLowerCase()){F=A;break}return F}}function T91(F){return class A extends F{append(B,D){return super.append(this._normalizeKey(B),D)}delete(B){return super.delete(this._normalizeKey(B))}get(B){return super.get(this._normalizeKey(B))}getAll(B){return super.getAll(this._normalizeKey(B))}has(B){return super.has(this._normalizeKey(B))}set(B,D){return super.set(this._normalizeKey(B),D)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(B){return r$.prototype._normalizeKey.call(this,B)}}}class qN extends N91.URL{}class Y3 extends Error{get name(){return"MongoParseError"}}class g5 extends qN{_hosts;constructor(F,A={}){let{looseValidation:B}=A;if(!B&&!M91(F))throw new Y3('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let D=F.match(j91);if(!D)throw new Y3(`Invalid connection string "${F}"`);let{protocol:X,username:Z,password:J,hosts:$,rest:Y}=D.groups??{};if(!B){if(!X||!$)throw new Y3(`Protocol and host list are required in "${F}"`);try{decodeURIComponent(Z??""),decodeURIComponent(J??"")}catch(C){throw new Y3(C.message)}let G=/[:/?#[\]@]/gi;if(Z?.match(G))throw new Y3(`Username contains unescaped characters ${Z}`);if(!Z||!J){let C=F.replace(`${X}://`,"");if(C.startsWith("@")||C.startsWith(":"))throw new Y3("URI contained empty userinfo section")}if(J?.match(G))throw new Y3("Password contains unescaped characters")}let E="";if(typeof Z==="string")E+=Z;if(typeof J==="string")E+=`:${J}`;if(E)E+="@";try{super(`${X.toLowerCase()}://${E}${f5}${Y}`)}catch(G){if(B)new g5(F,{...A,looseValidation:!1});if(typeof G.message==="string")G.message=G.message.replace(f5,$);throw G}if(this._hosts=$.split(","),!B){if(this.isSRV&&this.hosts.length!==1)throw new Y3("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some((G)=>G.includes(":")))throw new Y3("mongodb+srv URI cannot have port number")}if(!this.pathname)this.pathname="/";Object.setPrototypeOf(this.searchParams,T91(this.searchParams.constructor).prototype)}get host(){return f5}set host(F){throw new Error("No single host for connection string")}get hostname(){return f5}set hostname(F){throw new Error("No single host for connection string")}get port(){return""}set port(F){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(F){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(F){this._hosts=F}toString(){return super.toString().replace(f5,this.hosts.join(","))}clone(){return new g5(this.toString(),{looseValidation:!0})}redact(F){return HN.redactValidConnectionString(this,F)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:F,origin:A,protocol:B,username:D,password:X,hosts:Z,pathname:J,search:$,searchParams:Y,hash:E}=this;return{href:F,origin:A,protocol:B,username:D,password:X,hosts:Z,pathname:J,search:$,searchParams:Y,hash:E}}}t$.ConnectionString=g5;class zN extends r${constructor(F){super();for(let A of(F??"").split(",")){if(!A)continue;let B=A.indexOf(":");if(B===-1)this.set(A,"");else this.set(A.slice(0,B),A.slice(B+1))}}toString(){return[...this].map((F)=>F.join(":")).join(",")}}t$.CommaAndColonSeparatedRecord=zN;t$.default=g5});var y5=z((IN)=>{Object.defineProperty(IN,"__esModule",{value:!0});IN.OpCompressedRequest=IN.OpMsgResponse=IN.OpMsgRequest=IN.DocumentSequence=IN.OpReply=IN.OpQueryRequest=void 0;var _7=$1(),b5=l(),o$=h5(),S7=R3(),x7=0,O91=2,S91=4,x91=8,_91=16,f91=32,g91=64,b91=128,y91=1,h91=2,v91=4,m91=8,d91=_7.BSON.onDemand.ByteUtils.encodeUTF8Into;class FE{constructor(F,A,B){this.moreToCome=!1;let D=`${F}.$cmd`;if(typeof F!=="string")throw new b5.MongoRuntimeError("Database name must be a string for a query");if(A==null)throw new b5.MongoRuntimeError("A query document must be specified for query");if(D.indexOf("\x00")!==-1)throw new b5.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=F,this.query=A,this.ns=D,this.numberToSkip=B.numberToSkip||0,this.numberToReturn=B.numberToReturn||0,this.returnFieldSelector=B.returnFieldSelector||void 0,this.requestId=B.requestId??FE.getRequestId(),this.pre32Limit=B.pre32Limit,this.serializeFunctions=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,this.ignoreUndefined=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!1,this.maxBsonSize=B.maxBsonSize||16777216,this.checkKeys=typeof B.checkKeys==="boolean"?B.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof B.secondaryOk==="boolean"?B.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=x7++}nextRequestId(){return x7+1}static getRequestId(){return++x7}toBin(){let F=[],A=null,B=0;if(this.tailable)B|=O91;if(this.secondaryOk)B|=S91;if(this.oplogReplay)B|=x91;if(this.noCursorTimeout)B|=_91;if(this.awaitData)B|=f91;if(this.exhaust)B|=g91;if(this.partial)B|=b91;if(this.batchSize!==this.numberToReturn)this.numberToReturn=this.batchSize;let D=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);F.push(D);let X=_7.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});if(F.push(X),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0)A=_7.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),F.push(A);let Z=D.length+X.length+(A?A.length:0),J=4;return D[3]=Z>>24&255,D[2]=Z>>16&255,D[1]=Z>>8&255,D[0]=Z&255,D[J+3]=this.requestId>>24&255,D[J+2]=this.requestId>>16&255,D[J+1]=this.requestId>>8&255,D[J]=this.requestId&255,J=J+4,D[J+3]=0,D[J+2]=0,D[J+1]=0,D[J]=0,J=J+4,D[J+3]=S7.OP_QUERY>>24&255,D[J+2]=S7.OP_QUERY>>16&255,D[J+1]=S7.OP_QUERY>>8&255,D[J]=S7.OP_QUERY&255,J=J+4,D[J+3]=B>>24&255,D[J+2]=B>>16&255,D[J+1]=B>>8&255,D[J]=B&255,J=J+4,J=J+D.write(this.ns,J,"utf8")+1,D[J-1]=0,D[J+3]=this.numberToSkip>>24&255,D[J+2]=this.numberToSkip>>16&255,D[J+1]=this.numberToSkip>>8&255,D[J]=this.numberToSkip&255,J=J+4,D[J+3]=this.numberToReturn>>24&255,D[J+2]=this.numberToReturn>>16&255,D[J+1]=this.numberToReturn>>8&255,D[J]=this.numberToReturn&255,J=J+4,F}}IN.OpQueryRequest=FE;class UN{constructor(F,A,B,D){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=F,this.data=B,this.opts=D??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=A.length,this.requestId=A.requestId,this.responseTo=A.responseTo,this.opCode=A.opCode,this.fromCompressed=A.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new _7.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>4294967295)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&y91)!==0,this.queryFailure=(this.responseFlags&h91)!==0,this.shardConfigStale=(this.responseFlags&v91)!==0,this.awaitCapable=(this.responseFlags&m91)!==0;for(let F=0;F<this.numberReturned;F++){let A=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,B=this.data.subarray(this.index,this.index+A);this.sections.push(B),this.index=this.index+A}return this.parsed=!0,this.sections[0]}}IN.OpReply=UN;var VN=1,LN=2,wN=65536;class AE{constructor(F,A){this.field=F,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let B=Buffer.allocUnsafe(5+this.field.length+1);if(B[0]=1,d91(B,`${this.field}\x00`,5),this.chunks.push(B),this.header=B,A)for(let D of A)this.push(D,_7.serialize(D))}push(F,A){return this.serializedDocumentsLength+=A.length,this.documents.push(F),this.chunks.push(A),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}}IN.DocumentSequence=AE;class xB{constructor(F,A,B){if(A==null)throw new b5.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=F,this.command=A,this.command.$db=F,this.options=B??{},this.requestId=B.requestId?B.requestId:xB.getRequestId(),this.serializeFunctions=typeof B.serializeFunctions==="boolean"?B.serializeFunctions:!1,this.ignoreUndefined=typeof B.ignoreUndefined==="boolean"?B.ignoreUndefined:!1,this.checkKeys=typeof B.checkKeys==="boolean"?B.checkKeys:!1,this.maxBsonSize=B.maxBsonSize||16777216,this.checksumPresent=!1,this.moreToCome=B.moreToCome??A.writeConcern?.w===0,this.exhaustAllowed=typeof B.exhaustAllowed==="boolean"?B.exhaustAllowed:!1}toBin(){let F=[],A=0;if(this.checksumPresent)A|=VN;if(this.moreToCome)A|=LN;if(this.exhaustAllowed)A|=wN;let B=Buffer.alloc(20);F.push(B);let D=B.length,X=this.command;return D+=this.makeSections(F,X),B.writeInt32LE(D,0),B.writeInt32LE(this.requestId,4),B.writeInt32LE(0,8),B.writeInt32LE(S7.OP_MSG,12),B.writeUInt32LE(A,16),F}makeSections(F,A){let B=this.extractDocumentSequences(A),D=Buffer.allocUnsafe(1);D[0]=0;let X=this.serializeBson(A);return F.push(D),F.push(X),F.push(B),D.length+X.length+B.length}extractDocumentSequences(F){let A=[];for(let[B,D]of Object.entries(F))if(D instanceof AE)A.push(D.toBin()),delete F[B];if(A.length>0)return Buffer.concat(A);return Buffer.alloc(0)}serializeBson(F){return _7.serialize(F,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return x7=x7+1&2147483647,x7}}IN.OpMsgRequest=xB;class RN{constructor(F,A,B,D){this.index=0,this.sections=[],this.parsed=!1,this.raw=F,this.data=B,this.opts=D??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=A.length,this.requestId=A.requestId,this.responseTo=A.responseTo,this.opCode=A.opCode,this.fromCompressed=A.fromCompressed,this.responseFlags=B.readInt32LE(0),this.checksumPresent=(this.responseFlags&VN)!==0,this.moreToCome=(this.responseFlags&LN)!==0,this.exhaustAllowed=(this.responseFlags&wN)!==0,this.useBigInt64=typeof this.opts.useBigInt64==="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs==="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues==="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers==="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp==="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];this.index=4;while(this.index<this.data.length){let F=this.data.readUInt8(this.index++);if(F===0){let A=this.data.readUInt32LE(this.index),B=this.data.subarray(this.index,this.index+A);this.sections.push(B),this.index+=A}else if(F===1)throw new b5.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}}IN.OpMsgResponse=RN;var e$=16,KN=9;class PN{constructor(F,A){this.command=F,this.options={zlibCompressionLevel:A.zlibCompressionLevel,agreedCompressor:A.agreedCompressor}}static canCompress(F){let A=F instanceof xB?F.command:F.query,B=Object.keys(A)[0];return!o$.uncompressibleCommands.has(B)}async toBin(){let F=Buffer.concat(this.command.toBin()),A=F.slice(e$),B=F.readInt32LE(12),D=await o$.compress(this.options,A),X=Buffer.alloc(e$);X.writeInt32LE(e$+KN+D.length,0),X.writeInt32LE(this.command.requestId,4),X.writeInt32LE(0,8),X.writeInt32LE(S7.OP_COMPRESSED,12);let Z=Buffer.alloc(KN);return Z.writeInt32LE(B,0),Z.writeInt32LE(A.length,4),Z.writeUInt8(o$.Compressor[this.options.agreedCompressor],8),[X,Z,D]}}IN.OpCompressedRequest=PN});var h5=z((ON)=>{Object.defineProperty(ON,"__esModule",{value:!0});ON.uncompressibleCommands=ON.Compressor=void 0;ON.compress=o91;ON.decompress=kN;ON.compressCommand=e91;ON.decompressResponse=F71;var MN=c("util"),_B=c("zlib"),a91=w0(),jN=h6(),DE=l(),f7=y5(),BE=R3();ON.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});ON.uncompressibleCommands=new Set([a91.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var s91=3,r91=MN.promisify(_B.inflate.bind(_B)),t91=MN.promisify(_B.deflate.bind(_B)),z4,J9=null;function TN(){if(J9==null){let F=jN.getSnappy();if("kModuleError"in F)throw F.kModuleError;J9=F}return J9}async function o91(F,A){let B={};switch(F.agreedCompressor){case"snappy":return J9??=TN(),await J9.compress(A);case"zstd":{if(uN(),"kModuleError"in z4)throw z4.kModuleError;return await z4.compress(A,s91)}case"zlib":{if(F.zlibCompressionLevel)B.level=F.zlibCompressionLevel;return await t91(A,B)}default:throw new DE.MongoInvalidArgumentError(`Unknown compressor ${F.agreedCompressor} failed to compress`)}}async function kN(F,A){if(F!==ON.Compressor.snappy&&F!==ON.Compressor.zstd&&F!==ON.Compressor.zlib&&F!==ON.Compressor.none)throw new DE.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${F})`);switch(F){case ON.Compressor.snappy:return J9??=TN(),await J9.uncompress(A,{asBuffer:!0});case ON.Compressor.zstd:{if(uN(),"kModuleError"in z4)throw z4.kModuleError;return await z4.decompress(A)}case ON.Compressor.zlib:return await r91(A);default:return A}}function uN(){if(!z4)z4=jN.getZstdLibrary()}var v5=16;async function e91(F,A){let D=await(A.agreedCompressor==="none"||!f7.OpCompressedRequest.canCompress(F)?F:new f7.OpCompressedRequest(F,{agreedCompressor:A.agreedCompressor??"none",zlibCompressionLevel:A.zlibCompressionLevel??0})).toBin();return Buffer.concat(D)}async function F71(F){let A={length:F.readInt32LE(0),requestId:F.readInt32LE(4),responseTo:F.readInt32LE(8),opCode:F.readInt32LE(12)};if(A.opCode!==BE.OP_COMPRESSED){let $=A.opCode===BE.OP_MSG?f7.OpMsgResponse:f7.OpReply,Y=F.subarray(v5);return new $(F,A,Y)}let B={...A,fromCompressed:!0,opCode:F.readInt32LE(v5),length:F.readInt32LE(v5+4)},D=F[v5+8],X=F.slice(v5+9),Z=B.opCode===BE.OP_MSG?f7.OpMsgResponse:f7.OpReply,J=await kN(D,X);if(J.length!==B.length)throw new DE.MongoDecompressionError("Message body and message header must be the same length");return new Z(F,B,J)}});var g7=z((yN)=>{Object.defineProperty(yN,"__esModule",{value:!0});yN.MongoCryptKMSRequestNetworkTimeoutError=yN.MongoCryptAzureKMSRequestError=yN.MongoCryptCreateEncryptedCollectionError=yN.MongoCryptCreateDataKeyError=yN.MongoCryptInvalidArgumentError=yN.defaultErrorWrapper=yN.MongoCryptError=void 0;var Z71=l();class Q4 extends Z71.MongoError{constructor(F,A={}){super(F,A)}get name(){return"MongoCryptError"}}yN.MongoCryptError=Q4;var J71=(F)=>new Q4(F.message,{cause:F});yN.defaultErrorWrapper=J71;class xN extends Q4{constructor(F){super(F)}get name(){return"MongoCryptInvalidArgumentError"}}yN.MongoCryptInvalidArgumentError=xN;class _N extends Q4{constructor(F,{cause:A}){super(`Unable to complete creating data keys: ${A.message}`,{cause:A});this.encryptedFields=F}get name(){return"MongoCryptCreateDataKeyError"}}yN.MongoCryptCreateDataKeyError=_N;class fN extends Q4{constructor(F,{cause:A}){super(`Unable to create collection: ${A.message}`,{cause:A});this.encryptedFields=F}get name(){return"MongoCryptCreateEncryptedCollectionError"}}yN.MongoCryptCreateEncryptedCollectionError=fN;class gN extends Q4{constructor(F,A){super(F);this.body=A}get name(){return"MongoCryptAzureKMSRequestError"}}yN.MongoCryptAzureKMSRequestError=gN;class bN extends Q4{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}}yN.MongoCryptKMSRequestNetworkTimeoutError=bN});var XE=z((vN)=>{Object.defineProperty(vN,"__esModule",{value:!0});vN.AWSSDKCredentialProvider=void 0;var H71=h6(),q71=l();class K4{constructor(F){if(F)this._provider=F}static get awsSDK(){return K4._awsSDK??=H71.getAwsCredentialProvider(),K4._awsSDK}get provider(){if("kModuleError"in K4.awsSDK)throw K4.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:F="",AWS_REGION:A=""}=process.env;F=F.toLowerCase(),A=A.toLowerCase();let B=A.length!==0&&F.length!==0,X=F==="regional"||F==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(A);return this._provider=B&&X?K4.awsSDK.fromNodeProviderChain({clientConfig:{region:A}}):K4.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let F=await this.provider();return{AccessKeyId:F.accessKeyId,SecretAccessKey:F.secretAccessKey,Token:F.sessionToken,Expiration:F.expiration}}catch(F){throw new q71.MongoAWSError(F.message,{cause:F})}}}vN.AWSSDKCredentialProvider=K4});var cN=z((dN)=>{Object.defineProperty(dN,"__esModule",{value:!0});dN.loadAWSCredentials=Q71;var z71=XE();async function Q71(F,A){let B=new z71.AWSSDKCredentialProvider(A),{SecretAccessKey:D="",AccessKeyId:X="",Token:Z}=await B.getCredentials(),J={secretAccessKey:D,accessKeyId:X};return Z!=null&&(J.sessionToken=Z),{...F,aws:J}}});var YE=z((nN)=>{Object.defineProperty(nN,"__esModule",{value:!0});nN.tokenCache=nN.AzureCredentialCache=nN.AZURE_BASE_URL=void 0;nN.addAzureParams=lN;nN.prepareRequest=pN;nN.fetchAzureKMSToken=iN;nN.loadAzureCredentials=R71;var U71=l(),V71=s(),b7=g7(),L71=6000;nN.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";class ZE{constructor(){this.cachedToken=null}async getToken(){if(this.cachedToken==null||this.needsRefresh(this.cachedToken))this.cachedToken=await this._getToken();return{accessToken:this.cachedToken.accessToken}}needsRefresh(F){return F.expiresOnTimestamp-Date.now()<=L71}resetCache(){this.cachedToken=null}_getToken(){return iN()}}nN.AzureCredentialCache=ZE;nN.tokenCache=new ZE;async function w71(F){let{status:A,body:B}=F,D=(()=>{try{return JSON.parse(B)}catch{throw new b7.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(A!==200)throw new b7.MongoCryptAzureKMSRequestError("Unable to complete request.",D);if(!D.access_token)throw new b7.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!D.expires_in)throw new b7.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let X=Number(D.expires_in)*1000;if(Number.isNaN(X))throw new b7.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:D.access_token,expiresOnTimestamp:Date.now()+X}}function lN(F,A,B){if(F.searchParams.append("api-version","2018-02-01"),F.searchParams.append("resource",A),B)F.searchParams.append("client_id",B);return F}function pN(F){let A=new URL(F.url?.toString()??nN.AZURE_BASE_URL);return lN(A,"https://vault.azure.net"),{headers:{...F.headers,"Content-Type":"application/json",Metadata:!0},url:A}}async function iN(F={}){let{headers:A,url:B}=pN(F);try{let D=await V71.get(B,{headers:A});return await w71(D)}catch(D){if(D instanceof U71.MongoNetworkTimeoutError)throw new b7.MongoCryptAzureKMSRequestError(`[Azure KMS] ${D.message}`);throw D}}async function R71(F){let A=await nN.tokenCache.getToken();return{...F,azure:A}}});var rN=z((sN)=>{Object.defineProperty(sN,"__esModule",{value:!0});sN.loadGCPCredentials=k71;var T71=h6();async function k71(F){let A=T71.getGcpMetadata();if("kModuleError"in A)return F;let{access_token:B}=await A.instance({property:"service-accounts/default/token"});return{...F,gcp:{accessToken:B}}}});var $E=z((tN)=>{Object.defineProperty(tN,"__esModule",{value:!0});tN.isEmptyCredentials=fB;tN.refreshKMSCredentials=_71;var O71=cN(),S71=YE(),x71=rN();function fB(F,A){let B=A[F];if(B==null)return!1;return typeof B==="object"&&Object.keys(B).length===0}async function _71(F,A){let B=F;if(fB("aws",F))B=await O71.loadAWSCredentials(B,A?.aws);if(fB("gcp",F))B=await x71.loadGCPCredentials(B);if(fB("azure",F))B=await S71.loadAzureCredentials(B);return B}});var EE=z((GM)=>{Object.defineProperty(GM,"__esModule",{value:!0});GM.StateMachine=void 0;var oN=c("fs/promises"),b71=c("net"),y71=c("tls"),M3=$1(),eN=H2(),h71=h6(),v71=l(),FM=f0(),U4=s(),m71=gB(),V4=g7(),m5=null;function d71(){if(m5==null){let F=h71.getSocks();if("kModuleError"in F)throw F.kModuleError;m5=F}return m5}var Y9=0,BM=1,DM=2,XM=3,ZM=7,JM=4,YM=5,$M=6,c71=443,l71=new Map([[Y9,"MONGOCRYPT_CTX_ERROR"],[BM,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[DM,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[XM,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[ZM,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[JM,"MONGOCRYPT_CTX_NEED_KMS"],[YM,"MONGOCRYPT_CTX_READY"],[$M,"MONGOCRYPT_CTX_DONE"]]),p71=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function AM(F){if(process.env.MONGODB_CRYPT_DEBUG)console.error(F)}var i71;class EM{constructor(F,A=M3.pluckBSONSerializeOptions(F)){this.options=F,this.bsonOptions=A}async execute(F,A,B){let{_keyVaultNamespace:D,_keyVaultClient:X,_metaDataClient:Z,_mongocryptdClient:J,_mongocryptdManager:$}=F,Y=null,E=()=>A.status,G=()=>A.state;while(G()!==$M&&G()!==Y9)switch(B.signal?.throwIfAborted(),AM(`[context#${A.id}] ${l71.get(G())||G()}`),G()){case BM:{let C=M3.deserialize(A.nextMongoOperation());if(!Z)throw new V4.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let W=this.fetchCollectionInfo(Z,A.ns,C,B);for await(let H of W)if(A.addMongoOperationResponse(M3.serialize(H)),G()===Y9)break;if(G()===Y9)break;A.finishMongoOperation();break}case DM:{let C=A.nextMongoOperation();if(G()===Y9)break;if(!J)throw new V4.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let W=$?await $.withRespawn(this.markCommand.bind(this,J,A.ns,C,B)):await this.markCommand(J,A.ns,C,B);A.addMongoOperationResponse(W),A.finishMongoOperation();break}case XM:{let C=A.nextMongoOperation(),W=await this.fetchKeys(X,D,C,B);if(W.length===0)Y=i71??=M3.serialize({v:[]});for(let H of W)A.addMongoOperationResponse(M3.serialize(H));A.finishMongoOperation();break}case ZM:{let C=await F.askForKMSCredentials();A.provideKMSProviders(M3.serialize(C));break}case JM:{await Promise.all(this.requests(A,B)),A.finishKMSRequests();break}case YM:{let C=A.finalize();if(G()===Y9){let W=E().message||"Finalization error";throw new V4.MongoCryptError(W)}Y=C;break}default:throw new V4.MongoCryptError(`Unknown state: ${G()}`)}if(G()===Y9||Y==null){let C=E().message;if(!C)AM("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.");throw new V4.MongoCryptError(C??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return Y}async kmsRequest(F,A){let B=F.endpoint.split(":"),D=B[1]!=null?Number.parseInt(B[1],10):c71,X={host:B[0],servername:B[0],port:D,...m71.autoSelectSocketOptions(this.options.socketOptions||{})},Z=F.message,J=new U4.BufferPool,$,Y;function E(){for(let q of[Y,$])if(q)q.destroy()}function G(q){return new V4.MongoCryptError("KMS request failed",{cause:q})}function C(){return new V4.MongoCryptError("KMS request closed")}let W=this.options.tlsOptions;if(W){let q=F.kmsProvider,Q=W[q];if(Q){let K=this.validateTlsOptions(q,Q);if(K)throw K;try{await this.setTlsOptions(Q,X)}catch(U){throw G(U)}}}let H;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){$=new b71.Socket;let{promise:U,reject:R,resolve:w}=U4.promiseWithResolvers();$.once("error",(N)=>R(G(N))).once("close",()=>R(C())).once("connect",()=>w());let V={...X,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};$.connect(V),await U;try{m5??=d71(),X.socket=(await m5.SocksClient.createConnection({existing_socket:$,command:"connect",destination:{host:X.host,port:X.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(N){throw G(N)}}Y=y71.connect(X,()=>{Y.write(Z)});let{promise:q,reject:Q,resolve:K}=U4.promiseWithResolvers();H=U4.addAbortListener(A?.signal,function(){E(),Q(this.reason)}),Y.once("error",(U)=>Q(G(U))).once("close",()=>Q(C())).on("data",(U)=>{J.append(U);while(F.bytesNeeded>0&&J.length){let R=Math.min(F.bytesNeeded,J.length);F.addResponse(J.read(R))}if(F.bytesNeeded<=0)K()}),await(A?.timeoutContext?.csotEnabled()?Promise.all([q,FM.Timeout.expires(A.timeoutContext?.remainingTimeMS)]):q)}catch(q){if(q instanceof FM.TimeoutError)throw new v71.MongoOperationTimeoutError("KMS request timed out");throw q}finally{E(),H?.[U4.kDispose]()}}*requests(F,A){for(let B=F.nextKMSRequest();B!=null;B=F.nextKMSRequest())yield this.kmsRequest(B,A)}validateTlsOptions(F,A){let B=Object.keys(A);for(let D of p71)if(B.includes(D))return new V4.MongoCryptError(`Insecure TLS options prohibited for ${F}: ${D}`)}async setTlsOptions(F,A){if(F.secureContext)A.secureContext=F.secureContext;if(F.tlsCertificateKeyFile){let B=await oN.readFile(F.tlsCertificateKeyFile);A.cert=A.key=B}if(F.tlsCAFile)A.ca=await oN.readFile(F.tlsCAFile);if(F.tlsCertificateKeyFilePassword)A.passphrase=F.tlsCertificateKeyFilePassword}fetchCollectionInfo(F,A,B,D){let{db:X}=U4.MongoDBCollectionNamespace.fromString(A);return F.db(X).listCollections(B,{promoteLongs:!1,promoteValues:!1,timeoutContext:D?.timeoutContext&&new eN.CursorTimeoutContext(D?.timeoutContext,Symbol()),signal:D?.signal,nameOnly:!1})}async markCommand(F,A,B,D){let{db:X}=U4.MongoDBCollectionNamespace.fromString(A),Z={promoteLongs:!1,promoteValues:!1},J=M3.deserialize(B,Z),$={timeoutMS:void 0,signal:void 0};if(D?.timeoutContext?.csotEnabled())$.timeoutMS=D.timeoutContext.remainingTimeMS;if(D?.signal)$.signal=D.signal;let Y=await F.db(X).command(J,{...Z,...$});return M3.serialize(Y,this.bsonOptions)}fetchKeys(F,A,B,D){let{db:X,collection:Z}=U4.MongoDBCollectionNamespace.fromString(A),J={timeoutContext:void 0,signal:void 0};if(D?.timeoutContext!=null)J.timeoutContext=new eN.CursorTimeoutContext(D.timeoutContext,Symbol());if(D?.signal!=null)J.signal=D.signal;return F.db(X).collection(Z,{readConcern:{level:"majority"}}).find(M3.deserialize(B),J).toArray()}}GM.StateMachine=EM});var gB=z((HM)=>{Object.defineProperty(HM,"__esModule",{value:!0});HM.ClientEncryption=void 0;HM.autoSelectSocketOptions=c5;var u2=$1(),n71=h6(),d5=f0(),h2=s(),j3=g7(),WM=$E(),bB=EE();class yB{static getMongoCrypt(){let F=n71.getMongoDBClientEncryption();if("kModuleError"in F)throw F.kModuleError;return F.MongoCrypt}constructor(F,A){this._client=F,this._proxyOptions=A.proxyOptions??{},this._tlsOptions=A.tlsOptions??{},this._kmsProviders=A.kmsProviders||{};let{timeoutMS:B}=h2.resolveTimeoutOptions(F,A);if(this._timeoutMS=B,this._credentialProviders=A.credentialProviders,A.credentialProviders?.aws&&!WM.isEmptyCredentials("aws",this._kmsProviders))throw new j3.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(A.keyVaultNamespace==null)throw new j3.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let D={...A,kmsProviders:!Buffer.isBuffer(this._kmsProviders)?u2.serialize(this._kmsProviders):this._kmsProviders,errorWrapper:j3.defaultErrorWrapper};this._keyVaultNamespace=A.keyVaultNamespace,this._keyVaultClient=A.keyVaultClient||F;let X=yB.getMongoCrypt();this._mongoCrypt=new X(D)}async createDataKey(F,A={}){if(A.keyAltNames&&!Array.isArray(A.keyAltNames))throw new j3.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof A.keyAltNames}.`);let B=void 0;if(A.keyAltNames&&A.keyAltNames.length>0)B=A.keyAltNames.map((W,H)=>{if(typeof W!=="string")throw new j3.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${H} was of type ${typeof W}`);return u2.serialize({keyAltName:W})});let D=void 0;if(A.keyMaterial)D=u2.serialize({keyMaterial:A.keyMaterial});let X=u2.serialize({provider:F,...A.masterKey}),Z=this._mongoCrypt.makeDataKeyContext(X,{keyAltNames:B,keyMaterial:D}),J=new bB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:c5(this._client.s.options)}),$=A?.timeoutContext??d5.TimeoutContext.create(h2.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})),Y=u2.deserialize(await J.execute(this,Z,{timeoutContext:$})),{db:E,collection:G}=h2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:C}=await this._keyVaultClient.db(E).collection(G).insertOne(Y,{writeConcern:{w:"majority"},timeoutMS:$?.csotEnabled()?$?.getRemainingTimeMSOrThrow():void 0});return C}async rewrapManyDataKey(F,A){let B=void 0;if(A){let W=Object.assign({provider:A.provider},A.masterKey);B=u2.serialize(W)}let D=u2.serialize(F),X=this._mongoCrypt.makeRewrapManyDataKeyContext(D,B),Z=new bB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:c5(this._client.s.options)}),J=d5.TimeoutContext.create(h2.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})),{v:$}=u2.deserialize(await Z.execute(this,X,{timeoutContext:J}));if($.length===0)return{};let{db:Y,collection:E}=h2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),G=$.map((W)=>({updateOne:{filter:{_id:W._id},update:{$set:{masterKey:W.masterKey,keyMaterial:W.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(Y).collection(E).bulkWrite(G,{writeConcern:{w:"majority"},timeoutMS:J.csotEnabled()?J?.remainingTimeMS:void 0})}}async deleteKey(F){let{db:A,collection:B}=h2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection(B).deleteOne({_id:F},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:F,collection:A}=h2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(F).collection(A).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(F){let{db:A,collection:B}=h2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection(B).findOne({_id:F},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(F){let{db:A,collection:B}=h2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(A).collection(B).findOne({keyAltNames:F},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(F,A){let{db:B,collection:D}=h2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(B).collection(D).findOneAndUpdate({_id:F},{$addToSet:{keyAltNames:A}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(F,A){let{db:B,collection:D}=h2.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),X=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[A]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",A]}}}]}}}];return await this._keyVaultClient.db(B).collection(D).findOneAndUpdate({_id:F},X,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(F,A,B){let{provider:D,masterKey:X,createCollectionOptions:{encryptedFields:{...Z},...J}}=B,$=this._timeoutMS!=null?d5.TimeoutContext.create(h2.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(Z.fields)){let Y=Z.fields.map(async(C)=>C==null||typeof C!=="object"||C.keyId!=null?C:{...C,keyId:await this.createDataKey(D,{masterKey:X,timeoutContext:$?.csotEnabled()?$?.clone():void 0})}),E=await Promise.allSettled(Y);Z.fields=E.map((C,W)=>C.status==="fulfilled"?C.value:Z.fields[W]);let G=E.find((C)=>C.status==="rejected");if(G!=null)throw new j3.MongoCryptCreateDataKeyError(Z,{cause:G.reason})}try{return{collection:await F.createCollection(A,{...J,encryptedFields:Z,timeoutMS:$?.csotEnabled()?$?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:Z}}catch(Y){throw new j3.MongoCryptCreateEncryptedCollectionError(Z,{cause:Y})}}async encrypt(F,A){return await this._encrypt(F,!1,A)}async encryptExpression(F,A){return await this._encrypt(F,!0,A)}async decrypt(F){let A=u2.serialize({v:F}),B=this._mongoCrypt.makeExplicitDecryptionContext(A),D=new bB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:c5(this._client.s.options)}),X=this._timeoutMS!=null?d5.TimeoutContext.create(h2.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:Z}=u2.deserialize(await D.execute(this,B,{timeoutContext:X}));return Z}async askForKMSCredentials(){return await WM.refreshKMSCredentials(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return yB.getMongoCrypt().libmongocryptVersion}async _encrypt(F,A,B){let{algorithm:D,keyId:X,keyAltName:Z,contentionFactor:J,queryType:$,rangeOptions:Y,textOptions:E}=B,G={expressionMode:A,algorithm:D};if(X)G.keyId=X.buffer;if(Z){if(X)throw new j3.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof Z!=="string")throw new j3.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof Z}`);G.keyAltName=u2.serialize({keyAltName:Z})}if(typeof J==="number"||typeof J==="bigint")G.contentionFactor=J;if(typeof $==="string")G.queryType=$;if(typeof Y==="object")G.rangeOptions=u2.serialize(Y);if(typeof E==="object")G.textOptions=u2.serialize(E);let C=u2.serialize({v:F}),W=new bB.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:c5(this._client.s.options)}),H=this._mongoCrypt.makeExplicitEncryptionContext(C,G),q=this._timeoutMS!=null?d5.TimeoutContext.create(h2.resolveTimeoutOptions(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:Q}=u2.deserialize(await W.execute(this,H,{timeoutContext:q}));return Q}}HM.ClientEncryption=yB;function c5(F){let A={autoSelectFamily:!0};if("autoSelectFamily"in F)A.autoSelectFamily=F.autoSelectFamily;if("autoSelectFamilyAttemptTimeout"in F)A.autoSelectFamilyAttemptTimeout=F.autoSelectFamilyAttemptTimeout;return A}});var KM=z((zM)=>{Object.defineProperty(zM,"__esModule",{value:!0});zM.MongocryptdManager=void 0;var s71=l();class GE{static{this.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"}constructor(F={}){if(this.spawnPath="",this.spawnArgs=[],this.uri=typeof F.mongocryptdURI==="string"&&F.mongocryptdURI.length>0?F.mongocryptdURI:GE.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!F.mongocryptdBypassSpawn,Object.hasOwn(F,"mongocryptdSpawnPath")&&F.mongocryptdSpawnPath)this.spawnPath=F.mongocryptdSpawnPath;if(Object.hasOwn(F,"mongocryptdSpawnArgs")&&Array.isArray(F.mongocryptdSpawnArgs))this.spawnArgs=this.spawnArgs.concat(F.mongocryptdSpawnArgs);if(this.spawnArgs.filter((A)=>typeof A==="string").every((A)=>A.indexOf("--idleShutdownTimeoutSecs")<0))this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let F=this.spawnPath||"mongocryptd",{spawn:A}=c("child_process");this._child=A(F,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(F){try{return await F()}catch(B){if(!(B instanceof s71.MongoNetworkTimeoutError&&!this.bypassSpawn))throw B}return await this.spawn(),await F()}}zM.MongocryptdManager=GE});var qE=z((RM)=>{var UM;Object.defineProperty(RM,"__esModule",{value:!0});RM.AutoEncrypter=RM.AutoEncryptionLoggerLevel=void 0;var VM=c("net"),l5=$1(),r71=w0(),t71=h6(),CE=l(),o71=$9(),e71=s(),WE=gB(),HE=g7(),F81=KM(),LM=$E(),wM=EE();RM.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});class hB{static{UM=r71.kDecorateResult}static getMongoCrypt(){let F=t71.getMongoDBClientEncryption();if("kModuleError"in F)throw F.kModuleError;return F.MongoCrypt}constructor(F,A){if(this[UM]=!1,this._client=F,this._bypassEncryption=A.bypassAutoEncryption===!0,this._keyVaultNamespace=A.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=A.keyVaultClient||F,this._metaDataClient=A.metadataClient||F,this._proxyOptions=A.proxyOptions||{},this._tlsOptions=A.tlsOptions||{},this._kmsProviders=A.kmsProviders||{},this._credentialProviders=A.credentialProviders,A.credentialProviders?.aws&&!LM.isEmptyCredentials("aws",this._kmsProviders))throw new HE.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let B={errorWrapper:HE.defaultErrorWrapper};if(A.schemaMap)B.schemaMap=Buffer.isBuffer(A.schemaMap)?A.schemaMap:l5.serialize(A.schemaMap);if(A.encryptedFieldsMap)B.encryptedFieldsMap=Buffer.isBuffer(A.encryptedFieldsMap)?A.encryptedFieldsMap:l5.serialize(A.encryptedFieldsMap);if(B.kmsProviders=!Buffer.isBuffer(this._kmsProviders)?l5.serialize(this._kmsProviders):this._kmsProviders,A.options?.logger)B.logger=A.options.logger;if(A.extraOptions&&A.extraOptions.cryptSharedLibPath)B.cryptSharedLibPath=A.extraOptions.cryptSharedLibPath;if(A.bypassQueryAnalysis)B.bypassQueryAnalysis=A.bypassQueryAnalysis;if(A.keyExpirationMS!=null)B.keyExpirationMS=A.keyExpirationMS;if(this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!A.bypassQueryAnalysis,A.extraOptions&&A.extraOptions.cryptSharedLibSearchPaths)B.cryptSharedLibSearchPaths=A.extraOptions.cryptSharedLibSearchPaths;else if(!this._bypassMongocryptdAndCryptShared)B.cryptSharedLibSearchPaths=["$SYSTEM"];let D=hB.getMongoCrypt();if(this._mongocrypt=new D(B),this._contextCounter=0,A.extraOptions&&A.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new HE.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new F81.MongocryptdManager(A.extraOptions);let X={serverSelectionTimeoutMS:1e4};if((A.extraOptions==null||typeof A.extraOptions.mongocryptdURI!=="string")&&!VM.getDefaultAutoSelectFamily)X.family=4;if(VM.getDefaultAutoSelectFamily)Object.assign(X,WE.autoSelectSocketOptions(this._client.s?.options??{}));this._mongocryptdClient=new o71.MongoClient(this._mongocryptdManager.uri,X)}}async init(){if(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)return;if(!this._mongocryptdManager)throw new CE.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new CE.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdManager.bypassSpawn)await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(F){throw new CE.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:F})}}async close(){await this._mongocryptdClient?.close()}async encrypt(F,A,B={}){if(B.signal?.throwIfAborted(),this._bypassEncryption)return A;let D=Buffer.isBuffer(A)?A:l5.serialize(A,B),X=this._mongocrypt.makeEncryptionContext(e71.MongoDBCollectionNamespace.fromString(F).db,D);X.id=this._contextCounter++,X.ns=F,X.document=A;let Z=new wM.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:WE.autoSelectSocketOptions(this._client.s.options)});return l5.deserialize(await Z.execute(this,X,B),{promoteValues:!1,promoteLongs:!1})}async decrypt(F,A={}){A.signal?.throwIfAborted();let B=this._mongocrypt.makeDecryptionContext(F);return B.id=this._contextCounter++,await new wM.StateMachine({...A,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:WE.autoSelectSocketOptions(this._client.s.options)}).execute(this,B,A)}async askForKMSCredentials(){return await LM.refreshKMSCredentials(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return hB.getMongoCrypt().libmongocryptVersion}}RM.AutoEncrypter=hB});var TM=z((MM)=>{Object.defineProperty(MM,"__esModule",{value:!0});MM.Encrypter=void 0;var B81=qE(),D81=w0(),X81=h6(),IM=l(),Z81=$9();class NM{constructor(F,A,B){if(typeof B.autoEncryption!=="object")throw new IM.MongoInvalidArgumentError('Option "autoEncryption" must be specified');if(this.internalClient=null,this.bypassAutoEncryption=!!B.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,B.maxPoolSize===0&&B.autoEncryption.keyVaultClient==null)B.autoEncryption.keyVaultClient=F;else if(B.autoEncryption.keyVaultClient==null)B.autoEncryption.keyVaultClient=this.getInternalClient(F,A,B);if(this.bypassAutoEncryption)B.autoEncryption.metadataClient=void 0;else if(B.maxPoolSize===0)B.autoEncryption.metadataClient=F;else B.autoEncryption.metadataClient=this.getInternalClient(F,A,B);if(B.proxyHost)B.autoEncryption.proxyOptions={proxyHost:B.proxyHost,proxyPort:B.proxyPort,proxyUsername:B.proxyUsername,proxyPassword:B.proxyPassword};this.autoEncrypter=new B81.AutoEncrypter(F,B.autoEncryption)}getInternalClient(F,A,B){let D=this.internalClient;if(D==null){let X={};for(let Z of[...Object.getOwnPropertyNames(B),...Object.getOwnPropertySymbols(B)]){if(["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(Z))continue;Reflect.set(X,Z,Reflect.get(B,Z))}X.minPoolSize=0,D=new Z81.MongoClient(A,X),this.internalClient=D;for(let Z of D81.MONGO_CLIENT_EVENTS)for(let J of F.listeners(Z))D.on(Z,J);F.on("newListener",(Z,J)=>{D?.on(Z,J)}),this.needsConnecting=!0}return D}async connectInternalClient(){let F=this.internalClient;if(this.needsConnecting&&F!=null)this.needsConnecting=!1,await F.connect()}async close(F){let A;try{await this.autoEncrypter.close()}catch(D){A=D}let B=this.internalClient;if(B!=null&&F!==B)return await B.close();if(A!=null)throw A}static checkForMongoCrypt(){let F=X81.getMongoDBClientEncryption();if("kModuleError"in F)throw new IM.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:F.kModuleError,dependencyName:"mongodb-client-encryption"})}}MM.Encrypter=NM});var LE=z((fM)=>{Object.defineProperty(fM,"__esModule",{value:!0});fM.SENSITIVE_COMMANDS=fM.CommandFailedEvent=fM.CommandSucceededEvent=fM.CommandStartedEvent=void 0;var p5=w0(),OM=s(),zE=y5();class SM{constructor(F,A,B){this.name=p5.COMMAND_STARTED;let D=UE(A),X=QE(D),{address:Z,connectionId:J,serviceId:$}=VE(F);if(fM.SENSITIVE_COMMANDS.has(X))this.commandObj={},this.commandObj[X]=!0;this.address=Z,this.connectionId=J,this.serviceId=$,this.requestId=A.requestId,this.databaseName=A.databaseName,this.commandName=X,this.command=KE(X,D,D),this.serverConnectionId=B}get hasServiceId(){return!!this.serviceId}}fM.CommandStartedEvent=SM;class xM{constructor(F,A,B,D,X){this.name=p5.COMMAND_SUCCEEDED;let Z=UE(A),J=QE(Z),{address:$,connectionId:Y,serviceId:E}=VE(F);this.address=$,this.connectionId=Y,this.serviceId=E,this.requestId=A.requestId,this.commandName=J,this.duration=OM.calculateDurationInMs(D),this.reply=KE(J,Z,$81(B)),this.serverConnectionId=X,this.databaseName=A.databaseName}get hasServiceId(){return!!this.serviceId}}fM.CommandSucceededEvent=xM;class _M{constructor(F,A,B,D,X){this.name=p5.COMMAND_FAILED;let Z=UE(A),J=QE(Z),{address:$,connectionId:Y,serviceId:E}=VE(F);this.address=$,this.connectionId=Y,this.serviceId=E,this.requestId=A.requestId,this.commandName=J,this.duration=OM.calculateDurationInMs(D),this.failure=KE(J,Z,B),this.serverConnectionId=X,this.databaseName=A.databaseName}get hasServiceId(){return!!this.serviceId}}fM.CommandFailedEvent=_M;fM.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var J81=new Set(["hello",p5.LEGACY_HELLO_COMMAND,p5.LEGACY_HELLO_COMMAND_CAMEL_CASE]),QE=(F)=>Object.keys(F)[0],Y81=(F)=>F.ns.split(".")[1],KE=(F,A,B)=>fM.SENSITIVE_COMMANDS.has(F)||J81.has(F)&&A.speculativeAuthenticate?{}:B,kM={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},uM={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function UE(F){if(F instanceof zE.OpMsgRequest){let D={...F.command};if(D.ops instanceof zE.DocumentSequence)D.ops=D.ops.documents;if(D.nsInfo instanceof zE.DocumentSequence)D.nsInfo=D.nsInfo.documents;return D}if(F.query?.$query){let D;if(F.ns==="admin.$cmd")D=Object.assign({},F.query.$query);else D={find:Y81(F)},Object.keys(kM).forEach((X)=>{if(F.query[X]!=null)D[kM[X]]={...F.query[X]}});return Object.keys(uM).forEach((X)=>{let Z=X;if(F[Z]!=null)D[uM[Z]]=F[Z]}),D}let A={},B={...F};if(F.query)A={...F.query},B.query=A;return F.query?A:B}function $81(F){if(!F)return F;return F.result?F.result:F}function VE(F){let A;if("id"in F)A=F.id;return{address:F.address,serviceId:F.serviceId,connectionId:A}}});var i5=z((hM)=>{Object.defineProperty(hM,"__esModule",{value:!0});hM.ServerDescription=void 0;hM.parseServerType=bM;hM.compareTopologyVersion=yM;var y7=$1(),W81=l(),h7=s(),u0=e2(),H81=new Set([u0.ServerType.RSPrimary,u0.ServerType.Standalone,u0.ServerType.Mongos,u0.ServerType.LoadBalancer]),q81=new Set([u0.ServerType.RSPrimary,u0.ServerType.RSSecondary,u0.ServerType.Mongos,u0.ServerType.Standalone,u0.ServerType.LoadBalancer]);class gM{constructor(F,A,B={}){if(F==null||F==="")throw new W81.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof F==="string"?h7.HostAddress.fromString(F).toString():F.toString(),this.type=bM(A,B),this.hosts=A?.hosts?.map((D)=>D.toLowerCase())??[],this.passives=A?.passives?.map((D)=>D.toLowerCase())??[],this.arbiters=A?.arbiters?.map((D)=>D.toLowerCase())??[],this.tags=A?.tags??{},this.minWireVersion=A?.minWireVersion??0,this.maxWireVersion=A?.maxWireVersion??0,this.roundTripTime=B?.roundTripTime??-1,this.minRoundTripTime=B?.minRoundTripTime??0,this.lastUpdateTime=h7.now(),this.lastWriteDate=A?.lastWrite?.lastWriteDate??0,this.error=B.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??A?.topologyVersion??null,this.setName=A?.setName??null,this.setVersion=A?.setVersion??null,this.electionId=A?.electionId??null,this.logicalSessionTimeoutMinutes=A?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=A?.maxMessageSizeBytes??null,this.maxWriteBatchSize=A?.maxWriteBatchSize??null,this.maxBsonObjectSize=A?.maxBsonObjectSize??null,this.primary=A?.primary??null,this.me=A?.me?.toLowerCase()??null,this.$clusterTime=A?.$clusterTime??null,this.iscryptd=Boolean(A?.iscryptd)}get hostAddress(){return h7.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===u0.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return q81.has(this.type)}get isWritable(){return H81.has(this.type)}get host(){let F=`:${this.port}`.length;return this.address.slice(0,-F)}get port(){let F=this.address.split(":").pop();return F?Number.parseInt(F,10):27017}equals(F){let A=this.topologyVersion===F?.topologyVersion||yM(this.topologyVersion,F?.topologyVersion)===0,B=this.electionId!=null&&F?.electionId!=null?h7.compareObjectId(this.electionId,F.electionId)===0:this.electionId===F?.electionId;return F!=null&&F.iscryptd===this.iscryptd&&h7.errorStrictEqual(this.error,F.error)&&this.type===F.type&&this.minWireVersion===F.minWireVersion&&h7.arrayStrictEqual(this.hosts,F.hosts)&&z81(this.tags,F.tags)&&this.setName===F.setName&&this.setVersion===F.setVersion&&B&&this.primary===F.primary&&this.logicalSessionTimeoutMinutes===F.logicalSessionTimeoutMinutes&&A}}hM.ServerDescription=gM;function bM(F,A){if(A?.loadBalanced)return u0.ServerType.LoadBalancer;if(!F||!F.ok)return u0.ServerType.Unknown;if(F.isreplicaset)return u0.ServerType.RSGhost;if(F.msg&&F.msg==="isdbgrid")return u0.ServerType.Mongos;if(F.setName)if(F.hidden)return u0.ServerType.RSOther;else if(F.isWritablePrimary)return u0.ServerType.RSPrimary;else if(F.secondary)return u0.ServerType.RSSecondary;else if(F.arbiterOnly)return u0.ServerType.RSArbiter;else return u0.ServerType.RSOther;return u0.ServerType.Standalone}function z81(F,A){let B=Object.keys(F),D=Object.keys(A);return B.length===D.length&&B.every((X)=>A[X]===F[X])}function yM(F,A){if(F==null||A==null)return-1;if(!F.processId.equals(A.processId))return-1;let B=typeof F.counter==="bigint"?y7.Long.fromBigInt(F.counter):y7.Long.isLong(F.counter)?F.counter:y7.Long.fromNumber(F.counter),D=typeof A.counter==="bigint"?y7.Long.fromBigInt(A.counter):y7.Long.isLong(A.counter)?A.counter:y7.Long.fromNumber(A.counter);return B.compare(D)}});var lM=z((dM)=>{Object.defineProperty(dM,"__esModule",{value:!0});dM.StreamDescription=void 0;var U81=$1(),V81=e2(),L81=i5(),w81=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"];class mM{constructor(F,A){this.hello=null,this.address=F,this.type=V81.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48000000,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=A?.logicalSessionTimeoutMinutes,this.loadBalanced=!!A?.loadBalanced,this.compressors=A&&A.compressors&&Array.isArray(A.compressors)?A.compressors:[],this.serverConnectionId=null}receiveResponse(F){if(F==null)return;if(this.hello=F,this.type=L81.parseServerType(F),"connectionId"in F)this.serverConnectionId=this.parseServerConnectionID(F.connectionId);else this.serverConnectionId=null;for(let A of w81){if(F[A]!=null)this[A]=F[A];if("__nodejs_mock_server__"in F)this.__nodejs_mock_server__=F.__nodejs_mock_server__}if(F.compression)this.compressor=this.compressors.filter((A)=>F.compression?.includes(A))[0]}parseServerConnectionID(F){return U81.Long.isLong(F)?F.toBigInt():BigInt(F)}}dM.StreamDescription=mM});var iM=z((pM)=>{Object.defineProperty(pM,"__esModule",{value:!0});pM.onData=R81;var n5=s();function R81(F,{timeoutContext:A,signal:B}){B?.throwIfAborted();let D=new n5.List,X=new n5.List,Z=null,J=!1,$={next(){let H=D.shift();if(H!=null)return Promise.resolve({value:H,done:!1});if(Z!=null){let U=Promise.reject(Z);return Z=null,U}if(J)return W();let{promise:q,resolve:Q,reject:K}=n5.promiseWithResolvers();return X.push({resolve:Q,reject:K}),q},return(){return W()},throw(H){return C(H),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await W()}};F.on("data",G),F.on("error",C);let Y=n5.addAbortListener(B,function(){C(this.reason)}),E=A?.timeoutForSocketRead;return E?.throwIfExpired(),E?.then(void 0,C),$;function G(H){let q=X.shift();if(q!=null)q.resolve({value:H,done:!1});else D.push(H)}function C(H){let q=X.shift();if(q!=null)q.reject(H);else Z=H;W()}function W(){F.off("data",G),F.off("error",C),Y?.[n5.kDispose](),J=!0,E?.clear();let H={value:void 0,done:J};for(let q of X)q.resolve(H);return Promise.resolve(H)}}});var RE=z((oM)=>{Object.defineProperty(oM,"__esModule",{value:!0});oM.TopologyDescription=void 0;var I81=$1(),dB=R3(),mB=l(),wE=s(),N1=e2(),L4=i5(),N81=dB.MIN_SUPPORTED_SERVER_VERSION,M81=dB.MAX_SUPPORTED_SERVER_VERSION,nM=dB.MIN_SUPPORTED_WIRE_VERSION,aM=dB.MAX_SUPPORTED_WIRE_VERSION,j81=new Set([N1.ServerType.Mongos,N1.ServerType.Unknown]),sM=new Set([N1.ServerType.Mongos,N1.ServerType.Standalone]),rM=new Set([N1.ServerType.RSSecondary,N1.ServerType.RSArbiter,N1.ServerType.RSOther]);class a5{constructor(F,A=null,B=null,D=null,X=null,Z=null,J=null){J=J??{},this.type=F??N1.TopologyType.Unknown,this.servers=A??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=J.heartbeatFrequencyMS??0,this.localThresholdMS=J.localThresholdMS??15,this.setName=B??null,this.maxElectionId=X??null,this.maxSetVersion=D??null,this.commonWireVersion=Z??0;for(let $ of this.servers.values()){if($.type===N1.ServerType.Unknown||$.type===N1.ServerType.LoadBalancer)continue;if($.minWireVersion>aM)this.compatible=!1,this.compatibilityError=`Server at ${$.address} requires wire version ${$.minWireVersion}, but this version of the driver only supports up to ${aM} (MongoDB ${M81})`;if($.maxWireVersion<nM){this.compatible=!1,this.compatibilityError=`Server at ${$.address} reports wire version ${$.maxWireVersion}, but this version of the driver requires at least ${nM} (MongoDB ${N81}).`;break}}this.logicalSessionTimeoutMinutes=null;for(let[,$]of this.servers)if($.isReadable){if($.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=$.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,$.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(F,A=0){let B=F.hostnames(),D=new Set(this.servers.keys()),X=new Set(B),Z=new Set;for(let $ of D)if(X.delete($),!B.has($))Z.add($);if(X.size===0&&Z.size===0)return this;let J=new Map(this.servers);for(let $ of Z)J.delete($);if(X.size>0){if(A===0)for(let $ of X)J.set($,new L4.ServerDescription($));else if(J.size<A){let $=wE.shuffle(X,A-J.size);for(let Y of $)J.set(Y,new L4.ServerDescription(Y))}}return new a5(this.type,J,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(F){let A=F.address,{type:B,setName:D,maxSetVersion:X,maxElectionId:Z,commonWireVersion:J}=this,$=F.type,Y=new Map(this.servers);if(F.maxWireVersion!==0)if(J==null)J=F.maxWireVersion;else J=Math.min(J,F.maxWireVersion);if(typeof F.setName==="string"&&typeof D==="string"&&F.setName!==D)if(B===N1.TopologyType.Single)F=new L4.ServerDescription(A);else Y.delete(A);if(Y.set(A,F),B===N1.TopologyType.Single)return new a5(N1.TopologyType.Single,Y,D,X,Z,J,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(B===N1.TopologyType.Unknown)if($===N1.ServerType.Standalone&&this.servers.size!==1)Y.delete(A);else B=T81($);if(B===N1.TopologyType.Sharded){if(!j81.has($))Y.delete(A)}if(B===N1.TopologyType.ReplicaSetNoPrimary){if(sM.has($))Y.delete(A);if($===N1.ServerType.RSPrimary){let E=tM(Y,F,D,X,Z);B=E[0],D=E[1],X=E[2],Z=E[3]}else if(rM.has($)){let E=u81(Y,F,D);B=E[0],D=E[1]}}if(B===N1.TopologyType.ReplicaSetWithPrimary)if(sM.has($))Y.delete(A),B=E9(Y);else if($===N1.ServerType.RSPrimary){let E=tM(Y,F,D,X,Z);B=E[0],D=E[1],X=E[2],Z=E[3]}else if(rM.has($))B=k81(Y,F,D);else B=E9(Y);return new a5(B,Y,D,X,Z,J,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let F=Array.from(this.servers.values()).filter((A)=>A.error);if(F.length>0)return F[0].error;return null}get hasKnownServers(){return Array.from(this.servers.values()).some((F)=>F.type!==N1.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some((F)=>F.isDataBearing)}hasServer(F){return this.servers.has(F)}toJSON(){return I81.EJSON.serialize(this)}}oM.TopologyDescription=a5;function T81(F){switch(F){case N1.ServerType.Standalone:return N1.TopologyType.Single;case N1.ServerType.Mongos:return N1.TopologyType.Sharded;case N1.ServerType.RSPrimary:return N1.TopologyType.ReplicaSetWithPrimary;case N1.ServerType.RSOther:case N1.ServerType.RSSecondary:return N1.TopologyType.ReplicaSetNoPrimary;default:return N1.TopologyType.Unknown}}function tM(F,A,B=null,D=null,X=null){let Z=(Y,E,G)=>{return`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${Y.setVersion}, server electionId: ${Y.electionId}, topology setVersion: ${E}, topology electionId: ${G}`};if(B=B||A.setName,B!==A.setName)return F.delete(A.address),[E9(F),B,D,X];if(A.maxWireVersion>=17){let Y=wE.compareObjectId(X,A.electionId),E=Y===0,G=Y===-1,C=(D??-1)<=(A.setVersion??-1);if(G||E&&C)X=A.electionId,D=A.setVersion;else return F.set(A.address,new L4.ServerDescription(A.address,void 0,{error:new mB.MongoStalePrimaryError(Z(A,D,X))})),[E9(F),B,D,X]}else{let Y=A.electionId?A.electionId:null;if(A.setVersion&&Y){if(D&&X){if(D>A.setVersion||wE.compareObjectId(X,Y)>0)return F.set(A.address,new L4.ServerDescription(A.address,void 0,{error:new mB.MongoStalePrimaryError(Z(A,D,X))})),[E9(F),B,D,X]}X=A.electionId}if(A.setVersion!=null&&(D==null||A.setVersion>D))D=A.setVersion}for(let[Y,E]of F)if(E.type===N1.ServerType.RSPrimary&&E.address!==A.address){F.set(Y,new L4.ServerDescription(E.address,void 0,{error:new mB.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}A.allHosts.forEach((Y)=>{if(!F.has(Y))F.set(Y,new L4.ServerDescription(Y))});let J=Array.from(F.keys()),$=A.allHosts;return J.filter((Y)=>$.indexOf(Y)===-1).forEach((Y)=>{F.delete(Y)}),[E9(F),B,D,X]}function k81(F,A,B=null){if(B==null)throw new mB.MongoRuntimeError('Argument "setName" is required if connected to a replica set');if(B!==A.setName||A.me&&A.address!==A.me)F.delete(A.address);return E9(F)}function u81(F,A,B=null){let D=N1.TopologyType.ReplicaSetNoPrimary;if(B=B??A.setName,B!==A.setName)return F.delete(A.address),[D,B];if(A.allHosts.forEach((X)=>{if(!F.has(X))F.set(X,new L4.ServerDescription(X))}),A.me&&A.address!==A.me)F.delete(A.address);return[D,B]}function E9(F){for(let A of F.values())if(A.type===N1.ServerType.RSPrimary)return N1.TopologyType.ReplicaSetWithPrimary;return N1.TopologyType.ReplicaSetNoPrimary}});var Bj=z((Aj)=>{Object.defineProperty(Aj,"__esModule",{value:!0});Aj.getReadPreference=x81;Aj.isSharded=_81;var O81=l(),PE=_0(),Fj=e2(),S81=RE();function x81(F){let A=F?.readPreference??PE.ReadPreference.primary;if(typeof A==="string")A=PE.ReadPreference.fromString(A);if(!(A instanceof PE.ReadPreference))throw new O81.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return A}function _81(F){if(F==null)return!1;if(F.description&&F.description.type===Fj.ServerType.Mongos)return!0;if(F.description&&F.description instanceof S81.TopologyDescription)return Array.from(F.description.servers.values()).some((B)=>B.type===Fj.ServerType.Mongos);return!1}});var lB=z(($j)=>{Object.defineProperty($j,"__esModule",{value:!0});$j.CryptoConnection=$j.SizedMessageTransform=$j.Connection=void 0;$j.hasSessionSupport=p81;var b81=c("stream"),Jj=c("timers"),y81=$1(),w4=w0(),D0=l(),Dj=Z4(),h81=D6(),v81=_0(),m81=e2(),Xj=z5(),Zj=f0(),J6=s(),IE=LE(),cB=y5(),d81=lM(),c81=h5(),l81=iM(),s5=f1(),NE=Bj();function p81(F){return F.description.logicalSessionTimeoutMinutes!=null}function i81(F,A){if(A.proxyHost)return A.hostAddress.toString();let{remoteAddress:B,remotePort:D}=F;if(typeof B==="string"&&typeof D==="number")return J6.HostAddress.fromHostPort(B,D).toString();return J6.uuidV4().toString("hex")}class $3 extends h81.TypedEventEmitter{static{this.COMMAND_STARTED=w4.COMMAND_STARTED}static{this.COMMAND_SUCCEEDED=w4.COMMAND_SUCCEEDED}static{this.COMMAND_FAILED=w4.COMMAND_FAILED}static{this.CLUSTER_TIME_RECEIVED=w4.CLUSTER_TIME_RECEIVED}static{this.CLOSE=w4.CLOSE}static{this.PINNED=w4.PINNED}static{this.UNPINNED=w4.UNPINNED}constructor(F,A){super();this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",J6.noop),this.socket=F,this.id=A.id,this.address=i81(F,A),this.socketTimeoutMS=A.socketTimeoutMS??0,this.monitorCommands=A.monitorCommands,this.serverApi=A.serverApi,this.mongoLogger=A.mongoLogger,this.established=!1,this.description=new d81.StreamDescription(this.address,A),this.generation=A.generation,this.lastUseTime=J6.now(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new ME({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(F){this.description.receiveResponse(F),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return J6.calculateDurationInMs(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&J6.maxWireVersion(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(Dj.MongoLoggableComponent.COMMAND,Dj.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=J6.now()}onSocketError(F){this.onError(new D0.MongoNetworkError(F.message,{cause:F}))}onTransformError(F){this.onError(F)}onError(F){this.cleanup(F)}onClose(){let F=`connection ${this.id} to ${this.address} closed`;this.cleanup(new D0.MongoNetworkError(F))}onTimeout(){this.delayedTimeoutId=Jj.setTimeout(()=>{let F=`connection ${this.id} to ${this.address} timed out`,A=this.hello==null;this.cleanup(new D0.MongoNetworkTimeoutError(F,{beforeHandshake:A}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners($3.PINNED),this.removeAllListeners($3.UNPINNED);let F=`connection ${this.id} to ${this.address} closed`;this.cleanup(new D0.MongoNetworkError(F))}cleanup(F){if(this.closed)return;this.socket.destroy(),this.error=F,this.dataEvents?.throw(F).then(void 0,J6.squashError),this.closed=!0,this.emit($3.CLOSE)}prepareCommand(F,A,B){let D={...A},X=NE.getReadPreference(B),Z=B?.session,J=this.clusterTime;if(this.serverApi){let{version:E,strict:G,deprecationErrors:C}=this.serverApi;if(D.apiVersion=E,G!=null)D.apiStrict=G;if(C!=null)D.apiDeprecationErrors=C}if(this.hasSessionSupport&&Z){if(Z.clusterTime&&J&&Z.clusterTime.clusterTime.greaterThan(J.clusterTime))J=Z.clusterTime;let E=Xj.applySession(Z,D,B);if(E)throw E}else if(Z?.explicit)throw new D0.MongoCompatibilityError("Current topology does not support sessions");if(J)D.$clusterTime=J;if(this.description.type!==m81.ServerType.Standalone){if(!NE.isSharded(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&B.directConnection===!0&&X?.mode==="primary")D.$readPreference=v81.ReadPreference.primaryPreferred.toJSON();else if(NE.isSharded(this)&&!this.supportsOpMsg&&X?.mode!=="primary")D={$query:D,$readPreference:X.toJSON()};else if(X?.mode!=="primary")D.$readPreference=X.toJSON()}let $={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:X.secondaryOk(),...B};return B.timeoutContext?.addMaxTimeMSToCommand(D,B),this.supportsOpMsg?new cB.OpMsgRequest(F,D,$):new cB.OpQueryRequest(F,D,$)}async*sendWire(F,A,B){this.throwIfAborted();let D=A.socketTimeoutMS??A?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(D);try{if(await this.writeCommand(F,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:A.timeoutContext,signal:A.signal}),F.moreToCome){yield s5.MongoDBResponse.empty;return}if(this.throwIfAborted(),A.timeoutContext?.csotEnabled()&&A.timeoutContext.minRoundTripTime!=null&&A.timeoutContext.remainingTimeMS<A.timeoutContext.minRoundTripTime)throw new D0.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let X of this.readMany(A)){this.socket.setTimeout(0);let Z=X.parse();yield(B??s5.MongoDBResponse).make(Z),this.throwIfAborted(),this.socket.setTimeout(D)}}finally{this.socket.setTimeout(0)}}async*sendCommand(F,A,B,D){B?.signal?.throwIfAborted();let X=this.prepareCommand(F.db,A,B),Z=0;if(this.shouldEmitAndLogCommand)Z=J6.now(),this.emitAndLogCommand(this.monitorCommands,$3.COMMAND_STARTED,X.databaseName,this.established,new IE.CommandStartedEvent(this,X,this.description.serverConnectionId));let J=B.documentsReturnedIn==null||!B.raw?B:{...B,raw:!1,fieldsAsRaw:{[B.documentsReturnedIn]:!0}},$=void 0,Y=void 0;try{this.throwIfAborted();for await($ of this.sendWire(X,B,D)){if(Y=void 0,B.session!=null)Xj.updateSessionFromResponse(B.session,$);if($.$clusterTime)this.clusterTime=$.$clusterTime,this.emit($3.CLUSTER_TIME_RECEIVED,$.$clusterTime);if($.ok===0){if(B.timeoutContext?.csotEnabled()&&$.isMaxTimeExpiredError)throw new D0.MongoOperationTimeoutError("Server reported a timeout error",{cause:new D0.MongoServerError(Y??=$.toObject(J))});throw new D0.MongoServerError(Y??=$.toObject(J))}if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,$3.COMMAND_SUCCEEDED,X.databaseName,this.established,new IE.CommandSucceededEvent(this,X,X.moreToCome?{ok:1}:Y??=$.toObject(J),Z,this.description.serverConnectionId));if(D==null)yield Y??=$.toObject(J);else yield $;this.throwIfAborted()}}catch(E){if(this.shouldEmitAndLogCommand)this.emitAndLogCommand(this.monitorCommands,$3.COMMAND_FAILED,X.databaseName,this.established,new IE.CommandFailedEvent(this,X,E,Z,this.description.serverConnectionId));throw E}}async command(F,A,B={},D){this.throwIfAborted(),B.signal?.throwIfAborted();for await(let X of this.sendCommand(F,A,B,D)){if(B.timeoutContext?.csotEnabled()){if(s5.MongoDBResponse.is(X)){if(X.isMaxTimeExpiredError)throw new D0.MongoOperationTimeoutError("Server reported a timeout error",{cause:new D0.MongoServerError(X.toObject())})}else if(Array.isArray(X?.writeErrors)&&X.writeErrors.some((Z)=>Z?.code===D0.MONGODB_ERROR_CODES.MaxTimeMSExpired)||X?.writeConcernError?.code===D0.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new D0.MongoOperationTimeoutError("Server reported a timeout error",{cause:new D0.MongoServerError(X)})}return X}throw new D0.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(F,A,B,D){(async()=>{this.throwIfAborted();for await(let Z of this.sendCommand(F,A,B))D(void 0,Z),this.throwIfAborted();throw new D0.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,D)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(F,A){let B=A.agreedCompressor==="none"||!cB.OpCompressedRequest.canCompress(F)?F:new cB.OpCompressedRequest(F,{agreedCompressor:A.agreedCompressor??"none",zlibCompressionLevel:A.zlibCompressionLevel??0}),D=Buffer.concat(await B.toBin());if(A.timeoutContext?.csotEnabled()){if(A.timeoutContext.minRoundTripTime!=null&&A.timeoutContext.remainingTimeMS<A.timeoutContext.minRoundTripTime)throw new D0.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining")}try{if(this.socket.write(D))return}catch($){let Y=new D0.MongoNetworkError("unexpected error writing to socket",{cause:$});throw this.onError(Y),Y}let X=J6.once(this.socket,"drain",A),Z=A?.timeoutContext?.timeoutForSocketWrite,J=Z?Promise.race([X,Z]):X;try{return await J}catch($){if(Zj.TimeoutError.is($)){let Y=new D0.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(Y),Y}else if($===A.signal?.reason)this.onError($);throw $}finally{Z?.clear()}}async*readMany(F){try{this.dataEvents=l81.onData(this.messageStream,F),this.messageStream.resume();for await(let A of this.dataEvents){let B=await c81.decompressResponse(A);if(yield B,!B.moreToCome)return}}catch(A){if(Zj.TimeoutError.is(A)){let B=new D0.MongoOperationTimeoutError(`Timed out during socket read (${A.duration}ms)`);throw this.dataEvents=null,this.onError(B),B}else if(A===F.signal?.reason)this.onError(A);throw A}finally{this.dataEvents=null,this.messageStream.pause()}}}$j.Connection=$3;class ME extends b81.Transform{constructor({connection:F}){super({writableObjectMode:!1,readableObjectMode:!0});this.bufferPool=new J6.BufferPool,this.connection=F}_transform(F,A,B){if(this.connection.delayedTimeoutId!=null)Jj.clearTimeout(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null;this.bufferPool.append(F);while(this.bufferPool.length){let D=this.bufferPool.getInt32();if(D==null)break;if(D<0)return B(new D0.MongoParseError(`Message size cannot be negative: ${D}`));if(D>this.bufferPool.length)break;let X=this.bufferPool.read(D);if(!this.push(X))return B(new D0.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}B()}}$j.SizedMessageTransform=ME;class Yj extends $3{constructor(F,A){super(F,A);this.autoEncrypter=A.autoEncrypter}async command(F,A,B,D){let{autoEncrypter:X}=this;if(!X)throw new D0.MongoRuntimeError("No AutoEncrypter available for encryption");if(J6.maxWireVersion(this)===0)return await super.command(F,A,B,D);let J=A.find||A.findAndModify?A.sort:null,$=A.createIndexes?A.indexes.map((W)=>W.key):null,Y=await X.encrypt(F.toString(),A,B);if(J!=null&&(A.find||A.findAndModify))Y.sort=J;if($!=null&&A.createIndexes)for(let[W,H]of $.entries())Y.indexes[W].key=H;let E=await super.command(F,Y,B,D??s5.MongoDBResponse),G=await X.decrypt(E.toBytes(),B),C=D?.make(G)??y81.deserialize(G,B);if(X[w4.kDecorateResult]){if(D==null)J6.decorateDecryptionResult(C,E.toObject(),!0);else if(C instanceof s5.CursorResponse)C.encryptedResponse=E}return C}}$j.CryptoConnection=Yj});var uE=z((Qj)=>{Object.defineProperty(Qj,"__esModule",{value:!0});Qj.LEGAL_TCP_SOCKET_OPTIONS=Qj.LEGAL_TLS_SOCKET_OPTIONS=void 0;Qj.connect=e81;Qj.makeConnection=Hj;Qj.performInitialHandshake=qj;Qj.prepareHandshakeDocument=zj;Qj.makeSocket=iB;var Cj=c("net"),r81=c("tls"),Wj=w0(),t81=h6(),G0=l(),jE=s(),o81=G4(),pB=D3(),Gj=lB(),v7=R3();async function e81(F){let A=null;try{let B=await iB(F);return A=Hj(F,B),await qj(A,F),A}catch(B){throw A?.destroy(),B}}function Hj(F,A){let B=F.connectionType??Gj.Connection;if(F.autoEncrypter)B=Gj.CryptoConnection;return new B(A,F)}function F51(F,A){let B=Number(F.maxWireVersion),D=Number(F.minWireVersion),X=!Number.isNaN(B)&&B>=v7.MIN_SUPPORTED_WIRE_VERSION,Z=!Number.isNaN(D)&&D<=v7.MAX_SUPPORTED_WIRE_VERSION;if(X){if(Z)return null;let $=`Server at ${A.hostAddress} reports minimum wire version ${JSON.stringify(F.minWireVersion)}, but this version of the Node.js Driver requires at most ${v7.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${v7.MAX_SUPPORTED_SERVER_VERSION})`;return new G0.MongoCompatibilityError($)}let J=`Server at ${A.hostAddress} reports maximum wire version ${JSON.stringify(F.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${v7.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${v7.MIN_SUPPORTED_SERVER_VERSION})`;return new G0.MongoCompatibilityError(J)}async function qj(F,A){let B=A.credentials;if(B){if(B.mechanism!==pB.AuthMechanism.MONGODB_DEFAULT&&!A.authProviders.getOrCreateProvider(B.mechanism,B.mechanismProperties))throw new G0.MongoInvalidArgumentError(`AuthMechanism '${B.mechanism}' not supported`)}let D=new o81.AuthContext(F,B,A);F.authContext=D;let X=await zj(D),Z={...A,raw:!1};if(typeof A.connectTimeoutMS==="number")Z.socketTimeoutMS=A.connectTimeoutMS;let J=new Date().getTime(),$=await E(X,Z);if(!("isWritablePrimary"in $))$.isWritablePrimary=$[Wj.LEGACY_HELLO_COMMAND];if($.helloOk)F.helloOk=!0;let Y=F51($,A);if(Y)throw Y;if(A.loadBalanced){if(!$.serviceId)throw new G0.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.")}if(F.hello=$,F.lastHelloMS=new Date().getTime()-J,!$.arbiterOnly&&B){D.response=$;let G=B.resolveAuthMechanism($),C=A.authProviders.getOrCreateProvider(G.mechanism,G.mechanismProperties);if(!C)throw new G0.MongoInvalidArgumentError(`No AuthProvider for ${G.mechanism} defined.`);try{await C.auth(D)}catch(W){if(W instanceof G0.MongoError){if(W.addErrorLabel(G0.MongoErrorLabel.HandshakeError),G0.needsRetryableWriteLabel(W,$.maxWireVersion,F.description.type))W.addErrorLabel(G0.MongoErrorLabel.RetryableWriteError)}throw W}}F.established=!0;async function E(G,C){try{return await F.command(jE.ns("admin.$cmd"),G,C)}catch(W){if(W instanceof G0.MongoError)W.addErrorLabel(G0.MongoErrorLabel.HandshakeError);throw W}}}async function zj(F){let A=F.options,B=A.compressors?A.compressors:[],{serverApi:D}=F.connection,X=await A.metadata,Z={[D?.version||A.loadBalanced===!0?"hello":Wj.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:X,compression:B};if(A.loadBalanced===!0)Z.loadBalanced=!0;let J=F.credentials;if(J){if(J.mechanism===pB.AuthMechanism.MONGODB_DEFAULT&&J.username){Z.saslSupportedMechs=`${J.source}.${J.username}`;let Y=F.options.authProviders.getOrCreateProvider(pB.AuthMechanism.MONGODB_SCRAM_SHA256,J.mechanismProperties);if(!Y)throw new G0.MongoInvalidArgumentError(`No AuthProvider for ${pB.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await Y.prepare(Z,F)}let $=F.options.authProviders.getOrCreateProvider(J.mechanism,J.mechanismProperties);if(!$)throw new G0.MongoInvalidArgumentError(`No AuthProvider for ${J.mechanism} defined.`);return await $.prepare(Z,F)}return Z}Qj.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];Qj.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function TE(F){let A=F.hostAddress;if(!A)throw new G0.MongoInvalidArgumentError('Option "hostAddress" is required');let B={};for(let D of Qj.LEGAL_TCP_SOCKET_OPTIONS)if(F[D]!=null)B[D]=F[D];if(B.keepAliveInitialDelay??=120000,B.keepAlive=!0,B.noDelay=F.noDelay??!0,typeof A.socketPath==="string")return B.path=A.socketPath,B;else if(typeof A.host==="string")return B.host=A.host,B.port=A.port,B;else throw new G0.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(A)}`)}function A51(F){let A=TE(F);for(let B of Qj.LEGAL_TLS_SOCKET_OPTIONS)if(F[B]!=null)A[B]=F[B];if(F.existingSocket)A.socket=F.existingSocket;if(A.servername==null&&A.host&&!Cj.isIP(A.host))A.servername=A.host;return A}async function iB(F){let A=F.tls??!1,B=F.connectTimeoutMS??30000,D=F.existingSocket,X;if(F.proxyHost!=null)return await D51({...F,connectTimeoutMS:B});if(A){let E=r81.connect(A51(F));if(typeof E.disableRenegotiation==="function")E.disableRenegotiation();X=E}else if(D)X=D;else X=Cj.createConnection(TE(F));X.setTimeout(B);let Z=null,{promise:J,resolve:$,reject:Y}=jE.promiseWithResolvers();if(D)$(X);else{let E=performance.now(),G=A?"secureConnect":"connect";if(X.once(G,()=>$(X)).once("error",(C)=>Y(new G0.MongoNetworkError(G0.MongoError.buildErrorMessage(C),{cause:C}))).once("timeout",()=>{Y(new G0.MongoNetworkTimeoutError(`Socket '${G}' timed out after ${performance.now()-E|0}ms (connectTimeoutMS: ${B})`))}).once("close",()=>Y(new G0.MongoNetworkError(`Socket closed after ${performance.now()-E|0} during connection establishment`))),F.cancellationToken!=null)Z=()=>Y(new G0.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-E|0}`)),F.cancellationToken.once("cancel",Z)}try{return X=await J,X}catch(E){throw X.destroy(),E}finally{if(X.setTimeout(0),Z!=null)F.cancellationToken?.removeListener("cancel",Z)}}var r5=null;function B51(){if(r5==null){let F=t81.getSocks();if("kModuleError"in F)throw F.kModuleError;r5=F}return r5}async function D51(F){let A=jE.HostAddress.fromHostPort(F.proxyHost??"",F.proxyPort??1080),B=await iB({...F,hostAddress:A,tls:!1,proxyHost:void 0}),D=TE(F);if(typeof D.host!=="string"||typeof D.port!=="number")throw new G0.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");r5??=B51();let X;try{X=(await r5.SocksClient.createConnection({existing_socket:B,timeout:F.connectTimeoutMS,command:"connect",destination:{host:D.host,port:D.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:F.proxyUsername||void 0,password:F.proxyPassword||void 0}})).socket}catch(Z){throw new G0.MongoNetworkError(G0.MongoError.buildErrorMessage(Z),{cause:Z})}return await iB({...F,existingSocket:X,proxyHost:void 0})}});var nB=z((jj)=>{Object.defineProperty(jj,"__esModule",{value:!0});jj.ServerHeartbeatFailedEvent=jj.ServerHeartbeatSucceededEvent=jj.ServerHeartbeatStartedEvent=jj.TopologyClosedEvent=jj.TopologyOpeningEvent=jj.TopologyDescriptionChangedEvent=jj.ServerClosedEvent=jj.ServerOpeningEvent=jj.ServerDescriptionChangedEvent=void 0;var T3=w0();class Uj{constructor(F,A,B,D){this.name=T3.SERVER_DESCRIPTION_CHANGED,this.topologyId=F,this.address=A,this.previousDescription=B,this.newDescription=D}}jj.ServerDescriptionChangedEvent=Uj;class Vj{constructor(F,A){this.name=T3.SERVER_OPENING,this.topologyId=F,this.address=A}}jj.ServerOpeningEvent=Vj;class Lj{constructor(F,A){this.name=T3.SERVER_CLOSED,this.topologyId=F,this.address=A}}jj.ServerClosedEvent=Lj;class wj{constructor(F,A,B){this.name=T3.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=F,this.previousDescription=A,this.newDescription=B}}jj.TopologyDescriptionChangedEvent=wj;class Rj{constructor(F){this.name=T3.TOPOLOGY_OPENING,this.topologyId=F}}jj.TopologyOpeningEvent=Rj;class Pj{constructor(F){this.name=T3.TOPOLOGY_CLOSED,this.topologyId=F}}jj.TopologyClosedEvent=Pj;class Ij{constructor(F,A){this.name=T3.SERVER_HEARTBEAT_STARTED,this.connectionId=F,this.awaited=A}}jj.ServerHeartbeatStartedEvent=Ij;class Nj{constructor(F,A,B,D){this.name=T3.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=F,this.duration=A,this.reply=B??{},this.awaited=D}}jj.ServerHeartbeatSucceededEvent=Nj;class Mj{constructor(F,A,B,D){this.name=T3.SERVER_HEARTBEAT_FAILED,this.connectionId=F,this.duration=A,this.failure=B,this.awaited=D}}jj.ServerHeartbeatFailedEvent=Mj});var SE=z((vj)=>{Object.defineProperty(vj,"__esModule",{value:!0});vj.ConnectionPoolClearedEvent=vj.ConnectionCheckedInEvent=vj.ConnectionCheckedOutEvent=vj.ConnectionCheckOutFailedEvent=vj.ConnectionCheckOutStartedEvent=vj.ConnectionClosedEvent=vj.ConnectionReadyEvent=vj.ConnectionCreatedEvent=vj.ConnectionPoolClosedEvent=vj.ConnectionPoolReadyEvent=vj.ConnectionPoolCreatedEvent=vj.ConnectionPoolMonitoringEvent=void 0;var m6=w0(),OE=s();class Y6{constructor(F){this.time=new Date,this.address=F.address}}vj.ConnectionPoolMonitoringEvent=Y6;class kj extends Y6{constructor(F){super(F);this.name=m6.CONNECTION_POOL_CREATED;let{maxConnecting:A,maxPoolSize:B,minPoolSize:D,maxIdleTimeMS:X,waitQueueTimeoutMS:Z}=F.options;this.options={maxConnecting:A,maxPoolSize:B,minPoolSize:D,maxIdleTimeMS:X,waitQueueTimeoutMS:Z}}}vj.ConnectionPoolCreatedEvent=kj;class uj extends Y6{constructor(F){super(F);this.name=m6.CONNECTION_POOL_READY}}vj.ConnectionPoolReadyEvent=uj;class Oj extends Y6{constructor(F){super(F);this.name=m6.CONNECTION_POOL_CLOSED}}vj.ConnectionPoolClosedEvent=Oj;class Sj extends Y6{constructor(F,A){super(F);this.name=m6.CONNECTION_CREATED,this.connectionId=A.id}}vj.ConnectionCreatedEvent=Sj;class xj extends Y6{constructor(F,A,B){super(F);this.name=m6.CONNECTION_READY,this.durationMS=OE.now()-B,this.connectionId=A.id}}vj.ConnectionReadyEvent=xj;class _j extends Y6{constructor(F,A,B,D){super(F);this.name=m6.CONNECTION_CLOSED,this.connectionId=A.id,this.reason=B,this.serviceId=A.serviceId,this.error=D??null}}vj.ConnectionClosedEvent=_j;class fj extends Y6{constructor(F){super(F);this.name=m6.CONNECTION_CHECK_OUT_STARTED}}vj.ConnectionCheckOutStartedEvent=fj;class gj extends Y6{constructor(F,A,B,D){super(F);this.name=m6.CONNECTION_CHECK_OUT_FAILED,this.durationMS=OE.now()-B,this.reason=A,this.error=D}}vj.ConnectionCheckOutFailedEvent=gj;class bj extends Y6{constructor(F,A,B){super(F);this.name=m6.CONNECTION_CHECKED_OUT,this.durationMS=OE.now()-B,this.connectionId=A.id}}vj.ConnectionCheckedOutEvent=bj;class yj extends Y6{constructor(F,A){super(F);this.name=m6.CONNECTION_CHECKED_IN,this.connectionId=A.id}}vj.ConnectionCheckedInEvent=yj;class hj extends Y6{constructor(F,A={}){super(F);this.name=m6.CONNECTION_POOL_CLEARED,this.serviceId=A.serviceId,this.interruptInUseConnections=A.interruptInUseConnections}}vj.ConnectionPoolClearedEvent=hj});var _E=z((pj)=>{Object.defineProperty(pj,"__esModule",{value:!0});pj.WaitQueueTimeoutError=pj.PoolClearedOnNetworkError=pj.PoolClearedError=pj.PoolClosedError=void 0;var aB=l();class dj extends aB.MongoDriverError{constructor(F){super("Attempted to check out a connection from closed connection pool");this.address=F.address}get name(){return"MongoPoolClosedError"}}pj.PoolClosedError=dj;class xE extends aB.MongoNetworkError{constructor(F,A){let B=A?A:`Connection pool for ${F.address} was cleared because another operation failed with: "${F.serverError?.message}"`;super(B,F.serverError?{cause:F.serverError}:void 0);this.address=F.address,this.addErrorLabel(aB.MongoErrorLabel.PoolRequestedRetry)}get name(){return"MongoPoolClearedError"}}pj.PoolClearedError=xE;class cj extends xE{constructor(F){super(F,`Connection to ${F.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}}pj.PoolClearedOnNetworkError=cj;class lj extends aB.MongoDriverError{constructor(F,A){super(F);this.address=A}get name(){return"MongoWaitQueueTimeoutError"}}pj.WaitQueueTimeoutError=lj});var rj=z((aj)=>{Object.defineProperty(aj,"__esModule",{value:!0});aj.ConnectionPool=aj.PoolState=void 0;var m7=c("timers"),w6=w0(),d6=l(),nj=D6(),O51=f0(),k3=s(),S51=uE(),sB=lB(),o0=SE(),d7=_E(),x51=wY();aj.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});class y0 extends nj.TypedEventEmitter{static{this.CONNECTION_POOL_CREATED=w6.CONNECTION_POOL_CREATED}static{this.CONNECTION_POOL_CLOSED=w6.CONNECTION_POOL_CLOSED}static{this.CONNECTION_POOL_CLEARED=w6.CONNECTION_POOL_CLEARED}static{this.CONNECTION_POOL_READY=w6.CONNECTION_POOL_READY}static{this.CONNECTION_CREATED=w6.CONNECTION_CREATED}static{this.CONNECTION_READY=w6.CONNECTION_READY}static{this.CONNECTION_CLOSED=w6.CONNECTION_CLOSED}static{this.CONNECTION_CHECK_OUT_STARTED=w6.CONNECTION_CHECK_OUT_STARTED}static{this.CONNECTION_CHECK_OUT_FAILED=w6.CONNECTION_CHECK_OUT_FAILED}static{this.CONNECTION_CHECKED_OUT=w6.CONNECTION_CHECKED_OUT}static{this.CONNECTION_CHECKED_IN=w6.CONNECTION_CHECKED_IN}constructor(F,A){super();if(this.on("error",k3.noop),this.options=Object.freeze({connectionType:sB.Connection,...A,maxPoolSize:A.maxPoolSize??100,minPoolSize:A.minPoolSize??0,maxConnecting:A.maxConnecting??2,maxIdleTimeMS:A.maxIdleTimeMS??0,waitQueueTimeoutMS:A.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:A.minPoolSizeCheckFrequencyMS??100,autoEncrypter:A.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new d6.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=aj.PoolState.paused,this.server=F,this.connections=new k3.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=k3.makeCounter(1),this.cancellationToken=new nj.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new k3.List,this.metrics=new x51.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(y0.CONNECTION_POOL_CREATED,new o0.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===aj.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){if(this.poolState!==aj.PoolState.paused)return;this.poolState=aj.PoolState.ready,this.emitAndLog(y0.CONNECTION_POOL_READY,new o0.ConnectionPoolReadyEvent(this)),m7.clearTimeout(this.minPoolSizeTimer),this.ensureMinPoolSize()}async checkOut(F){let A=k3.now();this.emitAndLog(y0.CONNECTION_CHECK_OUT_STARTED,new o0.ConnectionCheckOutStartedEvent(this));let{promise:B,resolve:D,reject:X}=k3.promiseWithResolvers(),Z=F.timeoutContext.connectionCheckoutTimeout,J={resolve:D,reject:X,cancelled:!1,checkoutTime:A},$=k3.addAbortListener(F.signal,function(){J.cancelled=!0,X(this.reason)});this.waitQueue.push(J),process.nextTick(()=>this.processWaitQueue());try{return Z?.throwIfExpired(),await(Z?Promise.race([B,Z]):B)}catch(Y){if(O51.TimeoutError.is(Y)){Z?.clear(),J.cancelled=!0,this.emitAndLog(y0.CONNECTION_CHECK_OUT_FAILED,new o0.ConnectionCheckOutFailedEvent(this,"timeout",J.checkoutTime));let E=new d7.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);if(F.timeoutContext.csotEnabled())throw new d6.MongoOperationTimeoutError("Timed out during connection checkout",{cause:E});throw E}throw Y}finally{$?.[k3.kDispose](),Z?.clear()}}checkIn(F){if(!this.checkedOut.has(F))return;let A=this.closed,B=this.connectionIsStale(F),D=!!(A||B||F.closed);if(!D)F.markAvailable(),this.connections.unshift(F);if(this.checkedOut.delete(F),this.emitAndLog(y0.CONNECTION_CHECKED_IN,new o0.ConnectionCheckedInEvent(this,F)),D){let X=F.closed?"error":A?"poolClosed":"stale";this.destroyConnection(F,X)}process.nextTick(()=>this.processWaitQueue())}clear(F={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:X}=F;if(!X)throw new d6.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let Z=X.toHexString(),J=this.serviceGenerations.get(Z);if(J==null)throw new d6.MongoRuntimeError("Service generations are required in load balancer mode.");else this.serviceGenerations.set(Z,J+1);this.emitAndLog(y0.CONNECTION_POOL_CLEARED,new o0.ConnectionPoolClearedEvent(this,{serviceId:X}));return}let A=F.interruptInUseConnections??!1,B=this.generation;this.generation+=1;let D=this.poolState===aj.PoolState.paused;if(this.poolState=aj.PoolState.paused,this.clearMinPoolSizeTimer(),!D)this.emitAndLog(y0.CONNECTION_POOL_CLEARED,new o0.ConnectionPoolClearedEvent(this,{interruptInUseConnections:A}));if(A)process.nextTick(()=>this.interruptInUseConnections(B));this.processWaitQueue()}interruptInUseConnections(F){for(let A of this.checkedOut)if(A.generation<=F)A.onError(new d7.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let F of this.checkedOut)F.onError(new d6.MongoClientClosedError)}close(){if(this.closed)return;if(this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return==="function")this.connectionCounter.return(void 0);this.poolState=aj.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let F of this.connections)this.emitAndLog(y0.CONNECTION_CLOSED,new o0.ConnectionClosedEvent(this,F,"poolClosed")),F.destroy();this.connections.clear(),this.emitAndLog(y0.CONNECTION_POOL_CLOSED,new o0.ConnectionPoolClosedEvent(this))}async reauthenticate(F){let A=F.authContext;if(!A)throw new d6.MongoRuntimeError("No auth context found on connection.");let B=A.credentials;if(!B)throw new d6.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let D=B.resolveAuthMechanism(F.hello),X=this.server.topology.client.s.authProviders.getOrCreateProvider(D.mechanism,D.mechanismProperties);if(!X)throw new d6.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${B.mechanism}`);await X.reauth(A);return}clearMinPoolSizeTimer(){let F=this.minPoolSizeTimer;if(F)m7.clearTimeout(F)}destroyConnection(F,A){this.emitAndLog(y0.CONNECTION_CLOSED,new o0.ConnectionClosedEvent(this,F,A)),F.destroy()}connectionIsStale(F){let A=F.serviceId;if(this.loadBalanced&&A){let B=A.toHexString(),D=this.serviceGenerations.get(B);return F.generation!==D}return F.generation!==this.generation}connectionIsIdle(F){return!!(this.options.maxIdleTimeMS&&F.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(F){let A=this.connectionIsStale(F),B=this.connectionIsIdle(F);if(!A&&!B&&!F.closed)return!1;let D=F.closed?"error":A?"stale":"idle";return this.destroyConnection(F,D),!0}createConnection(F){let A={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,metadata:this.server.topology.client.options.metadata};this.pending++;let B=k3.now();this.emitAndLog(y0.CONNECTION_CREATED,new o0.ConnectionCreatedEvent(this,{id:A.id})),S51.connect(A).then((D)=>{if(this.poolState!==aj.PoolState.ready){this.pending--,D.destroy(),F(this.closed?new d7.PoolClosedError(this):new d7.PoolClearedError(this));return}for(let X of[...w6.APM_EVENTS,sB.Connection.CLUSTER_TIME_RECEIVED])D.on(X,(Z)=>this.emit(X,Z));if(this.loadBalanced){D.on(sB.Connection.PINNED,(Z)=>this.metrics.markPinned(Z)),D.on(sB.Connection.UNPINNED,(Z)=>this.metrics.markUnpinned(Z));let X=D.serviceId;if(X){let Z,J=X.toHexString();if(Z=this.serviceGenerations.get(J))D.generation=Z;else this.serviceGenerations.set(J,0),D.generation=0}}D.markAvailable(),this.emitAndLog(y0.CONNECTION_READY,new o0.ConnectionReadyEvent(this,D,B)),this.pending--,F(void 0,D)},(D)=>{if(this.pending--,this.server.handleError(D),this.emitAndLog(y0.CONNECTION_CLOSED,new o0.ConnectionClosedEvent(this,{id:A.id,serviceId:void 0},"error",D)),D instanceof d6.MongoNetworkError||D instanceof d6.MongoServerError)D.connectionGeneration=A.generation;F(D??new d6.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let F=this.options.minPoolSize;if(this.poolState!==aj.PoolState.ready)return;if(this.connections.prune((A)=>this.destroyConnectionIfPerished(A)),this.totalConnectionCount<F&&this.pendingConnectionCount<this.options.maxConnecting)this.createConnection((A,B)=>{if(!A&&B)this.connections.push(B),process.nextTick(()=>this.processWaitQueue());if(this.poolState===aj.PoolState.ready)m7.clearTimeout(this.minPoolSizeTimer),this.minPoolSizeTimer=m7.setTimeout(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)});else m7.clearTimeout(this.minPoolSizeTimer),this.minPoolSizeTimer=m7.setTimeout(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)}processWaitQueue(){if(this.processingWaitQueue)return;this.processingWaitQueue=!0;while(this.waitQueueSize){let B=this.waitQueue.first();if(!B){this.waitQueue.shift();continue}if(B.cancelled){this.waitQueue.shift();continue}if(this.poolState!==aj.PoolState.ready){let X=this.closed?"poolClosed":"connectionError",Z=this.closed?new d7.PoolClosedError(this):new d7.PoolClearedError(this);this.emitAndLog(y0.CONNECTION_CHECK_OUT_FAILED,new o0.ConnectionCheckOutFailedEvent(this,X,B.checkoutTime,Z)),this.waitQueue.shift(),B.reject(Z);continue}if(!this.availableConnectionCount)break;let D=this.connections.shift();if(!D)break;if(!this.destroyConnectionIfPerished(D))this.checkedOut.add(D),this.emitAndLog(y0.CONNECTION_CHECKED_OUT,new o0.ConnectionCheckedOutEvent(this,D,B.checkoutTime)),this.waitQueue.shift(),B.resolve(D)}let{maxPoolSize:F,maxConnecting:A}=this.options;while(this.waitQueueSize>0&&this.pendingConnectionCount<A&&(F===0||this.totalConnectionCount<F)){let B=this.waitQueue.shift();if(!B||B.cancelled)continue;this.createConnection((D,X)=>{if(B.cancelled){if(!D&&X)this.connections.push(X)}else if(D)this.emitAndLog(y0.CONNECTION_CHECK_OUT_FAILED,new o0.ConnectionCheckOutFailedEvent(this,"connectionError",B.checkoutTime,D)),B.reject(D);else if(X)this.checkedOut.add(X),this.emitAndLog(y0.CONNECTION_CHECKED_OUT,new o0.ConnectionCheckedOutEvent(this,X,B.checkoutTime)),B.resolve(X);process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}}aj.ConnectionPool=y0});var hE=z((ej)=>{Object.defineProperty(ej,"__esModule",{value:!0});ej.Server=void 0;var _51=lB(),f51=rj(),g51=_E(),E3=w0(),X0=l(),b51=D6(),y51=E5(),bE=RY(),G9=s(),tj=P2(),n1=e2(),h51=vE(),yE=i5(),v51=Y5(),t5=G9.makeStateMachine({[n1.STATE_CLOSED]:[n1.STATE_CLOSED,n1.STATE_CONNECTING],[n1.STATE_CONNECTING]:[n1.STATE_CONNECTING,n1.STATE_CLOSING,n1.STATE_CONNECTED,n1.STATE_CLOSED],[n1.STATE_CONNECTED]:[n1.STATE_CONNECTED,n1.STATE_CLOSING,n1.STATE_CLOSED],[n1.STATE_CLOSING]:[n1.STATE_CLOSING,n1.STATE_CLOSED]});class C9 extends b51.TypedEventEmitter{static{this.SERVER_HEARTBEAT_STARTED=E3.SERVER_HEARTBEAT_STARTED}static{this.SERVER_HEARTBEAT_SUCCEEDED=E3.SERVER_HEARTBEAT_SUCCEEDED}static{this.SERVER_HEARTBEAT_FAILED=E3.SERVER_HEARTBEAT_FAILED}static{this.CONNECT=E3.CONNECT}static{this.DESCRIPTION_RECEIVED=E3.DESCRIPTION_RECEIVED}static{this.CLOSED=E3.CLOSED}static{this.ENDED=E3.ENDED}constructor(F,A,B){super();this.on("error",G9.noop),this.serverApi=B.serverApi;let D={hostAddress:A.hostAddress,...B};this.topology=F,this.pool=new f51.ConnectionPool(this,D),this.s={description:A,options:B,state:n1.STATE_CLOSED,operationCount:0};for(let X of[...E3.CMAP_EVENTS,...E3.APM_EVENTS])this.pool.on(X,(Z)=>this.emit(X,Z));if(this.pool.on(_51.Connection.CLUSTER_TIME_RECEIVED,(X)=>{this.clusterTime=X}),this.loadBalanced){this.monitor=null;return}this.monitor=new h51.Monitor(this,this.s.options);for(let X of E3.HEARTBEAT_EVENTS)this.monitor.on(X,(Z)=>this.emit(X,Z));this.monitor.on("resetServer",(X)=>fE(this,X)),this.monitor.on(C9.SERVER_HEARTBEAT_SUCCEEDED,(X)=>{if(this.emit(C9.DESCRIPTION_RECEIVED,new yE.ServerDescription(this.description.hostAddress,X.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===n1.STATE_CONNECTING)t5(this,n1.STATE_CONNECTED),this.emit(C9.CONNECT,this)})}get clusterTime(){return this.topology.clusterTime}set clusterTime(F){this.topology.clusterTime=F}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter;return}get loadBalanced(){return this.topology.description.type===n1.TopologyType.LoadBalanced}connect(){if(this.s.state!==n1.STATE_CLOSED)return;if(t5(this,n1.STATE_CONNECTING),!this.loadBalanced)this.monitor?.connect();else t5(this,n1.STATE_CONNECTED),this.emit(C9.CONNECT,this)}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){if(this.s.state===n1.STATE_CLOSED)return;if(t5(this,n1.STATE_CLOSING),!this.loadBalanced)this.monitor?.close();this.pool.close(),t5(this,n1.STATE_CLOSED),this.emit("closed")}requestCheck(){if(!this.loadBalanced)this.monitor?.requestCheck()}async command(F,A){if(this.s.state===n1.STATE_CLOSING||this.s.state===n1.STATE_CLOSED)throw new X0.MongoServerClosedError;let B=F.session,D=B?.pinnedConnection;if(this.incrementOperationCount(),D==null)try{D=await this.pool.checkOut({timeoutContext:A,signal:F.options.signal})}catch(G){if(this.decrementOperationCount(),!(G instanceof g51.PoolClearedError))this.handleError(G);throw G}let X=null,Z=()=>{if(this.decrementOperationCount(),B?.pinnedConnection!==D)if(X!=null){let G=()=>{this.pool.checkIn(D)};X.then(G,G)}else this.pool.checkIn(D)},J;try{J=F.buildCommand(D,B)}catch(G){throw Z(),G}let $=F.buildOptions(A),Y=F.ns;if(this.loadBalanced&&m51(J,B)&&!B?.pinnedConnection)B?.pin(D);if($.directConnection=this.topology.s.options.directConnection,F instanceof y51.AggregateOperation&&F.hasWriteStage&&G9.maxWireVersion(D)<v51.MIN_SECONDARY_WRITE_WIRE_VERSION)delete $.readPreference;if(this.description.iscryptd)$.omitMaxTimeMS=!0;try{try{let G=await D.command(Y,J,$,F.SERVER_COMMAND_RESPONSE_TYPE);return tj.throwIfWriteConcernError(G),G}catch(G){throw this.decorateCommandError(D,J,$,G)}}catch(G){if(G instanceof X0.MongoError&&G.code===X0.MONGODB_ERROR_CODES.Reauthenticate){X=this.pool.reauthenticate(D),X.then(void 0,(C)=>{X=null,G9.squashError(C)}),await G9.abortable(X,$),X=null;try{let C=await D.command(Y,J,$,F.SERVER_COMMAND_RESPONSE_TYPE);return tj.throwIfWriteConcernError(C),C}catch(C){throw this.decorateCommandError(D,J,$,C)}}else throw G}finally{Z()}}handleError(F,A){if(!(F instanceof X0.MongoError))return;if(F.connectionGeneration&&F.connectionGeneration<this.pool.generation)return;let D=F instanceof X0.MongoNetworkError&&!(F instanceof X0.MongoNetworkTimeoutError),X=F instanceof X0.MongoNetworkError&&F.beforeHandshake,Z=F.hasErrorLabel(X0.MongoErrorLabel.HandshakeError);if(D||X||Z){if(!this.loadBalanced)F.addErrorLabel(X0.MongoErrorLabel.ResetPool),fE(this,F);else if(A)this.pool.clear({serviceId:A.serviceId})}else if(X0.isSDAMUnrecoverableError(F)){if(c51(this,F)){let J=X0.isNodeShuttingDownError(F);if(this.loadBalanced&&A&&J)this.pool.clear({serviceId:A.serviceId});if(!this.loadBalanced){if(J)F.addErrorLabel(X0.MongoErrorLabel.ResetPool);fE(this,F),process.nextTick(()=>this.requestCheck())}}}}decorateCommandError(F,A,B,D){if(typeof D!=="object"||D==null||!("name"in D))throw new X0.MongoRuntimeError("An unexpected error type: "+typeof D);if(D.name==="AbortError"&&"cause"in D&&D.cause instanceof X0.MongoError)D=D.cause;if(!(D instanceof X0.MongoError))return D;if(d51(this.pool,F))return D;let X=B?.session;if(D instanceof X0.MongoNetworkError){if(X&&!X.hasEnded&&X.serverSession)X.serverSession.isDirty=!0;if(gE(X,A)&&!D.hasErrorLabel(X0.MongoErrorLabel.TransientTransactionError))D.addErrorLabel(X0.MongoErrorLabel.TransientTransactionError);if((oj(this.topology)||bE.isTransactionCommand(A))&&G9.supportsRetryableWrites(this)&&!gE(X,A))D.addErrorLabel(X0.MongoErrorLabel.RetryableWriteError)}else if((oj(this.topology)||bE.isTransactionCommand(A))&&X0.needsRetryableWriteLabel(D,G9.maxWireVersion(this),this.description.type)&&!gE(X,A))D.addErrorLabel(X0.MongoErrorLabel.RetryableWriteError);if(X&&X.isPinned&&D.hasErrorLabel(X0.MongoErrorLabel.TransientTransactionError))X.unpin({force:!0});return this.handleError(D,F),D}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}}ej.Server=C9;function fE(F,A){if(F.loadBalanced)return;if(A instanceof X0.MongoNetworkError&&!(A instanceof X0.MongoNetworkTimeoutError))F.monitor?.reset();F.emit(C9.DESCRIPTION_RECEIVED,new yE.ServerDescription(F.description.hostAddress,void 0,{error:A}))}function m51(F,A){if(A)return A.inTransaction()||A.transaction.isCommitted&&"commitTransaction"in F||"aggregate"in F||"find"in F||"getMore"in F||"listCollections"in F||"listIndexes"in F||"bulkWrite"in F;return!1}function d51(F,A){if(A.serviceId)return A.generation!==F.serviceGenerations.get(A.serviceId.toHexString());return A.generation!==F.generation}function c51(F,A){let B=A.topologyVersion,D=F.description.topologyVersion;return yE.compareTopologyVersion(D,B)<0}function gE(F,A){return F&&F.inTransaction()&&!bE.isTransactionCommand(A)}function oj(F){return F.s.options.retryWrites!==!1}});var vE=z((JT)=>{Object.defineProperty(JT,"__esModule",{value:!0});JT.RTTSampler=JT.MonitorInterval=JT.RTTPinger=JT.Monitor=JT.ServerMonitoringMode=void 0;var R4=c("timers"),AT=$1(),rB=uE(),l51=T$(),mE=w0(),c7=l(),p51=Z4(),BT=D6(),e0=s(),F2=e2(),o5=nB(),e5=hE(),l7="idle",W9="monitoring",p7=e0.makeStateMachine({[F2.STATE_CLOSING]:[F2.STATE_CLOSING,l7,F2.STATE_CLOSED],[F2.STATE_CLOSED]:[F2.STATE_CLOSED,W9],[l7]:[l7,W9,F2.STATE_CLOSING],[W9]:[W9,l7,F2.STATE_CLOSING]}),i51=new Set([F2.STATE_CLOSING,F2.STATE_CLOSED,W9]);function FF(F){return F.s.state===F2.STATE_CLOSED||F.s.state===F2.STATE_CLOSING}JT.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});class ZT extends BT.TypedEventEmitter{constructor(F,A){super();this.component=p51.MongoLoggableComponent.TOPOLOGY,this.on("error",e0.noop),this.server=F,this.connection=null,this.cancellationToken=new BT.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:F2.STATE_CLOSED},this.address=F.description.address,this.options=Object.freeze({connectTimeoutMS:A.connectTimeoutMS??1e4,heartbeatFrequencyMS:A.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:A.minHeartbeatFrequencyMS??500,serverMonitoringMode:A.serverMonitoringMode}),this.isRunningInFaasEnv=l51.getFAASEnv()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new pE(10);let B=this.cancellationToken,D={id:"<monitor>",generation:F.pool.generation,cancellationToken:B,hostAddress:F.description.hostAddress,...A,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};if(delete D.credentials,D.autoEncrypter)delete D.autoEncrypter;this.connectOptions=Object.freeze(D)}connect(){if(this.s.state!==F2.STATE_CLOSED)return;let F=this.options.heartbeatFrequencyMS,A=this.options.minHeartbeatFrequencyMS;this.monitorId=new tB(XT(this),{heartbeatFrequencyMS:F,minHeartbeatFrequencyMS:A,immediate:!0})}requestCheck(){if(i51.has(this.s.state))return;this.monitorId?.wake()}reset(){let F=this.server.description.topologyVersion;if(FF(this)||F==null)return;p7(this,F2.STATE_CLOSING),DT(this),p7(this,l7);let A=this.options.heartbeatFrequencyMS,B=this.options.minHeartbeatFrequencyMS;this.monitorId=new tB(XT(this),{heartbeatFrequencyMS:A,minHeartbeatFrequencyMS:B})}close(){if(FF(this))return;p7(this,F2.STATE_CLOSING),DT(this),this.emit("close"),p7(this,F2.STATE_CLOSED)}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(F){this.rttSampler.addSample(F)}clearRttSamples(){this.rttSampler.clear()}}JT.Monitor=ZT;function DT(F){F.monitorId?.stop(),F.monitorId=void 0,F.rttPinger?.close(),F.rttPinger=void 0,F.cancellationToken.emit("cancel"),F.connection?.destroy(),F.connection=null,F.clearRttSamples()}function dE(F,A){if(A==null)return!1;let B=F.options.serverMonitoringMode;if(B===JT.ServerMonitoringMode.poll)return!1;if(B===JT.ServerMonitoringMode.stream)return!0;if(F.isRunningInFaasEnv)return!1;return!0}function n51(F,A){let B,D,X=F.server.description.topologyVersion,Z=dE(F,X);F.emitAndLogHeartbeat(e5.Server.SERVER_HEARTBEAT_STARTED,F.server.topology.s.id,void 0,new o5.ServerHeartbeatStartedEvent(F.address,Z));function J(E){F.connection?.destroy(),F.connection=null,F.emitAndLogHeartbeat(e5.Server.SERVER_HEARTBEAT_FAILED,F.server.topology.s.id,void 0,new o5.ServerHeartbeatFailedEvent(F.address,e0.calculateDurationInMs(B),E,D));let G=!(E instanceof c7.MongoError)?new c7.MongoError(c7.MongoError.buildErrorMessage(E),{cause:E}):E;if(G.addErrorLabel(c7.MongoErrorLabel.ResetPool),G instanceof c7.MongoNetworkTimeoutError)G.addErrorLabel(c7.MongoErrorLabel.InterruptInUseConnections);F.emit("resetServer",G),A(E)}function $(E){if(!("isWritablePrimary"in E))E.isWritablePrimary=E[mE.LEGACY_HELLO_COMMAND];let G=Z&&F.rttPinger?F.rttPinger.latestRtt??e0.calculateDurationInMs(B):e0.calculateDurationInMs(B);if(F.addRttSample(G),F.emitAndLogHeartbeat(e5.Server.SERVER_HEARTBEAT_SUCCEEDED,F.server.topology.s.id,E.connectionId,new o5.ServerHeartbeatSucceededEvent(F.address,G,E,Z)),Z)F.emitAndLogHeartbeat(e5.Server.SERVER_HEARTBEAT_STARTED,F.server.topology.s.id,void 0,new o5.ServerHeartbeatStartedEvent(F.address,!0)),B=e0.now();else F.rttPinger?.close(),F.rttPinger=void 0,A(void 0,E)}let{connection:Y}=F;if(Y&&!Y.closed){let{serverApi:E,helloOk:G}=Y,C=F.options.connectTimeoutMS,W=F.options.heartbeatFrequencyMS,H={[E?.version||G?"hello":mE.LEGACY_HELLO_COMMAND]:1,...Z&&X?{maxAwaitTimeMS:W,topologyVersion:a51(X)}:{}},q=Z?{socketTimeoutMS:C?C+W:0,exhaustAllowed:!0}:{socketTimeoutMS:C};if(Z&&F.rttPinger==null)F.rttPinger=new lE(F);if(B=e0.now(),Z)return D=!0,Y.exhaustCommand(e0.ns("admin.$cmd"),H,q,(Q,K)=>{if(Q)return J(Q);return $(K)});D=!1,Y.command(e0.ns("admin.$cmd"),H,q).then($,J);return}(async()=>{let E=await rB.makeSocket(F.connectOptions),G=rB.makeConnection(F.connectOptions,E);B=e0.now();try{return await rB.performInitialHandshake(G,F.connectOptions),G}catch(C){throw G.destroy(),C}})().then((E)=>{if(FF(F)){E.destroy();return}let G=e0.calculateDurationInMs(B);F.addRttSample(G),F.connection=E,F.emitAndLogHeartbeat(e5.Server.SERVER_HEARTBEAT_SUCCEEDED,F.server.topology.s.id,E.hello?.connectionId,new o5.ServerHeartbeatSucceededEvent(F.address,G,E.hello,dE(F,E.hello?.topologyVersion))),A(void 0,E.hello)},(E)=>{F.connection=null,D=!1,J(E)})}function XT(F){return(A)=>{if(F.s.state===W9){process.nextTick(A);return}p7(F,W9);function B(){if(!FF(F))p7(F,l7);A()}n51(F,(D,X)=>{if(D){if(F.server.description.type===F2.ServerType.Unknown)return B()}if(dE(F,X?.topologyVersion))R4.setTimeout(()=>{if(!FF(F))F.monitorId?.wake()},0);B()})}}function a51(F){return{processId:F.processId,counter:AT.Long.isLong(F.counter)?F.counter:AT.Long.fromNumber(F.counter)}}class lE{constructor(F){this.connection=void 0,this.cancellationToken=F.cancellationToken,this.closed=!1,this.monitor=F,this.latestRtt=F.latestRtt??void 0;let A=F.options.heartbeatFrequencyMS;this.monitorId=R4.setTimeout(()=>this.measureRoundTripTime(),A)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,R4.clearTimeout(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(F,A){if(this.closed){A?.destroy();return}if(this.connection==null)this.connection=A;this.latestRtt=e0.calculateDurationInMs(F),this.monitorId=R4.setTimeout(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let F=e0.now();if(this.closed)return;let A=this.connection;if(A==null){rB.connect(this.monitor.connectOptions).then((D)=>{this.measureAndReschedule(F,D)},()=>{this.connection=void 0});return}let B=A.serverApi?.version||A.helloOk?"hello":mE.LEGACY_HELLO_COMMAND;A.command(e0.ns("admin.$cmd"),{[B]:1},void 0).then(()=>this.measureAndReschedule(F),()=>{this.connection?.destroy(),this.connection=void 0;return})}}JT.RTTPinger=lE;class tB{constructor(F,A={}){if(this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{if(this.stopped)return;if(this.timerId)R4.clearTimeout(this.timerId);this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=e0.now(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)})},this.fn=F,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=A.heartbeatFrequencyMS??1000,this.minHeartbeatFrequencyMS=A.minHeartbeatFrequencyMS??500,A.immediate)this._executeAndReschedule();else this._reschedule(void 0)}wake(){let A=e0.now()-this.lastExecutionEnded;if(A<0)return this._executeAndReschedule();if(this.isExecutionInProgress)return;if(this.isExpeditedCallToFnScheduled)return;if(A<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-A);return}this._executeAndReschedule()}stop(){if(this.stopped=!0,this.timerId)R4.clearTimeout(this.timerId),this.timerId=void 0;this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let F=e0.now(),A=F-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:F,timeSinceLastCall:A}}_reschedule(F){if(this.stopped)return;if(this.timerId)R4.clearTimeout(this.timerId);this.timerId=R4.setTimeout(this._executeAndReschedule,F||this.heartbeatFrequencyMS)}}JT.MonitorInterval=tB;class pE{constructor(F=10){this.rttSamples=new Float64Array(F),this.length=0,this.writeIndex=0}addSample(F){if(this.rttSamples[this.writeIndex++]=F,this.length<this.rttSamples.length)this.length++;this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let F=this.rttSamples[0];for(let A=1;A<this.length;A++)if(this.rttSamples[A]<F)F=this.rttSamples[A];return F}average(){if(this.length===0)return 0;let F=0;for(let A=0;A<this.length;A++)F+=this.rttSamples[A];return F/this.length}get last(){if(this.length===0)return null;return this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}}JT.RTTSampler=pE});var oE=z((HT)=>{Object.defineProperty(HT,"__esModule",{value:!0});HT.DEFAULT_OPTIONS=HT.OPTIONS=void 0;HT.resolveSRVRecord=JF1;HT.parseOptions=$F1;var iE=c("dns"),o51=s$(),e51=c("url"),i7=VB(),G3=D3(),$T=h5(),ET=TM(),r=l(),oB=$9(),sE=Z4(),nE=x6(),P4=_0(),FF1=vE(),z2=s(),u3=P2(),aE=["authSource","replicaSet","loadBalanced"],AF1="loadBalanced option only supported with a single host in the URI",BF1="loadBalanced option not supported with a replicaSet option",DF1="loadBalanced option not supported when directConnection is provided";function WT(F){return async function A(B){try{return await iE.promises[F](B)}catch(D){if(D.code===iE.TIMEOUT)return await iE.promises[F](B);else throw D}}}var XF1=WT("resolveSrv"),ZF1=WT("resolveTxt");async function JF1(F){if(typeof F.srvHost!=="string")throw new r.MongoAPIError('Option "srvHost" must not be empty');let A=F.srvHost,B=ZF1(A);B.then(void 0,z2.squashError);let D=`_${F.srvServiceName}._tcp.${A}`,X=await XF1(D);if(X.length===0)throw new r.MongoAPIError("No addresses found at host");for(let{name:W}of X)z2.checkParentDomainMatch(W,A);let Z=X.map((W)=>z2.HostAddress.fromString(`${W.name}:${W.port??27017}`));rE(Z,F,!0);let J;try{J=await B}catch(W){if(W.code!=="ENODATA"&&W.code!=="ENOTFOUND")throw W;return Z}if(J.length>1)throw new r.MongoParseError("Multiple text records not allowed");let $=new e51.URLSearchParams(J[0].join(""));if([...$.keys()].some((W)=>!aE.includes(W)))throw new r.MongoParseError(`Text record may only set any of: ${aE.join(", ")}`);if(aE.some((W)=>$.get(W)===""))throw new r.MongoParseError("Cannot have empty URI params in DNS TXT Record");let E=$.get("authSource")??void 0,G=$.get("replicaSet")??void 0,C=$.get("loadBalanced")??void 0;if(!F.userSpecifiedAuthSource&&E&&F.credentials&&!G3.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(F.credentials.mechanism))F.credentials=i7.MongoCredentials.merge(F.credentials,{source:E});if(!F.userSpecifiedReplicaSet&&G)F.replicaSet=G;if(C==="true")F.loadBalanced=!0;if(F.replicaSet&&F.srvMaxHosts>0)throw new r.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return rE(Z,F,!0),Z}function YF1(F){if(!F)return;let A=(B,D)=>{if(F.has(B)&&F.has(D))throw new r.MongoAPIError(`The '${B}' option cannot be used with the '${D}' option`)};A("tlsInsecure","tlsAllowInvalidCertificates"),A("tlsInsecure","tlsAllowInvalidHostnames")}function O3(F,A){if(typeof A==="boolean")return A;switch(A){case"true":return!0;case"false":return!1;default:throw new r.MongoParseError(`${F} must be either "true" or "false"`)}}function tE(F,A){let B=z2.parseInteger(A);if(B!=null)return B;throw new r.MongoParseError(`Expected ${F} to be stringified int value, got: ${A}`)}function AF(F,A){let B=tE(F,A);if(B<0)throw new r.MongoParseError(`${F} can only be a positive int value, got: ${A}`);return B}function*GT(F){if(F==="")return;let A=F.split(",");for(let B of A){let[D,X]=B.split(/:(.*)/);if(X==null)throw new r.MongoParseError("Cannot have undefined values in key value pairs");yield[D,X]}}class BF extends Map{constructor(F=[]){super(F.map(([A,B])=>[A.toLowerCase(),B]))}has(F){return super.has(F.toLowerCase())}get(F){return super.get(F.toLowerCase())}set(F,A){return super.set(F.toLowerCase(),A)}delete(F){return super.delete(F.toLowerCase())}}function $F1(F,A=void 0,B={}){if(A!=null&&!(A instanceof oB.MongoClient))B=A,A=void 0;if(B.useBigInt64&&typeof B.promoteLongs==="boolean"&&!B.promoteLongs)throw new r.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(B.useBigInt64&&typeof B.promoteValues==="boolean"&&!B.promoteValues)throw new r.MongoAPIError("Must request either bigint or Long for int64 deserialization");let D=new o51.default(F),{hosts:X,isSRV:Z}=D,J=Object.create(null);J.hosts=Z?[]:X.map(z2.HostAddress.fromString);let $=new BF;if(D.pathname!=="/"&&D.pathname!==""){let q=decodeURIComponent(D.pathname[0]==="/"?D.pathname.slice(1):D.pathname);if(q)$.set("dbName",[q])}if(D.username!==""){let q={username:decodeURIComponent(D.username)};if(typeof D.password==="string")q.password=decodeURIComponent(D.password);$.set("auth",[q])}for(let q of D.searchParams.keys()){let Q=D.searchParams.getAll(q),K=/readPreferenceTags/i.test(q);if(!K&&Q.length>1)throw new r.MongoInvalidArgumentError(`URI option "${q}" cannot appear more than once in the connection string`);if(!K&&Q.includes(""))throw new r.MongoAPIError(`URI option "${q}" cannot be specified with no value`);if(!$.has(q))$.set(q,Q)}let Y=new BF(Object.entries(B).filter(([,q])=>q!=null));if($.has("serverApi"))throw new r.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let E=$.get("authMechanismProperties");if(E){for(let q of E)if(/(^|,)ALLOWED_HOSTS:/.test(q))throw new r.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(Y.has("loadBalanced"))throw new r.MongoParseError("loadBalanced is only a valid option in the URI");let G=new BF,C=new Set([...$.keys(),...Y.keys()]);for(let q of C){let Q=[],K=Y.get(q);if(K!=null)Q.push(K);let U=$.get(q)??[];Q.push(...U),G.set(q,Q)}if(G.has("tls")||G.has("ssl")){let q=(G.get("tls")||[]).concat(G.get("ssl")||[]).map(O3.bind(null,"tls/ssl"));if(new Set(q).size!==1)throw new r.MongoParseError("All values of tls/ssl must be the same.")}YF1(G);let W=z2.setDifference(C,Array.from(Object.keys(HT.OPTIONS)).map((q)=>q.toLowerCase()));if(W.size!==0){let q=W.size>1?"options":"option",Q=W.size>1?"are":"is";throw new r.MongoParseError(`${q} ${Array.from(W).join(", ")} ${Q} not supported`)}for(let[q,Q]of Object.entries(HT.OPTIONS)){let K=G.get(q);if(!K||K.length===0){if(HT.DEFAULT_OPTIONS.has(q))CT(J,q,Q,[HT.DEFAULT_OPTIONS.get(q)])}else{let{deprecated:U}=Q;if(U){let R=typeof U==="string"?`: ${U}`:"";z2.emitWarning(`${q} is a deprecated option${R}`)}CT(J,q,Q,K)}}if(J.credentials){let q=J.credentials.mechanism===G3.AuthMechanism.MONGODB_GSSAPI,Q=J.credentials.mechanism===G3.AuthMechanism.MONGODB_X509,K=J.credentials.mechanism===G3.AuthMechanism.MONGODB_AWS,U=J.credentials.mechanism===G3.AuthMechanism.MONGODB_OIDC;if((q||Q)&&G.has("authSource")&&J.credentials.source!=="$external")throw new r.MongoParseError(`authMechanism ${J.credentials.mechanism} requires an authSource of '$external'`);if(!(q||Q||K||U)&&J.dbName&&!G.has("authSource"))J.credentials=i7.MongoCredentials.merge(J.credentials,{source:J.dbName});if(K){let{username:R,password:w}=J.credentials;if(R||w)throw new r.MongoAPIError("username and password cannot be provided when using MONGODB-AWS. Credentials must be provided in a manner that can be read by the AWS SDK.");if(J.credentials.mechanismProperties.AWS_SESSION_TOKEN)throw new r.MongoAPIError("AWS_SESSION_TOKEN cannot be provided when using MONGODB-AWS. Credentials must be provided in a manner that can be read by the AWS SDK.")}if(J.credentials.validate(),J.credentials.password===""&&J.credentials.username===""&&J.credentials.mechanism===G3.AuthMechanism.MONGODB_DEFAULT&&Object.keys(J.credentials.mechanismProperties).length===0)delete J.credentials}if(!J.dbName)J.dbName="test";if(rE(X,J,Z),A&&J.autoEncryption)ET.Encrypter.checkForMongoCrypt(),J.encrypter=new ET.Encrypter(A,F,B),J.autoEncrypter=J.encrypter.autoEncrypter;if(J.userSpecifiedAuthSource=Y.has("authSource")||$.has("authSource"),J.userSpecifiedReplicaSet=Y.has("replicaSet")||$.has("replicaSet"),Z){if(J.srvHost=X[0],J.directConnection)throw new r.MongoAPIError("SRV URI does not support directConnection");if(J.srvMaxHosts>0&&typeof J.replicaSet==="string")throw new r.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let q=!Y.has("tls")&&!$.has("tls"),Q=!Y.has("ssl")&&!$.has("ssl");if(q&&Q)J.tls=!0}else if($.has("srvMaxHosts")||Y.has("srvMaxHosts")||$.has("srvServiceName")||Y.has("srvServiceName"))throw new r.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(J.directConnection&&J.hosts.length!==1)throw new r.MongoParseError("directConnection option requires exactly one host");if(!J.proxyHost&&(J.proxyPort||J.proxyUsername||J.proxyPassword))throw new r.MongoParseError("Must specify proxyHost if other proxy options are passed");if(J.proxyUsername&&!J.proxyPassword||!J.proxyUsername&&J.proxyPassword)throw new r.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map((q)=>$.get(q)??[]).some((q)=>q.length>1))throw new r.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return J.mongoLoggerOptions=sE.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:J.mongodbLogPath,mongodbLogComponentSeverities:J.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:J.mongodbLogMaxDocumentLength}),J}function rE(F,A,B){if(A.loadBalanced){if(F.length>1)throw new r.MongoParseError(AF1);if(A.replicaSet)throw new r.MongoParseError(BF1);if(A.directConnection)throw new r.MongoParseError(DF1);if(B&&A.srvMaxHosts>0)throw new r.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}return}function CT(F,A,B,D){let{target:X,type:Z,transform:J}=B,$=X??A;switch(Z){case"boolean":F[$]=O3($,D[0]);break;case"int":F[$]=tE($,D[0]);break;case"uint":F[$]=AF($,D[0]);break;case"string":if(D[0]==null)break;F[$]=String(D[0]);break;case"record":if(!z2.isRecord(D[0]))throw new r.MongoParseError(`${$} must be an object`);F[$]=D[0];break;case"any":F[$]=D[0];break;default:{if(!J)throw new r.MongoParseError("Descriptors missing a type must define a transform");let Y=J({name:$,options:F,values:D});F[$]=Y;break}}}HT.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:F,options:A,values:[B]}){if(!z2.isRecord(B,["username","password"]))throw new r.MongoParseError(`${F} must be an object with 'username' and 'password' properties`);return i7.MongoCredentials.merge(A.credentials,{username:B.username,password:B.password})}},authMechanism:{target:"credentials",transform({options:F,values:[A]}){let B=Object.values(G3.AuthMechanism),[D]=B.filter((J)=>J.match(RegExp(String.raw`\b${A}\b`,"i")));if(!D)throw new r.MongoParseError(`authMechanism one of ${B}, got ${A}`);let X=F.credentials?.source;if(D===G3.AuthMechanism.MONGODB_PLAIN||G3.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(D))X="$external";let Z=F.credentials?.password;if(D===G3.AuthMechanism.MONGODB_X509&&Z==="")Z=void 0;return i7.MongoCredentials.merge(F.credentials,{mechanism:D,source:X,password:Z})}},authMechanismProperties:{target:"credentials",transform({options:F,values:A}){let B=Object.create(null);for(let D of A)if(typeof D==="string")for(let[X,Z]of GT(D))try{B[X]=O3(X,Z)}catch{B[X]=Z}else{if(!z2.isRecord(D))throw new r.MongoParseError("AuthMechanismProperties must be an object");B={...D}}return i7.MongoCredentials.merge(F.credentials,{mechanismProperties:B})}},authSource:{target:"credentials",transform({options:F,values:[A]}){let B=String(A);return i7.MongoCredentials.merge(F.credentials,{source:B})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[F]}){let A=typeof F==="string"?{version:F}:F,B=A&&A.version;if(!B)throw new r.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(oB.ServerApiVersion).join('", "')}"]`);if(!Object.values(oB.ServerApiVersion).some((D)=>D===B))throw new r.MongoParseError(`Invalid server API version=${B}; must be in the following enum: ["${Object.values(oB.ServerApiVersion).join('", "')}"]`);return A}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:F}){let A=new Set;for(let B of F){let D=typeof B==="string"?B.split(","):B;if(!Array.isArray(D))throw new r.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let X of D)if(Object.keys($T.Compressor).includes(String(X)))A.add(String(X));else throw new r.MongoInvalidArgumentError(`${X} is not a valid compression mechanism. Must be one of: ${Object.keys($T.Compressor)}.`)}return[...A]}},connectTimeoutMS:{default:30000,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:F,values:[A]}){let B=tE(F,A);if(B===4||B===6)return B;throw new r.MongoParseError(`Option 'family' must be 4 or 6 got ${B}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:F,options:A,values:[B]}){let D=u3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,fsync:O3(F,B)}});if(!D)throw new r.MongoParseError(`Unable to make a writeConcern from fsync=${B}`);return D}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:F,options:A,values:[B]}){let D=u3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,journal:O3(F,B)}});if(!D)throw new r.MongoParseError(`Unable to make a writeConcern from journal=${B}`);return D}},journal:{target:"writeConcern",transform({name:F,options:A,values:[B]}){let D=u3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,journal:O3(F,B)}});if(!D)throw new r.MongoParseError(`Unable to make a writeConcern from journal=${B}`);return D}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:F,values:[A]}){let B=AF(F,A);if(B===0)throw new r.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return B}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:F,options:A,values:[B]}){let D=AF(F,B);if(A.readPreference)return P4.ReadPreference.fromOptions({readPreference:{...A.readPreference,maxStalenessSeconds:D}});else return new P4.ReadPreference("secondary",void 0,{maxStalenessSeconds:D})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[F],options:A}){return{...A.driverInfo,name:String(F)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:z2.DEFAULT_PK_FACTORY,transform({values:[F]}){if(z2.isRecord(F,["createPk"])&&typeof F.createPk==="function")return F;throw new r.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${F}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[F],options:A}){if(F instanceof nE.ReadConcern||z2.isRecord(F,["level"]))return nE.ReadConcern.fromOptions({...A.readConcern,...F});throw new r.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(F)}`)}},readConcernLevel:{target:"readConcern",transform({values:[F],options:A}){return nE.ReadConcern.fromOptions({...A.readConcern,level:F})}},readPreference:{default:P4.ReadPreference.primary,transform({values:[F],options:A}){if(F instanceof P4.ReadPreference)return P4.ReadPreference.fromOptions({readPreference:{...A.readPreference,...F},...F});if(z2.isRecord(F,["mode"])){let B=P4.ReadPreference.fromOptions({readPreference:{...A.readPreference,...F},...F});if(B)return B;else throw new r.MongoParseError(`Cannot make read preference from ${JSON.stringify(F)}`)}if(typeof F==="string"){let B={hedge:A.readPreference?.hedge,maxStalenessSeconds:A.readPreference?.maxStalenessSeconds};return new P4.ReadPreference(F,A.readPreference?.tags,B)}throw new r.MongoParseError(`Unknown ReadPreference value: ${F}`)}},readPreferenceTags:{target:"readPreference",transform({values:F,options:A}){let B=Array.isArray(F[0])?F[0]:F,D=[];for(let X of B){let Z=Object.create(null);if(typeof X==="string")for(let[J,$]of GT(X))Z[J]=$;if(z2.isRecord(X))for(let[J,$]of Object.entries(X))Z[J]=$;D.push(Z)}return P4.ReadPreference.fromOptions({readPreference:A.readPreference,readPreferenceTags:D})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[F]}){if(!Object.values(FF1.ServerMonitoringMode).includes(F))throw new r.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return F}},serverSelectionTimeoutMS:{default:30000,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:F,values:[A]}){return!O3(F,A)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:F,values:[A]}){return O3(F,A)?()=>{return}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:F,options:A,values:[B]}){let D=O3(F,B);if(D)A.checkServerIdentity=()=>{return},A.rejectUnauthorized=!1;else A.checkServerIdentity=A.tlsAllowInvalidHostnames?()=>{return}:void 0,A.rejectUnauthorized=A.tlsAllowInvalidCertificates?!1:!0;return D}},w:{target:"writeConcern",transform({values:[F],options:A}){return u3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,w:F}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[F],options:A}){if(z2.isRecord(F)||F instanceof u3.WriteConcern)return u3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,...F}});else if(F==="majority"||typeof F==="number")return u3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,w:F}});throw new r.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(F)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[F],options:A}){let B=u3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,wtimeout:AF("wtimeout",F)}});if(B)return B;throw new r.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[F],options:A}){let B=u3.WriteConcern.fromOptions({writeConcern:{...A.writeConcern,wtimeoutMS:AF("wtimeoutMS",F)}});if(B)return B;throw new r.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[F]}){if(!(typeof F==="string"&&["stderr","stdout"].includes(F)||F&&typeof F==="object"&&("write"in F)&&typeof F.write==="function"))throw new r.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return F}},mongodbLogComponentSeverities:{transform({values:[F]}){if(typeof F!=="object"||!F)throw new r.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[A,B]of Object.entries(F)){if(typeof B!=="string"||typeof A!=="string")throw new r.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(sE.MongoLoggableComponent).some((D)=>D===A)&&A!=="default")throw new r.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${A}`);if(!Object.values(sE.SeverityLevel).some((D)=>D===B))throw new r.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${B} as a value for ${A}`)}return F}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},__skipPingOnConnect:{type:"boolean"}};HT.DEFAULT_OPTIONS=new BF(Object.entries(HT.OPTIONS).filter(([,F])=>F.default!=null).map(([F,A])=>[F,A.default]))});var KT=z((zT)=>{Object.defineProperty(zT,"__esModule",{value:!0});zT.MongoDBAWS=void 0;var eE=$1(),FG=h6(),a7=l(),n7=s(),CF1=G4(),WF1=XE(),HF1=VB(),qF1=D3(),zF1=110,AG={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1};class qT extends CF1.AuthProvider{constructor(F){super();this.credentialFetcher=new WF1.AWSSDKCredentialProvider(F)}async auth(F){let{connection:A}=F;if(!F.credentials)throw new a7.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in FG.aws4)throw FG.aws4.kModuleError;let{sign:B}=FG.aws4;if(n7.maxWireVersion(A)<9)throw new a7.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");F.credentials=await QF1(F.credentials,this.credentialFetcher);let{credentials:D}=F,X=D.username,Z=D.password,J=D.mechanismProperties.AWS_SESSION_TOKEN,$=X&&Z&&J?{accessKeyId:X,secretAccessKey:Z,sessionToken:J}:X&&Z?{accessKeyId:X,secretAccessKey:Z}:void 0,Y=D.source,E=await n7.randomBytes(32),G={saslStart:1,mechanism:"MONGODB-AWS",payload:eE.serialize({r:E,p:zF1},AG)},C=await A.command(n7.ns(`${Y}.$cmd`),G,void 0),W=eE.deserialize(C.payload.buffer,AG),H=W.h,q=W.s.buffer;if(q.length!==64)throw new a7.MongoRuntimeError(`Invalid server nonce length ${q.length}, expected 64`);if(!n7.ByteUtils.equals(q.subarray(0,E.byteLength),E))throw new a7.MongoRuntimeError("Server nonce does not begin with client nonce");if(H.length<1||H.length>255||H.indexOf("..")!==-1)throw new a7.MongoRuntimeError(`Server returned an invalid host: "${H}"`);let Q="Action=GetCallerIdentity&Version=2011-06-15",K=B({method:"POST",host:H,region:KF1(W.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":Q.length,"X-MongoDB-Server-Nonce":n7.ByteUtils.toBase64(q),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:Q},$),U={a:K.headers.Authorization,d:K.headers["X-Amz-Date"]};if(J)U.t=J;let R={saslContinue:1,conversationId:C.conversationId,payload:eE.serialize(U,AG)};await A.command(n7.ns(`${Y}.$cmd`),R,void 0)}}zT.MongoDBAWS=qT;async function QF1(F,A){function B(X){if(!X.AccessKeyId||!X.SecretAccessKey)throw new a7.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new HF1.MongoCredentials({username:X.AccessKeyId,password:X.SecretAccessKey,source:F.source,mechanism:qF1.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:X.Token}})}let D=await A.getCredentials();return B(D)}function KF1(F){let A=F.split(".");if(A.length===1||A[1]==="amazonaws")return"us-east-1";return A[1]}});var LT=z((VT)=>{Object.defineProperty(VT,"__esModule",{value:!0});VT.finishCommandDocument=UF1;VT.startCommandDocument=VF1;var s7=$1(),UT=D3();function UF1(F,A){if(A!=null)return{saslContinue:1,conversationId:A,payload:new s7.Binary(s7.BSON.serialize({jwt:F}))};return{saslStart:1,mechanism:UT.AuthMechanism.MONGODB_OIDC,payload:new s7.Binary(s7.BSON.serialize({jwt:F}))}}function VF1(F){let A={};if(F.username)A.n=F.username;return{saslStart:1,autoAuthorize:1,mechanism:UT.AuthMechanism.MONGODB_OIDC,payload:new s7.Binary(s7.BSON.serialize(A))}}});var XG=z((PT)=>{Object.defineProperty(PT,"__esModule",{value:!0});PT.CallbackWorkflow=PT.AUTOMATED_TIMEOUT_MS=PT.HUMAN_TIMEOUT_MS=void 0;var RF1=c("timers/promises"),PF1=l(),wT=s(),BG=LT();PT.HUMAN_TIMEOUT_MS=300000;PT.AUTOMATED_TIMEOUT_MS=60000;var IF1=["accessToken","expiresInSeconds","refreshToken"],NF1="User provided OIDC callbacks must return a valid object with an accessToken.",DG=100;class RT{constructor(F,A){this.cache=F,this.callback=this.withLock(A),this.lastExecutionTime=Date.now()-DG}async speculativeAuth(F,A){if(this.cache.hasAccessToken){let B=this.cache.getAccessToken();F.accessToken=B;let D=BG.finishCommandDocument(B);return D.db=A.source,{speculativeAuthenticate:D}}return{}}async reauthenticate(F,A){if(this.cache.hasAccessToken)if(F.accessToken===this.cache.getAccessToken())this.cache.removeAccessToken(),delete F.accessToken;else F.accessToken=this.cache.getAccessToken();await this.execute(F,A)}async startAuthentication(F,A,B){let D;if(B?.speculativeAuthenticate)D=B.speculativeAuthenticate;else D=await F.command(wT.ns(A.source),BG.startCommandDocument(A),void 0);return D}async finishAuthentication(F,A,B,D){await F.command(wT.ns(A.source),BG.finishCommandDocument(B,D),void 0)}async executeAndValidateCallback(F){let A=await this.callback(F);if(MF1(A))throw new PF1.MongoMissingCredentialsError(NF1);return A}withLock(F){let A=Promise.resolve();return async(B)=>{return await A,A=A.catch(()=>null).then(async()=>{let D=Date.now()-this.lastExecutionTime;if(D<=DG)await RF1.setTimeout(DG-D,{signal:B.timeoutContext});return this.lastExecutionTime=Date.now(),await F(B)}),await A}}}PT.CallbackWorkflow=RT;function MF1(F){if(F==null||typeof F!=="object")return!0;if(!("accessToken"in F))return!0;return!Object.getOwnPropertyNames(F).every((A)=>IF1.includes(A))}});var YG=z((jT)=>{Object.defineProperty(jT,"__esModule",{value:!0});jT.AutomatedCallbackWorkflow=void 0;var ZG=l(),NT=f0(),kF1=AD(),JG=XG();class MT extends JG.CallbackWorkflow{constructor(F,A){super(F,A)}async execute(F,A){if(this.cache.hasAccessToken){let D=this.cache.getAccessToken();if(!F.accessToken)F.accessToken=D;try{return await this.finishAuthentication(F,A,D)}catch(X){if(X instanceof ZG.MongoError&&X.code===ZG.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(F,A);else throw X}}let B=await this.fetchAccessToken(A);this.cache.put(B),F.accessToken=B.accessToken,await this.finishAuthentication(F,A,B.accessToken)}async fetchAccessToken(F){let A=new AbortController,B={timeoutContext:A.signal,version:kF1.OIDC_VERSION};if(F.username)B.username=F.username;if(F.mechanismProperties.TOKEN_RESOURCE)B.tokenAudience=F.mechanismProperties.TOKEN_RESOURCE;let D=NT.Timeout.expires(JG.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(B),D])}catch(X){if(NT.TimeoutError.is(X))throw A.abort(),new ZG.MongoOIDCError(`OIDC callback timed out after ${JG.AUTOMATED_TIMEOUT_MS}ms.`);throw X}finally{D.clear()}}}jT.AutomatedCallbackWorkflow=MT});var ST=z((uT)=>{Object.defineProperty(uT,"__esModule",{value:!0});uT.callback=void 0;var kT=YE(),$G=l(),uF1=s(),OF1=Object.freeze({Metadata:"true",Accept:"application/json"}),SF1="Azure endpoint did not return a value with only access_token and expires_in properties",xF1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",_F1=async(F)=>{let{tokenAudience:A,username:B}=F;if(!A)throw new $G.MongoAzureError(xF1);let D=await fF1(A,B);if(!gF1(D))throw new $G.MongoAzureError(SF1);return D};uT.callback=_F1;async function fF1(F,A){let B=new URL(kT.AZURE_BASE_URL);kT.addAzureParams(B,F,A);let D=await uF1.get(B,{headers:OF1});if(D.status!==200)throw new $G.MongoAzureError(`Status code ${D.status} returned from the Azure endpoint. Response body: ${D.body}`);let X=JSON.parse(D.body);return{accessToken:X.access_token,expiresInSeconds:Number(X.expires_in)}}function gF1(F){if(F==null||typeof F!=="object")return!1;return"accessToken"in F&&typeof F.accessToken==="string"&&"expiresInSeconds"in F&&typeof F.expiresInSeconds==="number"}});var gT=z((_T)=>{Object.defineProperty(_T,"__esModule",{value:!0});_T.callback=void 0;var xT=l(),bF1=s(),yF1="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",hF1=Object.freeze({"Metadata-Flavor":"Google"}),vF1="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",mF1=async(F)=>{let A=F.tokenAudience;if(!A)throw new xT.MongoGCPError(vF1);return await dF1(A)};_T.callback=mF1;async function dF1(F){let A=new URL(yF1);A.searchParams.append("audience",F);let B=await bF1.get(A,{headers:hF1});if(B.status!==200)throw new xT.MongoGCPError(`Status code ${B.status} returned from the GCP endpoint. Response body: ${B.body}`);return{accessToken:B.body}}});var mT=z((hT)=>{Object.defineProperty(hT,"__esModule",{value:!0});hT.callback=void 0;var cF1=c("fs/promises"),lF1="/var/run/secrets/kubernetes.io/serviceaccount/token",bT="AZURE_FEDERATED_TOKEN_FILE",yT="AWS_WEB_IDENTITY_TOKEN_FILE",pF1=async()=>{let F;if(process.env[bT])F=process.env[bT];else if(process.env[yT])F=process.env[yT];else F=lF1;return{accessToken:await cF1.readFile(F,"utf8")}};hT.callback=pF1});var EG=z((cT)=>{Object.defineProperty(cT,"__esModule",{value:!0});cT.TokenCache=void 0;var iF1=l();class BD extends iF1.MongoDriverError{}class dT{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new BD("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new BD("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new BD("Attempted to get IDP information when none exists.");return this.idpInfo}put(F,A){if(this.accessToken=F.accessToken,this.refreshToken=F.refreshToken,this.expiresInSeconds=F.expiresInSeconds,A)this.idpInfo=A}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}}cT.TokenCache=dT});var nT=z((pT)=>{Object.defineProperty(pT,"__esModule",{value:!0});pT.callback=void 0;var nF1=c("fs"),aF1=l(),sF1="OIDC_TOKEN_FILE must be set in the environment.",rF1=async()=>{let F=process.env.OIDC_TOKEN_FILE;if(!F)throw new aF1.MongoAWSError(sF1);return{accessToken:await nF1.promises.readFile(F,"utf8")}};pT.callback=rF1});var AD=z((tT)=>{Object.defineProperty(tT,"__esModule",{value:!0});tT.MongoDBOIDC=tT.OIDC_WORKFLOWS=tT.OIDC_VERSION=void 0;var sT=l(),tF1=G4(),DD=YG(),oF1=ST(),eF1=gT(),FA1=mT(),XD=EG(),AA1=nT(),BA1="AuthContext must provide credentials.";tT.OIDC_VERSION=1;tT.OIDC_WORKFLOWS=new Map;tT.OIDC_WORKFLOWS.set("test",()=>new DD.AutomatedCallbackWorkflow(new XD.TokenCache,AA1.callback));tT.OIDC_WORKFLOWS.set("azure",()=>new DD.AutomatedCallbackWorkflow(new XD.TokenCache,oF1.callback));tT.OIDC_WORKFLOWS.set("gcp",()=>new DD.AutomatedCallbackWorkflow(new XD.TokenCache,eF1.callback));tT.OIDC_WORKFLOWS.set("k8s",()=>new DD.AutomatedCallbackWorkflow(new XD.TokenCache,FA1.callback));class rT extends tF1.AuthProvider{constructor(F){super();if(!F)throw new sT.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=F}async auth(F){let{connection:A,reauthenticating:B,response:D}=F;if(D?.speculativeAuthenticate?.done&&!B)return;let X=aT(F);if(B)await this.workflow.reauthenticate(A,X);else await this.workflow.execute(A,X,D)}async prepare(F,A){let{connection:B}=A,D=aT(A),X=await this.workflow.speculativeAuth(B,D);return{...F,...X}}}tT.MongoDBOIDC=rT;function aT(F){let{credentials:A}=F;if(!A)throw new sT.MongoMissingCredentialsError(BA1);return A}});var Dk=z((Ak)=>{Object.defineProperty(Ak,"__esModule",{value:!0});Ak.HumanCallbackWorkflow=void 0;var XA1=$1(),XF=l(),eT=f0(),ZA1=AD(),GG=XG();class Fk extends GG.CallbackWorkflow{constructor(F,A){super(F,A)}async execute(F,A){if(this.cache.hasAccessToken){let J=this.cache.getAccessToken();F.accessToken=J;try{return await this.finishAuthentication(F,A,J)}catch($){if($ instanceof XF.MongoError&&$.code===XF.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete F.accessToken,await this.execute(F,A);else throw $}}if(this.cache.hasRefreshToken){let J=this.cache.getRefreshToken(),$=await this.fetchAccessToken(this.cache.getIdpInfo(),A,J);this.cache.put($),F.accessToken=$.accessToken;try{return await this.finishAuthentication(F,A,$.accessToken)}catch(Y){if(Y instanceof XF.MongoError&&Y.code===XF.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete F.accessToken,await this.execute(F,A);else throw Y}}let B=await this.startAuthentication(F,A),D=B.conversationId,X=XA1.BSON.deserialize(B.payload.buffer),Z=await this.fetchAccessToken(X,A);return this.cache.put(Z,X),F.accessToken=Z.accessToken,await this.finishAuthentication(F,A,Z.accessToken,D)}async fetchAccessToken(F,A,B){let D=new AbortController,X={timeoutContext:D.signal,version:ZA1.OIDC_VERSION,idpInfo:F};if(A.username)X.username=A.username;if(B)X.refreshToken=B;let Z=eT.Timeout.expires(GG.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(X),Z])}catch(J){if(eT.TimeoutError.is(J))throw D.abort(),new XF.MongoOIDCError(`OIDC callback timed out after ${GG.HUMAN_TIMEOUT_MS}ms.`);throw J}finally{Z.clear()}}}Ak.HumanCallbackWorkflow=Fk});var Yk=z((Zk)=>{Object.defineProperty(Zk,"__esModule",{value:!0});Zk.Plain=void 0;var JA1=$1(),YA1=l(),$A1=s(),EA1=G4();class Xk extends EA1.AuthProvider{async auth(F){let{connection:A,credentials:B}=F;if(!B)throw new YA1.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:D,password:X}=B,J={saslStart:1,mechanism:"PLAIN",payload:new JA1.Binary(Buffer.from(`\x00${D}\x00${X}`)),autoAuthorize:1};await A.command($A1.ns("$external.$cmd"),J,void 0)}}Zk.Plain=Xk});var Ck=z((GP1,Gk)=>{var $k=(F)=>F.codePointAt(0),GA1=(F)=>F[0],CA1=(F)=>F[F.length-1];function Ek(F){let A=[],B=F.length;for(let D=0;D<B;D+=1){let X=F.charCodeAt(D);if(X>=55296&&X<=56319&&B>D+1){let Z=F.charCodeAt(D+1);if(Z>=56320&&Z<=57343){A.push((X-55296)*1024+Z-56320+65536),D+=1;continue}}A.push(X)}return A}function ZF({unassigned_code_points:F,commonly_mapped_to_nothing:A,non_ASCII_space_characters:B,prohibited_characters:D,bidirectional_r_al:X,bidirectional_l:Z},J,$={}){let Y=B,E=A;if(typeof J!=="string")throw new TypeError("Expected string.");if(J.length===0)return"";let G=Ek(J).map((R)=>Y.get(R)?32:R).filter((R)=>!E.get(R)),C=String.fromCodePoint.apply(null,G).normalize("NFKC"),W=Ek(C);if(W.some((R)=>D.get(R)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if($.allowUnassigned!==!0){if(W.some((w)=>F.get(w)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5")}let q=W.some((R)=>X.get(R)),Q=W.some((R)=>Z.get(R));if(q&&Q)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let K=X.get($k(GA1(C))),U=X.get($k(CA1(C)));if(q&&!(K&&U))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return C}ZF.saslprep=ZF;ZF.default=ZF;Gk.exports=ZF});var qk=z((CP1,Hk)=>{Hk.exports=S3;function S3(F,A){if(!(this instanceof S3))return new S3(F,A);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=F||1024,this.deduplicate=A?A.deduplicate:null,this.zeros=this.deduplicate?ZD(this.deduplicate.length):null}S3.prototype.updated=function(F){while(this.deduplicate&&F.buffer[F.deduplicate]===this.deduplicate[F.deduplicate])if(F.deduplicate++,F.deduplicate===this.deduplicate.length){if(F.deduplicate=0,F.buffer.equals&&F.buffer.equals(this.deduplicate))F.buffer=this.deduplicate;break}if(F.updated||!this.updates)return;F.updated=!0,this.updates.push(F)};S3.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var F=this.updates.pop();return F.updated=!1,F};S3.prototype._array=function(F,A){if(F>=this.maxPages){if(A)return;WA1(this,F)}zA1(F,this.path);var B=this.pages;for(var D=this.level;D>0;D--){var X=this.path[D],Z=B[X];if(!Z){if(A)return;Z=B[X]=new Array(32768)}B=Z}return B};S3.prototype.get=function(F,A){var B=this._array(F,A),D=this.path[0],X=B&&B[D];if(!X&&!A){if(X=B[D]=new Wk(F,ZD(this.pageSize)),F>=this.length)this.length=F+1}if(X&&X.buffer===this.deduplicate&&this.deduplicate&&!A)X.buffer=qA1(X.buffer),X.deduplicate=0;return X};S3.prototype.set=function(F,A){var B=this._array(F,!1),D=this.path[0];if(F>=this.length)this.length=F+1;if(!A||this.zeros&&A.equals&&A.equals(this.zeros)){B[D]=void 0;return}if(this.deduplicate&&A.equals&&A.equals(this.deduplicate))A=this.deduplicate;var X=B[D],Z=HA1(A,this.pageSize);if(X)X.buffer=Z;else B[D]=new Wk(F,Z)};S3.prototype.toBuffer=function(){var F=new Array(this.length),A=ZD(this.pageSize),B=0;while(B<F.length){var D=this._array(B,!0);for(var X=0;X<32768&&B<F.length;X++)F[B++]=D&&D[X]?D[X].buffer:A}return Buffer.concat(F)};function WA1(F,A){while(F.maxPages<A){var B=F.pages;F.pages=new Array(32768),F.pages[0]=B,F.level++,F.maxPages*=32768}}function HA1(F,A){if(F.length===A)return F;if(F.length>A)return F.slice(0,A);var B=ZD(A);return F.copy(B),B}function ZD(F){if(Buffer.alloc)return Buffer.alloc(F);var A=new Buffer(F);return A.fill(0),A}function qA1(F){var A=Buffer.allocUnsafe?Buffer.allocUnsafe(F.length):new Buffer(F.length);return F.copy(A),A}function Wk(F,A){this.offset=F*A.length,this.buffer=A,this.updated=!1,this.deduplicate=0}function zA1(F,A){F=(F-(A[0]=F&32767))/32768,F=(F-(A[1]=F&32767))/32768,A[3]=(F-(A[2]=F&32767))/32768&32767}});var Qk=z((WP1,zk)=>{var QA1=qk();zk.exports=I4;function I4(F){if(!(this instanceof I4))return new I4(F);if(!F)F={};if(Buffer.isBuffer(F))F={buffer:F};if(this.pageOffset=F.pageOffset||0,this.pageSize=F.pageSize||1024,this.pages=F.pages||QA1(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!UA1(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!F.trackUpdates,this._pageMask=this.pageSize-1,F.buffer){for(var A=0;A<F.buffer.length;A+=this.pageSize)this.pages.set(A/this.pageSize,F.buffer.slice(A,A+this.pageSize));this.byteLength=F.buffer.length,this.length=8*this.byteLength}}I4.prototype.get=function(F){var A=F&7,B=(F-A)/8;return!!(this.getByte(B)&128>>A)};I4.prototype.getByte=function(F){var A=F&this._pageMask,B=(F-A)/this.pageSize,D=this.pages.get(B,!0);return D?D.buffer[A+this.pageOffset]:0};I4.prototype.set=function(F,A){var B=F&7,D=(F-B)/8,X=this.getByte(D);return this.setByte(D,A?X|128>>B:X&(255^128>>B))};I4.prototype.toBuffer=function(){var F=KA1(this.pages.length*this.pageSize);for(var A=0;A<this.pages.length;A++){var B=this.pages.get(A,!0),D=A*this.pageSize;if(B)B.buffer.copy(F,D,this.pageOffset,this.pageOffset+this.pageSize)}return F};I4.prototype.setByte=function(F,A){var B=F&this._pageMask,D=(F-B)/this.pageSize,X=this.pages.get(D,!1);if(B+=this.pageOffset,X.buffer[B]===A)return!1;if(X.buffer[B]=A,F>=this.byteLength)this.byteLength=F+1,this.length=this.byteLength*8;if(this._trackUpdates)this.pages.updated(X);return!0};function KA1(F){if(Buffer.alloc)return Buffer.alloc(F);var A=new Buffer(F);return A.fill(0),A}function UA1(F){return!(F&F-1)}});var Kk=z((JF)=>{var VA1=JF&&JF.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(JF,"__esModule",{value:!0});JF.createMemoryCodePoints=wA1;var LA1=VA1(Qk());function wA1(F){let A=0;function B(){let E=F.readUInt32BE(A);A+=4;let G=F.slice(A,A+E);return A+=E,LA1.default({buffer:G})}let D=B(),X=B(),Z=B(),J=B(),$=B(),Y=B();return{unassigned_code_points:D,commonly_mapped_to_nothing:X,non_ASCII_space_characters:Z,prohibited_characters:J,bidirectional_r_al:$,bidirectional_l:Y}}});var Vk=z((Uk)=>{Object.defineProperty(Uk,"__esModule",{value:!0});var RA1=c("zlib");Uk.default=RA1.gunzipSync(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var Rk=z((CG,wk)=>{var Lk=CG&&CG.__importDefault||function(F){return F&&F.__esModule?F:{default:F}},IA1=Lk(Ck()),NA1=Kk(),MA1=Lk(Vk()),jA1=NA1.createMemoryCodePoints(MA1.default);function YF(F,A){return IA1.default(jA1,F,A)}YF.saslprep=YF;YF.default=YF;wk.exports=YF});var xk=z((Ok)=>{Object.defineProperty(Ok,"__esModule",{value:!0});Ok.ScramSHA256=Ok.ScramSHA1=void 0;var TA1=Rk(),H9=c("crypto"),WG=$1(),c6=l(),$D=s(),kA1=G4(),Pk=D3();class qG extends kA1.AuthProvider{constructor(F){super();this.cryptoMethod=F||"sha1"}async prepare(F,A){let B=this.cryptoMethod,D=A.credentials;if(!D)throw new c6.MongoMissingCredentialsError("AuthContext must provide credentials.");let X=await $D.randomBytes(24);return A.nonce=X,{...F,speculativeAuthenticate:{...jk(B,D,X),db:D.source}}}async auth(F){let{reauthenticating:A,response:B}=F;if(B?.speculativeAuthenticate&&!A)return await Tk(this.cryptoMethod,B.speculativeAuthenticate,F);return await uA1(this.cryptoMethod,F)}}function Nk(F){return F.replace("=","=3D").replace(",","=2C")}function Mk(F,A){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(F,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(A.toString("base64"),"utf8")])}function jk(F,A,B){let D=Nk(A.username);return{saslStart:1,mechanism:F==="sha1"?Pk.AuthMechanism.MONGODB_SCRAM_SHA1:Pk.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new WG.Binary(Buffer.concat([Buffer.from("n,,","utf8"),Mk(D,B)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function uA1(F,A){let{connection:B,credentials:D}=A;if(!D)throw new c6.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!A.nonce)throw new c6.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let X=A.nonce,Z=D.source,J=jk(F,D,X),$=await B.command($D.ns(`${Z}.$cmd`),J,void 0);await Tk(F,$,A)}async function Tk(F,A,B){let{connection:D,credentials:X}=B;if(!X)throw new c6.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!B.nonce)throw new c6.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let Z=B.nonce,J=X.source,$=Nk(X.username),Y=X.password,E=F==="sha256"?TA1.saslprep(Y):OA1($,Y),G=Buffer.isBuffer(A.payload)?new WG.Binary(A.payload):A.payload,C=Ik(G),W=parseInt(C.i,10);if(W&&W<4096)throw new c6.MongoRuntimeError(`Server returned an invalid iteration count ${W}`);let{s:H,r:q}=C;if(q.startsWith("nonce"))throw new c6.MongoRuntimeError(`Server returned an invalid nonce: ${q}`);let Q=`c=biws,r=${q}`,K=gA1(E,Buffer.from(H,"base64"),W,F),U=JD(F,K,"Client Key"),R=JD(F,K,"Server Key"),w=xA1(F,U),V=[Mk($,Z),G.toString("utf8"),Q].join(","),N=JD(F,w,V),T=`p=${SA1(U,N)}`,I=[Q,T].join(","),u=JD(F,R,V),O={saslContinue:1,conversationId:A.conversationId,payload:new WG.Binary(Buffer.from(I))},k=await D.command($D.ns(`${J}.$cmd`),O,void 0),m=Ik(k.payload);if(!bA1(Buffer.from(m.v,"base64"),u))throw new c6.MongoRuntimeError("Server returned an invalid signature");if(k.done!==!1)return;let h={saslContinue:1,conversationId:k.conversationId,payload:Buffer.alloc(0)};await D.command($D.ns(`${J}.$cmd`),h,void 0)}function Ik(F){let A=F.toString("utf8"),B={},D=A.split(",");for(let X=0;X<D.length;X++){let Z=(D[X].match(/^([^=]*)=(.*)$/)??[]).slice(1);B[Z[0]]=Z[1]}return B}function OA1(F,A){if(typeof F!=="string")throw new c6.MongoInvalidArgumentError("Username must be a string");if(typeof A!=="string")throw new c6.MongoInvalidArgumentError("Password must be a string");if(A.length===0)throw new c6.MongoInvalidArgumentError("Password cannot be empty");let B;try{B=H9.createHash("md5")}catch(D){if(H9.getFips())throw new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode");throw D}return B.update(`${F}:mongo:${A}`,"utf8"),B.digest("hex")}function SA1(F,A){if(!Buffer.isBuffer(F))F=Buffer.from(F);if(!Buffer.isBuffer(A))A=Buffer.from(A);let B=Math.max(F.length,A.length),D=[];for(let X=0;X<B;X+=1)D.push(F[X]^A[X]);return Buffer.from(D).toString("base64")}function xA1(F,A){return H9.createHash(F).update(A).digest()}function JD(F,A,B){return H9.createHmac(F,A).update(B).digest()}var YD={},HG=0;function _A1(){YD={},HG=0}var fA1={sha256:32,sha1:20};function gA1(F,A,B,D){let X=[F,A.toString("base64"),B].join("_");if(YD[X]!=null)return YD[X];let Z=H9.pbkdf2Sync(F,A,B,fA1[D],D);if(HG>=200)_A1();return YD[X]=Z,HG+=1,Z}function bA1(F,A){if(F.length!==A.length)return!1;if(typeof H9.timingSafeEqual==="function")return H9.timingSafeEqual(F,A);let B=0;for(let D=0;D<F.length;D++)B|=F[D]^A[D];return B===0}class kk extends qG{constructor(){super("sha1")}}Ok.ScramSHA1=kk;class uk extends qG{constructor(){super("sha256")}}Ok.ScramSHA256=uk});var hk=z((bk)=>{Object.defineProperty(bk,"__esModule",{value:!0});bk.X509=void 0;var _k=l(),hA1=s(),vA1=G4();class gk extends vA1.AuthProvider{async prepare(F,A){let{credentials:B}=A;if(!B)throw new _k.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...F,speculativeAuthenticate:fk(B)}}async auth(F){let{connection:A,credentials:B}=F;if(!B)throw new _k.MongoMissingCredentialsError("AuthContext must provide credentials.");if(F.response?.speculativeAuthenticate)return;await A.command(hA1.ns("$external.$cmd"),fk(B),void 0)}}bk.X509=gk;function fk(F){let A={authenticate:1,mechanism:"MONGODB-X509"};if(F.username)A.user=F.username;return A}});var zG=z((pk)=>{Object.defineProperty(pk,"__esModule",{value:!0});pk.MongoClientAuthProviders=void 0;var mA1=KB(),dA1=KT(),dk=AD(),cA1=YG(),lA1=Dk(),vk=EG(),pA1=Yk(),q9=D3(),mk=xk(),iA1=hk(),ck=l(),nA1=new Map([[q9.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:F})=>new dA1.MongoDBAWS(F)],[q9.AuthMechanism.MONGODB_GSSAPI,()=>new mA1.GSSAPI],[q9.AuthMechanism.MONGODB_OIDC,(F)=>new dk.MongoDBOIDC(aA1(F))],[q9.AuthMechanism.MONGODB_PLAIN,()=>new pA1.Plain],[q9.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new mk.ScramSHA1],[q9.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new mk.ScramSHA256],[q9.AuthMechanism.MONGODB_X509,()=>new iA1.X509]]);class lk{constructor(){this.existingProviders=new Map}getOrCreateProvider(F,A){let B=this.existingProviders.get(F);if(B)return B;let D=nA1.get(F);if(!D)throw new ck.MongoInvalidArgumentError(`authMechanism ${F} not supported`);let X=D(A);return this.existingProviders.set(F,X),X}}pk.MongoClientAuthProviders=lk;function aA1(F){if(F.OIDC_HUMAN_CALLBACK)return new lA1.HumanCallbackWorkflow(new vk.TokenCache,F.OIDC_HUMAN_CALLBACK);else if(F.OIDC_CALLBACK)return new cA1.AutomatedCallbackWorkflow(new vk.TokenCache,F.OIDC_CALLBACK);else{let A=F.ENVIRONMENT,B=dk.OIDC_WORKFLOWS.get(A)?.();if(!B)throw new ck.MongoInvalidArgumentError(`Could not load workflow for environment ${F.ENVIRONMENT}`);return B}}});var KG=z((nk)=>{Object.defineProperty(nk,"__esModule",{value:!0});nk.ClientBulkWriteOperation=void 0;var sA1=f1(),rA1=s(),tA1=E0(),z9=h1();class QG extends tA1.CommandOperation{get commandName(){return"bulkWrite"}constructor(F,A){super(void 0,A);this.SERVER_COMMAND_RESPONSE_TYPE=sA1.ClientBulkWriteCursorResponse,this.commandBuilder=F,this.options=A,this.ns=new rA1.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk(F){return F}buildCommandDocument(F,A){let B=this.commandBuilder.buildBatch(F.description.maxMessageSizeBytes,F.description.maxWriteBatchSize,F.description.maxBsonObjectSize);if(!this.canRetryWrite)this.options.willRetryWrite=!1;return B}}nk.ClientBulkWriteOperation=QG;z9.defineAspects(QG,[z9.Aspect.WRITE_OPERATION,z9.Aspect.SKIP_COLLATION,z9.Aspect.CURSOR_CREATING,z9.Aspect.RETRYABLE,z9.Aspect.COMMAND_BATCHING,z9.Aspect.SUPPORTS_RAW_DATA])});var ok=z((rk)=>{Object.defineProperty(rk,"__esModule",{value:!0});rk.ClientBulkWriteCursor=void 0;var oA1=KG(),eA1=m0(),sk=s(),FB1=H2();class UG extends FB1.AbstractCursor{constructor(F,A,B={}){super(F,new sk.MongoDBNamespace("admin","$cmd"),B);this.commandBuilder=A,this.clientBulkWriteOptions=B}get response(){if(this.cursorResponse)return this.cursorResponse;return null}get operations(){return this.commandBuilder.lastOperations}clone(){let F=sk.mergeOptions({},this.clientBulkWriteOptions);return delete F.session,new UG(this.client,this.commandBuilder,{...F})}async _initialize(F){let A=new oA1.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:F}),B=await eA1.executeOperation(this.client,A,this.timeoutContext);return this.cursorResponse=B,{server:A.server,session:F,response:B}}}rk.ClientBulkWriteCursor=UG});var Cu=z((Zu)=>{Object.defineProperty(Zu,"__esModule",{value:!0});Zu.buildReplaceOneOperation=Zu.buildUpdateManyOperation=Zu.buildUpdateOneOperation=Zu.buildDeleteManyOperation=Zu.buildDeleteOneOperation=Zu.buildInsertOneOperation=Zu.ClientBulkWriteCommandBuilder=void 0;Zu.buildOperation=wG;var VG=$1(),ek=y5(),$F=l(),Au=G7(),RG=s(),Fu=1000;class Bu{constructor(F,A,B){this.models=F,this.options=A,this.pkFactory=B??RG.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){if("verboseResults"in this.options)return!this.options.verboseResults;return!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(F,A,B){this.isBatchRetryable=!0;let D=0,X=0,Z=this.baseCommand(),J=new Map;this.previousModelIndex=this.currentModelIndex;while(this.currentModelIndex<this.models.length){let $=this.models[this.currentModelIndex],Y=$.namespace,E=J.get(Y);if($.name==="deleteMany"||$.name==="updateMany")this.isBatchRetryable=!1;if(E!=null){let G=wG($,E,this.pkFactory,this.options),C;try{C=VG.BSON.serialize(G)}catch(W){throw new $F.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:W})}if(LG("ops",C,B),D+C.length<F&&Z.ops.documents.length<A)D=Fu+Z.ops.push(G,C),this.currentModelIndex++;else break}else{J.set(Y,X);let G={ns:Y},C=wG($,X,this.pkFactory,this.options),W,H;try{W=VG.BSON.serialize(G),H=VG.BSON.serialize(C)}catch(q){throw new $F.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:q})}if(LG("nsInfo",W,B),LG("ops",H,B),D+W.length+H.length<F&&Z.ops.documents.length<A)D=Fu+Z.nsInfo.push(G,W)+Z.ops.push(C,H),X++,this.currentModelIndex++;else break}}return this.lastOperations=Z.ops.documents,Z}baseCommand(){let F={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new ek.DocumentSequence("ops"),nsInfo:new ek.DocumentSequence("nsInfo")};if(this.options.bypassDocumentValidation!=null)F.bypassDocumentValidation=this.options.bypassDocumentValidation;if(this.options.let)F.let=this.options.let;if(this.options.comment!==void 0)F.comment=this.options.comment;return F}}Zu.ClientBulkWriteCommandBuilder=Bu;function LG(F,A,B){if(A.length>B)throw new $F.MongoInvalidArgumentError(`Client bulk write operation ${F} of length ${A.length} exceeds the max bson object size of ${B}`)}var AB1=(F,A,B)=>{let D={insert:A,document:F.document};return D.document._id=F.document._id??B.createPk(),D};Zu.buildInsertOneOperation=AB1;var BB1=(F,A)=>{return Du(F,A,!1)};Zu.buildDeleteOneOperation=BB1;var DB1=(F,A)=>{return Du(F,A,!0)};Zu.buildDeleteManyOperation=DB1;function Du(F,A,B){let D={delete:A,multi:B,filter:F.filter};if(F.hint)D.hint=F.hint;if(F.collation)D.collation=F.collation;return D}var XB1=(F,A,B)=>{return Xu(F,A,!1,B)};Zu.buildUpdateOneOperation=XB1;var ZB1=(F,A,B)=>{return Xu(F,A,!0,B)};Zu.buildUpdateManyOperation=ZB1;function JB1(F,A){if(!RG.hasAtomicOperators(F,A))throw new $F.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function Xu(F,A,B,D){JB1(F.update,D);let X={update:A,multi:B,filter:F.filter,updateMods:F.update};if(F.hint)X.hint=F.hint;if(F.upsert)X.upsert=F.upsert;if(F.arrayFilters)X.arrayFilters=F.arrayFilters;if(F.collation)X.collation=F.collation;if(!B&&"sort"in F&&F.sort!=null)X.sort=Au.formatSort(F.sort);return X}var YB1=(F,A)=>{if(RG.hasAtomicOperators(F.replacement))throw new $F.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let B={update:A,multi:!1,filter:F.filter,updateMods:F.replacement};if(F.hint)B.hint=F.hint;if(F.upsert)B.upsert=F.upsert;if(F.collation)B.collation=F.collation;if(F.sort!=null)B.sort=Au.formatSort(F.sort);return B};Zu.buildReplaceOneOperation=YB1;function wG(F,A,B,D){switch(F.name){case"insertOne":return Zu.buildInsertOneOperation(F,A,B);case"deleteOne":return Zu.buildDeleteOneOperation(F,A);case"deleteMany":return Zu.buildDeleteManyOperation(F,A);case"updateOne":return Zu.buildUpdateOneOperation(F,A,D);case"updateMany":return Zu.buildUpdateManyOperation(F,A,D);case"replaceOne":return Zu.buildReplaceOneOperation(F,A)}}});var zu=z((Hu)=>{Object.defineProperty(Hu,"__esModule",{value:!0});Hu.ClientBulkWriteResultsMerger=void 0;var GB1=Y4(),CB1=l(),WB1={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0};class Wu{static unacknowledged(){return WB1}constructor(F){if(this.options=F,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},F.verboseResults)this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(F){let A;try{for await(let B of F)if(B.ok===1){if(this.options.verboseResults)this.processDocument(F,B)}else if(this.options.ordered){let D=new CB1.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw D.writeErrors.set(B.idx+this.currentBatchOffset,{code:B.code,message:B.errmsg}),D.partialResult=this.result,D}else this.writeErrors.set(B.idx+this.currentBatchOffset,{code:B.code,message:B.errmsg})}catch(B){if(B instanceof GB1.MongoWriteConcernError){let D=B.result;if(A={insertedCount:D.nInserted,upsertedCount:D.nUpserted,matchedCount:D.nMatched,modifiedCount:D.nModified,deletedCount:D.nDeleted,writeConcernError:D.writeConcernError},this.options.verboseResults&&D.cursor.firstBatch){for(let X of D.cursor.firstBatch)if(X.ok===1)this.processDocument(F,X)}}else throw B}finally{if(F.response){let B=F.response;this.incrementCounts(B)}this.currentBatchOffset+=F.operations.length}if(A){let B=A.writeConcernError;this.incrementCounts(A),this.writeConcernErrors.push({code:B.code,message:B.errmsg})}return this.result}processDocument(F,A){let B=F.operations[A.idx];if("insert"in B)this.result.insertResults?.set(A.idx+this.currentBatchOffset,{insertedId:B.document._id});if("update"in B){let D={matchedCount:A.n,modifiedCount:A.nModified??0,didUpsert:A.upserted!=null};if(A.upserted)D.upsertedId=A.upserted._id;this.result.updateResults?.set(A.idx+this.currentBatchOffset,D)}if("delete"in B)this.result.deleteResults?.set(A.idx+this.currentBatchOffset,{deletedCount:A.n})}incrementCounts(F){this.result.insertedCount+=F.insertedCount,this.result.upsertedCount+=F.upsertedCount,this.result.matchedCount+=F.matchedCount,this.result.modifiedCount+=F.modifiedCount,this.result.deletedCount+=F.deletedCount}}Hu.ClientBulkWriteResultsMerger=Wu});var wu=z((Vu)=>{Object.defineProperty(Vu,"__esModule",{value:!0});Vu.ClientBulkWriteExecutor=void 0;var Qu=H2(),HB1=ok(),Q9=l(),qB1=f0(),zB1=s(),QB1=P2(),KB1=m0(),UB1=KG(),VB1=Cu(),Ku=zu();class Uu{constructor(F,A,B){if(A.length===0)throw new Q9.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=F,this.operations=A,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...B},!this.options.writeConcern)this.options.writeConcern=QB1.WriteConcern.fromOptions(this.client.s.options);if(this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new Q9.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new Q9.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let F=this.client.s.options.pkFactory,A=new VB1.ClientBulkWriteCommandBuilder(this.operations,this.options,F),B=zB1.resolveTimeoutOptions(this.client,this.options),D=qB1.TimeoutContext.create(B);if(this.options.writeConcern?.w===0){while(A.hasNextBatch()){let X=new UB1.ClientBulkWriteOperation(A,this.options);await KB1.executeOperation(this.client,X,D)}return Ku.ClientBulkWriteResultsMerger.unacknowledged()}else{let X=new Ku.ClientBulkWriteResultsMerger(this.options);while(A.hasNextBatch()){let Z=new Qu.CursorTimeoutContext(D,Symbol()),J={...this.options,timeoutContext:Z,...B.timeoutMS!=null&&{timeoutMode:Qu.CursorTimeoutMode.LIFETIME}},$=new HB1.ClientBulkWriteCursor(this.client,A,J);try{await X.merge($)}catch(Y){if(Y instanceof Q9.MongoServerError&&!(Y instanceof Q9.MongoClientBulkWriteError)){let E=new Q9.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw E.cause=Y,E.partialResult=X.bulkWriteResult,E}else throw Y}}if(X.writeConcernErrors.length>0||X.writeErrors.size>0){let Z=new Q9.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw Z.writeConcernErrors=X.writeConcernErrors,Z.writeErrors=X.writeErrors,Z.partialResult=X.bulkWriteResult,Z}return X.bulkWriteResult}}}Vu.ClientBulkWriteExecutor=Uu});var Nu=z((Pu)=>{Object.defineProperty(Pu,"__esModule",{value:!0});Pu.EndSessionsOperation=void 0;var LB1=f1(),wB1=E0(),RB1=_0(),PB1=s(),Ru=h1();class IG extends wB1.CommandOperation{constructor(F){super();this.writeConcern={w:0},this.ns=PB1.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=LB1.MongoDBResponse,this.sessions=F}buildCommandDocument(F,A){return{endSessions:this.sessions}}buildOptions(F){return{timeoutContext:F,readPreference:RB1.ReadPreference.primaryPreferred}}get commandName(){return"endSessions"}}Pu.EndSessionsOperation=IG;Ru.defineAspects(IG,Ru.Aspect.WRITE_OPERATION)});var NG=z((uu)=>{Object.defineProperty(uu,"__esModule",{value:!0});uu.WaitingForSuitableServerEvent=uu.ServerSelectionSucceededEvent=uu.ServerSelectionFailedEvent=uu.ServerSelectionStartedEvent=uu.ServerSelectionEvent=void 0;var IB1=s(),ED=w0();class r7{constructor(F,A,B){this.selector=F,this.operation=B,this.topologyDescription=A}}uu.ServerSelectionEvent=r7;class Mu extends r7{constructor(F,A,B){super(F,A,B);this.name=ED.SERVER_SELECTION_STARTED,this.message="Server selection started"}}uu.ServerSelectionStartedEvent=Mu;class ju extends r7{constructor(F,A,B,D){super(F,A,D);this.name=ED.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=B}}uu.ServerSelectionFailedEvent=ju;class Tu extends r7{constructor(F,A,B,D){super(F,A,D);this.name=ED.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:X,port:Z}=IB1.HostAddress.fromString(B).toHostPort();this.serverHost=X,this.serverPort=Z}}uu.ServerSelectionSucceededEvent=Tu;class ku extends r7{constructor(F,A,B,D){super(F,A,D);this.name=ED.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=B}}uu.WaitingForSuitableServerEvent=ku});var kG=z((Su)=>{Object.defineProperty(Su,"__esModule",{value:!0});Su.SrvPoller=Su.SrvPollingEvent=void 0;var kB1=c("dns"),MG=c("timers"),uB1=l(),OB1=D6(),EF=s();class jG{constructor(F){this.srvRecords=F}hostnames(){return new Set(this.srvRecords.map((F)=>EF.HostAddress.fromSrvRecord(F).toString()))}}Su.SrvPollingEvent=jG;class TG extends OB1.TypedEventEmitter{static{this.SRV_RECORD_DISCOVERY="srvRecordDiscovery"}constructor(F){super();if(this.on("error",EF.noop),!F||!F.srvHost)throw new uB1.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=F.srvHost,this.srvMaxHosts=F.srvMaxHosts??0,this.srvServiceName=F.srvServiceName??"mongodb",this.rescanSrvIntervalMS=60000,this.heartbeatFrequencyMS=F.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){if(!this._timeout)this.schedule()}stop(){if(this._timeout)MG.clearTimeout(this._timeout),this.generation+=1,this._timeout=void 0}schedule(){if(this._timeout)MG.clearTimeout(this._timeout);this._timeout=MG.setTimeout(()=>{this._poll().then(void 0,EF.squashError)},this.intervalMS)}success(F){this.haMode=!1,this.schedule(),this.emit(TG.SRV_RECORD_DISCOVERY,new jG(F))}failure(){this.haMode=!0,this.schedule()}async _poll(){let F=this.generation,A;try{A=await kB1.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(F!==this.generation)return;let B=[];for(let D of A)try{EF.checkParentDomainMatch(D.name,this.srvHost),B.push(D)}catch(X){EF.squashError(X)}if(!B.length){this.failure();return}this.success(B)}}Su.SrvPoller=TG});var cu=z((mu)=>{Object.defineProperty(mu,"__esModule",{value:!0});mu.Topology=void 0;var xB1=oE(),v2=w0(),C3=l(),Z0=Z4(),_B1=D6(),GF=_0(),uG=f0(),m2=s(),V1=e2(),N4=nB(),_u=hE(),SG=i5(),OG=Y5(),M4=NG(),GD=kG(),fu=RE(),fB1=0,CF=m2.makeStateMachine({[V1.STATE_CLOSED]:[V1.STATE_CLOSED,V1.STATE_CONNECTING],[V1.STATE_CONNECTING]:[V1.STATE_CONNECTING,V1.STATE_CLOSING,V1.STATE_CONNECTED,V1.STATE_CLOSED],[V1.STATE_CONNECTED]:[V1.STATE_CONNECTED,V1.STATE_CLOSING,V1.STATE_CLOSED],[V1.STATE_CLOSING]:[V1.STATE_CLOSING,V1.STATE_CLOSED]});class A2 extends _B1.TypedEventEmitter{static{this.SERVER_OPENING=v2.SERVER_OPENING}static{this.SERVER_CLOSED=v2.SERVER_CLOSED}static{this.SERVER_DESCRIPTION_CHANGED=v2.SERVER_DESCRIPTION_CHANGED}static{this.TOPOLOGY_OPENING=v2.TOPOLOGY_OPENING}static{this.TOPOLOGY_CLOSED=v2.TOPOLOGY_CLOSED}static{this.TOPOLOGY_DESCRIPTION_CHANGED=v2.TOPOLOGY_DESCRIPTION_CHANGED}static{this.ERROR=v2.ERROR}static{this.OPEN=v2.OPEN}static{this.CONNECT=v2.CONNECT}static{this.CLOSE=v2.CLOSE}static{this.TIMEOUT=v2.TIMEOUT}constructor(F,A,B){super();if(this.on("error",m2.noop),this.client=F,B=B??{hosts:[m2.HostAddress.fromString("localhost:27017")],...Object.fromEntries(xB1.DEFAULT_OPTIONS.entries())},typeof A==="string")A=[m2.HostAddress.fromString(A)];else if(!Array.isArray(A))A=[A];let D=[];for(let Y of A)if(typeof Y==="string")D.push(m2.HostAddress.fromString(Y));else if(Y instanceof m2.HostAddress)D.push(Y);else throw new C3.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(Y)}`);let X=gB1(B),Z=fB1++,J=B.srvMaxHosts==null||B.srvMaxHosts===0||B.srvMaxHosts>=D.length?D:m2.shuffle(D,B.srvMaxHosts),$=new Map;for(let Y of J)$.set(Y.toString(),new SG.ServerDescription(Y));if(this.waitQueue=new m2.List,this.s={id:Z,options:B,seedlist:D,state:V1.STATE_CLOSED,description:new fu.TopologyDescription(X,$,B.replicaSet,void 0,void 0,void 0,B),serverSelectionTimeoutMS:B.serverSelectionTimeoutMS,heartbeatFrequencyMS:B.heartbeatFrequencyMS,minHeartbeatFrequencyMS:B.minHeartbeatFrequencyMS,servers:new Map,credentials:B?.credentials,clusterTime:void 0,detectShardedTopology:(Y)=>this.detectShardedTopology(Y),detectSrvRecords:(Y)=>this.detectSrvRecords(Y)},this.mongoLogger=F.mongoLogger,this.component="topology",B.srvHost&&!B.loadBalanced)this.s.srvPoller=B.srvPoller??new GD.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:B.srvHost,srvMaxHosts:B.srvMaxHosts,srvServiceName:B.srvServiceName}),this.on(A2.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology);this.connectionLock=void 0}detectShardedTopology(F){let A=F.previousDescription.type,B=F.newDescription.type,D=A!==V1.TopologyType.Sharded&&B===V1.TopologyType.Sharded,Z=!!this.s.srvPoller?.listeners(GD.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);if(D&&!Z)this.s.srvPoller?.on(GD.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start()}detectSrvRecords(F){let A=this.s.description;if(this.s.description=this.s.description.updateFromSrvPollingEvent(F,this.s.options.srvMaxHosts),this.s.description===A)return;gu(this),this.emitAndLog(A2.TOPOLOGY_DESCRIPTION_CHANGED,new N4.TopologyDescriptionChangedEvent(this.s.id,A,this.s.description))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}async connect(F){this.connectionLock??=this._connect(F);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(F){if(F=F??{},this.s.state===V1.STATE_CONNECTED)return this;CF(this,V1.STATE_CONNECTING),this.emitAndLog(A2.TOPOLOGY_OPENING,new N4.TopologyOpeningEvent(this.s.id)),this.emitAndLog(A2.TOPOLOGY_DESCRIPTION_CHANGED,new N4.TopologyDescriptionChangedEvent(this.s.id,new fu.TopologyDescription(V1.TopologyType.Unknown),this.s.description));let A=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(A.map((J)=>[J.address,hu(this,J)])),this.s.options.loadBalanced)for(let J of A){let $=new SG.ServerDescription(J.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler($)}let B=this.client.s.options.serverSelectionTimeoutMS,D=F.readPreference??GF.ReadPreference.primary,X=uG.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:B,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),Z={operationName:"handshake",...F,timeoutContext:X};try{let J=await this.selectServer(OG.readPreferenceServerSelector(D),Z);if(this.s.options.__skipPingOnConnect!==!0){let Y=await J.pool.checkOut({timeoutContext:X});return J.pool.checkIn(Y),CF(this,V1.STATE_CONNECTED),this.emit(A2.OPEN,this),this.emit(A2.CONNECT,this),this}return CF(this,V1.STATE_CONNECTED),this.emit(A2.OPEN,this),this.emit(A2.CONNECT,this),this}catch(J){throw this.close(),J}}closeCheckedOutConnections(){for(let F of this.s.servers.values())return F.closeCheckedOutConnections()}close(){if(this.s.state===V1.STATE_CLOSED||this.s.state===V1.STATE_CLOSING)return;for(let F of this.s.servers.values())yu(F,this);if(this.s.servers.clear(),CF(this,V1.STATE_CLOSING),vu(this.waitQueue,new C3.MongoTopologyClosedError),this.s.srvPoller)this.s.srvPoller.stop(),this.s.srvPoller.removeListener(GD.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords);this.removeListener(A2.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),CF(this,V1.STATE_CLOSED),this.emitAndLog(A2.TOPOLOGY_CLOSED,new N4.TopologyClosedEvent(this.s.id))}async selectServer(F,A){let B;if(typeof F!=="function")if(typeof F==="string")B=OG.readPreferenceServerSelector(GF.ReadPreference.fromString(F));else{let W;if(F instanceof GF.ReadPreference)W=F;else GF.ReadPreference.translate(A),W=A.readPreference||GF.ReadPreference.primary;B=OG.readPreferenceServerSelector(W)}else B=F;if(A={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...A},this.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new M4.ServerSelectionStartedEvent(F,this.description,A.operationName));let D;if(A.timeoutContext)D=A.timeoutContext.serverSelectionTimeout;else D=uG.Timeout.expires(A.serverSelectionTimeoutMS??0);let X=this.description.type===V1.TopologyType.Sharded,Z=A.session,J=Z&&Z.transaction;if(X&&J&&J.server){if(this.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new M4.ServerSelectionSucceededEvent(F,this.description,J.server.pool.address,A.operationName));if(A.timeoutContext?.clearServerSelectionTimeout)D?.clear();return J.server}let{promise:$,resolve:Y,reject:E}=m2.promiseWithResolvers(),G={serverSelector:B,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:J,resolve:Y,reject:E,cancelled:!1,startTime:m2.now(),operationName:A.operationName,waitingLogged:!1,previousServer:A.previousServer},C=m2.addAbortListener(A.signal,function(){G.cancelled=!0,E(this.reason)});this.waitQueue.push(G),bu(this);try{D?.throwIfExpired();let W=await(D?Promise.race([$,D]):$);if(A.timeoutContext?.csotEnabled()&&W.description.minRoundTripTime!==0)A.timeoutContext.minRoundTripTime=W.description.minRoundTripTime;return W}catch(W){if(uG.TimeoutError.is(W)){G.cancelled=!0;let H=new C3.MongoServerSelectionError(`Server selection timed out after ${D?.duration} ms`,this.description);if(this.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))this.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new M4.ServerSelectionFailedEvent(F,this.description,H,A.operationName));if(A.timeoutContext?.csotEnabled())throw new C3.MongoOperationTimeoutError("Timed out during server selection",{cause:H});throw H}throw W}finally{if(C?.[m2.kDispose](),A.timeoutContext?.clearServerSelectionTimeout)D?.clear()}}serverUpdateHandler(F){if(!this.s.description.hasServer(F.address))return;if(bB1(this.s.description,F))return;let A=this.s.description,B=this.s.description.servers.get(F.address);if(!B)return;let D=F.$clusterTime;if(D)V1._advanceClusterTime(this,D);let X=B&&B.equals(F);if(this.s.description=this.s.description.update(F),this.s.description.compatibilityError){this.emit(A2.ERROR,new C3.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!X){let Z=this.s.description.servers.get(F.address);if(Z)this.emit(A2.SERVER_DESCRIPTION_CHANGED,new N4.ServerDescriptionChangedEvent(this.s.id,F.address,B,Z))}if(gu(this,F),this.waitQueue.length>0)bu(this);if(!X)this.emitAndLog(A2.TOPOLOGY_DESCRIPTION_CHANGED,new N4.TopologyDescriptionChangedEvent(this.s.id,A,this.s.description))}auth(F,A){if(typeof F==="function")A=F,F=void 0;if(typeof A==="function")A(void 0,!0)}isConnected(){return this.s.state===V1.STATE_CONNECTED}isDestroyed(){return this.s.state===V1.STATE_CLOSED}lastHello(){let F=Array.from(this.description.servers.values());if(F.length===0)return{};return F.filter((D)=>D.type!==V1.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(F){this.s.clusterTime=F}}mu.Topology=A2;function yu(F,A){for(let B of v2.LOCAL_SERVER_EVENTS)F.removeAllListeners(B);F.close(),A.emitAndLog(A2.SERVER_CLOSED,new N4.ServerClosedEvent(A.s.id,F.description.address));for(let B of v2.SERVER_RELAY_EVENTS)F.removeAllListeners(B)}function gB1(F){if(F?.directConnection)return V1.TopologyType.Single;if(F?.replicaSet)return V1.TopologyType.ReplicaSetNoPrimary;if(F?.loadBalanced)return V1.TopologyType.LoadBalanced;return V1.TopologyType.Unknown}function hu(F,A){F.emitAndLog(A2.SERVER_OPENING,new N4.ServerOpeningEvent(F.s.id,A.address));let B=new _u.Server(F,A,F.s.options);for(let D of v2.SERVER_RELAY_EVENTS)B.on(D,(X)=>F.emit(D,X));return B.on(_u.Server.DESCRIPTION_RECEIVED,(D)=>F.serverUpdateHandler(D)),B.connect(),B}function gu(F,A){if(A&&F.s.servers.has(A.address)){let B=F.s.servers.get(A.address);if(B){if(B.s.description=A,A.error instanceof C3.MongoError&&A.error.hasErrorLabel(C3.MongoErrorLabel.ResetPool)){let D=A.error.hasErrorLabel(C3.MongoErrorLabel.InterruptInUseConnections);B.pool.clear({interruptInUseConnections:D})}else if(A.error==null){let D=F.s.description.type;if(A.isDataBearing||A.type!==V1.ServerType.Unknown&&D===V1.TopologyType.Single)B.pool.ready()}}}for(let B of F.description.servers.values())if(!F.s.servers.has(B.address)){let D=hu(F,B);F.s.servers.set(B.address,D)}for(let B of F.s.servers){let D=B[0];if(F.description.hasServer(D))continue;if(!F.s.servers.has(D))continue;let X=F.s.servers.get(D);if(F.s.servers.delete(D),X)yu(X,F)}}function vu(F,A){while(F.length){let B=F.shift();if(!B)continue;if(!B.cancelled){if(B.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))B.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new M4.ServerSelectionFailedEvent(B.serverSelector,B.topologyDescription,A,B.operationName));B.reject(A)}}}function bu(F){if(F.s.state===V1.STATE_CLOSED){vu(F.waitQueue,new C3.MongoTopologyClosedError);return}let A=F.description.type===V1.TopologyType.Sharded,B=Array.from(F.description.servers.values()),D=F.waitQueue.length;for(let X=0;X<D;++X){let Z=F.waitQueue.shift();if(!Z)continue;if(Z.cancelled)continue;let J;try{let{serverSelector:E,previousServer:G}=Z;J=E?E(F.description,B,G?[G]:[]):B}catch(E){if(F.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new M4.ServerSelectionFailedEvent(Z.serverSelector,F.description,E,Z.operationName));Z.reject(E);continue}let $;if(J.length===0){if(!Z.waitingLogged){if(F.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.INFORMATIONAL))F.client.mongoLogger?.info(Z0.MongoLoggableComponent.SERVER_SELECTION,new M4.WaitingForSuitableServerEvent(Z.serverSelector,F.description,F.s.serverSelectionTimeoutMS!==0?F.s.serverSelectionTimeoutMS-(m2.now()-Z.startTime):-1,Z.operationName));Z.waitingLogged=!0}F.waitQueue.push(Z);continue}else if(J.length===1)$=F.s.servers.get(J[0].address);else{let E=m2.shuffle(J,2),G=F.s.servers.get(E[0].address),C=F.s.servers.get(E[1].address);$=G&&C&&G.s.operationCount<C.s.operationCount?G:C}if(!$){let E=new C3.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",F.description);if(F.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new M4.ServerSelectionFailedEvent(Z.serverSelector,F.description,E,Z.operationName));Z.reject(E);return}let Y=Z.transaction;if(A&&Y&&Y.isActive&&$)Y.pinServer($);if(F.client.mongoLogger?.willLog(Z0.MongoLoggableComponent.SERVER_SELECTION,Z0.SeverityLevel.DEBUG))F.client.mongoLogger?.debug(Z0.MongoLoggableComponent.SERVER_SELECTION,new M4.ServerSelectionSucceededEvent(Z.serverSelector,Z.topologyDescription,$.pool.address,Z.operationName));Z.resolve($)}if(F.waitQueue.length>0)for(let[,X]of F.s.servers)process.nextTick(function Z(){return X.requestCheck()})}function bB1(F,A){let D=F.servers.get(A.address)?.topologyVersion;return SG.compareTopologyVersion(D,A.topologyVersion)>0}});var $9=z((ru)=>{Object.defineProperty(ru,"__esModule",{value:!0});ru.MongoClient=ru.ServerApiVersion=void 0;var xG=c("fs"),yB1=Y4(),hB1=$1(),vB1=R7(),mB1=VB(),dB1=D3(),lu=T$(),pu=oE(),cB1=w0(),lB1=HB(),_G=l(),pB1=zG(),iu=Z4(),iB1=D6(),nB1=wu(),aB1=Nu(),sB1=m0(),rB1=_0(),tB1=Y5(),nu=cu(),au=z5(),c0=s();ru.ServerApiVersion=Object.freeze({v1:"1"});class su extends iB1.TypedEventEmitter{constructor(F,A){super();this.driverInfoList=[],this.on("error",c0.noop),this.options=pu.parseOptions(F,this,A),this.appendMetadata(this.options.driverInfo);let B=Object.values(this.options.mongoLoggerOptions.componentSeverities).some((X)=>X!==iu.SeverityLevel.OFF);this.mongoLogger=B?new iu.MongoLogger(this.options.mongoLoggerOptions):void 0;let D=this;this.s={url:F,bsonOptions:hB1.resolveBSONOptions(this.options),namespace:c0.ns("admin"),hasBeenClosed:!1,sessionPool:new au.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new pB1.MongoClientAuthProviders,get options(){return D.options},get readConcern(){return D.options.readConcern},get writeConcern(){return D.options.writeConcern},get readPreference(){return D.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async[Symbol.asyncDispose](){await this.close()}appendMetadata(F){if(this.driverInfoList.some((B)=>lu.isDriverInfoEqual(B,F)))return;this.driverInfoList.push(F),this.options.metadata=lu.makeClientMetadata(this.driverInfoList,this.options).then(void 0,c0.squashError).then((B)=>B??{})}checkForNonGenuineHosts(){let F=this.options.hosts.filter((X)=>c0.isHostMatch(c0.DOCUMENT_DB_CHECK,X.host)),A=c0.isHostMatch(c0.DOCUMENT_DB_CHECK,this.options.srvHost),B=this.options.hosts.filter((X)=>c0.isHostMatch(c0.COSMOS_DB_CHECK,X.host)),D=c0.isHostMatch(c0.COSMOS_DB_CHECK,this.options.srvHost);if(F.length!==0||A)this.mongoLogger?.info("client",c0.DOCUMENT_DB_MSG);else if(B.length!==0||D)this.mongoLogger?.info("client",c0.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(F){this.options.monitorCommands=F}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(F,A){if(this.autoEncrypter)throw new _G.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new nB1.ClientBulkWriteExecutor(this,F,c0.resolveOptions(this,A)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let F=this.options;if(F.tls){if(typeof F.tlsCAFile==="string")F.ca??=await xG.promises.readFile(F.tlsCAFile);if(typeof F.tlsCRLFile==="string")F.crl??=await xG.promises.readFile(F.tlsCRLFile);if(typeof F.tlsCertificateKeyFile==="string"){if(!F.key||!F.cert){let B=await xG.promises.readFile(F.tlsCertificateKeyFile);F.key??=B,F.cert??=B}}}if(typeof F.srvHost==="string"){let B=await pu.resolveSRVRecord(F);for(let[D,X]of B.entries())F.hosts[D]=X}if(F.credentials?.mechanism===dB1.AuthMechanism.MONGODB_OIDC){let B=F.credentials?.mechanismProperties?.ALLOWED_HOSTS||mB1.DEFAULT_ALLOWED_HOSTS;if(!F.credentials?.mechanismProperties?.ENVIRONMENT){for(let X of F.hosts)if(!c0.hostMatchesWildcards(X.toHostPort().host,B))throw new _G.MongoInvalidArgumentError(`Host '${X}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${B.join(",")}'`)}}this.topology=new nu.Topology(this,F.hosts,F),this.topology.once(nu.Topology.OPEN,()=>this.emit("open",this));for(let B of cB1.MONGO_CLIENT_EVENTS)this.topology.on(B,(...D)=>this.emit(B,...D));let A=async()=>{try{await this.topology?.connect(F)}catch(B){throw this.topology?.close(),B}};if(this.autoEncrypter)await this.autoEncrypter?.init(),await A(),await F.encrypter.connectInternalClient();else await A();return this}async close(F=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let F=Array.from(this.s.activeCursors,(J)=>J.close());this.s.activeCursors.clear(),await Promise.all(F);let A=Array.from(this.s.activeSessions,(J)=>J.endSession());if(this.s.activeSessions.clear(),await Promise.all(A),this.topology==null)return;if(this.topology.description.type===yB1.TopologyType.LoadBalanced||this.topology.description.logicalSessionTimeoutMinutes!=null)await Z(this,this.topology);let D=this.topology;this.topology=void 0,D.close();let{encrypter:X}=this.options;if(X)await X.close(this);async function Z(J,{description:$}){let Y=tB1.readPreferenceServerSelector(rB1.ReadPreference.primaryPreferred),E=Array.from($.servers.values());if(Y($,E).length!==0){let C=Array.from(J.s.sessionPool.sessions,({id:W})=>W);if(C.length!==0)try{await sB1.executeOperation(J,new aB1.EndSessionsOperation(C))}catch(W){c0.squashError(W)}}}}db(F,A){if(A=A??{},!F)F=this.s.options.dbName;let B=Object.assign({},this.options,A);return new lB1.Db(this,F,B)}static async connect(F,A){return await new this(F,A).connect()}startSession(F){let A=new au.ClientSession(this,this.s.sessionPool,{explicit:!0,...F},this.options);return this.s.activeSessions.add(A),A.once("ended",()=>{this.s.activeSessions.delete(A)}),A}async withSession(F,A){let B={owner:Symbol(),...typeof F==="object"?F:{}},D=typeof F==="function"?F:A;if(D==null)throw new _G.MongoInvalidArgumentError("Missing required callback parameter");let X=this.startSession(B);try{return await D(X)}finally{try{await X.endSession()}catch(Z){c0.squashError(Z)}}}watch(F=[],A={}){if(!Array.isArray(F))A=F,F=[];return new vB1.ChangeStream(this,F,c0.resolveOptions(this,A))}}ru.MongoClient=su});var R7=z((eu)=>{Object.defineProperty(eu,"__esModule",{value:!0});eu.ChangeStream=void 0;eu.filterOutOptions=ou;var eB1=L7(),l6=w0(),FD1=H2(),AD1=X$(),BD1=HB(),l0=l(),DD1=$9(),XD1=D6(),ZD1=f0(),x3=s(),K9={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},JD1=[l6.RESUME_TOKEN_CHANGED,l6.END,l6.CLOSE],YD1="A change stream document has been received that lacks a resume token (_id).",CD="ChangeStream is closed",$D1=ED1();function ou(F){return Object.fromEntries(Object.entries(F).filter(([A,B])=>!$D1.has(A)))}class U9 extends XD1.TypedEventEmitter{async[Symbol.asyncDispose](){await this.close()}static{this.RESPONSE=l6.RESPONSE}static{this.MORE=l6.MORE}static{this.INIT=l6.INIT}static{this.CLOSE=l6.CLOSE}static{this.CHANGE=l6.CHANGE}static{this.END=l6.END}static{this.ERROR=l6.ERROR}static{this.RESUME_TOKEN_CHANGED=l6.RESUME_TOKEN_CHANGED}constructor(F,A=[],B={}){super();this.pipeline=A,this.options={...B};let D;if(delete this.options.writeConcern,F instanceof eB1.Collection)this.type=K9.COLLECTION,D=F.s.db.client.options.serverSelectionTimeoutMS;else if(F instanceof BD1.Db)this.type=K9.DATABASE,D=F.client.options.serverSelectionTimeoutMS;else if(F instanceof DD1.MongoClient)this.type=K9.CLUSTER,D=F.options.serverSelectionTimeoutMS;else throw new l0.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");if(this.contextOwner=Symbol(),this.parent=F,this.namespace=F.s.namespace,!this.options.readPreference&&F.readPreference)this.options.readPreference=F.readPreference;if(this.cursor=this._createChangeStreamCursor(B),this.isClosed=!1,this.mode=!1,this.on("newListener",(X)=>{if(X==="change"&&this.cursor&&this.listenerCount("change")===0)this._streamEvents(this.cursor)}),this.on("removeListener",(X)=>{if(X==="change"&&this.listenerCount("change")===0&&this.cursor)this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null)this.timeoutContext=new ZD1.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:D})}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{return await this.cursor.hasNext()}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof l0.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch(B){x3.squashError(B)}throw A}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let F=await this.cursor.next();return this._processChange(F??null)}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof l0.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch(B){x3.squashError(B)}throw A}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{while(!0)try{let F=await this.cursor.tryNext();if(!F)return null;return this._processChange(F)}catch(F){try{await this._processErrorIteratorMode(F,this.cursor.id!=null)}catch(A){if(A instanceof l0.MongoOperationTimeoutError&&this.cursor.id==null)throw A;try{await this.close()}catch(B){x3.squashError(B)}throw A}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(this.closed)return;try{while(!0)yield await this.next()}finally{try{await this.close()}catch(F){x3.squashError(F)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let F=this.cursor;try{await F.close()}finally{this._endStream()}}stream(){if(this.closed)throw new l0.MongoChangeStreamError(CD);return this.cursor.stream()}_setIsEmitter(){if(this.mode==="iterator")throw new l0.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new l0.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(F){let A=ou(F);if(this.type===K9.CLUSTER)A.allChangesForCluster=!0;let B=[{$changeStream:A},...this.pipeline],D=this.type===K9.CLUSTER?this.parent:this.type===K9.DATABASE?this.parent.client:this.type===K9.COLLECTION?this.parent.client:null;if(D==null)throw new l0.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let X=new AD1.ChangeStreamCursor(D,this.namespace,B,{...F,timeoutContext:this.timeoutContext?new FD1.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let Z of JD1)X.on(Z,(J)=>this.emit(Z,J));if(this.listenerCount(U9.CHANGE)>0)this._streamEvents(X);return X}_closeEmitterModeWithError(F){this.emit(U9.ERROR,F),this.close().then(void 0,x3.squashError)}_streamEvents(F){this._setIsEmitter();let A=this.cursorStream??F.stream();this.cursorStream=A,A.on("data",(B)=>{try{let D=this._processChange(B);this.emit(U9.CHANGE,D)}catch(D){this.emit(U9.ERROR,D)}this.timeoutContext?.refresh()}),A.on("error",(B)=>this._processErrorStreamMode(B,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(F){if(this.isClosed)throw new l0.MongoAPIError(CD);if(F==null)throw new l0.MongoRuntimeError(CD);if(F&&!F._id)throw new l0.MongoChangeStreamError(YD1);return this.cursor.cacheResumeToken(F._id),this.options.startAtOperationTime=void 0,F}_processErrorStreamMode(F,A){if(this.isClosed)return;if(A&&(l0.isResumableError(F,this.cursor.maxWireVersion)||F instanceof l0.MongoOperationTimeoutError))this._endStream(),this.cursor.close().then(()=>this._resume(F),(B)=>{return x3.squashError(B),this._resume(F)}).then(()=>{if(F instanceof l0.MongoOperationTimeoutError)this.emit(U9.ERROR,F)},()=>this._closeEmitterModeWithError(F));else this._closeEmitterModeWithError(F)}async _processErrorIteratorMode(F,A){if(this.isClosed)throw new l0.MongoAPIError(CD);if(A&&(l0.isResumableError(F,this.cursor.maxWireVersion)||F instanceof l0.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(B){x3.squashError(B)}if(await this._resume(F),F instanceof l0.MongoOperationTimeoutError)throw F}else{try{await this.close()}catch(B){x3.squashError(B)}throw F}}async _resume(F){this.timeoutContext?.refresh();let A=x3.getTopology(this.parent);try{await A.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),F}}}eu.ChangeStream=U9;function ED1(){return new Set(Object.keys({allowDiskUse:"",authdb:"",batchSize:"",bsonRegExp:"",bypassDocumentValidation:"",bypassPinningCheck:"",checkKeys:"",collation:"",comment:"",cursor:"",dbName:"",enableUtf8Validation:"",explain:"",fieldsAsRaw:"",hint:"",ignoreUndefined:"",let:"",maxAwaitTimeMS:"",maxTimeMS:"",omitMaxTimeMS:"",out:"",promoteBuffers:"",promoteLongs:"",promoteValues:"",raw:"",rawData:"",readConcern:"",readPreference:"",serializeFunctions:"",session:"",timeoutContext:"",timeoutMS:"",timeoutMode:"",useBigInt64:"",willRetryWrite:"",writeConcern:""}))}});var gG=z((BO)=>{Object.defineProperty(BO,"__esModule",{value:!0});BO.GridFSBucketReadStream=void 0;var CD1=c("stream"),WD1=H2(),$6=l(),HD1=f0();class fG extends CD1.Readable{static{this.FILE="file"}constructor(F,A,B,D,X){super({emitClose:!0});this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:F,expected:0,files:A,filter:D,init:!1,expectedEnd:0,options:{start:0,end:0,...X},readPreference:B,timeoutContext:X?.timeoutMS!=null?new HD1.CSOTTimeoutContext({timeoutMS:X.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){if(this.destroyed)return;QD1(this,()=>qD1(this))}start(F=0){return AO(this),this.s.options.start=F,this}end(F=0){return AO(this),this.s.options.end=F,this}async abort(){this.push(null),this.destroy();let F=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:F})}}BO.GridFSBucketReadStream=fG;function AO(F){if(F.s.init)throw new $6.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function qD1(F){if(F.destroyed)return;if(!F.s.cursor)return;if(!F.s.file)return;let A=(B)=>{if(F.destroyed)return;if(!B){F.push(null),F.s.cursor?.close().then(void 0,(C)=>F.destroy(C));return}if(!F.s.file)return;let D=F.s.file.length-F.s.bytesRead,X=F.s.expected++,Z=Math.min(F.s.file.chunkSize,D);if(B.n>X)return F.destroy(new $6.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${B.n}, expected: ${X}`));if(B.n<X)return F.destroy(new $6.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${B.n}, expected: ${X}`));let J=Buffer.isBuffer(B.data)?B.data:B.data.buffer;if(J.byteLength!==Z){if(D<=0)return F.destroy(new $6.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${B.n}, expected file length ${F.s.file.length} bytes but already read ${F.s.bytesRead} bytes`));return F.destroy(new $6.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${J.byteLength}, expected: ${Z}`))}if(F.s.bytesRead+=J.byteLength,J.byteLength===0)return F.push(null);let $=null,Y=null;if(F.s.bytesToSkip!=null)$=F.s.bytesToSkip,F.s.bytesToSkip=0;let E=X===F.s.expectedEnd-1,G=F.s.options.end-F.s.bytesToSkip;if(E&&F.s.bytesToTrim!=null)Y=F.s.file.chunkSize-F.s.bytesToTrim;else if(F.s.options.end&&G<B.data.byteLength)Y=G;if($!=null||Y!=null)J=J.slice($||0,Y||J.byteLength);F.push(J);return};F.s.cursor.next().then(A,(B)=>{if(F.destroyed)return;F.destroy(B)})}function zD1(F){let A={};if(F.s.readPreference)A.readPreference=F.s.readPreference;if(F.s.options&&F.s.options.sort)A.sort=F.s.options.sort;if(F.s.options&&F.s.options.skip)A.skip=F.s.options.skip;let B=(X)=>{if(F.destroyed)return;if(!X){let Y=`FileNotFound: file ${F.s.filter._id?F.s.filter._id.toString():F.s.filter.filename} was not found`,E=new $6.MongoRuntimeError(Y);return E.code="ENOENT",F.destroy(E)}if(X.length<=0){F.push(null);return}if(F.destroyed){F.destroy();return}try{F.s.bytesToSkip=KD1(F,X,F.s.options)}catch($){return F.destroy($)}let Z={files_id:X._id};if(F.s.options&&F.s.options.start!=null){let $=Math.floor(F.s.options.start/X.chunkSize);if($>0)Z.n={$gte:$}}let J;try{J=F.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${F.s.timeoutContext?.timeoutMS}ms`)}catch($){return F.destroy($)}if(F.s.cursor=F.s.chunks.find(Z,{timeoutMode:F.s.options.timeoutMS!=null?WD1.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:J}).sort({n:1}),F.s.readPreference)F.s.cursor.withReadPreference(F.s.readPreference);F.s.expectedEnd=Math.ceil(X.length/X.chunkSize),F.s.file=X;try{F.s.bytesToTrim=UD1(F,X,F.s.cursor,F.s.options)}catch($){return F.destroy($)}F.emit(fG.FILE,X);return},D;try{D=F.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${F.s.timeoutContext?.timeoutMS}ms`)}catch(X){if(!F.destroyed)F.destroy(X);return}A.timeoutMS=D,F.s.files.findOne(F.s.filter,A).then(B,(X)=>{if(F.destroyed)return;F.destroy(X)})}function QD1(F,A){if(F.s.file)return A();if(!F.s.init)zD1(F),F.s.init=!0;F.once("file",()=>{A()})}function KD1(F,A,B){if(B&&B.start!=null){if(B.start>A.length)throw new $6.MongoInvalidArgumentError(`Stream start (${B.start}) must not be more than the length of the file (${A.length})`);if(B.start<0)throw new $6.MongoInvalidArgumentError(`Stream start (${B.start}) must not be negative`);if(B.end!=null&&B.end<B.start)throw new $6.MongoInvalidArgumentError(`Stream start (${B.start}) must not be greater than stream end (${B.end})`);return F.s.bytesRead=Math.floor(B.start/A.chunkSize)*A.chunkSize,F.s.expected=Math.floor(B.start/A.chunkSize),B.start-F.s.bytesRead}throw new $6.MongoInvalidArgumentError("Start option must be defined")}function UD1(F,A,B,D){if(D&&D.end!=null){if(D.end>A.length)throw new $6.MongoInvalidArgumentError(`Stream end (${D.end}) must not be more than the length of the file (${A.length})`);if(D.start==null||D.start<0)throw new $6.MongoInvalidArgumentError(`Stream end (${D.end}) must not be negative`);let X=D.start!=null?Math.floor(D.start/A.chunkSize):0;return B.limit(Math.ceil(D.end/A.chunkSize)-X),F.s.expectedEnd=Math.ceil(D.end/A.chunkSize),Math.ceil(D.end/A.chunkSize)*A.chunkSize-D.end}throw new $6.MongoInvalidArgumentError("End option must be defined")}});var yG=z((EO)=>{Object.defineProperty(EO,"__esModule",{value:!0});EO.GridFSBucketWriteStream=void 0;var VD1=c("stream"),ZO=$1(),JO=H2(),p6=l(),LD1=f0(),XO=s(),wD1=P2();class YO extends VD1.Writable{constructor(F,A,B){super();if(this.gridFSFile=null,B=B??{},this.bucket=F,this.chunks=F.s._chunksCollection,this.filename=A,this.files=F.s._filesCollection,this.options=B,this.writeConcern=wD1.WriteConcern.fromOptions(B)||F.s.options.writeConcern,this.done=!1,this.id=B.id?B.id:new ZO.ObjectId,this.chunkSizeBytes=B.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},B.timeoutMS!=null)this.timeoutContext=new LD1.CSOTTimeoutContext({timeoutMS:B.timeoutMS,serverSelectionTimeoutMS:XO.resolveTimeoutOptions(this.bucket.s.db.client,{}).serverSelectionTimeoutMS})}_construct(F){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,PD1(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),F()},(A)=>{if(A instanceof p6.MongoOperationTimeoutError)return V9(this,A,F);XO.squashError(A),F()});else return process.nextTick(F)}_write(F,A,B){ND1(this,F,A,B)}_final(F){if(this.state.streamEnd)return process.nextTick(F);this.state.streamEnd=!0,MD1(this,F)}async abort(){if(this.state.streamEnd)throw new p6.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new p6.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let F=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:F})}}EO.GridFSBucketWriteStream=YO;function V9(F,A,B){if(F.state.errored){process.nextTick(B);return}F.state.errored=!0,process.nextTick(B,A)}function $O(F,A,B){return{_id:new ZO.ObjectId,files_id:F,n:A,data:B}}async function RD1(F){let A={files_id:1,n:1},B;B=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);let D;try{D=await F.chunks.listIndexes({timeoutMode:B!=null?JO.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:B}).toArray()}catch(Z){if(Z instanceof p6.MongoError&&Z.code===p6.MONGODB_ERROR_CODES.NamespaceNotFound)D=[];else throw Z}if(!D.find((Z)=>{if(Object.keys(Z.key).length===2&&Z.key.files_id===1&&Z.key.n===1)return!0;return!1}))B=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),await F.chunks.createIndex(A,{...F.writeConcern,background:!0,unique:!0,timeoutMS:B})}function bG(F,A){if(F.done)return process.nextTick(A);if(F.state.streamEnd&&F.state.outstandingRequests===0&&!F.state.errored){F.done=!0;let B=ID1(F.id,F.length,F.chunkSizeBytes,F.filename,F.options.metadata);if(WD(F,A))return;let D=F.timeoutContext?.remainingTimeMS;if(D!=null&&D<=0)return V9(F,new p6.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),A);F.files.insertOne(B,{writeConcern:F.writeConcern,timeoutMS:D}).then(()=>{F.gridFSFile=B,A()},(X)=>{return V9(F,X,A)});return}process.nextTick(A)}async function PD1(F){let A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);if(await F.files.findOne({},{projection:{_id:1},timeoutMS:A})!=null)return;let D={filename:1,uploadDate:1},X;A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`);let Z={timeoutMode:A!=null?JO.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:A};try{X=await F.files.listIndexes(Z).toArray()}catch($){if($ instanceof p6.MongoError&&$.code===p6.MONGODB_ERROR_CODES.NamespaceNotFound)X=[];else throw $}if(!X.find(($)=>{if(Object.keys($.key).length===2&&$.key.filename===1&&$.key.uploadDate===1)return!0;return!1}))A=F.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),await F.files.createIndex(D,{background:!1,timeoutMS:A});await RD1(F)}function ID1(F,A,B,D,X){let Z={_id:F,length:A,chunkSize:B,uploadDate:new Date,filename:D};if(X)Z.metadata=X;return Z}function ND1(F,A,B,D){if(WD(F,D))return;let X=Buffer.isBuffer(A)?A:Buffer.from(A,B);if(F.length+=X.length,F.pos+X.length<F.chunkSizeBytes){X.copy(F.bufToStore,F.pos),F.pos+=X.length,process.nextTick(D);return}let Z=X.length,J=F.chunkSizeBytes-F.pos,$=Math.min(J,X.length),Y=0;while(Z>0){let E=X.length-Z;X.copy(F.bufToStore,F.pos,E,E+$),F.pos+=$,J-=$;let G;if(J===0){G=$O(F.id,F.n,Buffer.from(F.bufToStore));let C=F.timeoutContext?.remainingTimeMS;if(C!=null&&C<=0)return V9(F,new p6.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),D);if(++F.state.outstandingRequests,++Y,WD(F,D))return;F.chunks.insertOne(G,{writeConcern:F.writeConcern,timeoutMS:C}).then(()=>{if(--F.state.outstandingRequests,--Y,!Y)bG(F,D)},(W)=>{return V9(F,W,D)}),J=F.chunkSizeBytes,F.pos=0,++F.n}Z-=$,$=Math.min(J,Z)}}function MD1(F,A){if(F.pos===0)return bG(F,A);let B=Buffer.alloc(F.pos);F.bufToStore.copy(B,0,0,F.pos);let D=$O(F.id,F.n,B);if(WD(F,A))return;let X=F.timeoutContext?.remainingTimeMS;if(X!=null&&X<=0)return V9(F,new p6.MongoOperationTimeoutError(`Upload timed out after ${F.timeoutContext?.timeoutMS}ms`),A);++F.state.outstandingRequests,F.chunks.insertOne(D,{writeConcern:F.writeConcern,timeoutMS:X}).then(()=>{--F.state.outstandingRequests,bG(F,A)},(Z)=>{return V9(F,Z,A)})}function WD(F,A){if(F.state.aborted)return process.nextTick(A,new p6.MongoAPIError("Stream has been aborted")),!0;return!1}});var KO=z((zO)=>{Object.defineProperty(zO,"__esModule",{value:!0});zO.GridFSBucket=void 0;var hG=l(),jD1=D6(),CO=f0(),HD=s(),TD1=P2(),WO=gG(),HO=yG(),kD1={bucketName:"fs",chunkSizeBytes:261120};class qO extends jD1.TypedEventEmitter{static{this.INDEX="index"}constructor(F,A){super();this.on("error",HD.noop),this.setMaxListeners(0);let B=HD.resolveOptions(F,{...kD1,...A,writeConcern:TD1.WriteConcern.fromOptions(A)});this.s={db:F,options:B,_chunksCollection:F.collection(B.bucketName+".chunks"),_filesCollection:F.collection(B.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(F,A){return new HO.GridFSBucketWriteStream(this,F,{timeoutMS:this.s.options.timeoutMS,...A})}openUploadStreamWithId(F,A,B){return new HO.GridFSBucketWriteStream(this,A,{timeoutMS:this.s.options.timeoutMS,...B,id:F})}openDownloadStream(F,A){return new WO.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:F},{timeoutMS:this.s.options.timeoutMS,...A})}async delete(F,A){let{timeoutMS:B}=HD.resolveOptions(this.s.db,A),D=void 0;if(B)D=new CO.CSOTTimeoutContext({timeoutMS:B,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});let{deletedCount:X}=await this.s._filesCollection.deleteOne({_id:F},{timeoutMS:D?.remainingTimeMS}),Z=D?.remainingTimeMS;if(Z!=null&&Z<=0)throw new hG.MongoOperationTimeoutError(`Timed out after ${B}ms`);if(await this.s._chunksCollection.deleteMany({files_id:F},{timeoutMS:Z}),X===0)throw new hG.MongoRuntimeError(`File not found for id ${F}`)}find(F={},A={}){return this.s._filesCollection.find(F,A)}openDownloadStreamByName(F,A){let B={uploadDate:-1},D=void 0;if(A&&A.revision!=null)if(A.revision>=0)B={uploadDate:1},D=A.revision;else D=-A.revision-1;return new WO.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:F},{timeoutMS:this.s.options.timeoutMS,...A,sort:B,skip:D})}async rename(F,A,B){let D={_id:F},X={$set:{filename:A}},{matchedCount:Z}=await this.s._filesCollection.updateOne(D,X,B);if(Z===0)throw new hG.MongoRuntimeError(`File with id ${F} not found`)}async drop(F){let{timeoutMS:A}=HD.resolveOptions(this.s.db,F),B=void 0;if(A)B=new CO.CSOTTimeoutContext({timeoutMS:A,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS});if(B){await this.s._filesCollection.drop({timeoutMS:B.remainingTimeMS});let D=B.getRemainingTimeMSOrThrow(`Timed out after ${A}ms`);await this.s._chunksCollection.drop({timeoutMS:D})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}}zO.GridFSBucket=qO});var Y4=z((S)=>{Object.defineProperty(S,"__esModule",{value:!0});S.MongoRuntimeError=S.MongoParseError=S.MongoOperationTimeoutError=S.MongoOIDCError=S.MongoNotConnectedError=S.MongoNetworkTimeoutError=S.MongoNetworkError=S.MongoMissingDependencyError=S.MongoMissingCredentialsError=S.MongoKerberosError=S.MongoInvalidArgumentError=S.MongoGridFSStreamError=S.MongoGridFSChunkError=S.MongoGCPError=S.MongoExpiredSessionError=S.MongoError=S.MongoDriverError=S.MongoDecompressionError=S.MongoCursorInUseError=S.MongoCursorExhaustedError=S.MongoCompatibilityError=S.MongoClientClosedError=S.MongoClientBulkWriteExecutionError=S.MongoClientBulkWriteError=S.MongoClientBulkWriteCursorError=S.MongoChangeStreamError=S.MongoBatchReExecutionError=S.MongoAzureError=S.MongoAWSError=S.MongoAPIError=S.ExplainableCursor=S.ChangeStreamCursor=S.ClientEncryption=S.MongoBulkWriteError=S.UUID=S.Timestamp=S.ObjectId=S.MinKey=S.MaxKey=S.Long=S.Int32=S.Double=S.Decimal128=S.DBRef=S.Code=S.BSONType=S.BSONSymbol=S.BSONRegExp=S.Binary=S.BSON=void 0;S.CommandStartedEvent=S.CommandFailedEvent=S.WriteConcern=S.ReadPreference=S.ReadConcern=S.TopologyType=S.ServerType=S.ReadPreferenceMode=S.ReadConcernLevel=S.ProfilingLevel=S.ReturnDocument=S.SeverityLevel=S.MongoLoggableComponent=S.ServerApiVersion=S.ExplainVerbosity=S.MongoErrorLabel=S.CursorTimeoutMode=S.CURSOR_FLAGS=S.Compressor=S.AuthMechanism=S.GSSAPICanonicalizationValue=S.AutoEncryptionLoggerLevel=S.BatchType=S.UnorderedBulkOperation=S.OrderedBulkOperation=S.MongoClient=S.ListIndexesCursor=S.ListCollectionsCursor=S.GridFSBucketWriteStream=S.GridFSBucketReadStream=S.GridFSBucket=S.FindCursor=S.Db=S.Collection=S.ClientSession=S.ChangeStream=S.CancellationToken=S.AggregationCursor=S.Admin=S.AbstractCursor=S.MongoWriteConcernError=S.MongoUnexpectedServerResponseError=S.MongoTransactionError=S.MongoTopologyClosedError=S.MongoTailableCursorError=S.MongoSystemError=S.MongoStalePrimaryError=S.MongoServerSelectionError=S.MongoServerError=S.MongoServerClosedError=void 0;S.MongoClientAuthProviders=S.MongoCryptKMSRequestNetworkTimeoutError=S.MongoCryptInvalidArgumentError=S.MongoCryptError=S.MongoCryptCreateEncryptedCollectionError=S.MongoCryptCreateDataKeyError=S.MongoCryptAzureKMSRequestError=S.SrvPollingEvent=S.WaitingForSuitableServerEvent=S.ServerSelectionSucceededEvent=S.ServerSelectionStartedEvent=S.ServerSelectionFailedEvent=S.ServerSelectionEvent=S.TopologyOpeningEvent=S.TopologyDescriptionChangedEvent=S.TopologyClosedEvent=S.ServerOpeningEvent=S.ServerHeartbeatSucceededEvent=S.ServerHeartbeatStartedEvent=S.ServerHeartbeatFailedEvent=S.ServerDescriptionChangedEvent=S.ServerClosedEvent=S.ConnectionReadyEvent=S.ConnectionPoolReadyEvent=S.ConnectionPoolMonitoringEvent=S.ConnectionPoolCreatedEvent=S.ConnectionPoolClosedEvent=S.ConnectionPoolClearedEvent=S.ConnectionCreatedEvent=S.ConnectionClosedEvent=S.ConnectionCheckOutStartedEvent=S.ConnectionCheckOutFailedEvent=S.ConnectionCheckedOutEvent=S.ConnectionCheckedInEvent=S.CommandSucceededEvent=void 0;var uD1=$Y();Object.defineProperty(S,"Admin",{enumerable:!0,get:function(){return uD1.Admin}});var OD1=EY();Object.defineProperty(S,"OrderedBulkOperation",{enumerable:!0,get:function(){return OD1.OrderedBulkOperation}});var SD1=GY();Object.defineProperty(S,"UnorderedBulkOperation",{enumerable:!0,get:function(){return SD1.UnorderedBulkOperation}});var xD1=R7();Object.defineProperty(S,"ChangeStream",{enumerable:!0,get:function(){return xD1.ChangeStream}});var _D1=L7();Object.defineProperty(S,"Collection",{enumerable:!0,get:function(){return _D1.Collection}});var fD1=H2();Object.defineProperty(S,"AbstractCursor",{enumerable:!0,get:function(){return fD1.AbstractCursor}});var gD1=K5();Object.defineProperty(S,"AggregationCursor",{enumerable:!0,get:function(){return gD1.AggregationCursor}});var bD1=vY();Object.defineProperty(S,"FindCursor",{enumerable:!0,get:function(){return bD1.FindCursor}});var yD1=$$();Object.defineProperty(S,"ListCollectionsCursor",{enumerable:!0,get:function(){return yD1.ListCollectionsCursor}});var hD1=nY();Object.defineProperty(S,"ListIndexesCursor",{enumerable:!0,get:function(){return hD1.ListIndexesCursor}});var vD1=HB();Object.defineProperty(S,"Db",{enumerable:!0,get:function(){return vD1.Db}});var mD1=KO();Object.defineProperty(S,"GridFSBucket",{enumerable:!0,get:function(){return mD1.GridFSBucket}});var dD1=gG();Object.defineProperty(S,"GridFSBucketReadStream",{enumerable:!0,get:function(){return dD1.GridFSBucketReadStream}});var cD1=yG();Object.defineProperty(S,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return cD1.GridFSBucketWriteStream}});var lD1=$9();Object.defineProperty(S,"MongoClient",{enumerable:!0,get:function(){return lD1.MongoClient}});var pD1=D6();Object.defineProperty(S,"CancellationToken",{enumerable:!0,get:function(){return pD1.CancellationToken}});var iD1=z5();Object.defineProperty(S,"ClientSession",{enumerable:!0,get:function(){return iD1.ClientSession}});var nD1=$1();Object.defineProperty(S,"BSON",{enumerable:!0,get:function(){return nD1.BSON}});var O2=$1();Object.defineProperty(S,"Binary",{enumerable:!0,get:function(){return O2.Binary}});Object.defineProperty(S,"BSONRegExp",{enumerable:!0,get:function(){return O2.BSONRegExp}});Object.defineProperty(S,"BSONSymbol",{enumerable:!0,get:function(){return O2.BSONSymbol}});Object.defineProperty(S,"BSONType",{enumerable:!0,get:function(){return O2.BSONType}});Object.defineProperty(S,"Code",{enumerable:!0,get:function(){return O2.Code}});Object.defineProperty(S,"DBRef",{enumerable:!0,get:function(){return O2.DBRef}});Object.defineProperty(S,"Decimal128",{enumerable:!0,get:function(){return O2.Decimal128}});Object.defineProperty(S,"Double",{enumerable:!0,get:function(){return O2.Double}});Object.defineProperty(S,"Int32",{enumerable:!0,get:function(){return O2.Int32}});Object.defineProperty(S,"Long",{enumerable:!0,get:function(){return O2.Long}});Object.defineProperty(S,"MaxKey",{enumerable:!0,get:function(){return O2.MaxKey}});Object.defineProperty(S,"MinKey",{enumerable:!0,get:function(){return O2.MinKey}});Object.defineProperty(S,"ObjectId",{enumerable:!0,get:function(){return O2.ObjectId}});Object.defineProperty(S,"Timestamp",{enumerable:!0,get:function(){return O2.Timestamp}});Object.defineProperty(S,"UUID",{enumerable:!0,get:function(){return O2.UUID}});var aD1=H7();Object.defineProperty(S,"MongoBulkWriteError",{enumerable:!0,get:function(){return aD1.MongoBulkWriteError}});var sD1=gB();Object.defineProperty(S,"ClientEncryption",{enumerable:!0,get:function(){return sD1.ClientEncryption}});var rD1=X$();Object.defineProperty(S,"ChangeStreamCursor",{enumerable:!0,get:function(){return rD1.ChangeStreamCursor}});var tD1=YB();Object.defineProperty(S,"ExplainableCursor",{enumerable:!0,get:function(){return tD1.ExplainableCursor}});var L1=l();Object.defineProperty(S,"MongoAPIError",{enumerable:!0,get:function(){return L1.MongoAPIError}});Object.defineProperty(S,"MongoAWSError",{enumerable:!0,get:function(){return L1.MongoAWSError}});Object.defineProperty(S,"MongoAzureError",{enumerable:!0,get:function(){return L1.MongoAzureError}});Object.defineProperty(S,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return L1.MongoBatchReExecutionError}});Object.defineProperty(S,"MongoChangeStreamError",{enumerable:!0,get:function(){return L1.MongoChangeStreamError}});Object.defineProperty(S,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return L1.MongoClientBulkWriteCursorError}});Object.defineProperty(S,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return L1.MongoClientBulkWriteError}});Object.defineProperty(S,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return L1.MongoClientBulkWriteExecutionError}});Object.defineProperty(S,"MongoClientClosedError",{enumerable:!0,get:function(){return L1.MongoClientClosedError}});Object.defineProperty(S,"MongoCompatibilityError",{enumerable:!0,get:function(){return L1.MongoCompatibilityError}});Object.defineProperty(S,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return L1.MongoCursorExhaustedError}});Object.defineProperty(S,"MongoCursorInUseError",{enumerable:!0,get:function(){return L1.MongoCursorInUseError}});Object.defineProperty(S,"MongoDecompressionError",{enumerable:!0,get:function(){return L1.MongoDecompressionError}});Object.defineProperty(S,"MongoDriverError",{enumerable:!0,get:function(){return L1.MongoDriverError}});Object.defineProperty(S,"MongoError",{enumerable:!0,get:function(){return L1.MongoError}});Object.defineProperty(S,"MongoExpiredSessionError",{enumerable:!0,get:function(){return L1.MongoExpiredSessionError}});Object.defineProperty(S,"MongoGCPError",{enumerable:!0,get:function(){return L1.MongoGCPError}});Object.defineProperty(S,"MongoGridFSChunkError",{enumerable:!0,get:function(){return L1.MongoGridFSChunkError}});Object.defineProperty(S,"MongoGridFSStreamError",{enumerable:!0,get:function(){return L1.MongoGridFSStreamError}});Object.defineProperty(S,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return L1.MongoInvalidArgumentError}});Object.defineProperty(S,"MongoKerberosError",{enumerable:!0,get:function(){return L1.MongoKerberosError}});Object.defineProperty(S,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return L1.MongoMissingCredentialsError}});Object.defineProperty(S,"MongoMissingDependencyError",{enumerable:!0,get:function(){return L1.MongoMissingDependencyError}});Object.defineProperty(S,"MongoNetworkError",{enumerable:!0,get:function(){return L1.MongoNetworkError}});Object.defineProperty(S,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return L1.MongoNetworkTimeoutError}});Object.defineProperty(S,"MongoNotConnectedError",{enumerable:!0,get:function(){return L1.MongoNotConnectedError}});Object.defineProperty(S,"MongoOIDCError",{enumerable:!0,get:function(){return L1.MongoOIDCError}});Object.defineProperty(S,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return L1.MongoOperationTimeoutError}});Object.defineProperty(S,"MongoParseError",{enumerable:!0,get:function(){return L1.MongoParseError}});Object.defineProperty(S,"MongoRuntimeError",{enumerable:!0,get:function(){return L1.MongoRuntimeError}});Object.defineProperty(S,"MongoServerClosedError",{enumerable:!0,get:function(){return L1.MongoServerClosedError}});Object.defineProperty(S,"MongoServerError",{enumerable:!0,get:function(){return L1.MongoServerError}});Object.defineProperty(S,"MongoServerSelectionError",{enumerable:!0,get:function(){return L1.MongoServerSelectionError}});Object.defineProperty(S,"MongoStalePrimaryError",{enumerable:!0,get:function(){return L1.MongoStalePrimaryError}});Object.defineProperty(S,"MongoSystemError",{enumerable:!0,get:function(){return L1.MongoSystemError}});Object.defineProperty(S,"MongoTailableCursorError",{enumerable:!0,get:function(){return L1.MongoTailableCursorError}});Object.defineProperty(S,"MongoTopologyClosedError",{enumerable:!0,get:function(){return L1.MongoTopologyClosedError}});Object.defineProperty(S,"MongoTransactionError",{enumerable:!0,get:function(){return L1.MongoTransactionError}});Object.defineProperty(S,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return L1.MongoUnexpectedServerResponseError}});Object.defineProperty(S,"MongoWriteConcernError",{enumerable:!0,get:function(){return L1.MongoWriteConcernError}});var oD1=H7();Object.defineProperty(S,"BatchType",{enumerable:!0,get:function(){return oD1.BatchType}});var eD1=qE();Object.defineProperty(S,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return eD1.AutoEncryptionLoggerLevel}});var FX1=KB();Object.defineProperty(S,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return FX1.GSSAPICanonicalizationValue}});var AX1=D3();Object.defineProperty(S,"AuthMechanism",{enumerable:!0,get:function(){return AX1.AuthMechanism}});var BX1=h5();Object.defineProperty(S,"Compressor",{enumerable:!0,get:function(){return BX1.Compressor}});var UO=H2();Object.defineProperty(S,"CURSOR_FLAGS",{enumerable:!0,get:function(){return UO.CURSOR_FLAGS}});Object.defineProperty(S,"CursorTimeoutMode",{enumerable:!0,get:function(){return UO.CursorTimeoutMode}});var DX1=l();Object.defineProperty(S,"MongoErrorLabel",{enumerable:!0,get:function(){return DX1.MongoErrorLabel}});var XX1=D5();Object.defineProperty(S,"ExplainVerbosity",{enumerable:!0,get:function(){return XX1.ExplainVerbosity}});var ZX1=$9();Object.defineProperty(S,"ServerApiVersion",{enumerable:!0,get:function(){return ZX1.ServerApiVersion}});var VO=Z4();Object.defineProperty(S,"MongoLoggableComponent",{enumerable:!0,get:function(){return VO.MongoLoggableComponent}});Object.defineProperty(S,"SeverityLevel",{enumerable:!0,get:function(){return VO.SeverityLevel}});var JX1=rY();Object.defineProperty(S,"ReturnDocument",{enumerable:!0,get:function(){return JX1.ReturnDocument}});var YX1=C$();Object.defineProperty(S,"ProfilingLevel",{enumerable:!0,get:function(){return YX1.ProfilingLevel}});var $X1=x6();Object.defineProperty(S,"ReadConcernLevel",{enumerable:!0,get:function(){return $X1.ReadConcernLevel}});var EX1=_0();Object.defineProperty(S,"ReadPreferenceMode",{enumerable:!0,get:function(){return EX1.ReadPreferenceMode}});var LO=e2();Object.defineProperty(S,"ServerType",{enumerable:!0,get:function(){return LO.ServerType}});Object.defineProperty(S,"TopologyType",{enumerable:!0,get:function(){return LO.TopologyType}});var GX1=x6();Object.defineProperty(S,"ReadConcern",{enumerable:!0,get:function(){return GX1.ReadConcern}});var CX1=_0();Object.defineProperty(S,"ReadPreference",{enumerable:!0,get:function(){return CX1.ReadPreference}});var WX1=P2();Object.defineProperty(S,"WriteConcern",{enumerable:!0,get:function(){return WX1.WriteConcern}});var vG=LE();Object.defineProperty(S,"CommandFailedEvent",{enumerable:!0,get:function(){return vG.CommandFailedEvent}});Object.defineProperty(S,"CommandStartedEvent",{enumerable:!0,get:function(){return vG.CommandStartedEvent}});Object.defineProperty(S,"CommandSucceededEvent",{enumerable:!0,get:function(){return vG.CommandSucceededEvent}});var P6=SE();Object.defineProperty(S,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return P6.ConnectionCheckedInEvent}});Object.defineProperty(S,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return P6.ConnectionCheckedOutEvent}});Object.defineProperty(S,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return P6.ConnectionCheckOutFailedEvent}});Object.defineProperty(S,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return P6.ConnectionCheckOutStartedEvent}});Object.defineProperty(S,"ConnectionClosedEvent",{enumerable:!0,get:function(){return P6.ConnectionClosedEvent}});Object.defineProperty(S,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return P6.ConnectionCreatedEvent}});Object.defineProperty(S,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return P6.ConnectionPoolClearedEvent}});Object.defineProperty(S,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return P6.ConnectionPoolClosedEvent}});Object.defineProperty(S,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return P6.ConnectionPoolCreatedEvent}});Object.defineProperty(S,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return P6.ConnectionPoolMonitoringEvent}});Object.defineProperty(S,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return P6.ConnectionPoolReadyEvent}});Object.defineProperty(S,"ConnectionReadyEvent",{enumerable:!0,get:function(){return P6.ConnectionReadyEvent}});var _3=nB();Object.defineProperty(S,"ServerClosedEvent",{enumerable:!0,get:function(){return _3.ServerClosedEvent}});Object.defineProperty(S,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return _3.ServerDescriptionChangedEvent}});Object.defineProperty(S,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return _3.ServerHeartbeatFailedEvent}});Object.defineProperty(S,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return _3.ServerHeartbeatStartedEvent}});Object.defineProperty(S,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return _3.ServerHeartbeatSucceededEvent}});Object.defineProperty(S,"ServerOpeningEvent",{enumerable:!0,get:function(){return _3.ServerOpeningEvent}});Object.defineProperty(S,"TopologyClosedEvent",{enumerable:!0,get:function(){return _3.TopologyClosedEvent}});Object.defineProperty(S,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return _3.TopologyDescriptionChangedEvent}});Object.defineProperty(S,"TopologyOpeningEvent",{enumerable:!0,get:function(){return _3.TopologyOpeningEvent}});var WF=NG();Object.defineProperty(S,"ServerSelectionEvent",{enumerable:!0,get:function(){return WF.ServerSelectionEvent}});Object.defineProperty(S,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return WF.ServerSelectionFailedEvent}});Object.defineProperty(S,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return WF.ServerSelectionStartedEvent}});Object.defineProperty(S,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return WF.ServerSelectionSucceededEvent}});Object.defineProperty(S,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return WF.WaitingForSuitableServerEvent}});var HX1=kG();Object.defineProperty(S,"SrvPollingEvent",{enumerable:!0,get:function(){return HX1.SrvPollingEvent}});var t7=g7();Object.defineProperty(S,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return t7.MongoCryptAzureKMSRequestError}});Object.defineProperty(S,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return t7.MongoCryptCreateDataKeyError}});Object.defineProperty(S,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return t7.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(S,"MongoCryptError",{enumerable:!0,get:function(){return t7.MongoCryptError}});Object.defineProperty(S,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return t7.MongoCryptInvalidArgumentError}});Object.defineProperty(S,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return t7.MongoCryptKMSRequestNetworkTimeoutError}});var qX1=zG();Object.defineProperty(S,"MongoClientAuthProviders",{enumerable:!0,get:function(){return qX1.MongoClientAuthProviders}})});var t=z((UX1)=>{UX1.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");UX1.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");UX1.arrayParentSymbol=Symbol("mongoose#Array#_parent");UX1.arrayPathSymbol=Symbol("mongoose#Array#_path");UX1.arraySchemaSymbol=Symbol("mongoose#Array#_schema");UX1.documentArrayParent=Symbol("mongoose#documentArrayParent");UX1.documentIsSelected=Symbol("mongoose#Document#isSelected");UX1.documentIsModified=Symbol("mongoose#Document#isModified");UX1.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");UX1.documentSchemaSymbol=Symbol("mongoose#Document#schema");UX1.getSymbol=Symbol("mongoose#Document#get");UX1.modelSymbol=Symbol("mongoose#Model");UX1.objectIdSymbol=Symbol("mongoose#ObjectId");UX1.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");UX1.schemaTypeSymbol=Symbol("mongoose#schemaType");UX1.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");UX1.scopeSymbol=Symbol("mongoose#Document#scope");UX1.validatorErrorSymbol=Symbol("mongoose#validatorError")});var j4=z((XM1,wO)=>{var HF=$1().ObjectId,bX1=t().objectIdSymbol;Object.defineProperty(HF.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});/*!
 * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
 */if(!Object.hasOwn(HF.prototype,"valueOf"))HF.prototype.valueOf=function F(){return this.toString()};HF.prototype[bX1]=!0;wO.exports=HF});var S2=z((ZM1,RO)=>{RO.exports=function F(A){if(A==null)return;if(typeof A.constructor!=="function")return;return A.constructor.name}});var i6=z((yX1)=>{/*!
 * ignore
 */yX1.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var qD=z((YM1,PO)=>{PO.exports=$1().Decimal128});var L9=z(($M1,IO)=>{IO.exports=new Set(["__proto__","constructor","prototype"])});var zD=z((vX1)=>{vX1.isMongooseArray=function(F){return Array.isArray(F)&&F.isMongooseArray}});var qF=z((GM1,NO)=>{var dX1=zD().isMongooseArray;NO.exports=function(F){return F!=null&&(dX1(F)||F.$__!=null||F.isMongooseBuffer||F.$isMongooseMap)}});var mG=z((CM1,MO)=>{var cX1=/^function\s*([^\s(]+)/;MO.exports=function(F){return F.name||(F.toString().trim().match(cX1)||[])[1]}});var B2=z((WM1,jO)=>{function lX1(F,A){return F!=null&&F._bsontype===A}jO.exports=lX1});var w9=z((HM1,TO)=>{TO.exports=function(F){return Buffer.isBuffer(F)||Object.prototype.toString.call(F)==="[object Object]"}});var o7=z((qM1,kO)=>{kO.exports=function F(A){if(A==null||typeof A!=="object")return!1;let B=Object.getPrototypeOf(A);return!B||B.constructor.name==="Object"}});var e7=z((pX1)=>{var uO=Symbol("mongoose#trustedSymbol");pX1.trustedSymbol=uO;pX1.trusted=function F(A){if(A==null||typeof A!=="object")return A;return A[uO]=!0,A}});var C0=z((QM1,OO)=>{var aX1=qD(),sX1=j4(),rX1=L9(),tX1=qF(),oX1=mG(),dG=B2(),eX1=zD().isMongooseArray,FZ1=w9(),AZ1=o7(),BZ1=t(),cG=e7().trustedSymbol,DZ1=$1();function pG(F,A,B){if(F==null)return F;if(dG(F,"Double"))return new DZ1.Double(F.value);if(typeof F==="number"||typeof F==="string"||typeof F==="boolean"||typeof F==="bigint")return F;if(Array.isArray(F))return XZ1(F,A);if(tX1(F)){if(A){if(A.retainDocuments&&F.$__!=null){let Z=F.$clone();if(F.__index!=null)Z.__index=F.__index;if(F.__parentArray!=null)Z.__parentArray=F.__parentArray;return Z.$__setParent(A.parentDoc??F.$__parent),Z}}if(AZ1(F)&&F.$__!=null&&F._doc!=null)return F._doc;let X;if(A?.json&&typeof F.toJSON==="function")X=F.toJSON(A);else X=F.toObject(A);return X}let D=F.constructor;if(D)switch(oX1(D)){case"Object":return lG(F,A,B);case"Date":return new D(+F);case"RegExp":return ZZ1(F);default:break}if(dG(F,"ObjectId")){if(A?.flattenObjectIds)return F.toJSON();return new sX1(F.id)}if(dG(F,"Decimal128")){if(A?.flattenDecimals)return F.toJSON();return aX1.fromString(F.toString())}if(!D&&FZ1(F))return lG(F,A,B);if(typeof F==="object"&&F[BZ1.schemaTypeSymbol])return F.clone();if(A?.bson&&typeof F.toBSON==="function")return F;if(typeof F.valueOf==="function")return F.valueOf();return lG(F,A,B)}OO.exports=pG;/*!
 * ignore
 */function lG(F,A,B){let D=A?.minimize,X=A?.omitUndefined,Z=A?._seen,J={},$;if(Z&&Z.has(F))return Z.get(F);else if(Z)Z.set(F,J);if(cG in F&&A?.copyTrustedSymbol!==!1)J[cG]=F[cG];let Y=Object.keys(F),E=Y.length;for(let G=0;G<E;++G){let C=Y[G];if(rX1.has(C))continue;let W=pG(F[C],A,!1);if((D===!1||X)&&typeof W==="undefined")delete J[C];else if(D!==!0||typeof W!=="undefined")$||($=!0),J[C]=W}return D&&!B?$&&J:J}function XZ1(F,A){let B=0,D=F.length,X=null;if(A?.retainDocuments)if(F.isMongooseDocumentArray)X=new(F.$schemaType()).schema.base.Types.DocumentArray([],F.$path(),F.$parent(),F.$schemaType());else if(F.isMongooseArray)X=new(F.$parent()).schema.base.Types.Array([],F.$path(),F.$parent(),F.$schemaType());else X=new Array(D);else X=new Array(D);F=eX1(F)?F.__array:F;for(B=0;B<D;++B)X[B]=pG(F[B],A,!0);return X}function ZZ1(F){let A=new RegExp(F.source,F.flags);if(A.lastIndex!==F.lastIndex)A.lastIndex=F.lastIndex;return A}});var _O=z((KM1,xO)=>{/*!
 * Module dependencies.
 */var QD=FY(),iG=K1(),nG=Y4().Collection,JZ1=j4(),SO=S2(),YZ1=i6().internalToObjectOptions,$Z1=c("stream"),aG=c("util"),EZ1=Object.freeze({...YZ1,copyTrustedSymbol:!1});function n6(F,A,B){this.collection=null,this.Promise=B.Promise||Promise,this.modelName=B.modelName,delete B.modelName,this._closed=!1,QD.apply(this,arguments)}/*!
 * Inherit from abstract Collection.
 */Object.setPrototypeOf(n6.prototype,QD.prototype);n6.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),QD.prototype.onOpen.call(this),this.collection};n6.prototype.onClose=function(F){QD.prototype.onClose.call(this,F)};n6.prototype._getCollection=function F(){if(this.collection)return this.collection;if(this.conn.db!=null)return this.collection=this.conn.db.collection(this.name),this.collection;return null};function GZ1(F){n6.prototype[F]=function(){let A=this._getCollection(),B=Array.from(arguments),D=this,X=D?.conn?.base?.options?.debug,Z=D?.conn?.options?.debug,J=Z==null?X:Z,$=new JZ1;if(this.conn.$wasForceClosed){let G=new iG("Connection was force closed");if(B.length>0&&typeof B[B.length-1]==="function"){B[B.length-1](G);return}else throw G}let Y=null,E=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:$,modelName:D.modelName,collectionName:D.name,method:F,args:B});let G=this._getBufferTimeoutMS();return E=new Promise((C,W)=>{this.addQueue(C),Y=setTimeout(()=>{if(this.removeQueue(C)){let q="Operation `"+this.name+"."+F+"()` buffering timed out after "+G+"ms",Q=new iG(q);this.conn.emit("buffer-end",{_id:$,modelName:D.modelName,collectionName:D.name,method:F,error:Q}),W(Q)}},G)}),E.then(()=>{if(Y)clearTimeout(Y);return this[F].apply(this,B)})}if(J)if(typeof J==="function"){let G=null;if(typeof B[B.length-1]=="function")G=B.slice(0,B.length-1);else G=B;J.apply(D,[D.name,F].concat(G))}else if(J instanceof $Z1.Writable)this.$printToStream(D.name,F,B,J);else{let G=J.color==null?!0:J.color,C=J.shell==null?!1:J.shell;this.$print(D.name,F,B,G,C)}this.conn.emit("operation-start",{_id:$,modelName:D.modelName,collectionName:this.name,method:F,params:B});try{if(A==null){let C="Cannot call `"+this.name+"."+F+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new iG(C)}let G=A[F].apply(A,B);if(typeof G?.then==="function")return G.then((C)=>{if(Y!=null)clearTimeout(Y);return this.conn.emit("operation-end",{_id:$,modelName:D.modelName,collectionName:this.name,method:F,result:C}),C},(C)=>{if(Y!=null)clearTimeout(Y);throw this.conn.emit("operation-end",{_id:$,modelName:D.modelName,collectionName:this.name,method:F,error:C}),C});if(this.conn.emit("operation-end",{_id:$,modelName:D.modelName,collectionName:this.name,method:F,result:G}),Y!=null)clearTimeout(Y);return G}catch(G){if(Y!=null)clearTimeout(Y);throw this.conn.emit("operation-end",{_id:$,modelName:D.modelName,collectionName:this.name,method:F,error:G}),G}}}for(let F of Object.getOwnPropertyNames(nG.prototype)){if(Object.getOwnPropertyDescriptor(nG.prototype,F).get!==void 0)continue;if(typeof nG.prototype[F]!=="function")continue;GZ1(F)}n6.prototype.$print=function(F,A,B,D,X){let Z=D?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",J=[F,A].join("."),$=[];for(let E=B.length-1;E>=0;--E)if(this.$format(B[E])||$.length)$.unshift(this.$format(B[E],D,X));let Y="("+$.join(", ")+")";console.info(Z+J+Y)};n6.prototype.$printToStream=function(F,A,B,D){let X=[F,A].join("."),Z=[];for(let $=B.length-1;$>=0;--$)if(this.$format(B[$])||Z.length)Z.unshift(this.$format(B[$]));let J="("+Z.join(", ")+")";D.write(X+J,"utf8")};n6.prototype.$format=function(F,A,B){let D=typeof F;if(D==="function"||D==="undefined")return"";return sG(F,!1,A,B)};function F8(F){let A={inspect:function(){return F}};if(aG.inspect.custom)A[aG.inspect.custom]=A.inspect;return A}function CZ1(F){return sG(F,!0)}function WZ1(F,A){F[A]=F8('ObjectId("'+F[A].toHexString()+'")')}function HZ1(F,A,B){if(B)F[A]=F8('ISODate("'+F[A].toUTCString()+'")');else F[A]=F8('new Date("'+F[A].toUTCString()+'")')}function sG(F,A,B,D){if(typeof F?.toBSON==="function")F=F.toBSON();if(F==null)return F;let X=C0(),Z=A?F:X(F,EZ1),J=SO(Z);if(J==="Binary")Z="BinData("+Z.sub_type+', "'+Z.toString("base64")+'")';else if(J==="ObjectId")Z=F8('ObjectId("'+Z.toHexString()+'")');else if(J==="Date")Z=F8('new Date("'+Z.toUTCString()+'")');else if(J==="Object"){let $=Object.keys(Z),Y=$.length,E;for(let G=0;G<Y;++G)if(E=$[G],Z[E]){let C;if(typeof Z[E].toBSON==="function")try{Z[E]=Z[E].toBSON()}catch(H){C=H}let W=SO(Z[E]);if(W==="Binary")Z[E]="BinData("+Z[E].sub_type+', "'+Z[E].buffer.toString("base64")+'")';else if(W==="Object")Z[E]=sG(Z[E],!0);else if(W==="ObjectId")WZ1(Z,E);else if(W==="Date")HZ1(Z,E,D);else if(W==="ClientSession")Z[E]=F8('ClientSession("'+(Z[E]?.id?.id?.buffer||"").toString("hex")+'")');else if(Array.isArray(Z[E]))Z[E]=Z[E].map(CZ1);else if(C!=null)throw C}}if(A)return Z;return aG.inspect(Z,!1,10,B).replace(/\n/g,"").replace(/\s{2,}/g," ")}n6.prototype.getIndexes=n6.prototype.indexInformation;/*!
 * Module exports.
 */xO.exports=n6});var rG=z((UM1,bO)=>{/*!
 * Module dependencies.
 */var qZ1=c("events").EventEmitter,zF=K1();/*!
 * ignore
 */var fO=["close","change","end","error","resumeTokenChanged"];/*!
 * ignore
 */class gO extends qZ1{constructor(F,A,B){super();if(this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=A,this.options=B,this.errored=!1,B?.hydrate&&!B.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let D=null;if(this.$driverChangeStreamPromise=new Promise((X,Z)=>{try{F((J,$)=>{if(J!=null)return this.errored=!0,this.emit("error",J),Z(J);this.driverChangeStream=$,this.emit("ready"),X()})}catch(J){D=J,this.errored=!0,this.emit("error",J),Z(J)}}),D!=null)throw D}_bindEvents(){if(this.bindedEvents)return;if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),fO.forEach((F)=>{this.driverChangeStream.on(F,(A)=>{if(A?.fullDocument!=null&&this.options?.hydrate)A.fullDocument=this.options.model.hydrate(A.fullDocument);this.emit(F,A)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),fO.forEach((F)=>{this.driverChangeStream.on(F,(A)=>{if(A?.fullDocument!=null&&this.options?.hydrate)A.fullDocument=this.options.model.hydrate(A.fullDocument);this.emit(F,A)})})}hasNext(F){if(this.errored)throw new zF("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(F)}next(F){if(this.errored)throw new zF("Cannot call next() on errored ChangeStream");if(this.options?.hydrate){if(F!=null){let B=F;F=(D,X)=>{if(D!=null)return B(D);if(X.fullDocument!=null)X.fullDocument=this.options.model.hydrate(X.fullDocument);return B(null,X)}}let A=this.driverChangeStream.next(F);if(typeof A?.then==="function")A=A.then((B)=>{if(B.fullDocument!=null)B.fullDocument=this.options.model.hydrate(B.fullDocument);return B});return A}return this.driverChangeStream.next(F)}addListener(F,A){if(this.errored)throw new zF("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(F,A)}on(F,A){if(this.errored)throw new zF("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(F,A)}once(F,A){if(this.errored)throw new zF("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(F,A)}_queue(F){this.once("ready",()=>F())}close(){if(this.closed=!0,this.driverChangeStream)return this.driverChangeStream.close();else return this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}}/*!
 * ignore
 */bO.exports=gO});var R9=z((VM1,hO)=>{function j1(){this._pres=new Map,this._posts=new Map}j1.skipWrappedFunction=function F(){if(!(this instanceof j1.skipWrappedFunction))return new j1.skipWrappedFunction(...arguments);this.args=[...arguments]};j1.overwriteResult=function F(){if(!(this instanceof j1.overwriteResult))return new j1.overwriteResult(...arguments);this.args=[...arguments]};j1.overwriteArguments=function F(){if(!(this instanceof j1.overwriteArguments))return new j1.overwriteArguments(...arguments);this.args=[...arguments]};j1.prototype.execPre=async function F(A,B,D){let X=this._pres.get(A)||[],Z=X.length,J=D,$=null;if(!Z)return J;for(let Y of X){let E=[],G=[null].concat(J);for(let C=1;C<G.length;++C){if(C===G.length-1&&typeof G[C]==="function")continue;E.push(G[C])}try{let C=Y.fn.apply(B,E);if(tG(C)){let W=await C;if(W instanceof j1.overwriteArguments)J=W.args}else if(C instanceof j1.overwriteArguments)J=C.args}catch(C){if(C instanceof j1.skipWrappedFunction){$=C;continue}if(C instanceof j1.overwriteArguments){J=C.args;continue}throw C}}if($)throw $;return J};j1.prototype.execPreSync=function(F,A,B){let D=this._pres.get(F)||[],X=D.length,Z=B||[];for(let J=0;J<X;++J){let $=D[J].fn.apply(A,Z);if($ instanceof j1.overwriteArguments)Z=$.args}return Z};j1.prototype.execPost=async function F(A,B,D,X){let Z=this._posts.get(A)||[],J=Z.length,$=null;if(X&&X.error)$=X.error;if(!J){if($!=null)throw $;return D}for(let Y of Z){let E=Y.fn,G=0,C=[],W=D.length;for(let K=0;K<W;++K)if(!D[K]||!D[K]._kareemIgnore)G+=1,C.push(D[K]);if(X?.numCallbackParams!=null){G=X.numCallbackParams;for(let K=C.length;K<G;++K)C.push(null)}let H,q,Q=new Promise((K,U)=>{H=K,q=U});if(C.push(function K(U){if(U)q(U);else H()}),$)if(yO(Y,G))try{let K=E.apply(B,[$].concat(C));if(tG(K))await K;else if(E.length===G+2)await Q}catch(K){if(K instanceof j1.overwriteResult){D=K.args;continue}$=K}else continue;else if(yO(Y,G))continue;else{let K=null;try{if(K=E.apply(B,C),tG(K))K=await K;else if(E.length===G+1)K=await Q}catch(U){if(U instanceof j1.overwriteResult){D=U.args;continue}$=U;continue}if(K instanceof j1.overwriteResult){D=K.args;continue}}}if($!=null)throw $;return D};j1.prototype.execPostSync=function(F,A,B){let D=this._posts.get(F)||[],X=D.length;for(let Z=0;Z<X;++Z){let J=D[Z].fn.apply(A,B||[]);if(J instanceof j1.overwriteResult)B=J.args}return B};j1.prototype.createWrapperSync=function(F,A){let B=this;return function D(){let X=B.execPreSync(F,this,Array.from(arguments)),Z=A.apply(this,X);return B.execPostSync(F,this,[Z])[0]}};j1.prototype.wrap=async function F(A,B,D,X,Z){let J,$=!1,Y=X;try{Y=await this.execPre(A,D,X)}catch(E){if(E instanceof j1.skipWrappedFunction)J=E.args,$=!0;else await this.execPost(A,D,X,{...Z,error:E})}if(!$)J=await B.apply(D,Y);return J=await this.execPost(A,D,[J],Z),J[0]};j1.prototype.filter=function(F){let A=this.clone(),B=Array.from(A._pres.keys());for(let X of B){let Z=this._pres.get(X).map((J)=>Object.assign({},J,{name:X})).filter(F);if(Z.length===0){A._pres.delete(X);continue}A._pres.set(X,Z)}let D=Array.from(A._posts.keys());for(let X of D){let Z=this._posts.get(X).map((J)=>Object.assign({},J,{name:X})).filter(F);if(Z.length===0){A._posts.delete(X);continue}A._posts.set(X,Z)}return A};j1.prototype.hasHooks=function(F){return this._pres.has(F)||this._posts.has(F)};j1.prototype.createWrapper=function(F,A,B,D){let X=this;if(!this.hasHooks(F))return A;return function Z(){let J=B||this;return X.wrap(F,A,J,Array.from(arguments),D)}};j1.prototype.pre=function(F,A,B,D,X){if(typeof A==="function")B=A,A={};else if(A==null)A={};let Z=this._pres.get(F)||[];if(this._pres.set(F,Z),typeof B!=="function")throw new Error('pre() requires a function, got "'+typeof B+'"');if(X)Z.unshift(Object.assign({},A,{fn:B}));else Z.push(Object.assign({},A,{fn:B}));return this};j1.prototype.post=function(F,A,B,D){let X=this._posts.get(F)||[];if(typeof A==="function")D=!!B,B=A,A={};if(typeof B!=="function")throw new Error('post() requires a function, got "'+typeof B+'"');if(D)X.unshift(Object.assign({},A,{fn:B}));else X.push(Object.assign({},A,{fn:B}));return this._posts.set(F,X),this};j1.prototype.postError=function F(A,B,D,X){if(typeof B==="function")X=!!D,D=B,B={};return this.post(A,{...B,errorHandler:!0},D,X)};j1.prototype.clone=function(){let F=new j1;for(let A of this._pres.keys()){let B=this._pres.get(A).slice();F._pres.set(A,B)}for(let A of this._posts.keys())F._posts.set(A,this._posts.get(A).slice());return F};j1.prototype.merge=function(F,A){A=arguments.length===1?!0:A;let B=A?this.clone():this;for(let D of F._pres.keys()){let X=B._pres.get(D)||[],Z=F._pres.get(D).filter(($)=>X.map((Y)=>Y.fn).indexOf($.fn)===-1),J=X.concat(Z);B._pres.set(D,J)}for(let D of F._posts.keys()){let X=B._posts.get(D)||[],Z=F._posts.get(D).filter((J)=>X.indexOf(J)===-1);B._posts.set(D,X.concat(Z))}return B};function tG(F){return typeof F==="object"&&F!==null&&typeof F.then==="function"}function yO(F,A){if(F.errorHandler)return!0;return F.fn.length===A+2}hO.exports=j1});var dO=z((vO,mO)=>{var Q2=mO.exports=vO={};Q2.DocumentNotFoundError=null;Q2.general={};Q2.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";Q2.general.required="Path `{PATH}` is required.";Q2.Number={};Q2.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";Q2.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";Q2.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";Q2.Date={};Q2.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";Q2.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";Q2.String={};Q2.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";Q2.String.match="Path `{PATH}` is invalid ({VALUE}).";Q2.String.minlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).";Q2.String.maxlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH})."});var K2=z((LM1,pO)=>{/*!
 * Module dependencies.
 */var zZ1=K1(),QZ1=c("util");class FC extends zZ1{constructor(F,A,B,D,X){if(arguments.length>0){let Z=cO(A),J=lO(X),$=oG(null,F,A,B,J,Z,D);super($);this.init(F,A,B,D,X)}else super(oG())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(F,A,B,D,X){/*!
   * ignore
   */this.stringValue=eG(A),this.messageFormat=lO(X),this.kind=F,this.value=A,this.path=B,this.reason=D,this.valueType=cO(A)}copy(F){this.messageFormat=F.messageFormat,this.stringValue=F.stringValue,this.kind=F.kind,this.value=F.value,this.path=F.path,this.reason=F.reason,this.message=F.message,this.valueType=F.valueType}setModel(F){/*!
   * ignore
   */this.message=oG(F,this.kind,this.value,this.path,this.messageFormat,this.valueType)}}Object.defineProperty(FC.prototype,"name",{value:"CastError"});function eG(F){let A=QZ1.inspect(F);if(A=A.replace(/^'|'$/g,'"'),!A.startsWith('"'))A='"'+A+'"';return A}function cO(F){if(F==null)return""+F;let A=typeof F;if(A!=="object")return A;if(typeof F.constructor!=="function")return A;return F.constructor.name}function lO(F){let A=F?._castErrorMessage||null;if(typeof A==="string"||typeof A==="function")return A}/*!
 * ignore
 */function oG(F,A,B,D,X,Z,J){if(typeof X==="string"){let $=eG(B),Y=X.replace("{KIND}",A).replace("{VALUE}",$).replace("{PATH}",D);if(F!=null)Y=Y.replace("{MODEL}",F.modelName);return Y}else if(typeof X==="function")return X(B,D,F,A);else{let $=eG(B),Y=Z?" (type "+Z+")":"",E="Cast to "+A+" failed for value "+$+Y+' at path "'+D+'"';if(F!=null)E+=' for model "'+F.modelName+'"';if(J!=null&&typeof J.constructor==="function"&&J.constructor.name!=="AssertionError"&&J.constructor.name!=="Error")E+=' because of "'+J.constructor.name+'"';return E}}/*!
 * exports
 */pO.exports=FC});var KD=z((wM1,nO)=>{/*!
 * Module dependencies.
 */var iO=K1(),KZ1=c("util");class AC extends iO{constructor(F,A,B,D){let X,Z=iO.messages;if(Z.DocumentNotFoundError!=null)X=typeof Z.DocumentNotFoundError==="function"?Z.DocumentNotFoundError(F,A):Z.DocumentNotFoundError;else X='No document found for query "'+KZ1.inspect(F)+'" on model "'+A+'"';super(X);this.result=D,this.numAffected=B,this.filter=F,this.query=F}}Object.defineProperty(AC.prototype,"name",{value:"DocumentNotFoundError"});/*!
 * exports
 */nO.exports=AC});var BC=z((RM1,aO)=>{/*!
 * ignore
 */aO.exports=function F(A){let B=Object.keys(A.errors||{}),D=B.length,X=[],Z;for(let J=0;J<D;++J){if(Z=B[J],A===A.errors[Z])continue;X.push(Z+": "+A.errors[Z].message)}return X.join(", ")}});var I9=z((PM1,tO)=>{/*!
 * Module requirements
 */var UZ1=K1(),VZ1=S2(),sO=c("util"),rO=BC();class P9 extends UZ1{constructor(F){let A;if(VZ1(F)==="model")A=F.constructor.modelName+" validation failed";else A="Validation failed";super(A);if(this.errors={},this._message=A,F)F.$errors=this.errors}toString(){return this.name+": "+rO(this)}addError(F,A){if(A instanceof P9){let{errors:B}=A;for(let D of Object.keys(B))this.addError(`${F}.${D}`,B[D]);return}this.errors[F]=A,this.message=this._message+": "+rO(this)}}if(sO.inspect.custom)P9.prototype[sO.inspect.custom]=P9.prototype.inspect;Object.defineProperty(P9.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(P9.prototype,"name",{value:"ValidationError"});/*!
 * Module exports
 */tO.exports=P9});var DC=z((IM1,FS)=>{/*!
 * Module dependencies.
 */var oO=K1();class QF extends oO{constructor(F,A){let B=F.message;if(!B)B=oO.messages.general.default;let D=eO(B,F,A);super(D);F=Object.assign({},F,{message:D}),this.properties=F,this.kind=F.type,this.path=F.path,this.value=F.value,this.reason=F.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}}Object.defineProperty(QF.prototype,"name",{value:"ValidatorError"});Object.defineProperty(QF.prototype,"properties",{enumerable:!1,writable:!0,value:null});QF.prototype.formatMessage=eO;function eO(F,A,B){if(typeof F==="function")return F(A,B);let D=Object.keys(A);for(let X of D){if(X==="message")continue;F=F.replace("{"+X.toUpperCase()+"}",A[X])}return F}/*!
 * exports
 */FS.exports=QF});var ZC=z((NM1,AS)=>{/*!
 * Module dependencies.
 */var LZ1=K1();class XC extends LZ1{constructor(F,A,B){let D=B.join(", ");super('No matching document found for id "'+F._doc._id+'" version '+A+' modifiedPaths "'+D+'"');this.version=A,this.modifiedPaths=B}}Object.defineProperty(XC.prototype,"name",{value:"VersionError"});/*!
 * exports
 */AS.exports=XC});var YC=z((MM1,BS)=>{/*!
 * Module dependencies.
 */var wZ1=K1();class JC extends wZ1{constructor(F){super("Can't save() the same doc multiple times in parallel. Document: "+F._doc._id)}}Object.defineProperty(JC.prototype,"name",{value:"ParallelSaveError"});/*!
 * exports
 */BS.exports=JC});var EC=z((jM1,DS)=>{/*!
 * Module dependencies.
 */var RZ1=K1();class $C extends RZ1{constructor(F){super("Cannot overwrite `"+F+"` model once compiled.")}}Object.defineProperty($C.prototype,"name",{value:"OverwriteModelError"});/*!
 * exports
 */DS.exports=$C});var ZS=z((TM1,XS)=>{/*!
 * Module dependencies.
 */var PZ1=K1();class GC extends PZ1{constructor(F){let A=`Schema hasn't been registered for model "`+F+`".
Use mongoose.model(name, schema)`;super(A)}}Object.defineProperty(GC.prototype,"name",{value:"MissingSchemaError"});/*!
 * exports
 */XS.exports=GC});var WC=z((kM1,JS)=>{/*!
 * Module dependencies.
 */var IZ1=K1();class CC extends IZ1{constructor(F,A,B){let D=B?.matchedCount??0,X=B?.insertedCount??0,Z=A.map(($)=>$._id).join(", ");if(Z.length>100)Z=Z.slice(0,100)+"...";let J=A.length-D-X;super(`${F}.bulkSave() was not able to update ${J} of the given documents due to incorrect version or optimistic concurrency, document ids: ${Z}`);this.modelName=F,this.documents=A,this.bulkWriteResult=B,this.numDocumentsNotUpdated=J}}Object.defineProperty(CC.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});/*!
 * exports
 */JS.exports=CC});var $S=z((uM1,YS)=>{var NZ1=S2();YS.exports=function F(A){if(NZ1(A)!=="TopologyDescription")return!1;let B=Array.from(A.servers.values());return B.length>0&&B.every((D)=>D.type==="Unknown")}});var GS=z((OM1,ES)=>{var MZ1=S2();ES.exports=function F(A){if(MZ1(A)!=="TopologyDescription")return!1;if(A.servers.size===0)return!1;for(let B of A.servers.values())if(B.host.endsWith(".mongodb.net")===!1||B.port!==27017)return!1;return!0}});var WS=z((SM1,CS)=>{var jZ1=S2(),TZ1="Client network socket disconnected before secure TLS connection was established";CS.exports=function F(A){if(jZ1(A)!=="TopologyDescription")return!1;let B=Array.from(A.servers.values());return B.length>0&&B.every((D)=>D.error&&D.error.message.indexOf(TZ1)!==-1)}});var qC=z((xM1,HS)=>{/*!
 * Module dependencies.
 */var kZ1=K1(),uZ1=$S(),OZ1=GS(),SZ1=WS();/*!
 * ignore
 */var xZ1="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",_Z1="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html";class HC extends kZ1{assimilateError(F){let A=F.reason;if(OZ1(A)&&uZ1(A)&&F.message.indexOf("bad auth")===-1&&F.message.indexOf("Authentication failed")===-1)this.message=xZ1;else if(SZ1(A))this.message=_Z1;else this.message=F.message;for(let D in F)if(D!=="name")this[D]=F[D];return this.cause=A,this}}Object.defineProperty(HC.prototype,"name",{value:"MongooseServerSelectionError"});HS.exports=HC});var QC=z((_M1,qS)=>{/*!
 * Module dependencies.
 */var fZ1=K1();class zC extends fZ1{constructor(F){let A="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+F.join(`
  `)+`
Use Model.updateOne() to update these arrays instead. See https://mongoosejs.com/docs/faq.html#divergent-array-error for more information.`;super(A)}}Object.defineProperty(zC.prototype,"name",{value:"DivergentArrayError"});/*!
 * exports
 */qS.exports=zC});var T4=z((fM1,zS)=>{/*!
 * Module dependencies.
 */var gZ1=K1();class KC extends gZ1{constructor(F,A,B){A=A||"Field `"+F+"` is not in schema and strict mode is set to throw.";super(A);this.isImmutableError=!!B,this.path=F}}Object.defineProperty(KC.prototype,"name",{value:"StrictModeError"});zS.exports=KC});var VC=z((gM1,QS)=>{/*!
 * Module dependencies.
 */var bZ1=K1();class UC extends bZ1{constructor(F,A){A=A||"Cannot populate path `"+F+"` because it is not in your schema. Set the `strictPopulate` option to false to override.";super(A);this.path=F}}Object.defineProperty(UC.prototype,"name",{value:"StrictPopulateError"});QS.exports=UC});var E6=z((KS,US)=>{var D2=K1();/*!
 * Module exports.
 */US.exports=KS=D2;D2.messages=dO();D2.Messages=D2.messages;D2.CastError=K2();D2.DocumentNotFoundError=KD();D2.ValidationError=I9();D2.ValidatorError=DC();D2.VersionError=ZC();D2.ParallelSaveError=YC();D2.OverwriteModelError=EC();D2.MissingSchemaError=ZS();D2.MongooseBulkSaveIncompleteError=WC();D2.MongooseServerSelectionError=qC();D2.DivergentArrayError=QC();D2.StrictModeError=T4();D2.StrictPopulateError=VC()});var G6=z((bM1,VS)=>{VS.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var c2=z((yM1,LS)=>{var yZ1=C0();class U2{constructor(F){if(F==null)return this;Object.assign(this,yZ1(F))}}var d2=G6();Object.defineProperty(U2.prototype,"type",d2);Object.defineProperty(U2.prototype,"validate",d2);Object.defineProperty(U2.prototype,"cast",d2);Object.defineProperty(U2.prototype,"required",d2);Object.defineProperty(U2.prototype,"default",d2);Object.defineProperty(U2.prototype,"ref",d2);Object.defineProperty(U2.prototype,"refPath",d2);Object.defineProperty(U2.prototype,"select",d2);Object.defineProperty(U2.prototype,"index",d2);Object.defineProperty(U2.prototype,"unique",d2);Object.defineProperty(U2.prototype,"immutable",d2);Object.defineProperty(U2.prototype,"sparse",d2);Object.defineProperty(U2.prototype,"text",d2);Object.defineProperty(U2.prototype,"transform",d2);LS.exports=U2});var UD=z((hM1,A8)=>{var hZ1=K2();A8.exports=function F(A,B){if(A8.exports.convertToTrue.has(A))return!0;if(A8.exports.convertToFalse.has(A))return!1;if(A==null)return A;throw new hZ1("boolean",A,B)};A8.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);A8.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var VD=z((vM1,wS)=>{var vZ1=UD();/*!
 * ignore
 */wS.exports=function(F){let A=this?.path??null;return vZ1(F,A)}});var LC=z((mM1,RS)=>{/*!
 * ignore
 */RS.exports=function(F){if(Array.isArray(F)){if(!F.every((A)=>typeof A==="number"||typeof A==="string"))throw new Error("$type array values must be strings or numbers");return F}if(typeof F!=="number"&&typeof F!=="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return F}});var IS=z((dM1,PS)=>{var mZ1=T4();/*!
 * ignore
 */PS.exports=function(F){if(F.$immutable)F.$immutableSetter=dZ1(F.path,F.options.immutable),F.set(F.$immutableSetter);else if(F.$immutableSetter)F.setters=F.setters.filter((A)=>A!==F.$immutableSetter),delete F.$immutableSetter};function dZ1(F,A){return function B(D,X,Z,J){if(this==null||this.$__==null)return D;if(this.isNew)return D;if(J?.overwriteImmutable)return D;if(!(typeof A==="function"?A.call(this,this):A))return D;let Y=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(F):this.$__getValue(F);if(this.$__.strictMode==="throw"&&D!==Y)throw new mZ1(F,"Path `"+F+"` is immutable and strict mode is set to throw.",!0);return Y}}});var MS=z((cM1,NS)=>{NS.exports=function F(A){return typeof A==="function"&&A.constructor&&A.constructor.name==="AsyncFunction"}});var TS=z((lM1,jS)=>{jS.exports=function F(A){let B=Object.keys(A),D=!0;for(let X=0,Z=B.length;X<Z;++X)if(typeof A[B[X]]==="object"&&A[B[X]]!==null){D=!1;break}return D}});var uS=z((pM1,kS)=>{var B8=1000,D8=B8*60,X8=D8*60,N9=X8*24,cZ1=N9*7,lZ1=N9*365.25;kS.exports=function(F,A){A=A||{};var B=typeof F;if(B==="string"&&F.length>0)return pZ1(F);else if(B==="number"&&isFinite(F))return A.long?nZ1(F):iZ1(F);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(F))};function pZ1(F){if(F=String(F),F.length>100)return;var A=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(!A)return;var B=parseFloat(A[1]),D=(A[2]||"ms").toLowerCase();switch(D){case"years":case"year":case"yrs":case"yr":case"y":return B*lZ1;case"weeks":case"week":case"w":return B*cZ1;case"days":case"day":case"d":return B*N9;case"hours":case"hour":case"hrs":case"hr":case"h":return B*X8;case"minutes":case"minute":case"mins":case"min":case"m":return B*D8;case"seconds":case"second":case"secs":case"sec":case"s":return B*B8;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return B;default:return}}function iZ1(F){var A=Math.abs(F);if(A>=N9)return Math.round(F/N9)+"d";if(A>=X8)return Math.round(F/X8)+"h";if(A>=D8)return Math.round(F/D8)+"m";if(A>=B8)return Math.round(F/B8)+"s";return F+"ms"}function nZ1(F){var A=Math.abs(F);if(A>=N9)return LD(F,A,N9,"day");if(A>=X8)return LD(F,A,X8,"hour");if(A>=D8)return LD(F,A,D8,"minute");if(A>=B8)return LD(F,A,B8,"second");return F+" ms"}function LD(F,A,B,D){var X=A>=B*1.5;return Math.round(F/B)+" "+D+(X?"s":"")}});var SS=z((iM1,OS)=>{OS.exports=function F(A){let B=[],D="",X="DEFAULT";for(let Z=0;Z<A.length;++Z){if(X==="IN_SQUARE_BRACKETS"&&!/\d/.test(A[Z])&&A[Z]!=="]")X="DEFAULT",D=B[B.length-1]+"["+D,B.splice(B.length-1,1);if(A[Z]==="["){if(X!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D),D="";X="IN_SQUARE_BRACKETS"}else if(A[Z]==="]")if(X==="IN_SQUARE_BRACKETS")X="IMMEDIATELY_AFTER_SQUARE_BRACKETS",B.push(D),D="";else X="DEFAULT",D+=A[Z];else if(A[Z]==="."){if(X!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D),D="";X="DEFAULT"}else D+=A[Z]}if(X!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS")B.push(D);return B}});var bS=z((aZ1)=>{var KF=SS(),_S=["__proto__","constructor","prototype"];aZ1.get=function(F,A,B,D){var X;if(typeof B=="function")if(B.length<2)D=B,B=void 0;else X=B,B=void 0;D||(D=gS);var Z=typeof F=="string"?KF(F):F;if(!Array.isArray(Z))throw new TypeError("Invalid `path`. Must be either string or array");var J=A,$;for(var Y=0;Y<Z.length;++Y){if($=Z[Y],typeof Z[Y]!=="string"&&typeof Z[Y]!=="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof Z[Y]);if(Array.isArray(J)&&!/^\d+$/.test($)){var E=Z.slice(Y);return[].concat(J).map(function(C){return C?aZ1.get(E,C,B||X,D):D(void 0)})}if(X)J=X(J,$);else{var G=B&&J[B]?J[B]:J;J=G instanceof Map?G.get($):G[$]}if(!J)return D(J)}return D(J)};aZ1.has=function(F,A){var B=typeof F==="string"?KF(F):F;if(!Array.isArray(B))throw new TypeError("Invalid `path`. Must be either string or array");var D=B.length,X=A;for(var Z=0;Z<D;++Z){if(typeof B[Z]!=="string"&&typeof B[Z]!=="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof B[Z]);if(X==null||typeof X!=="object"||!(B[Z]in X))return!1;X=X[B[Z]]}return!0};aZ1.unset=function(F,A){var B=typeof F==="string"?KF(F):F;if(!Array.isArray(B))throw new TypeError("Invalid `path`. Must be either string or array");var D=B.length,X=A;for(var Z=0;Z<D;++Z){if(X==null||typeof X!=="object"||!(B[Z]in X))return!1;if(typeof B[Z]!=="string"&&typeof B[Z]!=="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof B[Z]);if(_S.indexOf(B[Z])!==-1)return!1;if(Z===D-1)return delete X[B[Z]],!0;X=X instanceof Map?X.get(B[Z]):X[B[Z]]}return!0};aZ1.set=function(F,A,B,D,X,Z){var J;if(typeof D=="function")if(D.length<2)X=D,D=void 0;else J=D,D=void 0;X||(X=gS);var $=typeof F=="string"?KF(F):F;if(!Array.isArray($))throw new TypeError("Invalid `path`. Must be either string or array");if(B==null)return;for(var Y=0;Y<$.length;++Y){if(typeof $[Y]!=="string"&&typeof $[Y]!=="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof $[Y]);if(_S.indexOf($[Y])!==-1)return}var E=Z||/\$/.test(F)&&Z!==!1,G=B,C;for(var Y=0,W=$.length-1;Y<W;++Y){if(C=$[Y],C=="$")if(Y==W-1)break;else continue;if(Array.isArray(G)&&!/^\d+$/.test(C)){var H=$.slice(Y);if(!E&&Array.isArray(A))for(var q=0;q<G.length&&q<A.length;++q)aZ1.set(H,A[q],G[q],D||J,X,E);else for(var q=0;q<G.length;++q)aZ1.set(H,A,G[q],D||J,X,E);return}if(J)G=J(G,C);else{var Q=D&&G[D]?G[D]:G;G=Q instanceof Map?Q.get(C):Q[C]}if(!G)return}if(C=$[W],D&&G[D])G=G[D];if(Array.isArray(G)&&!/^\d+$/.test(C))if(!E&&Array.isArray(A))fS(G,A,C,J,D,X);else for(var q=0;q<G.length;++q){var K=G[q];if(K)if(J)J(K,C,X(A));else{if(K[D])K=K[D];K[C]=X(A)}}else if(J)J(G,C,X(A));else if(G instanceof Map)G.set(C,X(A));else G[C]=X(A)};/*!
 * Split a string path into components delimited by '.' or
 * '[\d+]'
 *
 * #### Example:
 *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
 */aZ1.stringToParts=KF;/*!
 * Recursively set nested arrays
 */function fS(F,A,B,D,X,Z){for(var J,$=0;$<F.length&&$<A.length;++$)if(J=F[$],Array.isArray(J)&&Array.isArray(A[$]))fS(J,A[$],B,D,X,Z);else if(J)if(D)D(J,B,Z(A[$]));else{if(J[X])J=J[X];J[B]=Z(A[$])}}/*!
 * Returns the value passed to it.
 */function gS(F){return F}});var C6=z((yS,hS)=>{hS.exports=yS=bS()});var RC=z((aM1,mS)=>{var oZ1=C0();class vS{constructor(F){if(this._docs={},this._childDocs=[],F==null)return;if(F=oZ1(F),Object.assign(this,F),typeof F.subPopulate==="object")this.populate=F.subPopulate;if(F.perDocumentLimit!=null&&F.limit!=null)throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+F.path+"`.")}}mS.exports=vS});var dS=z((eZ1)=>{eZ1.isMongooseDocumentArray=function(F){return Array.isArray(F)&&F.isMongooseDocumentArray}});var wD=z((rM1,cS)=>{cS.exports=function F(A,B,D){let X=Object.keys(B.tree),Z={};for(let J of X){if(D&&(A.paths[J]||A.nested[J]||A.singleNestedPaths[J]))continue;Z[J]=B.tree[J]}A.options._isMerging=!0,A.add(Z,null),delete A.options._isMerging,A.callQueue=A.callQueue.concat(B.callQueue),A.method(B.methods),A.static(B.statics);for(let[J,$]of Object.entries(B._userProvidedOptions))if(!(J in A._userProvidedOptions))A.set(J,$);for(let J in B.query)A.query[J]=B.query[J];for(let J in B.virtuals)A.virtuals[J]=B.virtuals[J].clone();A._indexes=A._indexes.concat(B._indexes||[]),A.s.hooks.merge(B.s.hooks,!1)}});var iS=z((lS,pS)=>{/*!
 * Module dependencies.
 */var tM1=B1(),I6=pS.exports=lS=function F(){};I6.ctor=function(){let F=[...arguments],A=function(){I6.apply(this,arguments),this.paths={},this.states={}};return A.prototype=new I6,A.prototype.constructor=A,A.prototype.stateNames=F,F.forEach(function(B){A.prototype[B]=function(D){this._changeState(D,B)}}),A};I6.prototype._changeState=function F(A,B){let D=this.paths[A];if(D===B)return;let X=this.states[D];if(X)delete X[A];this.paths[A]=B,this.states[B]=this.states[B]||{},this.states[B][A]=!0};/*!
 * ignore
 */I6.prototype.clear=function F(A){if(this.states[A]==null)return;let B=Object.keys(this.states[A]),D=B.length,X;while(D--)X=B[D],delete this.states[A][X],delete this.paths[X]};/*!
 * ignore
 */I6.prototype.clearPath=function F(A){let B=this.paths[A];if(!B)return;delete this.paths[A],delete this.states[B][A]};I6.prototype.getStatePaths=function F(A){if(this.states[A]!=null)return this.states[A];return{}};I6.prototype.some=function F(){let A=this,B=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(B,function(D){if(A.states[D]==null)return!1;return Object.keys(A.states[D]).length})};I6.prototype._iter=function F(A){return function(){let B=[...arguments],D=B.pop();if(!B.length)B=this.stateNames;let X=this;return B.reduce(function(J,$){if(X.states[$]==null)return J;return J.concat(Object.keys(X.states[$]))},[])[A](function(J,$,Y){return D(J,$,Y)})}};I6.prototype.forEach=function F(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};I6.prototype.map=function F(){return this.map=this._iter("map"),this.map.apply(this,arguments)};I6.prototype.clone=function F(){let A=new this.constructor;A.paths={...this.paths};for(let B of this.stateNames){if(!(B in this.states))continue;A.states[B]=this.states[B]==null?this.states[B]:{...this.states[B]}}return A}});var sS=z((nS,aS)=>{/*!
 * Dependencies
 */var AJ1=iS(),BJ1=AJ1.ctor("require","modify","init","default","ignore");aS.exports=nS=z0;function z0(){this.activePaths=new BJ1}z0.prototype.strictMode=!0;z0.prototype.fullPath=void 0;z0.prototype.selected=void 0;z0.prototype.shardval=void 0;z0.prototype.saveError=void 0;z0.prototype.validationError=void 0;z0.prototype.adhocPaths=void 0;z0.prototype.removing=void 0;z0.prototype.inserting=void 0;z0.prototype.saving=void 0;z0.prototype.version=void 0;z0.prototype._id=void 0;z0.prototype.ownerDocument=void 0;z0.prototype.populate=void 0;z0.prototype.populated=void 0;z0.prototype.primitiveAtomics=void 0;z0.prototype.wasPopulated=!1;z0.prototype.scope=void 0;z0.prototype.session=null;z0.prototype.pathsToScopes=null;z0.prototype.cachedRequired=null});var RD=z((oM1,oS)=>{/*!
 * Module dependencies.
 */var PC=$1().Binary,DJ1=$1().UUID,rS=B1();function x2(F,A,B){let D=F;if(F==null)D=0;let X,Z,J;if(Array.isArray(A))Z=A[0],J=A[1];else X=A;let $;if(typeof D==="number"||D instanceof Number)$=Buffer.alloc(D);else $=Buffer.from(D,X,B);return rS.decorate($,x2.mixin),$.isMongooseBuffer=!0,$[x2.pathSymbol]=Z,$[tS]=J,$._subtype=0,$}var XJ1=Symbol.for("mongoose#Buffer#_path"),tS=Symbol.for("mongoose#Buffer#_parent");x2.pathSymbol=XJ1;/*!
 * Inherit from Buffer.
 */x2.mixin={_subtype:void 0,_markModified:function(){let F=this[tS];if(F)F.markModified(this[x2.pathSymbol]);return this},write:function(){let F=Buffer.prototype.write.apply(this,arguments);if(F>0)this._markModified();return F},copy:function(F){let A=Buffer.prototype.copy.apply(this,arguments);if(F?.isMongooseBuffer)F._markModified();return A}};/*!
 * Compile other Buffer methods marking this buffer as modified.
 */rS.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(F){if(!Buffer.prototype[F])return;x2.mixin[F]=function(){let A=Buffer.prototype[F].apply(this,arguments);return this._markModified(),A}});x2.mixin.toObject=function(F){let A=typeof F==="number"?F:this._subtype||0;return new PC(Buffer.from(this),A)};x2.mixin.$toObject=x2.mixin.toObject;x2.mixin.toBSON=function(){return new PC(this,this._subtype||0)};x2.mixin.toUUID=function(){if(this._subtype!==4)throw new Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new DJ1(this)};x2.mixin.equals=function(F){if(!Buffer.isBuffer(F))return!1;if(this.length!==F.length)return!1;for(let A=0;A<this.length;++A)if(this[A]!==F[A])return!1;return!0};x2.mixin.subtype=function(F){if(typeof F!=="number")throw new TypeError("Invalid subtype. Expected a number");if(this._subtype!==F)this._markModified();this._subtype=F};/*!
 * Module exports.
 */x2.Binary=PC;oS.exports=x2});var M9=z((ZJ1)=>{ZJ1.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");ZJ1.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var Z8=z((Fj1,Fx)=>{/*!
 * Module dependencies.
 */var PD=Q0(),$J1=M9(),EJ1=w9(),eS=B1();function N6(F,A,B,D){if(A?.default){let X=A.default;if(Array.isArray(X)&&X.length===0)A.default=Array;else if(!A.shared&&EJ1(X)&&eS.hasOwnKeys(X)===!1)A.default=function(){return{}}}PD.call(this,F,A,"Mixed",D),this[$J1.schemaMixedSymbol]=!0}N6.schemaName="Mixed";N6.defaultOptions={};/*!
 * Inherits from SchemaType.
 */N6.prototype=Object.create(PD.prototype);N6.prototype.constructor=N6;N6.get=PD.get;N6.set=PD.set;N6.setters=[];N6.prototype.cast=function(F){if(F instanceof Error)return eS.errorToPOJO(F);return F};N6.prototype.castForQuery=function(F,A){return A};N6.prototype.toJSONSchema=function F(A){return{}};/*!
 * Module exports.
 */Fx.exports=N6});var Bx=z((Aj1,Ax)=>{Ax.exports=class F{constructor(A,B,D){this.subdocSnapshot=A,this.activePaths=B,this.version=D}}});var ID=z((Bj1,Dx)=>{/*!
 * Module dependencies.
 */var GJ1=K1();class IC extends GJ1{constructor(F,A){let B=Array.isArray(A)?"array":"primitive value";super("Tried to set nested object field `"+F+`\` to ${B} \``+A+"`");this.path=F}}Object.defineProperty(IC.prototype,"name",{value:"ObjectExpectedError"});Dx.exports=IC});var ND=z((Dj1,Xx)=>{/*!
 * Module dependencies.
 */var CJ1=K1();class NC extends CJ1{constructor(F,A,B){super('Parameter "'+A+'" to '+B+'() must be an object, got "'+(F==null?F:F.toString())+'" (type '+typeof F+")")}}Object.defineProperty(NC.prototype,"name",{value:"ObjectParameterError"});Xx.exports=NC});var Jx=z((Xj1,Zx)=>{/*!
 * Module dependencies.
 */var WJ1=K1();class MC extends WJ1{constructor(F){super("Can't validate() the same doc multiple times in parallel. Document: "+F._doc._id)}}Object.defineProperty(MC.prototype,"name",{value:"ParallelValidateError"});/*!
 * exports
 */Zx.exports=MC});var jC=z((Zj1,Yx)=>{Yx.exports=function F(A){let B={},D=Object.keys(A);for(let X of D){if(X.indexOf(".")===-1){B[X]=1;continue}let Z=X.split("."),J=Z[0];for(let $=0;$<Z.length;++$)if(B[J]=1,$+1<Z.length)J=J+"."+Z[$+1]}return B}});var Ex=z((Jj1,$x)=>{$x.exports=function F(A){if(A==null||typeof A!=="object")return!1;return A.$slice==null&&A.$elemMatch==null&&A.$meta==null&&A.$==null}});var MD=z((Yj1,Gx)=>{var HJ1=Ex();Gx.exports=function F(A,B,D,X,Z,J,$){let Y=Object.keys(A.$__schema.paths),E=Y.length,G=$?.skipParentChangeTracking;for(let C=0;C<E;++C){let W,H="",q=Y[C];if(q==="_id"&&A.$__.skipId)continue;let Q=A.$__schema.paths[q],K=Q.splitPath(),U=K.length;if(K[U-1]==="$*")continue;let R=!1,w=A._doc;for(let V=0;V<U;++V){if(w==null)break;let N=K[V];if(H+=(!H.length?"":".")+N,D===!0){if(H in B)break}else if(D===!1&&B&&!R){let T=Q.$isSingleNested||Q.$isMongooseDocumentArray;if(H in B&&!HJ1(B[H])||V===U-1&&T&&X!=null&&X[H])R=!0;else if(X!=null&&!X[H])break}if(V===U-1){if(w[N]!==void 0)break;if(Z!=null){if(typeof Q.defaultValue==="function"){if(!Q.defaultValue.$runBeforeSetters&&Z)break;if(Q.defaultValue.$runBeforeSetters&&!Z)break}else if(!Z)continue}if(J&&J[H])break;if(B&&D!==null){if(D===!0){if(q in B)continue;try{W=Q.getDefault(A,!1)}catch(T){A.invalidate(q,T);break}if(typeof W!=="undefined")w[N]=W,TC(A,q,G)}else if(R){try{W=Q.getDefault(A,!1)}catch(T){A.invalidate(q,T);break}if(typeof W!=="undefined")w[N]=W,TC(A,q,G)}}else{try{W=Q.getDefault(A,!1)}catch(T){A.invalidate(q,T);break}if(typeof W!=="undefined")w[N]=W,TC(A,q,G)}}else w=w[N]}}};/*!
 * ignore
 */function TC(F,A,B){if(F.$__.activePaths.default(A),!B&&F.$isSubdocument&&F.$isSingleNested&&F.$parent()!=null)F.$parent().$__.activePaths.default(F.$__pathRelativeToParent(A))}});var jD=z(($j1,Wx)=>{/*!
 * ignore
 */Wx.exports=function F(A,B,D){D=D||{};let X=D.skipDocArrays,Z=0;if(!A)return Z;for(let J of Object.keys(A.$__.activePaths.getStatePaths("modify"))){if(X){if(A.$__schema.path(J)?.$isMongooseDocumentArray)continue}if(J.startsWith(B+".")){if(A.$__.activePaths.clearPath(J),++Z,A.$isSubdocument)Cx(A,J)}}return Z};function Cx(F,A,B=new Set){if(B.has(F))throw new Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");let D=F.$parent(),X=F.$__pathRelativeToParent(void 0,!1)+"."+A;if(D.$__.activePaths.clearPath(X),D.$isSubdocument)Cx(D,X,B)}});var kD=z((wJ1)=>{var qJ1=C0(),zJ1=t().documentSchemaSymbol,QJ1=i6().internalToObjectOptions,qx=B1(),J8,KJ1=t().getSymbol,TD=t().scopeSymbol,Hx=qx.isPOJO;/*!
 * exports
 */wJ1.compile=zx;wJ1.defineKey=Qx;var UJ1=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),VJ1=Object.freeze({noDottedPath:!0});function zx(F,A,B,D){J8=J8||W3();let X=D.typeKey;for(let Z of Object.keys(F)){let J=F[Z],Y=Hx(J)&&qx.hasOwnKeys(J)&&(!J[X]||X==="type"&&Hx(J.type)&&J.type.type)?J:null;Qx({prop:Z,subprops:Y,prototype:A,prefix:B,options:D})}}function Qx({prop:F,subprops:A,prototype:B,prefix:D,options:X}){J8=J8||W3();let Z=(D?D+".":"")+F;D=D||"";let J=D?Object.freeze({}):VJ1;if(A)Object.defineProperty(B,F,{enumerable:!0,configurable:!0,get:function(){let $=this;if(!this.$__.getters)this.$__.getters={};if(!this.$__.getters[Z]){let Y=Object.create(J8.prototype,LJ1(this));if(!D)Y.$__[TD]=this;Y.$__.nestedPath=Z,Object.defineProperty(Y,"schema",{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty(Y,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty(Y,zJ1,{enumerable:!1,configurable:!0,writable:!1,value:B.schema}),Object.defineProperty(Y,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return qJ1($.get(Z,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(Y,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return $.get(Z,null,{virtuals:this?.schema?.options?.toObject?.virtuals||null})}}),Object.defineProperty(Y,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return $.get(Z,null,{virtuals:this?.schema?.options?.toJSON?.virtuals||null})}}),Object.defineProperty(Y,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(Y,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(Z,null,UJ1)||{}).length===0}}),Object.defineProperty(Y,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),zx(A,Y,Z,X),this.$__.getters[Z]=Y}return this.$__.getters[Z]},set:function($){if($?.$__isNested)$=$.$__get();else if($ instanceof J8&&!$.$__isNested)$=$.$toObject(QJ1);(this.$__[TD]||this).$set(Z,$)}});else Object.defineProperty(B,F,{enumerable:!0,configurable:!0,get:function(){return this[KJ1].call(this.$__[TD]||this,Z,null,J)},set:function($){this.$set.call(this.$__[TD]||this,Z,$)}})}function LJ1(F){let A={};return Object.getOwnPropertyNames(F).forEach(function(B){if(["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(B)===-1)return;A[B]=Object.getOwnPropertyDescriptor(F,B),A[B].enumerable=!1}),A}});var Ux=z((Gj1,Kx)=>{Kx.exports=function F(A){if(A==null)return null;return Object.keys(A)[0]}});var uD=z((jJ1)=>{/*!
 * Module dependencies.
 */var IJ1=$1().Binary,Vx=B2(),Lx=qF(),NJ1=E6(),MJ1=c("util");jJ1.flatten=wx;jJ1.modifiedPaths=Rx;/*!
 * ignore
 */function wx(F,A,B,D){let X;if(F&&Lx(F)&&!Buffer.isBuffer(F))X=Object.keys(F.toObject({transform:!1,virtuals:!1})||{});else X=Object.keys(F||{});let Z=X.length,J={};A=A?A+".":"";for(let $=0;$<Z;++$){let Y=X[$],E=F[Y];J[A+Y]=E;let G=D?.path?.(A+Y),C=D?.nested?.[A+Y];if(G?.instance==="Mixed")continue;if(Px(E)){if(B?.skipArrays&&Array.isArray(E))continue;let W=wx(E,A+Y,B,D);for(let H in W)J[H]=W[H];if(Array.isArray(E))J[A+Y]=E}if(C){let W=Object.keys(D.paths);for(let H of W)if(H.startsWith(A+Y+".")&&!Object.hasOwn(J,H))J[H]=void 0}}return J}/*!
 * ignore
 */function Rx(F,A,B,D=null){if(F==null||typeof F!=="object")return;if(D==null)D={raw:{update:F,path:A},trace:new WeakSet};if(D.trace.has(F))throw new NJ1(`a circular reference in the update value, updateValue:
${MJ1.inspect(D.raw.update,{showHidden:!1,depth:1})}
updatePath: '${D.raw.path}'`);D.trace.add(F);let X=Object.keys(F||{}),Z=X.length;B=B||{},A=A?A+".":"";for(let J=0;J<Z;++J){let $=X[J],Y=F[$],E=A+$;if(B[E]=!0,!Buffer.isBuffer(Y)&&Lx(Y))Y=Y.toObject({transform:!1,virtuals:!1});if(Px(Y))Rx(Y,A+$,B,D)}return D.trace.delete(F),B}/*!
 * ignore
 */function Px(F){return F&&typeof F==="object"&&!(F instanceof Date)&&!Vx(F,"ObjectId")&&(!Array.isArray(F)||F.length!==0)&&!(F instanceof Buffer)&&!Vx(F,"Decimal128")&&!(F instanceof IJ1)}});var K0=z((Wj1,Ix)=>{Ix.exports=function F(A,B,D){let X,Z=!1;if(typeof B==="string"){if(B.indexOf(".")===-1){let Y=kC(A,B);if(Y==null)return D;return Y}X=B.split(".")}else if(Z=!0,X=B,X.length===1){let Y=kC(A,X[0]);if(Y==null)return D;return Y}let J=B,$=A;for(let Y of X){if($==null)return D;if(!Z&&$[J]!=null)return $[J];if($=kC($,Y),!Z)J=J.substr(Y.length+1)}return $==null?D:$};function kC(F,A){if(F==null)return F;if(F instanceof Map)return F.get(A);return F[A]}});var uC=z((Hj1,Mx)=>{var Nx=B2();Mx.exports=function F(A,B){if(typeof A==="string"&&typeof B==="string")return A===B;if(typeof A==="number"&&typeof B==="number")return A===B;if(Nx(A,"ObjectId")&&Nx(B,"ObjectId"))return A.toString()===B.toString();return!1}});var OD=z((qj1,jx)=>{var uJ1=uC();jx.exports=function F(A,B){if(A?.discriminators==null)return null;for(let D of Object.keys(A.discriminators)){let X=A.discriminators[D];if(X.discriminatorMapping==null)continue;if(uJ1(X.discriminatorMapping.value,B))return X}return null}});var kx=z((zj1,Tx)=>{var OJ1=K0(),SJ1=OD();Tx.exports=function F(A,B,D){D=D||{};let X=D.typeOnly,Z=Array.isArray(B)?B:B.indexOf(".")===-1?[B]:B.split("."),J=null,$="adhocOrUndefined",Y=SJ1(A.schema,A.get(A.schema.options.discriminatorKey))||A.schema;for(let E=0;E<Z.length;++E){let G=Z.slice(0,E+1).join(".");if(J=Y.path(G),J==null){$="adhocOrUndefined";continue}if(J.instance==="Mixed")return X?"real":J;if($=Y.pathType(G),(J.$isSingleNested||J.$isMongooseDocumentArrayElement)&&J.schema.discriminators!=null){let C=J.schema.discriminators,W=A.get(G+"."+OJ1(J,"schema.options.discriminatorKey"));if(W==null||C[W]==null)continue;let H=Z.slice(E+1).join(".");return F(A.get(G),H,D)}}return X?$:J}});var Ox=z((Qj1,ux)=>{var xJ1=K0();ux.exports=function F(A,B,D){let X=D!=null?Object.keys(xJ1(A.tree,D,{})):Object.keys(A.tree),Z=new Set(Object.keys(B)),J;if(Z.size>1){J=new Set;for(let $ of X)if(Z.has($))J.add($);for(let $ of Z)if(!J.has($))J.add($);J=Array.from(J)}else J=Array.from(Z);return J}});var xx=z((Kj1,Sx)=>{Sx.exports=function F(A,B){if(B.length===1)return;let D=B[0],X=void 0;for(let Z=0;Z<B.length-1;++Z){let J=A.path(D);if(J?.schema)X=J.schema.options.strict,A=J.schema,D=J.$isMongooseDocumentArray&&!isNaN(B[Z+1])?"":B[Z+1];else D+=D.length?"."+B[Z+1]:B[Z+1]}return X}});var SD=z((Uj1,_x)=>{var _J1=B1(),fJ1=new Set(["__index","__parentArray","_doc"]);_x.exports=function F(A,B){if(_J1.isPOJO(A)&&A.$__!=null&&A._doc!=null){if(B){let D={};for(let X of Object.keys(A)){if(typeof X==="symbol")continue;if(X[0]==="$")continue;if(fJ1.has(X))continue;D[X]=A[X]}return{...A._doc,...D}}return A._doc}return A}});var Y8=z((Vj1,fx)=>{/*!
 * ignore
 */fx.exports=function F(A){if(A==null)return!0;if(typeof A==="object")return!("$meta"in A)&&!("$slice"in A);return!0}});var $8=z((Lj1,gx)=>{var gJ1=Y8(),bJ1=o7();/*!
 * ignore
 */gx.exports=function F(A){if(A==null)return null;let B=Object.keys(A),D=null;if(B.length===1&&B[0]==="_id")D=!A._id;else for(let X=0;X<B.length;++X){let Z=B[X];if(Z!=="_id"&&gJ1(A[Z])){if(D=bJ1(A[Z])?F(A[Z])??D:!A[Z],D!=null)break}}return D}});var OC=z((wj1,bx)=>{var yJ1=Y8();bx.exports=function F(A,B){if(A==null)return!1;if(B==="_id")return A._id===0;let D=Object.keys(A),X=null;for(let Z of D)if(yJ1(A[Z])){X=A[B]===1?"inclusive":"exclusive";break}if(X==="inclusive")return A[B]!==1;if(X==="exclusive")return A[B]===0;return!1}});var SC=z((Rj1,yx)=>{var hJ1=B1();yx.exports=function F(A,B){if(A._doc._id==null||B==null||B.length===0)return;let D=String(A._doc._id);for(let X of B){if(X.isVirtual)continue;let J=X.path.split(".");for(let $=0;$<J.length-1;++$){let Y=J.slice(0,$+1).join("."),E=J.slice($+1).join("."),G=A.get(Y);if(G==null)continue;if(hJ1.isMongooseDocumentArray(G)){for(let C=0;C<G.length;++C)if(G[C])G[C].populated(E,X._docs[D]==null?void 0:X._docs[D][C],X);break}}}}});var xC=z((Pj1,vx)=>{var{isPOJO:vJ1}=B1();vx.exports=hx;function hx(F){let A=Object.keys(F),B=A.length,D,X,Z;while(B--){if(X=A[B],Z=F[X],vJ1(Z))F[X]=hx(Z);if(F[X]===void 0){delete F[X];continue}D=!0}return D?F:void 0}});var _C=z((Ij1,mx)=>{var mJ1=/\./g;mx.exports=function F(A){if(A.indexOf(".")===-1)return[A];let B=A.split(mJ1),D=B.length,X=new Array(D),Z="";for(let J=0;J<D;++J)Z+=Z.length!==0?"."+B[J]:B[J],X[J]=Z;return X}});var cx=z((Nj1,dx)=>{dx.exports=function F(A,B,D,X,Z){let J=Object.keys(A).reduce((Y,E)=>Y||E.startsWith(B+"."),!1),$=B+"."+D.options.discriminatorKey;if(!J&&Z.length===1&&Z[0]===$)X.splice(X.indexOf($),1)}});var M6=z((Mj1,lx)=>{var dJ1=uC();lx.exports=function F(A,B){if(A==null)return null;for(let D of Object.keys(A)){let X=A[D];if(X.schema&&X.schema.discriminatorMapping&&dJ1(X.schema.discriminatorMapping.value,B))return X}return null}});var xD=z((jj1,px)=>{/*!
 * ignore
 */px.exports=function F(A,B){let D=B.split("."),X="",Z,J,$;for(let Y=0;Y<D.length;++Y)if(X+=X.length?".":""+D[Y],A[X]){J=Object.keys(A),$=J.length;for(Z=0;Z<$;++Z)if(J[Y].indexOf(X+".")===0&&J[Y].indexOf(B)!==0)continue;return!0}return!1}});var UF=z((sJ1)=>{/*!
 * Module dependencies
 */var ix=RC(),cJ1=cx(),nx=K0(),lJ1=M6(),pJ1=Y8(),iJ1=C0(),nJ1=xD();sJ1.preparePopulationOptionsMQ=function F(A,B){let D=A._mongooseOptions.populate,X=Object.keys(D).reduce(($,Y)=>$.concat([D[Y]]),[]);if(B.lean!=null)X.filter(($)=>$?.options?.lean==null).forEach(aJ1(B.lean));let Z=A?.options?.session||null;if(Z!=null)X.forEach(($)=>{if($.options==null){$.options={session:Z};return}if(!("session"in $.options))$.options.session=Z});let J=A._fieldsForExec();for(let $=0;$<X.length;++$)if(X[$]instanceof ix)X[$]=new ix({...X[$],_queryProjection:J,_localModel:A.model});else X[$]._queryProjection=J,X[$]._localModel=A.model;return X};sJ1.createModel=function F(A,B,D,X,Z){A.hooks.execPreSync("createModel",B);let J=A.schema?A.schema.discriminatorMapping:null,$=J?.isRoot?J.key:null,Y=B[$];if($&&Y&&A.discriminators){let G=A.discriminators[Y]||lJ1(A.discriminators,Y);if(G){let C=iJ1(X);return sJ1.applyPaths(C,G.schema),new G(void 0,C,{skipId:!0})}}let E={skipId:!0,isNew:!1,willInit:!0};if(Z!=null&&"defaults"in Z)E.defaults=Z.defaults;return new A(void 0,D,E)};/*!
 * ignore
 */sJ1.createModelAndInit=function F(A,B,D,X,Z,J,$){let Y=J?{populated:J}:void 0,E=sJ1.createModel(A,B,D,X,Z);try{E.$init(B,Y,$)}catch(G){$(G,E)}};/*!
 * ignore
 */sJ1.applyPaths=function F(A,B,D){let X,Z,J=new Set;if(A){Z=Object.keys(A);let W=[];for(let H=0;H<Z.length;++H){let q=Z[H];if(Z[H][0]!=="-")continue;if(delete A[q],q==="-_id")A._id=0;else W.push(q.slice(1))}Z=Object.keys(A);for(let H=0;H<Z.length;++H){if(Z[H][0]==="+")continue;let q=A[Z[H]];if(!pJ1(q))continue;if(Z[H]==="_id"&&Z.length>1)continue;if(Z[H]===B.options.discriminatorKey&&Z.length>1&&q!=null&&!q)continue;X=!q;break}for(let H of W){let q=B.path(H);if(!q?.selected||X!==!1)A[H]=0,X=!0;else if(q?.selected&&X===!1)J.add(H)}}let $=[],Y=[],E=[];switch(G(B),X){case!0:for(let W of Y)A[W]=0;break;case!1:if(B?.paths._id?.options?.select===!1)A._id=0;for(let W of $){if(J.has(W))continue;if(nJ1(A,W))continue;A[W]=A[W]||1}break;case void 0:if(A==null)break;for(let W of Object.keys(A||{}))if(W.startsWith("+"))delete A[W];for(let W of Y){if(A[W]!=null)continue;A[W]=0}break}function G(W,H){if(H||(H=""),E.indexOf(W)!==-1)return[];E.push(W);let q=[];return W.eachPath(function(Q,K){if(H)Q=H+"."+Q;if(K.$isSchemaMap||Q.endsWith(".$*")){let R="+"+Q,w=A&&R in A;if(K.options?.select===!1&&!w)Y.push(Q);return}let U=C(Q,K);if(U==null&&!Array.isArray(K)&&K.$isMongooseArray&&!K.$isMongooseDocumentArray)U=C(Q,K.embeddedSchemaType);if(U!=null)q.push(U);if(K.schema){let R=G(K.schema,Q);if(X===!1)cJ1(A,Q,K.schema,$,R)}}),E.pop(),q}function C(W,H){if(A==null)return;if(typeof H.selected!=="boolean")return;if(H.selected===!1&&A[W]){if(D)A[W]=0;return}if(!X&&H.selected&&W===B.options.discriminatorKey&&A[W]!=null&&!A[W]){delete A[W];return}if(X===!1&&H.selected&&A[W]!=null&&!A[W]){delete A[W];return}let q="+"+W;if(A&&q in A){if(delete A[q],X===!1&&Z.length>1&&!~Z.indexOf(W)&&!D)A[W]=1;else if(X==null&&D&&H.selected===!1)A[W]=0;return}let K=W.split("."),U="";for(let R=0;R<K.length;++R)if(U+=U.length?"."+K[R]:K[R],Y.indexOf(U)!==-1)return;if(!X&&(H?.options?.$skipDiscriminatorCheck||!1)){let R="";for(let w=0;w<K.length;++w){R+=(R.length===0?"":".")+K[w];let V=nx(A,R,!1)||nx(A,R+".$",!1);if(V&&typeof V!=="object")return}}return(H.selected?$:Y).push(W),W}};function aJ1(F){return function(A){if(A.options||(A.options={}),Array.isArray(F?.virtuals))F=Object.assign({},F),F.virtuals=F.virtuals.filter((B)=>typeof B==="string"&&B.startsWith(A.path+".")).map((B)=>B.slice(A.path.length+1));A.options.lean=F}}});var fC=z((kj1,sx)=>{function eJ1(F){return!!F&&(typeof F==="object"||typeof F==="function")&&typeof F.then==="function"}sx.exports=eJ1});var tx=z((uj1,rx)=>{rx.exports=function F(A,B,D){let X=B[0],Z=D,J=A;for(let $=0;$<B.length-1;++$){let Y=Z.path(X);if(Y?.schema){let E=J.get(X);if(Z=Y.schema,X=B[$+1],Array.isArray(E)&&!isNaN(X))E=E[X],X="";if(E==null)break;J=E}else X+=X.length?"."+B[$+1]:B[$+1]}return J}});var _D=z((Oj1,F_)=>{var f3=W3(),FY1=i6().internalToObjectOptions,ox=c("util"),ex=B1();F_.exports=c1;function c1(F,A,B,D){if(B!=null){let Z={isNew:B.isNew};if("defaults"in B.$__)Z.defaults=B.$__.defaults;D=Object.assign(Z,D)}if(D?.path!=null)this.$basePath=D.path;if(D?.pathRelativeToParent!=null)this.$pathRelativeToParent=D.pathRelativeToParent;let X=D;if(D?.path!=null)X=Object.assign({},D),delete X.path;f3.call(this,F,A,X),delete this.$__.priorDoc}c1.prototype=Object.create(f3.prototype);Object.defineProperty(c1.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(c1.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});/*!
 * ignore
 */c1.prototype.toBSON=function(){return this.toObject(FY1)};c1.prototype.save=async function F(A){if(A=A||{},!A.suppressWarning)ex.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app.");return await this.$__save()};c1.prototype.$__fullPath=function(F){if(!this.$__.fullPath)this.ownerDocument();return F?this.$__.fullPath+"."+F:this.$__.fullPath};c1.prototype.$__pathRelativeToParent=function(F){if(this.$pathRelativeToParent!=null)return F==null?this.$pathRelativeToParent:this.$pathRelativeToParent+"."+F;if(F==null)return this.$basePath;if(!this.$basePath)return F;return[this.$basePath,F].join(".")};c1.prototype.$__save=async function F(){try{await this._execDocumentPreHooks("save")}catch(A){await this._execDocumentPostHooks("save",A);return}await this._execDocumentPostHooks("save")};/*!
 * ignore
 */c1.prototype.$isValid=function(F){let A=this.$parent(),B=this.$__pathRelativeToParent(F);if(A!=null&&B!=null)return A.$isValid(B);return f3.prototype.$isValid.call(this,F)};/*!
 * ignore
 */c1.prototype.markModified=function(F){f3.prototype.markModified.call(this,F);let A=this.$parent();if(A==null)return;let B=this.$__pathRelativeToParent(F);if(B==null)return;let D=this.$__pathRelativeToParent().replace(/\.$/,"");if(A.isDirectModified(D)||this.isNew)return;this.$__parent.markModified(B,this)};/*!
 * ignore
 */c1.prototype.isModified=function(F,A,B){let D=this.$parent();if(D!=null){if(Array.isArray(F)||typeof F==="string")F=Array.isArray(F)?F:F.split(" "),F=F.map((X)=>this.$__pathRelativeToParent(X)).filter((X)=>X!=null);else if(!F)F=this.$__pathRelativeToParent();return D.$isModified(F,A,B)}return f3.prototype.isModified.call(this,F,A,B)};c1.prototype.$markValid=function(F){f3.prototype.$markValid.call(this,F);let A=this.$parent(),B=this.$__pathRelativeToParent(F);if(A!=null&&B!=null)A.$markValid(B)};/*!
 * ignore
 */c1.prototype.invalidate=function(F,A,B){f3.prototype.invalidate.call(this,F,A,B);let D=this.$parent(),X=this.$__pathRelativeToParent(F);if(D!=null&&X!=null)D.invalidate(X,A,B);else if(A.kind==="cast"||A.name==="CastError"||X==null)throw A;return this.ownerDocument().$__.validationError};/*!
 * ignore
 */c1.prototype.$ignore=function(F){f3.prototype.$ignore.call(this,F);let A=this.$parent(),B=this.$__pathRelativeToParent(F);if(A!=null&&B!=null)A.$ignore(B)};c1.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let F=this,A=[],B=new Set([F]);while(!0){if(typeof F.$__pathRelativeToParent!=="function")break;A.unshift(F.$__pathRelativeToParent(void 0,!0));let D=F.$parent();if(D==null)break;if(F=D,B.has(F))throw new Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");B.add(F)}return this.$__.fullPath=A.join("."),this.$__.ownerDocument=F,this.$__.ownerDocument};/*!
 * ignore
 */c1.prototype.$__fullPathWithIndexes=function(){let F=this,A=[],B=new Set([F]);while(!0){if(typeof F.$__pathRelativeToParent!=="function")break;A.unshift(F.$__pathRelativeToParent(void 0,!1));let D=F.$parent();if(D==null)break;if(F=D,B.has(F))throw new Error("Infinite subdocument loop: subdoc with _id "+F._id+" is a parent of itself");B.add(F)}return A.join(".")};c1.prototype.parent=function(){return this.$__parent};c1.prototype.$parent=c1.prototype.parent;/*!
 * Sets this sub-documents parent document.
 *
 * @api private
 */c1.prototype.$__setParent=function F(A){this.$__parent=A};c1.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};c1.prototype.deleteOne=function F(A){if(AY1(this),!A?.noop){this.$__removeFromParent();let B=this.ownerDocument();B.$__.removedSubdocs=B.$__.removedSubdocs||[],B.$__.removedSubdocs.push(this)}};/*!
 * ignore
 */c1.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};c1.prototype.inspect=function(){return this.toObject()};if(ox.inspect.custom)c1.prototype[ox.inspect.custom]=c1.prototype.inspect;c1.prototype.$toObject=function F(A,B){let D=f3.prototype.$toObject.call(this,A,B);if(ex.hasOwnKeys(D)===!1&&A?._calledWithOptions!=null){if((A._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??A.minimize)&&!this.constructor.$__required)return}return D};function AY1(F){let A=F.ownerDocument();function B(){A.$removeListener("save",B),A.$removeListener("deleteOne",B),F.emit("deleteOne",F),F.constructor.emit("deleteOne",F)}A.$on("save",B),A.$on("deleteOne",B)}});var G8=z((Sj1,D_)=>{/*!
 * Module dependencies.
 */var A_=c("events").EventEmitter,B_=_D(),BY1=B1(),E8=t().documentArrayParent;function _2(F,A,B,D,X){if(BY1.isMongooseDocumentArray(A))this.__parentArray=A,this[E8]=A.$parent();else this.__parentArray=void 0,this[E8]=void 0;this.$setIndex(X),this.$__parent=this[E8];let Z;if(typeof B==="object"&&B!=null)Z={isNew:!0,...B},B=void 0;else Z={isNew:!0};B_.call(this,F,D,this[E8],Z)}/*!
 * Inherit from Subdocument
 */_2.prototype=Object.create(B_.prototype);_2.prototype.constructor=_2;Object.defineProperty(_2.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(_2.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let F in A_.prototype)_2[F]=A_.prototype[F];/*!
 * ignore
 */_2.prototype.$setIndex=function(F){if(this.__index=F,this.$__?.validationError!=null){let A=Object.keys(this.$__.validationError.errors);for(let B of A)this.invalidate(B,this.$__.validationError.errors[B])}};/*!
 * ignore
 */_2.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};/*!
 * ignore
 */_2.prototype.$__removeFromParent=function(){let F=this._doc._id;if(!F)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:F})};_2.prototype.$__fullPath=function(F,A){if(this.__index==null)return null;if(!this.$__.fullPath)this.ownerDocument();if(A)return F?this.$__.fullPath+"."+F:this.$__.fullPath;return F?this.$__.fullPath+"."+this.__index+"."+F:this.$__.fullPath+"."+this.__index};_2.prototype.$__pathRelativeToParent=function(F,A){if(this.__index==null||!this.__parentArray?.$path)return null;if(A)return F==null?this.__parentArray.$path():this.__parentArray.$path()+"."+F;if(F==null)return this.__parentArray.$path()+"."+this.__index;return this.__parentArray.$path()+"."+this.__index+"."+F};_2.prototype.$parent=function(){return this[E8]};/*!
 * Sets this sub-documents parent document.
 *
 * @api private
 */_2.prototype.$__setParent=function F(A){this[E8]=A};_2.prototype.parentArray=function(){return this.__parentArray};/*!
 * Module exports.
 */D_.exports=_2});var bD=z((xj1,C_)=>{var yC=W3(),gC=G8(),DY1=K1(),X_=jD(),XY1=C0(),Z_=i6().internalToObjectOptions,$_=C6(),p0=B1(),bC=B2(),ZY1=t().arrayAtomicsBackupSymbol,a6=t().arrayAtomicsSymbol,k4=t().arrayParentSymbol,u4=t().arrayPathSymbol,g3=t().arraySchemaSymbol,E_=t().populateModelSymbol,JY1=Symbol("mongoose#Array#sliced"),J_=Array.prototype.push;/*!
 * ignore
 */var gD={$__getAtomics(){let F=[],A=Object.keys(this[a6]||{}),B=A.length,D=Object.assign({},Z_,{_isNested:!0});if(B===0)return F[0]=["$set",this.toObject(D)],F;while(B--){let X=A[B],Z=this[a6][X];if(p0.isMongooseObject(Z))Z=Z.toObject(D);else if(Array.isArray(Z))Z=this.toObject.call(Z,D);else if(Array.isArray(Z?.$each))Z.$each=this.toObject.call(Z.$each,D);else if(typeof Z?.valueOf==="function")Z=Z.valueOf();if(X==="$addToSet")Z={$each:Z};F.push([X,Z])}return F},getAtomics(){return this.$__getAtomics()},clearAtomics(){this[ZY1]=this[a6],this[a6]={}},$atomics(){/*!
   * ignore
   */return this[a6]},$parent(){/*!
   * ignore
   */return this[k4]},$path(){/*!
   * ignore
   */return this[u4]},$schemaType(){/*!
   * ignore
   */return this[g3]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let F=this.__array;if(F._shifted)return;return F._shifted=!0,[].shift.call(F)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),this._popped)return;return this._popped=!0,[].pop.call(this)},$schema(){/*!
   * ignore
   */return this[g3]},_cast(F){let A=!1,B,D=this[k4];if(D)A=D.$populated(this[u4],!0);if(A&&F!=null){if(B=A.options[E_],B==null)throw new DY1("No populated model found for path `"+this[u4]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");if(Buffer.isBuffer(F)||bC(F,"ObjectId")||!p0.isObject(F))F={_id:F};if(F.schema?.discriminatorMapping?.key===void 0)F=new B(F);return this[g3].embeddedSchemaType.applySetters(F,D,!0)}return this[g3].embeddedSchemaType.applySetters(F,D,!1)},_mapCast(F,A){return this._cast(F,this.length+A)},_markModified(F){let A=this[k4],B;if(A){if(B=this[u4],arguments.length)B=B+"."+F;if(B!=null&&B.endsWith(".$"))return this;A.markModified(B,arguments.length!==0?F:A)}return this},_registerAtomic(F,A){if(this[JY1])return;if(F==="$set")return this[a6]={$set:A},X_(this[k4],this[u4]),this._markModified(),this;let B=this[a6];if(F==="$pop"&&!("$pop"in B)){let X=this;this[k4].once("save",function(){X._popped=X._shifted=null})}if(B.$set||p0.hasOwnKeys(B)&&!(F in B))return this[a6]={$set:this},this;let D;if(F==="$pullAll"||F==="$addToSet")B[F]||(B[F]=[]),B[F]=B[F].concat(A);else if(F==="$pullDocs"){let X=B.$pull||(B.$pull={});if(A[0]instanceof gC)D=X.$or||(X.$or=[]),Array.prototype.push.apply(D,A.map((Z)=>{return Z.toObject({transform:(J,$)=>{if(Z==null||Z.$__==null)return $;return Object.keys(Z.$__.activePaths.getStatePaths("default")).forEach((Y)=>{$_.unset(Y,$),G_($,Y)}),$},virtuals:!1})}));else D=X._id||(X._id={$in:[]}),D.$in=D.$in.concat(A)}else if(F==="$push")if(B.$push=B.$push||{$each:[]},A!=null&&p0.hasUserDefinedProperty(A,"$each"))B.$push=A;else if(A.length===1)B.$push.$each.push(A[0]);else if(A.length<1e4)B.$push.$each.push(...A);else for(let X of A)B.$push.$each.push(X);else B[F]=A;return this},addToSet(){fD(this,arguments),Y_(this,arguments);let F=[].map.call(arguments,this._mapCast,this),A=[],B="";if(F[0]instanceof gC)B="doc";else if(F[0]instanceof Date)B="date";else if(bC(F[0],"ObjectId"))B="ObjectId";let D=p0.isMongooseArray(F)?F.__array:F,X=p0.isMongooseArray(this)?this.__array:this;return D.forEach(function(Z){let J,$=+Z;switch(B){case"doc":J=this.some(function(Y){return Y.equals(Z)});break;case"date":J=this.some(function(Y){return+Y===$});break;case"ObjectId":J=this.find((Y)=>Y.toString()===Z.toString());break;default:J=~this.indexOf(Z);break}if(!J)this._markModified(),X.push(Z),this._registerAtomic("$addToSet",Z),[].push.call(A,Z)},this),A},hasAtomics(){if(!p0.isPOJO(this[a6]))return 0;return Object.keys(this[a6]).length},includes(F,A){return this.indexOf(F,A)!==-1},indexOf(F,A){if(bC(F,"ObjectId"))F=F.toString();A=A==null?0:A;let B=this.length;for(let D=A;D<B;++D)if(F==this[D])return D;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let F=[].map.call(arguments,this._mapCast,this);this._markModified();let A=[].push.apply(this,F);return this._registerAtomic("$set",this),A},pop(){this._markModified();let F=[].pop.call(this);return this._registerAtomic("$set",this),F},pull(){let F=[].map.call(arguments,(X,Z)=>this._cast(X,Z,{defaults:!1}),this),A=this;if(p0.isMongooseArray(A))A=A.__array;let B=A.length,D;this._markModified();while(B--)if(D=A[B],D instanceof yC){if(F.some(function(Z){return D.equals(Z)}))A.splice(B,1)}else if(~this.indexOf.call(F,D))A.splice(B,1);if(F[0]instanceof gC)this._registerAtomic("$pullDocs",F.map(function(X){let Z=X.$__getValue("_id");if(Z===void 0||X.$isDefault("_id"))return X;return Z}));else this._registerAtomic("$pullAll",F);if(X_(this[k4],this[u4])>0)this._registerAtomic("$set",this);return this},push(){let F=arguments,A=F,B=F[0]!=null&&p0.hasUserDefinedProperty(F[0],"$each"),D=p0.isMongooseArray(this)?this.__array:this;if(B)A=F[0],F=F[0].$each;if(this[g3]==null)return J_.apply(this,F);fD(this,F),Y_(this,F),F=[].map.call(F,this._mapCast,this);let X,Z=this[a6];if(this._markModified(),B)if(A.$each=F,(Z.$push&&Z.$push.$each&&Z.$push.$each.length||0)!==0&&Z.$push.$position!=A.$position){if(A.$position!=null)[].splice.apply(D,[A.$position,0].concat(F)),X=D.length;else X=[].push.apply(D,F);this._registerAtomic("$set",this)}else if(A.$position!=null)[].splice.apply(D,[A.$position,0].concat(F)),X=this.length;else X=[].push.apply(D,F);else A=F,X=J_.apply(D,F);return this._registerAtomic("$push",A),X},remove(){return this.pull.apply(this,arguments)},set(F,A,B){let D=this.__array;if(B)return D[F]=A,this;let X=gD._cast.call(this,A,F);return gD._markModified.call(this,F),D[F]=X,this},shift(){let F=p0.isMongooseArray(this)?this.__array:this;this._markModified();let A=[].shift.call(F);return this._registerAtomic("$set",this),A},sort(){let F=p0.isMongooseArray(this)?this.__array:this,A=[].sort.apply(F,arguments);return this._registerAtomic("$set",this),A},splice(){let F,A=p0.isMongooseArray(this)?this.__array:this;if(this._markModified(),fD(this,Array.prototype.slice.call(arguments,2)),arguments.length){let B;if(this[g3]==null)B=arguments;else{B=[];for(let D=0;D<arguments.length;++D)B[D]=D<2?arguments[D]:this._cast(arguments[D],arguments[0]+(D-2))}F=[].splice.apply(A,B),this._registerAtomic("$set",this)}return F},toBSON(){/*!
   * ignore
   */return this.toObject(Z_)},toObject(F){let A=p0.isMongooseArray(this)?this.__array:this;if(F?.depopulate)return F=XY1(F),F._isNested=!0,[].concat(A).map(function(B){return B instanceof yC?B.toObject(F):B});return[].concat(A)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){fD(this,arguments);let F;if(this[g3]==null)F=arguments;else F=[].map.call(arguments,this._cast,this);let A=p0.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(A,F),this._registerAtomic("$set",this),this.length}};/*!
 * ignore
 */function YY1(F,A){if(!A)return!1;for(let B of F){if(B==null)return!1;let D=B.constructor;if(!(B instanceof yC)||D.modelName!==A&&D.baseModelName!==A)return!1}return!0}/*!
 * Minimize _just_ empty objects along the path chain specified
 * by `parts`, ignoring all other paths. Useful in cases where
 * you want to minimize after unsetting a path.
 *
 * #### Example:
 *
 *     const obj = { foo: { bar: { baz: {} } }, a: {} };
 *     _minimizePath(obj, 'foo.bar.baz');
 *     obj; // { a: {} }
 */function G_(F,A,B){if(typeof A==="string"){if(A.indexOf(".")===-1)return;A=$_.stringToParts(A)}if(B=B||0,B>=A.length)return;if(F==null||typeof F!=="object")return;if(G_(F[A[0]],A,B+1),F[A[0]]!=null&&typeof F[A[0]]==="object"&&p0.hasOwnKeys(F[A[0]])===!1)delete F[A[0]]}/*!
 * ignore
 */function fD(F,A){let B=F==null?null:F[g3]?.embeddedSchemaType?.options?.ref||null;if(F.length===0&&A.length!==0){if(YY1(A,B))F[k4].$populated(F[u4],[],{[E_]:A[0].constructor})}}/*!
 * If `docs` isn't all instances of the right model, depopulate `arr`
 */function Y_(F,A){let B=F==null?null:F[g3]?.embeddedSchemaType?.options?.ref||null,D=F[k4],X=F[u4];if(!B||!D.populated(X))return;for(let Z of A){if(Z==null)continue;if(typeof Z!=="object"||Z instanceof String||Z instanceof Number||Z instanceof Buffer||p0.isMongooseType(Z)){D.depopulate(X);break}}}var $Y1=["filter","flat","flatMap","map","slice"];for(let F of $Y1){if(Array.prototype[F]==null)continue;gD[F]=function(){let A=p0.isMongooseArray(this)?this.__array:this,B=[].concat(A);return B[F].apply(B,arguments)}}C_.exports=gD});var vC=z((Q_,K_)=>{/*!
 * Module dependencies.
 */var hC=bD(),yD=t().arrayAtomicsSymbol,EY1=t().arrayAtomicsBackupSymbol,W_=t().arrayParentSymbol,GY1=t().arrayPathSymbol,H_=t().arraySchemaSymbol,q_=Array.prototype.push,z_=/^\d+$/;function CY1(F,A,B,D){let X;if(Array.isArray(F)){let $=F.length;if($===0)X=new Array;else if($===1)X=new Array(1),X[0]=F[0];else if($<1e4)X=new Array,q_.apply(X,F);else{X=new Array;for(let Y=0;Y<$;++Y)q_.call(X,F[Y])}}else X=[];let Z={[yD]:{},[EY1]:void 0,[GY1]:A,[H_]:D,[W_]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:X};if(F&&F[yD]!=null)Z[yD]=F[yD];if(B?.$__)Z[W_]=B,Z[H_]=D||B.schema.path(A);let J=new Proxy(X,{get:function($,Y){if(Object.hasOwn(Z,Y))return Z[Y];if(Object.hasOwn(hC,Y))return hC[Y];if(D?.virtuals&&Object.hasOwn(D.virtuals,Y))return D.virtuals[Y].applyGetters(void 0,$);if(typeof Y==="string"&&z_.test(Y)&&D?.embeddedSchemaType!=null)return D.embeddedSchemaType.applyGetters(X[Y],B);return X[Y]},set:function($,Y,E){if(typeof Y==="string"&&z_.test(Y))hC.set.call(J,Y,E,!1);else if(Object.hasOwn(Z,Y))Z[Y]=E;else if(D?.virtuals&&Object.hasOwn(D.virtuals,Y))D.virtuals[Y].applySetters(E,$);else X[Y]=E;return!0}});return J}/*!
 * Module exports.
 */K_.exports=Q_=CY1});var w_=z((_j1,L_)=>{var hD=bD(),WY1=W3(),U_=M6(),HY1=i6().internalToObjectOptions,j9=B1(),qY1=B2(),mD=t().arrayParentSymbol,mC=t().arrayPathSymbol,VF=t().arraySchemaSymbol,V_=t().documentArrayParent,zY1=Array.prototype.toString,dC={toBSON(){/*!
   * ignore
   */return this.toObject(HY1)},toString(){return zY1.call(this.__array.map((F)=>{if(F?.$__!=null)return F.toString();return F}))},getArrayParent(){/*!
   * ignore
   */return this[mD]},$schemaType(){/*!
   * ignore
   */return this[VF]},_cast(F,A,B){if(this[VF]==null)return F;let D=this[VF].Constructor;if((D.$isMongooseDocumentArray?j9.isMongooseDocumentArray(F):F instanceof D)||F?.constructor?.baseCasterConstructor===D){if(!(F[V_]&&F.__parentArray))F[V_]=this[mD],F.__parentArray=this;return F.$setIndex(A),F}if(F==null)return null;if(Buffer.isBuffer(F)||qY1(F,"ObjectId")||!j9.isObject(F))F={_id:F};if(F&&D.discriminators&&D.schema&&D.schema.options&&D.schema.options.discriminatorKey)if(typeof F[D.schema.options.discriminatorKey]==="string"&&D.discriminators[F[D.schema.options.discriminatorKey]])D=D.discriminators[F[D.schema.options.discriminatorKey]];else{let J=U_(D.discriminators,F[D.schema.options.discriminatorKey]);if(J)D=J}if(D.$isMongooseDocumentArray)return D.cast(F,this,void 0,void 0,A);let Z=new D(F,this,B,void 0,A);return Z.isNew=!0,Z},id(F){if(F==null)return null;let A=this[VF],B=null;if(A?.schema)B=A.schema.path("_id");else if(A?.casterConstructor?.schema)B=A.casterConstructor.schema.path("_id");let D=null;if(B)try{D=B.cast(F)}catch{}let X;for(let Z of this){if(!Z)continue;if(X=Z.get("_id"),X==null)continue;else if(X instanceof WY1){if(X=X.get("_id"),D!=null&&j9.deepEqual(D,X))return Z;else if(D==null&&(F==X||j9.deepEqual(F,X)))return Z}else if(D!=null&&j9.deepEqual(D,X))return Z;else if(D==null&&(X==F||j9.deepEqual(F,X)))return Z}return null},toObject(F){return[].concat(this.map(function(A){if(A==null)return null;if(typeof A.toObject!=="function")return A;return A.toObject(F)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let F=hD.push.apply(this,arguments);return vD(this),F},pull(){let F=hD.pull.apply(this,arguments);return vD(this),F},shift(){let F=hD.shift.apply(this,arguments);return vD(this),F},splice(){let F=hD.splice.apply(this,arguments);return vD(this),F},inspect(){return this.toObject()},create(F){let A=this[VF].Constructor;if(F&&A.discriminators&&A.schema&&A.schema.options&&A.schema.options.discriminatorKey)if(typeof F[A.schema.options.discriminatorKey]==="string"&&A.discriminators[F[A.schema.options.discriminatorKey]])A=A.discriminators[F[A.schema.options.discriminatorKey]];else{let B=U_(A.discriminators,F[A.schema.options.discriminatorKey]);if(B)A=B}return new A(F,this)},notify(F){/*!
   * ignore
   */let A=this;return function B(D,X){X=X||A;let Z=X.length;while(Z--){if(X[Z]==null)continue;switch(F){case"save":D=A[Z];break;default:break}if(j9.isMongooseArray(X[Z]))B(D,X[Z]);else if(X[Z])X[Z].emit(F,D)}}},set(F,A,B){let D=this.__array;if(B)return D[F]=A,this;let X=dC._cast.call(this,A,F);return dC._markModified.call(this,F),D[F]=X,this},_markModified(F,A){let B=this[mD],D;if(B){if(D=this[mC],arguments.length)if(A!=null){let X=F.__index;D=D+"."+X+"."+A}else D=D+"."+F;if(D!=null&&D.endsWith(".$"))return this;B.markModified(D,arguments.length!==0?F:B)}return this}};L_.exports=dC;function vD(F){let A=F[mD];if(!A||A.$__.populated==null)return;let B=Object.keys(A.$__.populated).filter((D)=>D.startsWith(F[mC]+"."));for(let D of B){let X=D.slice((F[mC]+".").length);if(!Array.isArray(A.$__.populated[D].value))continue;A.$__.populated[D].value=F.map((Z)=>Z.$populated(X))}}});var k9=z((fj1,P_)=>{/*!
 * Module dependencies.
 */var R_=bD(),cC=w_(),lC=t().arrayAtomicsSymbol,QY1=t().arrayAtomicsBackupSymbol,pC=t().arrayParentSymbol,iC=t().arrayPathSymbol,T9=t().arraySchemaSymbol,KY1=Array.prototype.push,UY1=/^\d+$/;function VY1(F,A,B,D){let X=[],Z={[lC]:{},[QY1]:void 0,[iC]:A,[T9]:void 0,[pC]:void 0};if(Array.isArray(F)){if(F[iC]===A&&F[pC]===B)Z[lC]=Object.assign({},F[lC]);F.forEach(($)=>{KY1.call(X,$)})}if(Z[iC]=A,Z.__array=X,B?.$__){Z[pC]=B,Z[T9]=B.$__schema.path(A);while(Z[T9]!=null&&Z[T9].$isMongooseArray&&!Z[T9].$isMongooseDocumentArray)Z[T9]=Z[T9].embeddedSchemaType}let J=new Proxy(X,{get:function($,Y){if(Y==="isMongooseArray"||Y==="isMongooseArrayProxy"||Y==="isMongooseDocumentArray"||Y==="isMongooseDocumentArrayProxy")return!0;if(Object.hasOwn(Z,Y))return Z[Y];if(Object.hasOwn(cC,Y))return cC[Y];if(D?.virtuals&&Object.hasOwn(D.virtuals,Y))return D.virtuals[Y].applyGetters(void 0,$);if(Object.hasOwn(R_,Y))return R_[Y];return X[Y]},set:function($,Y,E){if(typeof Y==="string"&&UY1.test(Y))cC.set.call(J,Y,E,!1);else if(Object.hasOwn(Z,Y))Z[Y]=E;else if(D?.virtuals&&Object.hasOwn(D.virtuals,Y))D.virtuals[Y].applySetters(E,$);else X[Y]=E;return!0}});return J}/*!
 * Module exports.
 */P_.exports=VY1});var W3=z((m_,d_)=>{/*!
 * Module dependencies.
 */var LY1=QC(),aC=c("events").EventEmitter,wY1=sS(),RY1=RD(),l2=E6(),I_=Z8(),PY1=Bx(),O_=ID(),oC=ND(),IY1=Jx(),NY1=u9(),sC=T4(),iD=I9(),S_=DC(),x_=jC(),rC=MD(),dD=jD(),s6=C0(),MY1=kD().compile,jY1=kD().defineKey,TY1=Ux(),kY1=uD().flatten,nC=kx(),N_=Ox(),uY1=xx(),OY1=SD(),M_=B2(),__=Y8(),SY1=$8(),j_=OC(),tC=c("util").inspect,f_=i6().internalToObjectOptions,xY1=SC(),_Y1=xC(),fY1=C6(),eC=_C(),gY1=UF(),Z1=B1(),bY1=fC(),lD=Z1.deepEqual,yY1=Z1.isMongooseObject,wF=t().arrayAtomicsBackupSymbol,p2=t().arrayAtomicsSymbol,hY1=t().documentArrayParent,vY1=t().documentIsModified,g_=t().documentModifiedPaths,mY1=t().documentSchemaSymbol,dY1=t().getSymbol,cY1=t().modelSymbol,T_=t().populateModelSymbol,lY1=t().scopeSymbol,pY1=M9().schemaMixedSymbol,iY1=tx(),cD=t().sessionNewDocuments,pD,k_,LF,b_=Z1.specialProperties;function g(F,A,B){if(typeof B==="boolean")throw new Error("The skipId parameter has been removed. Use { skipId: true } in the options parameter instead.");B=Object.assign({},B);let D=B.skipId;if(this.$__=new wY1,this.$__schema==null){let E=Z1.isObject(A)&&!A.instanceOfSchema?new NY1(A):A;this.$__setSchema(E),A=B,D=B.skipId}if(B.isNew!=null&&B.isNew!==!0)this.$isNew=B.isNew;if(B.priorDoc!=null)this.$__.priorDoc=B.priorDoc;if(D)this.$__.skipId=D;if(F!=null&&typeof F!=="object")throw new oC(F,"obj","Document");let X=!0;if(B.defaults!==void 0)this.$__.defaults=B.defaults,X=B.defaults;let Z=this.$__schema;if(typeof A==="boolean"||A==="throw"){if(A!==!0)this.$__.strictMode=A;A=void 0}else if(Z.options.strict!==!0)this.$__.strictMode=Z.options.strict;let J=Z.requiredPaths(!0);for(let E of J)this.$__.activePaths.require(E);let $=null;if(Z1.isPOJO(A)&&Z1.hasOwnKeys(A))$=SY1(A),this.$__.selected=A,this.$__.exclude=$;let Y=$===!1&&A?x_(A):null;if(this._doc==null){if(this.$__buildDoc(F,A,D,$,Y,!1),X)rC(this,A,$,Y,!0,null,{skipParentChangeTracking:!0})}if(F){if(this.$__original_set)this.$__original_set(F,void 0,!0,B);else this.$set(F,void 0,!0,B);if(F instanceof g)this.$isNew=F.$isNew}if(B.willInit&&X){if(B.skipDefaults)this.$__.skipDefaults=B.skipDefaults}else if(X)rC(this,A,$,Y,!1,B.skipDefaults);if(!this.$__.strictMode&&F){let E=this;Object.keys(this._doc).forEach(function(C){if(!(C in Z.tree)&&!(C in Z.methods)&&!(C in Z.virtuals)&&!C.startsWith("$"))jY1({prop:C,subprops:null,prototype:E})})}A$1(this)}g.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(g.prototype,"isNew",{get:function(){return this.$isNew},set:function(F){this.$isNew=F}});Object.defineProperty(g.prototype,"errors",{get:function(){return this.$errors},set:function(F){this.$errors=F}});/*!
 * ignore
 */g.prototype.$isNew=!0;/*!
 * Document exposes the NodeJS event emitter API, so you can use
 * `on`, `once`, etc.
 */Z1.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(F){g.prototype[F]=function(){if(!this.$__.emitter){if(F==="emit")return;this.$__.emitter=new aC,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[F].apply(this.$__.emitter,arguments)},g.prototype[`$${F}`]=g.prototype[F]});g.prototype.constructor=g;for(let F in aC.prototype)g[F]=aC.prototype[F];g.prototype.$__schema;g.prototype.schema;Object.defineProperty(g.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){if(this.$__.locals==null)this.$__.locals={};return this.$__.locals},set:function(F){this.$__.locals=F}});g.prototype.isNew;Object.defineProperty(g.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});g.prototype.id;g.prototype.$errors;Object.defineProperty(g.prototype,"$op",{get:function(){return this.$__.op||null},set:function(F){this.$__.op=F}});/*!
 * ignore
 */function nY1(F,A,B){if(F==null)return;let D=Object.keys(B.$__schema.paths),X=D.length,Z=A.indexOf(".")===-1?[A]:A.split(".");for(let J=0;J<X;++J){let $="",Y=D[J];if(!Y.startsWith(A+"."))continue;let E=B.$__schema.paths[Y],G=E.splitPath().slice(Z.length),C=G.length;if(E.defaultValue===void 0)continue;let W=F;for(let H=0;H<C;++H){if(W==null)break;let q=G[H];if(H===C-1){if(W[q]!==void 0)break;try{let Q=E.getDefault(B,!1);if(Q!==void 0)W[q]=Q}catch(Q){B.invalidate(A+"."+$,Q);break}break}$+=(!$.length?"":".")+q,W[q]=W[q]||{},W=W[q]}}}g.prototype.$__buildDoc=function(F,A,B,D,X){let Z={},J=Object.keys(this.$__schema.paths).filter((E)=>!E.includes("$*")),$=J.length,Y=0;for(;Y<$;++Y){let E=J[Y];if(E==="_id"){if(B)continue;if(F&&"_id"in F)continue}let G=this.$__schema.paths[E].splitPath(),C=G.length,W=C-1,H="",q=Z,Q=!1;for(let K=0;K<C;++K){let U=G[K];if(!H.length)H=U;else H+="."+U;if(D===!0){if(H in A)break}else if(D===!1&&A&&!Q){if(H in A)Q=!0;else if(!X[H])break}if(K<W)q=q[U]||(q[U]={})}}this._doc=Z};/*!
 * Converts to POJO when you use the document for querying
 */g.prototype.toBSON=function(){return this.toObject(f_)};g.prototype.init=function(F,A,B){if(typeof A==="function")B=A,A=null;if(F==null)throw new oC(F,"doc","init");if(this.$__init(F,A),B)B(null,this);return this};g.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};g.prototype.$__init=function(F,A){if(F==null)throw new oC(F,"doc","init");if(this.$isNew=!1,A=A||{},F._id!=null&&A.populated&&A.populated.length){let D=String(F._id);for(let X of A.populated){if(X.isVirtual)this.$populated(X.path,Z1.getValue(X.path,F),X);else this.$populated(X.path,X._docs[D],X);if(X._childDocs==null)continue;for(let Z of X._childDocs){if(Z?.$__==null)continue;Z.$__.parent=this}X._childDocs=[]}}y_(this,F,this._doc,A),xY1(this,A.populated),this.$emit("init",this),this.constructor.emit("init",this);let B=this.$__.exclude===!1&&this.$__.selected?x_(this.$__.selected):null;return rC(this,this.$__.selected,this.$__.exclude,B,!1,this.$__.skipDefaults),this};function y_(F,A,B,D,X){if(X=X||"",typeof A!=="object"||Array.isArray(A))throw new O_(F.$basePath,A);if(A.$__!=null)A=A._doc;let Z=Object.keys(A),J=Z.length,$,Y,E,G=F.$__.strictMode,C=F.$__schema;for(let W=0;W<J;++W){if(E=Z[W],b_.has(E))continue;if(Y=X?X+E:E,$=C.path(Y),C.$isRootDiscriminator&&!F.$__isSelected(Y))continue;let H=A[E];if(!$&&Z1.isPOJO(H)){if(!B[E]){if(B[E]={},!G&&!(E in C.tree)&&!(E in C.methods)&&!(E in C.virtuals))F[E]=B[E];else if(D?.virtuals&&E in C.virtuals)F[E]=B[E]}y_(F,H,B[E],D,Y+".")}else if(!$){if(B[E]=H,!G&&!X)F[E]=H;else if(D?.virtuals&&E in C.virtuals)F[E]=H}else{if(Object.hasOwn(B,E)&&H!==void 0&&!D.hydratedPopulatedDocs)delete B[E];if(H===null)B[E]=$._castNullish(null);else if(H!==void 0){let q=H.$__==null?null:H.$__.wasPopulated;if($&&!q&&!D.hydratedPopulatedDocs)try{if(D?.setters)B[E]=$.applySetters(H,F,!1,null,D);else B[E]=$.cast(H,F,!0,void 0,D)}catch(Q){F.invalidate(Q.path,new S_({path:Q.path,message:Q.message,type:"cast",value:Q.value,reason:Q}))}else if($&&D.hydratedPopulatedDocs){if(B[E]=$.cast(H,F,!0,void 0,{hydratedPopulatedDocs:!0}),B[E]?.$__?.wasPopulated)F.$populated(Y,B[E].$__.wasPopulated.value,B[E].$__.wasPopulated.options);else if(Array.isArray(B[E])&&B[E].length&&B[E][0]?.$__?.wasPopulated)F.$populated(Y,B[E].map((Q)=>Q?.$__?.wasPopulated?.value).filter((Q)=>Q!=null),B[E][0].$__.wasPopulated.options)}else B[E]=H}if(!F.$isModified(Y))F.$__.activePaths.init(Y)}}}g.prototype.updateOne=function F(A,B){let D=this.constructor.updateOne(),X=this;return D.pre(async function Z(){let J=await X._execDocumentPreHooks("updateOne",X,A,B);if(J[0]!==X||J[1]!==A||J[2]!==B)throw new Error("Document updateOne pre hooks cannot overwrite arguments");if(D.updateOne({_id:X._doc._id},A,B),X.$where!=null)this.where(X.$where);if(X.$session()!=null){if(!("session"in D.options))D.options.session=X.$session()}return J}),D.post(function Z(){return X._execDocumentPostHooks("updateOne")}),D};g.prototype.replaceOne=function F(){let A=[...arguments];return A.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,A)};g.prototype.$session=function F(A){if(arguments.length===0){if(this.$__.session?.hasEnded)return this.$__.session=null,null;return this.$__.session}if(A?.hasEnded)throw new l2("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(A==null&&this.$__.session==null)return;if(this.$__.session=A,!this.$isSubdocument){let B=this.$getAllSubdocs();for(let D of B)D.$session(A)}return A};g.prototype.$timestamps=function F(A){if(arguments.length===0){if(this.$__.timestamps!=null)return this.$__.timestamps;if(this.$__schema)return this.$__schema.options.timestamps;return}let B=this.$timestamps();if(A!==B)this.$__.timestamps=A;return this};g.prototype.overwrite=function F(A){let B=new Set(Object.keys(this._doc));for(let X of Object.keys(A))B.add(X);let D=this.$__schema.options;for(let X of B){if(X==="_id")continue;if(D.versionKey&&X===D.versionKey)continue;if(D.discriminatorKey&&X===D.discriminatorKey)continue;this.$set(X,A[X])}return this};g.prototype.$set=function F(A,B,D,X){if(Z1.isPOJO(D))X=D,D=void 0;let Z=X?.merge,J=D&&D!==!0,$=D===!0,Y,E,G=0,C,W,H,q=X&&"strict"in X,Q=q?X.strict:this.$__.strictMode;if(J)Y=this.$__.adhocPaths||(this.$__.adhocPaths={}),Y[A]=this.$__schema.interpretAsType(A,D,this.$__schema.options);if(A==null)[A,B]=[B,A];else if(typeof A!=="string"){if(A instanceof g)if(A.$__isNested)A=A.toObject();else A=A.$__schema===this.$__schema?FW(A,{...A._doc}):A._doc;if(A==null)[A,B]=[B,A];H=B?B+".":"",E=N_(this.$__schema,A);let u=E.length,O=X?._skipMinimizeTopLevel||!1;if(u===0&&O){if(delete X._skipMinimizeTopLevel,B)this.$set(B,{});return this}X=Object.assign({},X,{_skipMinimizeTopLevel:!1});for(let h=0;h<u;++h){W=E[h];let o=H?H+W:W;C=this.$__schema.pathType(o);let A1=A[W];if(D===!0&&!H&&A1!=null&&C==="nested"&&this._doc[W]!=null)delete this._doc[W];if(Z1.isNonBuiltinObject(A1)&&C==="nested"){this.$set(o,A1,$,X),nY1(this.$get(o),o,this);continue}else if(Q){if($&&A1===void 0&&this.$get(o)!==void 0)continue;if(C==="adhocOrUndefined")C=nC(this,o,{typeOnly:!0});if(C==="real"||C==="virtual")this.$set(o,A1,$,X);else if(C==="nested"&&A1 instanceof g)this.$set(o,A1.toObject({transform:!1}),$,X);else if(Q==="throw")if(C==="nested")throw new O_(W,A1);else throw new sC(W);else if(C==="nested"&&A1==null)this.$set(o,A1,$,X)}else this.$set(o,A1,$,X)}let k={},m=Object.keys(this.$__schema.tree);for(let h=0,o=m.length;h<o;++h)(W=m[h])&&Object.hasOwn(this._doc,W)&&(k[W]=void 0);return this._doc=Object.assign(k,this._doc),this}let K=this.$__schema.pathType(A),U=null;if(K==="adhocOrUndefined")U=A.indexOf(".")===-1?[A]:A.split("."),K=nC(this,U,{typeOnly:!0});if(K==="adhocOrUndefined"&&!q){if(U==null)U=A.indexOf(".")===-1?[A]:A.split(".");let u=uY1(this.$__schema,U);if(u!==void 0)Q=u}B=OY1(B,!0);let R=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(A);if($)return;return this.$__getValue(A)})();if(K==="nested"&&B){if(typeof B==="object"&&B!=null){if(B.$__!=null)B=B.toObject(f_);if(B==null)return this.invalidate(A,new l2.CastError("Object",B,A)),this;let u=this.$isModified(A),O=this.$__.savedState!=null&&Object.hasOwn(this.$__.savedState,A);if(this.$__.savedState!=null&&!this.$isNew&&!Object.hasOwn(this.$__.savedState,A)){let m=this.$__getValue(A);this.$__.savedState[A]=m;let h=Object.keys(m||{});for(let o of h)this.$__.savedState[A+"."+o]=m[o]}if(!Z)this.$__setValue(A,null),dD(this,A);else return this.$set(B,A,$,X);let k=N_(this.$__schema,B,A);this.$__setValue(A,{});for(let m of k)this.$set(A+"."+m,B[m],$,{...X,_skipMarkModified:!0});if(R!=null&&(!u||O)&&Z1.deepEqual(O?this.$__.savedState[A]:R,B))this.unmarkModified(A);else this.markModified(A);return this}return this.invalidate(A,new l2.CastError("Object",B,A)),this}let w;if(U==null)U=A.indexOf(".")===-1?[A]:A.split(".");if(typeof this.$__schema.aliases[U[0]]==="string")U[0]=this.$__schema.aliases[U[0]];if(K==="adhocOrUndefined"&&Q){let u;for(G=0;G<U.length;++G){let O=U.slice(0,G+1).join(".");if(G+1<U.length&&this.$__schema.pathType(O)==="virtual")return fY1.set(A,B,this),this;if(w=this.$__schema.path(O),w==null)continue;if(w instanceof I_){u=!0;break}else if(w.$isSchemaMap&&w.$__schemaType instanceof I_&&G<U.length-1){u=!0,w=w.$__schemaType;break}}if(w==null)w=nC(this,A);if(!u&&!w){if(Q==="throw")throw new sC(A);return this}}else if(K==="virtual")return w=this.$__schema.virtualpath(A),w.applySetters(B,this),this;else w=this.$__path(A);let V=this._doc,N="";for(G=0;G<U.length-1;++G)if(V=V instanceof Map?V.get(U[G]):V[U[G]],N+=(N.length!==0?".":"")+U[G],!V){if(this.$set(N,{}),!this.$__isSelected(N))this.unmarkModified(N);V=this.$__getValue(N)}let T;if(U.length<=1)T=A;else{let u=U.length;for(G=0;G<u;++G){let O=U.slice(0,G+1).join(".");if(this.$get(O,null,{getters:!1})===null){T=O;break}}if(!T)T=A}if(!w){if(this.$__set(T,A,X,$,U,w,B,R),K==="nested"&&B==null)dD(this,A);return this}if(w.$isSingleNested||w.$isMongooseArray)eY1(this,A);if(B!=null&&Z&&w.$isSingleNested){if(B instanceof g)B=B.toObject({virtuals:!1,transform:!1});let u=Object.keys(B);for(let O of u)this.$set(A+"."+O,B[O],$,X);return this}let I=!0;try{let u=(()=>{if(w.options==null)return!1;if(!(B instanceof g))return!1;let h=B.constructor,o=typeof w.options.ref==="function"&&!w.options.ref[cY1]?w.options.ref.call(this,this):w.options.ref,A1=o?.modelName||o;if(A1!=null&&(A1===h.modelName||A1===h.baseModelName))return!0;let w2=w.options.refPath;if(w2==null)return!1;let J2=B.get(w2);return J2===h.modelName||J2===h.baseModelName})(),O=!1;if(u&&B instanceof g&&(!B.$__.wasPopulated||Z1.deepEqual(B.$__.wasPopulated.value,B._doc._id))){let h=w?.$isSingleNested?w.cast(B,this):B._doc._id;this.$populated(A,h,{[T_]:B.constructor}),B.$__.wasPopulated={value:h},O=!0}let k,m=this.$__schema.options.typeKey;if(w.options&&Array.isArray(w.options[m])&&w.options[m].length&&w.options[m][0]&&w.options[m][0].ref&&aY1(B,w.options[m][0].ref)){k={[T_]:B[0].constructor},this.$populated(A,B.map(function(h){return h._doc._id}),k);for(let h of B)h.$__.wasPopulated={value:h._doc._id};O=!0}if(!u||!w.$isSingleNested||!B.$__){let h=this;if(this.$__schema.singleNestedPaths[A]!=null&&U.length>1)h=iY1(this,U,this.schema);if(X?.overwriteImmutable)B=w.applySetters(B,h,!1,R,{path:A,overwriteImmutable:!0});else B=w.applySetters(B,h,!1,R,{path:A})}if(Array.isArray(B)&&!Array.isArray(w)&&w.$isMongooseDocumentArray&&B.length!==0&&B[0]?.$__?.populated!=null){let h=Object.keys(B[0].$__.populated);for(let o of h)this.$populated(A+"."+o,B.map((A1)=>A1.$populated(o)),B[0].$__.populated[o].options);O=!0}if(!O&&this.$__.populated){if(Array.isArray(B)&&this.$__.populated[A]){for(let h=0;h<B.length;++h)if(B[h]instanceof g)B.set(h,B[h]._doc._id,!0)}delete this.$__.populated[A]}if(B!=null&&w.$isSingleNested)F$1(B,w,R);this.$markValid(A)}catch(u){if(u instanceof l2.StrictModeError&&u.isImmutableError)this.invalidate(A,u);else if(u instanceof l2.CastError){if(this.invalidate(u.path,u),u.$originalErrorPath)this.invalidate(A,new l2.CastError(w.instance,B,A,u.$originalErrorPath))}else this.invalidate(A,new l2.CastError(w.instance,B,A,u));I=!1}if(I){let u=null,O=null;if(!$){let h=this.$isSubdocument?this.ownerDocument():this;u=h.$__.savedState,O=this.$isSubdocument?this.$__.fullPath+"."+A:A,h.$__saveInitialState(O)}this.$__set(T,A,X,$,U,w,B,R);let k=!!this.$__.session?.transaction,m=this.$__.session&&this.$__.session[cD]&&this.$__.session[cD].has(this)&&this.$__.session[cD].get(this).modifiedPaths&&!this.$__.session[cD].get(this).modifiedPaths.has(O);if(u!=null&&Object.hasOwn(u,O)&&(!k||m)&&Z1.deepEqual(B,u[O]))this.unmarkModified(A)}if(w.$isSingleNested&&(this.isDirectModified(A)||B==null))dD(this,A);else if(w.$isSchemaMap&&B==null)dD(this,A);return this};/*!
 * ignore
 */function aY1(F,A){if(!Array.isArray(F))return!1;if(F.length===0)return!1;for(let B of F){if(!(B instanceof g))return!1;if(B.constructor.modelName==null)return!1;if(B.constructor.modelName!=A&&B.constructor.baseModelName!=A)return!1}return!0}g.prototype.set=g.prototype.$set;g.prototype.$__shouldModify=function(F,A,B,D,X,Z,J,$){if(B?._skipMarkModified)return!1;if(this.$isNew)return!0;if(A in this.$__.activePaths.getStatePaths("modify"))return!0;if(J===void 0&&!this.$__isSelected(A))return!0;if(J===void 0&&A in this.$__.activePaths.getStatePaths("default"))return!1;if(this.$populated(A)&&J instanceof g&&lD(J._doc._id,$))return!1;if(!lD(J,$!==void 0?$:Z1.getValue(A,this)))return!0;if(!D&&J!==null&&J!==void 0&&A in this.$__.activePaths.getStatePaths("default")&&lD(J,Z.getDefault(this,D)))return!0;return!1};g.prototype.$__set=function(F,A,B,D,X,Z,J,$){LF=LF||G8();let Y=this.$__shouldModify(F,A,B,D,X,Z,J,$);if(Y){if(this.$__.primitiveAtomics?.[A]){if(delete this.$__.primitiveAtomics[A],Z1.hasOwnKeys(this.$__.primitiveAtomics)===!1)delete this.$__.primitiveAtomics}if(this.markModified(F),k_||(k_=vC()),J&&Z1.isMongooseArray(J)){if(J._registerAtomic("$set",J),Z1.isMongooseDocumentArray(J))J.forEach(function(H){H&&H.__parentArray&&(H.__parentArray=J)})}}else if(Array.isArray(J)&&Array.isArray($)&&Z1.isMongooseArray(J)&&Z1.isMongooseArray($)){if(J[p2]=$[p2],J[wF]=$[wF],Z1.isMongooseDocumentArray(J))J.forEach((H)=>{if(H!=null)H.$isNew=!1})}let E=this._doc,G=0,C=X.length,W="";for(;G<C;G++){let q=G+1===C;if(W+=W?"."+X[G]:X[G],b_.has(X[G]))continue;if(q)if(E instanceof Map)E.set(X[G],J);else if(E.$isSingleNested){if(!(X[G]in E))E[X[G]]=J,E._doc[X[G]]=J;else E._doc[X[G]]=J;if(Y)E.markModified(X[G])}else E[X[G]]=J;else{let Q=E instanceof Map,K=Q?E.get(X[G]):E[X[G]];if(Z1.isPOJO(K))E=K;else if(K&&K instanceof LF)E=K;else if(K&&!Array.isArray(K)&&K.$isSingleNested)E=K;else if(K&&Array.isArray(K))E=K;else if(K==null){if(K={},Q)E.set(X[G],K);else E[X[G]]=K;E=K}else E=K}}};g.prototype.$__getValue=function(F){if(typeof F!=="string"&&!Array.isArray(F))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${F}" (type ${typeof F})`);return Z1.getValue(F,this._doc)};g.prototype.$inc=function F(A,B){if(B==null)B=1;if(Array.isArray(A))return A.forEach((Y)=>this.$inc(Y,B)),this;let D=this.$__path(A);if(D==null){if(this.$__.strictMode==="throw")throw new sC(A);else if(this.$__.strictMode===!0)return this}else if(D.instance!=="Number")return this.invalidate(A,new l2.CastError(D.instance,B,A)),this;let X=this.$__getValue(A)||0,Z=!1,J=null,$=B;try{B=D.cast(B),J=D.applySetters(X+B,this),$=J-X,Z=!0}catch(Y){this.invalidate(A,new l2.CastError("number",B,A,Y))}if(Z){if(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[A]==null)this.$__.primitiveAtomics[A]={$inc:$};else this.$__.primitiveAtomics[A].$inc+=$;this.markModified(A),this.$__setValue(A,J)}return this};g.prototype.$__setValue=function(F,A){return Z1.setValue(F,A,this._doc),this};g.prototype.get=function(F,A,B){let D;if(B==null)B={};if(A)D=this.$__schema.interpretAsType(F,A,this.$__schema.options);let X=B.noDottedPath,Z=X?this.$__schema.paths[F]:this.$__path(F);if(Z==null){if(Z=this.$__schema.virtualpath(F),Z!=null)return Z.applyGetters(void 0,this)}if(X){let E=this._doc[F];if(D)E=D.cast(E);if(Z!=null&&B.getters!==!1)return Z.applyGetters(E,this);return E}if(Z?.instance==="Mixed"){let E=this.$__schema.virtualpath(F);if(E!=null)Z=E}let J=F.indexOf(".")!==-1,$=this._doc,Y=J?F.split("."):[F];if(typeof this.$__schema.aliases[Y[0]]==="string")Y[0]=this.$__schema.aliases[Y[0]];for(let E=0,G=Y.length;E<G;E++){if($?._doc)$=$._doc;if($==null)$=void 0;else if($ instanceof Map)$=$.get(Y[E],{getters:!1});else if(E===G-1)$=Z1.getValue(Y[E],$);else $=$[Y[E]]}if(D)$=D.cast($);if(Z!=null&&B.getters!==!1)$=Z.applyGetters($,this);else if(this.$__schema.nested[F]&&B.virtuals)return FW(this,s6($)||{},{path:F});return $};/*!
 * ignore
 */g.prototype[dY1]=g.prototype.get;g.prototype.$get=g.prototype.get;g.prototype.$__path=function(F){let A=this.$__.adhocPaths,B=A&&Object.hasOwn(A,F)?A[F]:null;if(B)return B;return this.$__schema.path(F)};g.prototype.markModified=function(F,A){if(this.$__saveInitialState(F),this.$__.activePaths.modify(F),A!=null&&!this.$isSubdocument)this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[F]=A};/*!
 * ignore
 */g.prototype.$__saveInitialState=function F(A){let B=this.$__.savedState,D=A;if(B!=null){let X=D.indexOf("."),Z=X===-1?D:D.slice(0,X);if(!Object.hasOwn(B,Z))B[Z]=s6(this.$__getValue(Z))}};g.prototype.unmarkModified=function(F){if(this.$__.activePaths.init(F),this.$__.pathsToScopes!=null)delete this.$__.pathsToScopes[F]};g.prototype.$ignore=function(F){this.$__.activePaths.ignore(F)};g.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};g.prototype.$isEmpty=function(F){let A={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let B=this.$get(F);if(B==null)return!0;if(typeof B!=="object")return!1;if(Z1.isPOJO(B))return h_(B);return Object.keys(B.toObject(A)).length===0}return Object.keys(this.toObject(A)).length===0};/*!
 * ignore
 */function h_(F){if(F==null)return!0;if(typeof F!=="object"||Array.isArray(F))return!1;for(let A of Object.keys(F))if(!h_(F[A]))return!1;return!0}g.prototype.modifiedPaths=function(F){F=F||{};let A=Object.keys(this.$__.activePaths.getStatePaths("modify")),B=new Set,D=0,X=0,Z=A.length;for(D=0;D<Z;++D){let J=A[D],$=eC(J),Y=$.length;for(X=0;X<Y;++X)B.add($[X]);if(!F.includeChildren)continue;let E=0,G=this.$get(J);if(typeof G==="object"&&G!==null){if(G._doc)G=G._doc;let C=G.length;if(Array.isArray(G))for(E=0;E<C;++E){let W=J+"."+E;if(!B.has(W)){if(B.add(W),G[E]!=null&&G[E].$__){let H=G[E].modifiedPaths(),q=0,Q=H.length;for(q=0;q<Q;++q)B.add(W+"."+H[q])}}}else{let W=Object.keys(G),H=0,q=W.length;for(H=0;H<q;++H)B.add(J+"."+W[H])}}}return Array.from(B)};g.prototype[g_]=g.prototype.modifiedPaths;g.prototype.isModified=function(F,A,B){if(F){let D=A?.ignoreAtomics,X=this.$__.activePaths.states.modify;if(X==null)return!1;if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");for(let Y of F)if(X[Y]!=null)return!0;let Z=B||this[g_](),J=F.some(function(Y){return!!~Z.indexOf(Y)}),$=Object.keys(X);if(D)$=$.filter((Y)=>{let E=this.$__getValue(Y);if(E?.[p2]!=null&&E[p2].$set===void 0)return!1;return!0});return J||F.some(function(Y){return $.some(function(E){return E===Y||Y.startsWith(E+".")})})}return this.$__.activePaths.some("modify")};g.prototype.$isModified=g.prototype.isModified;g.prototype[vY1]=g.prototype.isModified;g.prototype.$isDefault=function(F){if(F==null)return this.$__.activePaths.some("default");if(typeof F==="string"&&F.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("default"),F);let A=F;if(!Array.isArray(A))A=A.split(" ");return A.some((B)=>Object.hasOwn(this.$__.activePaths.getStatePaths("default"),B))};g.prototype.$isDeleted=function(F){if(arguments.length===0)return!!this.$__.isDeleted;return this.$__.isDeleted=!!F,this};g.prototype.isDirectModified=function(F){if(F==null)return this.$__.activePaths.some("modify");if(typeof F==="string"&&F.indexOf(" ")===-1){let B=Object.hasOwn(this.$__.activePaths.getStatePaths("modify"),F);if(B||F.indexOf(".")===-1)return B;let D=F.split(".");for(let X=0;X<D.length-1;++X){let Z=D.slice(0,X+1).join("."),J=this.$get(Z);if(J?.$__!=null&&J.isDirectModified(D.slice(X+1).join(".")))return!0}return!1}let A=F;if(typeof A==="string")A=A.split(" ");return A.some((B)=>this.isDirectModified(B))};g.prototype.isInit=function(F){if(F==null)return this.$__.activePaths.some("init");if(typeof F==="string"&&F.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("init"),F);let A=F;if(!Array.isArray(A))A=A.split(" ");return A.some((B)=>Object.hasOwn(this.$__.activePaths.getStatePaths("init"),B))};g.prototype.isSelected=function F(A){if(this.$__.selected==null)return!0;if(!A)return!1;if(A==="_id")return this.$__.selected._id!==0;if(A.indexOf(" ")!==-1)A=A.split(" ");if(Array.isArray(A))return A.some((Z)=>this.$__isSelected(Z));let B=Object.keys(this.$__.selected),D=null;if(B.length===1&&B[0]==="_id")return this.$__.selected._id===0;for(let Z of B){if(Z==="_id")continue;if(!__(this.$__.selected[Z]))continue;D=!!this.$__.selected[Z];break}if(D===null)return!0;if(A in this.$__.selected)return D;let X=A+".";for(let Z of B){if(Z==="_id")continue;if(Z.startsWith(X))return D||Z!==X;if(X.startsWith(Z+"."))return D}return!D};g.prototype.$__isSelected=g.prototype.isSelected;g.prototype.isDirectSelected=function F(A){if(this.$__.selected==null)return!0;if(A==="_id")return this.$__.selected._id!==0;if(A.indexOf(" ")!==-1)A=A.split(" ");if(Array.isArray(A))return A.some((X)=>this.isDirectSelected(X));let B=Object.keys(this.$__.selected),D=null;if(B.length===1&&B[0]==="_id")return this.$__.selected._id===0;for(let X of B){if(X==="_id")continue;if(!__(this.$__.selected[X]))continue;D=!!this.$__.selected[X];break}if(D===null)return!0;if(Object.hasOwn(this.$__.selected,A))return D;return!D};g.prototype.validate=async function F(A,B){if(typeof A==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new l2("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1){if(typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))B=arguments[0],A=null}if(B&&typeof B.pathsToSkip==="string"){let X=B.pathsToSkip.indexOf(" ")===-1;B.pathsToSkip=X?[B.pathsToSkip]:B.pathsToSkip.split(" ")}let D=B?._skipParallelValidateCheck;if(this.$isSubdocument!=null);else if(this.$__.validating&&!D)throw new IY1(this);else if(!D)this.$__.validating=!0;try{await this.$__validate(A,B)}finally{this.$op=null,this.$__.validating=null}};g.prototype.$validate=g.prototype.validate;/*!
 * ignore
 */function sY1(F){let A=Object.keys(F.$__.activePaths.getStatePaths("require")),B=0,D=A.length;for(B=0;B<D;++B){let X=A[B],Z=F.$__schema.path(X);if(typeof Z?.originalRequiredValue==="function"){F.$__.cachedRequired=F.$__.cachedRequired||{};try{F.$__.cachedRequired[X]=Z.originalRequiredValue.call(F,F)}catch(J){F.invalidate(X,J)}}}}/*!
 * ignore
 */function v_(F,A,B,D){let X={};sY1(F);let Z=new Set(Object.keys(F.$__.activePaths.getStatePaths("require")).filter(function(Y){if(!F.$__isSelected(Y)&&!F.$isModified(Y))return!1;if(Y.endsWith(".$*"))return!1;if(F.$__.cachedRequired!=null&&Y in F.$__.cachedRequired)return F.$__.cachedRequired[Y];return!0}));Object.keys(F.$__.activePaths.getStatePaths("init")).forEach(J),Object.keys(F.$__.activePaths.getStatePaths("modify")).forEach(J),Object.keys(F.$__.activePaths.getStatePaths("default")).forEach(J);function J(Y){if(Y.endsWith(".$*"))return;Z.add(Y)}if(!D){let Y=[];for(let G of Object.keys(F.$__schema.paths)){let C=F.$__schema.path(G);if(C.$isSingleNested){let W=F.$get(G);if(W)Y.push(W)}else if(C.$isMongooseDocumentArray){let W=F.$get(G);if(W?.length){for(let H of W)if(H)Y.push(H)}}}let E=F.modifiedPaths();for(let G of Y)if(G.$basePath){let C=G.$__pathRelativeToParent();for(let H of G.modifiedPaths())Z.delete(C+"."+H);let W=G.$parent();if(W==null)throw new Error("Cannot validate subdocument that does not have a parent");if(F.$isModified(C,null,E)&&!Object.hasOwn(W.$__.activePaths.getStatePaths("modify"),C)&&!W.$isDefault(C)){if(Z.add(C),F.$__.pathsToScopes==null)F.$__.pathsToScopes={};if(F.$__.pathsToScopes[C]=G.$isDocumentArrayElement?G.__parentArray:G.$parent(),X[C]={skipSchemaValidators:!0},G.$isDocumentArrayElement&&G.__index!=null)X[C].index=G.__index}}}for(let Y of Z){let E=F.$__schema.path(Y);if(!E)continue;if(E.$isMongooseDocumentArray){for(let G of Z)if(G==null||G.startsWith(E.path+"."))Z.delete(G)}if(!E.schema&&!E.embeddedSchemaType&&E.validators.length===0&&!E.$parentSchemaDocArray)Z.delete(Y);else if(E.$isMongooseArray&&!E.$isMongooseDocumentArray&&!E.embeddedSchemaType.$isMongooseArray&&E.validators.length===0&&E.embeddedSchemaType.validators.length===0)Z.delete(Y)}if(Array.isArray(A))Z=tY1(Z,A);else if(Array.isArray(B))Z=oY1(Z,B);rY1(F,Z);let $={skipArrays:!0};for(let Y of Z)if(F.$__schema.nested[Y]){let E=F.$__getValue(Y);if(yY1(E))E=E.toObject({transform:!1});let G=kY1(E,Y,$,F.$__schema),C=F.$__schema.singleNestedPaths;for(let W of Object.keys(G))if(!Object.hasOwn(C,W))J(W)}for(let Y of Z){let E=F.$__schema.path(Y);if(!E)continue;if(E.$parentSchemaDocArray&&typeof E.$parentSchemaDocArray.path==="string")Z.add(E.$parentSchemaDocArray.path);if(!E.$isSchemaMap)continue;let G=F.$__getValue(Y);if(G==null)continue;for(let C of G.keys())Z.add(Y+"."+C)}return Z=Array.from(Z),[Z,X]}function rY1(F,A){for(let B of A){let D=F.$__schema.path(B);if(!D)continue;if(!D.$isMongooseArray||!Array.isArray(D)&&D.$isMongooseDocumentArray&&!D?.schemaOptions?.required)continue;if(D.$isMongooseArray&&!D.$isMongooseDocumentArray&&!D.embeddedSchemaType.$isMongooseArray&&D.embeddedSchemaType.validators.length===0)continue;let X=F.$__getValue(B);nD(X,A,B)}}function nD(F,A,B){if(F!=null){let D=F.length;for(let X=0;X<D;++X)if(Array.isArray(F[X]))nD(F[X],A,B+"."+X);else A.add(B+"."+X)}}/*!
 * ignore
 */g.prototype._execDocumentPreHooks=async function F(A,...B){return this.$__middleware.execPre(A,this,[...B])};/*!
 * ignore
 */g.prototype._execDocumentPostHooks=async function F(A,B){return this.$__middleware.execPost(A,this,[this],{error:B})};/*!
 * ignore
 */g.prototype.$__validate=async function F(A,B){try{[B]=await this._execDocumentPreHooks("validate",B)}catch(K){await this._execDocumentPostHooks("validate",K);return}if(this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!A)A=[...this.$__.saveOptions.pathsToSave];let D=B&&typeof B==="object"&&"validateModifiedOnly"in B,X=B?.pathsToSkip||null,Z;if(D)Z=!!B.validateModifiedOnly;else Z=this.$__schema.options.validateModifiedOnly;let J=B?.validateAllPaths;if(J){if(X)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(A)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(D&&Z)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let $=this,Y=()=>{let K=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,Z&&K!=null){let U=Object.keys(K.errors);for(let R of U)if(!this.$isModified(R))delete K.errors[R];if(Z1.hasOwnKeys(K.errors)===!1)K=void 0}if(this.$__.cachedRequired={},this.$emit("validate",$),this.constructor.emit("validate",$),K){for(let U in K.errors)if(!this[hY1]&&K.errors[U]instanceof l2.CastError)this.invalidate(U,K.errors[U]);return K}},E,G;if(J){E=new Set(Object.keys(this.$__schema.paths));for(let K of E){if(!this.$__schema.path(K)?.$isMongooseArray)continue;let R=this.$__getValue(K);if(!R)continue;nD(R,E,K)}E=[...E],G={}}else{let K=v_(this,A,X,B?._nestedValidate);E=Z?K[0].filter((U)=>this.$isModified(U)):K[0],G=K[1]}if(typeof A==="string")A=A.split(" ");if(E.length===0){let K=Y();await this._execDocumentPostHooks("validate",K);return}let C={},W=this.$__.saveOptions?.pathsToSave,H=[];if(Array.isArray(W)){W=new Set(W);for(let K of E){if(!W.has(K))continue;H.push(Q(K))}}else for(let K of E)H.push(Q(K));await Promise.all(H);let q=Y();await this._execDocumentPostHooks("validate",q);async function Q(K){if(K==null||C[K])return;C[K]=!0;let U=$.$__schema.path(K);if(!U)return;if(!$.$isValid(K))return;if(U[pY1]!=null&&K!==U.path)return;let R=$.$__getValue(K),w;if(w=$.$populated(K))R=w;else if(R?.$__?.wasPopulated)R=R._doc._id;let V=$.$__.pathsToScopes!=null&&K in $.$__.pathsToScopes?$.$__.pathsToScopes[K]:$,N={...G[K],path:K,validateAllPaths:J,_nestedValidate:!0};try{await U.doValidate(R,V,N)}catch(T){if((U.$isSingleNested||U.$isArraySubdocument||U.$isMongooseDocumentArray)&&T instanceof iD)return;$.invalidate(K,T,void 0,!0)}}};/*!
 * ignore
 */function tY1(F,A){let B=new Set(A),D=new Map([]);for(let Z of A){if(Z.indexOf(".")===-1)continue;let J=Z.split("."),$=J[0];for(let Y=1;Y<J.length;++Y)D.set($,Z),$=$+"."+J[Y]}let X=new Set;for(let Z of F)if(B.has(Z))X.add(Z);else if(D.has(Z))X.add(D.get(Z));return X}/*!
 * ignore
 */function oY1(F,A){return A=new Set(A),F=Array.from(F).filter((B)=>!A.has(B)),new Set(F)}g.prototype.validateSync=function(F,A){let B=this;if(arguments.length===1&&typeof arguments[0]==="object"&&!Array.isArray(arguments[0]))A=arguments[0],F=null;let D=A&&typeof A==="object"&&"validateModifiedOnly"in A,X;if(D)X=!!A.validateModifiedOnly;else X=this.$__schema.options.validateModifiedOnly;let Z=A?.pathsToSkip,J=A?.validateAllPaths;if(J){if(Z)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(F)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");else if(typeof Z==="string"&&Z.indexOf(" ")!==-1)Z=Z.split(" ");let $,Y;if(J){$=new Set(Object.keys(this.$__schema.paths));for(let C of $){if(!this.$__schema.path(C)?.$isMongooseArray)continue;let H=this.$__getValue(C);if(!H)continue;nD(H,$,C)}$=[...$],Y={}}else{let C=v_(this,F,Z);$=X?C[0].filter((W)=>this.$isModified(W)):C[0],Y=C[1]}let E={};for(let C=0,W=$.length;C<W;++C){let H=$[C];if(E[H])continue;E[H]=!0;let q=B.$__schema.path(H);if(!q)continue;if(!B.$isValid(H))continue;let Q=B.$__getValue(H),K=q.doValidateSync(Q,B,{skipSchemaValidators:Y[H],path:H,validateModifiedOnly:X,validateAllPaths:J});if(K){if((q.$isSingleNested||q.$isArraySubdocument||q.$isMongooseDocumentArray)&&K instanceof iD)continue;B.invalidate(H,K,void 0,!0)}}let G=B.$__.validationError;if(B.$__.validationError=void 0,B.$emit("validate",B),B.constructor.emit("validate",B),G){for(let C in G.errors)if(G.errors[C]instanceof l2.CastError)B.invalidate(C,G.errors[C])}return G};g.prototype.invalidate=function(F,A,B,D){if(!this.$__.validationError)this.$__.validationError=new iD(this);if(this.$__.validationError.errors[F])return;if(!A||typeof A==="string")A=new S_({path:F,message:A,type:D||"user defined",value:B});if(this.$__.validationError===A)return this.$__.validationError;return this.$__.validationError.addError(F,A),this.$__.validationError};g.prototype.$markValid=function(F){if(!this.$__.validationError?.errors[F])return;if(delete this.$__.validationError.errors[F],Z1.hasOwnKeys(this.$__.validationError.errors)===!1)this.$__.validationError=null};/*!
 * ignore
 */function eY1(F,A){if(!F.$__.validationError)return;let B=Object.keys(F.$__.validationError.errors);for(let D of B)if(D.startsWith(A+"."))delete F.$__.validationError.errors[D];if(Z1.hasOwnKeys(F.$__.validationError.errors)===!1)F.$__.validationError=null}/*!
 * ignore
 */function F$1(F,A,B){let D=A.schema;if(D==null)return;for(let X of Object.keys(D.paths)){let Z=D.paths[X];if(Z.$immutableSetter==null)continue;let J=B==null?void 0:B.$__getValue(X);Z.$immutableSetter.call(F,J)}}g.prototype.$isValid=function(F){if(this.$__.validationError==null||Z1.hasOwnKeys(this.$__.validationError.errors)===!1)return!0;if(F==null)return!1;if(F.indexOf(" ")!==-1)F=F.split(" ");if(Array.isArray(F))return F.some((A)=>this.$__.validationError.errors[A]==null);return this.$__.validationError.errors[F]==null};g.prototype.$__reset=function F(){let A=this,B=!this.$isSubdocument?this.$getAllSubdocs({useCache:!0}):null;if(B?.length>0)for(let D of B)D.$__reset();return this.$__dirty().forEach(function(D){let X=D.value;if(X&&typeof X.clearAtomics==="function")X.clearAtomics();else if(X&&X[p2])X[wF]=X[p2],X[p2]={}}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,A=this,this.$__schema.requiredPaths().forEach(function(D){A.$__.activePaths.require(D)}),this};/*!
 * ignore
 */g.prototype.$__undoReset=function F(){if(this.$__.backup?.activePaths==null)return;this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let A of this.$__dirty()){let B=A.value;if(B?.[p2]&&B[wF])B[p2]=B[wF]}if(!this.$isSubdocument)for(let A of this.$getAllSubdocs())A.$__undoReset()};g.prototype.$__dirty=function(){let F=this,A=this.$__.activePaths.map("modify",function(X){return{path:X,value:F.$__getValue(X),schema:F.$__path(X)}});A=A.concat(this.$__.activePaths.map("default",function(X){if(X==="_id"||F.$__getValue(X)==null)return;return{path:X,value:F.$__getValue(X),schema:F.$__path(X)}}));let B=new Map(A.filter((X)=>X!=null).map((X)=>[X.path,X.value])),D=[];return A.forEach(function(X){if(!X)return;let Z=null,J=eC(X.path);for(let $=0;$<J.length-1;$++)if(B.has(J[$])){Z=B.get(J[$]);break}if(Z==null)D.push(X);else if(Z!=null&&Z[p2]!=null&&Z.hasAtomics())Z[p2]={},Z[p2].$set=Z}),D};g.prototype.$__setSchema=function(F){MY1(F.tree,this,void 0,F.options);for(let A of Object.keys(F.virtuals))F.virtuals[A]._applyDefaultGetters();if(F.path("schema")==null)this.schema=F;this.$__schema=F,this.$__middleware=F._getDocumentMiddleware(),this[mY1]=F};g.prototype.$__getArrayPathsToValidate=function(){return pD||(pD=k9()),this.$__.activePaths.map("init","modify",function(F){return this.$__getValue(F)}.bind(this)).filter(function(F){return F&&Array.isArray(F)&&Z1.isMongooseDocumentArray(F)&&F.length}).reduce(function(F,A){return F.concat(A)},[]).filter(function(F){return F})};g.prototype.$getAllSubdocs=function(F){if(F?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;pD||(pD=k9()),LF=LF||G8();let A=[];function B(D){let X=[];for(let{model:Z}of D.$__schema.childSchemas){let J=D.$__getValue(Z.path);if(J==null)continue;if(J.$__)X.push(J);if(Array.isArray(J)){for(let $ of J)if($?.$__)X.push($)}if(J instanceof Map){for(let $ of J.values())if($?.$__)X.push($)}}for(let Z of X)B(Z);A.push(...X)}if(B(this),this.$__.saveOptions)this.$__.saveOptions.__subdocs=A;return A};/*!
 * Runs queued functions
 */function A$1(F){let A=F.$__schema&&F.$__schema.callQueue;if(!A.length)return;for(let B of A)if(B[0]!=="pre"&&B[0]!=="post"&&B[0]!=="on")F[B[0]].apply(F,B[1])}/*!
 * ignore
 */g.prototype.$__handleReject=function F(A){if(this.$listeners("error").length)this.$emit("error",A);else if(this.constructor.listeners?.("error").length)this.constructor.emit("error",A)};g.prototype.$toObject=function(F,A){let B=this.$__schema._defaultToObjectOptions(A),D=this.$__hasOnlyPrimitiveValues();F=Z1.isPOJO(F)?{...F}:{},F._calledWithOptions=F._calledWithOptions||{...F};let X;if(F._calledWithOptions.minimize!=null)X=F.minimize;else if(this.$__schemaTypeOptions?.minimize!=null)X=this.$__schemaTypeOptions.minimize;else if(B?.minimize!=null)X=B.minimize;else X=this.$__schema.options.minimize;if(F.minimize=X,!D)F._seen=F._seen||new Map;let Z=F._calledWithOptions.depopulate??B?.depopulate??F.depopulate??!1;if(Z&&F._isNested&&this.$__.wasPopulated)return s6(this.$__.wasPopulated.value||this._doc._id,F);if(Z)F.depopulate=!0;if(B!=null){for(let H of Object.keys(B))if(F[H]==null)F[H]=B[H]}F._isNested=!0,F.json=A,F.minimize=X;let J=F._parentOptions;F._parentOptions=this.$isSubdocument?F:null;let $=F._calledWithOptions.schemaFieldsOnly??F.schemaFieldsOnly??B.schemaFieldsOnly??!1,Y;if(D&&!F.flattenObjectIds)Y=this.$__toObjectShallow($);else if($){Y={};for(let H of Object.keys(this.$__schema.paths)){let q=this.$__getValue(H);if(q===void 0)continue;let Q=H,K=Y;if(H.indexOf(".")!==-1){let U=H.split(".");Q=U[U.length-1];for(let R=0;R<U.length-1;++R)K[U[R]]=K[U[R]]??{},K=K[U[R]]}if(q===null){K[Q]=null;continue}K[Q]=s6(q,F)}}else Y=s6(this._doc,F)||{};let E=F._calledWithOptions.getters??F.getters??B.getters??!1;if(E){if(B$1(this,Y),F.minimize)Y=_Y1(Y)||{}}let G=F._calledWithOptions.virtuals??B.virtuals??J?.virtuals??void 0;if(G||E&&G!==!1)FW(this,Y,F,F);if(F.versionKey===!1&&this.$__schema.options.versionKey)delete Y[this.$__schema.options.versionKey];let C=F._calledWithOptions.transform??!0,W=void 0;if(C===!0)W=B.transform;else if(typeof C==="function")W=C;if(C)D$1(this,Y);if(F.useProjection)X$1(this,Y);if(typeof W==="function"){let H=W(this,Y,F);if(typeof H!=="undefined")Y=H}return Y};/*!
 * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
 */g.prototype.$__toObjectShallow=function F(A){let B={};if(this._doc!=null){let D=A?Object.keys(this.$__schema.paths):Object.keys(this._doc);for(let X of D){let Z=this._doc[X];if(Z instanceof Date)B[X]=new Date(Z);else if(Z!==void 0)B[X]=Z}}return B};g.prototype.toObject=function(F){return this.$toObject(F)};/*!
 * Applies virtuals properties to `json`.
 */function FW(F,A,B,D){let X=F.$__schema,Z=X.virtuals,J=Object.keys(Z),$=J.length,Y=$,E,G,C=F._doc,W,H=typeof D?.aliases==="boolean"?D.aliases:!0;B=B||{};let q=null;if(Array.isArray(B.virtuals))q=new Set(B.virtuals);else if(B.virtuals?.pathsToSkip){q=new Set(J);for(let Q=0;Q<B.virtuals.pathsToSkip.length;Q++)if(q.has(B.virtuals.pathsToSkip[Q]))q.delete(B.virtuals.pathsToSkip[Q])}if(!C)return A;for($=0;$<Y;++$){if(E=J[$],q!=null&&!q.has(E))continue;if(!H&&Object.hasOwn(X.aliases,E))continue;if(G=E,B.path!=null){if(!E.startsWith(B.path+"."))continue;G=E.substring(B.path.length+1)}if(G.indexOf(".")===-1&&G===E){if(W=Z[E].applyGetters(void 0,F),W===void 0)continue;W=s6(W,B),A[G]=W;continue}let Q=G.split(".");if(W=s6(F.get(E),B),W===void 0)continue;let K=Q.length;C=A;for(let U=0;U<K-1;++U)C[Q[U]]=C[Q[U]]||{},C=C[Q[U]];C[Q[K-1]]=W}return A}function B$1(F,A){let B=F.$__schema,D=Object.keys(B.paths),X=D.length,Z,J=F._doc,$;if(!J)return A;while(X--){Z=D[X];let Y=Z.split("."),E=Y.length,G=E-1,C=A,W;if(J=F._doc,!F.$__isSelected(Z))continue;for(let H=0;H<E;++H){if(W=Y[H],$=J[W],C!=null&&typeof C!=="object")break;else if(H===G){if(C[W]=B.paths[Z].applyGetters(C[W],F),Array.isArray(C[W])&&B.paths[Z].embeddedSchemaType)for(let q=0;q<C[W].length;++q)C[W][q]=B.paths[Z].embeddedSchemaType.applyGetters(C[W][q],F)}else if($==null){if(W in J)C[W]=$;break}else C=C[W]||(C[W]={});J=$}}return A}function D$1(F,A){let B=F.$__schema,D=Object.keys(B.paths||{});if(!F._doc)return A;for(let Z of D){let J=B.paths[Z],$=J.options.transform??J.constructor?.defaultOptions?.transform,Y=J.embeddedSchemaType?.options?.transform??J.embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof $==="function"){let E=F.$get(Z);if(E===void 0)continue;let G=$.call(F,E);u_(Z,G),Z1.setValue(Z,G,A)}else if(typeof Y==="function"){let E=F.$get(Z);if(E===void 0)continue;let G=[].concat(E);for(let C=0;C<G.length;++C){let W=Y.call(F,G[C]);G[C]=W,u_(Z,W)}A[Z]=G}}return A}function u_(F,A){if(bY1(A))throw new Error("`transform` function must be synchronous, but the transform on path `"+F+"` returned a promise.")}/*!
 * ignore
 */function X$1(F,A){let B=F.$__schema,D=Object.keys(B.paths||{});if(!F._doc)return A;let Z=F.$__.selected;if(Z===void 0)Z={},gY1.applyPaths(Z,B);if(Z==null||Z1.hasOwnKeys(Z)===!1)return A;for(let J of D)if(Z[J]!=null&&!Z[J])delete A[J];return A}g.prototype.toJSON=function(F){return this.$toObject(F,!0)};/*!
 * ignore
 */g.prototype.ownerDocument=function(){return this};g.prototype.parent=function(){if(this.$isSubdocument||this.$__.wasPopulated)return this.$__.parent;return this};g.prototype.$parent=g.prototype.parent;g.prototype.$__setParent=function F(A){this.$__.parent=A};g.prototype.inspect=function(F){let A=Z1.isPOJO(F),B;if(A)B=F,B.minimize=!1;let D=arguments.length>0?this.toObject(B):this.toObject();if(D==null)return"MongooseDocument { "+D+" }";return D};if(tC.custom)g.prototype[tC.custom]=g.prototype.inspect;g.prototype.toString=function(){let F=this.inspect();if(typeof F==="string")return F;return tC(F)};g.prototype.equals=function(F){if(!F)return!1;let A=this.$__getValue("_id"),B=F.$__!=null?F.$__getValue("_id"):F;if(!A&&!B)return lD(this,F);return A&&A.equals?A.equals(B):A===B};g.prototype.populate=async function F(){let A={},B=[...arguments];if(typeof B[B.length-1]==="function")throw new l2("Document.prototype.populate() no longer accepts a callback");if(B.length!==0){let Z=Z1.populate.apply(null,B);for(let J of Z)A[J.path]=J}let D=Z1.object.vals(A),X=this.constructor;if(this.$__isNested){X=this.$__[lY1].constructor;let Z=this.$__.nestedPath;D.forEach(function(J){J.path=Z+"."+J.path})}if(this.$session()!=null){let Z=this.$session();D.forEach((J)=>{if(J.options==null){J.options={session:Z};return}if(!("session"in J.options))J.options.session=Z})}return D.forEach((Z)=>{Z._localModel=X}),X.populate(this,D)};g.prototype.$getPopulatedDocs=function F(){let A=[];if(this.$__.populated!=null)A=A.concat(Object.keys(this.$__.populated));let B=[];for(let D of A){let X=this.$get(D);if(Array.isArray(X))B=B.concat(X);else if(X instanceof g)B.push(X)}return B};g.prototype.populated=function(F,A,B){if(A==null||A===!0){if(!this.$__.populated)return;if(typeof F!=="string")return;let X=F.endsWith(".$*")?F.replace(/\.\$\*$/,""):F,Z=this.$__.populated[X];if(Z)return A===!0?Z:Z.value;return}this.$__.populated||(this.$__.populated={}),this.$__.populated[F]={value:A,options:B};let D=F.split(".");for(let X=0;X<D.length-1;++X){let Z=D.slice(0,X+1).join("."),J=this.$get(Z);if(J?.$__!=null&&this.$populated(Z)){let $=D.slice(X+1).join(".");J.$populated($,A,B);break}}return A};g.prototype.$populated=g.prototype.populated;g.prototype.$assertPopulated=function F(A,B){if(Array.isArray(A))return A.forEach((D)=>this.$assertPopulated(D,B)),this;if(arguments.length>1)this.$set(B);if(!this.$populated(A))throw new l2(`Expected path "${A}" to be populated`);return this};g.prototype.depopulate=function(F){if(typeof F==="string")F=F.indexOf(" ")===-1?[F]:F.split(" ");let A,B=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],D=this.$__?.populated||{};if(arguments.length===0){for(let Z of B)delete this.$$populatedVirtuals[Z],delete this._doc[Z],delete D[Z];let X=Object.keys(D);for(let Z of X){if(A=this.$populated(Z),!A)continue;if(delete D[Z],Array.isArray(A)){let J=Z1.getValue(Z,this._doc);if(J.isMongooseArray){let $=J.__array;for(let Y=0;Y<$.length;++Y){let E=$[Y];if(E==null)continue;$[Y]=E instanceof g?E._doc._id:E._id}}else Z1.setValue(Z,A,this._doc)}else Z1.setValue(Z,A,this._doc)}return this}for(let X of F)if(A=this.$populated(X),delete D[X],B.indexOf(X)!==-1)delete this.$$populatedVirtuals[X],delete this._doc[X];else if(A)if(Array.isArray(A)){let Z=Z1.getValue(X,this._doc);if(Z.isMongooseArray){let J=Z.__array;for(let $=0;$<J.length;++$){let Y=J[$];if(Y==null)continue;J[$]=Y instanceof g?Y._doc._id:Y._id}}else Z1.setValue(X,A,this._doc)}else Z1.setValue(X,A,this._doc);return this};g.prototype.$__fullPath=function(F){return F||""};g.prototype.getChanges=function(){let F=this.$__delta();return F?F[1]:{}};g.prototype.$__delta=function F(){let A=this.$__dirty(),B=this.$__schema.options.optimisticConcurrency;if(B)if(Array.isArray(B)){let Y=new Set(B);if(this.modifiedPaths().some((G)=>Y.has(G)))this.$__.version=A.length?3:1}else if(Array.isArray(B?.exclude)){let Y=new Set(B.exclude);if(this.modifiedPaths().some((G)=>!Y.has(G)))this.$__.version=A.length?3:1}else this.$__.version=A.length?3:1;if(!A.length&&this.$__.version!==3)return;let D={},X={},Z=A.length,J=[],$=0;if(D._id=this._doc._id,D?._id?.$__!=null)D._id=D._id.toObject({transform:!1,depopulate:!0});for(;$<Z;++$){let Y=A[$],E=Y.value,G=Z$1(this,Y.path,E);if(G){J.push(G);continue}if(!this.$populated(Y.path,!0)&&this.$__.selected){let W=Y.path.split("."),H=W[0];if(this.$__.selected[H]&&this.$__.selected[H].$elemMatch)if(W.length>1&&W[1]==0&&typeof D[H]==="undefined")D[H]=this.$__.selected[H],W[1]="$",Y.path=W.join(".");else{J.push(Y.path);continue}}if(this.$isDefault(Y.path)&&this.$__.selected){if(Y.path.indexOf(".")===-1&&j_(this.$__.selected,Y.path))continue;if(eC(Y.path).find((H)=>j_(this.$__.isSelected,H)))continue}if(J.length)continue;if(E===void 0)b3(this,D,X,Y,1,"$unset");else if(E===null)b3(this,D,X,Y,null);else if(typeof E.getAtomics==="function")J$1(this,D,X,Y,E);else if(E[RY1.pathSymbol]&&Buffer.isBuffer(E))E=E.toObject(),b3(this,D,X,Y,E);else if(this.$__.primitiveAtomics?.[Y.path]!=null){let W=this.$__.primitiveAtomics[Y.path],H=TY1(W);b3(this,D,X,Y,W[H],H)}else E=s6(E,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),b3(this,D,X,Y,E)}if(J.length)throw new LY1(J);if(this.$__.version)this.$__version(D,X);if(Z1.hasOwnKeys(X)===!1)return[D,null];return[D,X]};function Z$1(F,A,B){let D=F.$populated(A,!0);if(!D&&F.$__.selected){let Z=A.split(".")[0];if(F.$__.selected[Z+".$"])return Z}if(!(D&&Z1.isMongooseArray(B)))return;if(D.options.match||D.options.options&&Object.hasOwn(D.options.options,"limit")||D.options.options?.skip||D.options.select&&(D.options.select._id===0||/\s?-_id\s?/.test(D.options.select))){let Z=B[p2];if(Z1.hasOwnKeys(Z)===!1||Z.$set||Z.$pop)return A}}function b3(F,A,B,D,X,Z){if(Z||(Z="$set"),!B[Z])B[Z]={};if(B[Z][D.path]=X,F.$__schema.options.versionKey===!1)return;if(Y$1(F,D.path))return;if((3&F.$__.version)===3)return;if(F.$__schema.options.optimisticConcurrency===!0||Array.isArray(F.$__schema.options.optimisticConcurrency)||Array.isArray(F.$__schema.options.optimisticConcurrency?.exclude))return;switch(Z){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}if(Z==="$push"||Z==="$addToSet"||Z==="$pullAll"||Z==="$pull")if(/\.\d+\.|\.\d+$/.test(D.path))F.$__.version=3;else F.$__.version|=2;else if(/^\$p/.test(Z))F.$__.version=3;else if(Array.isArray(X))F.$__.version=3;else if(/\.\d+\.|\.\d+$/.test(D.path))F.$__.version|=1}function J$1(F,A,B,D,X){if(B.$set?.[D.path])return;if(typeof X.getAtomics==="function"){X.getAtomics().forEach(function(C){let W=C[0],H=C[1];b3(F,A,B,D,H,W)});return}if(typeof X.$__getAtomics==="function"){X.$__getAtomics().forEach(function(C){let W=C[0],H=C[1];b3(F,A,B,D,H,W)});return}let Z=X[p2],J=Object.keys(Z),$=J.length,Y,E;if($===0){if(Z1.isMongooseObject(X))X=X.toObject({depopulate:1,_isNested:!0});else if(X.valueOf)X=X.valueOf();return b3(F,A,B,D,X)}function G(C){return Z1.isMongooseObject(C)?C.toObject({depopulate:1,_isNested:!0}):C}while($--){if(E=J[$],Y=Z[E],Z1.isMongooseObject(Y))Y=Y.toObject({depopulate:!0,transform:!1,_isNested:!0});else if(Array.isArray(Y))Y=Y.map(G);else if(Y.valueOf)Y=Y.valueOf();if(E==="$addToSet")Y={$each:Y};b3(F,A,B,D,Y,E)}}function Y$1(F,A){let B=F.$__schema.options.skipVersioning;if(!B)return!1;return A=A.replace(/\.\d+\./,"."),B[A]}g.prototype.$clone=function(){let A=new this.constructor;if(A.$isNew=this.$isNew,this._doc)A._doc=s6(this._doc,{retainDocuments:!0,parentDoc:A});if(this.$__){let D=new this.$__.constructor;for(let X of Object.getOwnPropertyNames(this.$__)){if(X==="activePaths")continue;D[X]=s6(this.$__[X])}Object.assign(D.activePaths,s6({...this.$__.activePaths})),A.$__=D}return A};g.prototype.$createModifiedPathsSnapshot=function F(){let A=new WeakMap;if(!this.$isSubdocument){let B=this.$getAllSubdocs();for(let D of B)A.set(D,D.$__.activePaths.clone())}return new PY1(A,this.$__.activePaths.clone(),this.$__.version)};g.prototype.$restoreModifiedPathsSnapshot=function F(A){if(this.$__.activePaths=A.activePaths.clone(),this.$__.version=A.version,!this.$isSubdocument){let B=this.$getAllSubdocs();for(let D of B)if(A.subdocSnapshot.has(D))D.$__.activePaths=A.subdocSnapshot.get(D)}return this};g.prototype.$clearModifiedPaths=function F(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let A=this.$getAllSubdocs();for(let B of A)B.$clearModifiedPaths()}return this};/*!
 * Check if the given document only has primitive values
 */g.prototype.$__hasOnlyPrimitiveValues=function F(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every((A)=>{return A==null||typeof A!=="object"||Z1.isNativeObject(A)&&!Array.isArray(A)||M_(A,"ObjectId")||M_(A,"Decimal128")}))};/*!
 * Increment this document's version if necessary.
 */g.prototype._applyVersionIncrement=function F(){if(!this.$__.version)return;let A=(2&this.$__.version)===2;if(this.$__.version=void 0,A){let B=this.$__schema.options.versionKey,D=this.$__getValue(B)||0;this.$__setValue(B,D+1)}};/*!
 * Increment this document's version if necessary.
 */g.prototype._applyVersionIncrement=function F(){if(!this.$__.version)return;let A=(2&this.$__.version)===2;if(this.$__.version=void 0,A){let B=this.$__schema.options.versionKey,D=this.$__getValue(B)||0;this.$__setValue(B,D+1)}};/*!
 * Module exports.
 */g.VERSION_WHERE=1;g.VERSION_INC=2;g.VERSION_ALL=3;g.ValidationError=iD;d_.exports=m_=g});var B1=z((V$1)=>{/*!
 * Module dependencies.
 */var $$1=$1().UUID,E$1=uS(),a_=C6(),G$1=j4(),s_=RC(),BW=C0(),C$1=B4(),W$1=w9(),r_=zD(),t_=dS(),O4=B2(),H$1=o7(),q$1=mG(),RF=qF(),z$1=wD(),PF=L9(),{trustedSymbol:W8}=e7(),AW;V$1.specialProperties=PF;V$1.isMongooseArray=r_.isMongooseArray;V$1.isMongooseDocumentArray=t_.isMongooseDocumentArray;V$1.registerMongooseArray=r_.registerMongooseArray;V$1.registerMongooseDocumentArray=t_.registerMongooseDocumentArray;var DW=/\s/,XW=/\s+/;V$1.toCollectionName=function(F,A){if(F==="system.profile")return F;if(F==="system.indexes")return F;if(typeof A==="function"){if(typeof F!=="string")throw new TypeError("Collection name must be a string");if(F.length===0)throw new TypeError("Collection name cannot be empty");return A(F)}return F};V$1.deepEqual=function F(A,B){if(A===B)return!0;if(typeof A!=="object"||typeof B!=="object")return A===B;if(A instanceof Date&&B instanceof Date)return A.getTime()===B.getTime();if(O4(A,"ObjectId")&&O4(B,"ObjectId")||O4(A,"Decimal128")&&O4(B,"Decimal128"))return A.toString()===B.toString();if(A instanceof RegExp&&B instanceof RegExp)return A.source===B.source&&A.ignoreCase===B.ignoreCase&&A.multiline===B.multiline&&A.global===B.global&&A.dotAll===B.dotAll&&A.unicode===B.unicode&&A.sticky===B.sticky&&A.hasIndices===B.hasIndices;if(A==null||B==null)return!1;if(A.prototype!==B.prototype)return!1;if(A instanceof Map||B instanceof Map){if(!(A instanceof Map)||!(B instanceof Map))return!1;return F(Array.from(A.keys()),Array.from(B.keys()))&&F(Array.from(A.values()),Array.from(B.values()))}if(A instanceof Number&&B instanceof Number)return A.valueOf()===B.valueOf();if(Buffer.isBuffer(A))return V$1.buffer.areEqual(A,B);if(Array.isArray(A)||Array.isArray(B)){if(!Array.isArray(A)||!Array.isArray(B))return!1;let J=A.length;if(J!==B.length)return!1;for(let $=0;$<J;++$)if(!F(A[$],B[$]))return!1;return!0}if(A.$__!=null)A=A._doc;else if(RF(A))A=A.toObject();if(B.$__!=null)B=B._doc;else if(RF(B))B=B.toObject();let D=Object.keys(A),X=Object.keys(B),Z=D.length;if(Z!==X.length)return!1;for(let J=Z-1;J>=0;J--)if(D[J]!==X[J])return!1;for(let J of D)if(!F(A[J],B[J]))return!1;return!0};V$1.last=function(F){if(F==null)return;if(F.length>0)return F[F.length-1];return};/*!
 * ignore
 */V$1.cloneArrays=function F(A){if(!Array.isArray(A))return A;return A.map((B)=>V$1.cloneArrays(B))};/*!
 * ignore
 */V$1.omit=function F(A,B){if(B==null)return Object.assign({},A);if(!Array.isArray(B))B=[B];let D=Object.assign({},A);for(let X of B)delete D[X];return D};V$1.clonePOJOsAndArrays=function F(A){if(A==null)return A;if(A.$__!=null)return A;if(H$1(A)){A={...A};for(let B of Object.keys(A))A[B]=V$1.clonePOJOsAndArrays(A[B]);return A}if(Array.isArray(A)){A=[...A];for(let B=0;B<A.length;++B)A[B]=V$1.clonePOJOsAndArrays(A[B]);return A}return A};V$1.merge=function F(A,B,D,X){if(D=D||{},B==null)return A;let Z=Object.keys(B),J=0,$=Z.length,Y;if(B[W8])A[W8]=B[W8];X=X||"";let E=D.omitNested||{};while(J<$){if(Y=Z[J++],D.omit&&D.omit[Y])continue;if(E[X])continue;if(PF.has(Y))continue;if(A[Y]==null)A[Y]=V$1.clonePOJOsAndArrays(B[Y]);else if(V$1.isObject(B[Y])){if(!V$1.isObject(A[Y]))A[Y]={};if(B[Y]!=null){if(D.isDiscriminatorSchemaMerge&&(B[Y].$isSingleNested&&A[Y].$isMongooseDocumentArray)||B[Y].$isMongooseDocumentArray&&A[Y].$isSingleNested)continue;else if(B[Y].instanceOfSchema){if(A[Y].instanceOfSchema)z$1(A[Y],B[Y].clone(),D.isDiscriminatorSchemaMerge);else A[Y]=B[Y].clone();continue}else if(O4(B[Y],"ObjectId")){A[Y]=new G$1(B[Y]);continue}}F(A[Y],B[Y],D,X?X+"."+Y:Y)}else if(D.overwrite)A[Y]=B[Y]}return A};V$1.toObject=function F(A){AW||(AW=W3());let B;if(A==null)return A;if(A instanceof AW)return A.toObject();if(Array.isArray(A)){B=[];for(let D of A)B.push(F(D));return B}if(V$1.isPOJO(A)){if(B={},A[W8])B[W8]=A[W8];for(let D of Object.keys(A)){if(PF.has(D))continue;B[D]=F(A[D])}return B}return A};V$1.isObject=W$1;V$1.isPOJO=o7();V$1.isNonBuiltinObject=function F(A){return typeof A==="object"&&!V$1.isNativeObject(A)&&!V$1.isMongooseType(A)&&!(A instanceof $$1)&&A!=null};V$1.isNativeObject=function(F){return Array.isArray(F)||F instanceof Date||F instanceof Boolean||F instanceof Number||F instanceof String};V$1.isEmptyObject=function F(A){if(A==null||typeof A!=="object")return!1;return V$1.hasOwnKeys(A)===!1};V$1.hasOwnKeys=function F(A){for(let B in A)if(Object.prototype.hasOwnProperty.call(A,B))return!0;return!1};V$1.hasKey=function F(A,B){let D=Object.keys(A);for(let X of D){if(X===B)return!0;if(V$1.isPOJO(A[X])&&V$1.hasKey(A[X],B))return!0}return!1};V$1.tick=function F(A){if(typeof A!=="function")return;return function(){try{A.apply(this,arguments)}catch(B){C$1(function(){throw B})}}};V$1.isMongooseType=function(F){return O4(F,"ObjectId")||O4(F,"Decimal128")||F instanceof Buffer};V$1.isMongooseObject=RF;V$1.expires=function F(A){if(!(A&&A.constructor.name==="Object"))return;if(!("expires"in A))return;A.expireAfterSeconds=typeof A.expires!=="string"?A.expires:Math.round(E$1(A.expires)/1000),delete A.expires};V$1.populate=function F(A,B,D,X,Z,J,$,Y){let E=null;if(arguments.length===1){if(A instanceof s_)return A._docs={},A._childDocs=[],[A];if(Array.isArray(A))return G(A).map((W)=>V$1.populate(W)[0]);if(V$1.isObject(A))E=Object.assign({},A);else E={path:A}}else if(typeof D==="object")E={path:A,select:B,match:D,options:X};else E={path:A,select:B,model:D,match:X,options:Z,populate:J,justOne:$,count:Y};if(typeof E.path!=="string"&&!(Array.isArray(E.path)&&E.path.every((C)=>typeof C==="string")))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof A+"`");return Q$1(E);function G(C){let W=[];return C.forEach(function(H){if(DW.test(H.path))H.path.split(XW).forEach(function(Q){let K=Object.assign({},H);K.path=Q,W.push(K)});else W.push(H)}),W}};function Q$1(F){if(Array.isArray(F.populate)){let D=[];F.populate.forEach(function(X){if(DW.test(X.path)){let Z=Object.assign({},X);Z.path.split(XW).forEach(function($){Z.path=$,D.push(V$1.populate(Z)[0])})}else D.push(V$1.populate(X)[0])}),F.populate=V$1.populate(D)}else if(F.populate!=null&&typeof F.populate==="object")F.populate=V$1.populate(F.populate);let A=[],B=DW.test(F.path)?F.path.split(XW):Array.isArray(F.path)?F.path:[F.path];if(F.options!=null)F.options=BW(F.options);for(let D of B)A.push(new s_(Object.assign({},F,{path:D})));return A}V$1.getValue=function(F,A,B){return a_.get(F,A,U$1,B)};/*!
 * ignore
 */var K$1=Object.freeze({getters:!1});function U$1(F,A){if(A==="$*"&&F instanceof Map)return F;let B=F?._doc||F;if(B?.isMongooseArrayProxy)B=B.__array;return B instanceof Map?B.get(A,K$1):B[A]}V$1.setValue=function(F,A,B,D,X){a_.set(F,A,B,"_doc",D,X)};V$1.object={};V$1.object.vals=function F(A){if(A==null)return[];let B=Object.keys(A),D=B.length,X=[];while(D--)X.push(A[B[D]]);return X};V$1.isNullOrUndefined=function(F){return F==null};/*!
 * ignore
 */V$1.array={};V$1.array.flatten=function F(A,B,D){return D||(D=[]),A.forEach(function(X){if(Array.isArray(X))F(X,B,D);else if(!B||B(X))D.push(X)}),D};/*!
 * ignore
 */V$1.hasUserDefinedProperty=function(F,A){if(F==null)return!1;if(Array.isArray(A)){for(let B of A)if(V$1.hasUserDefinedProperty(F,B))return!0;return!1}if(Object.hasOwn(F,A))return!0;if(typeof F==="object"&&A in F){let B=F[A];return B!==Object.prototype[A]&&B!==Array.prototype[A]}return!1};/*!
 * ignore
 */var c_=Math.pow(2,32)-1;V$1.isArrayIndex=function(F){if(typeof F==="number")return F>=0&&F<=c_;if(typeof F==="string"){if(!/^\d+$/.test(F))return!1;return F=+F,F>=0&&F<=c_}return!1};V$1.array.unique=function(F){let A=new Set,B=new Set,D=[];for(let X of F)if(typeof X==="number"||typeof X==="string"||X==null){if(A.has(X))continue;D.push(X),A.add(X)}else if(O4(X,"ObjectId")){if(B.has(X.toString()))continue;D.push(X),B.add(X.toString())}else D.push(X);return D};V$1.buffer={};V$1.buffer.areEqual=function(F,A){if(!Buffer.isBuffer(F))return!1;if(!Buffer.isBuffer(A))return!1;return F.equals(A)};V$1.getFunctionName=q$1;V$1.decorate=function(F,A){for(let B in A){if(PF.has(B))continue;F[B]=A[B]}};V$1.mergeClone=function(F,A){if(RF(A))A=A.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});let B=Object.keys(A),D=B.length,X=0,Z;while(X<D){if(Z=B[X++],PF.has(Z))continue;if(typeof F[Z]==="undefined")F[Z]=BW(A[Z],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let J=A[Z];if(J?.valueOf&&!(J instanceof Date))J=J.valueOf();if(V$1.isObject(J)){let $=J;if(RF(J)&&!J.isMongooseBuffer)$=$.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});if(J.isMongooseBuffer)$=Buffer.from($);V$1.mergeClone(F[Z],$)}else F[Z]=BW(J,{flattenDecimals:!1})}}};V$1.each=function(F,A){for(let B of F)A(B)};V$1.renameObjKey=function(F,A,B){return Object.keys(F).reduce((X,Z)=>{if(Z===A)X[B]=F[A];else X[Z]=F[Z];return X},{})};/*!
 * ignore
 */V$1.getOption=function(F){let A=Array.prototype.slice.call(arguments,1);for(let B of A){if(B==null)continue;if(B[F]!=null)return B[F]}return null};/*!
 * ignore
 */V$1.noop=function(){};V$1.errorToPOJO=function F(A){if(!(A instanceof Error))throw new Error("`error` must be `instanceof Error`.");let D={};for(let X of Object.getOwnPropertyNames(A))D[X]=A[X];return D};/*!
 * ignore
 */V$1.warn=function F(A){return process.emitWarning(A,{code:"MONGOOSE"})};V$1.injectTimestampsOption=function F(A,B){if(B==null)return;A.timestamps=B}});var Q0=z((tD,Jf)=>{/*!
 * Module dependencies.
 */var NF=E6(),Zf=c2(),o$1=VD(),e$1=LC(),rD=C0(),JW=IS(),FE1=MS(),YW=TS(),AE1=t().schemaTypeSymbol,O9=B1(),IF=t().validatorErrorSymbol,BE1=t().documentIsModified,Af=t().populateModelSymbol,$W=NF.CastError,H8=NF.ValidatorError,DE1={_skipMarkModified:!0};function C1(F,A,B,D){this[AE1]=!0,this.path=F,this.instance=B,this.schemaName=this.constructor.schemaName,this.validators=[],this.getters=Object.hasOwn(this.constructor,"getters")?this.constructor.getters.slice():[],this.setters=Object.hasOwn(this.constructor,"setters")?this.constructor.setters.slice():[],this.splitPath(),A=A||{};let X=this.constructor.defaultOptions||{},Z=Object.keys(X);for(let Y of Z)if(Y==="validate")this.validate(X.validate);else if(Object.hasOwn(X,Y)&&!Object.hasOwn(A,Y))A[Y]=X[Y];if(A.select==null)delete A.select;let J=this.OptionsConstructor||Zf;if(this.options=new J(A),this.parentSchema=D,this._index=null,O9.hasUserDefinedProperty(this.options,"immutable"))this.$immutable=this.options.immutable,JW(this);let $=Object.keys(this.options);for(let Y of $){if(Y==="cast"){if(Array.isArray(this.options[Y]))this.castFunction.apply(this,this.options[Y]);else this.castFunction(this.options[Y]);continue}if(O9.hasUserDefinedProperty(this.options,Y)&&typeof this[Y]==="function"){if(Y==="index"&&this._index){if(A.index===!1){let C=this._index;if(typeof C==="object"&&C!=null){if(C.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(C.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let E=A[Y];if(Y==="default"){this.default(E);continue}let G=Array.isArray(E)?E:[E];this[Y].apply(this,G)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}C1.prototype.OptionsConstructor=Zf;C1.prototype.path;C1.prototype.toJSON=function F(){let A={...this};return delete A.parentSchema,A};C1.prototype.validators;C1.prototype.isRequired;C1.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path==null)return;return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};C1.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=(B)=>B;return this._cast=A,this._cast};C1.prototype.castFunction=function F(A,B){if(arguments.length===0)return this._castFunction;if(A===!1)A=this.constructor._defaultCaster||((D)=>D);if(typeof A==="string")return this._castErrorMessage=A,this._castFunction;if(A!=null)this._castFunction=A;if(B!=null)this._castErrorMessage=B;return this._castFunction};C1.prototype.cast=function F(){throw new Error("Base SchemaType class does not implement a `cast()` function")};C1.set=function F(A,B){if(!Object.hasOwn(this,"defaultOptions"))this.defaultOptions=Object.assign({},this.defaultOptions);this.defaultOptions[A]=B};C1.get=function(F){this.getters=Object.hasOwn(this,"getters")?this.getters:[],this.getters.push(F)};C1.prototype.default=function(F){if(arguments.length===1){if(F===void 0){this.defaultValue=void 0;return}if(F?.instanceOfSchema)throw new NF("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=F,this.defaultValue}else if(arguments.length>1)this.defaultValue=[...arguments];return this.defaultValue};C1.prototype.index=function(F){return this._index=F,O9.expires(this._index),this};C1.prototype.unique=function F(A,B){if(this._index===!1){if(!A)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}if(!Object.hasOwn(this.options,"index")&&A===!1)return this;if(this._index==null||this._index===!0)this._index={};else if(typeof this._index==="string")this._index={type:this._index};if(this._index.unique=!!A,typeof B==="string")this._duplicateKeyErrorMessage=B;return this};C1.prototype.text=function(F){if(this._index===!1){if(!F)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}if(!Object.hasOwn(this.options,"index")&&F===!1)return this;if(this._index===null||this._index===void 0||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.text=F,this};C1.prototype.sparse=function(F){if(this._index===!1){if(!F)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}if(!Object.hasOwn(this.options,"index")&&F===!1)return this;if(this._index==null||typeof this._index==="boolean")this._index={};else if(typeof this._index==="string")this._index={type:this._index};return this._index.sparse=F,this};C1.prototype.immutable=function(F){return this.$immutable=F,JW(this),this};C1.prototype.transform=function(F){return this.options.transform=F,this};C1.prototype.set=function(F){if(typeof F!=="function")throw new TypeError("A setter must be a function.");return this.setters.push(F),this};C1.prototype.get=function(F){if(typeof F!=="function")throw new TypeError("A getter must be a function.");return this.getters.push(F),this};C1.prototype.validateAll=function(F){for(let A=0;A<F.length;A++)this.validate(F[A]);return this};C1.prototype.validate=function(F,A,B){if(typeof F==="function"||F&&O9.getFunctionName(F.constructor)==="RegExp"){let J;if(typeof A==="function")J={validator:F,message:A},J.type=B||"user defined";else if(A instanceof Object&&!B){if(J=YW(A)?Object.assign({},A):rD(A),!J.message)J.message=J.msg;J.validator=F,J.type=J.type||"user defined"}else{if(A==null)A=NF.messages.general.default;if(!B)B="user defined";J={message:A,type:B,validator:F}}return this.validators.push(J),this}let D,X,Z;for(D=0,X=arguments.length;D<X;D++){if(Z=arguments[D],!O9.isPOJO(Z)){let J="Invalid validator. Received ("+typeof Z+") "+Z+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(J)}this.validate(Z.validator,Z)}return this};C1.prototype.required=function(F,A){let B={};if(arguments.length>0&&F==null)return this.validators=this.validators.filter(function(Z){return Z.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof F==="object")B=F,A=B.message||A,F=F.isRequired;if(F===!1)return this.validators=this.validators.filter(function(Z){return Z.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let D=this;if(this.isRequired=!0,this.requiredValidator=function(Z){let J=this?.$__?.cachedRequired;if(J!=null&&!this.$__isSelected(D.path)&&!this[BE1](D.path))return!0;if(J!=null&&D.path in J){let $=J[D.path]?D.checkRequired(Z,this):!0;return delete J[D.path],$}else if(typeof F==="function")return F.apply(this)?D.checkRequired(Z,this):!0;return D.checkRequired(Z,this)},this.originalRequiredValue=F,typeof F==="string")A=F,F=void 0;let X=A||NF.messages.general.required;return this.validators.unshift(Object.assign({},B,{validator:this.requiredValidator,message:X,type:"required"})),this};C1.prototype.ref=function(F){return this.options.ref=F,this};C1.prototype.getDefault=function(F,A,B){let D;if(this.defaultValue==null)return this.defaultValue;if(typeof this.defaultValue==="function")if(this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid")D=this.defaultValue.call(F);else D=this.defaultValue.call(F,F);else D=this.defaultValue;if(D!=null){if(typeof D==="object"&&!this.options?.shared)D=rD(D);if(B?.skipCast)return this._applySetters(D,F);let X=this.applySetters(D,F,A,void 0,DE1);if(X&&!Array.isArray(X)&&X.$isSingleNested)X.$__parent=F;return X}return D};C1.prototype._applySetters=function(F,A,B,D,X){let Z=F;if(B)return Z;let J=this.setters;for(let $=J.length-1;$>=0;$--)Z=J[$].call(A,Z,D,this,X);return Z};/*!
 * ignore
 */C1.prototype._castNullish=function F(A){return A};C1.prototype.applySetters=function(F,A,B,D,X){let Z=this._applySetters(F,A,B,D,X);if(Z==null)return this._castNullish(Z);return Z=this.cast(Z,A,B,D,X),Z};C1.prototype.applyGetters=function(F,A){let B=F,D=this.getters,X=D.length;if(X===0)return B;for(let Z=0;Z<X;++Z)B=D[Z].call(A,B,this);return B};C1.prototype.select=function F(A){return this.selected=!!A,this};C1.prototype.doValidate=async function F(A,B,D){let X=!1,Z=this.path,J=this.validators.filter((Y)=>typeof Y==="object"&&Y!==null);if(!J.length)return;let $=[];for(let Y=0,E=J.length;Y<E;++Y){let G=J[Y],C=G.validator,W,H=YW(G)?Object.assign({},G):rD(G);if(H.path=D?.path||Z,H.fullPath=this.$fullPath,H.value=A,typeof A==="string"){if(H.length=A.length,H.value.length>30)H.value=H.value.slice(0,30)+"..."}if(A===void 0&&C!==this.requiredValidator)continue;if(C instanceof RegExp){if(W=C.test(A),W===!1)throw X=new(H.ErrorConstructor||H8)(H,B),X[IF]=!0,X;continue}else if(typeof C!=="function")continue;try{if(H.propsParameter)W=C.call(B,A,H);else W=C.call(B,A)}catch(q){if(W=!1,H.reason=q,q.message)H.message=q.message}if(typeof W?.then==="function")$.push(W.then(function(q){if(q===!1)throw X=new(H.ErrorConstructor||H8)(H,B),X[IF]=!0,X},function(q){throw H.reason=q,H.message=q.message,W=!1,X=new(H.ErrorConstructor||H8)(H,B),X[IF]=!0,X}));else if(W!==void 0&&!W)throw X=new(H.ErrorConstructor||H8)(H,B),X[IF]=!0,X}await Promise.all($)};function Bf(F,A){if(F!==void 0&&!F){let D=new(A.ErrorConstructor||H8)(A);return D[IF]=!0,D}}C1.prototype.doValidateSync=function(F,A,B){let D=this.path;if(!this.validators.length)return null;let Z=this.validators;if(F===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")Z=[this.validators[0]];else return null;let J=null,$=0,Y=Z.length;for($=0;$<Y;++$){let E=Z[$];if(E===null||typeof E!=="object")continue;let G=E.validator,C=YW(E)?Object.assign({},E):rD(E);if(C.path=B?.path||D,C.fullPath=this.$fullPath,C.value=F,typeof F==="string"){if(C.length=F.length,C.value.length>30)C.value=C.value.slice(0,30)+"..."}let W=!1;if(FE1(G))continue;if(G instanceof RegExp){J=Bf(G.test(F),C);continue}if(typeof G!=="function")continue;try{if(C.propsParameter)W=G.call(A,F,C);else W=G.call(A,F)}catch(H){W=!1,C.reason=H}if(typeof W?.then==="function")continue;if(J=Bf(W,C),J)break}return J};C1._isRef=function(F,A,B,D){let X=D&&(F.options?.ref||F.options?.refPath);if(!X&&B?.$__!=null){let Z=B.$__fullPath(F.path,!0),J=B.ownerDocument();X=Z!=null&&J.$populated(Z)||B.$populated(F.path)}if(X){if(A==null)return!0;if(!Buffer.isBuffer(A)&&A._bsontype!=="Binary"&&O9.isObject(A))return!0;return D}return!1};/*!
 * ignore
 */C1.prototype._castRef=function F(A,B,D,X){if(A==null)return A;if(A.$__!=null)return A.$__.wasPopulated=A.$__.wasPopulated||{value:A._doc._id},A;if(Buffer.isBuffer(A)||!O9.isObject(A)){if(D)return A;throw new $W(this.instance,A,this.path,null,this)}let Z=B.$__fullPath(this.path,!0),$=B.ownerDocument().$populated(Z,!0),Y=A;if(!B.$__.populated||!B.$__.populated[Z]||!B.$__.populated[Z].options||!B.$__.populated[Z].options.options||!B.$__.populated[Z].options.options.lean){let E=$?$.options[Af]:B.constructor.db.model(this.options.ref);Y=E.hydrate(A,null,X),Y.$__.wasPopulated={value:Y._doc._id,options:{[Af]:E}}}return Y};/*!
 * ignore
 */function Df(F,A){return this.castForQuery(null,F,A)}/*!
 * ignore
 */function XE1(F,A){let B=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(D){return B.castForQuery(null,D,A)})}function Xf(F,A){let B=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(D){if(Array.isArray(D)&&D.length===0)return D;return B.castForQuery(null,D,A)})}C1.prototype.$conditionalHandlers={$all:XE1,$eq:Df,$in:Xf,$ne:Df,$nin:Xf,$exists:o$1,$type:e$1};C1.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can't use "+F);return D.call(this,A,B)}try{return this.applySetters(A,B)}catch(X){if(X instanceof $W&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};C1.checkRequired=function(F){if(arguments.length!==0)this._checkRequired=F;return this._checkRequired};C1.prototype.checkRequired=function(F){return F!=null};C1.prototype.clone=function(){let F=Object.assign({},this.options),A=new this.constructor(this.path,F,this.instance,this.parentSchema);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;if(this.defaultValue!==void 0)A.defaultValue=this.defaultValue;if(this.$immutable!==void 0&&this.options.immutable===void 0)A.$immutable=this.$immutable,JW(A);if(this._index!==void 0)A._index=this._index;if(this.selected!==void 0)A.selected=this.selected;if(this.isRequired!==void 0)A.isRequired=this.isRequired;if(this.originalRequiredValue!==void 0)A.originalRequiredValue=this.originalRequiredValue;return A.getters=this.getters.slice(),A.setters=this.setters.slice(),A};C1.prototype.getEmbeddedSchemaType=function F(){return this.embeddedSchemaType};/*!
 * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
 *
 * @api private
 */C1.prototype._duplicateKeyErrorMessage=null;C1.prototype.toJSONSchema=function F(A){throw new Error(`Converting unsupported SchemaType to JSON Schema: ${this.instance} at path "${this.path}"`)};C1.prototype.autoEncryptionType=function F(){return null};/*!
 * Module exports.
 */Jf.exports=tD=C1;tD.CastError=$W;tD.ValidatorError=H8});var EW=z((bj1,Yf)=>{var r6=G6();class W6{constructor(F){if(Object.assign(this,F),F?.options!=null)this.options=Object.assign({},F.options)}}Object.defineProperty(W6.prototype,"ref",r6);Object.defineProperty(W6.prototype,"refPath",r6);Object.defineProperty(W6.prototype,"localField",r6);Object.defineProperty(W6.prototype,"foreignField",r6);Object.defineProperty(W6.prototype,"justOne",r6);Object.defineProperty(W6.prototype,"count",r6);Object.defineProperty(W6.prototype,"match",r6);Object.defineProperty(W6.prototype,"options",r6);Object.defineProperty(W6.prototype,"skip",r6);Object.defineProperty(W6.prototype,"limit",r6);Object.defineProperty(W6.prototype,"perDocumentLimit",r6);Yf.exports=W6});var oD=z((yj1,$f)=>{$f.exports=function F(A,B,D){if(A==null)return A;if(A._doc!=null)A=A._doc;if(arguments.length>=3){if(typeof A!=="object")return;if(D===void 0)return;if(A instanceof Map)A.set(B,D);else A[B]=D;return D}if(B==="$*")return A instanceof Map?Array.from(A.values()):Object.keys(A).map((X)=>A[X]);if(A instanceof Map)return A.get(B);return A[B]}});var GW=z((hj1,Wf)=>{var ZE1=K1(),JE1=OC(),Ef=oD(),Gf=C6(),YE1=c("util"),$E1=B1(),Cf=/(\.\d+$|\.\d+\.)/g;Wf.exports=function F(A,B,D,X,Z){if(A==null)return[];if(typeof A==="string"&&Z!=null&&JE1(Z,A))throw new ZE1("refPath `"+A+"` must not be excluded in projection, got "+YE1.inspect(Z));if(Cf.test(D)){let Y=D.split(Cf);if(Y[Y.length-1]==="")throw new Error("Can't populate individual element in an array");let E="",G=A;for(let H=0;H<Y.length;H+=2){let q=Y[H];if(G.startsWith(q+"."))E+=G.substring(0,q.length)+Y[H+1],G=G.substring(q.length+1);else if(H===Y.length-1){E+=G,G="";break}else throw new Error("Could not normalize ref path, chunk "+q+" not in populated path")}let C=Gf.get(E,B,Ef),W=Array.isArray(C)?C:[C];return W=$E1.array.flatten(W),W}let J=Gf.get(A,B,Ef),$;if(X!=null&&Object.hasOwn(X.virtuals,A))$=[X.virtuals[A].applyGetters(void 0,B)];else $=Array.isArray(J)?J:[J];return $}});var eD=z((vj1,Hf)=>{var EE1=GW(),GE1=B1(),CE1=t().modelSymbol;function y3(F,A){this.path=A,this.getters=[],this.setters=[],this.options=Object.assign({},F)}y3.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let A="$"+this.path;this.getters.push(function(){return this.$locals[A]}),this.setters.push(function(B){this.$locals[A]=B})};/*!
 * ignore
 */y3.prototype.clone=function(){let F=new y3(this.options,this.path);return F.getters=[].concat(this.getters),F.setters=[].concat(this.setters),F};y3.prototype.get=function(F){return this.getters.push(F),this};y3.prototype.set=function(F){return this.setters.push(F),this};y3.prototype.applyGetters=function(F,A){if(GE1.hasUserDefinedProperty(this.options,["ref","refPath"])&&A.$$populatedVirtuals&&Object.hasOwn(A.$$populatedVirtuals,this.path))F=A.$$populatedVirtuals[this.path];let B=F;for(let D of this.getters)B=D.call(A,B,this,A);return B};y3.prototype.applySetters=function(F,A){let B=F;for(let D of this.setters)B=D.call(A,B,this,A);return B};y3.prototype._getModelNamesForPopulate=function F(A){if(this.options.refPath)return EE1(this.options.refPath,A,this.path);let B=null;if(typeof this.options.ref==="function"&&!this.options.ref[CE1])B=this.options.ref.call(A,A);else B=this.options.ref;if(B!=null&&!Array.isArray(B))return[B];return B};/*!
 * exports
 */Hf.exports=y3});var CW=z((mj1,qf)=>{qf.exports=function F(A){let B={_id:{auto:!0}};B._id[A.options.typeKey]="ObjectId",A.add(B)}});var WW=z((dj1,zf)=>{zf.exports=function F(A,B){let D=A.discriminatorMapping?.value;if(D&&!("sparse"in B)){let X=A.options.discriminatorKey;B.partialFilterExpression=B.partialFilterExpression||{},B.partialFilterExpression[X]=D}return B}});var Kf=z((cj1,Qf)=>{var HW=K0(),WE1=w9(),HE1=WW();Qf.exports=function F(A){let B=[],D=new WeakMap,X=A.constructor.indexTypes,Z=new Map;return J(A),B;function J(Y,E,G){if(D.has(Y))return;D.set(Y,!0),E=E||"";let C=Object.keys(Y.paths);for(let W of C){let H=Y.paths[W];if(G!=null&&G.paths[W])continue;if(H._duplicateKeyErrorMessage!=null)Y._duplicateKeyErrorMessagesByPath=Y._duplicateKeyErrorMessagesByPath||{},Y._duplicateKeyErrorMessagesByPath[W]=H._duplicateKeyErrorMessage;if(H.$isMongooseDocumentArray||H.$isSingleNested){if(HW(H,"options.excludeIndexes")!==!0&&HW(H,"schemaOptions.excludeIndexes")!==!0&&HW(H,"schema.options.excludeIndexes")!==!0)J(H.schema,E+W+".");if(H.schema.discriminators!=null){let Q=H.schema.discriminators,K=Object.keys(Q);for(let U of K)J(Q[U],E+W+".",H.schema)}if(H.$isMongooseDocumentArray)continue}let q=H._index||H.embeddedSchemaType&&H.embeddedSchemaType._index;if(q!==!1&&q!=null){let Q={},K=WE1(q),U=K?{...q}:{},R=typeof q==="string"?q:K?q.type:!1;if(R&&X.indexOf(R)!==-1)Q[E+W]=R;else if(U.text)Q[E+W]="text",delete U.text;else{let V=!1;if(q==="descending"||q==="desc")V=!0;else if(q==="ascending"||q==="asc")V=!1;else V=Number(q)===-1;Q[E+W]=V?-1:1}if(delete U.type,Y.options.autoIndex!=null)U._autoIndex=Y.options.autoIndex;let w=U?.name;if(typeof w==="string")if(Z.has(w))Object.assign(Z.get(w),Q);else B.push([Q,U]),Z.set(w,Q);else B.push([Q,U]),Z.set(w,Q)}}if(D.delete(Y),E)$(Y,E);else Y._indexes.forEach(function(W){let H=W[1];HE1(Y,H)}),B=B.concat(Y._indexes)}function $(Y,E){let G=Y._indexes,C=G.length;for(let W=0;W<C;++W){let H=G[W][0],q=G[W][1],Q=Object.keys(H),K=Q.length,U={};for(let w=0;w<K;++w){let V=Q[w];U[E+V]=H[V]}let R=Object.assign({},q);if(q?.partialFilterExpression!=null){R.partialFilterExpression={};let w=q.partialFilterExpression;for(let V of Object.keys(w))R.partialFilterExpression[E+V]=w[V]}B.push([U,R])}}}});var qW=z((lj1,Uf)=>{Uf.exports=function F(A){switch(A){case"p":A="primary";break;case"pp":A="primaryPreferred";break;case"s":A="secondary";break;case"sp":A="secondaryPreferred";break;case"n":A="nearest";break}return A}});var Lf=z((pj1,Vf)=>{/*!
 * ignore
 */Vf.exports=function F(A){if(!(!A.paths.id&&A.paths._id&&A.options.id))return A;if(A.aliases?.id)return A;return A.virtual("id").get(qE1),A};function qE1(){if(this._id!=null)return this._id.toString();return null}});var Rf=z((ij1,wf)=>{wf.exports=function F(A,B){let D=Object.keys(A),X=Object.keys(B);if(D.length!==X.length)return!1;for(let Z=0;Z<D.length;Z++){let J=D[Z];if(J!==X[Z]||A[J]!==B[J])return!1}return!0}});var If=z((nj1,Pf)=>{Pf.exports=function F(A,B,D,X){if(X.justOne||X.count){if(A[B]=Array.isArray(D)?D[0]:D,typeof A[B]!=="object")A[B]=X.count?D:null}else A[B]=Array.isArray(D)?D:D==null?[]:[D],A[B]=A[B].filter(function(Z){return Z&&typeof Z==="object"});return A[B]}});var MF=z((aj1,Nf)=>{Nf.exports=function F(A){return A.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var FX=z((sj1,Mf)=>{Mf.exports=zE1;/*!
 * ignore
 */function zE1(F,A){if(F==null)return null;if(typeof F==="boolean")return A;if(typeof F[A]==="boolean")return F[A]?A:null;if(!(A in F))return A;return F[A]}});var QW=z((rj1,jf)=>{var QE1=MF(),h3=FX();jf.exports=S9;/*!
 * ignore
 */function S9(F,A,B){if(A==null)return;if(Object.keys(A).some(($)=>$[0]==="$")){if(A.$push)J(A.$push);if(A.$addToSet)J(A.$addToSet);if(A.$set!=null){let $=Object.keys(A.$set);for(let Y of $)zW(B,Y,A.$set,F)}if(A.$setOnInsert!=null){let $=Object.keys(A.$setOnInsert);for(let Y of $)zW(B,Y,A.$setOnInsert,F)}}let Z=Object.keys(A).filter(($)=>$[0]!=="$");for(let $ of Z)zW(B,$,A,F);function J($){for(let Y of Object.keys($)){let E=B.path(Y.replace(/\.\$\./i,".").replace(/.\$$/,""));if($[Y]&&E&&E.$isMongooseDocumentArray&&E.schema.options.timestamps){let G=E.schema.options.timestamps,C=h3(G,"createdAt"),W=h3(G,"updatedAt");if($[Y].$each)$[Y].$each.forEach(function(H){if(W!=null)H[W]=F;if(C!=null)H[C]=F;S9(F,H,E.schema)});else{if(W!=null)$[Y][W]=F;if(C!=null)$[Y][C]=F;S9(F,$[Y],E.schema)}}}}}function KE1(F,A,B){let D=A.schema.options.timestamps,X=F.length;if(!D){for(let $=0;$<X;++$)S9(B,F[$],A.schema);return}let Z=h3(D,"createdAt"),J=h3(D,"updatedAt");for(let $=0;$<X;++$){if(J!=null)F[$][J]=B;if(Z!=null)F[$][Z]=B;S9(B,F[$],A.schema)}}function UE1(F,A,B){let D=A.schema.options.timestamps;if(!D){S9(B,F,A.schema);return}let X=h3(D,"createdAt"),Z=h3(D,"updatedAt");if(Z!=null)F[Z]=B;if(X!=null)F[X]=B;S9(B,F,A.schema)}function zW(F,A,B,D){let X=QE1(A),Z=F.path(X);if(!Z)return;let J=[],$=X.split(".");for(let Y=$.length-1;Y>0;--Y){let E=F.path($.slice(0,Y).join("."));if(E!=null&&(E.$isMongooseDocumentArray||E.$isSingleNested))J.push({parentPath:A.split(".").slice(0,Y).join("."),parentSchemaType:E})}if(Array.isArray(B[A])&&Z.$isMongooseDocumentArray)KE1(B[A],Z,D);else if(B[A]&&Z.$isSingleNested)UE1(B[A],Z,D);else if(J.length>0)for(let Y of J){let{parentPath:E,parentSchemaType:G}=Y,C=G.schema.options.timestamps,W=h3(C,"updatedAt");if(!C||W==null)continue;if(G.$isSingleNested)B[E+"."+W]=D;else if(G.$isMongooseDocumentArray){let H=A.substring(E.length+1);if(/^\d+$/.test(H)){B[E+"."+H][W]=D;continue}let q=H.indexOf(".");H=q!==-1?H.substring(0,q):H,B[E+"."+H+"."+W]=D}}else if(Z.schema!=null&&Z.schema!=F&&B[A]){let Y=Z.schema.options.timestamps,E=h3(Y,"createdAt"),G=h3(Y,"updatedAt");if(!Y)return;if(G!=null)B[A][G]=D;if(E!=null)B[A][E]=D}}});var KW=z((tj1,kf)=>{/*!
 * ignore
 */var Tf=K0(),VE1=B1();kf.exports=LE1;/*!
 * ignore
 */function LE1(F,A,B,D,X,Z){let J=D,$=J,Y=Tf(X,"timestamps",!0);if(!Y||J==null)return D;let E=Y?.createdAt===!1,G=Y?.updatedAt===!1;if(Z){if(D?.$set)D=D.$set,J.$set={},$=J.$set;if(!G&&B&&!D[B])$[B]=F;if(!E&&A&&!D[A])$[A]=F;return J}if(D=D||{},Array.isArray(J)){if(B==null)return J;return J.push({$set:{[B]:F}}),J}if(J.$set=J.$set||{},!G&&B&&!D.$currentDate?.[B]){let C=!1;if(B.indexOf(".")!==-1){let W=B.split(".");for(let H=1;H<W.length;++H){let q=W.slice(-H).join("."),Q=W.slice(0,-H).join(".");if(D[Q]!=null){D[Q][q]=F,C=!0;break}else if(D.$set?.[Q]){D.$set[Q][q]=F,C=!0;break}}}if(!C)J.$set[B]=F;if(Object.hasOwn(J,B))delete J[B]}if(!E&&A){let C=Tf(X,"overwriteImmutable",!1),W=D[A]!=null||D.$set?.[A]!=null;if(C&&W){if(D[A]!=null)J.$set[A]=D[A],delete D[A]}else{if(D[A])delete D[A];if(D.$set?.[A])delete D.$set[A];let H=!1;if(A.indexOf(".")!==-1){let q=A.split(".");for(let Q=1;Q<q.length;++Q){let K=q.slice(-Q).join("."),U=q.slice(0,-Q).join(".");if(D[U]!=null){D[U][K]=F,H=!0;break}else if(D.$set?.[U]){D.$set[U][K]=F,H=!0;break}}}if(!H)J.$setOnInsert=J.$setOnInsert||{},J.$setOnInsert[A]=F}}if(VE1.hasOwnKeys(J.$set)===!1)delete J.$set;return J}});var Of=z((oj1,uf)=>{uf.exports=function F(A,B,D,X,Z){let J=B?.updatedAt===!1,$=B?.createdAt===!1,Y=D!=null?D():A.ownerDocument().constructor.base.now();if(!$&&(A.isNew||A.$isSubdocument)&&X&&!A.$__getValue(X)&&A.$__isSelected(X))A.$set(X,Y,void 0,{overwriteImmutable:!0});if(!J&&Z&&(A.isNew||A.$isModified())){let E=Y;if(A.isNew&&X!=null)E=A.$__getValue(X);A.$set(Z,E)}}});var ff=z((ej1,_f)=>{var wE1=QW(),RE1=KW(),PE1=K0(),Sf=FX(),IE1=Of(),NE1=M9(),xf=new Set(["replaceOne","findOneAndReplace"]);_f.exports=function F(A,B){let D=A.childSchemas.find(X);function X(C){return!!C.schema.options.timestamps}if(!B&&!D)return;let Z=Sf(B,"createdAt"),J=Sf(B,"updatedAt"),$=B!=null&&Object.hasOwn(B,"currentTime")?B.currentTime:null,Y={};if(A.$timestamps={createdAt:Z,updatedAt:J},Z&&!A.paths[Z]){let W=A.base?.get("timestamps.createdAt.immutable")??null??!0;Y[Z]={[A.options.typeKey||"type"]:Date,immutable:W}}if(J&&!A.paths[J])Y[J]=Date;A.add(Y),A.pre("save",function C(){let W=PE1(this,"$__.saveOptions.timestamps");if(W===!1)return;IE1(this,W,$,Z,J)}),A.methods.initializeTimestamps=function(){let C=$!=null?$():this.constructor.base.now();if(Z&&!this.get(Z))this.$set(Z,C);if(J&&!this.get(J))this.$set(J,C);if(this.$isSubdocument)return this;let W=this.$getAllSubdocs();for(let H of W)if(H.initializeTimestamps)H.initializeTimestamps();return this},G[NE1.builtInMiddleware]=!0;let E={query:!0,model:!1};A.pre("findOneAndReplace",E,G),A.pre("findOneAndUpdate",E,G),A.pre("replaceOne",E,G),A.pre("update",E,G),A.pre("updateOne",E,G),A.pre("updateMany",E,G);function G(){let C=$!=null?$():this.model.base.now();if(xf.has(this.op)&&this.getUpdate()==null)this.setUpdate({});RE1(C,Z,J,this.getUpdate(),this._mongooseOptions,xf.has(this.op)),wE1(C,this.getUpdate(),this.model.schema)}}});var bf=z((FT1,gf)=>{var ME1=K1(),jE1=c("util");gf.exports=TE1;function TE1(F,A){if(typeof F==="string")return;if(typeof F==="function")return;throw new ME1('Invalid ref at path "'+A+'". Got '+jE1.inspect(F,{depth:0}))}});var jF=z((xE1)=>{/*!
 * ignore
 */var yf=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);xE1.queryOperations=yf;/*!
 * ignore
 */var kE1=yf.concat(["validate"]);xE1.queryMiddlewareFunctions=kE1;/*!
 * ignore
 */var uE1=["aggregate"];xE1.aggregateMiddlewareFunctions=uE1;/*!
 * ignore
 */var OE1=["bulkWrite","createCollection","insertMany"];xE1.modelMiddlewareFunctions=OE1;/*!
 * ignore
 */var SE1=["validate","save","remove","updateOne","deleteOne","init"];xE1.documentMiddlewareFunctions=SE1});var vf=z((BT1,hf)=>{hf.exports=$1().Double});var AX=z((DT1,pf)=>{var hE1=K1(),mf=C0(),vE1=B1().deepEqual,mE1=S2(),dE1=SD(),df=c("util"),cE1=L9(),UW=B2(),lE1=jD(),cf=t().populateModelSymbol;/*!
 * ignore
 */class H3 extends Map{constructor(F,A,B,D,X){if(mE1(F)==="Object")F=Object.keys(F).reduce((Z,J)=>Z.concat([[J,F[J]]]),[]);super(F);if(this.$__parent=B?.$__!=null?B:null,this.$__parent?.$isSingleNested&&this.$__parent.$basePath)this.$__path=this.$__parent.$basePath+"."+A,this.$__pathRelativeToParent=A;else if(X?.path)this.$__path=X.path,this.$__pathRelativeToParent=null;else this.$__path=A,this.$__pathRelativeToParent=null;this.$__schemaType=D,this.$__runDeferred()}$init(F,A){if(lf(F),super.set(F,A),A?.$isSingleNested)if(A.$basePath=this.$__path+"."+F,this.$__pathRelativeToParent!=null)A.$pathRelativeToParent=this.$__pathRelativeToParent+"."+F;else A.$pathRelativeToParent=this.$__path+"."+F}$__set(F,A){super.set(F,A)}get(F,A){if(UW(F,"ObjectId"))F=F.toString();if(A=A||{},A.getters===!1)return super.get(F);return this.$__schemaType.applyGetters(super.get(F),this.$__parent)}set(F,A){if(UW(F,"ObjectId"))F=F.toString();if(lf(F),A=dE1(A),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:F,value:A});return}let B,D=this.$__parent,X=D?.$__?.populated?D.$populated(J.call(this),!0)||D.$populated(this.$__path,!0):null,Z=this.get(F);if(X!=null){if(this.$__schemaType.$isSingleNested)throw new hE1(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);if(Array.isArray(A)&&this.$__schemaType.$isMongooseArray)A=A.map(($)=>{if($.$__==null)$=new X.options[cf]($);return $.$__.wasPopulated={value:$._doc._id},$});else if(A!=null){if(A.$__==null)A=new X.options[cf](A);A.$__.wasPopulated={value:A._doc._id}}}else try{let $=null;if(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap){if($={path:J.call(this)},this.$__schemaType.$isSingleNested)$.pathRelativeToParent=this.$__pathRelativeToParent!=null?this.$__pathRelativeToParent+"."+F:this.$__path+"."+F}A=this.$__schemaType.applySetters(A,this.$__parent,!1,this.get(F),$)}catch($){if(this.$__parent?.$__!=null){this.$__parent.invalidate(J.call(this),$);return}throw $}if(super.set(F,A),A?.$isSingleNested)if(this.$__pathRelativeToParent!=null)A.$pathRelativeToParent=this.$__pathRelativeToParent+"."+F;else A.$pathRelativeToParent=this.$__path+"."+F;if(D?.$__!=null&&!vE1(A,Z)){let $;if(this.$__pathRelativeToParent!=null)$=this.$__pathRelativeToParent+"."+F;else $=J.call(this);if(D.markModified($),this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)lE1(D,$)}function J(){if(B)return B;return B=this.$__path+"."+F,B}}clear(){super.clear();let F=this.$__parent;if(F!=null)F.markModified(this.$__path)}delete(F){if(UW(F,"ObjectId"))F=F.toString();return this.set(F,void 0),super.delete(F)}toBSON(){return new Map(this)}toObject(F){if(F?.flattenMaps){let A={},B=this.keys();for(let D of B)A[D]=mf(this.get(D),F);return A}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(F){if(typeof F?.flattenMaps==="boolean"?F.flattenMaps:!0){let A={},B=this.keys();for(let D of B)A[D]=mf(this.get(D),F);return A}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(!this.$__deferred)return;for(let F of this.$__deferred)this.set(F.key,F.value);this.$__deferred=null}}if(df.inspect.custom)Object.defineProperty(H3.prototype,df.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:H3.prototype.inspect});Object.defineProperty(H3.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(H3.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(H3.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(H3.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(H3.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(H3.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function lf(F){let A=typeof F;if(A!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${A}`);if(F.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${F}"`);if(F.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${F}"`);if(cE1.has(F))throw new Error(`Mongoose maps do not support reserved key name "${F}"`)}pf.exports=H3});var af=z((XT1,nf)=>{nf.exports=$1().UUID});var q8=z((pE1)=>{/*!
 * Module exports.
 */pE1.Array=vC();pE1.Buffer=RD();pE1.Document=pE1.Embedded=G8();pE1.DocumentArray=k9();pE1.Double=vf();pE1.Decimal128=qD();pE1.ObjectId=j4();pE1.Map=AX();pE1.Subdocument=_D();pE1.UUID=af()});var rf=z((YT1,sf)=>{var BG1=c2();class TF extends BG1{}var VW=G6();Object.defineProperty(TF.prototype,"enum",VW);Object.defineProperty(TF.prototype,"of",VW);Object.defineProperty(TF.prototype,"castNonArrays",VW);/*!
 * ignore
 */sf.exports=TF});var of=z(($T1,tf)=>{tf.exports=LW;function LW(F){if(!Array.isArray(F))return{min:0,max:0,containsNonArrayItem:!0};if(F.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(F.length===1&&!Array.isArray(F[0]))return{min:1,max:1,containsNonArrayItem:!1};let A=LW(F[0]);for(let B=1;B<F.length;++B){let D=LW(F[B]);if(D.min<A.min)A.min=D.min;if(D.max>A.max)A.max=D.max;A.containsNonArrayItem=A.containsNonArrayItem||D.containsNonArrayItem}return A.min=A.min+1,A.max=A.max+1,A}});var kF=z((ET1,Fg)=>{var ef=c("assert");Fg.exports=function F(A){if(A==null)return A;if(A==="")return null;if(typeof A==="string"||typeof A==="boolean")A=Number(A);if(ef.ok(!isNaN(A)),A instanceof Number)return A.valueOf();if(typeof A==="number")return A;if(!Array.isArray(A)&&typeof A.valueOf==="function")return Number(A.valueOf());if(A.toString&&!Array.isArray(A)&&A.toString()==Number(A))return Number(A);ef.ok(!1)}});var wW=z((GT1,Ag)=>{Ag.exports=function F(A){if(A==null||typeof A!=="object")return A;if(Array.isArray(A)){for(let B=A.length-1;B>=0;--B)if(A[B]===void 0)A.splice(B,1)}for(let B of Object.keys(A))if(A[B]===void 0)delete A[B];return A}});var Xg=z((CT1,Dg)=>{var z8=K2(),Bg=T4(),BX=kF(),DG1=wW(),XG1=new Set(["$and","$or"]),ZG1=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),JG1=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),YG1=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),$G1=new Set(["$arrayElemAt","$first","$last"]),EG1=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),GG1=new Set(["$not"]);Dg.exports=function F(A,B,D){if(typeof A==="boolean")return A;if(typeof A!=="object"||A===null)throw new Error("`$expr` must be an object or boolean literal");return j6(A,B,D)};function j6(F,A,B){if(uF(F)||F===null)return F;if(F.$cond!=null)if(Array.isArray(F.$cond))F.$cond=F.$cond.map((X)=>j6(X,A,B));else F.$cond.if=j6(F.$cond.if,A,B),F.$cond.then=j6(F.$cond.then,A,B),F.$cond.else=j6(F.$cond.else,A,B);else if(F.$ifNull!=null)F.$ifNull.map((X)=>j6(X,A,B));else if(F.$switch!=null){if(Array.isArray(F.$switch.branches))F.$switch.branches=F.$switch.branches.map((X)=>j6(X,A,B));if("default"in F.$switch)F.$switch.default=j6(F.$switch.default,A,B)}let D=Object.keys(F);for(let X of D)if(XG1.has(X))F[X]=F[X].map((Z)=>j6(Z,A,B));else if(ZG1.has(X))F[X]=HG1(F[X],A,B);else if(JG1.has(X))F[X]=WG1(F[X],A,B);else if(YG1.has(X))F[X]=RW(F[X],A,B);else if(GG1.has(X))F[X]=j6(F[X],A,B);if(F.$in)F.$in=CG1(F.$in,A,B);if(F.$size)F.$size=RW(F.$size,A,B);if(F.$round){let X=F.$round;if(!Array.isArray(X)||X.length<1||X.length>2)throw new z8("Array",X,"$round");F.$round=X.map((Z)=>RW(Z,A,B))}return DG1(F),F}function RW(F){if(!DX(F))return F;try{return BX(F)}catch{throw new z8("Number",F)}}function CG1(F,A,B){let D=F[1];if(!uF(D))return F;let X=F[0],Z=A.path(D.slice(1));if(Z===null){if(B===!1)return F;else if(B==="throw")throw new Bg("$in");return}if(!Z.$isMongooseArray)throw new Error("Path must be an array for $in");return[Z.embeddedSchemaType.cast(X),D]}function WG1(F){if(!Array.isArray(F)){if(!DX(F))return F;try{return BX(F)}catch{throw new z8("Number",F)}}return F.map((A)=>{if(!DX(A))return A;try{return BX(A)}catch{throw new z8("Number",A)}})}function HG1(F,A,B){if(!Array.isArray(F)||F.length!==2)throw new Error("Comparison operator must be an array of length 2");F[0]=j6(F[0],A,B);let D=F[0];if(DX(F[1])){let X=null,Z=null,J=null;if(uF(D))X=D.slice(1),Z=A.path(X);else if(typeof D==="object"&&D!=null){for(let Y of Object.keys(D))if(EG1.has(Y)&&uF(D[Y]))X=D[Y].slice(1)+"."+Y,J=BX;else if($G1.has(Y)&&uF(D[Y])){if(X=D[Y].slice(1)+"."+Y,Z=A.path(D[Y].slice(1)),Z!=null){if(Z.$isMongooseArray)Z=Z.embeddedSchemaType}}}let $=typeof F[1]==="object"&&F[1]!=null&&F[1].$literal!=null;if(Z!=null)if($)F[1]={$literal:Z.cast(F[1].$literal)};else F[1]=Z.cast(F[1]);else if(J!=null)if($)try{F[1]={$literal:J(F[1].$literal)}}catch{throw new z8(J.name.replace(/^cast/,""),F[1],X+".$literal")}else try{F[1]=J(F[1])}catch{throw new z8(J.name.replace(/^cast/,""),F[1],X)}else if(X!=null&&B===!0)return;else if(X!=null&&B==="throw")throw new Bg(X)}else F[1]=j6(F[1]);return F}function uF(F){return typeof F==="string"&&F[0]==="$"}function DX(F){if(typeof F==="string"&&F[0]==="$")return!1;if(typeof F==="object"&&F!==null&&Object.keys(F).find((A)=>A[0]==="$"))return F.$literal!=null;return!0}});var XX=z((WT1,Zg)=>{var qG1=K2();Zg.exports=function F(A,B){if(A==null)return A;if(typeof A?._id==="string")return A._id;if(A.toString&&A.toString!==Object.prototype.toString&&!Array.isArray(A))return A.toString();throw new qG1("string",A,B)}});var Eg=z((HT1,$g)=>{var zG1=K2(),Jg=UD(),Yg=XX();$g.exports=function F(A,B){if(A==null||typeof A!=="object")throw new zG1("$text",A,B);if(A.$search!=null)A.$search=Yg(A.$search,B+".$search");if(A.$language!=null)A.$language=Yg(A.$language,B+".$language");if(A.$caseSensitive!=null)A.$caseSensitive=Jg(A.$caseSensitive,B+".$caseSensitive");if(A.$diacriticSensitive!=null)A.$diacriticSensitive=Jg(A.$diacriticSensitive,B+".$diacriticSensitive");return A}});var OF=z((qT1,Gg)=>{var QG1=new Set(["$ref","$id","$db"]);Gg.exports=function F(A){return A[0]==="$"&&!QG1.has(A)}});var x9=z((zT1,qg)=>{/*!
 * Module dependencies.
 */var Cg=K2(),PW=T4(),KG1=SF(),UG1=Xg(),VG1=XX(),LG1=Eg(),wG1=K0(),Wg=OD(),Hg=OF(),RG1=c("util"),MW=w9(),IW=qF(),NW=B1(),PG1=["Polygon","MultiPolygon"];qg.exports=function F(A,B,D,X){if(Array.isArray(B))throw new Error("Query filter must be an object, got an array ",RG1.inspect(B));if(B==null)return B;if(A?.discriminators!=null&&B[A.options.discriminatorKey]!=null)A=Wg(A,B[A.options.discriminatorKey])||A;let Z=Object.keys(B),J=Z.length,$,Y,E,G,C,W,H;D=D||{};while(J--)if(C=Z[J],H=B[C],C==="$or"||C==="$nor"||C==="$and"){if(!Array.isArray(H))throw new Cg("Array",H,C);for(let q=H.length-1;q>=0;q--){if(H[q]==null||typeof H[q]!=="object")throw new Cg("Object",H[q],C+"."+q);let Q=Object.keys(H[q]).length,K=H[q][A.options.discriminatorKey];if(K==null)H[q]=F(A,H[q],D,X);else{let U=Wg(X.schema,K);H[q]=F(U?U:A,H[q],D,X)}if(NW.hasOwnKeys(H[q])===!1&&Q!==0)H.splice(q,1)}if(H.length===0)delete B[C]}else if(C==="$where"){if(W=typeof H,W!=="string"&&W!=="function")throw new Error("Must have a string or function for $where");if(W==="function")B[C]=H.toString();continue}else if(C==="$expr"){H=UG1(H,A);continue}else if(C==="$elemMatch")H=F(A,H,D,X);else if(C==="$text")H=LG1(H,C);else if(C==="$comment"&&!Object.hasOwn(A.paths,"$comment"))H=VG1(H,C),B[C]=H;else{if(!A)continue;if(E=A.path(C),!E){let q=C.split("."),Q=q.length;while(Q--){let K=q.slice(0,Q).join("."),U=q.slice(Q).join("."),R=A.path(K),w=R?.schema?.options?.discriminatorKey;if(R?.schema?.discriminators!=null&&w!=null&&U!==w){let V=wG1(B,K+"."+w),N=R.schema.discriminators;if(typeof V==="string"&&N[V]!=null)E=N[V].path(U);else if(V!=null&&Object.keys(V).length===1&&Array.isArray(V.$in)&&V.$in.length===1&&typeof V.$in[0]==="string"&&N[V.$in[0]]!=null)E=N[V.$in[0]].path(U)}}}if(!E){let q=C.split("."),Q=q.length,K,U,R;while(Q--)if(K=q.slice(0,Q).join("."),E=A.path(K),E)break;if(E){if(E.schema){R={},U=q.slice(Q).join("."),R[U]=H;let N=F(E.schema,R,D,X)[U];if(N===void 0)delete B[C];else B[C]=N}else B[C]=H;continue}if(MW(H)){let N="";if(H.$near)N="$near";else if(H.$nearSphere)N="$nearSphere";else if(H.$within)N="$within";else if(H.$geoIntersects)N="$geoIntersects";else if(H.$geoWithin)N="$geoWithin";if(N){let T=new KG1.Number("__QueryCasting__",null,null,A),I=H[N];if(H.$maxDistance!=null)H.$maxDistance=T.castForQuery(null,H.$maxDistance,X);if(H.$minDistance!=null)H.$minDistance=T.castForQuery(null,H.$minDistance,X);if(N==="$within"){let u=I.$center||I.$centerSphere||I.$box||I.$polygon;if(!u)throw new Error("Bad $within parameter: "+JSON.stringify(H));I=u}else if(N==="$near"&&typeof I.type==="string"&&Array.isArray(I.coordinates))I=I.coordinates;else if((N==="$near"||N==="$nearSphere"||N==="$geoIntersects")&&I.$geometry&&typeof I.$geometry.type==="string"&&Array.isArray(I.$geometry.coordinates)){if(I.$maxDistance!=null)I.$maxDistance=T.castForQuery(null,I.$maxDistance,X);if(I.$minDistance!=null)I.$minDistance=T.castForQuery(null,I.$minDistance,X);if(IW(I.$geometry))I.$geometry=I.$geometry.toObject({transform:!1,virtuals:!1});I=I.$geometry.coordinates}else if(N==="$geoWithin"){if(I.$geometry){if(IW(I.$geometry))I.$geometry=I.$geometry.toObject({virtuals:!1});let u=I.$geometry.type;if(PG1.indexOf(u)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+u+'", must be "Polygon" or "MultiPolygon"');I=I.$geometry.coordinates}else if(I=I.$box||I.$polygon||I.$center||I.$centerSphere,IW(I))I=I.toObject({virtuals:!1})}jW(I,T,X);continue}}if(A.nested[C])continue;let w="strict"in D?D.strict:A.options.strict,V=IG1(D,A._userProvidedOptions,A.options,X);if(D.upsert&&w){if(w==="throw")throw new PW(C);throw new PW(C,'Path "'+C+'" is not in schema, strict mode is `true`, and upsert is `true`.')}if(V==="throw")throw new PW(C,'Path "'+C+`" is not in schema and strictQuery is 'throw'.`);else if(V)delete B[C]}else if(H==null)continue;else if(NW.isPOJO(H))if(Y=Object.keys(H).some(Hg),!Y)B[C]=E.castForQuery(null,H,X);else{let q=Object.keys(H),Q,K=q.length;while(K--)if(Q=q[K],G=H[Q],Q==="$elemMatch"){if(G&&E?.schema!=null)F(E.schema,G,D,X);else if(G&&E?.$isMongooseArray)if(NW.isPOJO(G)&&G.$not!=null)F(A,G,D,X);else H[Q]=E.castForQuery(Q,G,X)}else if(Q==="$not"){if(G&&E){if($=Object.keys(G),$.length&&Hg($[0]))for(let U in G)G[U]=E.castForQuery(U,G[U],X);else H[Q]=E.castForQuery(Q,G,X);continue}}else H[Q]=E.castForQuery(Q,G,X)}else if(Array.isArray(H)&&["Buffer","Array"].indexOf(E.instance)===-1&&!D.sanitizeFilter){let q=[],Q=H;for(let K of Q)q.push(E.castForQuery(null,K,X));B[C]={$in:q}}else B[C]=E.castForQuery(null,H,X)}return B};function jW(F,A,B){if(Array.isArray(F))F.forEach(function(D,X){if(Array.isArray(D)||MW(D))return jW(D,A,B);F[X]=A.castForQuery(null,D,B)});else{let D=Object.keys(F),X=D.length;while(X--){let Z=D[X],J=F[Z];if(Array.isArray(J)||MW(J))jW(J,A,B),F[Z]=J;else F[Z]=A.castForQuery({val:J,context:B})}}}function IG1(F,A,B,D){if("strictQuery"in F)return F.strictQuery;if("strictQuery"in A)return A.strictQuery;let X=D?.mongooseCollection?.conn?.base?.options;if(X){if("strictQuery"in X)return X.strictQuery}return B.strictQuery}});var Qg=z((QT1,zg)=>{var NG1=c2();class Q8 extends NG1{}var ZX=G6();Object.defineProperty(Q8.prototype,"min",ZX);Object.defineProperty(Q8.prototype,"max",ZX);Object.defineProperty(Q8.prototype,"enum",ZX);Object.defineProperty(Q8.prototype,"populate",ZX);/*!
 * ignore
 */zg.exports=Q8});var V2=z((KT1,Kg)=>{Kg.exports=function F(A,B,D,X){if(D){if(X)return{bsonType:B};return{bsonType:[B,"null"]}}else{if(X)return{type:A};return{type:[A,"null"]}}}});var xF=z((UT1,Vg)=>{/*!
 * Module requirements.
 */var MG1=K2();/*!
 * ignore
 */function jG1(F){let A=this;if(Array.isArray(F))return F.map(function(B){return Ug(A.path,B)});else if(Buffer.isBuffer(F))return F;return Ug(A.path,F)}/*!
 * ignore
 */function Ug(F,A){let B=Number(A);if(isNaN(B))throw new MG1("number",A,F);return B}Vg.exports=jG1});var uW=z((VT1,Lg)=>{/*!
 * Module requirements.
 */var $X=E6(),TG1=Qg(),v3=Q0(),kG1=kF(),uG1=V2(),JX=xF(),TW=B1(),kW=v3.CastError;function A0(F,A,B,D){this.enumValues=[],v3.call(this,F,A,"Number",D)}A0.get=v3.get;A0.set=v3.set;A0.setters=[];/*!
 * ignore
 */A0._cast=kG1;A0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */A0._defaultCaster=(F)=>{if(typeof F!=="number")throw new Error;return F};A0.schemaName="Number";A0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */A0.prototype=Object.create(v3.prototype);A0.prototype.constructor=A0;A0.prototype.OptionsConstructor=TG1;/*!
 * ignore
 */A0._checkRequired=(F)=>typeof F==="number"||F instanceof Number;A0.checkRequired=v3.checkRequired;A0.prototype.checkRequired=function F(A,B){if(typeof A==="object"&&v3._isRef(this,A,B,!0))return A!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():A0.checkRequired())(A)};A0.prototype.min=function(F,A){if(this.minValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minValidator},this);if(F!=null){let B=A||$X.messages.Number.min;B=B.replace(/{MIN}/,F),this.validators.push({validator:this.minValidator=function(D){return D==null||D>=F},message:B,type:"min",min:F})}return this};A0.prototype.max=function(F,A){if(this.maxValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxValidator},this);if(F!=null){let B=A||$X.messages.Number.max;B=B.replace(/{MAX}/,F),this.validators.push({validator:this.maxValidator=function(D){return D==null||D<=F},message:B,type:"max",max:F})}return this};A0.prototype.enum=function(F,A){if(this.enumValidator)this.validators=this.validators.filter(function(D){return D.validator!==this.enumValidator},this),this.enumValidator=!1;if(F===void 0||F===!1)return this;if(!Array.isArray(F)){if(TW.isPOJO(F)&&F.values!=null)A=F.message,F=F.values;else if(typeof F==="number")F=Array.prototype.slice.call(arguments),A=null;if(TW.isPOJO(F)){let X=Object.keys(F).sort(),Z=Object.values(F).sort();if(X.length===Z.length&&X.every((J,$)=>J===String(Z[$]))&&Z.filter((J)=>typeof J==="number").length===Math.floor(Z.length/2))F=Z.filter((J)=>typeof J==="number");else F=Object.values(F)}A=A||$X.messages.Number.enum}A=A==null?$X.messages.Number.enum:A;for(let D of F)if(D!==void 0)this.enumValues.push(this.cast(D));let B=this.enumValues;return this.enumValidator=(D)=>D==null||B.indexOf(D)!==-1,this.validators.push({validator:this.enumValidator,message:A,type:"enum",enumValues:B}),this};A0.prototype.cast=function(F,A,B,D,X){if(typeof F!=="number"&&v3._isRef(this,F,A,B)){if(F==null||TW.isNonBuiltinObject(F))return this._castRef(F,A,B,X)}let Z=F?._id!==void 0?F._id:F,J;if(typeof this._castFunction==="function")J=this._castFunction;else if(typeof this.constructor.cast==="function")J=this.constructor.cast();else J=A0.cast();try{return J(Z)}catch($){throw new kW("Number",Z,this.path,$,this)}};/*!
 * ignore
 */function YX(F){return this.cast(F)}function OG1(F){let A=this;if(!Array.isArray(F))return[this.cast(F)];return F.map(function(B){return A.cast(B)})}var SG1={...v3.prototype.$conditionalHandlers,$bitsAllClear:JX,$bitsAnyClear:JX,$bitsAllSet:JX,$bitsAnySet:JX,$gt:YX,$gte:YX,$lt:YX,$lte:YX,$mod:OG1};Object.defineProperty(A0.prototype,"$conditionalHandlers",{enumerable:!1,value:SG1});A0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new kW("number",A,this.path,null,this);return D.call(this,A,B)}try{A=this.applySetters(A,B)}catch(X){if(X instanceof kW&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}return A};A0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return uG1("number","number",A?.useBsonType,B)};/*!
 * Module exports.
 */Lg.exports=A0});var _F=z((_G1)=>{/*!
 * Module requirements.
 */var xG1=uW();/*!
 * ignore
 */_G1.castToNumber=wg;_G1.castArraysOfNumbers=Rg;/*!
 * ignore
 */function wg(F){return xG1.cast()(F)}function Rg(F,A){F.forEach(function(B,D){if(Array.isArray(B))Rg(B,A);else F[D]=wg.call(A,B)})}});var xW=z((vG1)=>{/*!
 * Module requirements.
 */var Pg=_F().castArraysOfNumbers,fF=_F().castToNumber;/*!
 * ignore
 */vG1.cast$geoIntersects=hG1;vG1.cast$near=bG1;vG1.cast$within=yG1;function bG1(F){let A=EX();if(Array.isArray(F))return Pg(F,this),F;if(SW(this,F),F?.$geometry)return OW(F,this);if(!Array.isArray(F))throw new TypeError("$near must be either an array or an object with a $geometry property");return A.prototype.castForQuery.call(this,null,F)}function OW(F,A){switch(F.$geometry.type){case"Polygon":case"LineString":case"Point":Pg(F.$geometry.coordinates,A);break;default:break}return SW(A,F),F}function yG1(F){if(SW(this,F),F.$box||F.$polygon){let A=F.$box?"$box":"$polygon";F[A].forEach((B)=>{if(!Array.isArray(B)){let D="Invalid $within $box argument. Expected an array, received "+B;throw new TypeError(D)}B.forEach((D,X)=>{B[X]=fF.call(this,D)})})}else if(F.$center||F.$centerSphere){let A=F.$center?"$center":"$centerSphere";F[A].forEach((B,D)=>{if(Array.isArray(B))B.forEach((X,Z)=>{B[Z]=fF.call(this,X)});else F[A][D]=fF.call(this,B)})}else if(F.$geometry)OW(F,this);return F}function hG1(F){if(!F.$geometry)return;return OW(F,this),F}function SW(F,A){if(A.$maxDistance)A.$maxDistance=fF.call(F,A.$maxDistance);if(A.$minDistance)A.$minDistance=fF.call(F,A.$minDistance)}});var EX=z((RT1,Mg)=>{/*!
 * Module dependencies.
 */var lG1=VD(),pG1=LC(),Ng=K1(),iG1=rf(),H6=Q0(),GX=H6.CastError,CX=Z8(),nG1=EW(),Ig=eD(),aG1=of(),fW=x9(),sG1=C0(),rG1=S2(),tG1=OF(),WX=c("util"),S4=B1(),oG1=_F().castToNumber,eG1=V2(),gW=xW(),FC1=M6(),gF,_W,AC1=Object.freeze({});function T1(F,A,B,D,X){_W||(_W=q8().Embedded);let Z="type";if(D?.typeKey)Z=D.typeKey;if(this.schemaOptions=D,A){let Y={};if(S4.isPOJO(A))if(A[Z])Y=sG1(A),delete Y[Z],A=A[Z];else A=CX;if(B?.ref!=null&&Y.ref==null)Y.ref=B.ref;if(A===Object)A=CX;let E=typeof A==="string"?A:S4.getFunctionName(A),G=SF(),C=Object.hasOwn(G,E)?G[E]:A;if(typeof C==="function")if(C===T1)this.embeddedSchemaType=new C(F,Y,D,null,X);else this.embeddedSchemaType=new C(F,Y,D,X);else if(C instanceof H6){if(this.embeddedSchemaType=C,!(this.embeddedSchemaType instanceof _W))this.embeddedSchemaType.path=F}}this.$isMongooseArray=!0,H6.call(this,F,B,"Array",X);let J,$;if(this.defaultValue!=null)J=this.defaultValue,$=typeof J==="function";if(!("defaultValue"in this)||this.defaultValue!=null){let Y=function(){return $?J.call(this):J!=null?[].concat(J):[]};Y.$runBeforeSetters=!$,this.default(Y)}}T1.schemaName="Array";T1.options={castNonArrays:!0};/*!
 * ignore
 */T1.defaultOptions={};T1.set=H6.set;T1.setters=[];T1.get=H6.get;/*!
 * Inherits from SchemaType.
 */T1.prototype=Object.create(H6.prototype);T1.prototype.constructor=T1;T1.prototype.OptionsConstructor=iG1;/*!
 * ignore
 */T1._checkRequired=H6.prototype.checkRequired;T1.checkRequired=H6.checkRequired;/*!
 * Virtuals defined on this array itself.
 */T1.prototype.virtuals=null;T1.prototype.checkRequired=function F(A,B){if(typeof A==="object"&&H6._isRef(this,A,B,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():T1.checkRequired())(A)};T1.prototype.enum=function(){let F=this;while(!0){let B=F?.embeddedSchemaType?.instance;if(B==="Array"){F=F.embeddedSchemaType;continue}if(B!=="String"&&B!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+B);break}let A=arguments;if(!Array.isArray(arguments)&&S4.isObject(arguments))A=S4.object.vals(A);return F.embeddedSchemaType.enum.apply(F.embeddedSchemaType,A),this};T1.prototype.applyGetters=function(F,A){if(A?.$__!=null&&A.$populated(this.path))return F;return H6.prototype.applyGetters.call(this,F,A)};T1.prototype._applySetters=function(F,A,B,D){if(this.embeddedSchemaType.$isMongooseArray&&T1.options.castNonArrays){let X=0,Z=this;while(Z!=null&&Z.$isMongooseArray&&!Z.$isMongooseDocumentArray)++X,Z=Z.embeddedSchemaType;if(F!=null&&F.length!==0){let J=aG1(F);if(J.min===J.max&&J.max<X&&J.containsNonArrayItem)for(let $=J.max;$<X;++$)F=[F]}}return H6.prototype._applySetters.call(this,F,A,B,D)};T1.prototype.cast=function(F,A,B,D,X){gF||(gF=q8().Array);let Z,J;if(Array.isArray(F)){if(!F.length&&A){let H=A.schema.indexedPaths(),q=this.path;for(Z=0,J=H.length;Z<J;++Z){let K=H[Z][0][q];if(K==="2dsphere"||K==="2d")return}let Q=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(Q!=null){for(Z=0,J=H.length;Z<J;++Z)if(H[Z][0][Q]==="2dsphere")return}}X=X||AC1;let E=S4.isMongooseArray(F)?F.__array:F,G=X.path||this.path;if(X.arrayPathIndex!=null)G+="."+X.arrayPathIndex;if(F=gF(E,G,A,this),E=F.__array,B&&A?.$__!=null&&A.$populated(this.path))return F;let C=this.embeddedSchemaType,W=C.$isMongooseArray;if(C&&this.embeddedSchemaType.constructor!==CX)try{let H=E.length;for(Z=0;Z<H;Z++){let q={};if(W){if(X.arrayPath!=null)q.arrayPathIndex=Z;else if(C._arrayParentPath!=null)q.arrayPathIndex=Z}if(X.hydratedPopulatedDocs)q.hydratedPopulatedDocs=X.hydratedPopulatedDocs;E[Z]=C.applySetters(E[Z],A,B,void 0,q)}}catch(H){throw new GX("["+H.kind+"]",WX.inspect(F),this.path+"."+Z,H,this)}return F}let $=this.options.castNonArrays??T1.options.castNonArrays;if(B||$){if(A&&B)A.markModified(this.path);return this.cast([F],A,B)}throw new GX("Array",WX.inspect(F),this.path,null,this)};/*!
 * ignore
 */T1.prototype._castForPopulate=function F(A,B){if(gF||(gF=q8().Array),Array.isArray(A)){let D,X=A.__array?A.__array:A,Z=X.length;if(this.embeddedSchemaType&&this.embeddedSchemaType.constructor!==CX)try{for(D=0;D<Z;D++){let J={};if(this.embeddedSchemaType.$isMongooseArray&&this.embeddedSchemaType._arrayParentPath!=null)J.arrayPathIndex=D;X[D]=this.embeddedSchemaType.cast(X[D],B,!1,void 0,J)}}catch(J){throw new GX("["+J.kind+"]",WX.inspect(A),this.path+"."+D,J,this)}return A}throw new GX("Array",WX.inspect(A),this.path,null,this)};T1.prototype.$toObject=T1.prototype.toObject;/*!
 * ignore
 */T1.prototype.discriminator=function(...F){let A=this;while(A.$isMongooseArray&&!A.$isMongooseDocumentArray)A=A.embeddedSchemaType;if(!A.$isMongooseDocumentArray)throw new Ng("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return A.discriminator(...F)};/*!
 * ignore
 */T1.prototype.clone=function(){let F=Object.assign({},this.options),A=new this.constructor(this.path,this.embeddedSchemaType,F,this.schemaOptions,this.parentSchema);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;return A};T1.prototype._castForQuery=function(F,A){let B=this.embeddedSchemaType,D=B?.schema?.options?.discriminatorKey,X=B?.discriminators;if(F&&X&&typeof D==="string")if(X[F[D]])B=X[F[D]];else{let Z=FC1(X,F[D]);if(Z)B=Z}if(Array.isArray(F))this.setters.reverse().forEach((Z)=>{F=Z.call(this,F,this)}),F=F.map(function(Z){if(S4.isObject(Z)&&Z.$elemMatch)return Z;return B.castForQuery(null,Z,A)});else F=B.castForQuery(null,F,A);return F};T1.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can't use "+F+" with Array.");return D.call(this,A,B)}else return this._castForQuery(A,B)};T1.prototype.virtual=function F(A,B){if(A instanceof Ig||rG1(A)==="VirtualType")return this.virtual(A.path,A.options);if(B=new nG1(B),S4.hasUserDefinedProperty(B,["ref","refPath"]))throw new Ng("Cannot set populate virtual as a property of an array");let D=new Ig(B,A);if(this.virtuals===null)this.virtuals={};return this.virtuals[A]=D,D};function BC1(F,A){if(!Array.isArray(F))F=[F];return F=F.map((B)=>{if(!S4.isObject(B))return B;if(B.$elemMatch!=null)return{$elemMatch:fW(this.embeddedSchemaType.schema,B.$elemMatch,null,this?.$$context)};let D={};return D[this.path]=B,fW(this.embeddedSchemaType.schema,D,null,this?.$$context)[this.path]},this),this.castForQuery(null,F,A)}function DC1(F,A){let B=Object.keys(F),D=B.length;for(let X=0;X<D;++X){let Z=B[X],J=F[Z];if(tG1(Z)&&J!=null)F[Z]=this.castForQuery(Z,J,A)}return F}var r1=T1.prototype.$conditionalHandlers={};r1.$all=BC1;r1.$options=String;r1.$elemMatch=DC1;r1.$geoIntersects=gW.cast$geoIntersects;r1.$or=bW("$or");r1.$and=bW("$and");r1.$nor=bW("$nor");function bW(F){return function A(B,D){if(!Array.isArray(B))throw new TypeError("conditional "+F+" requires an array");let X=[];for(let Z of B)X.push(fW(this.embeddedSchemaType.schema??D.schema,Z,null,this?.$$context));return X}}r1.$near=r1.$nearSphere=gW.cast$near;r1.$within=r1.$geoWithin=gW.cast$within;r1.$size=r1.$minDistance=r1.$maxDistance=oG1;r1.$exists=lG1;r1.$type=pG1;r1.$eq=r1.$gt=r1.$gte=r1.$lt=r1.$lte=r1.$not=r1.$regex=r1.$ne=T1.prototype._castForQuery;r1.$nin=H6.prototype.$conditionalHandlers.$nin;r1.$in=H6.prototype.$conditionalHandlers.$in;T1.prototype.toJSONSchema=function F(A){let B=this.getEmbeddedSchemaType(),D=this.options.required&&typeof this.options.required!=="function";return{...eG1("array","array",A?.useBsonType,D),items:B.toJSONSchema(A)}};T1.prototype.autoEncryptionType=function F(){return"array"};/*!
 * Module exports.
 */Mg.exports=T1});var kg=z((PT1,Tg)=>{var{Long:XC1}=$1(),yW=9223372036854775807n,hW=-9223372036854775808n,jg=`Mongoose only supports BigInts between ${hW} and ${yW} because MongoDB does not support arbitrary precision integers`;Tg.exports=function F(A){if(A==null)return A;if(A==="")return null;if(typeof A==="bigint"){if(A>yW||A<hW)throw new Error(jg);return A}if(A instanceof XC1)return A.toBigInt();if(typeof A==="string"||typeof A==="number"){if(A=BigInt(A),A>yW||A<hW)throw new Error(jg);return A}throw new Error(`Cannot convert value to BigInt: "${A}"`)}});var Sg=z((IT1,Og)=>{/*!
 * Module dependencies.
 */var ug=K2(),K8=Q0(),ZC1=kg(),JC1=V2();function U0(F,A,B,D){K8.call(this,F,A,"BigInt",D)}U0.schemaName="BigInt";U0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */U0.prototype=Object.create(K8.prototype);U0.prototype.constructor=U0;/*!
 * ignore
 */U0._cast=ZC1;U0.set=K8.set;U0.setters=[];U0.get=K8.get;U0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */U0._checkRequired=(F)=>F!=null;U0.checkRequired=K8.checkRequired;U0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};U0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=U0.cast();try{return A(F)}catch(B){throw new ug("BigInt",F,this.path,B,this)}};/*!
 * ignore
 */var YC1={...K8.prototype.$conditionalHandlers,$gt:HX,$gte:HX,$lt:HX,$lte:HX};Object.defineProperty(U0.prototype,"$conditionalHandlers",{enumerable:!1,value:YC1});/*!
 * ignore
 */function HX(F,A){return this.castForQuery(null,F,A)}U0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],D)return D.call(this,A);return this.applySetters(A,B)}try{return this.applySetters(A,B)}catch(X){if(X instanceof ug&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};U0.prototype._castNullish=function F(A){if(typeof A==="undefined")return A;if((typeof this.constructor.cast==="function"?this.constructor.cast():U0.cast())==null)return A;return A};U0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return JC1("string","long",A?.useBsonType,B)};U0.prototype.autoEncryptionType=function F(){return"long"};/*!
 * Module exports.
 */Og.exports=U0});var fg=z((NT1,_g)=>{/*!
 * Module dependencies.
 */var xg=K2(),U8=Q0(),bF=UD(),$C1=V2();function B0(F,A,B,D){U8.call(this,F,A,"Boolean",D)}B0.schemaName="Boolean";B0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */B0.prototype=Object.create(U8.prototype);B0.prototype.constructor=B0;/*!
 * ignore
 */B0._cast=bF;B0.set=U8.set;B0.setters=[];B0.get=U8.get;B0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */B0._defaultCaster=(F)=>{if(F!=null&&typeof F!=="boolean")throw new Error;return F};/*!
 * ignore
 */B0._checkRequired=(F)=>F===!0||F===!1;B0.checkRequired=U8.checkRequired;B0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};Object.defineProperty(B0,"convertToTrue",{get:()=>bF.convertToTrue,set:(F)=>{bF.convertToTrue=F}});Object.defineProperty(B0,"convertToFalse",{get:()=>bF.convertToFalse,set:(F)=>{bF.convertToFalse=F}});B0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=B0.cast();try{return A(F)}catch(B){throw new xg("Boolean",F,this.path,B,this)}};var EC1={...U8.prototype.$conditionalHandlers};Object.defineProperty(B0.prototype,"$conditionalHandlers",{enumerable:!1,value:EC1});B0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],D)return D.call(this,A);return this.applySetters(A,B)}try{return this.applySetters(A,B)}catch(X){if(X instanceof xg&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};B0.prototype._castNullish=function F(A){if(typeof A==="undefined")return A;let B=typeof this.constructor.cast==="function"?this.constructor.cast():B0.cast();if(B==null)return A;if(B.convertToFalse instanceof Set&&B.convertToFalse.has(A))return!1;if(B.convertToTrue instanceof Set&&B.convertToTrue.has(A))return!0;return A};B0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return $C1("boolean","bool",A?.useBsonType,B)};B0.prototype.autoEncryptionType=function F(){return"bool"};/*!
 * Module exports.
 */_g.exports=B0});var bg=z((MT1,gg)=>{var GC1=c2();class vW extends GC1{}var CC1=G6();Object.defineProperty(vW.prototype,"subtype",CC1);/*!
 * ignore
 */gg.exports=vW});var vg=z((jT1,hg)=>{/*!
 * Module dependencies.
 */var V8=RD(),WC1=bg(),m3=Q0(),HC1=V2(),qX=xF(),yg=B1(),mW=V8.Binary,QX=m3.CastError;function h0(F,A,B,D){m3.call(this,F,A,"Buffer",D)}h0.schemaName="Buffer";h0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */h0.prototype=Object.create(m3.prototype);h0.prototype.constructor=h0;h0.prototype.OptionsConstructor=WC1;/*!
 * ignore
 */h0._checkRequired=(F)=>!!F?.length;h0.set=m3.set;h0.setters=[];h0.get=m3.get;h0.checkRequired=m3.checkRequired;h0.prototype.checkRequired=function(F,A){if(m3._isRef(this,F,A,!0))return!!F;return this.constructor._checkRequired(F)};h0.prototype.cast=function(F,A,B,D,X){let Z;if(m3._isRef(this,F,A,B)){if(F?.isMongooseBuffer)return F;if(Buffer.isBuffer(F)){if(!F?.isMongooseBuffer){if(F=new V8(F,[this.path,A]),this.options.subtype!=null)F._subtype=this.options.subtype}return F}if(F instanceof mW){if(Z=new V8(F.value(!0),[this.path,A]),typeof F.sub_type!=="number")throw new QX("Buffer",F,this.path,null,this);return Z._subtype=F.sub_type,Z}if(F==null||yg.isNonBuiltinObject(F))return this._castRef(F,A,B,X)}if(F?._id)F=F._id;if(F?.isMongooseBuffer)return F;if(Buffer.isBuffer(F)){if(!F?.isMongooseBuffer){if(F=new V8(F,[this.path,A]),this.options.subtype!=null)F._subtype=this.options.subtype}return F}if(F instanceof mW){if(Z=new V8(F.value(!0),[this.path,A]),typeof F.sub_type!=="number")throw new QX("Buffer",F,this.path,null,this);return Z._subtype=F.sub_type,Z}if(F===null)return F;let J=typeof F;if(J==="string"||J==="number"||Array.isArray(F)||J==="object"&&F.type==="Buffer"&&Array.isArray(F.data)){if(J==="number")F=[F];if(Z=new V8(F,[this.path,A]),this.options.subtype!=null)Z._subtype=this.options.subtype;return Z}if(yg.isPOJO(F)&&(F.$binary instanceof mW||typeof F.$binary==="string")){let $=this.cast(Buffer.from(F.$binary,"base64"));if(F.$type!=null)return $._subtype=F.$type,$}throw new QX("Buffer",F,this.path,null,this)};h0.prototype.subtype=function(F){return this.options.subtype=F,this};/*!
 * ignore
 */function zX(F,A){return this.castForQuery(null,F,A)}var qC1={...m3.prototype.$conditionalHandlers,$bitsAllClear:qX,$bitsAnyClear:qX,$bitsAllSet:qX,$bitsAnySet:qX,$gt:zX,$gte:zX,$lt:zX,$lte:zX};Object.defineProperty(h0.prototype,"$conditionalHandlers",{enumerable:!1,value:qC1});h0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can't use "+F+" with Buffer.");return D.call(this,A)}let X;try{X=this.applySetters(A,B)}catch(Z){if(Z instanceof QX&&Z.path===this.path&&this.$fullPath!=null)Z.path=this.$fullPath;throw Z}return X?X.toObject({transform:!1,virtuals:!1}):X};h0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return HC1("string","binData",A?.useBsonType,B)};h0.prototype.autoEncryptionType=function F(){return"binData"};/*!
 * Module exports.
 */hg.exports=h0});var dg=z((TT1,mg)=>{var zC1=c2();class yF extends zC1{}var dW=G6();Object.defineProperty(yF.prototype,"min",dW);Object.defineProperty(yF.prototype,"max",dW);Object.defineProperty(yF.prototype,"expires",dW);/*!
 * ignore
 */mg.exports=yF});var lg=z((kT1,cg)=>{var cW=c("assert");cg.exports=function F(A){if(A==null||A==="")return null;if(A instanceof Date)return cW.ok(!isNaN(A.valueOf())),A;let B;if(cW.ok(typeof A!=="boolean"),A instanceof Number||typeof A==="number")B=new Date(A);else if(typeof A==="string"&&!isNaN(Number(A))&&(Number(A)>=275761||Number(A)<-271820))B=new Date(Number(A));else if(typeof A.valueOf==="function")B=new Date(A.valueOf());else B=new Date(A);if(!isNaN(B.valueOf()))return B;cW.ok(!1)}});var ag=z((uT1,ng)=>{/*!
 * Module requirements.
 */var pg=E6(),QC1=dg(),x4=Q0(),KC1=lg(),UC1=V2(),VC1=S2(),LC1=B1(),ig=x4.CastError;function t1(F,A,B,D){x4.call(this,F,A,"Date",D)}t1.schemaName="Date";t1.defaultOptions={};/*!
 * Inherits from SchemaType.
 */t1.prototype=Object.create(x4.prototype);t1.prototype.constructor=t1;t1.prototype.OptionsConstructor=QC1;/*!
 * ignore
 */t1._cast=KC1;t1.set=x4.set;t1.setters=[];t1.get=x4.get;t1.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */t1._defaultCaster=(F)=>{if(F!=null&&!(F instanceof Date))throw new Error;return F};t1.prototype.expires=function(F){if(VC1(this._index)!=="Object")this._index={};return this._index.expires=F,LC1.expires(this._index),this};/*!
 * ignore
 */t1._checkRequired=(F)=>F instanceof Date;t1.checkRequired=x4.checkRequired;t1.prototype.checkRequired=function(F,A){if(typeof F==="object"&&x4._isRef(this,F,A,!0))return F!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():t1.checkRequired())(F)};t1.prototype.min=function(F,A){if(this.minValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minValidator},this);if(F){let B=A||pg.messages.Date.min;if(typeof B==="string")B=B.replace(/{MIN}/,F===Date.now?"Date.now()":F.toString());let D=this;this.validators.push({validator:this.minValidator=function(X){let Z=F;if(typeof F==="function"&&F!==Date.now)Z=Z.call(this);let J=Z===Date.now?Z():D.cast(Z);return X===null||X.valueOf()>=J.valueOf()},message:B,type:"min",min:F})}return this};t1.prototype.max=function(F,A){if(this.maxValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxValidator},this);if(F){let B=A||pg.messages.Date.max;if(typeof B==="string")B=B.replace(/{MAX}/,F===Date.now?"Date.now()":F.toString());let D=this;this.validators.push({validator:this.maxValidator=function(X){let Z=F;if(typeof Z==="function"&&Z!==Date.now)Z=Z.call(this);let J=Z===Date.now?Z():D.cast(Z);return X===null||X.valueOf()<=J.valueOf()},message:B,type:"max",max:F})}return this};t1.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=t1.cast();try{return A(F)}catch(B){throw new ig("date",F,this.path,B,this)}};function KX(F){return this.cast(F)}var wC1={...x4.prototype.$conditionalHandlers,$gt:KX,$gte:KX,$lt:KX,$lte:KX};Object.defineProperty(t1.prototype,"$conditionalHandlers",{enumerable:!1,value:wC1});t1.prototype.castForQuery=function(F,A,B){if(F==null)try{return this.applySetters(A,B)}catch(X){if(X instanceof ig&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}let D=this.$conditionalHandlers[F];if(!D)throw new Error("Can't use "+F+" with Date.");return D.call(this,A)};t1.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return UC1("string","date",A?.useBsonType,B)};t1.prototype.autoEncryptionType=function F(){return"date"};/*!
 * Module exports.
 */ng.exports=t1});var rg=z((OT1,sg)=>{var _9=qD(),RC1=c("assert");sg.exports=function F(A){if(A==null)return A;if(typeof A==="object"&&typeof A.$numberDecimal==="string")return _9.fromString(A.$numberDecimal);if(A instanceof _9)return A;if(typeof A==="string")return _9.fromString(A);if(typeof Buffer==="function"&&Buffer.isBuffer(A))return new _9(A);if(typeof Uint8Array==="function"&&A instanceof Uint8Array)return new _9(A);if(typeof A==="number")return _9.fromString(String(A));if(typeof A.valueOf==="function"&&typeof A.valueOf()==="string")return _9.fromString(A.valueOf());RC1.ok(!1)}});var og=z((ST1,tg)=>{/*!
 * Module dependencies.
 */var d3=Q0(),PC1=d3.CastError,IC1=rg(),NC1=V2(),lW=B2();function N0(F,A,B,D){d3.call(this,F,A,"Decimal128",D)}N0.schemaName="Decimal128";N0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */N0.prototype=Object.create(d3.prototype);N0.prototype.constructor=N0;/*!
 * ignore
 */N0._cast=IC1;N0.set=d3.set;N0.setters=[];N0.get=d3.get;N0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */N0._defaultCaster=(F)=>{if(F!=null&&!lW(F,"Decimal128"))throw new Error;return F};/*!
 * ignore
 */N0._checkRequired=(F)=>lW(F,"Decimal128");N0.checkRequired=d3.checkRequired;N0.prototype.checkRequired=function F(A,B){if(d3._isRef(this,A,B,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():N0.checkRequired())(A)};N0.prototype.cast=function(F,A,B,D,X){if(d3._isRef(this,F,A,B)){if(lW(F,"Decimal128"))return F;return this._castRef(F,A,B,X)}let Z;if(typeof this._castFunction==="function")Z=this._castFunction;else if(typeof this.constructor.cast==="function")Z=this.constructor.cast();else Z=N0.cast();try{return Z(F)}catch(J){throw new PC1("Decimal128",F,this.path,J,this)}};/*!
 * ignore
 */function UX(F){return this.cast(F)}var MC1={...d3.prototype.$conditionalHandlers,$gt:UX,$gte:UX,$lt:UX,$lte:UX};Object.defineProperty(N0.prototype,"$conditionalHandlers",{enumerable:!1,value:MC1});N0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return NC1("string","decimal",A?.useBsonType,B)};N0.prototype.autoEncryptionType=function F(){return"decimal"};/*!
 * Module exports.
 */tg.exports=N0});var Ab=z((xT1,Fb)=>{var jC1=c2();class VX extends jC1{}var eg=G6();Object.defineProperty(VX.prototype,"_id",eg);Object.defineProperty(VX.prototype,"minimize",eg);Fb.exports=VX});var Db=z((_T1,Bb)=>{/*!
 * ignore
 */Bb.exports=function F(A){A.s.hooks.pre("save",!1,async function D(){if(this.$isSubdocument)return;let X=this.$getAllSubdocs({useCache:!0});if(!X.length)return;let Z=this.$__.saveOptions;if(await Promise.all(X.map((J)=>J._execDocumentPreHooks("save",Z))),this.$__.saveOptions)this.$__.saveOptions.__subdocs=null},null,!0),A.s.hooks.pre("save",async function D(){let X=this.$__.removedSubdocs;if(!X?.length)return;let Z=[];for(let J of X)Z.push(J._execDocumentPreHooks("deleteOne"));await Promise.all(Z)}),A.s.hooks.post("save",async function D(){let X=this.$__.removedSubdocs;if(!X?.length)return;let Z=[];for(let J of X)Z.push(J._execDocumentPostHooks("deleteOne"));this.$__.removedSubdocs=null,await Promise.all(Z)}),A.s.hooks.post("save",async function D(){if(this.$isSubdocument)return;let X=this.$getAllSubdocs({useCache:!0});if(!X.length)return;let Z=[];for(let J of X)Z.push(J._execDocumentPostHooks("save"));await Promise.all(Z)},null,!0)}});var Zb=z((fT1,nW)=>{var TC1=t().objectIdSymbol,Xb=B1();/*!
 * ignore
 */nW.exports=function F(A){A.post("init",function B(){return iW.call(this),this}),A.pre("save",function B(){pW.call(this)}),A.pre("deleteOne",{document:!0,query:!1},function B(){pW.call(this)}),A.pre("updateOne",{document:!0,query:!1},function B(){pW.call(this)}),A.post("save",function B(){iW.call(this)})};/*!
 * ignore
 */function pW(){let F,A;if(this.$__.shardval){F=Object.keys(this.$__.shardval),A=F.length,this.$where=this.$where||{};for(let B=0;B<A;++B)this.$where[F[B]]=this.$__.shardval[F[B]]}}/*!
 * ignore
 */nW.exports.storeShard=iW;/*!
 * ignore
 */function iW(){let F=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!Xb.isPOJO(F))return;let A=this.$__.shardval={},B=Object.keys(F),D=B.length,X;for(let Z=0;Z<D;++Z)if(X=this.$__getValue(B[Z]),X==null)A[B[Z]]=X;else if(Xb.isMongooseObject(X))A[B[Z]]=X.toObject({depopulate:!0,_isNested:!0});else if(X instanceof Date||X[TC1])A[B[Z]]=X;else if(typeof X.valueOf==="function")A[B[Z]]=X.valueOf();else A[B[Z]]=X}});var $b=z((gT1,Yb)=>{var L8=t().arrayAtomicsSymbol,aW=t().sessionNewDocuments,sW=B1();Yb.exports=function F(A){A.pre("save",function B(){let D=this.$session();if(D==null)return;if(D.transaction==null||D[aW]==null)return;if(!D[aW].has(this)){let X={};if(this.isNew)X.isNew=!0;if(this.$__schema.options.versionKey)X.versionKey=this.get(this.$__schema.options.versionKey);X.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),X.atomics=kC1(this),D[aW].set(this,X)}})};function kC1(F,A){let B=new Map;A=A||new Map;let D=Object.keys(F.$__.activePaths.init).concat(Object.keys(F.$__.activePaths.modify));for(let Z of D){let J=F.$__getValue(Z);if(Array.isArray(J)&&sW.isMongooseDocumentArray(J)&&J.length&&J[L8]!=null&&sW.hasOwnKeys(J[L8])){let $=A.get(Z)||{};B.set(Z,Jb($,J[L8]))}}let X=F.$__dirty();for(let Z of X){let{path:J,value:$}=Z;if($?.[L8]!=null&&sW.hasOwnKeys($[L8])){let Y=A.get(J)||{};B.set(J,Jb(Y,$[L8]))}}return B}function Jb(F,A){if(F=F||{},A.$pullAll!=null)F.$pullAll=(F.$pullAll||[]).concat(A.$pullAll);if(A.$push!=null)F.$push=F.$push||{},F.$push.$each=(F.$push.$each||[]).concat(A.$push.$each);if(A.$addToSet!=null)F.$addToSet=(F.$addToSet||[]).concat(A.$addToSet);if(A.$set!=null)F.$set=Array.isArray(A.$set)?[...A.$set]:Object.assign({},A.$set);return F}});var Gb=z((bT1,Eb)=>{/*!
 * ignore
 */Eb.exports=function F(A){A.pre("save",!1,async function D(X){if(this.$isSubdocument)return;let Z=X&&typeof X==="object"&&"validateBeforeSave"in X,J;if(Z)J=!!X.validateBeforeSave;else J=this.$__schema.options.validateBeforeSave;if(J){let Y=X&&typeof X==="object"&&"validateModifiedOnly"in X?{validateModifiedOnly:X.validateModifiedOnly}:null;await this.$validate(Y).then(()=>{this.$op="save"})}},null,!0)}});var rW=z((uC1)=>{uC1.saveSubdocs=Db();uC1.sharding=Zb();uC1.trackTransaction=$b();uC1.validateBeforeSave=Gb()});var Hb=z((hT1,Wb)=>{var Cb=rW();Wb.exports=function F(A){for(let B of Object.values(Cb))B(A,{deduplicate:!0});A.plugins=Object.values(Cb).map((B)=>({fn:B,opts:{deduplicate:!0}})).concat(A.plugins)}});var Qb=z((vT1,zb)=>{var fC1=wD(),gC1=L9(),bC1=B2(),yC1=j4(),hC1=Q0(),qb=w9();zb.exports=function F(A,B,D,X){let Z=Object.keys(B),J=0,$=Z.length,Y;if(D=D||"",X=X||new WeakSet,X.has(B))return;X.add(B);while(J<$){if(Y=Z[J++],!D){if(Y==="discriminators"||Y==="base"||Y==="_applyDiscriminators"||Y==="_userProvidedOptions"||Y==="options"||Y==="tree")continue}if(D==="tree"&&B?.instanceOfSchema)continue;if(gC1.has(Y))continue;if(A[Y]==null)A[Y]=B[Y];else if(qb(B[Y])){if(!qb(A[Y]))A[Y]={};if(B[Y]!=null){if(B[Y].$isSingleNested&&A[Y].$isMongooseDocumentArray||B[Y].$isMongooseDocumentArray&&A[Y].$isSingleNested||B[Y].$isMongooseDocumentArrayElement&&A[Y].$isMongooseDocumentArrayElement)continue;else if(B[Y].instanceOfSchema){if(A[Y].instanceOfSchema)fC1(A[Y],B[Y].clone(),!0);else A[Y]=B[Y].clone();continue}else if(bC1(B[Y],"ObjectId")){A[Y]=new yC1(B[Y]);continue}else if(B[Y]instanceof hC1){if(A[Y]==null)A[Y]=B[Y].clone();if(!B[Y].$isMongooseDocumentArray&&!B[Y].$isSingleNested)continue}}F(A[Y],B[Y],D?D+"."+Y:Y,X)}}if(B?.instanceOfSchema)A.tree=Object.assign({},B.tree,A.tree)}});var LX=z((mT1,Vb)=>{var Kb=Z8(),vC1=Hb(),mC1=C0(),dC1=kD().defineKey,cC1=K0(),tW=B1(),lC1=Qb(),Ub={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0,statics:!0};function pC1(F,A){if(F.encryptionType()==null&&A.encryptionType()==null)return;let B=X(D(F),D(A));for(let Z of B){if(F._hasEncryptedField(Z)&&A._hasEncryptedField(Z))throw new Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${Z}`);if(F._hasEncryptedField(Z)||A._hasEncryptedField(Z))throw new Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${Z}`)}function D(Z){return[...Object.keys(Z.paths),...Object.keys(Z.singleNestedPaths)]}function*X(Z,J){let $=new Set(Z);for(let Y of J)if($.has(Y))yield Y}}/*!
 * ignore
 */Vb.exports=function F(A,B,D,X,Z,J,$){if(!D?.instanceOfSchema)throw new Error("You must pass a valid discriminator Schema");if(J=J==null?!0:J,A.schema.discriminatorMapping&&!A.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+B+'" can only be a discriminator of the root model');if(Z){let W=cC1(A.base,"options.applyPluginsToDiscriminators",!1)||!J;A.base._applyPlugins(D,{skipTopLevel:!W})}else if(!J)vC1(D);let Y=A.schema.options.discriminatorKey,E=A.schema.path(Y);if(E!=null){if(!tW.hasUserDefinedProperty(E.options,"select"))E.options.select=!0;E.options.$skipDiscriminatorCheck=!0}else{let W={};W[Y]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},W[Y][A.schema.options.typeKey]=String,A.schema.add(W),dC1({prop:Y,prototype:A.prototype,options:A.schema.options})}if(D.path(Y)&&D.path(Y).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+B+'" cannot have field with name "'+Y+'"');let G=B;if(typeof X==="string"&&X.length||X!=null)G=X;pC1(A.schema,D);function C(W,H){if(W._baseSchema=H,H.paths._id&&H.paths._id.options&&!H.paths._id.options.auto)W.remove("_id");let q=Object.keys(H.paths),Q=[];for(let I of q){if(W.nested[I]){Q.push(I);continue}if(I.indexOf(".")===-1)continue;let u=I.split(".").slice(0,-1),O="";for(let k of u)if(O+=(O.length?".":"")+k,W.paths[O]instanceof Kb||W.singleNestedPaths[O]instanceof Kb)Q.push(I)}W.obj={...W.obj},lC1(W,H),W._gatherChildSchemas();for(let I of Q)delete W.paths[I];W.childSchemas.forEach((I)=>{I.model.prototype.$__setSchema(I.schema)});let K={};if(K[Y]={default:G,select:!0,set:function(I){if(I===G||Array.isArray(G)&&tW.deepEqual(I,G))return G;throw new Error(`Can't set discriminator key "`+Y+'"')},$skipDiscriminatorCheck:!0},K[Y][W.options.typeKey]=E?E.options[W.options.typeKey]:String,W.add(K),W.discriminatorMapping={key:Y,value:G,isRoot:!1},H.options.collection)W.options.collection=H.options.collection;let U=W.options.toJSON,R=W.options.toObject,w=W.options._id,V=W.options.id,N=Object.keys(W.options);W.options.discriminatorKey=H.options.discriminatorKey;let T=W._userProvidedOptions;for(let I of N)if(!Ub[I]){if(I in T&&!tW.deepEqual(W.options[I],H.options[I]))throw new Error("Can't customize discriminator option "+I+" (can only modify "+Object.keys(Ub).join(", ")+")")}W.options=mC1(H.options);for(let I of Object.keys(T))W.options[I]=T[I];if(U)W.options.toJSON=U;if(R)W.options.toObject=R;if(typeof w!=="undefined")W.options._id=w;if(W.options.id=V,J)W.s.hooks=A.schema.s.hooks.merge(W.s.hooks);if(Z)W.plugins=Array.prototype.slice.call(H.plugins);W.callQueue=H.callQueue.concat(W.callQueue),delete W._requiredpaths}if(C(D,A.schema),!A.discriminators)A.discriminators={};if(!A.schema.discriminatorMapping)A.schema.discriminatorMapping={key:Y,value:null,isRoot:!0};if(!A.schema.discriminators)A.schema.discriminators={};if(A.schema.discriminators[B]=D,A.discriminators[B]&&!D.options.overwriteModels&&!$)throw new Error('Discriminator with name "'+B+'" already exists');return D}});var wX=z((dT1,Lb)=>{var iC1=M6();Lb.exports=function F(A,B,D){let X=A.schema.options.discriminatorKey,Z=B?.[X];if(Z==null)Z=D;if(A.discriminators&&Z!=null)if(A.discriminators[Z])A=A.discriminators[Z];else{let J=iC1(A.discriminators,Z);if(J)A=J}return A}});var oW=z((cT1,wb)=>{var nC1=CW();wb.exports=function F(A,B){if(B?._id==null)return A;if(A=A.clone(),!B._id)A.remove("_id"),A.options._id=!1;else if(!A.paths._id)nC1(A),A.options._id=!0;return A}});var FH=z((lT1,Rb)=>{/*!
 * Module dependencies.
 */var aC1=K1();class eW extends aC1{constructor(F,A){let B=`Cannot create use schema for property "${F}" because the schema has the ${A} option enabled.`;super(B)}}Object.defineProperty(eW.prototype,"name",{value:"InvalidSchemaOptionError"});/*!
 * exports
 */Rb.exports=eW});var XH=z((pT1,jb)=>{/*!
 * Module dependencies.
 */var Pb=K2(),AH=c("events").EventEmitter,sC1=ID(),rC1=Ab(),f9=Q0(),tC1=MD(),oC1=VD(),Ib=_F().castToNumber,eC1=V2(),FW1=LX(),BH=xW(),DH=wX(),AW1=oW(),BW1=i6().internalToObjectOptions,DW1=$8(),Nb=B1(),XW1=FH(),RX;jb.exports=v0;function v0(F,A,B,D){if(F.options.timeseries)throw new XW1(A,"timeseries");let X=v0.defaultOptions?._id;if(X!=null)B=B||{},B._id=X;F=AW1(F,B),this.Constructor=Mb(F,null,B),this.Constructor.path=A,this.Constructor.prototype.$basePath=A,this.schema=F,this.$isSingleNested=!0,this.base=F.base,f9.call(this,A,B,"Embedded",D)}/*!
 * ignore
 */v0.prototype=Object.create(f9.prototype);v0.prototype.constructor=v0;v0.prototype.OptionsConstructor=rC1;/*!
 * ignore
 */function Mb(F,A,B){RX||(RX=_D());let D=function Z(J,$,Y){if(this.$__parent=Y,RX.apply(this,arguments),Y==null)return;this.$session(Y.$session())};F._preCompile();let X=A?.prototype??RX.prototype;D.prototype=Object.create(X),D.prototype.$__setSchema(F),D.prototype.constructor=D,D.prototype.$__schemaTypeOptions=B,D.$__required=B?.required,D.base=F.base,D.schema=F,D.$isSingleNested=!0,D.events=new AH,D.prototype.toBSON=function(){return this.toObject(BW1)};for(let Z in F.methods)D.prototype[Z]=F.methods[Z];for(let Z in F.statics)D[Z]=F.statics[Z];for(let Z in AH.prototype)D[Z]=AH.prototype[Z];return D}/*!
 * ignore
 */var q3={...f9.prototype.$conditionalHandlers};q3.$geoWithin=function F(A,B){return{$geometry:this.castForQuery(null,A.$geometry,B)}};/*!
 * ignore
 */q3.$near=q3.$nearSphere=BH.cast$near;q3.$within=q3.$geoWithin=BH.cast$within;q3.$geoIntersects=BH.cast$geoIntersects;q3.$minDistance=Ib;q3.$maxDistance=Ib;q3.$exists=oC1;Object.defineProperty(v0.prototype,"$conditionalHandlers",{enumerable:!1,value:q3});v0.prototype.cast=function(F,A,B,D,X){if(F?.$isSingleNested&&F.parent===A)return F;if(!B&&F!=null&&(typeof F!=="object"||Array.isArray(F)))throw new sC1(this.path,F);let Z=this.schema.path(this.schema.options.discriminatorKey),J=Z==null?null:Z.getDefault(A),$=DH(this.Constructor,F,J),Y,E=A?.$__?.selected,G=this.path,C=E==null?null:Object.keys(E).reduce((W,H)=>{if(H.startsWith(G+"."))W=W||{},W[H.substring(G.length+1)]=E[H];return W},null);if(B){if(Y=new $(void 0,C,A,{defaults:!1}),delete Y.$__.defaults,X.path!=null)X={...X},delete X.path;Y.$init(F,X);let W=DW1(C);tC1(Y,C,W)}else{if(X=Object.assign({},X,{priorDoc:D}),Nb.hasOwnKeys(F)===!1)return new $({},C,A,X);return new $(F,C,A,X)}return Y};v0.prototype.castForQuery=function(F,A,B,D){let X;if(F!=null){if(X=this.$conditionalHandlers[F],!X)throw new Error("Can't use "+F);return X.call(this,A)}if(A==null)return A;let Z=DH(this.Constructor,A);if(A instanceof Z)return A;if(this.options.runSetters)A=this._applySetters(A,B);let J=D?.strict??void 0;try{A=new Z(A,J)}catch($){if(!($ instanceof Pb))throw new Pb("Embedded",A,this.path,$,this);throw $}return A};v0.prototype.doValidate=async function F(A,B,D){let X=DH(this.Constructor,A);if(A&&!(A instanceof X))A=new X(A,null,B?.$__!=null?B:null);if(D?.skipSchemaValidators){if(!A)return;return A.validate()}if(await f9.prototype.doValidate.call(this,A,B,D),A!=null)await A.validate()};v0.prototype.doValidateSync=function(F,A,B){if(!B?.skipSchemaValidators){let D=f9.prototype.doValidateSync.call(this,F,A);if(D)return D}if(!F)return;return F.validateSync()};v0.prototype.discriminator=function(F,A,B){B=B||{};let D=Nb.isPOJO(B)?B.value:B,X=typeof B.clone==="boolean"?B.clone:!0;if(A.instanceOfSchema&&X)A=A.clone();return A=FW1(this.Constructor,F,A,D,null,null,B.overwriteExisting),this.Constructor.discriminators[F]=Mb(A,this.Constructor),this.Constructor.discriminators[F]};/*!
 * ignore
 */v0.defaultOptions={};v0.set=f9.set;v0.setters=[];v0.get=f9.get;/*!
 * ignore
 */v0.prototype.toJSON=function F(){return{path:this.path,options:this.options}};/*!
 * ignore
 */v0.prototype.clone=function(){let F=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0},this.parentSchema);if(F.validators=this.validators.slice(),this.requiredValidator!==void 0)F.requiredValidator=this.requiredValidator;return F.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),F._appliedDiscriminators=this._appliedDiscriminators,F};v0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return{...this.schema.toJSONSchema(A),...eC1("object","object",A?.useBsonType,B)}}});var kb=z((iT1,Tb)=>{/*!
 * Module dependencies.
 */var ZW1=K1(),ZH=Q0(),JW1=XH(),YW1=wX();function c3(F,A,B,D){if(this.$parentSchemaType=B?.$parentSchemaType,!this.$parentSchemaType)throw new ZW1("Cannot create DocumentArrayElement schematype without a parent");delete B.$parentSchemaType,ZH.call(this,F,B,"DocumentArrayElement",D),this.$isMongooseDocumentArrayElement=!0,this.Constructor=B?.Constructor,this.schema=A}c3.schemaName="DocumentArrayElement";c3.defaultOptions={};/*!
 * Inherits from SchemaType.
 */c3.prototype=Object.create(ZH.prototype);c3.prototype.constructor=c3;c3.prototype.cast=function(...F){return this.$parentSchemaType.cast(...F)[0]};c3.prototype.doValidate=async function F(A,B,D){let X=YW1(this.Constructor,A);if(A&&!(A instanceof X))A=new X(A,B,null,null,D?.index??null);return JW1.prototype.doValidate.call(this,A,B,D)};c3.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let F=ZH.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,F.Constructor=this.Constructor,F.schema=this.schema,F};/*!
 * Module exports.
 */Tb.exports=c3});var Sb=z((nT1,Ob)=>{var $W1=c2();class PX extends $W1{}var ub=G6();Object.defineProperty(PX.prototype,"excludeIndexes",ub);Object.defineProperty(PX.prototype,"_id",ub);/*!
 * ignore
 */Ob.exports=PX});var mb=z((aT1,vb)=>{/*!
 * Module dependencies.
 */var xb=K2(),EW1=kb(),JH=c("events").EventEmitter,$H=EX(),GW1=Sb(),hF=Q0(),_b=x9(),fb=V2(),CW1=LX(),gb=oW(),WW1=SD(),HW1=OF(),w8=B1(),IX=wX(),qW1=FH(),bb=t().arrayAtomicsSymbol,YH=t().arrayPathSymbol,zW1=t().documentArrayParent,l3,g9;function W0(F,A,B,D,X){if(A.options?.timeseries)throw new qW1(F,"timeseries");let Z=W0.defaultOptions?._id;if(Z!=null)D=D||{},D._id=Z;if(D?._id!=null)A=gb(A,D);else if(B?._id!=null)A=gb(A,B);let J=hb(A,B);J.prototype.$basePath=F,J.path=F;let $=this,Y=new EW1(F+".$",A,{...D||{},$parentSchemaType:$,Constructor:J});$H.call(this,F,Y,B,null,X),this.schema=A,this.schemaOptions=D||{},this.$isMongooseDocumentArray=!0,this.Constructor=J,J.base=A.base;let E=this.defaultValue;if(!("defaultValue"in this)||E!=null)this.default(function(){let G=E.call(this);if(G!=null&&!Array.isArray(G))G=[G];return G})}W0.schemaName="DocumentArray";W0.options={castNonArrays:!0};/*!
 * Inherits from SchemaArray.
 */W0.prototype=Object.create($H.prototype);W0.prototype.constructor=W0;W0.prototype.OptionsConstructor=GW1;Object.defineProperty(W0.prototype,"$conditionalHandlers",{enumerable:!1,value:{...$H.prototype.$conditionalHandlers}});/*!
 * ignore
 */function hb(F,A,B){g9||(g9=G8());function D(){if(g9.apply(this,arguments),this.__parentArray==null||this.__parentArray.getArrayParent()==null)return;this.$session(this.__parentArray.getArrayParent().$session())}F._preCompile();let X=B?.prototype??g9.prototype;D.prototype=Object.create(X),D.prototype.$__setSchema(F),D.schema=F,D.prototype.constructor=D,D.$isArraySubdocument=!0,D.events=new JH,D.base=F.base;for(let Z in F.methods)D.prototype[Z]=F.methods[Z];for(let Z in F.statics)D[Z]=F.statics[Z];for(let Z in JH.prototype)D[Z]=JH.prototype[Z];return D.options=A,D}W0.prototype.discriminator=function(F,A,B){if(typeof F==="function")F=w8.getFunctionName(F);B=B||{};let D=w8.isPOJO(B)?B.value:B,X=typeof B.clone==="boolean"?B.clone:!0;if(A.instanceOfSchema&&X)A=A.clone();A=CW1(this.Constructor,F,A,D,null,null,B?.overwriteExisting);let Z=hb(A,null,this.Constructor);return Z.baseCasterConstructor=this.Constructor,Object.defineProperty(Z,"name",{value:F}),this.Constructor.discriminators[F]=Z,this.Constructor.discriminators[F]};W0.prototype.doValidate=async function F(A,B,D){if(l3||(l3=k9()),await hF.prototype.doValidate.call(this,A,B),D?.updateValidator)return;if(!w8.isMongooseDocumentArray(A))A=new l3(A,this.path,B);let X=[];for(let Z=0;Z<A.length;++Z){let J=A[Z];if(J==null)continue;if(!(J instanceof g9)){let $=IX(this.Constructor,A[Z]);J=A[Z]=new $(J,A,void 0,void 0,Z)}if(D?.validateModifiedOnly&&!J.$isModified())continue;X.push(J.$__validate(null,D))}await Promise.all(X)};W0.prototype.doValidateSync=function(F,A,B){let D=hF.prototype.doValidateSync.call(this,F,A);if(D!=null)return D;let X=F?.length,Z=null;if(!X)return;for(let J=0,$=X;J<$;++J){let Y=F[J];if(!Y)continue;if(!(Y instanceof g9)){let G=IX(this.Constructor,F[J]);Y=F[J]=new G(Y,F,void 0,void 0,J)}if(B?.validateModifiedOnly&&!Y.$isModified())continue;let E=Y.validateSync(B);if(E&&Z==null)Z=E}return Z};/*!
 * ignore
 */W0.prototype.getDefault=function(F,A,B){let D=typeof this.defaultValue==="function"?this.defaultValue.call(F):this.defaultValue;if(D==null)return D;if(B?.skipCast)return D;if(l3||(l3=k9()),!Array.isArray(D))D=[D];D=new l3(D,this.path,F);for(let X=0;X<D.length;++X){let J=new(IX(this.Constructor,D[X]))({},D,void 0,void 0,X);J.$init(D[X]),J.isNew=!0,Object.assign(J.$__.activePaths.default,J.$__.activePaths.init),J.$__.activePaths.init={},D[X]=J}return D};var QW1=Object.freeze({transform:!1,virtuals:!1}),yb=Object.freeze({skipId:!1,willInit:!0});W0.prototype.cast=function(F,A,B,D,X){if(l3||(l3=k9()),F?.[YH]!=null&&F===D)return F;let Z,J;X=X||{};let $=X.path||this.path;if(!Array.isArray(F)){if(!B&&!W0.options.castNonArrays)throw new xb("DocumentArray",F,this.path,null,this);if(!!A&&B)A.markModified($);return this.cast([F],A,B,D,X)}if(!X.skipDocumentArrayCast||w8.isMongooseDocumentArray(F))F=new l3(F,$,A,this);if(D!=null)F[bb]=D[bb]||{};if(X.arrayPathIndex!=null)F[YH]=$+"."+X.arrayPathIndex;let Y=w8.isMongooseDocumentArray(F)?F.__array:F,E=Y.length;for(let G=0;G<E;++G){if(!Y[G])continue;let C=IX(this.Constructor,Y[G]),W=WW1(Y[G],!0);if(Y[G]!==W)Y[G]=W;if(Y[G]instanceof g9){if(Y[G][zW1]!==A)if(B){let H=new C(null,F,yb,Z,G);Y[G]=H.$init(Y[G])}else{let H=new C(Y[G],F,void 0,void 0,G);Y[G]=H}if(Y[G].__index==null)Y[G].$setIndex(G)}else if(Y[G]!=null)if(B){if(A)Z||(Z=KW1(this,A.$__.selected,B));else Z=!0;J=new C(null,F,yb,Z,G),Y[G]=J.$init(Y[G],X)}else{if(typeof D?.id==="function")J=D.id(Y[G]._id);if(D&&J&&w8.deepEqual(J.toObject(QW1),Y[G]))J.set(Y[G]),Y[G]=J;else try{J=new C(Y[G],F,void 0,void 0,G),Y[G]=J}catch(H){throw new xb("embedded",Y[G],F[YH],H,this)}}}return F};/*!
 * ignore
 */W0.prototype.clone=function(){let F=Object.assign({},this.options),A=new this.constructor(this.path,this.schema,F,this.schemaOptions,this.parentSchema);if(A.validators=this.validators.slice(),this.requiredValidator!==void 0)A.requiredValidator=this.requiredValidator;return A.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),A._appliedDiscriminators=this._appliedDiscriminators,A};/*!
 * ignore
 */W0.prototype.applyGetters=function(F,A){return hF.prototype.applyGetters.call(this,F,A)};function KW1(F,A,B){if(!(B&&A))return;let D=F.path+".",X=Object.keys(A),Z=X.length,J={},$,Y,E;while(Z--)if(Y=X[Z],Y.startsWith(D)){if(E=Y.substring(D.length),E==="$")continue;if(E.startsWith("$."))E=E.substring(2);$||($=!0),J[E]=A[Y]}return $&&J||void 0}/*!
 * ignore
 */W0.defaultOptions={};W0.set=hF.set;W0.setters=[];W0.get=hF.get;/*!
 * Handle casting $elemMatch operators
 */W0.prototype.$conditionalHandlers.$elemMatch=UW1;function UW1(F,A){let B=Object.keys(F),D=B.length;for(let $=0;$<D;++$){let Y=B[$],E=F[Y];if(HW1(Y)&&E!=null)F[Y]=this.castForQuery(Y,E,A)}let X=this?.Constructor?.schema?.options?.discriminatorKey,Z=this?.Constructor?.schema?.discriminators||{};if(X!=null&&F[X]!=null&&Z[F[X]]!=null)return _b(Z[F[X]],F,null,this?.$$context);let J=this.Constructor.schema??A.schema;return _b(J,F,null,this?.$$context)}W0.prototype.toJSONSchema=function F(A){let B=fb("object","object",A?.useBsonType,!1),D=this.options.required&&typeof this.options.required!=="function";return{...fb("array","array",A?.useBsonType,D),items:{...B,...this.schema.toJSONSchema(A)}}};/*!
 * Module exports.
 */vb.exports=W0});var lb=z((sT1,cb)=>{var db=c("assert"),EH=$1(),VW1=B2();cb.exports=function F(A){if(A==null||A==="")return null;let B;if(VW1(A,"Long"))B=A.toNumber();else if(typeof A==="string")try{return B=EH.Double.fromString(A),B}catch{db.ok(!1)}else if(typeof A==="object"){let D=A.valueOf()??A.toString();if(typeof D==="string")try{return B=EH.Double.fromString(D),B}catch{db.ok(!1)}else B=Number(D)}else B=Number(A);return new EH.Double(B)}});var ib=z((rT1,pb)=>{/*!
 * Module dependencies.
 */var LW1=K2(),R8=Q0(),wW1=lb(),RW1=V2();function O0(F,A,B,D){R8.call(this,F,A,"Double",D)}O0.schemaName="Double";O0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */O0.prototype=Object.create(R8.prototype);O0.prototype.constructor=O0;/*!
 * ignore
 */O0._cast=wW1;O0.set=R8.set;O0.setters=[];O0.get=R8.get;/*!
 * ignore
 */O0._defaultCaster=(F)=>{if(F!=null){if(F._bsontype!=="Double")throw new Error}return F};O0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */O0._checkRequired=(F)=>F!=null;O0.checkRequired=R8.checkRequired;O0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};O0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=O0.cast();try{return A(F)}catch(B){throw new LW1("Double",F,this.path,B,this)}};/*!
 * ignore
 */function NX(F){return this.cast(F)}var PW1={...R8.prototype.$conditionalHandlers,$gt:NX,$gte:NX,$lt:NX,$lte:NX};Object.defineProperty(O0.prototype,"$conditionalHandlers",{enumerable:!1,value:PW1});O0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return RW1("number","double",A?.useBsonType,B)};O0.prototype.autoEncryptionType=function F(){return"double"};/*!
 * Module exports.
 */pb.exports=O0});var ab=z((tT1,nb)=>{var IW1=B2(),NW1=c("assert");nb.exports=function F(A){if(A==null)return A;if(A==="")return null;let B=IW1(A,"Long")?A.toNumber():Number(A),D=2147483647,X=-2147483648;if(B===(B|0)&&B>=X&&B<=D)return B;NW1.ok(!1)}});var tb=z((oT1,rb)=>{/*!
 * Module dependencies.
 */var sb=K2(),P8=Q0(),MW1=ab(),jW1=V2(),MX=xF();function M0(F,A,B,D){P8.call(this,F,A,"Int32",D)}M0.schemaName="Int32";M0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */M0.prototype=Object.create(P8.prototype);M0.prototype.constructor=M0;/*!
 * ignore
 */M0._cast=MW1;M0.set=P8.set;M0.setters=[];M0.get=P8.get;/*!
 * ignore
 */M0._defaultCaster=(F)=>{if(F!=null){if(typeof F!=="number"||F!==(F|0)||F<-2147483648||F>2147483647)throw new Error}return F};M0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */M0._checkRequired=(F)=>F!=null;M0.checkRequired=P8.checkRequired;M0.prototype.checkRequired=function(F){return this.constructor._checkRequired(F)};M0.prototype.cast=function(F){let A;if(typeof this._castFunction==="function")A=this._castFunction;else if(typeof this.constructor.cast==="function")A=this.constructor.cast();else A=M0.cast();try{return A(F)}catch(B){throw new sb("Int32",F,this.path,B,this)}};/*!
 * ignore
 */var TW1={...P8.prototype.$conditionalHandlers,$gt:jX,$gte:jX,$lt:jX,$lte:jX,$bitsAllClear:MX,$bitsAnyClear:MX,$bitsAllSet:MX,$bitsAnySet:MX};Object.defineProperty(M0.prototype,"$conditionalHandlers",{enumerable:!1,value:TW1});/*!
 * ignore
 */function jX(F,A){return this.castForQuery(null,F,A)}M0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],D)return D.call(this,A);return this.applySetters(A,B)}try{return this.applySetters(A,B)}catch(X){if(X instanceof sb&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};M0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return jW1("number","int",A?.useBsonType,B)};M0.prototype.autoEncryptionType=function F(){return"int"};/*!
 * Module exports.
 */rb.exports=M0});var eb=z((eT1,ob)=>{var kW1=c2();class GH extends kW1{}var uW1=G6();Object.defineProperty(GH.prototype,"of",uW1);ob.exports=GH});var By=z((Fk1,Ay)=>{/*!
 * ignore
 */var CH=AX(),OW1=eb(),Fy=Q0(),SW1=V2(),xW1=K1(),_W1=u9(),I8=B1();class N8 extends Fy{constructor(F,A,B,D){super(F,A,"Map",D);this.$isSchemaMap=!0,this._createNestedSchemaType(D,F,A,B)}set(F,A){return Fy.set(F,A)}cast(F,A,B,D,X){if(F instanceof CH)return F;let Z=this.path;if(B){let J=new CH({},Z,A,this.$__schemaType,X),$=J.$__pathRelativeToParent!=null?J.$__pathRelativeToParent:J.$__path;if(F instanceof global.Map)for(let Y of F.keys()){let E=F.get(Y);if(E==null)E=J.$__schemaType._castNullish(E);else E=J.$__schemaType.cast(E,A,!0,null,{...X,path:$+"."+Y});J.$init(Y,E)}else for(let Y of Object.keys(F)){let E=F[Y];if(E==null)E=J.$__schemaType._castNullish(E);else E=J.$__schemaType.cast(E,A,!0,null,{...X,path:$+"."+Y});J.$init(Y,E)}return J}return new CH(F,Z,A,this.$__schemaType,X)}clone(){let F=super.clone();if(this.$__schemaType!=null)F.$__schemaType=this.$__schemaType.clone();return F}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema(F){let A=F?.useBsonType,B=this.getEmbeddedSchemaType(),D=this.options.required&&typeof this.options.required!=="function",X=SW1("object","object",A,D);return X.additionalProperties=B.toJSONSchema(F),X}autoEncryptionType(){return"object"}}N8.schemaName="Map";N8.prototype.OptionsConstructor=OW1;N8.defaultOptions={};/*!
 * ignore
 */N8.prototype._createNestedSchemaType=function F(A,B,D,X){let Z=B+".$*",J={type:{}};if(I8.hasUserDefinedProperty(D,"of")){if(I8.isPOJO(D.of)&&I8.hasOwnKeys(D.of)&&!I8.hasUserDefinedProperty(D.of,A.options.typeKey))J={[A.options.typeKey]:new _W1(D.of)};else if(I8.isPOJO(D.of))J=Object.assign({},D.of);else J={[A.options.typeKey]:D.of};if(J[A.options.typeKey]&&J[A.options.typeKey].instanceOfSchema)J[A.options.typeKey].eachPath((E,G)=>{if(G.options.select===!0||G.options.select===!1)throw new xW1('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+B+"."+E+'"')});if(I8.hasUserDefinedProperty(D,"ref"))J.ref=D.ref}this.$__schemaType=A.interpretAsType(Z,J,X)};Ay.exports=N8});var Zy=z((Ak1,Xy)=>{var fW1=c2();class TX extends fW1{}var Dy=G6();Object.defineProperty(TX.prototype,"auto",Dy);Object.defineProperty(TX.prototype,"populate",Dy);/*!
 * ignore
 */Xy.exports=TX});var $y=z((Bk1,Yy)=>{var Jy=B2(),WH=j4();Yy.exports=function F(A){if(A==null)return A;if(Jy(A,"ObjectId"))return A;if(A._id){if(Jy(A._id,"ObjectId"))return A._id;if(A._id.toString instanceof Function)return new WH(A._id.toString())}if(A.toString instanceof Function)return new WH(A.toString());return new WH(A)}});var Wy=z((Dk1,Cy)=>{/*!
 * Module dependencies.
 */var gW1=Zy(),p3=Q0(),bW1=$y(),yW1=V2(),hW1=S2(),qH=j4(),zH=B2(),Ey=B1(),vW1=p3.CastError,HH;function H0(F,A,B,D){let X=typeof F==="string"&&F.length===24&&/^[a-f0-9]+$/i.test(F),Z=A?.suppressWarning;if((X||typeof F==="undefined")&&!Z)Ey.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema.");p3.call(this,F,A,"ObjectId",D)}H0.schemaName="ObjectId";H0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */H0.prototype=Object.create(p3.prototype);H0.prototype.constructor=H0;H0.prototype.OptionsConstructor=gW1;H0.get=p3.get;H0.set=p3.set;H0.setters=[];H0.prototype.auto=function(F){if(F)this.default(Gy),this.set(dW1);return this};/*!
 * ignore
 */H0._checkRequired=(F)=>zH(F,"ObjectId");/*!
 * ignore
 */H0._cast=bW1;H0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */H0._defaultCaster=(F)=>{if(!zH(F,"ObjectId"))throw new Error(F+" is not an instance of ObjectId");return F};H0.checkRequired=p3.checkRequired;H0.prototype.checkRequired=function F(A,B){if(p3._isRef(this,A,B,!0))return!!A;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():H0.checkRequired())(A)};H0.prototype.cast=function(F,A,B,D,X){if(!zH(F,"ObjectId")&&p3._isRef(this,F,A,B)){if((hW1(F)||"").toLowerCase()==="objectid")return new qH(F.toHexString());if(F==null||Ey.isNonBuiltinObject(F))return this._castRef(F,A,B,X)}let Z;if(typeof this._castFunction==="function")Z=this._castFunction;else if(typeof this.constructor.cast==="function")Z=this.constructor.cast();else Z=H0.cast();try{return Z(F)}catch(J){throw new vW1("ObjectId",F,this.path,J,this)}};/*!
 * ignore
 */function kX(F){return this.cast(F)}var mW1={...p3.prototype.$conditionalHandlers,$gt:kX,$gte:kX,$lt:kX,$lte:kX};Object.defineProperty(H0.prototype,"$conditionalHandlers",{enumerable:!1,value:mW1});/*!
 * ignore
 */function Gy(){return new qH}Gy.$runBeforeSetters=!0;function dW1(F){if(HH||(HH=W3()),this instanceof HH){if(F===void 0)return new qH}return F}H0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function"||this.path==="_id";return yW1("string","objectId",A?.useBsonType,B)};H0.prototype.autoEncryptionType=function F(){return"objectId"};/*!
 * Module exports.
 */Cy.exports=H0});var qy=z((Xk1,Hy)=>{var cW1=c2();class T6 extends cW1{}var z3=G6();Object.defineProperty(T6.prototype,"enum",z3);Object.defineProperty(T6.prototype,"match",z3);Object.defineProperty(T6.prototype,"lowercase",z3);Object.defineProperty(T6.prototype,"trim",z3);Object.defineProperty(T6.prototype,"uppercase",z3);Object.defineProperty(T6.prototype,"minLength",z3);Object.defineProperty(T6.prototype,"minlength",z3);Object.defineProperty(T6.prototype,"maxLength",z3);Object.defineProperty(T6.prototype,"maxlength",z3);Object.defineProperty(T6.prototype,"populate",z3);/*!
 * ignore
 */Hy.exports=T6});var QH=z((Zk1,Uy)=>{/*!
 * Module dependencies.
 */var i3=Q0(),mF=E6(),lW1=qy(),pW1=XX(),iW1=V2(),zy=B1(),nW1=B2(),Ky=i3.CastError;function O1(F,A,B,D){this.enumValues=[],this.regExp=null,i3.call(this,F,A,"String",D)}O1.schemaName="String";O1.defaultOptions={};/*!
 * Inherits from SchemaType.
 */O1.prototype=Object.create(i3.prototype);O1.prototype.constructor=O1;Object.defineProperty(O1.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:lW1});/*!
 * ignore
 */O1._cast=pW1;O1.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */O1._defaultCaster=(F)=>{if(F!=null&&typeof F!=="string")throw new Error;return F};O1.get=i3.get;O1.set=i3.set;O1.setters=[];/*!
 * ignore
 */O1._checkRequired=(F)=>(F instanceof String||typeof F==="string")&&F.length;O1.checkRequired=i3.checkRequired;O1.prototype.enum=function(){if(this.enumValidator)this.validators=this.validators.filter(function(D){return D.validator!==this.enumValidator},this),this.enumValidator=!1;if(arguments[0]===void 0||arguments[0]===!1)return this;let F,A;if(zy.isObject(arguments[0]))if(Array.isArray(arguments[0].values))F=arguments[0].values,A=arguments[0].message;else F=zy.object.vals(arguments[0]),A=mF.messages.String.enum;else F=arguments,A=mF.messages.String.enum;for(let D of F)if(D!==void 0)this.enumValues.push(this.cast(D));let B=this.enumValues;return this.enumValidator=function(D){return D==null||~B.indexOf(D)},this.validators.push({validator:this.enumValidator,message:A,type:"enum",enumValues:B}),this};O1.prototype.lowercase=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.toLowerCase();return A})};O1.prototype.uppercase=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.toUpperCase();return A})};O1.prototype.trim=function(F){if(arguments.length>0&&!F)return this;return this.set((A)=>{if(typeof A!=="string")A=this.cast(A);if(A)return A.trim();return A})};O1.prototype.minlength=function(F,A){if(this.minlengthValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.minlengthValidator},this);if(F!=null){let B=A||mF.messages.String.minlength;B=B.replace(/{MINLENGTH}/,F),this.validators.push({validator:this.minlengthValidator=function(D){return D===null||D.length>=F},message:B,type:"minlength",minlength:F})}return this};O1.prototype.minLength=O1.prototype.minlength;O1.prototype.maxlength=function(F,A){if(this.maxlengthValidator)this.validators=this.validators.filter(function(B){return B.validator!==this.maxlengthValidator},this);if(F!=null){let B=A||mF.messages.String.maxlength;B=B.replace(/{MAXLENGTH}/,F),this.validators.push({validator:this.maxlengthValidator=function(D){return D===null||D.length<=F},message:B,type:"maxlength",maxlength:F})}return this};O1.prototype.maxLength=O1.prototype.maxlength;O1.prototype.match=function F(A,B){let D=B||mF.messages.String.match,X=function(Z){if(!A)return!1;return A.lastIndex=0,Z!=null&&Z!==""?A.test(Z):!0};return this.validators.push({validator:X,message:D,type:"regexp",regexp:A}),this};O1.prototype.checkRequired=function F(A,B){if(typeof A==="object"&&i3._isRef(this,A,B,!0))return A!=null;return(typeof this.constructor.checkRequired==="function"?this.constructor.checkRequired():O1.checkRequired())(A)};O1.prototype.cast=function(F,A,B,D,X){if(typeof F!=="string"&&i3._isRef(this,F,A,B))return this._castRef(F,A,B,X);let Z;if(typeof this._castFunction==="function")Z=this._castFunction;else if(typeof this.constructor.cast==="function")Z=this.constructor.cast();else Z=O1.cast();try{return Z(F)}catch{throw new Ky("string",F,this.path,null,this)}};/*!
 * ignore
 */function vF(F,A){return this.castForQuery(null,F,A)}/*!
 * ignore
 */function aW1(F,A){let B=this;if(!Array.isArray(F))return[this.castForQuery(null,F,A)];return F.map(function(D){return B.castForQuery(null,D,A)})}/*!
 * ignore
 */function Qy(F){if(F==null)return this._castNullish(F);return this.cast(F,this)}var sW1={...i3.prototype.$conditionalHandlers,$all:aW1,$gt:vF,$gte:vF,$lt:vF,$lte:vF,$options:Qy,$regex:function F(A){if(Object.prototype.toString.call(A)==="[object RegExp]")return A;return Qy.call(this,A)},$not:vF};Object.defineProperty(O1.prototype,"$conditionalHandlers",{enumerable:!1,value:sW1});O1.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can't use "+F+" with String.");return D.call(this,A,B)}if(Object.prototype.toString.call(A)==="[object RegExp]"||nW1(A,"BSONRegExp"))return A;try{return this.applySetters(A,B)}catch(X){if(X instanceof Ky&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};O1.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return iW1("string","string",A?.useBsonType,B)};O1.prototype.autoEncryptionType=function F(){return"string"};/*!
 * Module exports.
 */Uy.exports=O1});var Vy=z((Jk1,VH)=>{var KH=$1().UUID,UH=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i;VH.exports=function F(A){if(A==null)return A;if(A instanceof KH)return A;if(typeof A==="string")if(UH.test(A))return new KH(A);else throw new Error(`"${A}" is not a valid UUID string`);if(A.toString&&A.toString!==Object.prototype.toString){if(UH.test(A.toString()))return new KH(A.toString())}throw new Error(`"${A}" cannot be casted to a UUID`)};VH.exports.UUID_FORMAT=UH});var Py=z((Yk1,Ry)=>{/*!
 * Module dependencies.
 */var _4=Q0(),Ly=_4.CastError,wy=Vy(),rW1=V2(),tW1=B1(),uX=xF(),oW1=wy.UUID_FORMAT;function eW1(F){let A;if(typeof F!=="string"&&F!=null)return A=F.toString("hex"),A.substring(0,8)+"-"+A.substring(8,12)+"-"+A.substring(12,16)+"-"+A.substring(16,20)+"-"+A.substring(20,32);return F}function j0(F,A,B,D){_4.call(this,F,A,"UUID",D)}j0.schemaName="UUID";j0.defaultOptions={};/*!
 * Inherits from SchemaType.
 */j0.prototype=Object.create(_4.prototype);j0.prototype.constructor=j0;/*!
 * ignore
 */j0._cast=wy;j0.get=_4.get;j0.set=_4.set;j0.setters=[];j0.cast=function F(A){if(arguments.length===0)return this._cast;if(A===!1)A=this._defaultCaster;return this._cast=A,this._cast};/*!
 * ignore
 */j0._checkRequired=(F)=>F!=null;j0.checkRequired=_4.checkRequired;j0.prototype.checkRequired=function F(A){if(Buffer.isBuffer(A))A=eW1(A);return A!=null&&oW1.test(A)};j0.prototype.cast=function(F,A,B,D,X){if(tW1.isNonBuiltinObject(F)&&_4._isRef(this,F,A,B))return this._castRef(F,A,B,X);let Z;if(typeof this._castFunction==="function")Z=this._castFunction;else if(typeof this.constructor.cast==="function")Z=this.constructor.cast();else Z=j0.cast();try{return Z(F)}catch(J){throw new Ly(j0.schemaName,F,this.path,J,this)}};/*!
 * ignore
 */function FH1(F){return this.cast(F)}/*!
 * ignore
 */function LH(F){return F.map((A)=>{return this.cast(A)})}var AH1={..._4.prototype.$conditionalHandlers,$bitsAllClear:uX,$bitsAnyClear:uX,$bitsAllSet:uX,$bitsAnySet:uX,$all:LH,$in:LH,$ne:FH1,$nin:LH};Object.defineProperty(j0.prototype,"$conditionalHandlers",{enumerable:!1,value:AH1});j0.prototype.castForQuery=function(F,A,B){let D;if(F!=null){if(D=this.$conditionalHandlers[F],!D)throw new Error("Can't use "+F+" with UUID.");return D.call(this,A,B)}try{return this.applySetters(A,B)}catch(X){if(X instanceof Ly&&X.path===this.path&&this.$fullPath!=null)X.path=this.$fullPath;throw X}};j0.prototype.toJSONSchema=function F(A){let B=this.options.required&&typeof this.options.required!=="function";return rW1("string","binData",A?.useBsonType,B)};j0.prototype.autoEncryptionType=function F(){return"binData"};/*!
 * Module exports.
 */Ry.exports=j0});var Ny=z(($k1,Iy)=>{var BH1=c2();class wH extends BH1{}var DH1=G6();Object.defineProperty(wH.prototype,"of",DH1);Iy.exports=wH});var jy=z((Ek1,My)=>{/*!
 * ignore
 */var XH1=Ny(),ZH1=Q0(),M8=Symbol("firstValue");/*!
 * ignore
 */class dF extends ZH1{constructor(F,A,B,D){super(F,A,"Union",D);if(!Array.isArray(A?.of)||A.of.length===0)throw new Error("Union schema type requires an array of types");this.schemaTypes=A.of.map((X)=>D.interpretAsType(F,X,B))}cast(F,A,B,D,X){let Z=M8,J;for(let $=0;$<this.schemaTypes.length;++$)try{let Y=this.schemaTypes[$].cast(F,A,B,D,X);if(Y===F)return Y;if(Z===M8)Z=Y}catch(Y){J=Y}if(Z!==M8)return Z;throw J}applySetters(F,A,B,D,X){let Z=M8,J;for(let $=0;$<this.schemaTypes.length;++$)try{let Y=this.schemaTypes[$]._applySetters(F,A,B,D,X);if(Y==null)Y=this.schemaTypes[$]._castNullish(Y);else Y=this.schemaTypes[$].cast(Y,A,B,D,X);if(Y===F)return Y;if(Z===M8)Z=Y}catch(Y){J=Y}if(Z!==M8)return Z;throw J}clone(){let F=super.clone();return F.schemaTypes=this.schemaTypes.map((A)=>A.clone()),F}}dF.schemaName="Union";dF.defaultOptions={};dF.prototype.OptionsConstructor=XH1;My.exports=dF});var SF=z((JH1)=>{/*!
 * Module exports.
 */JH1.Array=EX();JH1.BigInt=Sg();JH1.Boolean=fg();JH1.Buffer=vg();JH1.Date=ag();JH1.Decimal128=JH1.Decimal=og();JH1.DocumentArray=mb();JH1.Double=ib();JH1.Int32=tb();JH1.Map=By();JH1.Mixed=Z8();JH1.Number=uW();JH1.ObjectId=Wy();JH1.String=QH();JH1.Subdocument=XH();JH1.UUID=Py();JH1.Union=jy();JH1.Oid=JH1.ObjectId;JH1.Object=JH1.Mixed;JH1.Bool=JH1.Boolean;JH1.ObjectID=JH1.ObjectId});var u9=z((MH,my)=>{/*!
 * Module dependencies.
 */var NH1=c("events").EventEmitter,MH1=R9(),f4=K1(),uy=Q0(),Oy=c2(),jH1=EW(),NH=eD(),Sy=CW(),Z2=C0(),xy=K0(),TH1=S2(),kH1=Kf(),xX=qW(),uH1=Lf(),_y=Rf(),OH1=wD(),OX=C6(),SH1=If(),xH1=ff(),_H1=M9(),o1=B1(),fH1=bf(),gH1=/\.\d+(\.|$)/,g4,bH1=jF().queryMiddlewareFunctions,yH1=jF().documentMiddlewareFunctions,fy=bH1.concat(yH1).reduce((F,A)=>F.add(A),new Set),PH=o1.isPOJO,gy=0,hH1=/^\d+$/;function n(F,A){if(!(this instanceof n))return new n(F,A);if(this.obj=F,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=A?.methods||{},this.methodOptions={},this.statics=A?.statics||{},this.tree={},this.query=A?.query||{},this.childSchemas=[],this.plugins=[],this.$id=++gy,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new MH1},this.options=this.defaultOptions(A),Array.isArray(F))for(let X of F)this.add(X);else if(F)this.add(F);if(A?.virtuals){let X=A.virtuals,Z=Object.keys(X);for(let J of Z){let $=X[J].options?X[J].options:void 0,Y=this.virtual(J,$);if(X[J].get)Y.get(X[J].get);if(X[J].set)Y.set(X[J].set)}}let B=F?._id&&o1.isObject(F._id);if(!this.paths._id&&this.options._id&&!B)Sy(this);this.setupTimestamp(this.options.timestamps)}function by(F,A){for(let B of Object.keys(A)){let D=null;if(A[B]!=null)D=A[B];else{let Z=xy(F.paths[B],"options");if(Z==null)continue;D=Z.alias}if(!D)continue;let X=F.paths[B].path;if(Array.isArray(D)){for(let Z of D){if(typeof Z!=="string")throw new Error("Invalid value for alias option on "+X+", got "+Z);F.aliases[Z]=X,F.virtual(Z).get(function(J){return function(){if(typeof this.get==="function")return this.get(J);return this[J]}}(X)).set(function(J){return function($){return this.$set(J,$)}}(X))}continue}if(typeof D!=="string")throw new Error("Invalid value for alias option on "+X+", got "+D);F.aliases[D]=X,F.virtual(D).get(function(Z){return function(){if(typeof this.get==="function")return this.get(Z);return this[Z]}}(X)).set(function(Z){return function(J){return this.$set(Z,J)}}(X))}}/*!
 * Inherit from EventEmitter.
 */n.prototype=Object.create(NH1.prototype);n.prototype.constructor=n;n.prototype.instanceOfSchema=!0;/*!
 * ignore
 */Object.defineProperty(n.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(n.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(n.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});n.prototype.obj;n.prototype.paths;n.prototype.tree;n.create=function F(A,B){return new n(A,B)};n.prototype.clone=function(){let F=this._clone();return F.on("init",(A)=>this.emit("init",A)),F};/*!
 * ignore
 */n.prototype._clone=function F(A){A=A||(this.base==null?n:this.base.Schema);let B=new A({},this._userProvidedOptions);B.base=this.base,B.obj=this.obj,B.options=Z2(this.options),B.callQueue=this.callQueue.map(function(D){return D}),B.methods=Z2(this.methods),B.methodOptions=Z2(this.methodOptions),B.statics=Z2(this.statics),B.query=Z2(this.query),B.plugins=Array.prototype.slice.call(this.plugins),B._indexes=Z2(this._indexes),B._searchIndexes=Z2(this._searchIndexes),B.s.hooks=this.s.hooks.clone(),B.tree=Z2(this.tree),B.paths=Object.fromEntries(Object.entries(this.paths).map(([D,X])=>[D,X.clone()])),B.nested=Z2(this.nested),B.subpaths=Z2(this.subpaths);for(let D of Object.values(B.paths))if(D.$isSingleNested){let X=D.path;for(let Z of Object.keys(D.schema.paths))B.singleNestedPaths[X+"."+Z]=D.schema.paths[Z];for(let Z of Object.keys(D.schema.singleNestedPaths))B.singleNestedPaths[X+"."+Z]=D.schema.singleNestedPaths[Z];for(let Z of Object.keys(D.schema.subpaths))B.singleNestedPaths[X+"."+Z]=D.schema.subpaths[Z];for(let Z of Object.keys(D.schema.nested))B.singleNestedPaths[X+"."+Z]="nested"}if(B._gatherChildSchemas(),B.virtuals=Z2(this.virtuals),B.$globalPluginsApplied=this.$globalPluginsApplied,B.$isRootDiscriminator=this.$isRootDiscriminator,B.$implicitlyCreated=this.$implicitlyCreated,B.$id=++gy,B.$originalSchemaId=this.$id,B.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null)B.discriminatorMapping=Object.assign({},this.discriminatorMapping);if(this.discriminators!=null)B.discriminators=Object.assign({},this.discriminators);if(this._applyDiscriminators!=null)B._applyDiscriminators=new Map(this._applyDiscriminators);return B.aliases=Object.assign({},this.aliases),B.encryptedFields=Z2(this.encryptedFields),B};n.prototype.pick=function(F,A){let B=new n({},A||this.options);if(!Array.isArray(F))throw new f4('Schema#pick() only accepts an array argument, got "'+typeof F+'"');for(let D of F)if(this._hasEncryptedField(D)){let X=this.encryptedFields[D],Z=this.path(D);B.add({[D]:{encrypt:X,[this.options.typeKey]:Z}})}else if(this.nested[D])B.add({[D]:xy(this.tree,D)});else{let X=this.path(D);if(X==null)throw new f4("Path `"+D+"` is not in the schema");B.add({[D]:X})}if(!this._hasEncryptedFields())B.options.encryptionType=null;return B};n.prototype.omit=function(F,A){let B=new n(this,A||this.options);if(!Array.isArray(F))throw new f4('Schema#omit() only accepts an array argument, got "'+typeof F+'"');B.remove(F);for(let D in B.singleNestedPaths)if(F.includes(D))delete B.singleNestedPaths[D];return B};n.prototype.defaultOptions=function(F){this._userProvidedOptions=F==null?{}:Z2(F);let A=this.base?.options||{},B="strict"in A?A.strict:!0,D="strictQuery"in A?A.strictQuery:!1,X="id"in A?A.id:!0;if(F={strict:B,strictQuery:D,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:X,typeKey:"type",...F},F.versionKey&&typeof F.versionKey!=="string")throw new f4("`versionKey` must be falsy or string, got `"+typeof F.versionKey+"`");if(typeof F.read==="string")F.read=xX(F.read);else if(Array.isArray(F.read)&&typeof F.read[0]==="string")F.read={mode:xX(F.read[0]),tags:F.read[1]};if(F.optimisticConcurrency&&!F.versionKey)throw new f4("Must set `versionKey` if using `optimisticConcurrency`");return F};n.prototype.discriminator=function(F,A,B){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(F,{schema:A,options:B}),this};/*!
 * Get the document middleware for this schema, filtering out any hooks that are specific to queries.
 */n.prototype._getDocumentMiddleware=function F(){return this.s.hooks.filter((A)=>{if(A.name==="updateOne"||A.name==="deleteOne")return!!A.document;if(A.name==="remove"||A.name==="init")return A.document==null||!!A.document;if(A.query!=null||A.document!=null)return A.document!==!1;return!0}).filter((A)=>{if(this.methods[A.name])return!A.fn[_H1.builtInMiddleware];return!0})};/*!
 * Get this schema's default toObject/toJSON options, including Mongoose global
 * options.
 */n.prototype._defaultToObjectOptions=function(F){let A=F?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[A])return this._defaultToObjectOptionsMap[A];let B=this.base?.options?.[A]||{},D=this.options[A]||{},X=Object.assign({},B,D);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[A]=X,X};n.prototype.encryptionType=function F(F){if(arguments.length===0)return this.options.encryptionType;if(!(typeof F==="string"||F===null))throw new Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=F};n.prototype.add=function F(A,B){if(A instanceof n||A?.instanceOfSchema)return OH1(this,A),this;if(A._id===!1&&B==null)this.options._id=!1;if(B=B||"",B==="__proto__."||B==="constructor."||B==="prototype.")return this;let D=Object.keys(A),X=this.options.typeKey;for(let J of D){if(o1.specialProperties.has(J))continue;let $=B+J,Y=A[J];if(Y==null)throw new TypeError("Invalid value for schema path `"+$+'`, got value "'+Y+'"');if(J==="_id"&&Y===!1)continue;let E=!1;if(typeof Y==="string"){let G=this.base?.Schema.Types??n.Types,C=Y.charAt(0).toUpperCase()+Y.substring(1);E=G[C]!=null}if(J!=="_id"&&(typeof Y!=="object"&&typeof Y!=="function"&&!E||Y==null))throw new TypeError(`Invalid schema configuration: \`${Y}\` is not a valid type at path \`${J}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(Y instanceof NH||(Y.constructor?.name??null)==="VirtualType"){this.virtual(Y);continue}if(Array.isArray(Y)&&Y.length===1&&Y[0]==null)throw new TypeError("Invalid value for schema Array path `"+$+'`, got value "'+Y[0]+'"');if(!(PH(Y)||Y instanceof Oy)){if(B)this.nested[B.substring(0,B.length-1)]=!0;if(this.path(B+J,Y),!Y[0]?.instanceOfSchema&&o1.isPOJO(Y[0]?.discriminators)){let G=this.path(B+J);for(let C in Y[0].discriminators)G.discriminator(C,Y[0].discriminators[C])}}else if(o1.hasOwnKeys(Y)===!1){if(B)this.nested[B.substring(0,B.length-1)]=!0;this.path($,Y)}else if(!Y[X]||X==="type"&&PH(Y.type)&&Y.type.type)this.nested[$]=!0,this.add(Y,$+".");else{let G=Y[X];if(PH(G)&&o1.hasOwnKeys(G)){if(B)this.nested[B.substring(0,B.length-1)]=!0;let C={};if(this._userProvidedOptions.typeKey)C.typeKey=this._userProvidedOptions.typeKey;if(this._userProvidedOptions.strict!=null)C.strict=this._userProvidedOptions.strict;if(this._userProvidedOptions.toObject!=null)C.toObject=o1.omit(this._userProvidedOptions.toObject,["transform"]);if(this._userProvidedOptions.toJSON!=null)C.toJSON=o1.omit(this._userProvidedOptions.toJSON,["transform"]);let W=new n(G,C);W.$implicitlyCreated=!0;let H=Object.assign({},Y,{[X]:W});this.path(B+J,H)}else{if(B)this.nested[B.substring(0,B.length-1)]=!0;if(this.path(B+J,Y),!Y?.instanceOfSchema&&o1.isPOJO(Y?.discriminators)){let C=this.path(B+J);for(let W in Y.discriminators)C.discriminator(W,Y.discriminators[W])}}}if(Y.instanceOfSchema&&Y.encryptionType()!=null){if(this.encryptionType()!=Y.encryptionType())throw new Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[G,C]of Object.entries(Y.encryptedFields)){let W=$+"."+G;this._addEncryptedField(W,C)}}else if(typeof Y==="object"&&"encrypt"in Y){let{encrypt:G}=Y;if(this.encryptionType()==null)throw new Error("encryptionType must be provided");this._addEncryptedField($,G)}else this._removeEncryptedField($)}let Z=Object.fromEntries(Object.entries(A).map(([J])=>[B+J,null]));return by(this,Z),this};n.prototype._addEncryptedField=function F(A,B){if(this.path(A).autoEncryptionType()==null)throw new Error(`Invalid BSON type for FLE field: '${A}'`);this.encryptedFields[A]=Z2(B)};n.prototype._removeEncryptedField=function F(A){delete this.encryptedFields[A]};n.prototype._hasEncryptedFields=function F(){return o1.hasOwnKeys(this.encryptedFields)};n.prototype._hasEncryptedField=function F(A){return A in this.encryptedFields};n.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([A,B])=>{let D=this.path(A).autoEncryptionType();return{path:A,bsonType:D,...B}})}};n.prototype._buildSchemaMap=function(){function F(D,X,Z){let J=0,$=D[J];for(;J<D.length-1;++J,$=D[J])X[$]=X[$]==null?{bsonType:"object",properties:{}}:X[$],X=X[$].properties;X[$]=Z}let A=(D,[X,Z])=>{let J=this.path(X).autoEncryptionType(),$=X.split("."),Y={encrypt:{...Z,bsonType:J}};return F($,D,Y),D};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(A,{})}};n.prototype.alias=function A(F,A){return by(this,{[F]:A}),this};n.prototype.removeIndex=function F(A){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof A!=="object"&&typeof A!=="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof A==="object"){for(let B=this._indexes.length-1;B>=0;--B)if(_y(this._indexes[B][0],A))this._indexes.splice(B,1)}else for(let B=this._indexes.length-1;B>=0;--B)if(this._indexes[B][1]!=null&&this._indexes[B][1].name===A)this._indexes.splice(B,1);return this};n.prototype.clearIndexes=function F(){return this._indexes.length=0,this};n.prototype.searchIndex=function F(A){return this._searchIndexes.push(A),this};n.reserved=Object.create(null);n.prototype.reserved=n.reserved;var X2=n.reserved;X2.prototype=X2.emit=X2.listeners=X2.removeListener=X2.collection=X2.errors=X2.get=X2.init=X2.isModified=X2.isNew=X2.populated=X2.remove=X2.save=X2.toObject=X2.validate=1;X2.collection=1;n.prototype.path=function(F,A){if(A===void 0){if(this.paths[F]!=null)return this.paths[F];let Y=yy(F),E=vH1(this,F,Y);if(E!=null)return E;let G=hy(this,F);if(G!=null)return G;if(E=this.hasMixedParent(Y),E!=null)return E;return gH1.test(F)?mH1(this,F,Y):void 0}let B=F.split(".")[0];if(X2[B]&&!this.options.suppressReservedKeysWarning){let Y=`\`${B}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;o1.warn(Y)}if(typeof A==="object"&&o1.hasUserDefinedProperty(A,"ref"))fH1(A.ref,F);let D=F.split(/\./),X=D.pop(),Z=this.tree,J="";for(let Y of D){if(o1.specialProperties.has(Y))throw new Error("Cannot set special property `"+Y+"` on a schema");if(J=J+=(J.length>0?".":"")+Y,!Z[Y])this.nested[J]=!0,Z[Y]={};if(typeof Z[Y]!=="object"){let E="Cannot set nested path `"+F+"`. Parent path `"+J+"` already set to type "+Z[Y].name+".";throw new Error(E)}Z=Z[Y]}Z[X]=Z2(A),this.paths[F]=this.interpretAsType(F,A,this.options);let $=this.paths[F];if(this.childSchemas=this.childSchemas.filter((Y)=>Y.path!==F),$.$isSchemaMap){let Y=F+".$*";if(this.paths[Y]=$.$__schemaType,this.mapPaths.push(this.paths[Y]),$.$__schemaType.$isSingleNested)this.childSchemas.push({schema:$.$__schemaType.schema,model:$.$__schemaType.Constructor,path:F})}if($.$isSingleNested){for(let Y of Object.keys($.schema.paths))this.singleNestedPaths[F+"."+Y]=$.schema.paths[Y];for(let Y of Object.keys($.schema.singleNestedPaths))this.singleNestedPaths[F+"."+Y]=$.schema.singleNestedPaths[Y];for(let Y of Object.keys($.schema.subpaths))this.singleNestedPaths[F+"."+Y]=$.schema.subpaths[Y];for(let Y of Object.keys($.schema.nested))this.singleNestedPaths[F+"."+Y]="nested";Object.defineProperty($.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),$.Constructor.base=this.base,this.childSchemas.push({schema:$.schema,model:$.Constructor,path:F})}else if($.$isMongooseDocumentArray)Object.defineProperty($.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),$.Constructor.base=this.base,this.childSchemas.push({schema:$.schema,model:$.Constructor,path:F});if($.$isMongooseArray&&!$.$isMongooseDocumentArray){let Y=F,E=$,G=[];while(E.$isMongooseArray)Y=Y+".$",E.embeddedSchemaType._arrayPath=Y,E.embeddedSchemaType._arrayParentPath=F,E=E.embeddedSchemaType,this.subpaths[Y]=E;for(let C of G)this.subpaths[C.path]=C}if($.$isMongooseDocumentArray){for(let Y of Object.keys($.schema.paths)){let E=$.schema.paths[Y];if(this.subpaths[F+"."+Y]=E,typeof E==="object"&&E!=null&&E.$parentSchemaDocArray==null)E.$parentSchemaDocArray=$}for(let Y of Object.keys($.schema.subpaths)){let E=$.schema.subpaths[Y];if(this.subpaths[F+"."+Y]=E,typeof E==="object"&&E!=null&&E.$parentSchemaDocArray==null)E.$parentSchemaDocArray=$}for(let Y of Object.keys($.schema.singleNestedPaths)){let E=$.schema.singleNestedPaths[Y];if(this.subpaths[F+"."+Y]=E,typeof E==="object"&&E!=null&&E.$parentSchemaDocArray==null)E.$parentSchemaDocArray=$}}return this};/*!
 * ignore
 */n.prototype._gatherChildSchemas=function F(){let A=[];for(let B of Object.keys(this.paths)){if(typeof B!=="string")continue;let D=this.paths[B];if(D.$isMongooseDocumentArray||D.$isSingleNested)A.push({schema:D.schema,model:D.Constructor,path:B});else if(D.$isSchemaMap&&D.$__schemaType.$isSingleNested)A.push({schema:D.$__schemaType.schema,model:D.$__schemaType.Constructor,path:B})}return this.childSchemas=A,A};/*!
 * ignore
 */function vH1(F,A,B){if(Object.hasOwn(F.paths,A))return F.paths[A];if(Object.hasOwn(F.subpaths,B)){let D=F.subpaths[B];if(D==="nested")return;return D}if(Object.hasOwn(F.singleNestedPaths,B)&&typeof F.singleNestedPaths[B]==="object"){let D=F.singleNestedPaths[B];if(D==="nested")return;return D}return null}/*!
 * ignore
 */function yy(F){if(!/\.\d+/.test(F))return F;return F.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$")}/*!
 * ignore
 */function hy(F,A){if(F.mapPaths.length===0)return null;for(let B of F.mapPaths){let D=B.path.replace(/\.\$\*/g,"");if(A===D||A.startsWith(D+".")&&A.slice(D.length+1).indexOf(".")===-1)return B;else if(B.schema&&A.startsWith(D+".")){let X=A.slice(D.length+1);return X=X.slice(X.indexOf(".")+1),B.schema.paths[X]}else if(B.$isSchemaMap&&A.startsWith(D+".")){let X=A.slice(D.length+1);X=X.slice(X.indexOf(".")+1);let Z=B.$__schemaType._presplitPath;if(X.indexOf(".")===-1&&Z[Z.length-1]==="$*")return B.$__schemaType;else if(X.indexOf(".")!==-1&&B.$__schemaType.schema&&Z[Z.length-1]==="$*")return B.$__schemaType.schema.path(X.slice(X.indexOf(".")+1))}}return null}Object.defineProperty(n.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});n.prototype.interpretAsType=function(F,A,B){if(A instanceof uy){if(A.path===F)return A;let Y=A.clone();return Y.path=F,Y}let D=this.base?.Schema.Types??n.Types,X=this.base?.Types??q8();if(!o1.isPOJO(A)&&!(A instanceof Oy)){if(o1.getFunctionName(A.constructor)!=="Object"){let E=A;A={},A[B.typeKey]=E}}let Z=A[B.typeKey]&&(A[B.typeKey]instanceof Function||B.typeKey!=="type"||!A.type.type)?A[B.typeKey]:{};if(Z instanceof uy){if(Z.path===F)return Z;let Y=Z.clone();return Y.path=F,Y}let J;if(o1.isPOJO(Z)||Z==="mixed")return new D.Mixed(F,A,null,this);if(Array.isArray(Z)||Z===Array||Z==="array"||Z===D.Array){let Y=Z===Array||Z==="array"?A.cast||A.of:Z[0];if(Y?.instanceOfSchema){if(!(Y instanceof n))if(this.options._isMerging)Y=new n(Y);else throw new TypeError("Schema for array path `"+F+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${F}: new Schema(...)`);return new D.DocumentArray(F,Y,A,null,this)}if(Y&&Y[B.typeKey]&&Y[B.typeKey].instanceOfSchema){if(!(Y[B.typeKey]instanceof n))if(this.options._isMerging)Y[B.typeKey]=new n(Y[B.typeKey]);else throw new TypeError("Schema for array path `"+F+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${F}: new Schema(...)`);return new D.DocumentArray(F,Y[B.typeKey],A,Y,this)}if(typeof Y!=="undefined"){if(Array.isArray(Y)||Y.type===Array||Y.type=="Array"){if(Y?.type=="Array")Y.type=Array;return new D.Array(F,this.interpretAsType(F,Y,B),A,null,this)}}let E=Y!=null&&Y[B.typeKey]&&(B.typeKey!=="type"||!Y.type.type)?Y[B.typeKey]:Y;if(typeof Y==="string")Y=D[Y.charAt(0).toUpperCase()+Y.substring(1)];else if(o1.isPOJO(E))if(o1.hasOwnKeys(E)){let G={minimize:B.minimize};if(B.typeKey)G.typeKey=B.typeKey;if(Object.hasOwn(B,"strict"))G.strict=B.strict;if(Object.hasOwn(B,"strictQuery"))G.strictQuery=B.strictQuery;if(Object.hasOwn(B,"toObject"))G.toObject=o1.omit(B.toObject,["transform"]);if(Object.hasOwn(B,"toJSON"))G.toJSON=o1.omit(B.toJSON,["transform"]);if(Object.hasOwn(this._userProvidedOptions,"_id"))G._id=this._userProvidedOptions._id;else if(n.Types.DocumentArray.defaultOptions._id!=null)G._id=n.Types.DocumentArray.defaultOptions._id;let C=new n(E,G);return C.$implicitlyCreated=!0,new D.DocumentArray(F,C,A,null,this)}else return new D.Array(F,D.Mixed,A,null,this);if(Y){if(Z=Y[B.typeKey]&&(B.typeKey!=="type"||!Y.type.type)?Y[B.typeKey]:Y,Array.isArray(Z))return new D.Array(F,this.interpretAsType(F,Z,B),A,null,this);if(J=typeof Z==="string"?Z:Z.schemaName||o1.getFunctionName(Z),J==="ClockDate")J="Date";if(J===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${F}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!Object.hasOwn(D,J))throw new TypeError(`Invalid schema configuration: \`${J}\` is not a valid type within the array \`${F}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(J==="Union"&&typeof Y==="object")Y.parentSchema=this}return new D.Array(F,Y||D.Mixed,A,B,this)}if(Z?.instanceOfSchema)return new D.Subdocument(Z,F,A,this);if(Buffer.isBuffer(Z))J="Buffer";else if(typeof Z==="function"||typeof Z==="object")J=Z.schemaName||o1.getFunctionName(Z);else if(Z===X.ObjectId)J="ObjectId";else if(Z===X.Decimal128)J="Decimal128";else J=Z==null?""+Z:Z.toString();if(J)J=J.charAt(0).toUpperCase()+J.substring(1);if(J==="ObjectID")J="ObjectId";if(J==="ClockDate")J="Date";if(J===void 0)throw new TypeError(`Invalid schema configuration: \`${F}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(D[J]==null)throw new TypeError(`Invalid schema configuration: \`${J}\` is not a valid type at path \`${F}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);return new D[J](F,A,B,this)};n.prototype.eachPath=function(F){let A=Object.keys(this.paths),B=A.length;for(let D=0;D<B;++D)F(A[D],this.paths[A[D]]);return this};n.prototype.requiredPaths=function F(A){if(this._requiredpaths&&!A)return this._requiredpaths;let B=Object.keys(this.paths),D=B.length,X=[];while(D--){let Z=B[D];if(this.paths[Z].isRequired)X.push(Z)}return this._requiredpaths=X,this._requiredpaths};n.prototype.indexedPaths=function F(){if(this._indexedpaths)return this._indexedpaths;return this._indexedpaths=this.indexes(),this._indexedpaths};n.prototype.pathType=function(F){if(Object.hasOwn(this.paths,F))return"real";if(Object.hasOwn(this.virtuals,F))return"virtual";if(Object.hasOwn(this.nested,F))return"nested";let A=yy(F);if(Object.hasOwn(this.subpaths,A)||Object.hasOwn(this.subpaths,F))return"real";let B=Object.hasOwn(this.singleNestedPaths,A)||Object.hasOwn(this.singleNestedPaths,F);if(B)return B==="nested"?"nested":"real";if(hy(this,F)!=null)return"real";if(/\.\d+\.|\.\d+$/.test(F))return vy(this,F,A);return"adhocOrUndefined"};n.prototype.hasMixedParent=function(F){let A=F.split(/\./g);F="";for(let B=0;B<A.length;++B)if(F=B>0?F+"."+A[B]:A[B],Object.hasOwn(this.paths,F)&&this.paths[F]instanceof g4.Mixed)return this.paths[F];return null};n.prototype.setupTimestamp=function(F){return xH1(this,F)};function vy(F,A,B){let D=A.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(D.length<2)return Object.hasOwn(F.paths,D[0])?F.paths[D[0]]:"adhocOrUndefined";let X=F.path(D[0]),Z=!1;if(!X)return"adhocOrUndefined";let J=D.length-1;for(let $=1;$<D.length;++$){Z=!1;let Y=D[$];if($===J&&X&&!/\D/.test(Y)){if(X.$isMongooseDocumentArray)X=X.embeddedSchemaType;else if(X instanceof g4.Array)X=X.embeddedSchemaType;else X=void 0;break}if(!/\D/.test(Y)){if(X instanceof g4.Array&&$!==J)X=X.embeddedSchemaType;continue}if(!X?.schema){X=void 0;break}Z=X.schema.pathType(Y)==="nested",X=X.schema.path(Y)}if(F.subpaths[B]=X,X)return"real";if(Z)return"nested";return"adhocOrUndefined"}/*!
 * ignore
 */function mH1(F,A,B){return vy(F,A,B),F.subpaths[B]}n.prototype.queue=function(F,A){return this.callQueue.push([F,A]),this};n.prototype.pre=function(F){if(F instanceof RegExp){let A=Array.prototype.slice.call(arguments,1);for(let B of fy)if(F.test(B))this.pre.apply(this,[B].concat(A));return this}if(Array.isArray(F)){let A=Array.prototype.slice.call(arguments,1);for(let B of F)this.pre.apply(this,[B].concat(A));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};n.prototype.post=function(F){if(F instanceof RegExp){let A=Array.prototype.slice.call(arguments,1);for(let B of fy)if(F.test(B))this.post.apply(this,[B].concat(A));return this}if(Array.isArray(F)){let A=Array.prototype.slice.call(arguments,1);for(let B of F)this.post.apply(this,[B].concat(A));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};n.prototype.plugin=function(F,A){if(typeof F!=="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof F+'"');if(A?.deduplicate){for(let B of this.plugins)if(B.fn===F)return this}return this.plugins.push({fn:F,opts:A}),F(this,A),this};n.prototype.method=function(F,A,B){if(typeof F!=="string")for(let D in F)this.methods[D]=F[D],this.methodOptions[D]=Z2(B);else this.methods[F]=A,this.methodOptions[F]=Z2(B);return this};n.prototype.static=function(F,A){if(typeof F!=="string")for(let B in F)this.statics[B]=F[B];else this.statics[F]=A;return this};n.prototype.index=function(F,A){if(F||(F={}),A||(A={}),A.expires)o1.expires(A);for(let B in F)if(this.aliases[B])F=o1.renameObjKey(F,B,this.aliases[B]);for(let B of Object.keys(F))if(F[B]==="ascending"||F[B]==="asc")F[B]=1;else if(F[B]==="descending"||F[B]==="desc")F[B]=-1;for(let B of this.indexes())if(A.name==null&&B[1].name==null&&_y(B[0],F))o1.warn(`Duplicate schema index on ${JSON.stringify(F)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([F,A]),this};n.prototype.set=function(F,A,B){if(arguments.length===1)return this.options[F];switch(F){case"read":if(typeof A==="string")this.options[F]={mode:xX(A),tags:B};else if(Array.isArray(A)&&typeof A[0]==="string")this.options[F]={mode:xX(A[0]),tags:A[1]};else this.options[F]=A;this._userProvidedOptions[F]=this.options[F];break;case"timestamps":this.setupTimestamp(A),this.options[F]=A,this._userProvidedOptions[F]=this.options[F];break;case"_id":if(this.options[F]=A,this._userProvidedOptions[F]=this.options[F],A&&!this.paths._id)Sy(this);else if(!A&&this.paths._id!=null&&this.paths._id.auto)this.remove("_id");break;default:this.options[F]=A,this._userProvidedOptions[F]=this.options[F];break}if(F==="strict")cF(this,{strict:A});if(F==="strictQuery")cF(this,{strictQuery:A});if(F==="toObject")A={...A},delete A.transform,cF(this,{toObject:A});if(F==="toJSON")A={...A},delete A.transform,cF(this,{toJSON:A});return this};/*!
 * Recursively set options on implicitly created schemas
 */function cF(F,A){for(let{schema:B}of F.childSchemas){if(!B.$implicitlyCreated)continue;Object.assign(B.options,A),cF(B,A)}}n.prototype.get=function(F){return this.options[F]};var dH1="2d 2dsphere hashed text".split(" ");Object.defineProperty(n,"indexTypes",{get:function(){return dH1},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});n.prototype.indexes=function(){return kH1(this)};n.prototype.virtual=function(F,A){if(F instanceof NH||TH1(F)==="VirtualType")return this.virtual(F.path,F.options);if(A=new jH1(A),o1.hasUserDefinedProperty(A,["ref","refPath"])){if(A.localField==null)throw new Error("Reference virtuals require `localField` option");if(A.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let X=this.virtual(F);if(X.options=A,this.pre("init",function $(Y,E){if(OX.has(F,Y)){let G=OX.get(F,Y);if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};if(A.justOne||A.count)this.$$populatedVirtuals[F]=Array.isArray(G)?G[0]:G;else this.$$populatedVirtuals[F]=Array.isArray(G)?G:G==null?[]:[G];if(E?.hydratedPopulatedDocs&&!A.count){let C=X._getModelNamesForPopulate(this),W=this.$$populatedVirtuals[F];if(!Array.isArray(W)&&!W.$__&&C?.length===1){let H=this.db.model(C[0]);this.$$populatedVirtuals[F]=H.hydrate(W)}else if(Array.isArray(W)&&C?.length===1){let H=this.db.model(C[0]);for(let Q=0;Q<W.length;++Q)if(!W[Q].$__)W[Q]=H.hydrate(W[Q],null,{hydratedPopulatedDocs:!0});let q=A.foreignField;this.$populated(F,W.map((Q)=>Q==null?Q:Q.get(typeof q==="function"?q.call(Q,Q):q)),{populateModelSymbol:H})}}OX.unset(F,Y)}}),X.set(function($){if(!this.$$populatedVirtuals)this.$$populatedVirtuals={};return SH1(this.$$populatedVirtuals,F,$,A)}),typeof A.get==="function")X.get(A.get);let Z=F.split("."),J=Z[0];for(let $=0;$<Z.length-1;++$){if(this.paths[J]==null)continue;if(this.paths[J].$isMongooseDocumentArray||this.paths[J].$isSingleNested){let Y=Z.slice($+1).join(".");this.paths[J].schema.virtual(Y,A);break}else if(this.paths[J].$isSchemaMap){let Y=Z.slice($+2).join(".");this.paths[J].$__schemaType.schema.virtual(Y,A);break}J+="."+Z[$+1]}return X}let B=this.virtuals,D=F.split(".");if(this.pathType(F)==="real")throw new Error('Virtual path "'+F+'" conflicts with a real path in the schema');if(B[F]=D.reduce(function(X,Z,J){return X[Z]||(X[Z]=J===D.length-1?new NH(A,F):{}),X[Z]},this.tree),A?.applyToArray&&D.length>1){let X=this.path(D.slice(0,-1).join("."));if(X?.$isMongooseArray)return X.virtual(D[D.length-1],A);else throw new f4(`Path "${X}" is not an array`)}return B[F]};n.prototype.virtualpath=function(F){return Object.hasOwn(this.virtuals,F)?this.virtuals[F]:null};n.prototype.remove=function(F){if(typeof F==="string")F=[F];if(Array.isArray(F))F.forEach(function(A){if(this.path(A)==null&&!this.nested[A])return;if(this.nested[A]){let B=Object.keys(this.paths).concat(Object.keys(this.nested));for(let D of B)if(D.startsWith(A+"."))delete this.paths[D],delete this.nested[D],IH(this,D);delete this.nested[A],IH(this,A);return}delete this.paths[A],IH(this,A),this._removeEncryptedField(A)},this);return this};/*!
 * ignore
 */function IH(F,A){let B=A.split("."),D=B.pop(),X=F.tree;for(let Z of B)X=X[Z];delete X[D]}n.prototype.removeVirtual=function(F){if(typeof F==="string")F=[F];if(Array.isArray(F)){for(let A of F)if(this.virtuals[A]==null)throw new f4(`Attempting to remove virtual "${A}" that does not exist.`);for(let A of F)if(delete this.paths[A],delete this.virtuals[A],A.indexOf(".")!==-1)OX.unset(A,this.tree);else delete this.tree[A]}return this};n.prototype.loadClass=function(F,A){if(F===Object.prototype||F===Function.prototype||Object.hasOwn(F.prototype,"$isMongooseModelPrototype")||Object.hasOwn(F.prototype,"$isMongooseDocumentPrototype"))return this;if(this.loadClass(Object.getPrototypeOf(F),A),!A)Object.getOwnPropertyNames(F).forEach(function(B){if(B.match(/^(length|name|prototype|constructor|__proto__)$/))return;let D=Object.getOwnPropertyDescriptor(F,B);if(Object.hasOwn(D,"value"))this.static(B,D.value)},this);return Object.getOwnPropertyNames(F.prototype).forEach(function(B){if(B.match(/^(constructor)$/))return;let D=Object.getOwnPropertyDescriptor(F.prototype,B);if(!A){if(typeof D.value==="function")this.method(B,D.value)}if(typeof D.get==="function"){if(this.virtuals[B])this.virtuals[B].getters=[];this.virtual(B).get(D.get)}if(typeof D.set==="function"){if(this.virtuals[B])this.virtuals[B].setters=[];this.virtual(B).set(D.set)}},this),this};/*!
 * ignore
 */n.prototype._getSchema=function(F){let A=this,B=A.path(F),D=[];if(B)return B.$fullPath=F,B;function X(J,$){let Y=J.length+1,E,G;while(Y--)if(G=J.slice(0,Y).join("."),E=$.path(G),E){if(D.push(G),E.embeddedSchemaType||E.Constructor){if(E.embeddedSchemaType instanceof g4.Mixed)return E.embeddedSchemaType.$fullPath=D.join("."),E.embeddedSchemaType;if(Y!==J.length){if(Y+1===J.length&&E.embeddedSchemaType&&(J[Y]==="$"||SX(J[Y])))return E.embeddedSchemaType;if(E.schema){let C;if(J[Y]==="$"||SX(J[Y])){if(Y+1===J.length)return E.embeddedSchemaType;if(C=X(J.slice(Y+1),E.schema),C)C.$parentSchemaDocArray=C.$parentSchemaDocArray||(E.schema.$isSingleNested?null:E);return C}if(C=X(J.slice(Y),E.schema),C)C.$parentSchemaDocArray=C.$parentSchemaDocArray||(E.schema.$isSingleNested?null:E);return C}}}else if(E.$isSchemaMap){if(Y>=J.length)return E;if(Y+1>=J.length)return E.$__schemaType;if(E.$__schemaType instanceof g4.Mixed)return E.$__schemaType;if(E.$__schemaType.schema!=null)return X(J.slice(Y+1),E.$__schemaType.schema)}return E.$fullPath=D.join("."),E}}let Z=F.split(".");for(let J=0;J<Z.length;++J){if(Z[J]==="$"||SX(Z[J]))Z[J]="0";if(hH1.test(Z[J]))Z[J]="$"}return X(Z,A)};/*!
 * ignore
 */n.prototype._getPathType=function(F){let A=this;if(A.path(F))return"real";function D(X,Z){let J=X.length+1,$,Y;while(J--)if(Y=X.slice(0,J).join("."),$=Z.path(Y),$){if($.embeddedSchemaType||$.Constructor){if($.embeddedSchemaType instanceof g4.Mixed)return{schema:$,pathType:"mixed"};if(J!==X.length&&$.schema){if(X[J]==="$"||SX(X[J])){if(J===X.length-1)return{schema:$,pathType:"nested"};return D(X.slice(J+1),$.schema)}return D(X.slice(J),$.schema)}return{schema:$,pathType:$.$isSingleNested?"nested":"array"}}return{schema:$,pathType:"real"}}else if(J===X.length&&Z.nested[Y])return{schema:Z,pathType:"nested"};return{schema:$||Z,pathType:"undefined"}}return D(F.split("."),A)};n.prototype._transformDuplicateKeyError=function F(A){if(!this._duplicateKeyErrorMessagesByPath)return A;if(A.code!==11000&&A.code!==11001)return A;if(A.keyPattern!=null){let B=A.keyPattern,D=Object.keys(B);if(D.length!==1)return A;let X=D[0];if(!Object.hasOwn(this._duplicateKeyErrorMessagesByPath,X))return A;return new f4(this._duplicateKeyErrorMessagesByPath[X],{cause:A})}return A};/*!
 * ignore
 */function SX(F){return F.startsWith("$[")&&F.endsWith("]")}n.prototype._preCompile=function F(){this.plugin(uH1,{deduplicate:!0})};n.prototype.toJSONSchema=function F(A){let B=A?.useBsonType??!1,D=B?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let X of Object.keys(this.paths)){let Z=this.paths[X];if(Z._presplitPath.indexOf("$*")!==-1)continue;let J=Z._presplitPath.length>1,$=D;if(J)for(let G=0;G<Z._presplitPath.length-1;++G){let C=Z._presplitPath[G];if($.properties[C]==null)$.properties[C]=B?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}};$=$.properties[C]}let Y=Z._presplitPath[Z._presplitPath.length-1],E=!1;if(X==="_id"){if(!$.required)$.required=[];$.required.push("_id"),E=!0}else if(Z.options.required&&typeof Z.options.required!=="function"){if(!$.required)$.required=[];$.required.push(Y),E=!0}if($.properties[Y]=Z.toJSONSchema(A),Z.options.enum)$.properties[Y].enum=E?Z.options.enum:[...Z.options.enum,null]}if(D.required.length===0)delete D.required;return D};/*!
 * Module exports.
 */my.exports=MH=n;n.Types=g4=SF();/*!
 * ignore
 */MH.ObjectId=g4.ObjectId});var TH=z((Wk1,dy)=>{/*!
 * Module dependencies.
 */var cH1=E6();class jH extends cH1{constructor(F,A,B,D){let X=F.map((Z)=>Z.message).join(", ");if(X.length>200)X=X.slice(0,200)+"...";super(`${D} failed with ${F.length} Mongoose validation errors: ${X}`);this.validationErrors=F,this.results=A,this.rawResult=B,this.operation=D}}Object.defineProperty(jH.prototype,"name",{value:"MongooseBulkWriteError"});/*!
 * exports
 */dy.exports=jH});var ly=z((Hk1,cy)=>{/*!
 * Module dependencies.
 */var lH1=K1();class kH extends lH1{constructor(F,A){super(F);this.errors=A}}Object.defineProperty(kH.prototype,"name",{value:"SyncIndexesError"});cy.exports=kH});var uH=z((qk1,py)=>{py.exports=function F(A,B,D,X){if(A[X])return;if(A[X]=!0,!D?.skipTopLevel){let Y=null;for(let E of B){let G=E[1]==null?null:E[1].tags;if(!Array.isArray(G)){A.plugin(E[0],E[1]);continue}if(Y=Y||new Set(A.options.pluginTags||[]),!G.find((C)=>Y.has(C)))continue;A.plugin(E[0],E[1])}}if(D=Object.assign({},D),delete D.skipTopLevel,D.applyPluginsToChildSchemas!==!1)for(let Y of Object.keys(A.paths)){let E=A.paths[Y];if(E.schema!=null)F(E.schema,B,D,X),E.Constructor.prototype.$__setSchema(E.schema)}let Z=A.discriminators;if(Z==null)return;let J=D.applyPluginsToDiscriminators,$=Object.keys(Z);for(let Y of $){let E=Z[Y];F(E,B,{skipTopLevel:!J},X)}}});var _X=z((pH1,OH)=>{/*!
 * ignore
 */var iy=null;pH1.get=function(){return iy};pH1.set=function(F){iy=F}});var SH=z((zk1,ny)=>{function aH1(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}ny.exports=aH1});var sy=z((Qk1,ay)=>{var sH1=K1();class xH extends sH1{constructor(F,A){super(F);this.errors=A}}Object.defineProperty(xH.prototype,"name",{value:"CreateCollectionsError"});ay.exports=xH});var oy=z((Kk1,ty)=>{var ry=uD().modifiedPaths;ty.exports=function F(A){let B=Object.keys(A),D={},X={};for(let Z of B){if(Z.startsWith("$")){ry(A[Z],"",D);continue}X[Z]=A[Z]}return ry(X,"",D),D}});var _H=z((Uk1,ey)=>{var rH1=oy();ey.exports=function F(A){if(A==null)return{};let B=rH1(A);return Object.keys(B).reduce((D,X)=>{let Z=X.match(/\$\[[^\]]+\]/g);if(Z==null)return D;for(let J of Z){let $=X.indexOf(J);if($!==X.lastIndexOf(J))throw new Error(`Path '${X}' contains the same array filter multiple times`);D[J.substring(2,J.length-1)]=X.substring(0,$-1).replace(/\$\[[^\]]+\]/g,"0")}return D},{})}});var Bh=z((Vk1,Ah)=>{var tH1=MF(),Fh=K0(),oH1=M6(),eH1=_H();Ah.exports=function F(A,B,D,X,Z){let J=X.indexOf(".")===-1?[X]:X.split("."),$=null,Y="adhocOrUndefined";D=D||{},B=B||{};let E=Array.isArray(Z?.arrayFilters)?Z.arrayFilters:[],G=eH1(B),C=0;for(let W=0;W<J.length;++W){let H=J.slice(C,W+1).join("."),q=tH1(H);if($=A.path(q),$==null)continue;if(Y=A.pathType(q),($.$isSingleNested||$.$isMongooseDocumentArrayElement)&&$.schema.discriminators!=null){let Q=Fh($,"schema.options.discriminatorKey"),K=q+"."+Q,U=K.replace(/\.\d+\./,"."),R=null;if(K in D)R=D[K];if(U in D)R=D[U];let w=q.replace(/\.\d+$/,"");if($.$isMongooseDocumentArrayElement&&Fh(D[w],"$elemMatch."+Q)!=null)R=D[w].$elemMatch[Q];let V=H+"."+Q;if(V in B)R=B[V];if(K in B)R=B[K];for(let u of Object.keys(G)){let O=G[u]+"."+Q,k=u+"."+Q;if(O===U){let m=E.find((h)=>Object.hasOwn(h,k));if(m!=null)R=m[k]}}if(R==null)continue;let T=oH1($.Constructor.discriminators,R)?.schema;if(T==null)continue;let I=J.slice(W+1).join(".");if($=T.path(I),A=T,C=W+1,$!=null){Y=T._getPathType(I);break}}}return{type:Y,schematype:$}}});var Xh=z((Lk1,Dh)=>{var Fq1=T4();Dh.exports=function F(A,B,D,X,Z,J,$){if(!A?.options?.immutable)return!1;let Y=A.options.immutable;if(typeof Y==="function")Y=Y.call($,$);if(!Y)return!1;if(J?.overwriteImmutable)return!1;if(B===!1)return!1;if(B==="throw")throw new Fq1(null,`Field ${Z} is immutable and strict = 'throw'`);return delete D[X],!0}});var Yh=z((wk1,Jh)=>{var Aq1=K0();Jh.exports=function F(A,B,D){if(B==null)return;let X=Object.keys(B);for(let Z of X){let J=Z.startsWith("$");if(Z==="$set"){let $=Object.keys(B[Z]);for(let Y of $)Zh(A,B[Z],Y,B,D)}else if(!J)Zh(A,B,Z,B,D)}};function Zh(F,A,B,D,X){let Z=F.path(B);if(Z==null)return;let J=Aq1(Z,"options.immutable",null);if(J==null)return;if(typeof J==="function")J=J.call(X,X);if(!J)return;D.$setOnInsert=D.$setOnInsert||{},D.$setOnInsert[B]=A[B],delete A[B]}});var gH=z((Rk1,$h)=>{var fH=L9();$h.exports=function F(A,B,D){if(B.indexOf(".")===-1){if(fH.has(B))return;A[B]=D;return}let X=B.split("."),Z=X.pop(),J=A;for(let $ of X){if(fH.has($))continue;if(J[$]==null)J[$]={};J=J[$]}if(!fH.has(Z))J[Z]=D}});var dH=z((Pk1,Qh)=>{var fX=K2(),T8=K1(),Eh=QH(),Gh=T4(),Bq1=I9(),hH=kF(),Dq1=x9(),Xq1=S2(),bH=M6(),yH=Bh(),Ch=Xh(),Zq1=Yh(),qh=M9().schemaMixedSymbol,Jq1=gH(),n3=B1(),{internalToObjectOptions:Yq1}=i6(),vH=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);Qh.exports=function F(A,B,D,X,Z){if(B==null)return;if(D=D||{},Array.isArray(B)){let C=B.length;for(let W=0;W<C;++W){let H=Object.keys(B[W]);for(let q of H)B[W][q]=$q1(q,B[W][q])}return B}if(A!=null&&Z!=null&&n3.hasUserDefinedProperty(Z,A.options.discriminatorKey)&&typeof Z[A.options.discriminatorKey]!=="object"&&A.discriminators!=null){let C=Z[A.options.discriminatorKey],W=bH(X.model.discriminators,C);A=A.discriminators[C]||W?.schema||A}else if(A!=null&&D.overwriteDiscriminatorKey&&n3.hasUserDefinedProperty(B,A.options.discriminatorKey)&&A.discriminators!=null){let C=B[A.options.discriminatorKey],W=bH(X.model.discriminators,C);A=A.discriminators[C]||W?.schema||A}else if(A!=null&&D.overwriteDiscriminatorKey&&B.$set!=null&&n3.hasUserDefinedProperty(B.$set,A.options.discriminatorKey)&&A.discriminators!=null){let C=B.$set[A.options.discriminatorKey],W=bH(X.model.discriminators,C);A=A.discriminators[C]||W?.schema||A}if(D.upsert)Zq1(A,B,X);let J=Object.keys(B),$=J.length,Y={},E,G=!1;Z=Z||{};while($--){let C=J[$];if(!vH.has(C)){if(!Y.$set)if(B.$set)Y.$set=B.$set;else Y.$set={};if(Y.$set[C]=B[C],J.splice($,1),!~J.indexOf("$set"))J.push("$set")}else if(C==="$set"){if(!Y.$set)Y[C]=B[C]}else Y[C]=B[C]}$=J.length;while($--){let C=J[$];if(E=Y[C],G=G||C.startsWith("$"),E?.$__)E=E.toObject(Yq1),Y[C]=E;if(E&&typeof E==="object"&&!Buffer.isBuffer(E)&&vH.has(C))zh(A,E,C,D,X,Z);else{let W="Invalid atomic update value for "+C+". Expected an object, received "+typeof E;throw new Error(W)}if(C.startsWith("$")&&n3.isEmptyObject(E))delete Y[C]}if(n3.hasOwnKeys(Y)===!1&&D.upsert&&n3.hasOwnKeys(Z))return{$setOnInsert:{...Z}};return Y};/*!
 * ignore
 */function $q1(F,A){if(F==="$unset"){if(typeof A!=="string"&&(!Array.isArray(A)||A.find((B)=>typeof B!=="string")))throw new T8("Invalid $unset in pipeline, must be  a string or an array of strings");return A}if(F==="$project"){if(A==null||typeof A!=="object")throw new T8("Invalid $project in pipeline, must be an object");return A}if(F==="$addFields"||F==="$set"){if(A==null||typeof A!=="object")throw new T8("Invalid "+F+" in pipeline, must be an object");return A}else if(F==="$replaceRoot"||F==="$replaceWith"){if(A==null||typeof A!=="object")throw new T8("Invalid "+F+" in pipeline, must be an object");return A}throw new T8('Invalid update pipeline operator: "'+F+'"')}function zh(F,A,B,D,X,Z,J){let $=D.strict;J=J?J+".":"";let Y=Object.keys(A),E=Y.length,G=!1,C,W,H,q=null,Q=$??F.options.strict;while(E--){if(W=Y[E],H=A[W],B==="$pull"){if(C=F._getSchema(J+W),C==null){let U=yH(F,A,Z,J+W,D);if(U.schematype!=null)C=U.schematype}if(C?.schema!=null){A[W]=Dq1(C.schema,A[W],D,X),G=!0;continue}}let K=J?J+W:W;if(F.discriminatorMapping!=null&&K===F.options.discriminatorKey&&F.discriminatorMapping.value!==A[W]&&!D.overwriteDiscriminatorKey){if(Q==="throw"){let U=new Error(`Can't modify discriminator key "`+K+'" on discriminator model');q=b9(U,X,K,q);continue}else if(Q){delete A[W];continue}}if(Xq1(H)==="Object"){if(C=F._getSchema(J+W),C==null){let U=yH(F,A,Z,J+W,D);if(U.schematype!=null)C=U.schematype}if(B!=="$setOnInsert"&&Ch(C,$,A,W,J+W,D,X))continue;if(C&&(C.embeddedSchemaType||C.Constructor)&&B in mH)if("$each"in H){G=!0;try{A[W]={$each:j8(C,H.$each,B,W,X,J+W)}}catch(U){q=b9(U,X,W,q)}if(H.$slice!=null)A[W].$slice=H.$slice|0;if(H.$sort)A[W].$sort=H.$sort;if(H.$position!=null)A[W].$position=hH(H.$position)}else{if(C?.$isSingleNested){let U=$==null?C.schema.options.strict:$;try{A[W]=C.castForQuery(null,H,X,{strict:U})}catch(R){q=b9(R,X,W,q)}}else try{A[W]=j8(C,H,B,W,X,J+W)}catch(U){q=b9(U,X,W,q)}if(A[W]===void 0){delete A[W];continue}G=!0}else if(B==="$currentDate"||B in mH&&C){try{A[W]=j8(C,H,B,W,X,J+W)}catch(U){q=b9(U,X,W,q)}if(A[W]===void 0){delete A[W];continue}G=!0}else if(B==="$rename"){let U=new Eh(`${J}${W}.$rename`);try{A[W]=j8(U,H,B,W,X,J+W)}catch(R){q=b9(R,X,W,q)}if(A[W]===void 0){delete A[W];continue}G=!0}else{let U=J+W,R=F._getPathType(U),w=$;if(R?.schema&&w==null)w=R.schema.options.strict;if(R.pathType==="undefined"){if(w==="throw")throw new Gh(U);else if(w){delete A[W];continue}}G|=zh(F,H,B,D,X,Z,J+W)||n3.isObject(H)&&n3.hasOwnKeys(H)===!1}}else{let U=W==="$each"||W==="$or"||W==="$and"||W==="$in";if(U&&!J)throw new T8('Invalid update: Unexpected modifier "'+W+'" as a key in operator. Did you mean something like { $addToSet: { fieldName: { $each: [...] } } }? Modifiers such as "$each", "$or", "$and", "$in" must appear under a valid field path.');let R=U?J:J+W;if(C=F._getSchema(R),B!=="$setOnInsert"&&Ch(C,$,A,W,J+W,D,X))continue;let w=F._getPathType(R);if(C==null){let T=yH(F,A,Z,R,D);if(T.schematype!=null)C=T.schematype,w=T.type}let V=$;if(w?.schema&&$==null)V=w.schema.options.strict;if(V&&!C&&!/real|nested/.test(w.pathType))if(V==="throw"&&F.virtuals[R]==null)throw new Gh(J+W);else delete A[W];else{if(B==="$rename"){if(A[W]==null)throw new fX("String",A[W],`${J}${W}.$rename`);let T=new Eh(`${J}${W}.$rename`,null,null,F);A[W]=T.castForQuery(null,A[W],X);continue}try{if(J.length===0||W.indexOf(".")===-1)A[W]=j8(C,H,B,W,X,J+W);else if(V!==!1||C!=null)Jq1(A,W,j8(C,H,B,W,X,J+W)),delete A[W]}catch(T){q=b9(T,X,W,q)}if(Array.isArray(A[W])&&(B==="$addToSet"||B==="$push")&&W!=="$each"){if(C&&C.embeddedSchemaType&&!C.embeddedSchemaType.$isMongooseArray&&!C.embeddedSchemaType[qh])A[W]={$each:A[W]}}if(A[W]===void 0){delete A[W];continue}G=!0}}}if(q!=null)throw q;return G}/*!
 * ignore
 */function b9(F,A,B,D){if(typeof A!=="object"||!A.options.multipleCastError)throw F;return D=D||new Bq1,D.addError(B,F),D}var Wh={$pop:1,$inc:1},Eq1={$unset:1},mH={$push:1,$addToSet:1,$set:1,$setOnInsert:1};/*!
 * ignore
 */var Hh={$set:1,$setOnInsert:1};function j8(F,A,B,D,X,Z){if(!F){if(B in Wh)try{return hH(A)}catch{throw new fX("number",A,Z)}return A}if(F.$isMongooseArray&&B in mH&&(n3.isObject(A)||Array.isArray(A))&&!Hh[B]){let $=0,Y=F;while(Y.$isMongooseArray)++$,Y=Y.embeddedSchemaType;let E=0,G=A;while(Array.isArray(G))++E,G=G[0];let C=$-E;while(E<$)A=[A],++E;let W=F.applySetters(Array.isArray(A)?A:[A],X);for(let H=0;H<C;++H)W=W[0];return W}if(B in Eq1)return A;if(B in Wh){if(A==null)throw new fX("number",A,F.path);if(B==="$inc")return F.castForQuery(null,A,X);try{return hH(A)}catch{throw new fX("number",A,F.path)}}if(B==="$currentDate"){if(typeof A==="object")return{$type:A.$type};return Boolean(A)}if(vH.has(D))return F.castForQuery(D,A,X);if(Hh[B]){let $=A!=null&&F.$isMongooseArray&&F.$fullPath!=null&&!F.$fullPath.match(/\d+$/),Y=F[qh]!=null;if($||Y)return F.applySetters(A,X);return F.castForQuery(null,A,X)}return F.castForQuery(null,A,X)}});var cH=z((Ik1,Kh)=>{Kh.exports=function F(A,B,D){if(!D||!B?.upsert)return;if(B.overwrite){if(!lF(A,D))A[D]=0}else if(!lF(A,D)&&!lF(A?.$set,D)&&!lF(A?.$inc,D)&&!lF(A?.$setOnInsert,D)){if(!A.$setOnInsert)A.$setOnInsert={};A.$setOnInsert[D]=0}};function lF(F,A){if(F==null||typeof F!=="object")return!1;return Object.hasOwn(F,A)}});var lH=z((Nk1,Vh)=>{var Gq1=K0();Vh.exports=function(F,A,B,D){D=D||{};let X=D.setDefaultsOnInsert??A.base.options.setDefaultsOnInsert;if(!D.upsert||X===!1)return B;let Z=Object.keys(B||{}),J={},$={},Y=Z.length,E=!1;for(let W=0;W<Y;++W)if(Z[W].charAt(0)==="$"){E=!0;break}let G=Object.keys(F),C=G.length;for(let W=0;W<C;++W){let H=G[W],q=F[H];if(q&&typeof q==="object"){let Q=Object.keys(q),K=Q.length,U=!1;for(let R=0;R<K;++R)if(Q[R].charAt(0)==="$"){U=!0;break}if(U)continue}J[H]=!0}if(D?.overwrite&&!E)return B;return A.eachPath(function(W,H){if(H.path==="_id"&&H.options.auto)return;let q=H.getDefault(null,!0);if(typeof q==="undefined")return;let Q=H.splitPath();if(Q.includes("$*"))return;if(Cq1(B,J,W,Q,E))return;if(B=B||{},B.$setOnInsert=B.$setOnInsert||{},Gq1(B,W)==null)B.$setOnInsert[W]=q;$[W]=q}),B};function Cq1(F,A,B,D,X){if(A[B])return!0;let Z=D[0];for(let J=1;J<D.length;++J){if(A[Z])return!0;Z+="."+D[J]}if(X){for(let J in F)if(J.charAt(0)==="$"){if(Uh(F[J],B,D))return!0}}else if(Uh(F,B,D))return!0;return!1}function Uh(F,A,B){if(F==null||typeof F!=="object")return!1;if(Object.hasOwn(F,A))return!0;let D=B[0];for(let Z=1;Z<B.length;++Z){if(Object.hasOwn(F,D))return!0;D+="."+B[Z]}let X=A+".";for(let Z in F)if(Z.startsWith(X))return!0;return!1}});var pH=z((Mk1,T0)=>{var Wq1=K1(),Hq1=M6(),Lh=QW(),wh=KW(),pF=x9(),Rh=dH(),qq1=C0(),Ph=cH(),{inspect:zq1}=c("util"),Ih=lH();T0.exports=function F(A,B,D){let X=A.base.now();if(B.insertOne)return(Z)=>T0.exports.castInsertOne(A,B.insertOne,D).then(()=>Z(null),(J)=>Z(J));else if(B.updateOne)return(Z)=>{try{T0.exports.castUpdateOne(A,B.updateOne,D,X),Z(null)}catch(J){Z(J)}};else if(B.updateMany)return(Z)=>{try{T0.exports.castUpdateMany(A,B.updateMany,D,X),Z(null)}catch(J){Z(J)}};else if(B.replaceOne)return(Z)=>{T0.exports.castReplaceOne(A,B.replaceOne,D).then(()=>Z(null),(J)=>Z(J))};else if(B.deleteOne)return(Z)=>{try{T0.exports.castDeleteOne(A,B.deleteOne),Z(null)}catch(J){Z(J)}};else if(B.deleteMany)return(Z)=>{try{T0.exports.castDeleteMany(A,B.deleteMany),Z(null)}catch(J){Z(J)}};else return(Z)=>{let J=new Wq1(`Invalid op passed to \`bulkWrite()\`: ${zq1(B)}`);Z(J,null)}};T0.exports.castInsertOne=async function F(A,B,D){let X=k8(A,B.document),Z=new X(B.document);if(X.schema.options.timestamps&&gX(B,D))Z.initializeTimestamps();if(D.session!=null)Z.$session(D.session);let J=X?.schema?.options?.versionKey;if(J&&Z[J]==null)Z[J]=0;if(B.document=Z,D.skipValidation||B.skipValidation)return B;return await B.document.$validate(),B};T0.exports.castUpdateOne=function F(A,B,D,X){if(!B.filter)throw new Error("Must provide a filter object.");if(!B.update)throw new Error("Must provide an update object.");let Z=k8(A,B.filter),J=Z.schema,$=D.strict??Z.schema.options.strict,Y=qq1(B.update);iF(J,B.filter);let E=gX(B,D);if(Z.schema.$timestamps!=null&&E){let W=Z.schema.$timestamps.createdAt,H=Z.schema.$timestamps.updatedAt;wh(X,W,H,Y,{timestamps:B.timestamps,overwriteImmutable:B.overwriteImmutable})}if(E)Lh(X,Y,Z.schema);let G=A.base.options.setDefaultsOnInsert;if((B.setDefaultsOnInsert??G)!==!1)Ih(B.filter,Z.schema,Y,{setDefaultsOnInsert:!0,upsert:B.upsert});return Ph(Y,B,Z.schema.options.versionKey),B.filter=pF(Z.schema,B.filter,{strict:$,upsert:B.upsert}),B.update=Rh(Z.schema,Y,{strict:$,upsert:B.upsert,arrayFilters:B.arrayFilters,overwriteDiscriminatorKey:B.overwriteDiscriminatorKey,overwriteImmutable:B.overwriteImmutable},Z,B.filter),B};T0.exports.castUpdateMany=function F(A,B,D,X){if(!B.filter)throw new Error("Must provide a filter object.");if(!B.update)throw new Error("Must provide an update object.");let Z=k8(A,B.filter),J=Z.schema,$=D.strict??Z.schema.options.strict,Y=A.base.options.setDefaultsOnInsert;if((B.setDefaultsOnInsert??Y)!==!1)Ih(B.filter,Z.schema,B.update,{setDefaultsOnInsert:!0,upsert:B.upsert});let G=gX(B,D);if(Z.schema.$timestamps!=null&&G){let C=Z.schema.$timestamps.createdAt,W=Z.schema.$timestamps.updatedAt;wh(X,C,W,B.update,{timestamps:B.timestamps,overwriteImmutable:B.overwriteImmutable})}if(G)Lh(X,B.update,Z.schema);iF(J,B.filter),Ph(B.update,B,Z.schema.options.versionKey),B.filter=pF(Z.schema,B.filter,{strict:$,upsert:B.upsert}),B.update=Rh(Z.schema,B.update,{strict:$,upsert:B.upsert,arrayFilters:B.arrayFilters,overwriteDiscriminatorKey:B.overwriteDiscriminatorKey,overwriteImmutable:B.overwriteImmutable},Z,B.filter)};T0.exports.castReplaceOne=async function F(A,B,D){let X=k8(A,B.filter),Z=X.schema,J=D.strict??X.schema.options.strict;iF(Z,B.filter),B.filter=pF(X.schema,B.filter,{strict:J,upsert:B.upsert});let $=new X(B.replacement,J,{skipId:!0});if(X.schema.options.timestamps&&gX(B,D))$.initializeTimestamps();if(D.session!=null)$.$session(D.session);let Y=X?.schema?.options?.versionKey;if(Y&&$[Y]==null)$[Y]=0;if(B.replacement=$,D.skipValidation||B.skipValidation){B.replacement=B.replacement.toBSON();return}await B.replacement.$validate(),B.replacement=B.replacement.toBSON()};T0.exports.castDeleteOne=function F(A,B){let D=k8(A,B.filter),X=D.schema;iF(X,B.filter),B.filter=pF(D.schema,B.filter)};T0.exports.castDeleteMany=function F(A,B){let D=k8(A,B.filter),X=D.schema;iF(X,B.filter),B.filter=pF(D.schema,B.filter)};T0.exports.cast={insertOne:T0.exports.castInsertOne,updateOne:T0.exports.castUpdateOne,updateMany:T0.exports.castUpdateMany,replaceOne:T0.exports.castReplaceOne,deleteOne:T0.exports.castDeleteOne,deleteMany:T0.exports.castDeleteMany};function iF(F,A){if(F==null)return;if(F.discriminatorMapping&&!F.discriminatorMapping.isRoot)A[F.discriminatorMapping.key]=F.discriminatorMapping.value}function k8(F,A){let B=F.schema.options.discriminatorKey;if(A!=null&&Object.hasOwn(A,B))F=Hq1(F.discriminators,A[B])||F;return F}function gX(F,A){let B=F.timestamps,D=A.timestamps;if(B!=null)return B;else if(D!=null)return D;return!0}});var iH=z((jk1,Nh)=>{Nh.exports=function F(A,B,D){return A.mongoose=A.mongoose||{},A.mongoose.validationErrors=B,A.mongoose.results=D,A}});var rH=z((Tk1,kh)=>{/*!
 * Module dependencies.
 */var Qq1=rG(),aH=c("events").EventEmitter,Kq1=u9(),k0=H5(),Mh=TH(),V0=E6(),Uq1=qC(),Vq1=ly(),Lq1=uH(),wq1=C0(),Rq1=_X(),Pq1=K0(),Iq1=SH(),jh=B4(),sH=B1(),Nq1=sy(),bX=pH(),{modelSymbol:yX}=t(),Mq1=fC(),nH=iH(),jq1=t().arrayAtomicsSymbol,nF=t().sessionNewDocuments,Tq1=globalThis.Date,kq1=["MONGODB-X509"];function F1(F){if(this.base=F,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=k0,this._readyState=k0.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof F==="undefined"||!F.connections.length)this.id=0;else this.id=F.nextConnectionId;this._queue=[]}/*!
 * Inherit from EventEmitter
 */Object.setPrototypeOf(F1.prototype,aH.prototype);Object.defineProperty(F1.prototype,"readyState",{get:function(){if(this._readyState===k0.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS==="number"&&Tq1.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2)return k0.disconnected;return this._readyState},set:function(F){if(!(F in k0))throw new Error("Invalid connection state: "+F);if(this._readyState!==F){this._readyState=F;for(let A of this.otherDbs)A.readyState=F;if(k0.connected===F)this._hasOpened=!0;this.emit(k0[F])}}});F1.prototype.get=function F(A){if(Object.hasOwn(this.config,A))return this.config[A];return Pq1(this.options,A)};F1.prototype.set=function F(A,B){if(Object.hasOwn(this.config,A))return this.config[A]=B,B;return this.options=this.options||{},this.options[A]=B,B};F1.prototype.collections;F1.prototype.name;F1.prototype.models;F1.prototype.id;Object.defineProperty(F1.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(F1.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(F1.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(F1.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(F1.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});F1.prototype.db;F1.prototype.client;F1.prototype.config;F1.prototype.createCollection=async function F(A,B){if(typeof B==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new V0("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(A,B)};F1.prototype.bulkWrite=async function F(A,B){await this._waitForConnect(),B=B||{};let D=B.ordered==null?!0:B.ordered,X=this.base.transactionAsyncLocalStorage?.getStore();if((!B||!Object.hasOwn(B,"session"))&&X?.session!=null)B={...B,session:X.session};let Z=this.base.now(),J=null;if(D){let $=[];for(let Y of A){if(typeof Y.model!=="string"&&!Y.model?.[yX])throw new V0("Must specify model in Connection.prototype.bulkWrite() operations");let E=Y.model[yX]?Y.model:this.model(Y.model);if(Y.name==null)throw new V0("Must specify operation name in Connection.prototype.bulkWrite()");if(!Object.hasOwn(bX.cast,Y.name))throw new V0(`Unrecognized bulkWrite() operation name ${Y.name}`);await bX.cast[Y.name](E,Y,B,Z),$.push({...Y,namespace:E.namespace()})}J=await this.client.bulkWrite($,B)}else{let $=[],Y=[],E=[],G=[],C=[];for(let H=0;H<A.length;++H){let q=A[H];if(typeof q.model!=="string"&&!q.model?.[yX]){let U=new V0("Must specify model in Connection.prototype.bulkWrite() operations");E.push({index:H,error:U}),C[H]=U;continue}let Q;try{Q=q.model[yX]?q.model:this.model(q.model)}catch(U){E.push({index:H,error:U});continue}if(q.name==null){let U=new V0("Must specify operation name in Connection.prototype.bulkWrite()");E.push({index:H,error:U}),C[H]=U;continue}if(!Object.hasOwn(bX.cast,q.name)){let U=new V0(`Unrecognized bulkWrite() operation name ${q.name}`);E.push({index:H,error:U}),C[H]=U;continue}let K=null;try{K=bX.cast[q.name](Q,q,B,Z)}catch(U){E.push({index:H,error:U}),C[H]=U;continue}if(Mq1(K))G.push(K.then(()=>{$.push({...q,namespace:Q.namespace()}),Y.push(H)},(U)=>{E.push({index:H,error:U}),C[H]=U}));else $.push({...q,namespace:Q.namespace()}),Y.push(H)}if(G.length>0)await Promise.all(G);if(E=E.sort((H,q)=>H.index-q.index).map((H)=>H.error),$.length===0){if(B.throwOnValidationError&&E.length)throw new Mh(E,C,q,"bulkWrite");let q=new(this.base.driver.get()).BulkWriteResult(Iq1(),!1);return nH(q,E,C)}let W;[J,W]=await this.client.bulkWrite($,B).then((H)=>[H,null]).catch((H)=>[null,H]);for(let H=0;H<Y.length;++H)C[Y[H]]=null;if(W){if(E.length>0)nH(W,E,C),W.mongoose=W.mongoose||{},W.mongoose.validationErrors=E}if(E.length>0)if(B.throwOnValidationError)throw new Mh(E,C,J,"bulkWrite");else nH(J,E,C)}return J};F1.prototype.createCollections=async function F(A={}){let B={},D={},{continueOnError:X}=A;delete A.continueOnError;for(let Z of Object.values(this.models))try{B[Z.modelName]=await Z.createCollection({})}catch(J){if(!X){D[Z.modelName]=J;break}else B[Z.modelName]=J}if(!X&&sH.hasOwnKeys(D)){let Z=Object.entries(D).map(([$,Y])=>`${$}: ${Y.message}`).join(", ");throw new Nq1(Z,D)}return B};F1.prototype.withSession=async function F(A){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(A)};F1.prototype.startSession=async function F(A){if(arguments.length>=2&&typeof arguments[1]==="function")throw new V0("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(A)};F1.prototype.transaction=function F(A,B){return this.startSession().then((D)=>{return D[nF]=new Map,D.withTransaction(()=>uq1(A,D,this.base),B).then((X)=>{return delete D[nF],X}).catch((X)=>{throw delete D[nF],X}).finally(()=>{D.endSession().catch(()=>{})})})};/*!
 * Reset document state in between transaction retries re: gh-13698
 */async function uq1(F,A,B){try{return B.transactionAsyncLocalStorage==null?await F(A):await new Promise((X)=>{B.transactionAsyncLocalStorage.run({session:A},()=>X(F(A)))})}catch(D){throw Oq1(A),D}}/*!
 * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
 */function Oq1(F){for(let A of F[nF].keys()){let B=F[nF].get(A);if(Object.hasOwn(B,"isNew"))A.$isNew=B.isNew;if(Object.hasOwn(B,"versionKey"))A.set(A.schema.options.versionKey,B.versionKey);if(B.modifiedPaths.length>0&&A.$__.activePaths.states.modify==null)A.$__.activePaths.states.modify={};for(let D of B.modifiedPaths){let X=A.$__.activePaths.paths[D];if(X!=null)delete A.$__.activePaths[X][D];A.$__.activePaths.paths[D]="modify",A.$__.activePaths.states.modify[D]=!0}for(let D of B.atomics.keys()){let X=A.$__getValue(D);if(X==null)continue;X[jq1]=B.atomics.get(D)}}}F1.prototype.dropCollection=async function F(A){if(arguments.length>=2&&typeof arguments[1]==="function")throw new V0("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(A)};F1.prototype._waitForConnect=async function F(A){if((this.readyState===k0.connecting||this.readyState===k0.disconnected)&&this._shouldBufferCommands()){let B=this._getBufferTimeoutMS(),D=null,X=!1,Z={},J=new Promise(($)=>{Z.fn=$,this._queue.push(Z)});if(A)await J;else await Promise.race([J,new Promise(($)=>{D=setTimeout(()=>{X=!0,$()},B)})]);if(X){let $=this._queue.indexOf(Z);if($!==-1)this._queue.splice($,1);let Y="Connection operation buffering timed out after "+B+"ms";throw new V0(Y)}else if(D!=null)clearTimeout(D)}};/*!
 * Get the default buffer timeout for this connection
 */F1.prototype._getBufferTimeoutMS=function F(){if(this.config.bufferTimeoutMS!=null)return this.config.bufferTimeoutMS;if(this.base?.get("bufferTimeoutMS")!=null)return this.base.get("bufferTimeoutMS");return 1e4};F1.prototype.listCollections=async function F(){return await this._waitForConnect(),await this.db.listCollections().toArray()};F1.prototype.listDatabases=async function F(){throw new V0("listDatabases() not implemented by driver")};F1.prototype.dropDatabase=async function F(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new V0("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let A of Object.values(this.models))delete A.$init;return this.db.dropDatabase()};/*!
 * ignore
 */F1.prototype._shouldBufferCommands=function F(){if(this.config.bufferCommands!=null)return this.config.bufferCommands;if(this.base.get("bufferCommands")!=null)return this.base.get("bufferCommands");return!0};F1.prototype.error=function F(A,B){if(B)return B(A),null;if(this.listeners("error").length>0)this.emit("error",A);return Promise.reject(A)};F1.prototype.onOpen=function(){this.readyState=k0.connected;for(let F of this._queue)F.fn.apply(F.ctx,F.args);this._queue=[];for(let F in this.collections)if(Object.hasOwn(this.collections,F))this.collections[F].onOpen();this.emit("open")};F1.prototype.openUri=async function F(A,B){if(this.readyState===k0.connecting||this.readyState===k0.connected){if(this._connectionString===A)return this}this._closeCalled=!1;let D=!1;if(B&&"_fireAndForget"in B)D=B._fireAndForget,delete B._fireAndForget;try{Sq1.apply(arguments)}catch(X){if(D)throw X;throw this.$initialConnection=Promise.reject(X),X}this.$initialConnection=this.createClient(A,B).then(()=>this).catch((X)=>{if(this.readyState=k0.disconnected,this.listeners("error").length>0)jh(()=>this.emit("error",X));throw X});for(let X of Object.values(this.models))X.init().catch(function Z(){});if(D)return this;try{await this.$initialConnection}catch(X){throw Th(X)}return this};F1.prototype.on=function F(A,B){if(A==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return aH.prototype.on.call(this,A,B)};F1.prototype.once=function F(A,B){if(A==="error"&&this.$initialConnection)this.$initialConnection.catch(()=>{});return aH.prototype.once.call(this,A,B)};/*!
 * ignore
 */function Sq1(F,A,B){if(typeof A==="function"&&B==null)throw new V0("Connection.prototype.openUri() no longer accepts a callback");else if(typeof B==="function")throw new V0("Connection.prototype.openUri() no longer accepts a callback")}/*!
 * ignore
 */function Th(F){if(F?.name==="MongoServerSelectionError"){let A=F;F=new Uq1,F.assimilateError(A)}return F}F1.prototype.destroy=async function F(A){if(typeof A==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new V0("Connection.prototype.destroy() no longer accepts a callback");if(A!=null&&typeof A==="object")this.$wasForceClosed=!!A.force;else this.$wasForceClosed=!!A;return this._close(A,!0)};F1.prototype.close=async function F(A){if(typeof A==="function"||arguments.length===2&&typeof arguments[1]==="function")throw new V0("Connection.prototype.close() no longer accepts a callback");if(A!=null&&typeof A==="object")this.$wasForceClosed=!!A.force;else this.$wasForceClosed=!!A;if(this._lastHeartbeatAt!=null)this._lastHeartbeatAt=null;for(let B of Object.values(this.models))delete B.$init;return this._close(A,!1)};F1.prototype._close=async function F(A,B){let D=this,X=this._closeCalled;if(this._closeCalled=!0,this._destroyCalled=B,this.client!=null)this.client._closeCalled=!0,this.client._destroyCalled=B;let Z=this;switch(this.readyState){case k0.disconnected:if(B){let J=this.base.connections.indexOf(Z);if(J!==-1)this.base.connections.splice(J,1)}if(!X)await this.doClose(A),this.onClose(A);break;case k0.connected:if(this.readyState=k0.disconnecting,await this.doClose(A),B){let J=D.base.connections.indexOf(Z);if(J!==-1)this.base.connections.splice(J,1)}this.onClose(A);break;case k0.connecting:return new Promise((J,$)=>{let Y=()=>{if(this.removeListener("open",Y),this.removeListener("error",Y),B)this.destroy(A).then(J,$);else this.close(A).then(J,$)};this.once("open",Y),this.once("error",Y)});case k0.disconnecting:return new Promise((J)=>{this.once("close",()=>{if(B&&this.base.connections.indexOf(Z)!==-1)this.base.connections.splice(this.base.connections.indexOf(Z),1);J()})})}return this};F1.prototype.doClose=function F(){throw new Error("Connection#doClose unimplemented by driver")};F1.prototype.onClose=function F(A){this.readyState=k0.disconnected;for(let D in this.collections)if(Object.hasOwn(this.collections,D))this.collections[D].onClose(A);this.emit("close",A);let B=typeof A==="object"&&A!==null?A.force:A;for(let D of this.otherDbs)this._destroyCalled?D.destroy({force:B,skipCloseClient:!0}):D.close({force:B,skipCloseClient:!0})};F1.prototype.collection=function(F,A){let B={autoIndex:this.config.autoIndex??this.base.options.autoIndex,autoCreate:this.config.autoCreate??this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex??this.base.options.autoSearchIndex};A=Object.assign({},B,A?wq1(A):{}),A.$wasForceClosed=this.$wasForceClosed;let D=this.base?.__driver?.Collection||Rq1.get().Collection;if(!(F in this.collections))this.collections[F]=new D(F,this,A);return this.collections[F]};F1.prototype.plugin=function(F,A){return this.plugins.push([F,A]),this};F1.prototype.model=function F(A,B,D,X){if(!(this instanceof F1))throw new V0("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let Z;if(typeof A==="function")Z=A,A=Z.name;if(typeof B==="string")D=B,B=!1;if(sH.isObject(B)){if(!B.instanceOfSchema)B=new Kq1(B);else if(!(B instanceof this.base.Schema))B=B._clone(this.base.Schema)}if(B&&!B.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let J={cache:!1,overwriteModels:this.base.options.overwriteModels},$=Object.assign(J,X,{connection:this});if(this.models[A]&&!D&&$.overwriteModels!==!0){if(B?.instanceOfSchema&&B!==this.models[A].schema)throw new V0.OverwriteModelError(A);return this.models[A]}let Y;if(B?.instanceOfSchema){if(Lq1(B,this.plugins,null,"$connectionPluginsApplied"),Y=this.base._model(Z||A,B,D,$),!this.models[A])this.models[A]=Y;return Y.init().catch(function E(){}),Y}if(this.models[A]&&D)return Y=this.models[A],B=Y.prototype.schema,Y.__subclass(this,B,D);if(arguments.length===1){if(Y=this.models[A],!Y)throw new V0.MissingSchemaError(A);return Y}if(!Y)throw new V0.MissingSchemaError(A);if(this===Y.prototype.db&&(!D||D===Y.collection.name)){if(!this.models[A])this.models[A]=Y;return Y}return this.models[A]=Y.__subclass(this,B,D),this.models[A]};F1.prototype.deleteModel=function F(A){if(typeof A==="string"){let B=this.model(A);if(B==null)return this;let D=B.collection.name;delete this.models[A],delete this.collections[D],this.emit("deleteModel",B)}else if(A instanceof RegExp){let B=A,D=this.modelNames();for(let X of D)if(B.test(X))this.deleteModel(X)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+A+'"');return this};F1.prototype.watch=function F(A,B){return new Qq1((Z)=>{jh(()=>{if(this.readyState===k0.connecting)this.once("open",function(){let J=this.db.watch(A,B);Z(null,J)});else{let J=this.db.watch(A,B);Z(null,J)}})},A,B)};F1.prototype.asPromise=async function F(){try{return await this.$initialConnection,this}catch(A){throw Th(A)}};F1.prototype.modelNames=function F(){return Object.keys(this.models)};F1.prototype.shouldAuthenticate=function F(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};F1.prototype.authMechanismDoesNotRequirePassword=function F(){if(this.options?.auth)return kq1.indexOf(this.options.auth.authMechanism)>=0;return!0};F1.prototype.optionsProvideAuthenticationData=function F(A){return A&&A.user&&(A.pass||this.authMechanismDoesNotRequirePassword())};F1.prototype.getClient=function F(){return this.client};F1.prototype.setClient=function F(){throw new V0("Connection#setClient not implemented by driver")};/*!
 * Called internally by `openUri()` to create a MongoClient instance.
 */F1.prototype.createClient=function F(){throw new V0("Connection#createClient not implemented by driver")};F1.prototype.syncIndexes=async function F(A={}){let B={},D={},{continueOnError:X}=A;delete A.continueOnError;for(let Z of Object.values(this.models))try{B[Z.modelName]=await Z.syncIndexes(A)}catch(J){if(!X){D[Z.modelName]=J;break}else B[Z.modelName]=J}if(!X&&sH.hasOwnKeys(D)){let Z=Object.entries(D).map(([$,Y])=>`${$}: ${Y.message}`).join(", ");throw new Vq1(Z,D)}return B};/*!
 * Module exports.
 */F1.STATES=k0;kh.exports=F1});var tH=z((kk1,xq1)=>{xq1.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"9.1.2",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{kareem:"3.0.0",mongodb:"~7.0",mpath:"0.9.0",mquery:"6.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@ark/attest":"0.56.0","@mongodb-js/mongodb-downloader":"^1.0.0",acquit:"1.4.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1",ajv:"8.17.1","broken-link-checker":"^0.7.8",cheerio:"1.1.2",dox:"1.0.0",eslint:"9.39.2","eslint-plugin-markdown":"^5.1.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.20.0",marked:"15.x",mkdirp:"^3.0.1",mocha:"11.7.5",moment:"2.30.1","mongodb-memory-server":"11.0.1","mongodb-runner":"^6.0.0","mongodb-client-encryption":"~7.0",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",sinon:"21.0.1",tsd:"0.33.0",typescript:"5.9.3","typescript-eslint":"^8.31.1",uuid:"11.1.0"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:prepare:publish:8x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/8.x && mv ./tmp ./docs/8.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test:ci":"npm run test -- --reporter min","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-deno:ci":"npm run test-deno -- --reporter min","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-rs:ci":"npm run test-rs -- --reporter min","test-tsd":"node ./test/types/check-types-filename && tsd --full","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js","test-encryption:ci":"npm run test-encryption -- --reporter min",tdd:"mocha --watch --inspect --recursive ./test/*.test.js --watch-files lib/**/*.js test/**/*.js","test-coverage":"nyc --reporter=html --reporter=text npm test","test-coverage:ci":"nyc --reporter=html --reporter=text npm run test:ci","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","ts-benchmark:local":"node ./scripts/create-tarball && cd ./benchmarks/typescript/simple && rm -rf ./node_modules && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","attest-benchmark":"node ./benchmarks/typescript/infer.bench.mts"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=20.19.0"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2022"}}}});var Oh=z((uk1,uh)=>{var _q1=C0(),fq1=E6();function gq1(F,A){let B=A?A:{},D=B.readPreference?B.readPreference:vq1(F),X=_q1(B);return D&&D!=="primary"&&D!=="primaryPreferred"?bq1(D,X):X}function bq1(F,A){if(yq1(A)&&hq1(F))dq1();else return mq1(A)}function yq1(F){let A=F.config?.autoIndex,{autoCreate:B,autoIndex:D}=F;return!!(A||B||D)}function hq1(F){return F==="secondary"||F==="secondaryPreferred"}function vq1(F){let B=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(F);return B?B[1]:null}function mq1(F){return F.config={autoIndex:!1},F.autoCreate=!1,F.autoIndex=!1,F}function dq1(){throw new fq1('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}uh.exports=gq1});var Sh=z((cq1)=>{cq1.setTimeout=setTimeout});var gh=z((Sk1,fh)=>{/*!
 * Module dependencies.
 */var xh=rH(),y9=E6(),i2=H5(),_h=Y4(),pq1=tH(),iq1=Oh(),nq1=Sh().setTimeout,aF=B1(),aq1=u9();function t6(){xh.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}t6.STATES=i2;/*!
 * Inherits from Connection.
 */Object.setPrototypeOf(t6.prototype,xh.prototype);t6.prototype.useDb=function(F,A){if(A=A||{},A.useCache&&this.relatedDbs[F])return this.relatedDbs[F];let B=new this.constructor;B.name=F,B.base=this.base,B.collections={},B.models={},B.replica=this.replica,B.config=Object.assign({},this.config,B.config),B.name=this.name,B.options=this.options,B._readyState=this._readyState,B._closeCalled=this._closeCalled,B._hasOpened=this._hasOpened,B._listening=!1,B._parent=this,B.host=this.host,B.port=this.port,B.user=this.user,B.pass=this.pass;let D=this;if(B.client=D.client,this.db&&this._readyState===i2.connected)X();else this._queue.push({fn:X});function X(){B.client=D.client,B.db=D.client.db(F),B._lastHeartbeatAt=D._lastHeartbeatAt,B.onOpen()}if(B.name=F,this.otherDbs.push(B),B.otherDbs.push(this),A?.useCache)this.relatedDbs[B.name]=B,B.relatedDbs=this.relatedDbs;return B};t6.prototype.aggregate=function F(A,B){return new this.base.Aggregate(null,this).append(A).option(B??{})};t6.prototype.removeDb=function F(A){let B=this.otherDbs.filter((D)=>D.name===A);if(!B.length)throw new y9(`No connections to database "${A}" found`);for(let D of B)D._closeCalled=!0,D._destroyCalled=!0,D._readyState=i2.disconnected,D.$wasForceClosed=!0;delete this.relatedDbs[A],this.otherDbs=this.otherDbs.filter((D)=>D.name!==A)};t6.prototype.doClose=async function F(A){if(this.client==null)return this;let B=!1;if(A!=null&&typeof A==="object")B=A.skipCloseClient,A=A.force;if(B)return this;return await this.client.close(A),await new Promise((D)=>nq1(D,1)),this};t6.prototype.listDatabases=async function F(){return await this._waitForConnect(),await this.db.admin().listDatabases()};/*!
 * ignore
 */t6.prototype.createClient=async function F(A,B){if(typeof A!=="string")throw new y9(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof A}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new y9("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if(this.readyState===i2.connecting||this.readyState===i2.connected){if(this._connectionString!==A)throw new y9("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections")}if(B=iq1(A,B),B){let $=B.config?.autoIndex??B.autoIndex;if($!=null)this.config.autoIndex=$!==!1,delete B.config,delete B.autoIndex;if("autoCreate"in B)this.config.autoCreate=!!B.autoCreate,delete B.autoCreate;if("sanitizeFilter"in B)this.config.sanitizeFilter=B.sanitizeFilter,delete B.sanitizeFilter;if("autoSearchIndex"in B)this.config.autoSearchIndex=B.autoSearchIndex,delete B.autoSearchIndex;if("bufferTimeoutMS"in B)this.config.bufferTimeoutMS=B.bufferTimeoutMS,delete B.bufferTimeoutMS;if(B.user||B.pass)B.auth=B.auth||{},B.auth.username=B.user,B.auth.password=B.pass,this.user=B.user,this.pass=B.pass;if(delete B.user,delete B.pass,B.bufferCommands!=null)this.config.bufferCommands=B.bufferCommands,delete B.bufferCommands}else B={};this._connectionOptions=B;let D=B.dbName;if(D!=null)this.$dbName=D;if(delete B.dbName,!aF.hasUserDefinedProperty(B,"driverInfo"))B.driverInfo={name:"Mongoose",version:pq1.version};let{schemaMap:X,encryptedFieldsMap:Z}=this._buildEncryptionSchemas();if((aF.hasOwnKeys(X)||aF.hasOwnKeys(Z))&&!B.autoEncryption)throw new Error("Must provide `autoEncryption` when connecting with encrypted schemas.");if(aF.hasOwnKeys(X))B.autoEncryption.schemaMap=X;if(aF.hasOwnKeys(Z))B.autoEncryption.encryptedFieldsMap=Z;this.readyState=i2.connecting,this._connectionString=A;let J;try{J=new _h.MongoClient(A,B)}catch($){throw this.readyState=i2.disconnected,$}this.client=J,J.setMaxListeners(0),await J.connect(),oH(this,J,B,D);for(let $ of this.otherDbs)oH($,J,{},$.name);return this};t6.prototype._buildEncryptionSchemas=function(){let F={},A={},B=Object.values(this.models).filter((Z)=>Z.schema._hasEncryptedFields());for(let Z of B){let{schema:J,collection:{collectionName:$}}=Z,Y=`${this.$dbName}.${$}`,E=J.encryptionType()==="csfle"?A:F;if(E[Y]??=new aq1({},{encryptionType:J.encryptionType()}),J.discriminatorMapping&&!J.discriminatorMapping.isRoot){let C=J._baseSchema;J.eachPath((W)=>{if(C.path(W))return;if(!E[Y]._hasEncryptedField(W))return;throw new Error(`Cannot have duplicate keys in discriminators with encryption. key=${W}`)})}E[Y].add(J)}let D=Object.fromEntries(Object.entries(A).map(([Z,J])=>[Z,J._buildSchemaMap()])),X=Object.fromEntries(Object.entries(F).map(([Z,J])=>[Z,J._buildEncryptedFields()]));return{schemaMap:D,encryptedFieldsMap:X}};/*!
 * ignore
 */t6.prototype.setClient=function F(A){if(!(A instanceof _h.MongoClient))throw new y9("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==i2.disconnected)throw new y9("Cannot call `setClient()` on a connection that is already connected.");if(A.topology==null)throw new y9("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=A.s.url,oH(this,A,{},A.s.options.dbName);for(let B of Object.values(this.models))B.init().catch(function D(){});return this};/*!
 * ignore
 */function oH(F,A,B,D){let X=D!=null?A.db(D):A.db();F.db=X,F.client=A,F.host=A?.s?.options?.hosts?.[0]?.host,F.port=A?.s?.options?.hosts?.[0]?.port,F.name=D!=null?D:X.databaseName,F._closeCalled=A._closeCalled;let Z=()=>{if(F.readyState!==i2.connected)F.readyState=i2.connected,F.emit("reconnect"),F.emit("reconnected"),F.onOpen()},J=A?.topology?.description?.type||"";if(J==="Single")A.on("serverDescriptionChanged",($)=>{if($.newDescription.type==="Unknown")F.readyState=i2.disconnected;else Z()});else if(J.startsWith("ReplicaSet"))A.on("topologyDescriptionChanged",($)=>{let Y=$.newDescription;if(F.readyState===i2.connected&&Y.type!=="ReplicaSetWithPrimary")F.readyState=i2.disconnected;else if(F.readyState===i2.disconnected&&Y.type==="ReplicaSetWithPrimary")Z()});if(F._lastHeartbeatAt=null,A.on("serverHeartbeatSucceeded",()=>{F._lastHeartbeatAt=Date.now();for(let $ of F.otherDbs)$._lastHeartbeatAt=F._lastHeartbeatAt}),B.monitorCommands)A.on("commandStarted",($)=>F.emit("commandStarted",$)),A.on("commandFailed",($)=>F.emit("commandFailed",$)),A.on("commandSucceeded",($)=>F.emit("commandSucceeded",$));F.onOpen();for(let $ in F.collections)if(Object.hasOwn(F.collections,$))F.collections[$].onOpen()}/*!
 * Module exports.
 */fh.exports=t6});var bh=z((sq1)=>{/*!
 * Module exports.
 */sq1.BulkWriteResult=xV();sq1.Collection=_O();sq1.Connection=gh();sq1.ClientEncryption=Y4().ClientEncryption});var hh=z((_k1,yh)=>{/*!
 * Valid mongoose options
 */var Fz1=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","strict","strictPopulate","strictQuery","timestamps.createdAt.immutable","toJSON","toObject","transactionAsyncLocalStorage","translateAliases","updatePipeline"]);yh.exports=Fz1});var mh=z((fk1,vh)=>{/*!
 * Module dependencies.
 */var Az1=K1();class eH extends Az1{constructor(F){let A=F.map((B)=>B.message).join(", ");if(A.length>50)A=A.slice(0,50)+"...";super(`eachAsync() finished with ${F.length} errors: ${A}`);this.errors=F}}Object.defineProperty(eH.prototype,"name",{value:"EachAsyncMultiError"});/*!
 * exports
 */vh.exports=eH});var Aq=z((gk1,ch)=>{/*!
 * Module dependencies.
 */var Bz1=mh(),Fq=B4();ch.exports=async function F(A,B,D){let X=D.parallel||1,Z=D.batchSize,J=D.signal,$=D.continueOnError,Y=[],E=Dz1(),G=!1;return new Promise((H,q)=>{if(J!=null){if(J.aborted)return H(null);J.addEventListener("abort",()=>{return G=!0,H(null)},{once:!0})}if(Z!=null){if(typeof Z!=="number")throw new TypeError("batchSize must be a number");else if(!Number.isInteger(Z))throw new TypeError("batchSize must be an integer");else if(Z<1)throw new TypeError("batchSize must be at least 1")}C((Q,K)=>{if(Q!=null)return q(Q);H(K)})});function C(H){let q=0,Q=0,K=null;for(let R=0;R<X;++R)E(U());function U(){let R=[],w=!1;return V;function V(N){if(w||G)return N();else if(K)return N();A(function(T,I){if(K!=null)return N();if(T!=null)if(T.name==="MongoCursorExhaustedError")I=null;else if($)Y.push(T);else return K=T,H(T),N();if(I==null){if(w=!0,q<=0){let k=$?dh(Y):K;H(k)}else if(Z&&R.length)W(R,Q++,O);return N()}if(++q,Fq(()=>N()),Z)R.push(I);if(Z&&R.length!==Z){Fq(()=>E(V));return}let u=Z?R:I;function O(k){if(Z)q-=R.length,R=[];else--q;if(k!=null)if($)Y.push(k);else return K=k,H(k);if((w||G)&&q<=0){let m=$?dh(Y):K;return H(m)}Fq(()=>E(V))}W(u,Q++,O)})}}}function W(H,q,Q){let K;try{K=B(H,q)}catch(U){return Q(U)}if(typeof K?.then==="function")K.then(function(){Q(null)},function(U){Q(U||new Error("`eachAsync()` promise rejected without error"))});else Q(null)}};function Dz1(){let F=[],A=null,B=0;return function X(Z){if(A===null&&F.length===0)return A=B++,Z(D);F.push(Z)};function D(){if(F.length!==0)A=B++,F.shift()(D);else A=null}}function dh(F){if(F.length===0)return null;return new Bz1(F)}});var oh=z((bk1,th)=>{/*!
 * Module dependencies.
 */var sF=K1(),ih=c("stream").Readable,Xz1=Aq(),nh=UF(),Zz1=R9(),Bq=B4(),{once:Jz1}=c("events"),ah=c("util");function n2(F){ih.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=F,this._closed=!1;let A=F.model;this._mongooseOptions={},this._transforms=[],this.model=A,this.options={};let B=(D)=>{if(D!=null){if(D instanceof Zz1.skipWrappedFunction){let X=D.args[0];if(X!=null&&(!Array.isArray(X)||X.length)){let Z=new sF('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+ah.inspect(X)+'".');this._markError(Z),this.listeners("error").length>0&&this.emit("error",Z);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(D),this.listeners("error").length>0&&this.emit("error",D);return}if(Object.assign(this.options,F._optionsForExec()),this._transforms=this._transforms.concat(F._transforms.slice()),this.options.transform)this._transforms.push(this.options.transform);if(this.options.batchSize)this.options._populateBatchSize=Math.min(this.options.batchSize,5000);if(F._mongooseOptions._asyncIterator)this._mongooseOptions._asyncIterator=!0;if(A.collection._shouldBufferCommands()&&A.collection.buffer)A.collection.queue.push([()=>lh(F,this)]);else lh(F,this)};A.hooks.execPre("find",F).then(()=>B(null),(D)=>B(D))}ah.inherits(n2,ih);/*!
 * ignore
 */function lh(F,A){try{let B=F.model.collection.find(F._conditions,A.options);A.cursor=B,A.emit("cursor",B)}catch(B){A._markError(B),A.listeners("error").length>0&&A.emit("error",A._error)}}n2.prototype._read=function(){mX(this,(F,A)=>{if(F)return this.emit("error",F);if(!A){this.push(null),this.cursor.close(function(B){if(B)return this.emit("error",B)});return}this.push(A)})};n2.prototype.getDriverCursor=async function F(){if(this.cursor)return this.cursor;return await Jz1(this,"cursor"),this.cursor};Object.defineProperty(n2.prototype,"map",{value:function(F){return this._transforms.push(F),this},enumerable:!0,configurable:!0,writable:!0});n2.prototype._markError=function(F){return this._error=F,this};n2.prototype.close=async function F(){if(typeof arguments[0]==="function")throw new sF("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(A){throw this.listeners("error").length>0&&this.emit("error",A),A}};n2.prototype._destroy=function F(A,B){let D=null;if(!this.cursor)D=new Promise((X)=>{this.once("cursor",X)});else D=Promise.resolve();return D.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,B()}).catch((X)=>{B(X)}),this};n2.prototype.rewind=function(){return rh(this,()=>{this.cursor.rewind()}),this};n2.prototype.next=async function F(){if(typeof arguments[0]==="function")throw new sF("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new sF("Cannot call `next()` on a closed cursor");return new Promise((A,B)=>{mX(this,function(D,X){if(D)return B(D);A(X)})})};n2.prototype.eachAsync=function(F,A){if(typeof arguments[2]==="function")throw new sF("QueryCursor.prototype.eachAsync() no longer accepts a callback");if(typeof A==="function")A={};return A=A||{},Xz1((B)=>mX(this,B),F,A)};n2.prototype.options;n2.prototype.addCursorFlag=function(F,A){return rh(this,()=>{this.cursor.addCursorFlag(F,A)}),this};if(Symbol.asyncIterator!=null)n2.prototype[Symbol.asyncIterator]=function F(){return this._mongooseOptions._asyncIterator=!0,this};function mX(F,A){let B=A;if(B=function(D,X){if(D)return A(D);if(X===null)if(F._mongooseOptions._asyncIterator)return A(null,{done:!0});else return A(null,null);if(F._transforms.length&&X!==null)X=F._transforms.reduce(function(Z,J){return J.call(F,Z)},X);if(F._mongooseOptions._asyncIterator)return A(null,{value:X,done:!1});return A(null,X)},F._error)return Bq(function(){B(F._error)});if(F.skipped)return Bq(()=>B(null,null));if(F.cursor){if(F.query._mongooseOptions.populate&&!F._pop)F._pop=nh.preparePopulationOptionsMQ(F.query,F.query._mongooseOptions),F._pop.__noPromise=!0;if(F.query._mongooseOptions.populate&&F.options._populateBatchSize>1)if(F._batchDocs&&F._batchDocs.length)return hX(F,F._batchDocs.shift(),F._pop,B);else if(F._batchExhausted)return B(null,null);else{F._batchDocs=[],F.cursor.next().then((D)=>{vX.call({ctx:F,callback:B},null,D)},(D)=>{vX.call({ctx:F,callback:B},D)});return}else return F.cursor.next().then((D)=>{if(!D){B(null,null);return}if(!F.query._mongooseOptions.populate)return hX(F,D,null,B);hX(F,D,F._pop,(X,Z)=>{if(X!=null)return B(X);F.query.model.populate(Z,F._pop).then((J)=>B(null,J),(J)=>B(J))})},(D)=>{B(D)})}else F.once("error",A),F.once("cursor",function(D){if(F.removeListener("error",A),D==null){if(F.skipped)return A(null,null);return}mX(F,A)})}/*!
 * ignore
 */function vX(F,A){if(F)return this.callback(F);if(!A)return this.ctx._batchExhausted=!0,ph.call(this);if(this.ctx._batchDocs.push(A),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize)Bq(()=>this.ctx.cursor.next().then((B)=>{vX.call(this,null,B)},(B)=>{vX.call(this,B)}));else ph.call(this)}/*!
 * ignore
 */function ph(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{hX(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},(F)=>{this.callback(F)})}/*!
 * ignore
 */function hX(F,A,B,D){if(F.query._mongooseOptions.lean)return F.model.hooks.execPost("find",F.query,[[A]]).then(()=>D(null,A),(Y)=>D(Y));let{model:X,_fields:Z,_userProvidedFields:J,options:$}=F.query;nh.createModelAndInit(X,A,Z,J,$,B,(Y,E)=>{if(Y!=null)return D(Y);F.model.hooks.execPost("find",F.query,[[E]]).then(()=>D(null,E),(G)=>D(G))})}/*!
 * ignore
 */function rh(F,A){if(F.cursor)return A();F.once("cursor",function(B){if(B==null)return;A()})}th.exports=n2});var Xq=z((yk1,Fv)=>{var Dq=B1();function Yz1(F,A,B){eh(F,A,B,"maxTimeMS")}function $z1(F,A,B){eh(F,A,B,"allowDiskUse")}Fv.exports={applyGlobalMaxTimeMS:Yz1,applyGlobalDiskUse:$z1};function eh(F,A,B,D){if(Dq.hasUserDefinedProperty(F,D))return;if(Dq.hasUserDefinedProperty(A,D))F[D]=A[D];else if(Dq.hasUserDefinedProperty(B,D))F[D]=B[D]}});var Zq=z((hk1,Av)=>{Av.exports=function F(A,B){if(B.readConcern!==void 0)return;if(B?.session?.transaction)return;let D=A.options?.readConcern?.level;if(D!=null)B.readConcern={level:D}}});var Jq=z((vk1,Bv)=>{var Ez1=B1();Bv.exports=function F(A,B){if(B.writeConcern!=null)return;if(B?.session?.transaction)return;let D=A.options.writeConcern??{};if(Ez1.hasOwnKeys(D)){if(B.writeConcern={},!("w"in B)&&D.w!=null)B.writeConcern.w=D.w;if(!("j"in B)&&D.j!=null)B.writeConcern.j=D.j;if(!("wtimeout"in B)&&D.wtimeout!=null)B.writeConcern.wtimeout=D.wtimeout}else{if(!("w"in B)&&D.w!=null)B.w=D.w;if(!("j"in B)&&D.j!=null)B.j=D.j;if(!("wtimeout"in B)&&D.wtimeout!=null)B.wtimeout=D.wtimeout}}});var Zv=z((mk1,Xv)=>{var Dv=OF();Xv.exports=function F(A,B,D){if(!Object.keys(D).some(Dv))return B.castForQuery(null,D,A);let Z=Object.keys(D),J=Z.length;while(J--){let $=Z[J],Y=D[$];if($==="$not"){if(Y&&B&&!B.embeddedSchemaType&&!B.Constructor){let E=Object.keys(Y);if(E.length&&Dv(E[0]))for(let G of Object.keys(Y))Y[G]=B.castForQuery(G,Y[G],A);else D[$]=B.castForQuery($,Y,A);continue}}else D[$]=B.castForQuery($,Y,A)}return D}});var Yv=z((dk1,Jv)=>{var Gz1=/^\d+$/;Jv.exports=function F(A,B,D){let X=A.path(B);if(X!=null)return X;let Z=B.split("."),J="",$=!1;for(let Y of Z){if($&&Gz1.test(Y))continue;if(J=J.length===0?Y:J+"."+Y,X=A.path(J),X?.schema){if(A=X.schema,!$&&X.$isMongooseDocumentArray)$=!0;if(D&&D[J])A=A.discriminators[D[J]]??A;J=""}else if(X?.instance==="Mixed")break}return X}});var Wv=z((ck1,Cv)=>{var Cz1=Zv(),$v=MF(),Ev=Yv(),Wz1=_H(),Hz1=B1();Cv.exports=function F(A){let B=A.options.arrayFilters;if(!Array.isArray(B))return;let D=A.getUpdate(),X=A.schema,Z=Wz1(D),J=X.options.strict;if(A._mongooseOptions.strict!=null)J=A._mongooseOptions.strict;if(A.model?.base.options.strictQuery!=null)J=A.model.base.options.strictQuery;if(X._userProvidedOptions.strictQuery!=null)J=X._userProvidedOptions.strictQuery;if(A._mongooseOptions.strictQuery!=null)J=A._mongooseOptions.strictQuery;Gv(B,X,J,Z,A)};function Gv(F,A,B,D,X){let Z={};for(let J of F){if(J==null)throw new Error(`Got null array filter in ${F}`);let $=Object.keys(J).filter((q)=>J[q]!=null);if($.length===0)continue;let Y=$[0];if(Y==="$and"||Y==="$or"){for(let q of $)Gv(J[q],A,B,D,X);continue}let E=Y.indexOf("."),G=E===-1?Y:Y.substring(0,E);if(D[G]==null)continue;let C=$v(D[G]),W=Ev(A,C,Z),H=W!=null?W.schema:null;if(H?.discriminators!=null&&J[G+"."+H.options.discriminatorKey])H=H.discriminators[J[G+"."+H.options.discriminatorKey]]||H,Z[C]=J[G+"."+H.options.discriminatorKey];for(let q of $){if(D[q]===null)continue;if(Hz1.hasOwnKeys(D)===!1)continue;let Q=q.indexOf("."),K=Q===-1?null:q.substring(Q),U;if(K==null||H==null)U=W;else K=$v(K),U=Ev(H,K,Z);if(U==null){if(!B)return;let R=K==null?C+".0":C+".0"+K;throw new Error(`Could not find path "${R}" in schema`)}if(typeof J[q]==="object")J[q]=Cz1(X,U,J[q]);else J[q]=U.castForQuery(null,J[q])}}}});var dX=z((lk1,Hv)=>{var qz1=Y8(),zz1=o7();/*!
 * ignore
 */Hv.exports=function F(A){if(A==null)return!1;let B=Object.keys(A),D=B.length;if(D===0)return!1;for(let X=0;X<D;++X){let Z=B[X];if(Z.startsWith("+"))continue;if(qz1(A[Z])&&!!A[Z])if(zz1(A[Z]))return F(A[Z]);else return!!A[Z]}return!1}});var zv=z((pk1,qv)=>{qv.exports=function F(A,B){return A===B||B.startsWith(A+".")}});var Vv=z((Vz1)=>{/*!
 * Module dependencies.
 */var Yq=["__proto__","constructor","prototype"],cX=Vz1.clone=function F(A,B){if(A===void 0||A===null)return A;if(Array.isArray(A))return Vz1.cloneArray(A,B);if(A.constructor){if(/ObjectI[dD]$/.test(A.constructor.name))return typeof A.clone=="function"?A.clone():new A.constructor(A.id);if(A.constructor.name==="ReadPreference")return new A.constructor(A.mode,F(A.tags,B));if(A._bsontype=="Binary"&&A.buffer&&A.value)return typeof A.clone=="function"?A.clone():new A.constructor(A.value(!0),A.sub_type);if(A.constructor.name==="Date"||A.constructor.name==="Function")return new A.constructor(+A);if(A.constructor.name==="RegExp")return new RegExp(A);if(A.constructor.name==="Buffer")return Buffer.from(A)}if(Kz1(A))return Vz1.cloneObject(A,B);if(A.valueOf)return A.valueOf()};/*!
 * ignore
 */Vz1.cloneObject=function F(A,B){let D=B&&B.minimize,X={},Z=Object.keys(A),J=Z.length,$=!1,Y,E="",G=0;for(G=0;G<J;++G){if(E=Z[G],Yq.indexOf(E)!==-1)continue;if(Y=cX(A[E],B),!D||typeof Y!=="undefined")$||($=!0),X[E]=Y}return D?$&&X:X};Vz1.cloneArray=function F(A,B){let D=[],X=A.length,Z=0;for(;Z<X;Z++)D.push(cX(A[Z],B));return D};Vz1.merge=function F(A,B){let D=Object.keys(B);for(let X of D){if(Yq.indexOf(X)!==-1)continue;if(typeof A[X]==="undefined")A[X]=B[X];else if(Vz1.isObject(B[X]))F(A[X],B[X]);else A[X]=B[X]}};Vz1.mergeClone=function F(A,B){let D=Object.keys(B);for(let X of D){if(Yq.indexOf(X)!==-1)continue;if(typeof A[X]==="undefined")A[X]=cX(B[X]);else if(Vz1.isObject(B[X]))F(A[X],B[X]);else A[X]=cX(B[X])}};Vz1.readPref=function F(A){switch(A){case"p":A="primary";break;case"pp":A="primaryPreferred";break;case"s":A="secondary";break;case"sp":A="secondaryPreferred";break;case"n":A="nearest";break}return A};Vz1.readConcern=function F(A){if(typeof A==="string"){switch(A){case"l":A="local";break;case"a":A="available";break;case"m":A="majority";break;case"lz":A="linearizable";break;case"s":A="snapshot";break}A={level:A}}return A};var Qz1=Object.prototype.toString;Vz1.toString=function(F){return Qz1.call(F)};var Kz1=Vz1.isObject=function(F){return Vz1.toString(F)=="[object Object]"};Vz1.keys=Object.keys;Vz1.create=typeof Object.create=="function"?Object.create:Uz1;function Uz1(F){if(arguments.length>1)throw new Error("Adding properties is not supported");function A(){}return A.prototype=F,new A}Vz1.inherits=function(F,A){F.prototype=Vz1.create(A.prototype),F.prototype.constructor=F};Vz1.isArgumentsObject=function(F){return Object.prototype.toString.call(F)==="[object Arguments]"}});var wv=z((Lv)=>{var J0=Lv;J0.distinct=function(F){if(F._fields&&Object.keys(F._fields).length>0)return"field selection and slice";let A=Object.keys(J0.distinct),B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};J0.distinct.select=J0.distinct.slice=J0.distinct.sort=J0.distinct.limit=J0.distinct.skip=J0.distinct.batchSize=J0.distinct.hint=J0.distinct.tailable=!0;J0.findOneAndUpdate=J0.findOneAndDelete=function(F){let A=Object.keys(J0.findOneAndUpdate),B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};J0.findOneAndUpdate.limit=J0.findOneAndUpdate.skip=J0.findOneAndUpdate.batchSize=J0.findOneAndUpdate.tailable=!0;J0.findOneAndReplace=function(F){let A=Object.keys(J0.findOneAndUpdate),B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};J0.countDocuments=function(F){if(F._fields&&Object.keys(F._fields).length>0)return"field selection and slice";let A=Object.keys(J0.countDocuments),B;return A.every(function(D){if(F.options[D])return B=D,!1;return!0}),B};J0.countDocuments.slice=J0.countDocuments.batchSize=J0.countDocuments.tailable=!0});var Eq=z((kz1,Rv)=>{kz1.isNode=typeof process!="undefined"&&typeof Rv=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;kz1.isMongo=!kz1.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";kz1.isBrowser=!kz1.isNode&&!kz1.isMongo&&typeof window!="undefined";kz1.type=kz1.isNode?"node":kz1.isMongo?"mongo":kz1.isBrowser?"browser":"unknown"});var rF=z((Iv,Nv)=>{var Gq=["find","findOne","updateMany","updateOne","replaceOne","countDocuments","estimatedDocumentCount","distinct","findOneAndDelete","findOneAndReplace","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function Cq(){}for(let F=0,A=Gq.length;F<A;++F){let B=Gq[F];Cq.prototype[B]=Oz1(B)}Nv.exports=Iv=Cq;Cq.methods=Gq;function Oz1(F){return function(){throw new Error("collection."+F+" not implemented")}}});var kv=z((jv,Tv)=>{var Sz1=rF();class Mv extends Sz1{constructor(F){super();this.collection=F,this.collectionName=F.collectionName}async find(F,A){return this.collection.find(F,A).toArray()}async findOne(F,A){return this.collection.findOne(F,A)}async countDocuments(F,A){return this.collection.countDocuments(F,A)}async estimatedDocumentCount(F,A){return this.collection.estimatedDocumentCount(F,A)}async distinct(F,A,B){return this.collection.distinct(F,A,B)}async updateMany(F,A,B){return this.collection.updateMany(F,A,B)}async updateOne(F,A,B){return this.collection.updateOne(F,A,B)}async replaceOne(F,A,B){return this.collection.replaceOne(F,A,B)}async deleteOne(F,A){return this.collection.deleteOne(F,A)}async deleteMany(F,A){return this.collection.deleteMany(F,A)}async findOneAndDelete(F,A){return this.collection.findOneAndDelete(F,A)}async findOneAndUpdate(F,A,B){return this.collection.findOneAndUpdate(F,A,B)}async findOneAndReplace(F,A,B){return this.collection.findOneAndReplace(F,A,B)}findCursor(F,A){return this.collection.find(F,A)}}Tv.exports=jv=Mv});var Ov=z((sk1,uv)=>{var Wq=Eq();if(Wq.type=="unknown")throw new Error("Unknown environment");uv.exports=Wq.isNode?kv():Wq.isMongo?rF():rF()});var Qq=z((_v,fv)=>{var xz1=c("assert"),xv=c("util"),_1=Vv(),a3=xv.debuglog("mquery");function y(F,A){if(!(this instanceof y))return new y(F,A);let B=this.constructor.prototype;if(this.op=B.op||void 0,this.options=Object.assign({},B.options),this._conditions=B._conditions?_1.clone(B._conditions):{},this._fields=B._fields?_1.clone(B._fields):void 0,this._updateDoc=B._updateDoc?_1.clone(B._updateDoc):void 0,this._path=B._path||void 0,this._distinctDoc=B._distinctDoc||void 0,this._collection=B._collection||void 0,this._traceFunction=B._traceFunction||void 0,A)this.setOptions(A);if(F)this.find(F)}y.prototype.toConstructor=function F(){function A(D,X){if(!(this instanceof A))return new A(D,X);y.call(this,D,X)}_1.inherits(A,y);let B=A.prototype;return B.options={},B.setOptions(this.options),B.op=this.op,B._conditions=_1.clone(this._conditions),B._fields=_1.clone(this._fields),B._updateDoc=_1.clone(this._updateDoc),B._path=this._path,B._distinctDoc=this._distinctDoc,B._collection=this._collection,B._traceFunction=this._traceFunction,A};y.prototype.setOptions=function(F){if(!(F&&_1.isObject(F)))return this;let A=_1.keys(F),B;for(let D=0;D<A.length;++D)if(B=A[D],typeof this[B]=="function"){let X=Array.isArray(F[B])?F[B]:[F[B]];this[B].apply(this,X)}else this.options[B]=F[B];return this};y.prototype.collection=function F(A){return this._collection=new y.Collection(A),this};y.prototype.collation=function(F){return this.options.collation=F,this};y.prototype.$where=function(F){return this._conditions.$where=F,this};y.prototype.where=function(){if(!arguments.length)return this;if(!this.op)this.op="find";let F=typeof arguments[0];if(F=="string"){if(this._path=arguments[0],arguments.length===2)this._conditions[this._path]=arguments[1];return this}if(F=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};y.prototype.equals=function F(A){this._ensurePath("equals");let B=this._path;return this._conditions[B]=A,this};y.prototype.eq=function F(A){this._ensurePath("eq");let B=this._path;return this._conditions[B]=A,this};y.prototype.or=function F(A){let B=this._conditions.$or||(this._conditions.$or=[]);if(!Array.isArray(A))A=[A];return B.push.apply(B,A),this};y.prototype.nor=function F(A){let B=this._conditions.$nor||(this._conditions.$nor=[]);if(!Array.isArray(A))A=[A];return B.push.apply(B,A),this};y.prototype.and=function F(A){let B=this._conditions.$and||(this._conditions.$and=[]);if(!Array.isArray(A))A=[A];return B.push.apply(B,A),this};/*!
 * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
 *
 *     Thing.where('type').nin(array)
 */"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(F){y.prototype[F]=function(){let A,B;if(arguments.length===1)this._ensurePath(F),B=arguments[0],A=this._path;else B=arguments[1],A=arguments[0];let D=this._conditions[A]===null||typeof this._conditions[A]==="object"?this._conditions[A]:this._conditions[A]={};return D["$"+F]=B,this}});y.prototype.mod=function(){let F,A;if(arguments.length===1)this._ensurePath("mod"),F=arguments[0],A=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),F=[arguments[0],arguments[1]],A=this._path;else if(arguments.length===3)F=[arguments[1],arguments[2]],A=arguments[0];else F=arguments[1],A=arguments[0];let B=this._conditions[A]||(this._conditions[A]={});return B.$mod=F,this};y.prototype.exists=function(){let F,A;if(arguments.length===0)this._ensurePath("exists"),F=this._path,A=!0;else if(arguments.length===1)if(typeof arguments[0]==="boolean")this._ensurePath("exists"),F=this._path,A=arguments[0];else F=arguments[0],A=!0;else if(arguments.length===2)F=arguments[0],A=arguments[1];let B=this._conditions[F]||(this._conditions[F]={});return B.$exists=A,this};y.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let F,A,B;if(typeof arguments[0]==="function")this._ensurePath("elemMatch"),A=this._path,F=arguments[0];else if(_1.isObject(arguments[0]))this._ensurePath("elemMatch"),A=this._path,B=arguments[0];else if(typeof arguments[1]==="function")A=arguments[0],F=arguments[1];else if(arguments[1]&&_1.isObject(arguments[1]))A=arguments[0],B=arguments[1];else throw new TypeError("Invalid argument");if(F)B=new y,F(B),B=B._conditions;let D=this._conditions[A]||(this._conditions[A]={});return D.$elemMatch=B,this};y.prototype.within=function F(){if(this._ensurePath("within"),this._geoComparison="$geoWithin",arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);else if(2<arguments.length)return this.polygon.apply(this,arguments);let A=arguments[0];if(!A)throw new TypeError("Invalid argument");if(A.center)return this.circle(A);if(A.box)return this.box.apply(this,A.box);if(A.polygon)return this.polygon.apply(this,A.polygon);if(A.type&&A.coordinates)return this.geometry(A);throw new TypeError("Invalid argument")};y.prototype.box=function(){let F,A;if(arguments.length===3)F=arguments[0],A=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),F=this._path,A=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let B=this._conditions[F]||(this._conditions[F]={});return B[this._geoComparison||"$geoWithin"]={$box:A},this};y.prototype.polygon=function(){let F,A;if(typeof arguments[0]=="string")F=Array.from(arguments),A=F.shift();else this._ensurePath("polygon"),A=this._path,F=Array.from(arguments);let B=this._conditions[A]||(this._conditions[A]={});return B[this._geoComparison||"$geoWithin"]={$polygon:F},this};y.prototype.circle=function(){let F,A;if(arguments.length===1)this._ensurePath("circle"),F=this._path,A=arguments[0];else if(arguments.length===2)F=arguments[0],A=arguments[1];else throw new TypeError("Invalid argument");if(!(("radius"in A)&&A.center))throw new Error("center and radius are required");let B=this._conditions[F]||(this._conditions[F]={}),D=A.spherical?"$centerSphere":"$center",X=this._geoComparison||"$geoWithin";if(B[X]={},B[X][D]=[A.center,A.radius],"unique"in A)B[X].$uniqueDocs=!!A.unique;return this};y.prototype.near=function F(){let A,B;if(this._geoComparison="$near",arguments.length===0)return this;else if(arguments.length===1)this._ensurePath("near"),A=this._path,B=arguments[0];else if(arguments.length===2)A=arguments[0],B=arguments[1];else throw new TypeError("Invalid argument");if(!B.center)throw new Error("center is required");let D=this._conditions[A]||(this._conditions[A]={}),X=B.spherical?"$nearSphere":"$near";if(Array.isArray(B.center)){D[X]=B.center;let Z="maxDistance"in B?B.maxDistance:null;if(Z!=null)D.$maxDistance=Z;if(B.minDistance!=null)D.$minDistance=B.minDistance}else{if(B.center.type!="Point"||!Array.isArray(B.center.coordinates))throw new Error(xv.format("Invalid GeoJSON specified for %s",X));if(D[X]={$geometry:B.center},"maxDistance"in B)D[X].$maxDistance=B.maxDistance;if("minDistance"in B)D[X].$minDistance=B.minDistance}return this};y.prototype.intersects=function F(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let A=arguments[0];if(A!=null&&A.type&&A.coordinates)return this.geometry(A);throw new TypeError("Invalid argument")};y.prototype.geometry=function F(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let A,B;if(arguments.length===1)this._ensurePath("geometry"),B=this._path,A=arguments[0];else throw new TypeError("Invalid argument");if(!(A.type&&Array.isArray(A.coordinates)))throw new TypeError("Invalid argument");let D=this._conditions[B]||(this._conditions[B]={});return D[this._geoComparison]={$geometry:A},this};y.prototype.select=function F(){let A=arguments[0];if(!A)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let B=this._fields||(this._fields={}),D=typeof A,X,Z;if((D=="string"||_1.isArgumentsObject(A))&&typeof A.length=="number"||Array.isArray(A)){if(D=="string")A=A.split(/\s+/);for(X=0,Z=A.length;X<Z;++X){let J=A[X];if(!J)continue;let $=J[0]=="-"?0:1;if($===0)J=J.substring(1);B[J]=$}return this}if(_1.isObject(A)){let J=_1.keys(A);for(X=0;X<J.length;++X)B[J[X]]=A[J[X]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};y.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let F,A;if(arguments.length===1){let D=arguments[0];if(typeof D==="object"&&!Array.isArray(D)){let X=Object.keys(D),Z=X.length;for(let J=0;J<Z;++J)this.slice(X[J],D[X[J]]);return this}this._ensurePath("slice"),F=this._path,A=arguments[0]}else if(arguments.length===2)if(typeof arguments[0]==="number")this._ensurePath("slice"),F=this._path,A=[arguments[0],arguments[1]];else F=arguments[0],A=arguments[1];else if(arguments.length===3)F=arguments[0],A=[arguments[1],arguments[2]];let B=this._fields||(this._fields={});return B[F]={$slice:A},this};y.prototype.sort=function(F){if(!F)return this;let A,B,D;this._validate("sort");let X=typeof F;if(Array.isArray(F)){B=F.length;for(A=0;A<F.length;++A){if(!Array.isArray(F[A]))throw new Error("Invalid sort() argument, must be array of arrays");_z1(this.options,F[A][0],F[A][1])}return this}if(arguments.length===1&&X=="string"){F=F.split(/\s+/),B=F.length;for(A=0;A<B;++A){if(D=F[A],!D)continue;let Z=D[0]=="-"?-1:1;if(Z===-1)D=D.substring(1);Sv(this.options,D,Z)}return this}if(_1.isObject(F)){let Z=_1.keys(F);for(A=0;A<Z.length;++A)D=Z[A],Sv(this.options,D,F[D]);return this}if(typeof Map!=="undefined"&&F instanceof Map)return fz1(this.options,F),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};/*!
 * @ignore
 */var Hq={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function Sv(F,A,B){if(Array.isArray(F.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let D;if(B&&B.$meta){D=F.sort||(F.sort={}),D[A]={$meta:B.$meta};return}D=F.sort||(F.sort={});let X=String(B||1).toLowerCase();if(X=Hq[X],!X)throw new TypeError("Invalid sort value: { "+A+": "+B+" }");D[A]=X}function _z1(F,A,B){if(F.sort=F.sort||[],!Array.isArray(F.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let D=String(B||1).toLowerCase();if(D=Hq[D],!D)throw new TypeError("Invalid sort value: [ "+A+", "+B+" ]");F.sort.push([A,D])}function fz1(F,A){if(F.sort=F.sort||new Map,!(F.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");A.forEach(function(B,D){let X=String(B||1).toLowerCase();if(X=Hq[X],!X)throw new TypeError("Invalid sort value: < "+D+": "+B+" >");F.sort.set(D,X)})}/*!
 * limit, skip, batchSize, comment
 *
 * Sets these associated options.
 *
 *     query.comment('feed query');
 */["limit","skip","batchSize","comment"].forEach(function(F){y.prototype[F]=function(A){return this._validate(F),this.options[F]=A,this}});y.prototype.maxTime=y.prototype.maxTimeMS=function(F){return this._validate("maxTime"),this.options.maxTimeMS=F,this};y.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let F=arguments[0];if(_1.isObject(F)){let A=this.options.hint||(this.options.hint={});for(let B in F)A[B]=F[B];return this}if(typeof F==="string")return this.options.hint=F,this;throw new TypeError("Invalid hint. "+F)};y.prototype.j=function F(A){return this.options.j=A,this};y.prototype.slaveOk=function(F){return this.options.slaveOk=arguments.length?!!F:!0,this};y.prototype.read=y.prototype.setReadPreference=function(F){if(arguments.length>1&&!y.prototype.read.deprecationWarningIssued)console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),y.prototype.read.deprecationWarningIssued=!0;return this.options.readPreference=_1.readPref(F),this};y.prototype.readConcern=y.prototype.r=function(F){return this.options.readConcern=_1.readConcern(F),this};y.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};y.prototype.writeConcern=y.prototype.w=function F(A){if(typeof A==="object"){if(typeof A.j!=="undefined")this.options.j=A.j;if(typeof A.w!=="undefined")this.options.w=A.w;if(typeof A.wtimeout!=="undefined")this.options.wtimeout=A.wtimeout}else this.options.w=A==="m"?"majority":A;return this};y.prototype.wtimeout=y.prototype.wTimeout=function F(A){return this.options.wtimeout=A,this};y.prototype.merge=function(F){if(!F)return this;if(!y.canMerge(F))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");if(F instanceof y){if(F._conditions)_1.merge(this._conditions,F._conditions);if(F._fields)this._fields||(this._fields={}),_1.merge(this._fields,F._fields);if(F.options)this.options||(this.options={}),_1.merge(this.options,F.options);if(F._updateDoc)this._updateDoc||(this._updateDoc={}),_1.mergeClone(this._updateDoc,F._updateDoc);if(F._distinctDoc)this._distinctDoc=F._distinctDoc;return this}return _1.merge(this._conditions,F),this};y.prototype.find=function(F){if(this.op="find",y.canMerge(F))this.merge(F);return this};y.prototype._find=async function F(){let A=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return a3("find",this._collection.collectionName,A,B),this._collection.find(A,B)};y.prototype.cursor=function F(A){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(A);let B=this._conditions,D=this._optionsForExec();if(this.$useProjection)D.projection=this._fieldsForExec();else D.fields=this._fieldsForExec();return a3("findCursor",this._collection.collectionName,B,D),this._collection.findCursor(B,D)};y.prototype.findOne=function(F){if(this.op="findOne",y.canMerge(F))this.merge(F);return this};y.prototype._findOne=async function F(){let A=this._conditions,B=this._optionsForExec();if(this.$useProjection)B.projection=this._fieldsForExec();else B.fields=this._fieldsForExec();return a3("findOne",this._collection.collectionName,A,B),this._collection.findOne(A,B)};y.prototype.countDocuments=function(F){if(this.op="countDocuments",this._validate(),y.canMerge(F))this.merge(F);return this};y.prototype._countDocuments=async function F(){let A=this._conditions,B=this._optionsForExec();return a3("countDocuments",this._collection.collectionName,A,B),this._collection.countDocuments(A,B)};y.prototype.estimatedDocumentCount=function(){return this.op="estimatedDocumentCount",this._validate(),this};y.prototype._estimatedDocumentCount=async function F(){let A=this._conditions,B=this._optionsForExec();return a3("estimatedDocumentCount",this._collection.collectionName,A,B),this._collection.estimatedDocumentCount(A,B)};y.prototype.distinct=function(F,A){if(this.op="distinct",this._validate(),!A&&typeof F==="string")A=F,F=void 0;if(typeof A=="string")this._distinctDoc=A;if(y.canMerge(F))this.merge(F);return this};y.prototype._distinct=async function F(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let A=this._conditions,B=this._optionsForExec();return this._collection.distinct(this._distinctDoc,A,B)};y.prototype.updateMany=function F(A,B,D){return qq(this,"updateMany",A,B,D)};y.prototype._updateMany=async function(){return zq(this,"updateMany")};y.prototype.updateOne=function F(A,B,D){return qq(this,"updateOne",A,B,D)};y.prototype._updateOne=async function(){return zq(this,"updateOne")};y.prototype.replaceOne=function F(A,B,D){return this.setOptions({overwrite:!0}),qq(this,"replaceOne",A,B,D)};y.prototype._replaceOne=async function(){return zq(this,"replaceOne")};/*!
 * Internal helper for updateMany, updateOne
 */function qq(F,A,B,D,X){if(F.op=A,y.canMerge(B))F.merge(B);if(D)F._mergeUpdate(D);if(_1.isObject(X))F.setOptions(X);return F}async function zq(F,A){let B=F._optionsForExec(),D=F._conditions,X=F._updateForExec();return a3(A,F._collection.collectionName,D,X,B),F._collection[A](D,X,B)}y.prototype.deleteOne=function(F){if(this.op="deleteOne",y.canMerge(F))this.merge(F);return this};y.prototype._deleteOne=async function(){let F=this._optionsForExec();delete F.justOne;let A=this._conditions;return a3("deleteOne",this._collection.collectionName,A,F),this._collection.deleteOne(A,F)};y.prototype.deleteMany=function(F){if(this.op="deleteMany",y.canMerge(F))this.merge(F);return this};y.prototype._deleteMany=async function(){let F=this._optionsForExec();delete F.justOne;let A=this._conditions;return this._collection.deleteMany(A,F)};y.prototype.findOneAndUpdate=function(F,A,B){if(this.op="findOneAndUpdate",this._validate(),y.canMerge(F))this.merge(F);if(A)this._mergeUpdate(A);return B&&this.setOptions(B),this};y.prototype._findOneAndUpdate=async function(){let F=this._conditions,A=this._updateForExec(),B=this._optionsForExec();return this._collection.findOneAndUpdate(F,A,B)};y.prototype.findOneAndReplace=function(F,A,B){if(this.op="findOneAndReplace",this._validate(),y.canMerge(F))this.merge(F);if(A)this._updateDoc=A,this.options=this.options||{},this.options.overwrite=!0;return B&&this.setOptions(B),this};y.prototype._findOneAndReplace=async function(){let F=this._conditions,A=this._updateForExec(),B=this._optionsForExec();return a3("findOneAndReplace",this._collection.collectionName,F,A,B),this._collection.findOneAndReplace(F,A,B)};y.prototype.findOneAndDelete=function(F,A){if(this.op="findOneAndDelete",this._validate(),y.canMerge(F))this.merge(F);return A&&this.setOptions(A),this};y.prototype._findOneAndDelete=async function(){let F=this._optionsForExec(),A=this._conditions;return a3("findOneAndDelete",this._collection.collectionName,A,F),this._collection.findOneAndDelete(A,F)};y.prototype.setTraceFunction=function(F){return this._traceFunction=F,this};y.prototype.exec=async function F(A){if(typeof A==="string")this.op=A;xz1.ok(this.op,"Missing query type: (find, etc)");let B="_"+this.op;if(typeof this[B]!=="function")throw new TypeError(`this[${B}] is not a function`);return this[B]()};y.prototype.then=async function(F,A){return this.exec().then(F,A)};y.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let F=this._conditions,A=this._optionsForExec();if(this.$useProjection)A.projection=this._fieldsForExec();else A.fields=this._fieldsForExec();return this._collection.findCursor(F,A)};y.prototype.selected=function F(){return!!(this._fields&&Object.keys(this._fields).length>0)};y.prototype.selectedInclusively=function F(){if(!this._fields)return!1;let A=Object.keys(this._fields);if(A.length===0)return!1;for(let B=0;B<A.length;++B){let D=A[B];if(this._fields[D]===0)return!1;if(this._fields[D]&&typeof this._fields[D]==="object"&&this._fields[D].$meta)return!1}return!0};y.prototype.selectedExclusively=function F(){if(!this._fields)return!1;let A=Object.keys(this._fields);if(A.length===0)return!1;for(let B=0;B<A.length;++B){let D=A[B];if(this._fields[D]===0)return!0}return!1};y.prototype._mergeUpdate=function(F){if(!this._updateDoc)this._updateDoc={};if(F instanceof y){if(F._updateDoc)_1.mergeClone(this._updateDoc,F._updateDoc)}else _1.mergeClone(this._updateDoc,F)};y.prototype._optionsForExec=function(){return _1.clone(this.options)};y.prototype._fieldsForExec=function(){return _1.clone(this._fields)};y.prototype._updateForExec=function(){let F=this._updateDoc==null?{}:_1.clone(this._updateDoc),A=_1.keys(F),B={};for(let D of A){if(this.options.overwrite){B[D]=F[D];continue}if(D[0]!=="$"){if(!B.$set)if(F.$set)B.$set=F.$set;else B.$set={};if(B.$set[D]=F[D],!~A.indexOf("$set"))A.push("$set")}else if(D==="$set"){if(!B.$set)B[D]=F[D]}else B[D]=F[D]}return this._compiledUpdate=B,B};y.prototype._ensurePath=function(F){if(!this._path){let A=F+"() must be used after where() when called with these arguments";throw new Error(A)}};/*!
 * Permissions
 */y.permissions=wv();y._isPermitted=function(F,A){let B=y.permissions[A];if(!B)return!0;return B[F]!==!0};y.prototype._validate=function(F){let A,B;if(F===void 0){if(B=y.permissions[this.op],typeof B!="function")return!0;A=B(this)}else if(!y._isPermitted(F,this.op))A=F;if(A)throw new Error(A+" cannot be used with "+this.op)};y.canMerge=function(F){return F instanceof y||_1.isObject(F)};y.setGlobalTraceFunction=function(F){y.traceFunction=F};/*!
 * Exports.
 */y.utils=_1;y.env=Eq();y.Collection=Ov();y.BaseCollection=rF();fv.exports=_v=y});var Kq=z((rk1,gv)=>{gv.exports=function F(A,B){if(typeof A==="string")A=A.split(/\s+/);if(!Array.isArray(A)&&Object.prototype.toString.call(A)!=="[object Arguments]")return A;let X=A.length,Z={};for(let J=0;J<X;++J){let $=A[J];if(!$)continue;let Y=$[0]=="-"?0:1;if(!B&&Y===0)$=$.substring(1);Z[$]=Y}return Z}});var hv=z((tk1,yv)=>{yv.exports=function F(A,B){let D=Object.keys(A).map((X)=>Object.keys(A[X])).reduce((X,Z)=>X.concat(Z),[]);return B.filter((X)=>{return bv(X,D)})};function bv(F,A){let B=Object.keys(F)[0];if(B==="$and"||B==="$or"){if(!Array.isArray(F[B]))return!1;return F[B].find((Z)=>bv(Z,A))!=null}let D=B.indexOf("."),X=D===-1?B:B.slice(0,D);return A.find((Z)=>Z.includes("$["+X+"]"))!=null}});var pX=z((ok1,vv)=>{/*!
 * ignore
 */vv.exports=function F(A){if(typeof A!=="object"||A===null)return!1;let B=Object.keys(A),D=B.length;for(let X=0;X<D;++X)if(B[X][0]==="$")return!0;return!1}});var Uq=z((ek1,mv)=>{var gz1=pX(),{trustedSymbol:bz1}=e7();mv.exports=function F(A){if(A==null||typeof A!=="object")return A;if(Array.isArray(A)){for(let D of A)F(D);return A}let B=Object.keys(A);for(let D of B){let X=A[D];if(X?.[bz1])continue;if(D==="$and"||D==="$or"){F(X);continue}if(gz1(X)){let Z=Object.keys(X);if(Z.length===1&&Z[0]==="$eq")continue;A[D]={$eq:A[D]}}}return A}});var cv=z((Fu1,dv)=>{dv.exports=function F(A){if(A==null)return;let B=Object.keys(A);for(let D=0;D<B.length;++D)if(typeof A[B[D]]==="string")A[B[D]]=1}});var iv=z((Au1,pv)=>{var yz1=$8(),hz1=dX();/*!
 * ignore
 */pv.exports=function F(A,B,D){if(D==null)return;let X=Object.keys(D);if(B=B||{},hz1(A))for(let Z of X){if(!lv(B,Z))A[Z]=1;else if(B[Z]===0)delete A[Z];let J=D[Z]?.refPath;if(typeof J==="string"){if(!lv(B,J))A[J]=1;else if(B[J]===0)delete A[J]}}else if(yz1(A))for(let Z of X){if(B[Z]==null)delete A[Z];let J=D[Z]?.refPath;if(typeof J==="string"&&B[J]==null)delete A[J]}};/*!
 * ignore
 */function lv(F,A){let B=A.split("."),D=B.length,X=B[0];for(let Z=1;Z<D;++Z){if(F[X]!=null||F[X+".$"]!=null)return!0;X+="."+B[Z]}return F[X]!=null||F[X+".$"]!=null}});var rv=z((Bu1,sv)=>{/*!
 * Module dependencies.
 */var nv=I9(),vz1=MF(),av=uD().flatten;sv.exports=async function F(A,B,D,X){let Z=Object.keys(D||{}),J={},$={},Y={},E={},G=Z.length,C=!1,W,H;for(let N=0;N<G;++N)if(Z[N].startsWith("$")){if(C=!0,Z[N]==="$push"||Z[N]==="$addToSet"){let O=Object.keys(D[Z[N]]);for(let k=0;k<O.length;++k)if(W=D[Z[N]][O[k]],W?.$each)E[O[k]]=(E[O[k]]||[]).concat(W.$each);else E[O[k]]=(E[O[k]]||[]).concat([W]);continue}let T=av(D[Z[N]],null,null,B),I=Object.keys(T),u=I.length;for(let O=0;O<u;++O){let k=vz1(I[O]);if(H=Z[N],k.includes("$"))continue;if(H==="$set"||H==="$setOnInsert"||H==="$pull"||H==="$pullAll")$[k]=T[I[O]],Y[k]=H==="$pull"||H==="$pullAll";else if(H==="$unset")$[k]=void 0;J[k]=!0}}if(!C)$=av(D,null,null,B),J=Object.keys($);let q=Object.keys($),Q=q.length,K=[],U=[],R=[],w=A;for(let N=0;N<Q;++N){let T=$[q[N]],I=B._getSchema(q[N]);if(I==null)continue;if(I.instance==="Mixed"&&I.path!==q[N])continue;if(T&&Array.isArray(T.$in))T.$in.forEach((u,O)=>{K.push(I.doValidate(u,w,{updateValidator:!0}).catch((k)=>{k.path=q[O]+".$in."+O,U.push(k)}))});else{if(Y[q[N]]&&I.$isMongooseArray)continue;if(I.$isMongooseDocumentArrayElement&&T?.$__!=null)R.push(q[N]),K.push(I.doValidate(T,w,{updateValidator:!0}).catch((u)=>{if(u.errors)for(let O of Object.keys(u.errors)){let k=u.errors[O];k.path=q[N]+"."+O,U.push(k)}else u.path=q[N],U.push(u)}));else{if(R.find((O)=>q[N].startsWith(O+".")))continue;if(I.$isSingleNested)R.push(q[N]);K.push(I.doValidate(T,w,{updateValidator:!0}).catch((O)=>{if(I.schema!=null&&I.schema.options.storeSubdocValidationError===!1&&O instanceof nv)return;if(O)O.path=q[N],U.push(O)}))}}}let V=Object.keys(E);for(let N of V){let T=B._getSchema(N);if(T&&T.$isMongooseDocumentArray)K.push(T.doValidate(E[N],X?.context==="query"?A:null).catch((I)=>{I.path=N,U.push(I)}));else{T=B._getSchema(N+".0");for(let I of E[N])K.push(T.doValidate(I,X?.context==="query"?A:null,{updateValidator:!0}).catch((u)=>{u.path=N,U.push(u)}))}}if(await Promise.all(K),U.length){let N=new nv(null);for(let T of U)N.addError(T.path,T);throw N}}});var sX=z((Du1,Gm)=>{/*!
 * Module dependencies.
 */var oF=K2(),mz1=KD(),Lq=R9(),S0=K1(),s3=ND(),tv=oh(),ov=I9(),{applyGlobalMaxTimeMS:eF,applyGlobalDiskUse:FA}=Xq(),dz1=qW(),cz1=Zq(),lz1=Jq(),pz1=x9(),iz1=Wv(),nX=kF(),nz1=dH(),a2=C0(),az1=M6(),AA=UF(),sz1=i6().internalToObjectOptions,rz1=$8(),tz1=dX(),oz1=xD(),ev=zv(),Am=C6(),aX=Qq(),ez1=Kq(),FQ1=hv(),AQ1=Uq(),BQ1=cv(),DQ1=iv(),Bm=lH(),iX=L9(),XQ1=rv(),tF=c("util"),k1=B1(),ZQ1=jF().queryMiddlewareFunctions,JQ1=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),YQ1=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function b(F,A,B,D){if(!this._mongooseOptions)this._mongooseOptions={};A=A||{},this._transforms=[],this._hooks=new Lq,this._execCount=0;let X=Object.keys(A);for(let J of X)this._mongooseOptions[J]=A[J];if(D)this.mongooseCollection=D;if(B)this.model=B,this.schema=B.schema;if(this.model?._mapreduce)this.lean();if(aX.call(this,null,A),D)this.collection(D);if(F)this.find(F);this.options=this.options||{},this.$useProjection=!0;let Z=this?.schema?.options?.collation||null;if(Z!=null)this.options.collation=Z}function Dm(F){if(F==null)return!0;if(typeof F!=="object")return!0;if(k1.hasOwnKeys(F)===!1)return!0;for(let A of["$and","$or","$nor"])if(Array.isArray(F[A])){if(F[A].length===0||F[A].every((B)=>Dm(B)))return!0}return!1}function O8(F,A){if(A?.requireFilter&&Dm(F))throw new Error("Empty or invalid filter not allowed with requireFilter enabled")}/*!
 * inherit mquery
 */b.prototype=new aX;b.prototype.constructor=b;b.prototype.count=void 0;b.prototype.findOneAndRemove=void 0;b.base=aX.prototype;/*!
 * Overwrite mquery's `_distinct`, because Mongoose uses that name
 * to store the field to apply distinct on.
 */Object.defineProperty(b.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});b.use$geoWithin=aX.use$geoWithin;b.prototype.toConstructor=function F(){let A=this.model,B=this.mongooseCollection,D=function(J,$){if(!(this instanceof D))return new D(J,$);this._mongooseOptions=a2(X._mongooseOptions),b.call(this,J,$||null,A,B)};tF.inherits(D,A.Query);let X=D.prototype;X.options={};let Z=Object.assign({},this.options);if(Z.sort!=null)X.sort(Z.sort),delete Z.sort;return X.setOptions(Z),X.op=this.op,X._conditions=a2(this._conditions),X._fields=a2(this._fields),X._update=a2(this._update,{flattenDecimals:!1}),X._path=this._path,X._distinct=this._distinct,X._collection=this._collection,X._mongooseOptions=this._mongooseOptions,D};b.prototype.clone=function(){let F=this.model,A=this.mongooseCollection,B=new this.model.Query({},{},F,A),D=Object.assign({},this.options);if(D.sort!=null)B.sort(D.sort),delete D.sort;return B.setOptions(D),B.op=this.op,B._conditions=a2(this._conditions),B._fields=a2(this._fields),B._update=a2(this._update,{flattenDecimals:!1}),B._path=this._path,B._distinct=this._distinct,B._collection=this._collection,B._mongooseOptions=this._mongooseOptions,B};b.prototype.slice=function(...F){if(F.length===0)return this;this._validate("slice");let A,B;if(F.length===1){let X=F[0];if(typeof X==="object"&&!Array.isArray(X)){let Z=Object.keys(X),J=Z.length;for(let $=0;$<J;++$)this.slice(Z[$],X[Z[$]]);return this}this._ensurePath("slice"),A=this._path,B=F[0]}else if(F.length===2)if(typeof F[0]==="number")this._ensurePath("slice"),A=this._path,B=[F[0],F[1]];else A=F[0],B=F[1];else if(F.length===3)A=F[0],B=[F[1],F[2]];let D={};return D[A]={$slice:B},this.select(D),this};/*!
 * ignore
 */var $Q1=new Set(ZQ1);b.prototype._validateOp=function(){if(this.op!=null&&!$Q1.has(this.op))this.error(new Error('Query has invalid `op`: "'+this.op+'"'));if(this.op!=="estimatedDocumentCount"&&this._conditions==null)throw new s3(this._conditions,"filter",this.op)};b.prototype.mod=function(){let F,A;if(arguments.length===1)this._ensurePath("mod"),F=arguments[0],A=this._path;else if(arguments.length===2&&!Array.isArray(arguments[1]))this._ensurePath("mod"),F=[arguments[0],arguments[1]],A=this._path;else if(arguments.length===3)F=[arguments[1],arguments[2]],A=arguments[0];else F=arguments[1],A=arguments[0];let B=this._conditions[A]||(this._conditions[A]={});return B.$mod=F,this};b.prototype.limit=function F(A){if(this._validate("limit"),typeof A==="string")try{A=nX(A)}catch{throw new oF("Number",A,"limit")}return this.options.limit=A,this};b.prototype.skip=function F(A){if(this._validate("skip"),typeof A==="string")try{A=nX(A)}catch{throw new oF("Number",A,"skip")}return this.options.skip=A,this};b.prototype.projection=function(F){if(arguments.length===0)return this._fields;return this._fields={},this._userProvidedFields={},this.select(F),this._fields};b.prototype.select=function F(){let A=arguments[0];if(!A)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let B=this._fields||(this._fields={}),D=this._userProvidedFields||(this._userProvidedFields={}),X=void 0;if(this.model!=null&&k1.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))X=this.model.db.options.sanitizeProjection;else if(this.model!=null&&k1.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))X=this.model.base.options.sanitizeProjection;else X=this._mongooseOptions.sanitizeProjection;function Z(J){return typeof J==="string"&&X?J=1:J}if(A=ez1(A,!0),k1.isObject(A)){if(this.selectedInclusively())Object.entries(A).forEach(([J,$])=>{if($){if(B["-"+J]!=null)delete B["-"+J];B[J]=D[J]=Z($)}else Object.keys(D).forEach((Y)=>{if(ev(J,Y))delete B[Y],delete D[Y]})});else if(this.selectedExclusively())Object.entries(A).forEach(([J,$])=>{if(!$){if(B["+"+J]!=null)delete B["+"+J];B[J]=D[J]=Z($)}else Object.keys(D).forEach((Y)=>{if(ev(J,Y))delete B[Y],delete D[Y]})});else{let J=Object.keys(A);for(let $=0;$<J.length;++$){let Y=A[J[$]],E=J[$];B[E]=Z(Y),D[E]=Z(Y)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};b.prototype.schemaLevelProjections=function F(A){return this._mongooseOptions.schemaLevelProjections=A,this};b.prototype.sanitizeProjection=function F(A){return this._mongooseOptions.sanitizeProjection=A,this};b.prototype.read=function F(A,B){if(typeof A==="string")A=dz1(A),this.options.readPreference={mode:A,tags:B};else this.options.readPreference=A;return this};b.prototype.toString=function F(){if(this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove")return`${this.model.modelName}.${this.op}(${tF.inspect(this._conditions)})`;if(this.op==="distinct")return`${this.model.modelName}.distinct('${this._distinct}', ${tF.inspect(this._conditions)})`;if(this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne")return`${this.model.modelName}.${this.op}(${tF.inspect(this._conditions)}, ${tF.inspect(this._update)})`;return`${this.model.modelName}.${this.op}()`};b.prototype.session=function F(A){if(A==null)delete this.options.session;return this.options.session=A,this};b.prototype.writeConcern=function F(A){if(A==null)return delete this.options.writeConcern,this;return this.options.writeConcern=A,this};b.prototype.w=function F(A){if(A==null)delete this.options.w;if(this.options.writeConcern!=null)this.options.writeConcern.w=A;else this.options.w=A;return this};b.prototype.j=function F(A){if(A==null)delete this.options.j;if(this.options.writeConcern!=null)this.options.writeConcern.j=A;else this.options.j=A;return this};b.prototype.wtimeout=function F(A){if(A==null)delete this.options.wtimeout;if(this.options.writeConcern!=null)this.options.writeConcern.wtimeout=A;else this.options.wtimeout=A;return this};b.prototype.getOptions=function(){return this.options};b.prototype.setOptions=function(F,A){if(A){if(this._mongooseOptions=F&&a2(F)||{},this.options=F||{},"populate"in F)this.populate(this._mongooseOptions);return this}if(F==null)return this;if(typeof F!=="object")throw new Error('Options must be an object, got "'+F+'"');if(F=Object.assign({},F),Array.isArray(F.populate)){let B=F.populate;delete F.populate;let D=B.length;for(let X=0;X<D;++X)this.populate(B[X])}if("setDefaultsOnInsert"in F)this._mongooseOptions.setDefaultsOnInsert=F.setDefaultsOnInsert,delete F.setDefaultsOnInsert;if("overwriteDiscriminatorKey"in F)this._mongooseOptions.overwriteDiscriminatorKey=F.overwriteDiscriminatorKey,delete F.overwriteDiscriminatorKey;if("overwriteImmutable"in F)this._mongooseOptions.overwriteImmutable=F.overwriteImmutable,delete F.overwriteImmutable;if("updatePipeline"in F)this._mongooseOptions.updatePipeline=F.updatePipeline,delete F.updatePipeline;if("sanitizeProjection"in F){if(F.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection)BQ1(this._fields);this._mongooseOptions.sanitizeProjection=F.sanitizeProjection,delete F.sanitizeProjection}if("sanitizeFilter"in F)this._mongooseOptions.sanitizeFilter=F.sanitizeFilter,delete F.sanitizeFilter;if("timestamps"in F)this._mongooseOptions.timestamps=F.timestamps,delete F.timestamps;if("defaults"in F)this._mongooseOptions.defaults=F.defaults;if("translateAliases"in F)this._mongooseOptions.translateAliases=F.translateAliases,delete F.translateAliases;if("schemaLevelProjections"in F)this._mongooseOptions.schemaLevelProjections=F.schemaLevelProjections,delete F.schemaLevelProjections;if(F.lean==null&&this.schema&&"lean"in this.schema.options)this._mongooseOptions.lean=this.schema.options.lean;if(typeof F.limit==="string")try{F.limit=nX(F.limit)}catch{throw new oF("Number",F.limit,"limit")}if(typeof F.skip==="string")try{F.skip=nX(F.skip)}catch{throw new oF("Number",F.skip,"skip")}for(let B of Object.keys(F))if(JQ1.has(B)){let D=Array.isArray(F[B])?F[B]:[F[B]];this[B].apply(this,D)}else this.options[B]=F[B];return this};b.prototype.explain=function F(A){if(arguments.length===0)this.options.explain=!0;else if(A===!1)delete this.options.explain;else this.options.explain=A;return this};b.prototype.allowDiskUse=function(F){if(arguments.length===0)this.options.allowDiskUse=!0;else if(F===!1)delete this.options.allowDiskUse;else this.options.allowDiskUse=F;return this};b.prototype.maxTimeMS=function(F){return this.options.maxTimeMS=F,this};b.prototype.getFilter=function(){return this._conditions};b.prototype.getQuery=function(){return this._conditions};b.prototype.setQuery=function(F){this._conditions=F};b.prototype.getUpdate=function(){return this._update};b.prototype.setUpdate=function(F){this._update=F};b.prototype._fieldsForExec=function(){if(this._fields==null)return null;if(k1.hasOwnKeys(this._fields)===!1)return null;return a2(this._fields)};b.prototype._updateForExec=function(){let F=a2(this._update,{transform:!1,depopulate:!0}),A=Object.keys(F),B=A.length,D={};while(B--){let X=A[B];if(X[0]!=="$"){if(!D.$set)if(F.$set)D.$set=F.$set;else D.$set={};if(D.$set[X]=F[X],A.splice(B,1),!~A.indexOf("$set"))A.push("$set")}else if(X==="$set"){if(!D.$set)D[X]=F[X]}else D[X]=F[X]}return D};b.prototype._optionsForExec=function(F){let A=a2(this.options);if(delete A.populate,F=F||this.model,!F)return A;cz1(F.schema,A),lz1(F.schema,A);let B=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();if(!Object.hasOwn(this.options,"session")&&B?.session!=null)A.session=B.session;let D=F?.schema?.options?.read;if(!("readPreference"in A)&&D)A.readPreference=D;if(A.upsert!==void 0)A.upsert=!!A.upsert;if(A.writeConcern){if(A.j)A.writeConcern.j=A.j,delete A.j;if(A.w)A.writeConcern.w=A.w,delete A.w;if(A.wtimeout)A.writeConcern.wtimeout=A.wtimeout,delete A.wtimeout}if(this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let X=this._fieldsForExec();if(X!=null)A.projection=X}if(this._mongooseOptions.populate){if(A.readPreference){for(let X of Object.values(this._mongooseOptions.populate))if(X.options?.readPreference===void 0){if(!X.options)X.options={};X.options.readPreference=A.readPreference}}if(A.readConcern){for(let X of Object.values(this._mongooseOptions.populate))if(X.options?.readConcern===void 0){if(!X.options)X.options={};X.options.readConcern=A.readConcern}}}return A};b.prototype.lean=function(F){return this._mongooseOptions.lean=arguments.length?F:!0,this};b.prototype.set=function(F,A){if(typeof F==="object"){let B=Object.keys(F);for(let D of B)this.set(D,F[D]);return this}if(this._update=this._update||{},F in this._update)delete this._update[F];return this._update.$set=this._update.$set||{},this._update.$set[F]=A,this};b.prototype.get=function F(A){let B=this._update;if(B==null)return;let D=B.$set;if(D==null)return B[A];if(k1.hasUserDefinedProperty(B,A))return B[A];if(k1.hasUserDefinedProperty(D,A))return D[A];return};b.prototype.error=function F(A){if(arguments.length===0)return this._error;return this._error=A,this};b.prototype._unsetCastError=function F(){if(this._error==null||!(this._error instanceof oF))return;return this.error(null)};b.prototype.mongooseOptions=function(F){if(arguments.length>0)this._mongooseOptions=F;return this._mongooseOptions};b.prototype._castConditions=function(){let F=void 0;if(this.model?.db.options?.sanitizeFilter!=null)F=this.model.db.options.sanitizeFilter;else if(this.model?.base.options?.sanitizeFilter!=null)F=this.model.base.options.sanitizeFilter;else F=this._mongooseOptions.sanitizeFilter;if(F)AQ1(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(A){this.error(A)}};/*!
 * ignore
 */function Xm(F){try{iz1(F)}catch(A){F.error(A)}}b.prototype._find=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let A=this._mongooseOptions,B=this._userProvidedFields||{},D=this.model.db.options,X=this.model.base.options;eF(this.options,D,X),FA(this.options,D,X);let Z={session:this?.options?.session||null,lean:A.lean||null},J=this._optionsForExec(),$=this._conditions,Y=J.projection,E=await this.mongooseCollection.find($,J);if(J.explain)return E.explain();let G=await E.toArray();if(G.length===0)return G;if(!A.populate){let W=this.schema.options.versionKey;if(A.lean?.versionKey===!1&&W)G.forEach((H)=>{if(W in H)delete H[W]});return A.lean?Jm(this.model.schema,G,null,Z):this._completeMany(G,Y,B,Z)}let C=AA.preparePopulationOptionsMQ(this,A);if(A.lean)return this.model.populate(G,C);return G=await this._completeMany(G,Y,B,Z),await this.model.populate(G,C),G};b.prototype.find=function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new S0("Query.prototype.find() no longer accepts a callback");if(this.op="find",r3(F))this.merge(F),BA(this);else if(F!=null)this.error(new s3(F,"filter","find"));return this};b.prototype.merge=function(F){if(!F){if(F===null)this._conditions=null;return this}this._conditions=this._conditions??{};let A={overwrite:!0};if(F instanceof b){if(F._conditions){if(A.omit={},this._conditions&&this._conditions.$and&&F._conditions.$and)A.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(F._conditions.$and);if(this._conditions&&this._conditions.$or&&F._conditions.$or)A.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(F._conditions.$or);k1.merge(this._conditions,F._conditions,A)}if(F._fields)this._fields||(this._fields={}),k1.merge(this._fields,F._fields,A);if(F.options)this.options||(this.options={}),k1.merge(this.options,F.options,A);if(F._update)this._update||(this._update={}),k1.mergeClone(this._update,F._update);if(F._distinct)this._distinct=F._distinct;return k1.merge(this._mongooseOptions,F._mongooseOptions),this}else if(this.model!=null&&F instanceof this.model.base.Types.ObjectId)return k1.merge(this._conditions,{_id:F},A),this;else if(F?.$__)F=F.toObject(sz1);if(A.omit={},Array.isArray(F.$and)){if(A.omit.$and=!0,!this._conditions)this._conditions={};this._conditions.$and=(this._conditions.$and||[]).concat(F.$and.map((B)=>k1.isPOJO(B)?k1.merge({},B):B))}if(Array.isArray(F.$or)){if(A.omit.$or=!0,!this._conditions)this._conditions={};this._conditions.$or=(this._conditions.$or||[]).concat(F.$or.map((B)=>k1.isPOJO(B)?k1.merge({},B):B))}return k1.merge(this._conditions,F,A),this};b.prototype.collation=function(F){if(this.options==null)this.options={};return this.options.collation=F,this};b.prototype._completeOne=function(F,A,B,D){if(!F&&!this.options.includeResultMetadata)return D(null,null);let X=this.model,Z=this._userProvidedFields||{},J=this._mongooseOptions,$=this.options;if(!$.lean&&J.lean)$.lean=J.lean;if($.explain)return D(null,F);if(!J.populate){let E=this.schema.options.versionKey;if(J.lean?.versionKey===!1&&E){if(E in F)delete F[E]}return J.lean?wq(X.schema,F,null,A,$,D):Fm(X,F,A,$,B,Z,null,D)}let Y=AA.preparePopulationOptionsMQ(this,this._mongooseOptions);if(J.lean)return X.populate(F,Y).then((E)=>{wq(X.schema,E,null,A,$,D)},(E)=>{D(E)});Fm(X,F,A,$,B,Z,[],(E,G)=>{if(E!=null)return D(E);X.populate(G,Y).then((C)=>{D(null,C)},(C)=>{D(C)})})};b.prototype._completeMany=async function F(A,B,D,X){let Z=this.model;return Promise.all(A.map((J)=>new Promise(($,Y)=>{let E=J;if(J=AA.createModel(Z,J,B,D),X.session!=null)J.$session(X.session);J.$init(E,X,(G)=>{if(G!=null)return Y(G);$(J)})})))};b.prototype._findOne=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();let A=this.model.db.options,B=this.model.base.options;eF(this.options,A,B),FA(this.options,A,B);let D=this._optionsForExec(),X=await this.mongooseCollection.findOne(this._conditions,D);return new Promise((Z,J)=>{this._completeOne(X,null,D.projection,($,Y)=>{if($)return J($);Z(Y)})})};b.prototype.findOne=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new S0("Query.prototype.findOne() no longer accepts a callback");if(this.op="findOne",B)this.setOptions(B);if(A)this.select(A);if(r3(F))this.merge(F),BA(this);else if(F!=null)this.error(new s3(F,"filter","findOne"));return this};b.prototype._countDocuments=async function F(){this._applyTranslateAliases();try{this.cast(this.model)}catch(Z){this.error(Z)}if(this.error())throw this.error();let A=this.model.db.options,B=this.model.base.options;eF(this.options,A,B),FA(this.options,A,B);let D=this._optionsForExec(),X=this._conditions;return this.mongooseCollection.countDocuments(X,D)};/*!
 * If `translateAliases` option is set, call `Model.translateAliases()`
 * on the following query properties: filter, projection, update, distinct.
 */b.prototype._applyTranslateAliases=function F(){let A=!1;if("translateAliases"in this._mongooseOptions)A=this._mongooseOptions.translateAliases;else if(this.model?.schema?._userProvidedOptions?.translateAliases!=null)A=this.model.schema._userProvidedOptions.translateAliases;else if(this.model?.base?.options?.translateAliases!=null)A=this.model.base.options.translateAliases;if(!A)return;if(this.model?.schema?.aliases&&k1.hasOwnKeys(this.model.schema.aliases)){if(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null)this._distinct=this.model.schema.aliases[this._distinct]}};b.prototype._estimatedDocumentCount=async function F(){if(this.error())throw this.error();let A=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(A)};b.prototype.estimatedDocumentCount=function(F){if(typeof F==="function"||typeof arguments[1]==="function")throw new S0("Query.prototype.estimatedDocumentCount() no longer accepts a callback");if(this.op="estimatedDocumentCount",F!=null)this.setOptions(F);return this};b.prototype.countDocuments=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new S0("Query.prototype.countDocuments() no longer accepts a callback");if(this.op="countDocuments",r3(F))this.merge(F);if(A!=null)this.setOptions(A);return this};b.prototype.__distinct=async function F(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();let A=this.model.db.options,B=this.model.base.options;eF(this.options,A,B),FA(this.options,A,B);let D=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,D)};b.prototype.distinct=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new S0("Query.prototype.distinct() no longer accepts a callback");if(this.op="distinct",r3(A))this.merge(A),BA(this);else if(A!=null)this.error(new s3(A,"filter","distinct"));if(F!=null)this._distinct=F;if(B!=null)this.setOptions(B);return this};b.prototype.sort=function(F,A){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(A!=null&&typeof A!=="object")throw new Error("sort() options argument must be an object or nullish");if(this.options.sort==null)this.options.sort={};if(A?.override)this.options.sort={};let B=this.options.sort;if(typeof F==="string"){let D=F.indexOf(" ")===-1?[F]:F.split(" ");for(let X of D){let Z=X[0]=="-"?-1:1;if(Z===-1)X=X.slice(1);if(iX.has(X))continue;B[X]=Z}}else if(Array.isArray(F))for(let D of F){if(!Array.isArray(D))throw new TypeError("Invalid sort() argument, must be array of arrays");let X=""+D[0];if(iX.has(X))continue;B[X]=Vq(D[1],X)}else if(typeof F==="object"&&F!=null&&!(F instanceof Map))for(let D of Object.keys(F)){if(iX.has(D))continue;B[D]=Vq(F[D],D)}else if(F instanceof Map)for(let D of F.keys()){if(D=""+D,iX.has(D))continue;B[D]=Vq(F.get(D),D)}else if(F!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};/*!
 * Convert sort values
 */function Vq(F,A){if(F===1||F==="asc"||F==="ascending")return 1;if(F===-1||F==="desc"||F==="descending")return-1;if(F?.$meta!=null)return{$meta:F.$meta};throw new TypeError("Invalid sort value: { "+A+": "+F+" }")}b.prototype.deleteOne=function F(A,B){if(typeof A==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new S0("Query.prototype.deleteOne() no longer accepts a callback");if(this.op="deleteOne",this.setOptions(B),r3(A))this.merge(A),BA(this);else if(A!=null)this.error(new s3(A,"filter","deleteOne"));return this};b.prototype._deleteOne=async function F(){if(this._applyTranslateAliases(),this._castConditions(),O8(this._conditions,this.options),this.error()!=null)throw this.error();let A=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,A)};b.prototype.deleteMany=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new S0("Query.prototype.deleteMany() no longer accepts a callback");if(this.setOptions(A),this.op="deleteMany",r3(F))this.merge(F),BA(this);else if(F!=null)this.error(new s3(F,"filter","deleteMany"));return this};b.prototype._deleteMany=async function F(){if(this._applyTranslateAliases(),this._castConditions(),O8(this._conditions,this.options),this.error()!=null)throw this.error();let A=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,A)};function Fm(F,A,B,D,X,Z,J,$){if(D.includeResultMetadata&&A==null)return Y(null),null;AA.createModelAndInit(F,A,X,Z,D,J,Y);function Y(E,G){if(E)return $(E);if(D.includeResultMetadata){if(A&&G){if(D.session!=null)G.$session(D.session);B.value=G}else B.value=null;return $(null,B)}if(D.session!=null)G.$session(D.session);$(null,G)}}function BA(F){if(!F?.model?.schema)return;let A=F.model.schema;if(A?.discriminatorMapping&&!A.discriminatorMapping.isRoot)F._conditions[A.discriminatorMapping.key]=A.discriminatorMapping.value}b.prototype.findOneAndUpdate=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[3]==="function")throw new S0("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validate(),arguments.length){case 2:B=void 0;break;case 1:A=F,F=B=void 0;break}if(r3(F))this.merge(F);else if(F!=null)this.error(new s3(F,"filter","findOneAndUpdate"));if(B=B?a2(B):{},B.projection)this.select(B.projection),delete B.projection;if(B.fields)this.select(B.fields),delete B.fields;let D=this?.model?.base?.options?.returnOriginal;if(B.new==null&&B.returnDocument==null&&B.returnOriginal==null&&D!=null)B.returnOriginal=D;let X=this?.model?.base?.options?.updatePipeline;if(B.updatePipeline==null&&X!=null)B.updatePipeline=X;if(this.setOptions(B),A)this._mergeUpdate(A);return this};b.prototype._findOneAndUpdate=async function F(){if(this._applyTranslateAliases(),this._castConditions(),O8(this._conditions,this.options),Xm(this),this.error())throw this.error();let A=this.model.db.options,B=this.model.base.options;if(eF(this.options,A,B),FA(this.options,A,B),"strict"in this.options)this._mongooseOptions.strict=this.options.strict;let D=this._optionsForExec(this.model);Zm(D),this._update=this._castUpdate(this._update);let X=Object.assign({},D,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=Bm(this._conditions,this.model.schema,this._update,X),!this._update||k1.hasOwnKeys(this._update)===!1)if(D.upsert){let Y=a2(this._update);delete Y._id,this._update={$set:Y}}else return this._execCount=0,await this._findOne();else if(this._update instanceof Error)throw this._update;else if(this._update.$set&&k1.hasOwnKeys(this._update.$set)===!1)delete this._update.$set;if(Rq(this,"runValidators",!1))await this.validate(this._update,D,!1);if(this._update.toBSON)this._update=this._update.toBSON();let J=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,D);for(let Y of this._transforms)J=Y(J);let $=!D.includeResultMetadata?J:J.value;return new Promise((Y,E)=>{this._completeOne($,J,D.projection,(G,C)=>{if(G)return E(G);Y(C)})})};b.prototype.findOneAndDelete=function(F,A){if(typeof F==="function"||typeof A==="function"||typeof arguments[2]==="function")throw new S0("Query.prototype.findOneAndDelete() no longer accepts a callback");if(this.op="findOneAndDelete",this._validate(),r3(F))this.merge(F);return A&&this.setOptions(A),this};b.prototype._findOneAndDelete=async function F(){if(this._applyTranslateAliases(),this._castConditions(),O8(this._conditions,this.options),this.error()!=null)throw this.error();let A=this.options.includeResultMetadata,B=this._conditions,D=this._optionsForExec(this.model),X=await this.mongooseCollection.findOneAndDelete(B,D);for(let J of this._transforms)X=J(X);let Z=!A?X:X.value;return new Promise((J,$)=>{this._completeOne(Z,X,D.projection,(Y,E)=>{if(Y)return $(Y);J(E)})})};b.prototype.findOneAndReplace=function(F,A,B){if(typeof F==="function"||typeof A==="function"||typeof B==="function"||typeof arguments[4]==="function")throw new S0("Query.prototype.findOneAndReplace() no longer accepts a callback");if(this.op="findOneAndReplace",this._validate(),r3(F))this.merge(F);else if(F!=null)this.error(new s3(F,"filter","findOneAndReplace"));if(A!=null)this._mergeUpdate(A);B=B||{};let D=this?.model?.base?.options?.returnOriginal;if(B.new==null&&B.returnDocument==null&&B.returnOriginal==null&&D!=null)B.returnOriginal=D;return this.setOptions(B),this};b.prototype._findOneAndReplace=async function F(){if(this._applyTranslateAliases(),this._castConditions(),O8(this._conditions,this.options),this.error()!=null)throw this.error();if("strict"in this.options)this._mongooseOptions.strict=this.options.strict,delete this.options.strict;let A=this._conditions,B=this._optionsForExec();Zm(B);let D=this.options.includeResultMetadata,X={skipId:!0};if("strict"in this._mongooseOptions)X.strict=this._mongooseOptions.strict;let Z=Rq(this,"runValidators",!1);try{let Y=new this.model(this._update,null,X);if(Z)await Y.validate();else if(Y.$__.validationError)throw Y.$__.validationError;this._update=Y.toBSON()}catch(Y){if(Y instanceof ov)throw Y;let E=new ov;throw E.errors[Y.path]=Y,E}let J=await this.mongooseCollection.findOneAndReplace(A,this._update,B);for(let Y of this._transforms)J=Y(J);let $=!D?J:J.value;return new Promise((Y,E)=>{this._completeOne($,J,B.projection,(G,C)=>{if(G)return E(G);Y(C)})})};b.prototype.findById=function(F,A,B){return this.findOne({_id:F},A,B)};b.prototype.findByIdAndUpdate=function(F,A,B){return this.findOneAndUpdate({_id:F},A,B)};b.prototype.findByIdAndDelete=function(F,A){return this.findOneAndDelete({_id:F},A)};function Zm(F){if("new"in F)F.returnDocument=F.new?"after":"before",delete F.new;if("returnOriginal"in F)F.returnDocument=F.returnOriginal?"before":"after",delete F.returnOriginal;if(typeof F.returnDocument==="string")F.returnOriginal=F.returnDocument==="before"}function Rq(F,A,B){let D=F._optionsForExec(F.model);if(A in D)return D[A];if(A in F.model.base.options)return F.model.base.options[A];return B}/*!
 * ignore
 */function wq(F,A,B,D,X,Z){if(X.lean&&typeof X.lean.transform==="function"){X.lean.transform(A);for(let J=0;J<F.childSchemas.length;J++){let $=B?B+"."+F.childSchemas[J].model.path:F.childSchemas[J].model.path,Y=F.childSchemas[J].schema,E=Am.get($,A);if(E==null)continue;if(Array.isArray(E))for(let G=0;G<E.length;G++)X.lean.transform(E[G]);else X.lean.transform(E);wq(Y,E,$,D,X)}if(Z)return Z(null,A);else return}if(X.includeResultMetadata)return Z(null,D);return Z(null,A)}/*!
 * ignore
 */function Jm(F,A,B,D){if(D.lean&&typeof D.lean.transform==="function"){for(let X of A)D.lean.transform(X);for(let X=0;X<F.childSchemas.length;X++){let Z=B?B+"."+F.childSchemas[X].model.path:F.childSchemas[X].model.path,J=F.childSchemas[X].schema,$=Am.get(Z,A);if($==null)continue;$=$.flat();for(let Y=0;Y<$.length;Y++)D.lean.transform($[Y]);Jm(J,$,Z,D)}}return A}b.prototype._mergeUpdate=function(F){if(!this._mongooseOptions.updatePipeline&&Array.isArray(F))throw new S0("Cannot pass an array to query updates unless the `updatePipeline` option is set.");if(!this._update)this._update=Array.isArray(F)?[]:{};if(F==null||typeof F==="object"&&k1.hasOwnKeys(F)===!1)return;if(F instanceof b){if(Array.isArray(this._update))throw new S0("Cannot mix array and object updates");if(F._update)k1.mergeClone(this._update,F._update)}else if(Array.isArray(F)){if(!Array.isArray(this._update))if(this._update==null||k1.isEmptyObject(this._update))this._update=[];else throw new S0("Cannot mix array and object updates");this._update=this._update.concat(F)}else{if(Array.isArray(this._update))throw new S0("Cannot mix array and object updates");k1.mergeClone(this._update,F)}};/*!
 * ignore
 */async function Pq(F){if(this._applyTranslateAliases(),this._castConditions(),O8(this._conditions,this.options),Xm(this),this.error()!=null)throw this.error();let A=this._conditions,B=this._optionsForExec(this.model);this._update=a2(this._update,B);let D=F==="replaceOne";if(D)this._update=new this.model(this._update,null,{skipId:!0});else{if(this._update=this._castUpdate(this._update),this._update==null||k1.hasOwnKeys(this._update)===!1)return{acknowledged:!1};let Z=Object.assign({},B,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=Bm(this._conditions,this.model.schema,this._update,Z)}if(Array.isArray(B.arrayFilters))B.arrayFilters=FQ1(this._update,B.arrayFilters);if(Rq(this,"runValidators",!1))await this.validate(this._update,B,D);if(this._update.toBSON)this._update=this._update.toBSON();return this.mongooseCollection[F](A,this._update,B)}b.prototype.validate=async function F(A,B,D){if(typeof arguments[3]==="function")throw new S0("Query.prototype.validate() no longer accepts a callback");if(await $m(this,"validate"),D)await A.$validate();else await XQ1(this,this.model.schema,A,B);await Ym(this,null,null,"validate")};b.prototype._updateMany=async function F(){return Pq.call(this,"updateMany")};b.prototype._updateOne=async function F(){return Pq.call(this,"updateOne")};b.prototype._replaceOne=async function F(){return Pq.call(this,"replaceOne")};b.prototype.updateMany=function(F,A,B,D){if(typeof B==="function")D=B,B=void 0;else if(typeof A==="function")D=A,A=F,F={},B=void 0;else if(typeof F==="function")D=F,F=void 0,A=void 0,B=void 0;else if(typeof F==="object"&&!A&&!B&&!D)A=F,F=void 0,B=void 0,D=void 0;return Iq(this,"updateMany",F,A,B,D)};b.prototype.updateOne=function(F,A,B,D){if(typeof B==="function")D=B,B=void 0;else if(typeof A==="function")D=A,A=F,F={},B=void 0;else if(typeof F==="function")D=F,F=void 0,A=void 0,B=void 0;else if(typeof F==="object"&&!A&&!B&&!D)A=F,F=void 0,B=void 0,D=void 0;return Iq(this,"updateOne",F,A,B,D)};b.prototype.replaceOne=function(F,A,B,D){if(typeof B==="function")D=B,B=void 0;else if(typeof A==="function")D=A,A=F,F={},B=void 0;else if(typeof F==="function")D=F,F=void 0,A=void 0,B=void 0;else if(typeof F==="object"&&!A&&!B&&!D)A=F,F=void 0,B=void 0,D=void 0;return Iq(this,"replaceOne",F,A,B,D)};function Iq(F,A,B,D,X,Z){if(F.op=A,D=D||{},X!=null){if("strict"in X)F._mongooseOptions.strict=X.strict}if(!(B instanceof b)&&B!=null&&B.toString()!=="[object Object]")F.error(new s3(B,"filter",A));else F.merge(B);let J=F?.model?.base?.options?.updatePipeline;if(J!=null&&X?.updatePipeline==null)X=X||{},X.updatePipeline=J;if(k1.isObject(X))F.setOptions(X);if(F._mergeUpdate(D),Z)return F.exec(Z),F;return F}b.prototype.transform=function(F){return this._transforms.push(F),this};b.prototype.orFail=function(F){return this.transform((A)=>{switch(this.op){case"find":if(A.length===0)throw u8(F,this);break;case"findOne":if(A==null)throw u8(F,this);break;case"replaceOne":case"updateMany":case"updateOne":if(A?.matchedCount===0)throw u8(F,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&A!=null&&A.value==null)throw u8(F,this);if(!this.options.includeResultMetadata&&A==null)throw u8(F,this);break;case"deleteMany":case"deleteOne":if(A.deletedCount===0)throw u8(F,this);break;default:break}return A}),this};function u8(F,A){if(typeof F==="function")F=F.call(A);if(F==null)F=new mz1(A.getQuery(),A.model.modelName);return F}b.prototype.isPathSelectedInclusive=function(F){return oz1(this._fields,F)};b.prototype.exec=async function F(A){if(typeof A==="function"||arguments.length>=2&&typeof arguments[1]==="function")throw new S0("Query.prototype.exec() no longer accepts a callback");if(this._validateOp(),typeof A==="string")this.op=A;if(this.op==null)throw new S0("Query must have `op` before executing");if(this.model==null)throw new S0("Query must have an associated model before executing");let B=YQ1.get(this.op);if(!B)throw new S0('Query has invalid `op`: "'+this.op+'"');if(this.options?.sort&&typeof this.options.sort==="object"&&Object.hasOwn(this.options.sort,""))throw new Error('Invalid field "" passed to sort()');if(this._execCount>0){let J=this.toString();if(J.length>60)J=J.slice(0,60)+"...";throw new S0("Query was already executed: "+J)}this._execCount++;let D=null;try{await this._hooks.execPre("exec",this,[])}catch(J){if(J instanceof Lq.skipWrappedFunction)D=J;else throw J}let X,Z=null;try{await $m(this),X=D?D.args[0]:await this[B]();for(let J of this._transforms)X=J(X)}catch(J){if(J instanceof Lq.skipWrappedFunction)X=J.args[0];else Z=J;Z=this.model.schema._transformDuplicateKeyError(Z)}return X=await Ym(this,X,Z),await this._hooks.execPost("exec",this,[]),X};/*!
 * ignore
 */function Ym(F,A,B,D){if(F._queryMiddleware==null){if(B!=null)throw B;return A}let X=B?{error:B}:{};return F._queryMiddleware.execPost(D||F.op,F,[A],X).then((Z)=>{return Z[0]})}/*!
 * ignore
 */function $m(F,A){if(F._queryMiddleware==null)return;return F._queryMiddleware.execPre(A||F.op,F,[])}b.prototype.then=function(F,A){return this.exec().then(F,A)};b.prototype.catch=function(F){return this.exec().then(null,F)};b.prototype.finally=function(F){return this.exec().finally(F)};b.prototype[Symbol.toStringTag]=function F(){return`Query { ${this.op} }`};b.prototype.pre=function(F){return this._hooks.pre("exec",F),this};b.prototype.post=function(F){return this._hooks.post("exec",F),this};b.prototype._castUpdate=function F(A){let B=this.schema,D=B.options.discriminatorKey,X=B._baseSchema||B;if(this._mongooseOptions.overwriteDiscriminatorKey&&A[D]!=null&&X.discriminators){let J=Object.values(X.discriminators).find(($)=>$.discriminatorMapping.value===A[D]);if(J!=null)B=J}let Z;if("upsert"in this.options)Z=this.options.upsert;return nz1(B,A,{strict:this._mongooseOptions.strict,upsert:Z,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};b.prototype.populate=function(...F){if(!F.some(Boolean))return this;let A=k1.populate.apply(null,F),B=this._mongooseOptions;if(B.lean!=null){let X=B.lean;for(let Z of A)if(Z?.options?.lean==null)Z.options=Z.options||{},Z.options.lean=X}if(!k1.isObject(B.populate))B.populate={};let D=B.populate;for(let X of A){let Z=X.path;if(D[Z]?.populate&&X.populate)X.populate=D[Z].populate.concat(X.populate);D[X.path]=X}return this};b.prototype.getPopulatedPaths=function F(){let A=this._mongooseOptions.populate||{},B=Object.keys(A);for(let D of Object.keys(A)){let X=A[D];if(!Array.isArray(X.populate))continue;Em(B,X.populate,D+".")}return B};/*!
 * ignore
 */function Em(F,A,B){for(let D of A){if(F.push(B+D.path),!Array.isArray(D.populate))continue;Em(F,D.populate,B+D.path+".")}}b.prototype.cast=function(F,A){A||(A=this._conditions),F=F||this.model;let B=F.schema.options.discriminatorKey;if(A!=null&&Object.hasOwn(A,B))F=az1(F.discriminators,A[B])||F;let D={upsert:this.options?.upsert};if(this.options){if("strict"in this.options)D.strict=this.options.strict;if("strictQuery"in this.options)D.strictQuery=this.options.strictQuery}if("sanitizeFilter"in this._mongooseOptions)D.sanitizeFilter=this._mongooseOptions.sanitizeFilter;try{return pz1(F.schema,A,D,this)}catch(X){if(typeof X.setModel==="function")X.setModel(F);throw X}};b.prototype._castFields=function F(A){let B,D,X,Z,J;if(A){X=Object.keys(A),D=[];for(let $=0;$<X.length;++$)if(Z=X[$],A[Z].$elemMatch)B||(B={}),B[Z]=A[Z],D.push(Z)}if(B){try{J=this.cast(this.model,B)}catch($){return $}for(let $=0;$<D.length;++$)Z=D[$],A[Z]=J[Z]}return A};b.prototype._applyPaths=function F(){if(!this.model)return;this._fields=this._fields||{};let A=void 0;if(this.model!=null&&k1.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection"))A=this.model.db.options.sanitizeProjection;else if(this.model!=null&&k1.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection"))A=this.model.base.options.sanitizeProjection;else A=this._mongooseOptions.sanitizeProjection;if(this._mongooseOptions.schemaLevelProjections??!0)AA.applyPaths(this._fields,this.model.schema,A);let D=!0;if("selectPopulatedPaths"in this.model.base.options)D=this.model.base.options.selectPopulatedPaths;if("selectPopulatedPaths"in this.model.schema.options)D=this.model.schema.options.selectPopulatedPaths;if(D)DQ1(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};b.prototype.cursor=function F(A){if(A)this.setOptions(A);try{this.cast(this.model)}catch(B){return new tv(this)._markError(B)}return new tv(this)};b.prototype.tailable=function(F,A){if(typeof F?.constructor==="function"&&F.constructor.name==="Object")A=F,F=!0;if(F===void 0)F=!0;if(A&&typeof A==="object")for(let B of Object.keys(A))if(B==="awaitData"||B==="awaitdata")this.options.awaitData=!!A[B];else this.options[B]=A[B];return this.options.tailable=arguments.length?!!F:!0,this};b.prototype.near=function(){let F=[],A=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))F.push({center:arguments[0],spherical:A});else if(typeof arguments[0]==="string")F.push(arguments[0]);else if(k1.isObject(arguments[0])){if(typeof arguments[0].spherical!=="boolean")arguments[0].spherical=A;F.push(arguments[0])}else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]==="number"&&typeof arguments[1]==="number")F.push({center:[arguments[0],arguments[1]],spherical:A});else if(typeof arguments[0]==="string"&&Array.isArray(arguments[1]))F.push(arguments[0]),F.push({center:arguments[1],spherical:A});else if(typeof arguments[0]==="string"&&k1.isObject(arguments[1])){if(F.push(arguments[0]),typeof arguments[1].spherical!=="boolean")arguments[1].spherical=A;F.push(arguments[1])}else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]==="string"&&typeof arguments[1]==="number"&&typeof arguments[2]==="number")F.push(arguments[0]),F.push({center:[arguments[1],arguments[2]],spherical:A});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return b.base.near.apply(this,F)};b.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};b.prototype[Symbol.asyncIterator]=function F(){return this._mongooseOptions._asyncIterator=!0,this.cursor()};b.prototype.box=function(F,A){if(!Array.isArray(F)&&k1.isObject(F))A=F.ur,F=F.ll;return b.base.box.call(this,F,A)};b.prototype.center=b.base.circle;b.prototype.centerSphere=function(){if(typeof arguments[0]?.constructor==="function"&&arguments[0].constructor.name==="Object")arguments[0].spherical=!0;if(typeof arguments[1]?.constructor==="function"&&arguments[1].constructor.name==="Object")arguments[1].spherical=!0;b.base.circle.apply(this,arguments)};b.prototype.selectedInclusively=function F(){return tz1(this._fields)};b.prototype.selectedExclusively=function F(){return rz1(this._fields)};b.prototype.model;function r3(F){return F instanceof b||k1.isObject(F)||F===null}/*!
 * Export
 */Gm.exports=b});var zm=z((Xu1,qm)=>{/*!
 * Module dependencies.
 */var DA=K1(),Wm=c("stream").Readable,EQ1=Aq(),GQ1=B4(),CQ1=R9(),Hm=c("util");function s2(F){Wm.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=F,this._transforms=[];let{_connection:A,_model:B}=F;if(delete F.options.cursor.useMongooseAggCursor,this._mongooseOptions={},A)this.cursor=A.db.aggregate(F._pipeline,F.options||{}),setImmediate(()=>this.emit("cursor",this.cursor));else WQ1(B,this,F)}Hm.inherits(s2,Wm);/*!
 * ignore
 */function WQ1(F,A,B){if(!F.collection.buffer)F.hooks.execPre("aggregate",B).then(()=>D(null),(X)=>D(X));else F.collection.emitter.once("queue",function(){F.hooks.execPre("aggregate",B).then(()=>D(null),(X)=>D(X))});function D(X){if(X!=null){HQ1(A,X);return}if(typeof B.options?.cursor?.transform==="function")A._transforms.push(B.options.cursor.transform);A.cursor=F.collection.aggregate(B._pipeline,B.options||{}),A.emit("cursor",A.cursor)}}function HQ1(F,A){if(A instanceof CQ1.skipWrappedFunction){let B=A.args[0];if(B!=null&&(!Array.isArray(B)||B.length)){let D=new DA('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+Hm.inspect(B)+'".');F._markError(D),F.listeners("error").length>0&&F.emit("error",D);return}F.emit("cursor",null);return}F._markError(A),F.listeners("error").length>0&&F.emit("error",A)}s2.prototype._read=function(){let F=this;rX(this,function(A,B){if(A)return F.emit("error",A);if(!B){F.push(null),F.cursor.close(function(D){if(D)return F.emit("error",D)});return}F.push(B)})};if(Symbol.asyncIterator!=null){let F="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";s2.prototype[Symbol.asyncIterator]=function(){throw new DA(F)}}Object.defineProperty(s2.prototype,"map",{value:function(F){return this._transforms.push(F),this},enumerable:!0,configurable:!0,writable:!0});s2.prototype._markError=function(F){return this._error=F,this};s2.prototype.close=async function F(){if(typeof arguments[0]==="function")throw new DA("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(A){throw this.listeners("error").length>0&&this.emit("error",A),A}this.emit("close")};s2.prototype._destroy=function F(A,B){let D=null;if(!this.cursor)D=new Promise((X)=>{this.once("cursor",X)});else D=Promise.resolve();return D.then(()=>this.cursor.close()).then(()=>{this._closed=!0,B()}).catch((X)=>{B(X)}),this};s2.prototype.next=async function F(){if(typeof arguments[0]==="function")throw new DA("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((A,B)=>{rX(this,(D,X)=>{if(D!=null)return B(D);A(X)})})};s2.prototype.eachAsync=function(F,A){if(typeof arguments[2]==="function")throw new DA("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let B=this;if(typeof A==="function")A={};return A=A||{},EQ1(function(D){return rX(B,D)},F,A)};if(Symbol.asyncIterator!=null)s2.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()};/*!
 * ignore
 */s2.prototype._transformForAsyncIterator=function(){if(this._transforms.indexOf(Cm)===-1)this.map(Cm);return this};/*!
 * ignore
 */s2.prototype.transformNull=function(F){if(arguments.length===0)F=!0;return this._mongooseOptions.transformNull=F,this};/*!
 * ignore
 */function Cm(F){return F==null?{done:!0}:{value:F,done:!1}}s2.prototype.addCursorFlag=function(F,A){let B=this;return qQ1(this,function(){B.cursor.addCursorFlag(F,A)}),this};/*!
 * ignore
 */function qQ1(F,A){if(F.cursor)return A();F.once("cursor",function(){A()})}function rX(F,A){let B=A;if(F._transforms.length)B=function(D,X){if(D||X===null&&!F._mongooseOptions.transformNull)return A(D,X);A(D,F._transforms.reduce(function(Z,J){return J(Z)},X))};if(F._error)return GQ1(function(){B(F._error)});if(F.cursor)return F.cursor.next().then((D)=>{if(!D)return B(null,null);B(null,D)},(D)=>B(D));else F.once("error",A),F.once("cursor",function(){rX(F,A)})}qm.exports=s2});var Nq=z((Zu1,Qm)=>{Qm.exports=function F(A,B,D){let X=B?.discriminatorMapping;if(D=D||"",X&&!X.isRoot){let Z=A,J=(D.length>0?D+".":D)+X.key,$=X.value;if(Z[0]!=null&&Z[0].$match&&(Z[0].$match[J]===void 0||Z[0].$match[J]===$))Z[0].$match[J]=$;else if(Z[0]?.$geoNear)Z[0].$geoNear.query=Z[0].$geoNear.query||{},Z[0].$geoNear.query[J]=$;else if(Z[0]?.$search)if(Z[1]?.$match!=null)Z[1].$match[J]=Z[1].$match[J]||$;else{let Y={};Y[J]=$,Z.splice(1,0,{$match:Y})}else{let Y={};Y[J]=$,Z.unshift({$match:Y})}}}});var Um=z((Ju1,Km)=>{Km.exports=function F(A){if(!Array.isArray(A))return;for(let B of A){if(B==null)continue;let D=B.$group||B.$bucket||B.$bucketAuto;if(D!=null)for(let Z of Object.keys(D))zQ1(D[Z]);let X=Object.keys(B)[0];if(X&&typeof B[X]==="object"){let Z=B[X];for(let J of Object.keys(Z))if(Z[J]!=null&&Z[J].$function!=null&&typeof Z[J].$function.body==="function")Z[J].$function.body=Z[J].$function.body.toString()}if(B.$facet!=null)for(let Z of Object.keys(B.$facet))F(B.$facet[Z])}};function zQ1(F){if(F==null||F.$accumulator==null)return;for(let A of["init","accumulate","merge","finalize"])if(typeof F.$accumulator[A]==="function")F.$accumulator[A]=String(F.$accumulator[A])}});var jq=z((Yu1,Pm)=>{/*!
 * Module dependencies
 */var wm=zm(),h9=K1(),Rm=sX(),{applyGlobalMaxTimeMS:QQ1,applyGlobalDiskUse:KQ1}=Xq(),UQ1=C0(),VQ1=S2(),Mq=Nq(),LQ1=Um(),Vm=B1(),{modelSymbol:wQ1}=t(),RQ1=Rm.prototype.read,PQ1=Rm.prototype.readConcern,Lm=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function R1(F,A){if(this._pipeline=[],A==null||A[wQ1])this._model=A;else this._connection=A;if(this.options={},arguments.length===1&&Array.isArray(F))this.append.apply(this,F)}R1.prototype.options;R1.prototype._optionsForExec=function(){let F=this.options||{},A=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();if(!Object.hasOwn(F,"session")&&A?.session!=null)F.session=A.session;return F};R1.prototype.model=function(F){if(arguments.length===0)return this._model;if(this._model=F,F.schema!=null){if(this.options.readPreference==null&&F.schema.options.read!=null)this.options.readPreference=F.schema.options.read;if(this.options.collation==null&&F.schema.options.collation!=null)this.options.collation=F.schema.options.collation}return F};R1.prototype.append=function(){let F=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!F.every(IQ1))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(F),this};R1.prototype.addFields=function(F){if(typeof F!=="object"||F===null||Array.isArray(F))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},F)})};R1.prototype.project=function(F){let A={};if(typeof F==="object"&&!Array.isArray(F))Object.keys(F).forEach(function(B){A[B]=F[B]});else if(arguments.length===1&&typeof F==="string")F.split(/\s+/).forEach(function(B){if(!B)return;let D=B[0]==="-"?0:1;if(D===0)B=B.substring(1);A[B]=D});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:A})};R1.prototype.near=function(F){if(F==null)throw new h9("Aggregate `near()` must be called with non-nullish argument");if(F.near==null)throw new h9("Aggregate `near()` argument must have a `near` property");let A=Array.isArray(F.near)?F.near:F.near.coordinates;if(typeof F.near==="object"&&(!Array.isArray(A)||A.length<2||A.find((D)=>typeof D!=="number")))throw new h9(`Aggregate \`near()\` argument has invalid coordinates, got "${A}"`);let B={};return B.$geoNear=F,this.append(B)};/*!
 * define methods
 */"group match skip limit out densify fill".split(" ").forEach(function(F){R1.prototype[F]=function(A){let B={};return B["$"+F]=A,this.append(B)}});R1.prototype.unwind=function(){let F=[...arguments],A=[];for(let B of F)if(B&&typeof B==="object")A.push({$unwind:B});else if(typeof B==="string")A.push({$unwind:B[0]==="$"?B:"$"+B});else throw new Error('Invalid arg "'+B+'" to unwind(), must be string or object');return this.append.apply(this,A)};R1.prototype.replaceRoot=function(F){let A;if(typeof F==="string")A=F.startsWith("$")?F:"$"+F;else A=F;return this.append({$replaceRoot:{newRoot:A}})};R1.prototype.count=function(F){return this.append({$count:F})};R1.prototype.sortByCount=function(F){if(F&&typeof F==="object")return this.append({$sortByCount:F});else if(typeof F==="string")return this.append({$sortByCount:F[0]==="$"?F:"$"+F});else throw new TypeError('Invalid arg "'+F+'" to sortByCount(), must be string or object')};R1.prototype.lookup=function(F){return this.append({$lookup:F})};R1.prototype.graphLookup=function(F){let A={};if(F){if(!Vm.isObject(F))throw new TypeError("Invalid graphLookup() argument. Must be an object.");Vm.mergeClone(A,F);let B=A.startWith;if(B&&typeof B==="string")A.startWith=A.startWith.startsWith("$")?A.startWith:"$"+A.startWith}return this.append({$graphLookup:A})};R1.prototype.sample=function(F){return this.append({$sample:{size:F}})};R1.prototype.sort=function(F){let A={};if(VQ1(F)==="Object"){let B=["desc","descending",-1];Object.keys(F).forEach(function(D){if(F[D]instanceof Object&&F[D].$meta){A[D]=F[D];return}A[D]=B.indexOf(F[D])===-1?1:-1})}else if(arguments.length===1&&typeof F==="string")F.split(/\s+/).forEach(function(B){if(!B)return;let D=B[0]==="-"?-1:1;if(D===-1)B=B.substring(1);A[B]=D});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:A})};R1.prototype.unionWith=function(F){return this.append({$unionWith:F})};R1.prototype.read=function(F,A){return RQ1.call(this,F,A),this};R1.prototype.readConcern=function(F){return PQ1.call(this,F),this};R1.prototype.redact=function(F,A,B){if(arguments.length===3){if(typeof A==="string"&&!Lm.has(A)||typeof B==="string"&&!Lm.has(B))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");F={$cond:{if:F,then:A,else:B}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:F})};R1.prototype.explain=async function F(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new h9("Aggregate.prototype.explain() no longer accepts a callback");let B=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");Mq(this._pipeline,this._model.schema);try{await B.hooks.execPre("aggregate",this)}catch(Z){return await B.hooks.execPost("aggregate",this,[null],{error:Z})}let D=B.collection.aggregate(this._pipeline,this.options);if(A==null)A=!0;let X=null;try{X=await D.explain(A)}catch(Z){return await B.hooks.execPost("aggregate",this,[null],{error:Z})}return await B.hooks.execPost("aggregate",this,[X],{error:null}),X};R1.prototype.allowDiskUse=function(F){return this.options.allowDiskUse=F,this};R1.prototype.hint=function(F){return this.options.hint=F,this};R1.prototype.session=function(F){if(F==null)delete this.options.session;else this.options.session=F;return this};R1.prototype.option=function(F){for(let A in F)this.options[A]=F[A];return this};R1.prototype.cursor=function(F){return this._optionsForExec(),this.options.cursor=F||{},new wm(this)};R1.prototype.collation=function(F){return this.options.collation=F,this};R1.prototype.facet=function(F){return this.append({$facet:F})};R1.prototype.search=function(F){return this.append({$search:F})};R1.prototype.pipeline=function(){return this._pipeline};R1.prototype.exec=async function F(){if(!this._model&&!this._connection)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]==="function")throw new h9("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new h9("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let A=this._model,B=this._model.collection;if(QQ1(this.options,A.db.options,A.base.options),KQ1(this.options,A.db.options,A.base.options),this._optionsForExec(),this.options?.cursor)return new wm(this);Mq(this._pipeline,this._model.schema),LQ1(this._pipeline);try{await A.hooks.execPre("aggregate",this)}catch(Z){return await A.hooks.execPost("aggregate",this,[null],{error:Z})}if(!this._pipeline.length)throw new h9("Aggregate has empty pipeline");let D=UQ1(this.options||{}),X;try{X=await(await B.aggregate(this._pipeline,D)).toArray()}catch(Z){return await A.hooks.execPost("aggregate",this,[null],{error:Z})}return await A.hooks.execPost("aggregate",this,[X],{error:null}),X};R1.prototype.then=function(F,A){return this.exec().then(F,A)};R1.prototype.catch=function(F){return this.exec().then(null,F)};R1.prototype.finally=function(F){return this.exec().finally(F)};R1.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()};/*!
 * Helpers
 */function IQ1(F){if(typeof F!=="object"||F===null)return!1;let A=Object.keys(F);return A.length===1&&A[0][0]==="$"}R1._prepareDiscriminatorPipeline=Mq;/*!
 * Exports
 */Pm.exports=R1});var Nm=z(($u1,Im)=>{var NQ1=C0();class Tq{constructor(F){if(F==null)return;Object.assign(this,NQ1(F))}}Tq.prototype.__subdocs=null;Im.exports=Tq});var jm=z((Eu1,Mm)=>{Mm.exports=function F(A,B){let D=Object.keys(B.paths),X=D.length;for(let Z=0;Z<X;++Z){let J="",$=D[Z],Y=B.paths[$],E=Y.splitPath(),G=E.length,C=A;for(let W=0;W<G;++W){if(C==null)break;let H=E[W];if(J+=(!J.length?"":".")+H,W===G-1){if(typeof C[H]!=="undefined"){if(Y.$isSingleNested)F(C[H],Y.schema);else if(Y.$isMongooseDocumentArray&&Array.isArray(C[H]))C[H].forEach((Q)=>F(Q,Y.schema));break}let q=Y.getDefault(A,!1,{skipCast:!0});if(typeof q!=="undefined"){if(C[H]=q,Y.$isSingleNested)F(q,Y.schema);else if(Y.$isMongooseDocumentArray&&Array.isArray(q))q.forEach((Q)=>F(Q,Y.schema))}}else{if(C[H]==null)C[H]={};C=C[H]}}}}});var uq=z((Gu1,Tm)=>{Tm.exports=kq;function kq(F,A=new WeakSet,B=!1){if(A.has(F))return;A.add(F);for(let D of Object.keys(F.paths)){let X=F.paths[D];if(!X.schema)continue;if(kq(X.schema,A),!X.schema._applyDiscriminators)continue;if(X._appliedDiscriminators&&!B)continue;for(let Z of X.schema._applyDiscriminators.keys()){let{schema:J,options:$}=X.schema._applyDiscriminators.get(Z);kq(J,A),X.discriminator(Z,J,B?{...$,overwriteExisting:!0}:$)}X._appliedDiscriminators=!0}}});var um=z((Cu1,km)=>{/*!
 * ignore
 */km.exports=XA;/*!
 * ignore
 */XA.middlewareFunctions=["deleteOne","remove","save","updateOne","validate","init"];/*!
 * ignore
 */var MQ1=new Set(XA.middlewareFunctions.flatMap((F)=>[F,`$__${F}`]));function XA(F,A,B){B=B||{};let D={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},X=B.decorateDoc?F:F.prototype;F.$appliedHooks=!0;for(let Y of Object.keys(A.paths)){let E=A.paths[Y],G=null,C=Oq(E);if(C)G=C.childModel,E=C.type;else continue;if(G.$appliedHooks)continue;if(XA(G,E.schema,{...B,decorateDoc:!1,isChildSchema:!0}),G.discriminators!=null){let W=Object.keys(G.discriminators);for(let H of W)XA(G.discriminators[H],G.discriminators[H].schema,B)}}let Z=A._getDocumentMiddleware();F._middleware=Z,X.$__init=Z.createWrapperSync("init",X.$__init,null,D);let J=Object.keys(A.methods),$=Object.assign({},D,{checkForPromise:!0});for(let Y of J){if(MQ1.has(Y))continue;if(!Z.hasHooks(Y))continue;let E=X[Y];X[`$__${Y}`]=X[Y],X[Y]=Z.createWrapper(Y,E,null,$)}}function Oq(F){if(F.$isSingleNested||F.$isMongooseDocumentArray)return{childModel:F.Constructor,type:F};if(F.instance==="Array"){let A=F.getEmbeddedSchemaType();if(A)return Oq(A)}if(F.instance==="Map"){let A=F.getEmbeddedSchemaType();if(A)return Oq(A)}return null}});var Sm=z((Wu1,Om)=>{var jQ1=K0(),TQ1=B1();Om.exports=function F(A,B){let D=Sq();function X(Z,J){Object.defineProperty(A.prototype,Z,{get:function(){let $={};for(let Y in J.methods[Z])$[Y]=J.methods[Z][Y].bind(this);return $},configurable:!0})}for(let Z of Object.keys(B.methods)){let J=B.methods[Z];if(Object.hasOwn(B.tree,Z))throw new Error('You have a method and a property in your schema both named "'+Z+'"');if(typeof J==="function"&&D.prototype[Z]===J){delete B.methods[Z];continue}if(B.reserved[Z]&&!jQ1(B,`methodOptions.${Z}.suppressWarning`,!1))TQ1.warn(`mongoose: the method name "${Z}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${Z}', fn, { suppressWarning: true })\`.`);if(typeof J==="function")A.prototype[Z]=J;else X(Z,B)}A.$appliedMethods=!0;for(let Z of Object.keys(B.paths)){let J=B.paths[Z];if(J.$isSingleNested&&!J.Constructor.$appliedMethods)F(J.Constructor,J.schema);if(J.$isMongooseDocumentArray&&!J.Constructor.$appliedMethods)F(J.Constructor,J.schema)}}});var fm=z((Hu1,_m)=>{var xm=jC(),kQ1=$8(),uQ1=dX(),eX=B1().isPOJO;_m.exports=function F(A,B,D){if(B==null)return A;if(A==null)return A;let X=null;if(uQ1(B))X=!1;else if(kQ1(B))X=!0;if(X==null)return A;else if(X)return D=D||xm(B),tX(A,B,D);else return D=D||xm(B),oX(A,B,D)};function tX(F,A,B,D,X){if(F==null||typeof F!=="object")return F;if(Array.isArray(F))return F.map((J)=>tX(J,A,B,D,X));let Z={...F};D=X?D||{}:A;for(let J of Object.keys(Z)){let $=X?X+"."+J:J;if(Object.hasOwn(A,$)||Object.hasOwn(D,J))if(eX(A[$])||eX(D[J]))Z[J]=tX(Z[J],A,B,D[J],$);else delete Z[J];else if(B[$])Z[J]=tX(Z[J],A,B,D[J],$)}return Z}function oX(F,A,B,D,X){if(F==null||typeof F!=="object")return F;if(Array.isArray(F))return F.map((J)=>oX(J,A,B,D,X));let Z={...F};D=X?D||{}:A;for(let J of Object.keys(Z)){let $=X?X+"."+J:J;if(Object.hasOwn(A,$)||Object.hasOwn(D,J)){if(eX(A[$])||eX(D[J]))Z[J]=oX(Z[J],A,B,D[J],$);continue}else if(B[$])Z[J]=oX(Z[J],A,B,D[J],$);else delete Z[J]}return Z}});var bm=z((qu1,gm)=>{gm.exports=function F(A){let B=!1;for(let D of Object.keys(A))if(A[D]==="text")B=!0;return B}});var hm=z((zu1,ym)=>{var OQ1=bm();ym.exports=function F(A,B,D){if(OQ1(A))return;if(Object.hasOwn(D,"collation")&&!Object.hasOwn(B,"collation"))B.collation=D.collation}});var mm=z((Qu1,vm)=>{var{queryMiddlewareFunctions:SQ1,aggregateMiddlewareFunctions:xQ1,modelMiddlewareFunctions:_Q1,documentMiddlewareFunctions:fQ1}=jF(),gQ1=Array.from(new Set([...SQ1,...xQ1,..._Q1,...fQ1]));vm.exports=function F(A,B,D){B=B.filter((X)=>{if(gQ1.indexOf(X.name)!==-1)return!!X.model;return X.model!==!1});for(let X of Object.keys(D))if(B.hasHooks(X)){let Z=A[X];A[X]=B.createWrapper(X,Z)}}});var cm=z((Ku1,dm)=>{dm.exports=function F(A,B){for(let D in B.statics)A[D]=B.statics[D]}});var am=z((Uu1,nm)=>{var lm=FX(),bQ1=C6(),yQ1=B1();nm.exports=pm;function pm(F,A,B){if(A==null)return A;return hQ1(F,A,B),im(F,A,B)}function hQ1(F,A,B){for(let D of F.childSchemas){let X=D.model.path,Z=D.schema;if(!X)continue;let J=bQ1.get(X,A);if(J==null||Array.isArray(J)&&J.flat(1/0).length===0)continue;pm(Z,J,B)}}function im(F,A,B){if(A==null||typeof A!=="object")return;if(Array.isArray(A)){for(let $ of A)im(F,$,B);return}if(F.discriminators&&yQ1.hasOwnKeys(F.discriminators))for(let $ of Object.keys(F.discriminators)){let Y=F.discriminators[$],E=Y.discriminatorMapping.key,G=Y.discriminatorMapping.value;if(A[E]==G){F=Y;break}}let D=lm(F.options.timestamps,"createdAt"),X=lm(F.options.timestamps,"updatedAt"),Z=B?.currentTime,J=null;if(Z!=null)J=Z();else if(F.base?.now)J=F.base.now();else J=new Date;if(D&&A[D]==null&&!B?.isUpdate)A[D]=J;if(X)A[X]=J}});var tm=z((Vu1,rm)=>{var vQ1=C6(),mQ1=B1();rm.exports=sm;function sm(F,A,B){if(A==null)return A;let D=B,X=null;if(Array.isArray(B)){D=[],X=[];for(let Z of B)if(Z.length===1)X.push(Z[0]);else D.push(Z)}return dQ1(F,A,D),xq(F,A,X)}function dQ1(F,A,B){let D=!1;for(let X of F.childSchemas){let Z=X.model.path,J=X.schema;if(!Z)continue;let $=vQ1.get(Z,A);if($==null||Array.isArray($)&&$.flat(1/0).length===0)continue;let Y=null;if(Array.isArray(B)){Y=[];for(let E of B)if(E[0]==Z)Y.push(E.slice(1));if(Y.length===0)continue}sm(J,$,Y),D=!0}if(B?.length&&!D)xq(F,A,B)}function xq(F,A,B){if(A==null||typeof A!=="object")return;if(Array.isArray(A)){for(let D of A)xq(F,D,B);return}if(F.discriminators&&mQ1.hasOwnKeys(F.discriminators))for(let D of Object.keys(F.discriminators)){let X=F.discriminators[D],Z=X.discriminatorMapping.key,J=X.discriminatorMapping.value;if(A[Z]==J){F=X;break}}if(B==null)B=Object.keys(F.virtuals);for(let D of B){if(F.virtuals[D]==null)continue;let X=F.virtuals[D],Z=Array.isArray(D)?D:D.indexOf(".")===-1?[D]:D.split("."),J=A;for(let E=0;E<Z.length-1;++E)J[Z[E]]=Z[E]in J?J[Z[E]]:{},J=J[Z[E]];let $=X.applyGetters(J[Z[Z.length-1]],A);if((X.options?.ref||X.options?.refPath)&&$===void 0)if(X.options.justOne)$=null;else $=[];J[Z[Z.length-1]]=$}}});var FZ=z((Lu1,om)=>{om.exports=function F(A){if(!(this instanceof F))return new F(A);return this.val=A,this}});var ZA=z((wu1,em)=>{/*!
 * ignore
 */em.exports=new WeakMap});var Dd=z((Ru1,Bd)=>{var cQ1=C0(),Fd=ZA(),lQ1=t().modelSymbol,pQ1=B1();Bd.exports=Ad;var AZ=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function Ad(F,A,B,D,X){let Z=[],J=D.isVirtual&&D.justOne&&F.length>1?!1:D.sort&&F.length>1,$=D.$nullIfNotFound,Y,E,G;if(pQ1.isMongooseArray(F))F=F.__array;let C=0,W=F.length;if(J&&X&&D[AZ]===void 0){D[AZ]=!1;for(let H in B)if(Array.isArray(B[H])){D[AZ]=!0;break}}for(C=0;C<W;++C){if(G=F[C],Array.isArray(G)){Ad(G,A,B,D,!0),Z.push(G);continue}if(G===null&&J===!1){Z.push(G);continue}if(E=String(G),Y=A[E],D.clone&&Y!=null)if(D.lean){let H=Fd.get(Y);Y=cQ1(Y),Fd.set(Y,H)}else Y=Y.constructor.hydrate(Y._doc);if(X)if(Y)if(J){let H=B[E];if(D[AZ])Z.push(Y);else Z[H]=Y}else Z.push(Y);else if(G?.[lQ1]!=null)Z.push(G);else Z.push(D.retainNullValues||$?null:G);else Z[C]=Y||null}if(F.length=0,Z.length)Z.forEach(function(H,q){F[q]=H})}});var _q=z((Pu1,Xd)=>{Xd.exports=BZ;/*!
 * ignore
 */function BZ(F,A){if(F.virtuals[A])return{virtual:F.virtuals[A],path:void 0};let B=A.split("."),D="",X="";for(let Z=0;Z<B.length;++Z){if(D+=(D.length>0?".":"")+B[Z],F.virtuals[D]){if(Z===B.length-1)return{virtual:F.virtuals[D],path:X};continue}if(F.nested[D])continue;if(F.paths[D]&&F.paths[D].schema){F=F.paths[D].schema;let J=B.slice(Z+1).join(".");if(F.virtuals[J]){if(Z===B.length-2)return{virtual:F.virtuals[J],nestedSchemaPath:[X,D].filter(($)=>!!$).join(".")};continue}if(Z+1<B.length&&F.discriminators)for(let $ of Object.keys(F.discriminators)){let Y=BZ(F.discriminators[$],J);if(Y!=null){let E=[X,D,Y.nestedSchemaPath].filter((G)=>!!G).join(".");return{virtual:Y.virtual,nestedSchemaPath:E}}}X+=(X.length>0?".":"")+D,D="";continue}else if(F.paths[D]?.$isSchemaMap&&F.paths[D].$__schemaType?.schema){F=F.paths[D].$__schemaType.schema,++Z;let J=B.slice(Z+1).join(".");if(F.virtuals[J]){if(Z===B.length-2)return{virtual:F.virtuals[J],nestedSchemaPath:[X,D,"$*"].filter(($)=>!!$).join(".")};continue}if(Z+1<B.length&&F.discriminators)for(let $ of Object.keys(F.discriminators)){let Y=BZ(F.discriminators[$],J);if(Y!=null){let E=[X,D,Y.nestedSchemaPath,"$*"].filter((G)=>!!G).join(".");return{virtual:Y.virtual,nestedSchemaPath:E}}}X+=(X.length>0?".":"")+"$*"+D,D=""}if(F.discriminators)for(let J of Object.keys(F.discriminators)){let $=BZ(F.discriminators[J],A);if($)return $}return null}}});var Jd=z((DZ,Zd)=>{(function(F,A){typeof DZ==="object"&&typeof Zd!=="undefined"?A(DZ):typeof define==="function"&&define.amd?define(["exports"],A):(F=typeof globalThis!=="undefined"?globalThis:F||self,A(F.sift={}))})(DZ,function(F){var A=function(L,P){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,_){j.__proto__=_}||function(j,_){for(var i in _)if(Object.prototype.hasOwnProperty.call(_,i))j[i]=_[i]},A(L,P)};function B(L,P){if(typeof P!=="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");A(L,P);function j(){this.constructor=L}L.prototype=P===null?Object.create(P):(j.prototype=P.prototype,new j)}typeof SuppressedError==="function"&&SuppressedError;var D=function(L){var P="[object "+L+"]";return function(j){return X(j)===P}},X=function(L){return Object.prototype.toString.call(L)},Z=function(L){if(L instanceof Date)return L.getTime();else if($(L))return L.map(Z);else if(L&&typeof L.toJSON==="function")return L.toJSON();return L},J=function(L){return L==null?null:L},$=D("Array"),Y=D("Object"),E=D("Function"),G=function(L,P){return L.hasOwnProperty(P)&&!E(L[P])},C=function(L){return L&&(L.constructor===Object||L.constructor===Array||L.constructor.toString()==="function Object() { [native code] }"||L.constructor.toString()==="function Array() { [native code] }")&&!L.toJSON},W=function(L,P){if(L==null&&L==P)return!0;if(L===P)return!0;if(Object.prototype.toString.call(L)!==Object.prototype.toString.call(P))return!1;if($(L)){if(L.length!==P.length)return!1;for(var j=0,_=L.length;j<_;j++)if(!W(L[j],P[j]))return!1;return!0}else if(Y(L)){if(Object.keys(L).length!==Object.keys(P).length)return!1;for(var i in L)if(!W(L[i],P[i]))return!1;return!0}return!1},H=function(L,P,j,_,i,e){var G1=P[_];if($(L)&&isNaN(Number(G1))&&!G(L,G1)){for(var P1=0,$2=L.length;P1<$2;P1++)if(!H(L[P1],P,j,_,P1,L))return!1}if(_===P.length||L==null)return j(L,i,e,_===0,_===P.length);return H(L[G1],P,j,_+1,G1,L)},q=function(){function L(P,j,_,i){this.params=P,this.owneryQuery=j,this.options=_,this.name=i,this.init()}return L.prototype.init=function(){},L.prototype.reset=function(){this.done=!1,this.keep=!1},L}(),Q=function(L){B(P,L);function P(j,_,i,e){var G1=L.call(this,j,_,i)||this;return G1.children=e,G1}return P.prototype.reset=function(){this.keep=!1,this.done=!1;for(var j=0,_=this.children.length;j<_;j++)this.children[j].reset()},P.prototype.childrenNext=function(j,_,i,e,G1){var P1=!0,$2=!0;for(var r2=0,o6=this.children.length;r2<o6;r2++){var h4=this.children[r2];if(!h4.done)h4.next(j,_,i,e,G1);if(!h4.keep)$2=!1;if(h4.done){if(!h4.keep)break}else P1=!1}this.done=P1,this.keep=$2},P}(q),K=function(L){B(P,L);function P(j,_,i,e,G1){var P1=L.call(this,j,_,i,e)||this;return P1.name=G1,P1}return P}(Q),U=function(L){B(P,L);function P(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return P.prototype.next=function(j,_,i,e){this.childrenNext(j,_,i,e)},P}(Q),R=function(L){B(P,L);function P(j,_,i,e,G1){var P1=L.call(this,_,i,e,G1)||this;return P1.keyPath=j,P1.propop=!0,P1._nextNestedValue=function($2,r2,o6,h4,ac){return P1.childrenNext($2,r2,o6,h4,ac),!P1.done},P1}return P.prototype.next=function(j,_,i){H(j,this.keyPath,this._nextNestedValue,0,_,i)},P}(Q),w=function(L,P){if(L instanceof Function)return L;if(L instanceof RegExp)return function(_){var i=typeof _==="string"&&L.test(_);return L.lastIndex=0,i};var j=Z(L);return function(_){return P(j,Z(_))}},V=function(L){B(P,L);function P(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return P.prototype.init=function(){this._test=w(this.params,this.options.compare)},P.prototype.next=function(j,_,i){if(!Array.isArray(i)||i.hasOwnProperty(_)){if(this._test(j,_,i))this.done=!0,this.keep=!0}},P}(q),N=function(L,P,j){return new V(L,P,j)},T=function(L){return function(P,j,_,i){return L(P,j,_,i)}},I=function(L){return T(function(P,j,_,i){var e=typeof Z(P),G1=L(P);return new V(function(P1){var $2=J(P1);return typeof Z($2)===e&&G1($2)},j,_,i)})},u=function(L,P,j,_){var i=_.operations[L];if(!i)O(L);return i(P,j,_,L)},O=function(L){throw new Error("Unsupported operation: ".concat(L))},k=function(L,P){for(var j in L)if(P.operations.hasOwnProperty(j)||j.charAt(0)==="$")return!0;return!1},m=function(L,P,j,_,i){if(k(P,i)){var e=o(P,j,i),G1=e[0],P1=e[1];if(P1.length)throw new Error("Property queries must contain only operations, or exact objects.");return new R(L,P,_,i,G1)}return new R(L,P,_,i,[new V(P,_,i)])},h=function(L,P,j){if(P===void 0)P=null;var _=j===void 0?{}:j,i=_.compare,e=_.operations,G1={compare:i||W,operations:Object.assign({},e||{})},P1=o(L,null,G1),$2=P1[0],r2=P1[1],o6=[];if($2.length)o6.push(new R([],L,P,G1,$2));if(o6.push.apply(o6,r2),o6.length===1)return o6[0];return new U(L,P,G1,o6)},o=function(L,P,j){var _=[],i=[];if(!C(L))return _.push(new V(L,L,j)),[_,i];for(var e in L)if(j.operations.hasOwnProperty(e)){var G1=u(e,L[e],L,j);if(G1){if(!G1.propop&&P&&!j.operations[P])throw new Error("Malformed query. ".concat(e," cannot be matched against property."))}if(G1!=null)_.push(G1)}else if(e.charAt(0)==="$")O(e);else i.push(m(e.split("."),L[e],e,L,j));return[_,i]},A1=function(L){return function(P,j,_){return L.reset(),L.next(P,j,_),L.keep}},w2=function(L,P){if(P===void 0)P={};return A1(h(L,null,P))},J2=function(L){B(P,L);function P(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return P.prototype.init=function(){this._test=w(this.params,this.options.compare)},P.prototype.reset=function(){L.prototype.reset.call(this),this.keep=!0},P.prototype.next=function(j){if(this._test(j))this.done=!0,this.keep=!1},P}(q),y4=function(L){B(P,L);function P(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return P.prototype.init=function(){if(!this.params||typeof this.params!=="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=h(this.params,this.owneryQuery,this.options)},P.prototype.reset=function(){L.prototype.reset.call(this),this._queryOperation.reset()},P.prototype.next=function(j){if($(j)){for(var _=0,i=j.length;_<i;_++){this._queryOperation.reset();var e=j[_];this._queryOperation.next(e,_,j,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},P}(q),e1=function(L){B(P,L);function P(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return P.prototype.init=function(){this._queryOperation=h(this.params,this.owneryQuery,this.options)},P.prototype.reset=function(){L.prototype.reset.call(this),this._queryOperation.reset()},P.prototype.next=function(j,_,i,e){this._queryOperation.next(j,_,i,e),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},P}(q),x0=function(L){B(P,L);function P(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return P.prototype.init=function(){},P.prototype.next=function(j){if($(j)&&j.length===this.params)this.done=!0,this.keep=!0},P}(q),f2=function(L){if(L.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},Y2=function(L){B(P,L);function P(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!1,j}return P.prototype.init=function(){var j=this;f2(this.params),this._ops=this.params.map(function(_){return h(_,null,j.options)})},P.prototype.reset=function(){this.done=!1,this.keep=!1;for(var j=0,_=this._ops.length;j<_;j++)this._ops[j].reset()},P.prototype.next=function(j,_,i){var e=!1,G1=!1;for(var P1=0,$2=this._ops.length;P1<$2;P1++){var r2=this._ops[P1];if(r2.next(j,_,i),r2.keep){e=!0,G1=r2.keep;break}}this.keep=G1,this.done=e},P}(q),K3=function(L){B(P,L);function P(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!1,j}return P.prototype.next=function(j,_,i){L.prototype.next.call(this,j,_,i),this.keep=!this.keep},P}(Y2),Xz=function(L){B(P,L);function P(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return P.prototype.init=function(){var j=this,_=Array.isArray(this.params)?this.params:[this.params];this._testers=_.map(function(i){if(k(i,j.options))throw new Error("cannot nest $ under ".concat(j.name.toLowerCase()));return w(i,j.options.compare)})},P.prototype.next=function(j,_,i){var e=!1,G1=!1;for(var P1=0,$2=this._testers.length;P1<$2;P1++){var r2=this._testers[P1];if(r2(j)){e=!0,G1=!0;break}}this.keep=G1,this.done=e},P}(q),dc=function(L){B(P,L);function P(j,_,i,e){var G1=L.call(this,j,_,i,e)||this;return G1.propop=!0,G1._in=new Xz(j,_,i,e),G1}return P.prototype.next=function(j,_,i,e){if(this._in.next(j,_,i),$(i)&&!e){if(this._in.keep)this.keep=!1,this.done=!0;else if(_==i.length-1)this.keep=!0,this.done=!0}else this.keep=!this._in.keep,this.done=!0},P.prototype.reset=function(){L.prototype.reset.call(this),this._in.reset()},P}(q),cc=function(L){B(P,L);function P(){var j=L!==null&&L.apply(this,arguments)||this;return j.propop=!0,j}return P.prototype.next=function(j,_,i,e,G1){if(!G1)this.done=!0,this.keep=!this.params;else if(i.hasOwnProperty(_)===this.params)this.done=!0,this.keep=!0},P}(q),lc=function(L){B(P,L);function P(j,_,i,e){var G1=L.call(this,j,_,i,j.map(function(P1){return h(P1,_,i)}),e)||this;return G1.propop=!1,f2(j),G1}return P.prototype.next=function(j,_,i,e){this.childrenNext(j,_,i,e)},P}(K),pc=function(L){B(P,L);function P(j,_,i,e){var G1=L.call(this,j,_,i,j.map(function(P1){return h(P1,_,i)}),e)||this;return G1.propop=!0,G1}return P.prototype.next=function(j,_,i,e){this.childrenNext(j,_,i,e)},P}(K),Zz=function(L,P,j){return new V(L,P,j)},Jz=function(L,P,j,_){return new J2(L,P,j,_)},Yz=function(L,P,j,_){return new Y2(L,P,j,_)},$z=function(L,P,j,_){return new K3(L,P,j,_)},Ez=function(L,P,j,_){return new y4(L,P,j,_)},Gz=function(L,P,j,_){return new dc(L,P,j,_)},Cz=function(L,P,j,_){return new Xz(L,P,j,_)},Wz=I(function(L){return function(P){return P!=null&&P<L}}),Hz=I(function(L){return function(P){return P===L||P<=L}}),qz=I(function(L){return function(P){return P!=null&&P>L}}),zz=I(function(L){return function(P){return P===L||P>=L}}),Qz=function(L,P,j){var _=L[0],i=L[1];return new V(function(e){return Z(e)%_===i},P,j)},Kz=function(L,P,j,_){return new cc(L,P,j,_)},Uz=function(L,P,j){return new V(new RegExp(L,P.$options),P,j)},Vz=function(L,P,j,_){return new e1(L,P,j,_)},Lz={number:function(L){return typeof L==="number"},string:function(L){return typeof L==="string"},bool:function(L){return typeof L==="boolean"},array:function(L){return Array.isArray(L)},null:function(L){return L===null},timestamp:function(L){return L instanceof Date}},wz=function(L,P,j){return new V(function(_){if(typeof L==="string"){if(!Lz[L])throw new Error("Type alias does not exist");return Lz[L](_)}return _!=null?_ instanceof L||_.constructor===L:!1},P,j)},Rz=function(L,P,j,_){return new lc(L,P,j,_)},Pz=function(L,P,j,_){return new pc(L,P,j,_)},Iz=function(L,P,j){return new x0(L,P,j,"$size")},Nz=function(){return null},Mz=function(L,P,j){var _;if(E(L))_=L;else if(!process.env.CSP_ENABLED)_=new Function("obj","return "+L);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new V(function(i){return _.bind(i)(i)},P,j)},ic=Object.freeze({__proto__:null,$Size:x0,$all:Pz,$and:Rz,$elemMatch:Ez,$eq:Zz,$exists:Kz,$gt:qz,$gte:zz,$in:Cz,$lt:Wz,$lte:Hz,$mod:Qz,$ne:Jz,$nin:Gz,$nor:$z,$not:Vz,$options:Nz,$or:Yz,$regex:Uz,$size:Iz,$type:wz,$where:Mz}),jz=function(L,P,j){var _=j===void 0?{}:j,i=_.compare,e=_.operations;return h(L,P,{compare:i,operations:Object.assign({},ic,e||{})})},nc=function(L,P){if(P===void 0)P={};var j=jz(L,null,P);return A1(j)};F.$Size=x0,F.$all=Pz,F.$and=Rz,F.$elemMatch=Ez,F.$eq=Zz,F.$exists=Kz,F.$gt=qz,F.$gte=zz,F.$in=Cz,F.$lt=Wz,F.$lte=Hz,F.$mod=Qz,F.$ne=Jz,F.$nin=Gz,F.$nor=$z,F.$not=Vz,F.$options=Nz,F.$or=Yz,F.$regex=Uz,F.$size=Iz,F.$type=wz,F.$where=Mz,F.EqualsOperation=V,F.createDefaultQueryOperation=jz,F.createEqualsOperation=N,F.createOperationTester=A1,F.createQueryOperation=h,F.createQueryTester=w2,F.default=nc,Object.defineProperty(F,"__esModule",{value:!0})})});var $d=z((Iu1,fq)=>{var Yd=Jd();fq.exports=Yd.default;Object.assign(fq.exports,Yd)});var qd=z((Nu1,Hd)=>{var iQ1=AX(),nQ1=FZ(),aQ1=Dd(),XZ=K0(),sQ1=_q(),Wd=ZA(),Ed=oD(),rQ1=SC(),gq=C6(),Gd=$d().default,ZZ=B1(),{populateModelSymbol:tQ1}=t();Hd.exports=function F(A){let B=Object.assign({},XZ(A,"allOptions.options.options"),XZ(A,"allOptions.options")),D=Object.assign({},A.options,B,{justOne:A.justOne,isVirtual:A.isVirtual});D.$nullIfNotFound=A.isVirtual;let X=A.populatedModel,Z=[].concat(A.rawIds);A.allIds=[].concat(A.allIds),aQ1(A.rawIds,A.rawDocs,A.rawOrder,D);let{docs:J,rawIds:$,options:Y}=A,E=A.count&&A.isVirtual,G,C=0;function W(H){if(++C,E)return H;if(H instanceof nQ1)return H.val;if(H===void 0)return H;let q=A.allIds[G];if(A.path.endsWith(".$*"))return JA(H,Y,D,q);if(A.justOne===!0&&Array.isArray(H)){let Q=[];for(let K of H){let U=Wd.get(K);if(U==null||U===X)Q.push(K)}while(H.length>Q.length)Array.prototype.pop.apply(H,[]);for(let K=0;K<Q.length;++K)H[K]=Q[K];return JA(H[0],Y,D,q)}else if(A.justOne===!1&&!Array.isArray(H))return JA([H],Y,D,q);else if(A.justOne===!0&&!Array.isArray(H)&&Array.isArray(q))return JA(H,Y,D,H==null?H:q[C-1]);return JA(H,Y,D,q)}for(G=0;G<J.length;++G){C=0;let H=A.path.endsWith(".$*")?A.path.slice(0,-3):A.path,q=gq.get(H,J[G],Ed);if(q==null&&!sQ1(A.originalModel.schema,H))continue;let Q;if(E)Q=oQ1($[G]);else if(Array.isArray(A.match))Q=Array.isArray($[G])?$[G].filter((N)=>N==null||Gd(A.match[G])(N)):[$[G]].filter((N)=>N==null||Gd(A.match[G])(N))[0];else Q=$[G];let K=A.originalModel.schema,U=XZ(J[G],"$__",null)!=null,R=U?q instanceof Map:ZZ.isPOJO(q);if(R=R&&XZ(K._getSchema(H),"$isSchemaMap"),!A.isVirtual&&R){let N=q instanceof Map?Array.from(q.keys()):Object.keys(q);Q=Q.reduce((T,I,u)=>{return T.set(N[u],I),T},new Map)}if(U&&Array.isArray(Q)){for(let N of Q)if(N?.$__!=null)N.$__.parent=J[G]}else if(U&&Q?.$__!=null)Q.$__.parent=J[G];if(A.isVirtual&&U){if(J[G].$populated(H,A.justOne?Z[0]:Z,A.allOptions),Array.isArray(Q))Q=Q.map((N)=>N==null?void 0:N);gq.set(H,Q,J[G],function N(T,I,u){if(arguments.length>=3)return T[I]=u,T[I];if(T instanceof Map&&I==="$*")return[...T.values()];return T[I]},W,!1);continue}let w=H.split("."),V=J[G];for(let N=0;N<w.length-1;++N){if(Array.isArray(V)&&!ZZ.isArrayIndex(w[N]))break;if(w[N]==="$*")break;if(V[w[N]]==null){let T=w.slice(0,N+1).join("."),I=K._getSchema(T);if(Q==null&&I?.$isMongooseArray)break;V[w[N]]={}}if(V=V[w[N]],typeof V!=="object")break}if(J[G].$__){if(A.allOptions.options[tQ1]=A.allOptions.model,J[G].$populated(H,A.unpopulatedValues[G],A.allOptions.options),Q?.$__!=null)Q.$__.wasPopulated={value:A.unpopulatedValues[G]};if(Q instanceof Map&&!Q.$isMongooseMap)Q=new iQ1(Q,H,J[G],J[G].schema.path(H).$__schemaType)}if(gq.set(H,Q,J[G],Ed,W,!1),J[G].$__)rQ1(J[G],[A.allOptions.options])}};function oQ1(F){if(Array.isArray(F)){if(F.some((A)=>Array.isArray(A)||A===null))return F.map((A)=>{if(A==null)return 0;if(Array.isArray(A))return A.filter((B)=>B!=null).length;return 1});return F.filter((A)=>A!=null).length}return F==null?0:1}function JA(F,A,B,D){let X=typeof B.transform==="function",Z=X?B.transform:(J)=>J;if(Array.isArray(F)){let J=[],$=F.length;for(let G=0;G<$;++G){let C=F[G],W=Array.isArray(D)?D[G]:D;if(!bq(C)&&(!B.retainNullValues||C!=null)&&!X)continue;else if(!B.retainNullValues&&C==null)continue;else if(X)C=Z(bq(C)?C:null,W);if(Cd(C,A),J.push(C),A.originalLimit&&J.length>=A.originalLimit)break}let Y=J.length;while(F.length>Y)Array.prototype.pop.apply(F,[]);let E=0;if(ZZ.isMongooseArray(F))for(E=0;E<Y;++E)F.set(E,J[E],!0);else for(E=0;E<Y;++E)F[E]=J[E];return F}if(bq(F)||ZZ.isPOJO(F))return Cd(F,A),Z(F,D);if(F instanceof Map)return F;if(B.justOne===!1)return[];return F==null?Z(F,D):Z(null,D)}function Cd(F,A){if(F!=null&&A.excludeId)if(typeof F.$__setValue==="function")delete F._doc._id;else delete F._id}function bq(F){if(F==null)return!1;return Array.isArray(F)||F.$isMongooseMap||F.$__!=null||Wd.has(F)}});var Ud=z((Mu1,Kd)=>{var eQ1=FZ(),FK1=_C(),{trusted:JZ}=e7(),zd=pX();Kd.exports=function F(A,B,D,X,Z){let J=AK1(B);if(D.size===1){let $=Array.from(D)[0],Y=X.schema.path($);if($!=="_id"||!J._id)A=Qd(A,Y,Z),J[$]=JZ({$in:A});else if($==="_id"&&J._id){let G=zd(J[$])?J[$]:{$eq:J[$]};J[$]={...JZ({$in:A}),...G}}let E=FK1($);for(let G=0;G<E.length-1;++G){let C=E[G];if(J[C]!=null&&J[C].$elemMatch!=null){J[C].$elemMatch[$.slice(C.length+1)]=JZ({$in:A}),delete J[$];break}}}else{let $=[];if(Array.isArray(J.$or))J.$and=[{$or:J.$or},{$or:$}],delete J.$or;else J.$or=$;for(let Y of D)if(Y!=="_id"||!J._id){let E=X.schema.path(Y);A=Qd(A,E,Z),$.push({[Y]:{$in:A}})}else if(Y==="_id"&&J._id){let E=zd(J[Y])?J[Y]:{$eq:J[Y]};J[Y]={...JZ({$in:A}),...E}}}return J};function Qd(F,A,B){if(F=F.filter((D)=>!(D instanceof eQ1)),!B)return F;return F.filter((D)=>{try{return A.cast(D),!0}catch{return!1}})}function AK1(F){if(Array.isArray(F)){if(F.length>1)return{$or:[].concat(F.map((A)=>Object.assign({},A)))};return Object.assign({},F[0])}return Object.assign({},F)}});var Ld=z((ju1,Vd)=>{Vd.exports=function F(A,B,D){if(A.length===0)return D();let X=A.length,Z=null;for(let J of A)B(J,function($){if(Z!=null)return;if($!=null)return Z=$,D(Z);if(--X<=0)return D()})}});var Id=z((Tu1,Pd)=>{/*!
 * ignore
 */var wd=Z8(),BK1=K0(),DK1=M6(),Rd=ZA(),S8=C6(),XK1=t().populateModelSymbol;Pd.exports=function F(A,B,D,X){let Z=B.path(X),J=D;if(Z)return Z;let $=B.discriminatorMapping?.key;if($&&A!=null){if(D?.[$]!=null)B=DK1(A.discriminators,D[$])?.schema||B;else if(A.discriminators!=null)return Object.keys(A.discriminators).reduce((G,C)=>{let W=A.discriminators[C];return G.concat(F(W,W.schema,null,X))},[])}function Y(G,C,W,H){let q=G.length+1,Q,K;while(q--){if(K=G.slice(0,q).join("."),Q=C.path(K),Q==null)continue;if(Q.embeddedSchemaType||Q.schema){if(Q.embeddedSchemaType instanceof wd)return Q.embeddedSchemaType;let w=null;if(Q.schema?.discriminators!=null){let V=Q.schema.discriminators,N=K+"."+Q.schema.options.discriminatorKey,T=W?S8.get(N,W)||[]:[];w=Object.keys(V).reduce(function(I,u){let O=V[u].discriminatorMapping.value;if(D==null||T.indexOf(u)!==-1||T.indexOf(O)!==-1)I.push(V[u]);return I},[])}if(q!==G.length&&Q.schema){let V;if(G[q]==="$"){if(q+1===G.length)return Q;if(V=Y(G.slice(q+1),C,W?S8.get(K,W):null,H.concat(G.slice(0,q))),V)V.$parentSchemaDocArray=V.$parentSchemaDocArray||(Q.schema.$isSingleNested?null:Q);return V}if(w!=null&&w.length>0){V=[];for(let N of w){let T=Y(G.slice(q),N,W?S8.get(K,W):null,H.concat(G.slice(0,q)));if(T!=null){if(T.$parentSchemaDocArray=T.$parentSchemaDocArray||(Q.schema.$isSingleNested?null:Q),T.$parentSchemaDocArray)V.$parentSchemaDocArray=T.$parentSchemaDocArray;V.push(T)}}return V}else{if(V=Y(G.slice(q),Q.schema,W?S8.get(K,W):null,H.concat(G.slice(0,q))),V)V.$parentSchemaDocArray=V.$parentSchemaDocArray||(Q.schema.$isSingleNested?null:Q);return V}}else if(q!==G.length&&Q.$isMongooseArray&&Q.embeddedSchemaType.$isMongooseArray){let V=Q;while(V.$isMongooseArray&&!V.$isMongooseDocumentArray)V=V.embeddedSchemaType;let N=Y(G.slice(q),V.schema,null,H.concat(G.slice(0,q)));if(N!=null)return N;if(V.schema.discriminators){let T=[];for(let I of Object.keys(V.schema.discriminators)){let u=V.schema.discriminators[I]||V.schema,O=Y(G.slice(q),u,null,H.concat(G.slice(0,q)));if(O!=null)T.push(O)}if(T.length>0)return T}}}else if(Q.$isSchemaMap&&Q.$__schemaType instanceof wd)return Q.$__schemaType;let U=H.concat([K]).join(".");if(J?.$__&&J.$populated(U,!0)&&q<G.length){let w=J.$populated(U,!0).options[XK1];if(w!=null)return Y(G.slice(q),w.schema,W?S8.get(K,W):null,H.concat(G.slice(0,q)))}let R=BK1(J,K);if(R!=null){let V=(Array.isArray(R)&&R.length>0?Rd.get(R[0]):Rd.get(R))?.schema??null;if(V!=null){let N=Y(G.slice(q),V,W?S8.get(K,W):null,H.concat(G.slice(0,q)));if(N!=null)return N.$parentSchemaDocArray=N.$parentSchemaDocArray||(V.$isSingleNested?null:V),N}}return Q}}let E=X.split(".");for(let G=0;G<E.length;++G)if(E[G]==="$")E[G]="0";return Y(E,B,D,[])}});var ud=z((ku1,kd)=>{var cq=E6(),ZK1=FZ(),JK1=C0(),k6=K0(),YK1=M6(),$K1=S2(),Nd=Id(),EK1=_q(),YA=oD(),v9=C6(),YZ=GW(),i0=B1(),vq=t().modelSymbol,yq=t().populateModelSymbol,mq=M9().schemaMixedSymbol,GK1=VC();kd.exports=function F(A,B,D){let X,Z=B.length,J=[],$=D.model?.modelName||D.model,Y,E,G,C,W={},H=A.schema;if(D._localModel!=null&&D._localModel.schema.nested[D.path])return[];let q=EK1(A.schema,D.path);if((q==null?null:q.virtual)!=null)return CK1(A,B,D,q);let K=Nd(A,H,null,D.path);if(K=Array.isArray(K)?K:[K].filter((w)=>w!=null),!(D.strictPopulate===!1||D.options?.strictPopulate===!1)&&K.length===0&&D._localModel!=null)return new GK1(D._fullPath||D.path);for(let w=0;w<Z;w++){X=B[w];let V=null;if(X.$__!=null&&X.populated(D.path)){if((D.forceRepopulate??X.constructor.base.options.forceRepopulate)===!1)continue}let N=X?.$__!=null?X.$__schema:H;if(Y=Nd(A,N,X,D.path),Y!=null&&Y.$isMongooseDocumentArray&&Y.options.ref==null&&Y.options.refPath==null)continue;if(Y?.$parentSchemaDocArray&&k6(D,"options.sort")!=null)return new cq("Cannot populate with `sort` on path "+D.path+" because it is a subproperty of a document array");G=null;let I=!1,u=null,O=null,k=null;if(Y?.instance==="Embedded"){if(Y.options.ref){let e1={localField:D.path+"._id",foreignField:"_id",justOne:!0},x0=R(X,Y,$,A),f2=v9.get(D.path,X),Y2=v9.get("_id",f2);dq(A,J,W,x0.modelNames,D,e1,Y2,X,O,f2)}continue}if(Array.isArray(Y)){let e1=Y;for(let x0 of e1){let f2,Y2;try{Y2=R(X,x0,$,A),f2=Y2.modelNames,I=I||Y2.isRefPath,u=u||Y2.refPath,V=Y2.justOne}catch(K3){return K3}if(I&&!Y2.isRefPath)continue;if(!f2)continue;G=G||[],C=C||new Set;for(let K3 of f2)if(C.has(K3)===!1)C.add(K3),G.push(K3)}}else{try{let e1=R(X,Y,$,A);if(G=e1.modelNames,I=e1.isRefPath,u=u||e1.refPath,V=e1.justOne,O=k6(Y,"options.populate",null),I)k=G,G=Array.from(new Set(G))}catch(e1){return e1}if(!G)continue}let m={},h=D.path,o="_id";if("justOne"in D&&D.justOne!==void 0)V=D.justOne;else if(Y&&!Y[mq]){if(D.path.endsWith("."+Y.path)||D.path===Y.path)V=Array.isArray(Y)?Y.every((e1)=>!e1.$isMongooseArray):!Y.$isMongooseArray}if(!G)continue;m.isVirtual=!1,m.justOne=V,m.localField=h,m.foreignField=o;let A1=jd(X,h,A,D,null,Y),w2=String(i0.getValue(o,X));D._docs[w2]=Array.isArray(A1)?A1.slice():A1;let J2=k6(D,"match",null),y4=typeof J2==="function";if(y4)J2=J2.call(X,X);if(pq(J2),m.match=J2,m.hasMatchFunction=y4,m.isRefPath=I,m.modelNamesInOrder=k,I)G=WK1(X,H,m,D,u,A1)||G;try{dq(A,J,W,G,D,m,A1,X,O)}catch(e1){return e1}}return J;function R(w,V,N,T){let I,u=!1,O=null,k=V;if(V?.instance==="Array")V=V.embeddedSchemaType;if(V?.$isSchemaMap)V=V.$__schemaType;let m=V?.options?.ref;if(E=V?.options?.refPath,V!=null&&V[mq]&&!m&&!E&&!N)return{modelNames:null};if(N)I=[N];else if(E!=null){if(typeof E==="function"){let h=D.path.slice(0,D.path.length-V.path.length-1),o=v9.get(h,w,YA),A1=Array.isArray(o)?i0.array.flatten(o):o?[o]:[];I=new Set;for(let w2 of A1)E=E.call(w2,w2,D.path),YZ(E,w,D.path,H,D._queryProjection).forEach((J2)=>I.add(J2));I=Array.from(I)}else I=YZ(E,w,D.path,H,D._queryProjection);u=!0}else{let h,o,A1,w2,J2=T,y4=T.schema.options.discriminatorKey;if(!V&&y4&&(w2=i0.getValue(y4,w))){let e1=YK1(T.discriminators,w2)||T;if(e1!=null)J2=e1;else try{J2=lq(T.db,w2)}catch(x0){return x0}if(A1=J2.schema._getSchema(D.path),A1?.embeddedSchemaType)A1=A1.embeddedSchemaType}else A1=V;if(k&&k.path.endsWith(".$*"))O=!k.$isMongooseArray&&!k._arrayPath;else if(A1!=null)O=!A1.$isMongooseArray&&!A1._arrayPath;if((h=k6(A1,"options.ref"))!=null)if(A1!=null&&typeof h==="function"&&D.path.endsWith("."+A1.path)){I=new Set;let e1=D.path.slice(0,D.path.length-A1.path.length-1),x0=v9.get(e1,w,YA),f2=Array.isArray(x0)?i0.array.flatten(x0):x0?[x0]:[];for(let Y2 of f2)I.add(hq(h,Y2));if(f2.length===0)I=[hq(h,w)];else I=Array.from(I)}else h=hq(h,w),I=[h];else if((A1=k6(V,"options.refPath"))!=null)if(u=!0,typeof o==="function"){let e1=D.path.slice(0,D.path.length-A1.path.length-1),x0=v9.get(e1,w,YA),f2=Array.isArray(x0)?i0.array.flatten(x0):x0?[x0]:[];I=new Set;for(let Y2 of f2)o=o.call(Y2,Y2,D.path),YZ(o,w,D.path,H,D._queryProjection).forEach((K3)=>I.add(K3));I=Array.from(I)}else I=YZ(o,w,D.path,H,D._queryProjection)}if(!I)if(D._localModel==null)I=[T.modelName];else return{modelNames:I,justOne:O,isRefPath:u,refPath:E};if(!Array.isArray(I))I=[I];return{modelNames:I,justOne:O,isRefPath:u,refPath:E}}};/*!
 * ignore
 */function CK1(F,A,B,D){let X=[],Z={},J=D.virtual;for(let $ of A){let Y=null,E={},G,C=D.nestedSchemaPath?D.nestedSchemaPath+".":"";if(typeof B.localField==="string")G=B.localField;else if(typeof J.options.localField==="function")G=C+J.options.localField.call($,$);else if(Array.isArray(J.options.localField))G=J.options.localField.map((R)=>C+R);else G=C+J.options.localField;if(E.count=J.options.count,J.options.skip!=null&&!Object.hasOwn(B,"skip"))B.skip=J.options.skip;if(J.options.limit!=null&&!Object.hasOwn(B,"limit"))B.limit=J.options.limit;if(J.options.perDocumentLimit!=null&&!Object.hasOwn(B,"perDocumentLimit"))B.perDocumentLimit=J.options.perDocumentLimit;let W=J.options.foreignField;if(!G||!W)return new cq(`Cannot populate virtual \`${B.path}\` on model \`${F.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);if(typeof G==="function")G=G.call($,$);if(typeof W==="function")W=W.call($,$);E.isRefPath=!1;let H=null;if("justOne"in B&&B.justOne!==void 0)H=B.justOne;if(D.nestedSchemaPath&&typeof J.options.ref==="function"){let R=i0.getValue(D.nestedSchemaPath,$);Y=Array.isArray(R)?R.flatMap((w)=>J._getModelNamesForPopulate(w)):J._getModelNamesForPopulate(R)}else Y=J._getModelNamesForPopulate($);if(J.options.refPath)H=!!J.options.justOne,E.isRefPath=!0;else if(J.options.ref)H=!!J.options.justOne;E.isVirtual=!0,E.virtual=J,E.justOne=H;let q=k6(E,"virtual.options.match",null)||k6(E,"virtual.options.options.match",null),Q=k6(B,"match",null)||q,K=typeof Q==="function";if(K)Q=Q.call($,$,E.virtual);if(Array.isArray(G)&&Array.isArray(W)&&G.length===W.length){Q=Object.assign({},Q);for(let R=1;R<G.length;++R)Q[W[R]]=Td(v9.get(G[R],$,YA),F.schema),K=!0;G=G[0],W=W[0]}E.localField=G,E.foreignField=W,E.match=Q,E.hasMatchFunction=K,pq(Q);let U=jd($,G,F,B,J);try{dq(F,X,Z,Y,B,E,U,$)}catch(R){return R}}return X}/*!
 * ignore
 */function dq(F,A,B,D,X,Z,J,$,Y,E){let G=X.connection??F.db;if(E=E===void 0?J:E,Array.isArray(E))E=i0.cloneArrays(E);if(D==null)return;let C=i0.array.flatten(D),W=C.length;while(W--){let H=C[W];if(H==null)continue;let q;if(X.model&&X.model[vq])q=X.model;else if(H[vq])q=H,H=q.modelName;else try{q=lq(G,H)}catch(R){if(J!==void 0)throw R;q=null}let Q=J,K=Z.modelNamesInOrder||D;if(Z.isRefPath&&Array.isArray(J)&&J.length===K.length)Q=Md(J,K,H);let U=X.perDocumentLimit==null?k6(X,"options.perDocumentLimit",null):X.perDocumentLimit;if(!B[H]||U!=null){let R={model:q};if(Z.isVirtual&&k6(Z.virtual,"options.options"))R.options=JK1(Z.virtual.options.options);else if(Y!=null)R.options=Object.assign({},Y);i0.merge(R,X),X[yq]=q,R[yq]=q,B[H]={model:q,options:R,match:Z.hasMatchFunction?[Z.match]:Z.match,docs:[$],ids:[Q],allIds:[J],unpopulatedValues:[E],localField:new Set([Z.localField]),foreignField:new Set([Z.foreignField]),justOne:Z.justOne,isVirtual:Z.isVirtual,virtual:Z.virtual,count:Z.count,[yq]:q},A.push(B[H])}else if(B[H].localField.add(Z.localField),B[H].foreignField.add(Z.foreignField),B[H].docs.push($),B[H].ids.push(Q),B[H].allIds.push(J),B[H].unpopulatedValues.push(E),Z.hasMatchFunction)B[H].match.push(Z.match)}}function lq(F,A){if(F.models[A]==null&&F._parent!=null)return lq(F._parent,A);return F.model(A)}function Md(F,A,B){if(!Array.isArray(A))return A===B?Array.isArray(F)?i0.array.flatten(F):[F]:[];if(Array.isArray(F)&&Array.isArray(A))return F.flatMap((D,X)=>Md(D,A[X],B));return[]}/*!
 * ignore
 */function hq(F,A){if(typeof F==="function"&&!F[vq])return F.call(A,A);return F}/*!
 * ignore
 */function jd(F,A,B,D,X,Z){let J=B.schema._getPathType(A),$=J==="real"?B.schema.path(A):J.schema,Y=$?.getters||[];A=$?.instance==="Embedded"?A+"._id":A;let E=k6(D,"options",{}),G="getters"in E?E.getters:k6(X,"options.getters",!1);if(Y.length!==0&&G){let C=F.$__!=null?F:B.hydrate(F),W=i0.getValue(A,F);if(Array.isArray(W)){let H=i0.getValue(A.split(".").slice(0,-1),C);return W.map((q,Q)=>$.applyGetters(q,H[Q]))}else return $.applyGetters(W,C)}else return Td(v9.get(A,F,YA),Z)}function Td(F,A){if(F?.$__!=null)return F._doc._id;if(F?._id!=null&&!A?.$isSchemaMap)return F._id;if(Array.isArray(F)){let B=F.__array??F;for(let D=0;D<B.length;++D)if(B[D]?.$__!=null)B[D]=B[D]._doc._id;if(i0.isMongooseArray(F)&&F.$schema())return F.$schema()._castForPopulate(F,F.$parent());return[].concat(F)}if($K1(F)==="Object"&&A?.[mq]==null){let B=[];for(let D of Object.keys(F))B.push(F[D]);return B}if(F instanceof Map)return Array.from(F.values());return F}/*!
 * ignore
 */function WK1(F,A,B,D,X,Z){if(!B.isRefPath||X==null)return;let J=X.split("."),$="",Y=void 0;for(let E=0;E<J.length;++E){let G=J[E];$=$+($.length===0?"":".")+G;let C=A.path($);if(C!=null&&C.$isMongooseDocumentArray&&C.Constructor.discriminators!=null&&i0.hasOwnKeys(C.Constructor.discriminators)){let W=i0.getValue($,F),H=D.path.substring($.length+1),q=C.Constructor.schema.options.discriminatorKey;Y=[];for(let Q of W){let K=i0.getValue(q,Q),R=C.Constructor.discriminators[K]?.schema;if(R==null)continue;let w=R.path(H);if(w==null||w.options.refPath==null){let N=i0.getValue(B.localField.substring($.length+1),Q);Z.forEach((T,I)=>{if(T===N)Z[I]=ZK1(T)});continue}let V=i0.getValue(J.slice(E+1).join("."),Q);Y.push(V)}}}return Y}function pq(F){if(F==null)return;if(typeof F!=="object")return;for(let A of Object.keys(F)){if(A==="$where")throw new cq("Cannot use $where filter with populate() match");if(F[A]!=null&&typeof F[A]==="object")pq(F[A])}}});var Sd=z((uu1,Od)=>{var HK1=K0();Od.exports=function F(A){if(Array.isArray(A)){let D=Object.keys(A[0]);return D.length===1&&D[0]==="_id"&&A[0]._id!=="hashed"}if(typeof A!=="object")return!1;let B=HK1(A,"key",{});return Object.keys(B).length===1&&Object.hasOwn(B,"_id")}});var fd=z((Ou1,_d)=>{var $Z=K0(),xd=B1();_d.exports=function F(A,B,D){if(D.textIndexVersion!=null){delete D.key._fts,delete D.key._ftsx;let $={...D.weights,...D.key};if(Object.keys($).length!==Object.keys(A).length)return!1;for(let Y of Object.keys($)){if(!(Y in A))return!1;let E=$[Y];if(E!==$Z(B,"weights."+Y)&&!(E===1&&$Z(B,"weights."+Y)==null))return!1}if(B.default_language!==D.default_language)return D.default_language==="english"&&B.default_language==null;return!0}let X=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let $ of X){if(!($ in B)&&!($ in D))continue;if($==="collation"){if(B[$]==null||D[$]==null)return B[$]==null&&D[$]==null;let Y=Object.keys(B.collation),E=B.collation,G=D.collation;for(let C of Y)if($Z(E,C)!==$Z(G,C))return!1}else if(!xd.deepEqual(B[$],D[$]))return!1}let Z=Object.keys(A),J=Object.keys(D.key);if(Z.length!==J.length)return!1;for(let $=0;$<Z.length;++$){if(Z[$]!==J[$])return!1;if(!xd.deepEqual(A[Z[$]],D.key[J[$]]))return!1}return!0}});var bd=z((Su1,gd)=>{gd.exports=function F(A,B){if(B.timeseries==null)return!1;let{timeField:D,metaField:X}=B.timeseries;if(typeof D!=="string"||typeof X!=="string")return!1;return Object.keys(A.key).length===2&&A.key[D]===1&&A.key[X]===1}});var md=z((xu1,vd)=>{var qK1=pX();function zK1(F,A){return hd({baseModelName:F.baseModelName,discriminatorMapping:F.schema.discriminatorMapping,indexes:A,indexesType:"schema"})}function QK1(F,A){return hd({baseModelName:F.baseModelName,discriminatorMapping:F.schema.discriminatorMapping,indexes:A,indexesType:"db"})}vd.exports={getRelatedSchemaIndexes:zK1,getRelatedDBIndexes:QK1};function hd({baseModelName:F,discriminatorMapping:A,indexes:B,indexesType:D}){let X=A?.key,Z=A?.value;if(!X)return B;if(Boolean(F))return B.filter(($)=>{let Y=yd($,D);return Y&&Y[X]===Z});return B.filter(($)=>{let Y=yd($,D);return!Y||!Y[X]||qK1(Y[X])&&!("$eq"in Y[X])})}function yd(F,A){if(A==="schema")return F[1]?.partialFilterExpression;return F.partialFilterExpression}});var cd=z((_u1,dd)=>{dd.exports=KK1;/*!
 * ignore
 */async function KK1(F,A,B){if(B<=0)throw new Error("Limit must be positive");if(F.length===0)return[];let D=[],X=new Set;for(let Z=0;Z<F.length;Z++){let J=F[Z],$=A(J,Z);D.push($),X.add($);let Y=()=>X.delete($);if($.then(Y).catch(Y),X.size>=B)await Promise.race(X)}return Promise.all(D)}});var pd=z((fu1,ld)=>{ld.exports=function F(A,B,D){if(B==null)return;for(let X=0;X<B.length;++X)if(Array.isArray(B[X]))F(A,B[X],D+"."+X);else A.push(D+"."+X)}});var rd=z((gu1,sd)=>{var id=K0(),nd=C6(),ad=Kq();/*!
 * ignore
 */sd.exports=function F(A,B,D){let X=ad(id(B,"select",null),!0)||ad(id(B,"options.select",null),!0);if(X==null)return;for(let Z of A){if(!Object.hasOwn(X,"-"+Z))continue;for(let J of D)if(J.$__!=null)nd.unset(Z,J._doc);else nd.unset(Z,J)}}});var Sq=z((zc,Qc)=>{/*!
 * Module dependencies.
 */var UK1=jq(),VK1=rG(),Q3=W3(),LK1=KD(),nq=c("events").EventEmitter,GA=R9(),CZ=TH(),W1=E6(),wK1=ND(),RK1=EC(),EZ=sX(),PK1=Nm(),aq=u9(),GZ=I9(),Zc=ZC(),td=YC(),IK1=MD(),NK1=jm(),MK1=uq(),jK1=um(),Jc=Sm(),TK1=fm(),kK1=Zq(),Yc=hm(),uK1=mm(),$c=cm(),OK1=am(),Ec=Jq(),SK1=tm(),xK1=qd(),_K1=pH(),t3=C0(),fK1=Ud(),Gc=cH(),iq=SH(),Cc=OD(),gK1=LX(),bK1=Ld(),CA=K0(),yK1=S2(),$A=M6(),hK1=ud(),od=B4(),rq=i6().internalToObjectOptions,tq=Sd(),Wc=fd(),vK1=bd(),{getRelatedDBIndexes:mK1,getRelatedSchemaIndexes:dK1}=md(),oq=WW(),cK1=xD(),lK1=ZA(),pK1=cd(),iK1=Nq(),Hc=pd(),nK1=rd(),aK1=gH(),ed=c("util"),y1=B1(),sK1=xC(),rK1=WC(),tK1=ID(),m9=iH(),d9=Symbol("mongoose#Model#collection"),c9=Symbol("mongoose#Model#db"),qc=t().modelSymbol,EA=Symbol("mongoose#Model#subclassed"),{VERSION_INC:WZ,VERSION_WHERE:Fc,VERSION_ALL:oK1}=Q3,eK1=Object.assign({},rq,{bson:!0});function v(F,A,B){if(A instanceof aq)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof F==="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");Q3.call(this,F,A,B)}Object.setPrototypeOf(v.prototype,Q3.prototype);v.prototype.$isMongooseModelPrototype=!0;v.prototype.db;v.useConnection=function F(A){if(!A)throw new Error("Please provide a connection.");if(this.db)delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[c9],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[d9];this.db=A;let B=A.collection(this.collection.collectionName,A.options);return this.prototype.collection=B,this.prototype.$collection=B,this.prototype[d9]=B,this.prototype.db=A,this.prototype[c9]=A,this.collection=B,this.$__collection=B,A.models[this.modelName]=this,this};v.prototype.collection;v.prototype.$__collection;v.prototype.modelName;v.prototype.$where;v.prototype.baseModelName;v.events;v._middleware;/*!
 * ignore
 */function sq(F,A){if(F.$where==null)return;for(let B of Object.keys(F.$where))A[B]=F.$where[B]}/*!
 * ignore
 */function FU1(F,A){let B={};if(Ec(F.$__schema,A),typeof A.writeConcern!=="undefined"){if(B.writeConcern={},"w"in A.writeConcern)B.writeConcern.w=A.writeConcern.w;if("j"in A.writeConcern)B.writeConcern.j=A.writeConcern.j;if("wtimeout"in A.writeConcern)B.writeConcern.wtimeout=A.writeConcern.wtimeout}else{if("w"in A)B.w=A.w;if("j"in A)B.j=A.j;if("wtimeout"in A)B.wtimeout=A.wtimeout}if("checkKeys"in A)B.checkKeys=A.checkKeys;let D=F.$session(),X=F[c9].base.transactionAsyncLocalStorage?.getStore();if(D!=null)B.session=D;else if(!Object.hasOwn(A,"session")&&X?.session!=null)B.session=X.session;return B}/*!
 * ignore
 */v.prototype.$__save=async function F(A){try{await this._execDocumentPreHooks("save",A)}catch(J){await this._execDocumentPostHooks("save",J);return}let B=null,D=null;try{let J=FU1(this,A);if(this.$isNew){let $=this.toObject(eK1);if(($||{})._id===void 0)throw new W1("document must have an _id before saving");this.$__version(!0,$),this.$__reset(),x8(this,!1),this.$__.inserting=!0,B=await this[d9].insertOne($,J).catch((Y)=>{throw x8(this,!0),Y})}else{this.$__.inserting=!1;let $=this.$__delta();if(A.pathsToSave)for(let Y in $[1].$set)if(A.pathsToSave.includes(Y))continue;else if(A.pathsToSave.some((E)=>Y.slice(0,E.length)===E&&Y.charAt(E.length)==="."))continue;else delete $[1].$set[Y];if($){D=this.$__where($[0]),sq(this,D);let Y=$[1];if(this.$__schema.options.minimize)for(let E of Object.values(Y)){if(E==null)continue;for(let G of Object.keys(E)){if(E[G]==null||typeof E[G]!=="object")continue;if(!y1.isPOJO(E[G]))continue;if(sK1(E[G]),y1.hasOwnKeys(E[G])===!1)delete E[G],Y.$unset=Y.$unset||{},Y.$unset[G]=1}}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),x8(this,!1),B=await this[d9].updateOne(D,Y,J).catch((E)=>{throw this.$__undoReset(),E})}else{if(D=this.$__where(),sq(this,D),this.$__.version)this.$__version(D,$);kK1(this.$__schema,J),B=await this.constructor.collection.findOne(D,{...J,projection:{_id:1}}).then((Y)=>({matchedCount:!Y?0:1}))}}}catch(J){let $=this.$__schema._transformDuplicateKeyError(J);await this._execDocumentPostHooks("save",$);return}let X=0;if((A!=null?A.writeConcern!=null?A.writeConcern.w:A.w:0)!==0){if(B!=null)if(Array.isArray(B))X=B.length;else if(B.matchedCount!=null)X=B.matchedCount;else X=B;if(this.$__.version&&!this.$__.inserting){let $=WZ===(WZ&this.$__.version);this.$__.version=void 0;let Y=this.$__schema.options.versionKey,E=this.$__getValue(Y)||0;if(X<=0){this.$__undoReset();let G=this.$__.$versionError||new Zc(this,E,this.$__.modifiedPaths);await this._execDocumentPostHooks("save",G);return}if($)this.$__setValue(Y,E+1)}if(B!=null&&X<=0){this.$__undoReset();let $=new LK1(D,this.constructor.modelName,X,B);await this._execDocumentPostHooks("save",$);return}}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,X),this.constructor.emit("save",this,X),await this._execDocumentPostHooks("save")};/*!
 * ignore
 */function AU1(F,A,B){let D=F.$__schema.options.versionKey;if(!D)return null;let X=F.$__getValue(D)||0;return new Zc(F,X,A.concat(B))}v.prototype.save=async function F(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new W1("Model.prototype.save() no longer accepts a callback");let B;if(this.$op="save",this.$__.saving)B=new td(this);else this.$__.saving=new td(this);if(A=new PK1(A),Object.hasOwn(A,"session"))this.$session(A.session);if(this.$__.timestamps!=null)A.timestamps=this.$__.timestamps;if(this.$__.$versionError=AU1(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),B)throw this.$__handleReject(B),B;this.$__.saveOptions=A;try{await this.$__save(A)}catch(D){throw this.$__handleReject(D),D}finally{this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null}return this};v.prototype.$save=v.prototype.save;v.prototype.$__version=function(F,A){let B=this.$__schema.options.versionKey;if(F===!0){if(B)aK1(A,B,0),this.$__setValue(B,0);return}if(B===!1)return;if(!this.$__isSelected(B))return;if(Fc===(Fc&this.$__.version)){let D=this.$__getValue(B);if(D!=null)F[B]=D}if(WZ===(WZ&this.$__.version))if(CA(A.$set,B,null)!=null)++A.$set[B];else A.$inc=A.$inc||{},A.$inc[B]=1};v.prototype.increment=function F(){return this.$__.version=oK1,this};v.prototype.$__where=function F(A){if(A||(A={}),!A._id)A._id=this._doc._id;if(this._doc._id===void 0)throw new W1("No _id found on document!");return A};v.prototype.deleteOne=function F(A){if(typeof A==="function"||typeof arguments[1]==="function")throw new W1("Model.prototype.deleteOne() no longer accepts a callback");if(!A)A={};if(Object.hasOwn(A,"session"))this.$session(A.session);let B=this,D=this.$__where(),X=B.constructor.deleteOne();if(this.$session()!=null){if(!("session"in X.options))X.options.session=this.$session()}return X.pre(async function Z(){let J=await B.constructor._middleware.execPre("deleteOne",B,[B,A]);if(J[0]!==B||J[1]!==A)throw new Error("Document deleteOne pre hooks cannot overwrite arguments");if(X.deleteOne(D,A),B.$where!=null)this.where(B.$where);return J}),X.pre(function Z(){return Promise.all(B.$getAllSubdocs().map((J)=>J.constructor._middleware.execPre("deleteOne",J,[J])))}),X.pre(function Z(){if(B.$__.isDeleted)throw new GA.skipWrappedFunction}),X.post(function Z(){return Promise.all(B.$getAllSubdocs().map((J)=>J.constructor._middleware.execPost("deleteOne",J,[J])))}),X.post(function Z(){return B.constructor._middleware.execPost("deleteOne",B,[B],{})}),X.transform(function Z(J){if(J?.deletedCount>0)B.$isDeleted(!0);return J}),X};v.prototype.$model=function F(A){if(arguments.length===0)return this.constructor;return this[c9].model(A)};v.prototype.model=v.prototype.$model;v.exists=function F(A,B){if(Q1(this,"exists"),typeof arguments[2]==="function")throw new W1("Model.exists() no longer accepts a callback");return this.findOne(A).select({_id:1}).lean().setOptions(B)};v.discriminator=function(F,A,B){let D;if(typeof F==="function"){if(D=F,F=y1.getFunctionName(D),!(D.prototype instanceof v))throw new W1("The provided class "+F+" must extend Model")}B=B||{};let X=y1.isPOJO(B)?B.value:B,Z=typeof B.clone==="boolean"?B.clone:!0,J=typeof B.mergePlugins==="boolean"?B.mergePlugins:!0,$=typeof B.overwriteModels==="boolean"?B.overwriteModels:!1;if(Q1(this,"discriminator"),y1.isObject(A)&&!A.instanceOfSchema)A=new aq(A);if(A instanceof aq&&Z)A=A.clone();if(A=gK1(this,F,A,X,J,B.mergeHooks,$),this.db.models[F]&&!A.options.overwriteModels&&!$)throw new RK1(F);A.$isRootDiscriminator=!0,A.$globalPluginsApplied=!0,D=this.db.model(D||F,A,this.$__collection.name),this.discriminators[F]=D;let Y=this.discriminators[F];if(Object.setPrototypeOf(Y.prototype,this.prototype),Object.defineProperty(Y,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),Jc(Y,A),$c(Y,A),this[EA]!=null)for(let E of this[EA])E.discriminators=E.discriminators||{},E.discriminators[F]=D.__subclass(D.db,A,E.collection.name);return Y};function Q1(F,A){if(F==null||F===global)throw new W1("`Model."+A+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+A+"()` where `MyModel` is a Mongoose model.");else if(F[qc]==null)throw new W1("`Model."+A+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+A+"()`")}/*!
 * Give the constructor the ability to emit events.
 */for(let F in nq.prototype)v[F]=nq.prototype[F];v.init=function F(){if(Q1(this,"init"),typeof arguments[0]==="function")throw new W1("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let A=this.db,B=async()=>{if(!y1.getOption("autoIndex",this.schema.options,A.config,A.base.options))return;return await this.ensureIndexes({_automatic:!0})},D=async()=>{if(!y1.getOption("autoSearchIndex",this.schema.options,A.config,A.base.options))return;return await this.createSearchIndexes()},X=async()=>{let $=y1.getOption("autoCreate",this.schema.options,A.config);if($==null)await A._waitForConnect(!0),$=y1.getOption("autoCreate",this.schema.options,A.config,A.base.options);if(!$)return;return await this.createCollection()};this.$init=X().then(()=>B()).then(()=>D());let Z=this.$init.catch,J=this;return this.$init.catch=function(){return J.$caught=!0,Z.apply(J.$init,arguments)},this.$init};v.createCollection=async function F(A){if(Q1(this,"createCollection"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.createCollection() no longer accepts a callback");[A]=await this.hooks.execPre("createCollection",this,[A]).catch(($)=>{if($ instanceof GA.skipWrappedFunction)return[$];throw $});let B=this?.schema?.options?.collectionOptions;if(B!=null)A=Object.assign({},B,A);let D=this?.schema?.options?.collation;if(D!=null)A=Object.assign({collation:D},A);let X=this?.schema?.options?.capped;if(X!=null){if(typeof X==="number")A=Object.assign({capped:!0,size:X},A);else if(typeof X==="object")A=Object.assign({capped:!0},X,A)}let Z=this?.schema?.options?.timeseries;if(Z!=null){if(A=Object.assign({timeseries:Z},A),A.expireAfterSeconds!=null);else if(A.expires!=null)y1.expires(A);else if(this.schema.options.expireAfterSeconds!=null)A.expireAfterSeconds=this.schema.options.expireAfterSeconds;else if(this.schema.options.expires!=null)A.expires=this.schema.options.expires,y1.expires(A)}let J=this?.schema?.options?.clusteredIndex;if(J!=null)A=Object.assign({clusteredIndex:{...J,unique:!0}},A);try{if(!(A instanceof GA.skipWrappedFunction))await this.db.createCollection(this.$__collection.collectionName,A)}catch($){if($!=null&&($.name!=="MongoServerError"||$.code!==48))await this.hooks.execPost("createCollection",this,[null],{error:$})}return await this.hooks.execPost("createCollection",this,[this.$__collection]),this.$__collection};v.syncIndexes=async function F(A){if(Q1(this,"syncIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.syncIndexes() no longer accepts a callback");if(A?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??this.db.base?.options?.autoCreate??!0)try{await this.createCollection()}catch(Z){if(Z!=null&&(Z.name!=="MongoServerError"||Z.code!==48))throw Z}let D=await this.diffIndexes({indexOptionsToCreate:!0}),X=await this.cleanIndexes({...A,toDrop:D.toDrop});return await this.createIndexes({...A,toCreate:D.toCreate}),X};v.createSearchIndex=async function F(A){return Q1(this,"createSearchIndex"),await this.$__collection.createSearchIndex(A)};v.updateSearchIndex=async function F(A,B){return Q1(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(A,B)};v.dropSearchIndex=async function F(A){return Q1(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(A)};v.listSearchIndexes=async function F(A){return Q1(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(A)).toArray()};v.diffIndexes=async function F(A){if(typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.syncIndexes() no longer accepts a callback");let B=this,D=await B.listIndexes().catch((Y)=>{if(Y.codeName=="NamespaceNotFound")return;throw Y});if(D===void 0)D=[];D=mK1(B,D);let X=B.schema,Z=dK1(B,X.indexes()),J=DU1(X,Z,D),$=BU1(X,Z,D,J,A);return{toDrop:J,toCreate:$}};function BU1(F,A,B,D,X){let Z=[],J=X?.indexOptionsToCreate??!1;for(let[$,Y]of A){let E=!1,G=oq(F,t3(Y));for(let C of B){if(tq(C))continue;if(Wc($,G,C)&&!D.includes(C.name)){E=!0;break}}if(!E)if(J)Z.push([$,Y]);else Z.push($)}return Z}function DU1(F,A,B){let D=[];for(let X of B){let Z=!1;if(tq(X))continue;if(vK1(X,F.options))continue;for(let[J,$]of A){let Y=oq(F,t3($));if(Yc(J,Y,F.options),Wc(J,Y,X)){Z=!0;break}}if(Z)continue;D.push(X.name)}return D}v.cleanIndexes=async function F(A){if(Q1(this,"cleanIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.cleanIndexes() no longer accepts a callback");let B=this;if(Array.isArray(A?.toDrop))return await Ac(A.toDrop,B,A);let D=await B.diffIndexes();return await Ac(D.toDrop,B,A)};async function Ac(F,A,B){if(F.length===0)return[];let D=A.$__collection;if(B?.hideIndexes)await Promise.all(F.map((X)=>{return A.db.db.command({collMod:D.collectionName,index:{name:X,hidden:!0}})}));else await Promise.all(F.map((X)=>D.dropIndex(X)));return F}v.listIndexes=async function F(){if(Q1(this,"listIndexes"),typeof arguments[0]==="function")throw new W1("Model.listIndexes() no longer accepts a callback");if(this.$__collection.buffer)await new Promise((A)=>{this.$__collection.addQueue(A)});return this.$__collection.listIndexes().toArray()};v.ensureIndexes=async function F(A){if(Q1(this,"ensureIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.ensureIndexes() no longer accepts a callback");await new Promise((B,D)=>{XU1(this,A,(X)=>{if(X!=null)return D(X);B()})})};v.createIndexes=async function F(A){if(Q1(this,"createIndexes"),typeof arguments[0]==="function"||typeof arguments[1]==="function")throw new W1("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(A)};/*!
 * ignore
 */function XU1(F,A,B){let D=Array.isArray(A?.toCreate)?A.toCreate:F.schema.indexes(),X;A=A||{};let Z=function(C){if(C&&!F.$caught)F.emit("error",C);F.emit("index",C||X),B&&B(C||X)};for(let C of D)if(tq(C))y1.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+F.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!D.length){od(function(){Z()});return}let J=function(C,W,H,q){F.emit("index-single-done",C,W,H,q)},$=function(C,W){F.emit("index-single-start",C,W)},Y=F.schema._baseSchema,E=Y?Y.indexes():[];od(function(){if(A._automatic&&!F.collection.collection)F.collection.addQueue(G,[]);else G()});function G(){if(A._automatic){if(F.schema.options.autoIndex===!1||F.schema.options.autoIndex==null&&F.db.config.autoIndex===!1)return Z()}let C=D.shift();if(!C)return Z();if(A._automatic&&C[1]._autoIndex===!1)return G();if(E.find((Q)=>y1.deepEqual(Q,C)))return G();let W=t3(C[0]),H=t3(C[1]);delete H._autoIndex,oq(F.schema,H),Ec(F.schema,H),Yc(W,H,F.schema.options),$(W,A);let q=null;try{q=F.collection.createIndex(W,H)}catch(Q){if(!X)X=Q;if(!F.$caught)F.emit("error",Q);J(Q,W,H),G();return}q.then((Q)=>{J(null,W,H,Q),G()},(Q)=>{if(!X)X=Q;if(!F.$caught)F.emit("error",Q);J(Q,W,H),G()})}}v.createSearchIndexes=async function F(){Q1(this,"createSearchIndexes");let A=[];for(let B of this.schema._searchIndexes)A.push(await this.createSearchIndex(B));return A};v.schema;v.db;v.collection;v.$__collection;v.base;v.discriminators;v.translateAliases=function F(A,B){Q1(this,"translateAliases");let D=(X,Z)=>{let J,$=[],Y=X.split("."),E=this.schema;for(let C in Y){let W=Y[C];if(E?.aliases[W]){if(J=E.aliases[W],B&&J in A)throw new W1(`Provided object has both field "${W}" and its alias "${J}"`);$.push(J)}else J=W,$.push(W);if(E?.paths[J])E=E.paths[J].schema;else E=null}let G=$.join(".");if(A instanceof Map)A.set(G,Z);else A[G]=Z;if(G!==X)if(A instanceof Map)A.delete(X);else delete A[X];return A};if(typeof A==="object"){if(A instanceof Map)for(let X of new Map(A))A=D(X[0],X[1]);else for(let X of Object.keys(A))if(A=D(X,A[X]),X[0]==="$")if(Array.isArray(A[X]))for(let Z in A[X])A[X][Z]=this.translateAliases(A[X][Z]);else this.translateAliases(A[X]);return A}else return A};v.deleteOne=function F(A,B){if(Q1(this,"deleteOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.prototype.deleteOne() no longer accepts a callback");let D=new this.Query({},{},this,this.$__collection);return D.setOptions(B),D.deleteOne(A)};v.deleteMany=function F(A,B){if(Q1(this,"deleteMany"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.deleteMany() no longer accepts a callback");let D=new this.Query({},{},this,this.$__collection);return D.setOptions(B),D.deleteMany(A)};v.find=function F(A,B,D){if(Q1(this,"find"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new W1("Model.find() no longer accepts a callback");let X=new this.Query({},{},this,this.$__collection);return X.select(B),X.setOptions(D),X.find(A)};v.findById=function F(A,B,D){if(Q1(this,"findById"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.findById() no longer accepts a callback");return this.findOne({_id:A},B,D)};v.findOne=function F(A,B,D){if(Q1(this,"findOne"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.findOne() no longer accepts a callback");let X=new this.Query({},{},this,this.$__collection);return X.select(B),X.setOptions(D),X.findOne(A)};v.estimatedDocumentCount=function F(A){return Q1(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(A)};v.countDocuments=function F(A,B){if(Q1(this,"countDocuments"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.countDocuments() no longer accepts a callback");let D=new this.Query({},{},this,this.$__collection);if(B!=null)D.setOptions(B);return D.countDocuments(A)};v.distinct=function F(A,B,D){if(Q1(this,"distinct"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.distinct() no longer accepts a callback");let X=new this.Query({},{},this,this.$__collection);if(D!=null)X.setOptions(D);return X.distinct(A,B)};v.where=function F(A,B){Q1(this,"where");let D=new this.Query({},{},this,this.$__collection).find({});return D.where.apply(D,arguments)};v.$where=function F(){Q1(this,"$where");let A=new this.Query({},{},this,this.$__collection).find({});return A.$where.apply(A,arguments)};v.findOneAndUpdate=function(F,A,B){if(Q1(this,"findOneAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new W1("Model.findOneAndUpdate() no longer accepts a callback");let D;if(B)D=B.fields||B.projection;A=t3(A,{depopulate:!0,_isNested:!0}),Gc(A,B,this.schema.options.versionKey);let X=new this.Query({},{},this,this.$__collection);return X.select(D),X.findOneAndUpdate(F,A,B)};v.findByIdAndUpdate=function(F,A,B){if(Q1(this,"findByIdAndUpdate"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new W1("Model.findByIdAndUpdate() no longer accepts a callback");if(F instanceof Q3)F=F._doc._id;return this.findOneAndUpdate.call(this,{_id:F},A,B)};v.findOneAndDelete=function(F,A){if(Q1(this,"findOneAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.findOneAndDelete() no longer accepts a callback");let B;if(A)B=A.select,A.select=void 0;let D=new this.Query({},{},this,this.$__collection);return D.select(B),D.findOneAndDelete(F,A)};v.findByIdAndDelete=function(F,A){if(Q1(this,"findByIdAndDelete"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function")throw new W1("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:F},A)};v.findOneAndReplace=function(F,A,B){if(Q1(this,"findOneAndReplace"),typeof arguments[0]==="function"||typeof arguments[1]==="function"||typeof arguments[2]==="function"||typeof arguments[3]==="function")throw new W1("Model.findOneAndReplace() no longer accepts a callback");let D;if(B)D=B.select,B.select=void 0;let X=new this.Query({},{},this,this.$__collection);return X.select(D),X.findOneAndReplace(F,A,B)};v.create=async function F(A,B){if(typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.create() no longer accepts a callback");Q1(this,"create");let D,X=this.schema.options.discriminatorKey;if(Array.isArray(A))D=A,B=B!=null&&typeof B==="object"?B:{};else{let $=arguments[arguments.length-1];if(B={},typeof $==="function"||typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.create() no longer accepts a callback");else if(D=[...arguments],D.length>1&&!$)D.pop();if(D.length===2&&D[0]!=null&&D[1]!=null&&D[0].session==null&&$&&yK1($.session)==="ClientSession"&&!this.schema.path("session"))y1.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(D.length===0)return Array.isArray(A)?[]:null;let Z=[],J=typeof B.aggregateErrors==="boolean"?!B.aggregateErrors:!0;if(delete B.aggregateErrors,B.session&&!B.ordered&&D.length>1)throw new W1("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if(B.ordered){for(let $=0;$<D.length;$++)try{let Y=D[$],E=this.discriminators&&Y[X]!=null?this.discriminators[Y[X]]||$A(this.discriminators,Y[X]):this;if(E==null)throw new W1(`Discriminator "${Y[X]}" not found for model "${this.modelName}"`);let G=Y;if(!(G instanceof E))G=new E(G);await G.$save(B),Z.push(G)}catch(Y){if(!J)Z.push(Y);else throw Y}return Z}else if(!J)Z=await Promise.allSettled(D.map(async($)=>{let Y=this.discriminators&&$[X]!=null?this.discriminators[$[X]]||$A(this.discriminators,$[X]):this;if(Y==null)throw new W1(`Discriminator "${$[X]}" not found for model "${this.modelName}"`);let E=$;if(!(E instanceof Y))E=new Y(E);return await E.$save(B),E})),Z=Z.map(($)=>$.status==="fulfilled"?$.value:$.reason);else{let $=null;if(Z=await Promise.all(D.map(async(Y)=>{let E=this.discriminators&&Y[X]!=null?this.discriminators[Y[X]]||$A(this.discriminators,Y[X]):this;if(E==null)throw new W1(`Discriminator "${Y[X]}" not found for model "${this.modelName}"`);try{let G=Y;if(!(G instanceof E))G=new E(G);return await G.$save(B),G}catch(G){if(!$)$=G}})),$)throw $}if(!Array.isArray(A)&&D.length===1)return Z[0];return Z};v.insertOne=async function F(A,B){Q1(this,"insertOne");let D=this.schema.options.discriminatorKey,X=this.discriminators&&A[D]!=null?this.discriminators[A[D]]||$A(this.discriminators,A[D]):this;if(X==null)throw new W1(`Discriminator "${A[D]}" not found for model "${this.modelName}"`);if(!(A instanceof X))A=new X(A);return await A.$save(B)};v.watch=function(F,A){Q1(this,"watch"),A=A||{};let B=A?.hydrate!==void 0?y1.omit(A,["hydrate"]):{...A};return A.model=this,new VK1((X)=>{if(F=F||[],iK1(F,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let Z=this.$__collection.watch(F,B);X(null,Z)});else{let Z=this.$__collection.watch(F,B);X(null,Z)}},F,A)};v.startSession=function(){return Q1(this,"startSession"),this.db.startSession.apply(this.db,arguments)};v.insertMany=async function F(A,B){if(Q1(this,"insertMany"),typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.insertMany() no longer accepts a callback");try{[A]=await this._middleware.execPre("insertMany",this,[A])}catch(V){await this._middleware.execPost("insertMany",this,[A],{error:V})}B=B||{};let D=this,X=B.limit||1000,Z=!!B.rawResult,J=typeof B.ordered==="boolean"?B.ordered:!0,$=typeof B.throwOnValidationError==="boolean"?B.throwOnValidationError:!1,Y=!!B.lean,E=this.db.base.transactionAsyncLocalStorage?.getStore();if((!B||!Object.hasOwn(B,"session"))&&E?.session!=null)B={...B,session:E.session};if(!Array.isArray(A))A=[A];let G=[],C=new Map,W=J?null:new Array(A.length);async function H(V,N){if(Y)return V;let T=!1;if(!(V instanceof D)){if(V!=null&&typeof V!=="object")throw new wK1(V,"arr."+N,"insertMany");V=new D(V),T=!0}if(B.session!=null)V.$session(B.session);return V.$validate(T?{_skipParallelValidateCheck:!0}:null).then(()=>V).catch((I)=>{if(J===!1){I.index=N,G.push(I),C.set(I,N),W[N]=I;return}throw I})}let q=await pK1(A,H,X),Q=new Map,K=new Map;for(let V=0;V<q.length;++V)Q.set(q[V],V);let U=q.filter(function(V){return V!=null});for(let V=0;V<U.length;++V)K.set(V,Q.get(U[V]));if(G.length>0)G.sort((V,N)=>{return C.get(V)-C.get(N)});if(U.length===0){if($)throw new CZ(G,W,null,"insertMany");if(Z){let V={acknowledged:!0,insertedCount:0,insertedIds:{}};return m9(V,G,G),V}return[]}let R=Y?U:U.map(function(V){if(V.$__schema.options.versionKey)V[V.$__schema.options.versionKey]=0;if((!B||B.timestamps!==!1)&&V.initializeTimestamps&&(!V.$__||V.$__.timestamps!==!1))V.initializeTimestamps();if(V.$__hasOnlyPrimitiveValues())return V.$__toObjectShallow();return V.toObject(rq)}),w;try{w=await this.$__collection.insertMany(R,B)}catch(V){if(V.writeErrors==null&&V.result?.result?.writeErrors!=null)V.writeErrors=V.result.result.writeErrors;let N=V?.writeErrors,T=new Set((V?.writeErrors||[]).map((u)=>u.index));if(V.writeErrors!=null)for(let u=0;u<V.writeErrors.length;++u){let O=K.get(V.writeErrors[u].index);if(V.writeErrors[u]={...V.writeErrors[u],index:O},!J)W[O]=V.writeErrors[u]}if(!J){for(let u=0;u<W.length;++u)if(W[u]===void 0)W[u]=q[u];V.results=W}let I=-1;if(V.insertedDocs=U.filter((u,O)=>{let k=!N||T.has(O);if(J){if(I>-1)return O<I;if(k)I=O}return!k}).map(function u(O){if(Y)return O;return O.$__reset(),x8(O,!1),O}),Z&&J===!1)m9(V,G,W);await this._middleware.execPost("insertMany",this,[A],{error:V})}if(!Y)for(let V of U)V.$__reset(),x8(V,!1);if(J===!1&&$&&G.length>0){for(let V=0;V<W.length;++V)if(W[V]===void 0)W[V]=q[V];throw new CZ(G,W,w,"insertMany")}if(Z){if(J===!1){for(let V=0;V<W.length;++V)if(W[V]===void 0)W[V]=q[V];m9(w,G,W)}return w}if(B.populate!=null)return this.populate(U,B.populate).catch((V)=>{if(V!=null)V.insertedDocs=U;throw V});return await this._middleware.execPost("insertMany",this,[U]).then((V)=>V[0])};/*!
 * ignore
 */function x8(F,A){F.$isNew=A,F.$emit("isNew",A),F.constructor.emit("isNew",A);let B=F.$getAllSubdocs({useCache:!0});for(let D of B)D.$isNew=A,D.$emit("isNew",A)}v.bulkWrite=async function F(A,B){if(Q1(this,"bulkWrite"),typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.bulkWrite() no longer accepts a callback");B=B||{};try{[A,B]=await this.hooks.execPre("bulkWrite",this,[A,B])}catch($){if($ instanceof GA.skipWrappedFunction)A=$;else await this.hooks.execPost("bulkWrite",this,[null],{error:$})}if(A instanceof GA.skipWrappedFunction)return A.args[0];let D=B.ordered==null?!0:B.ordered;if(A.length===0){let Y=new(this.base.driver.get()).BulkWriteResult(iq(),!1);return Y.n=0,m9(Y,[],[]),Y}let X=B?._skipCastBulkWrite?[]:A.map(($)=>_K1(this,$,B)),Z=this.db.base.transactionAsyncLocalStorage?.getStore();if((!B||!Object.hasOwn(B,"session"))&&Z?.session!=null)B={...B,session:Z.session};let J=null;if(D){await new Promise(($,Y)=>{bK1(X,(E,G)=>E(G),(E)=>{if(E)return Y(E);$()})});try{J=await this.$__collection.bulkWrite(A,B)}catch($){await this.hooks.execPost("bulkWrite",this,[null],{error:$})}}else{let $=[],Y=[],E=[];if(X.length>0)$=await Promise.all(A.map((H,q)=>{if(q>=X.length)return q;return new Promise((Q)=>{X[q]((K)=>{if(K==null)Q(q);else Y.push({index:q,error:K}),E[q]=K;Q()})})})),$=$.filter((H)=>H!=null);else $=A.map((H,q)=>q);Y=Y.sort((H,q)=>H.index-q.index).map((H)=>H.error);let G=$.sort().map((H)=>A[H]);if(G.length===0){if(B.throwOnValidationError&&Y.length)throw new CZ(Y,E,J,"bulkWrite");let q=new(this.base.driver.get()).BulkWriteResult(iq(),!1);return q.result=iq(),m9(q,Y,E),q}let C;[J,C]=await this.$__collection.bulkWrite(G,B).then((H)=>[H,null]).catch((H)=>[null,H]);let W={};if(C?.writeErrors)for(let H of C.writeErrors)W[H.err.index]=H;for(let H=0;H<$.length;++H)E[$[H]]=W[H]??null;if(C){if(Y.length>0)m9(C,Y,E);await this.hooks.execPost("bulkWrite",this,[null],{error:C})}if(Y.length>0)if(B.throwOnValidationError)throw new CZ(Y,E,J,"bulkWrite");else m9(J,Y,E)}return await this.hooks.execPost("bulkWrite",this,[J]),J};v.bulkSave=async function F(A,B){if(B=B||{},B.timestamps!=null)for(let G of A)G.$__.saveOptions=G.$__.saveOptions||{},G.$__.saveOptions.timestamps=B.timestamps;else for(let G of A)if(G.$__.timestamps!=null)G.$__.saveOptions=G.$__.saveOptions||{},G.$__.saveOptions.timestamps=G.$__.timestamps;await Promise.all(A.map((G)=>ZU1(G,B)));let D=this.buildBulkWriteOperations(A,B),X={skipValidation:!0,_skipCastBulkWrite:!0,...B},{bulkWriteResult:Z,bulkWriteError:J}=await this.bulkWrite(D,X).then((G)=>({bulkWriteResult:G,bulkWriteError:null}),(G)=>({bulkWriteResult:null,bulkWriteError:G}));if(J!=null&&J.name!=="MongoBulkWriteError")throw J;let $=Z?.matchedCount??0,Y=Z?.insertedCount??0;if(D.length>0&&$+Y<D.length&&!J)throw new rK1(this.modelName,A,Z);let E=[];for(let G=0;G<A.length;G++){let C=A[G];if(J?.writeErrors.find((H)=>{return(H.err.op._id||H.err.op.q._id).toString()===C._doc._id.toString()})==null)E.push(C)}if(await Promise.all(E.map((G)=>JU1(G))),J!=null)throw J;return Z};async function ZU1(F,A){let[B]=await F.schema.s.hooks.execPre("save",F,[A]);if(B!==A)throw new Error('Cannot overwrite options in pre("save") hook on bulkSave()')}async function JU1(F){if(F.$isNew)x8(F,!1);return F.$__reset(),F._applyVersionIncrement(),F.schema.s.hooks.execPost("save",F,[F])}v.applyDefaults=function F(A){if(A==null)return A;if(A.$__!=null){IK1(A,A.$__.fields,A.$__.exclude);for(let B of A.$getAllSubdocs())F(B,B.$__.fields,B.$__.exclude);return A}return NK1(A,this.schema),A};v.applyVirtuals=function F(A,B){if(A==null)return A;if(A.$__!=null)return A;return SK1(this.schema,A,B),A};v.applyTimestamps=function F(A,B){if(A==null)return A;if(A.$__!=null)return A;return OK1(this.schema,A,B),A};v.castObject=function F(A,B){B=B||{};let D={},X=this.schema,Z=X.options.discriminatorKey;if(X.discriminators!=null&&A!=null&&A[Z]!=null)X=Cc(X,A[Z])||X;let J=Object.keys(X.paths);for(let Y of J){if(!X.path(Y)?.$isMongooseArray)continue;let G=CA(A,Y);Hc(J,G,Y)}let $=null;for(let Y of J){let E=X.path(Y);if(E==null)continue;let G=CA(A,Y,void 0);if(G==null)continue;let C=Y.indexOf(".")===-1?[Y]:Y.split("."),W=D;for(let H=0;H<C.length-1;++H){if(W[C[H]]==null)W[C[H]]=isNaN(C[H+1])?{}:[];W=W[C[H]]}if(E.$isMongooseDocumentArray){let H=E.options?.castNonArrays??E.constructor.options.castNonArrays;if(!Array.isArray(G)){if(!H){if(!B.ignoreCastErrors)$=$||new GZ,$.addError(Y,new tK1(Y,G))}else W[C[C.length-1]]=[v.castObject.call(E.Constructor,G)];continue}}if(E.$isSingleNested||E.$isMongooseDocumentArrayElement){try{G=v.castObject.call(E.Constructor,G)}catch(H){if(!B.ignoreCastErrors)$=$||new GZ,$.addError(Y,H);continue}W[C[C.length-1]]=G;continue}try{G=E.cast(G),W[C[C.length-1]]=G}catch(H){if(!B.ignoreCastErrors)$=$||new GZ,$.addError(Y,H);continue}}if($!=null)throw $;return D};v.buildBulkWriteOperations=function F(A,B){if(!Array.isArray(A))throw new Error(`bulkSave expects an array of documents to be passed, received \`${A}\` instead`);return X(),A.map((Z,J)=>{if(!B.skipValidation){if(!(Z instanceof Q3))throw new Error(`documents.${J} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if(B.validateBeforeSave==null||B.validateBeforeSave){let G=Z.validateSync();if(G!=null)throw G}}if(Z.isNew){let G={insertOne:{document:Z}};return y1.injectTimestampsOption(G.insertOne,B.timestamps),G}let Y=Z.$__delta();if(Y!=null&&!y1.isEmptyObject(Y[0])){let G=Z.$__where(Y[0]),C=Y[1];sq(Z,G);let W=this.schema.options.shardKey;if(W){let q=Object.keys(W),Q=q.length;for(let K=0;K<Q;++K)G[q[K]]=Z[q[K]]}Z.$__version(G,Y);let H={updateOne:{filter:G,update:C}};return y1.injectTimestampsOption(H.updateOne,B.timestamps),H}return null}).filter((Z)=>Z!==null);function X(){if(B=B||{},B.skipValidation==null)B.skipValidation=!1}};v.hydrate=function(F,A,B){if(Q1(this,"hydrate"),B?.virtuals&&B?.hydratedPopulatedDocs===!1)throw new W1("Cannot set `hydratedPopulatedDocs` option to false if `virtuals` option is truthy because `virtuals: true` also sets populated virtuals");if(A!=null){if(F?.$__!=null)F=F.toObject(rq);F=TK1(F,A)}let D=UF().createModel(this,F,A);return D.$init(F,B),D};v.updateMany=function F(A,B,D){if(Q1(this,"updateMany"),B==null)throw new W1("updateMany `update` parameter cannot be nullish");return eq(this,"updateMany",A,B,D)};v.updateOne=function F(A,B,D){return Q1(this,"updateOne"),eq(this,"updateOne",A,B,D)};v.replaceOne=function F(A,B,D){Q1(this,"replaceOne");let X=this?.schema?.options?.versionKey||null;if(X&&!B[X])B[X]=0;return eq(this,"replaceOne",A,B,D)};function eq(F,A,B,D,X){let Z=new F.Query({},{},F,F.collection);if(B instanceof Q3)B=B.toObject();else B=t3(B);X=typeof X==="function"?X:t3(X);let J=F?.schema?.options?.versionKey||null;return Gc(D,X,J),Z[A](B,D,X)}v.aggregate=function F(A,B){if(Q1(this,"aggregate"),typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.aggregate() no longer accepts a callback");let D=new UK1(A||[]);if(D.model(this),B!=null)D.option(B);return D};v.validate=async function F(A,B,D){if(arguments.length<3||arguments.length===3&&typeof arguments[2]==="function")D=A;if(typeof D==="function"||typeof arguments[3]==="function")throw new W1("Model.validate() no longer accepts a callback");let X=this.schema,Z=X.options.discriminatorKey;if(X.discriminators!=null&&A!=null&&A[Z]!=null)X=Cc(X,A[Z])||X;let J=Object.keys(X.paths);if(B!=null){let E=typeof B==="string"?new Set(B.split(" ")):Array.isArray(B)?new Set(B):new Set(J);J=J.filter((G)=>{if(B.pathsToSkip){if(Array.isArray(B.pathsToSkip)){if(B.pathsToSkip.find((H)=>H==G))return!1}else if(typeof B.pathsToSkip=="string"){if(B.pathsToSkip.includes(G))return!1}}let C=G.split("."),W=C[0];for(let H of C){if(E.has(W))return!0;W+="."+H}return E.has(G)})}for(let E of J){let G=X.path(E);if(!G?.$isMongooseArray||G.$isMongooseDocumentArray)continue;let C=CA(A,E);Hc(J,C,E)}let $=null;J=new Set(J);try{A=this.castObject(A)}catch(E){$=E;for(let G of Object.keys($.errors||{}))J.delete(G)}let Y=[];for(let E of J){let G=X.path(E);if(G==null)continue;let C=E.indexOf(".")===-1?[E]:E.split("."),W=A;for(let q=0;q<C.length-1;++q)W=W[C[q]];let H=CA(A,E,void 0);Y.push(G.doValidate(H,D,{path:E}).catch((q)=>{$=$||new GZ,$.addError(E,q)}))}if(await Promise.all(Y),$!=null)throw $;return A};v.populate=async function F(A,B){if(Q1(this,"populate"),typeof B==="function"||typeof arguments[2]==="function")throw new W1("Model.populate() no longer accepts a callback");if(B=y1.populate(B),B.length===0)return A;if(B.find((D)=>D.ordered))for(let D of B)await Bc(this,A,D);else{let D=[];for(let X of B)D.push(Bc(this,A,X));await Promise.all(D)}return A};/*!
 * Populates `docs` for a single `populateOptions` instance.
 */var YU1=/\s?-_id\s?/,$U1=/\s?-_id\s?/g;async function Bc(F,A,B){if(B.strictPopulate==null){if(B._localModel?.schema._userProvidedOptions.strictPopulate!=null)B.strictPopulate=B._localModel.schema._userProvidedOptions.strictPopulate;else if(B._localModel!=null&&F.base.options.strictPopulate!=null)B.strictPopulate=F.base.options.strictPopulate;else if(F.base.options.strictPopulate!=null)B.strictPopulate=F.base.options.strictPopulate}if(!Array.isArray(A))A=[A];if(A.length===0||A.every(y1.isNullOrUndefined))return;let D=hK1(F,A,B);if(D instanceof W1)throw D;let X=D.length,Z=[];function J(E){return E!==void 0}let $=!1,Y=[];for(let E=0;E<X;++E){let G=D[E],C=G.options.select,W=y1.array.flatten(G.ids,J);W=y1.array.unique(W);let H={};if(H.sort=G&&G.options&&G.options.options&&G.options.options.sort||void 0,H.excludeId=YU1.test(C)||C&&C._id===0,G.options&&G.options.options&&G.options.options.lean&&G.options.options.lean.transform)G.options.options._leanTransform=G.options.options.lean.transform,G.options.options.lean=!0;if(W.length===0||W.every(y1.isNullOrUndefined)){Xc(F,[],G,H);continue}if($=!0,typeof B.foreignField==="string")G.foreignField.clear(),G.foreignField.add(B.foreignField);let q=fK1(W,G.match,G.foreignField,G.model,G.options.skipInvalidIds);if(H.excludeId)if(typeof C==="string")C=C.replace($U1," ");else if(Array.isArray(C))C=C.filter((Q)=>Q!=="-_id");else C={...C},delete C._id;if(G.options.options?.limit!=null)H.originalLimit=G.options.options.limit;else if(G.options.limit!=null)H.originalLimit=G.options.limit;Y.push([G,q,C,H])}if(!$){if(D.length!==0)return;if(B.populate!=null){let E=y1.populate(B.populate).map((G)=>Object.assign({},G,{path:B.path+"."+G.path}));return F.populate(A,E)}return}if(B.ordered)for(let E of Y)await Dc.apply(null,E).then((G)=>{Z=Z.concat(G)});else{let E=[];for(let G of Y)E.push(Dc.apply(null,G).then((C)=>{Z=Z.concat(C)}));await Promise.all(E)}for(let E of Y){let G=E[0],C=E[3];for(let W of Z)G.options._childDocs.push(W);Xc(F,Z,G,C)}for(let E of Y)nK1(E[0].foreignField,E[0].options,Z);for(let E of Y){let G=E[0];if(G.options?.options?._leanTransform)for(let C of Z)G.options.options._leanTransform(C)}}/*!
 * ignore
 */function Dc(F,A,B){let D=t3(F.options.populate),X={};if(F.options.skip!==void 0)X.skip=F.options.skip;if(F.options.limit!==void 0)X.limit=F.options.limit;if(F.options.perDocumentLimit!==void 0)X.perDocumentLimit=F.options.perDocumentLimit;if(Object.assign(X,F.options.options),F.count)delete X.skip;if(X.perDocumentLimit!=null)X.limit=X.perDocumentLimit,delete X.perDocumentLimit;else if(X.limit!=null)X.limit=X.limit*F.ids.length;let Z=F.model.find(A,B,X);for(let J of F.foreignField)if(J!=="_id"&&Z.selectedInclusively()&&!cK1(Z._fields,J))Z.select(J);if(F.count)for(let J of F.foreignField)Z.select(J);if(D){if(F.model.baseModelName!=null)if(Array.isArray(D))D.forEach(($)=>{$.strictPopulate=!1});else if(typeof D==="string")D={path:D,strictPopulate:!1};else D.strictPopulate=!1;let J=F.options._fullPath||F.options.path;if(Array.isArray(D))for(let $ of D)$._fullPath=J+"."+$.path;else if(typeof D==="object")D._fullPath=J+"."+D.path;Z.populate(D)}return Z.exec().then((J)=>{for(let $ of J)lK1.set($,F.model);return J})}/*!
 * ignore
 */function Xc(F,A,B,D){let{options:X,isVirtual:Z,justOne:J}=B,$,Y=X&&X.options&&X.options.lean||!1,E=A.length,G={},C={},W,H,q=t3(B.allIds);for(let Q=0;Q<E;Q++){if(H=A[Q],H==null)continue;for(let K of B.foreignField){if($=y1.getValue(K,H),Array.isArray($)){$=y1.array.unique(y1.array.flatten($));for(let U of $){if(U instanceof Q3)U=U._doc._id;if(W=String(U),C[W])if(Array.isArray(C[W]))C[W].push(H),G[W].push(Q);else C[W]=[C[W],H],G[W]=[G[W],Q];else if(Z&&!J)C[W]=[H],G[W]=[Q];else C[W]=H,G[W]=Q}}else{if($ instanceof Q3)$=$._doc._id;if(W=String($),C[W]){if(Array.isArray(C[W]))C[W].push(H),G[W].push(Q);else if(Z||C[W].constructor!==H.constructor||(C[W]instanceof Q3?String(C[W]._doc._id):String(C[W]._id))!==(H instanceof Q3?String(H._doc._id):String(H._id)))C[W]=[C[W],H],G[W]=[G[W],Q]}else C[W]=H,G[W]=Q}if(!Y)H.$__.wasPopulated=H.$__.wasPopulated||{value:$}}}xK1({originalModel:F,rawIds:B.isVirtual?q:B.allIds,allIds:q,unpopulatedValues:B.unpopulatedValues,foreignField:B.foreignField,rawDocs:C,rawOrder:G,docs:B.docs,path:X.path,options:D,justOne:B.justOne,isVirtual:B.isVirtual,allOptions:B,populatedModel:B.model,lean:Y,virtual:B.virtual,count:B.count,match:B.match})}v.compile=function F(A,B,D,X,Z){if(B.options.versionKey!==!1&&!B.paths[B.options.versionKey]){let C={};C[B.options.versionKey]=Number,B.add(C)}let $;if(typeof A==="function"&&A.prototype instanceof v)$=A,A=$.name,B.loadClass($,!1),$.prototype.$isMongooseModelPrototype=!0;else $=function C(W,H,q){if(C.hooks.execPreSync("createModel",W),!(this instanceof C))return new C(W,H,q);let Q=C.schema.options.discriminatorKey;if(C.discriminators==null||W==null||W[Q]==null){v.call(this,W,H,q);return}let K=C.discriminators[W[Q]]||$A(C.discriminators,W[Q]);if(K!=null)return new K(W,H,q);v.call(this,W,H,q)};if($.hooks=B.s.hooks.clone(),$.base=Z,$.modelName=A,!($.prototype instanceof v))Object.setPrototypeOf($,v),Object.setPrototypeOf($.prototype,v.prototype);$.model=function C(W){return this.db.model(W)},$.db=X,$.prototype.db=X,$.prototype[c9]=X,$.discriminators=$.prototype.discriminators=void 0,$[qc]=!0,$.events=new nq,B._preCompile();let E={schemaUserProvidedOptions:B._userProvidedOptions||{},capped:B.options.capped,Promise:$.base.Promise,modelName:A};if(B.options.autoCreate!==void 0)E.autoCreate=B.options.autoCreate;let G=X.collection(D,E);return $.prototype.collection=G,$.prototype.$collection=G,$.prototype[d9]=G,$.prototype.$__setSchema(B),Jc($,B),$c($,B),jK1($,B),uK1($,B.s.hooks,B.statics),$.schema=$.prototype.$__schema,$.collection=G,$.$__collection=G,$.Query=function(){EZ.apply(this,arguments)},Object.setPrototypeOf($.Query.prototype,EZ.prototype),$.Query.base=EZ.base,$.Query.prototype.constructor=EZ,$._applyQueryMiddleware(),EU1($,B.query),$};v.clientEncryption=function F(){let A=this.base.driver.get().ClientEncryption;if(!A)throw new Error("The mongodb driver must be used to obtain a ClientEncryption object.");let B=this.collection?.conn?.client;if(!B)return null;let D=B.options.autoEncryption;if(!D)return null;let{keyVaultNamespace:X,keyVaultClient:Z,kmsProviders:J,credentialProviders:$,proxyOptions:Y,tlsOptions:E}=D;return new A(Z??B,{keyVaultNamespace:X,kmsProviders:J,credentialProviders:$,proxyOptions:Y,tlsOptions:E})};v.$__updateConnection=function F(A){this.db=A,this.prototype.db=A,this.prototype[c9]=A;let B=A.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=B,this.prototype.$collection=B,this.prototype[d9]=B,this.collection=B,this.$__collection=B};function EU1(F,A){for(let B in A)F.Query.prototype[B]=A[B]}v.__subclass=function F(A,B,D){let X=this,Z=function G(C,W,H){if(!(this instanceof G))return new G(C,W,H);X.call(this,C,W,H)};if(Object.setPrototypeOf(Z,X),Object.setPrototypeOf(Z.prototype,X.prototype),Z.db=A,Z.prototype.db=A,Z.prototype[c9]=A,X[EA]=X[EA]||[],X[EA].push(Z),X.discriminators!=null){Z.discriminators={};for(let G of Object.keys(X.discriminators))Z.discriminators[G]=X.discriminators[G].__subclass(X.db,X.discriminators[G].schema,D)}let J=B&&typeof B!=="string"?B:X.prototype.$__schema,$=J.options||{},Y=J._userProvidedOptions||{};if(!D)D=X.prototype.$__schema.get("collection")||y1.toCollectionName(X.modelName,this.base.pluralize());let E={schemaUserProvidedOptions:Y,capped:J&&$.capped};return Z.prototype.collection=A.collection(D,E),Z.prototype.$collection=Z.prototype.collection,Z.prototype[d9]=Z.prototype.collection,Z.collection=Z.prototype.collection,Z.$__collection=Z.collection,Z.init().catch(()=>{}),Z};v.recompileSchema=function F(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let A of this.schema._applyDiscriminators.keys())this.discriminator(A,this.schema._applyDiscriminators.get(A));delete this.schema._defaultToObjectOptionsMap,MK1(this.schema,new WeakSet,!0)};v.inspect=function(){return`Model { ${this.modelName} }`};v.namespace=function F(){return this.db.name+"."+this.collection.collectionName};if(ed.inspect.custom)v[ed.inspect.custom]=v.inspect;/*!
 * Applies query middleware from this model's schema to this model's
 * Query constructor.
 */v._applyQueryMiddleware=function F(){let A=this.Query,B=this.schema.s.hooks.filter((D)=>{let X=GU1(D);if(D.name==="validate")return!!X.query;if(D.name==="deleteOne"||D.name==="updateOne")return!!X.query||y1.hasOwnKeys(X)===!1;if(D.query!=null||D.document!=null)return!!D.query;return!0});A.prototype._queryMiddleware=B};function GU1(F){let A={};if(Object.hasOwn(F,"query"))A.query=F.query;if(Object.hasOwn(F,"document"))A.document=F.document;return A}/*!
 * Module exports.
 */Qc.exports=zc=v});var Uc=z((WA,Kc)=>{Kc.exports=HU1;WA.pluralization=[[/human$/gi,"humans"],[/(m|wom)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|cact|foc|fung|nucle)us$/gi,"$1i"],[/(alias|status|virus)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var CU1=WA.pluralization;WA.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var WU1=WA.uncountables;function HU1(F){let A;if(F=F.toLowerCase(),!~WU1.indexOf(F)){if(A=CU1.filter(function(B){return F.match(B[0])}),A[0])return F.replace(A[0][0],A[0][1])}return F}});var Ic=z((bu1,Pc)=>{/*!
 * Module requirements
 */var wc=K1(),Vc=c("util"),Lc=BC();class b4 extends wc{constructor(){super("");this.errors={}}toString(){return Lc(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(F,A){if(A instanceof b4){let{errors:B}=A;for(let D of Object.keys(B))this.addError(D,B[D]);return}this.errors[F]=A,this.message=Lc(this)}}if(Vc.inspect.custom)b4.prototype[Vc.inspect.custom]=b4.prototype.inspect;Object.defineProperty(b4.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(b4.prototype,"name",{value:"SetOptionError"});class Rc extends wc{constructor(F){super(`"${F}" is not a valid option to set`)}}b4.SetOptionInnerError=Rc;/*!
 * Module exports
 */Pc.exports=b4});var Mc=z(()=>{var Nc=B1();if(typeof jest!=="undefined"&&!process.env.SUPPRESS_JEST_WARNINGS){if(typeof window!=="undefined")Nc.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.");if(typeof setTimeout.clock?.Date==="function")Nc.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning.")}});var fc=z((xc,_c)=>{/*!
 * Module dependencies.
 */var qU1=W3(),zU1=c("events").EventEmitter,Fz=R9(),o3=u9(),QU1=Q0(),HA=SF(),KU1=eD(),qZ=H5(),jc=hh(),UU1=q8(),VU1=sX(),Tc=Sq(),LU1=uH(),wU1=rW(),kc=_X(),RU1=Uc(),zZ=B1(),PU1=tH(),IU1=x9(),NU1=jq(),MU1=e7().trusted,jU1=Uq(),TU1=B2(),_8=K1(),HZ=Ic(),kU1=uq(),uc=Symbol.for("mongoose:default"),Oc=Symbol("mongoose:defaultConnection");Mc();var uU1=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:Sc}=c("async_hooks");function a(F){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new zU1,this.__driver=kc.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},F),(zZ.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null)Az(this);if(this.options.pluralization)this._pluralize=RU1;if(!F?.[uc]){let B=this;this.Schema=function(){return this.base=B,o3.apply(this,arguments)},this.Schema.prototype=Object.create(o3.prototype),Object.assign(this.Schema,o3),this.Schema.base=this,this.Schema.Types=Object.assign({},o3.Types)}else for(let B of["Schema","model"])this[B]=a.prototype[B];if(this.Schema.prototype.base=this,F?.transactionAsyncLocalStorage)this.transactionAsyncLocalStorage=new Sc;Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(wU1).map((B)=>[B,{deduplicate:!0}])})}a.prototype.cast=IU1;a.prototype.STATES=qZ;a.prototype.ConnectionStates=qZ;a.prototype.driver=kc;a.prototype.setDriver=function F(A){let B=this instanceof a?this:L2;if(B.__driver===A)return B;if(B.connections&&B.connections.find((J)=>J.readyState!==qZ.disconnected))throw new _8("Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver");if(B.__driver=A,Array.isArray(A.plugins)){for(let J of A.plugins)if(typeof J==="function")B.plugin(J)}if(A.SchemaTypes!=null)Object.assign(L2.Schema.Types,A.SchemaTypes);let X=A.Connection,Z=B.connections[0];if(B.connections=[new X(B)],B.connections[0].models=B.models,Z==null)return B;for(let J of Object.values(B.models)){if(J.db!==Z)continue;J.$__updateConnection(B.connections[0])}return B};a.prototype.set=function F(A,B){let D=this instanceof a?this:L2;if(arguments.length===1&&typeof A!=="object"){if(jc.indexOf(A)===-1){let J=new HZ;throw J.addError(A,new HZ.SetOptionInnerError(A)),J}return D.options[A]}let X={};if(arguments.length===2)X={[A]:B};if(arguments.length===1&&typeof A==="object")X=A;let Z=void 0;for(let[J,$]of Object.entries(X)){if(jc.indexOf(J)===-1){if(!Z)Z=new HZ;Z.addError(J,new HZ.SetOptionInnerError(J));continue}if(D.options[J]=$,J==="objectIdGetter")if($)Object.defineProperty(D.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});else delete D.Types.ObjectId.prototype._id;else if(J==="transactionAsyncLocalStorage"){if($&&!D.transactionAsyncLocalStorage)D.transactionAsyncLocalStorage=new Sc;else if(!$&&D.transactionAsyncLocalStorage)delete D.transactionAsyncLocalStorage}else if(J==="createInitialConnection"){if($&&!D.connection)Az(D);else if($===!1&&D.connection?.[Oc]){if(D.connection.readyState===qZ.disconnected&&zZ.hasOwnKeys(D.connection.models)===!1)D.connections.shift()}}}if(Z)throw Z;return D};a.prototype.get=a.prototype.set;a.prototype.createConnection=function F(A,B){let D=this instanceof a?this:L2,Z=new D.__driver.Connection(D);if(D.connections.push(Z),D.nextConnectionId++,D.events.emit("createConnection",Z),arguments.length>0)Z.openUri(A,{...B,_fireAndForget:!0});return Z};a.prototype.connect=async function F(A,B){if(typeof B==="function"||arguments.length>=3&&typeof arguments[2]==="function")throw new _8("Mongoose.prototype.connect() no longer accepts a callback");let D=this instanceof a?this:L2;if(D.connection==null)Az(D);return D.connection.openUri(A,B).then(()=>D)};a.prototype.disconnect=async function F(){if(arguments.length>=1&&typeof arguments[0]==="function")throw new _8("Mongoose.prototype.disconnect() no longer accepts a callback");let A=this instanceof a?this:L2;if(A.connections.length<=0)return;await Promise.all(A.connections.map((D)=>D.close()))};a.prototype.startSession=function F(){let A=this instanceof a?this:L2;return A.connection.startSession.apply(A.connection,arguments)};a.prototype.pluralize=function F(A){let B=this instanceof a?this:L2;if(arguments.length>0)B._pluralize=A;return B._pluralize};a.prototype.model=function F(A,B,D,X){let Z=this instanceof a?this:L2;if(typeof B==="string")D=B,B=!1;if(arguments.length===1){let E=Z.models[A];if(!E)throw new Z.Error.MissingSchemaError(A);return E}if(zZ.isObject(B)&&!(B instanceof o3))B=new o3(B);if(B&&!(B instanceof o3))throw new Z.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");X=X||{};let J=B;if(B){if(Z.get("cloneSchemas"))B=B.clone();Z._applyPlugins(B)}let $=Object.hasOwn(Z.options,"overwriteModels")?Z.options.overwriteModels:X.overwriteModels;if(Object.hasOwn(Z.models,A)&&X.cache!==!1&&$!==!0){if(J?.instanceOfSchema&&J!==Z.models[A].schema)throw new Z.Error.OverwriteModelError(A);if(D&&D!==Z.models[A].collection.name){let E=Z.models[A];return B=E.prototype.schema,E.__subclass(Z.connection,B,D)}return Z.models[A]}if(B==null)throw new Z.Error.MissingSchemaError(A);let Y=Z._model(A,B,D,X);return Z.connection.models[A]=Y,Z.models[A]=Y,Y};/*!
 * ignore
 */a.prototype._model=function F(A,B,D,X){let Z=this instanceof a?this:L2,J;if(typeof A==="function"){if(J=A,A=J.name,!(J.prototype instanceof Tc))throw new Z.Error("The provided class "+A+" must extend Model")}if(B){if(Z.get("cloneSchemas"))B=B.clone();Z._applyPlugins(B)}if(B==null||!("pluralization"in B.options))B.options.pluralization=Z.options.pluralization;if(!D)D=B.get("collection")||zZ.toCollectionName(A,Z.pluralize());kU1(B);let $=X.connection||Z.connection;if(J=Z.Model.compile(J||A,B,D,$,Z),J.init().catch(function Y(){}),$.emit("model",J),B._applyDiscriminators!=null)for(let Y of B._applyDiscriminators.keys()){let{schema:E,options:G}=B._applyDiscriminators.get(Y);J.discriminator(Y,E,G)}return J};a.prototype.deleteModel=function F(A){let B=this instanceof a?this:L2;return B.connection.deleteModel(A),delete B.models[A],B};a.prototype.modelNames=function F(){let A=this instanceof a?this:L2;return Object.keys(A.models)};a.prototype._applyPlugins=function F(A,B){let D=this instanceof a?this:L2;B=B||{},B.applyPluginsToDiscriminators=D.options?.applyPluginsToDiscriminators||!1,B.applyPluginsToChildSchemas=typeof D.options?.applyPluginsToChildSchemas==="boolean"?D.options.applyPluginsToChildSchemas:!0,LU1(A,D.plugins,B,"$globalPluginsApplied")};a.prototype.plugin=function F(A,B){let D=this instanceof a?this:L2;return D.plugins.push([A,B]),D};a.prototype.__defineGetter__("connection",function(){return this.connections[0]});a.prototype.__defineSetter__("connection",function(F){if(F instanceof this.__driver.Connection)this.connections[0]=F,this.models=F.models});a.prototype.connections;a.prototype.nextConnectionId;a.prototype.Aggregate=NU1;a.prototype.BaseCollection=FY();Object.defineProperty(a.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(F){this.__driver.Collection=F}});Object.defineProperty(a.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(F){if(F===this.__driver.Connection)return;this.__driver.Connection=F}});a.prototype.BaseConnection=rH();a.prototype.version=PU1.version;a.prototype.Mongoose=a;a.prototype.Schema=o3;a.prototype.SchemaType=QU1;a.prototype.SchemaTypes=o3.Types;a.prototype.VirtualType=KU1;a.prototype.Types=UU1;a.prototype.Query=VU1;a.prototype.Model=Tc;a.prototype.Document=qU1;a.prototype.ObjectId=HA.ObjectId;a.prototype.isValidObjectId=function F(A){return(this instanceof a?this:L2).Types.ObjectId.isValid(A)};a.prototype.isObjectIdOrHexString=function F(A){return TU1(A,"ObjectId")||typeof A==="string"&&uU1.test(A)};a.prototype.syncIndexes=function F(A){return(this instanceof a?this:L2).connection.syncIndexes(A)};a.prototype.Decimal128=HA.Decimal128;a.prototype.Mixed=HA.Mixed;a.prototype.Date=HA.Date;a.prototype.Number=HA.Number;a.prototype.Error=_8;a.prototype.MongooseError=_8;a.prototype.now=function F(){return new Date};a.prototype.CastError=_8.CastError;a.prototype.SchemaTypeOptions=c2();a.prototype.mquery=Qq();a.prototype.sanitizeFilter=jU1;a.prototype.trusted=MU1;a.prototype.skipMiddlewareFunction=Fz.skipWrappedFunction;a.prototype.overwriteMiddlewareResult=Fz.overwriteResult;a.prototype.overwriteMiddlewareArguments=Fz.overwriteArguments;a.prototype.omitUndefined=wW();/*!
 * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
 * No-op if there is already a default connection.
 */function Az(F){if(F.connection)return;let A=F.createConnection();A[Oc]=!0,A.models=F.models}var L2=_c.exports=xc=new a({[uc]:!0})});var yc=z((vu1,bc)=>{/*!
 * Module dependencies.
 */var gc=bh();_X().set(gc);var Bz=fc();Bz.setDriver(gc);Bz.Mongoose.prototype.mongo=Y4();bc.exports=Bz});var hc=z((mu1,J1)=>{var Y1=yc();J1.exports=Y1;J1.exports.default=Y1;J1.exports.mongoose=Y1;J1.exports.cast=Y1.cast;J1.exports.STATES=Y1.STATES;J1.exports.setDriver=Y1.setDriver;J1.exports.set=Y1.set;J1.exports.get=Y1.get;J1.exports.createConnection=Y1.createConnection;J1.exports.connect=Y1.connect;J1.exports.disconnect=Y1.disconnect;J1.exports.startSession=Y1.startSession;J1.exports.pluralize=Y1.pluralize;J1.exports.model=Y1.model;J1.exports.deleteModel=Y1.deleteModel;J1.exports.modelNames=Y1.modelNames;J1.exports.plugin=Y1.plugin;J1.exports.connections=Y1.connections;J1.exports.version=Y1.version;J1.exports.Aggregate=Y1.Aggregate;J1.exports.Mongoose=Y1.Mongoose;J1.exports.Schema=Y1.Schema;J1.exports.SchemaType=Y1.SchemaType;J1.exports.SchemaTypes=Y1.SchemaTypes;J1.exports.VirtualType=Y1.VirtualType;J1.exports.Types=Y1.Types;J1.exports.Query=Y1.Query;J1.exports.Model=Y1.Model;J1.exports.Document=Y1.Document;J1.exports.ObjectId=Y1.ObjectId;J1.exports.isValidObjectId=Y1.isValidObjectId;J1.exports.isObjectIdOrHexString=Y1.isObjectIdOrHexString;J1.exports.syncIndexes=Y1.syncIndexes;J1.exports.Decimal128=Y1.Decimal128;J1.exports.Mixed=Y1.Mixed;J1.exports.Date=Y1.Date;J1.exports.Number=Y1.Number;J1.exports.Error=Y1.Error;J1.exports.MongooseError=Y1.MongooseError;J1.exports.now=Y1.now;J1.exports.CastError=Y1.CastError;J1.exports.SchemaTypeOptions=Y1.SchemaTypeOptions;J1.exports.mongo=Y1.mongo;J1.exports.mquery=Y1.mquery;J1.exports.sanitizeFilter=Y1.sanitizeFilter;J1.exports.trusted=Y1.trusted;J1.exports.skipMiddlewareFunction=Y1.skipMiddlewareFunction;J1.exports.overwriteMiddlewareResult=Y1.overwriteMiddlewareResult});var QZ=(F,A,B)=>{return(D,X)=>{let Z=-1;return J(0);async function J($){if($<=Z)throw new Error("next() called multiple times");Z=$;let Y,E=!1,G;if(F[$])G=F[$][0][0],D.req.routeIndex=$;else G=$===F.length&&X||void 0;if(G)try{Y=await G(D,()=>J($+1))}catch(C){if(C instanceof Error&&A)D.error=C,Y=await A(C,D),E=!0;else throw C}else if(D.finalized===!1&&B)Y=await B(D);if(Y&&(D.finalized===!1||E))D.res=Y;return D}}};var kz=Symbol();var uz=async(F,A=Object.create(null))=>{let{all:B=!1,dot:D=!1}=A,Z=(F instanceof qA?F.raw.headers:F.headers).get("Content-Type");if(Z?.startsWith("multipart/form-data")||Z?.startsWith("application/x-www-form-urlencoded"))return Al(F,{all:B,dot:D});return{}};async function Al(F,A){let B=await F.formData();if(B)return Bl(B,A);return{}}function Bl(F,A){let B=Object.create(null);if(F.forEach((D,X)=>{if(!(A.all||X.endsWith("[]")))B[X]=D;else Dl(B,X,D)}),A.dot)Object.entries(B).forEach(([D,X])=>{if(D.includes("."))Xl(B,D,X),delete B[D]});return B}var Dl=(F,A,B)=>{if(F[A]!==void 0)if(Array.isArray(F[A]))F[A].push(B);else F[A]=[F[A],B];else if(!A.endsWith("[]"))F[A]=B;else F[A]=[B]},Xl=(F,A,B)=>{let D=F,X=A.split(".");X.forEach((Z,J)=>{if(J===X.length-1)D[Z]=B;else{if(!D[Z]||typeof D[Z]!=="object"||Array.isArray(D[Z])||D[Z]instanceof File)D[Z]=Object.create(null);D=D[Z]}})};var UZ=(F)=>{let A=F.split("/");if(A[0]==="")A.shift();return A},Oz=(F)=>{let{groups:A,path:B}=Zl(F),D=UZ(B);return Jl(D,A)},Zl=(F)=>{let A=[];return F=F.replace(/\{[^}]+\}/g,(B,D)=>{let X=`@${D}`;return A.push([X,B]),X}),{groups:A,path:F}},Jl=(F,A)=>{for(let B=A.length-1;B>=0;B--){let[D]=A[B];for(let X=F.length-1;X>=0;X--)if(F[X].includes(D)){F[X]=F[X].replace(D,A[B][1]);break}}return F},zA={},Sz=(F,A)=>{if(F==="*")return"*";let B=F.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(B){let D=`${F}#${A}`;if(!zA[D])if(B[2])zA[D]=A&&A[0]!==":"&&A[0]!=="*"?[D,B[1],new RegExp(`^${B[2]}(?=/${A})`)]:[F,B[1],new RegExp(`^${B[2]}$`)];else zA[D]=[F,B[1],!0];return zA[D]}return null},QA=(F,A)=>{try{return A(F)}catch{return F.replace(/(?:%[0-9A-Fa-f]{2})+/g,(B)=>{try{return A(B)}catch{return B}})}},Yl=(F)=>QA(F,decodeURI),VZ=(F)=>{let A=F.url,B=A.indexOf("/",A.indexOf(":")+4),D=B;for(;D<A.length;D++){let X=A.charCodeAt(D);if(X===37){let Z=A.indexOf("?",D),J=A.slice(B,Z===-1?void 0:Z);return Yl(J.includes("%25")?J.replace(/%25/g,"%2525"):J)}else if(X===63)break}return A.slice(B,D)};var xz=(F)=>{let A=VZ(F);return A.length>1&&A.at(-1)==="/"?A.slice(0,-1):A},v4=(F,A,...B)=>{if(B.length)A=v4(A,...B);return`${F?.[0]==="/"?"":"/"}${F}${A==="/"?"":`${F?.at(-1)==="/"?"":"/"}${A?.[0]==="/"?A.slice(1):A}`}`},KA=(F)=>{if(F.charCodeAt(F.length-1)!==63||!F.includes(":"))return null;let A=F.split("/"),B=[],D="";return A.forEach((X)=>{if(X!==""&&!/\:/.test(X))D+="/"+X;else if(/\:/.test(X))if(/\?/.test(X)){if(B.length===0&&D==="")B.push("/");else B.push(D);let Z=X.replace("?","");D+="/"+Z,B.push(D)}else D+="/"+X}),B.filter((X,Z,J)=>J.indexOf(X)===Z)},KZ=(F)=>{if(!/[%+]/.test(F))return F;if(F.indexOf("+")!==-1)F=F.replace(/\+/g," ");return F.indexOf("%")!==-1?QA(F,LZ):F},_z=(F,A,B)=>{let D;if(!B&&A&&!/[%+]/.test(A)){let J=F.indexOf("?",8);if(J===-1)return;if(!F.startsWith(A,J+1))J=F.indexOf(`&${A}`,J+1);while(J!==-1){let $=F.charCodeAt(J+A.length+1);if($===61){let Y=J+A.length+2,E=F.indexOf("&",Y);return KZ(F.slice(Y,E===-1?void 0:E))}else if($==38||isNaN($))return"";J=F.indexOf(`&${A}`,J+1)}if(D=/[%+]/.test(F),!D)return}let X={};D??=/[%+]/.test(F);let Z=F.indexOf("?",8);while(Z!==-1){let J=F.indexOf("&",Z+1),$=F.indexOf("=",Z);if($>J&&J!==-1)$=-1;let Y=F.slice(Z+1,$===-1?J===-1?void 0:J:$);if(D)Y=KZ(Y);if(Z=J,Y==="")continue;let E;if($===-1)E="";else if(E=F.slice($+1,J===-1?void 0:J),D)E=KZ(E);if(B){if(!(X[Y]&&Array.isArray(X[Y])))X[Y]=[];X[Y].push(E)}else X[Y]??=E}return A?X[A]:X},fz=_z,gz=(F,A)=>{return _z(F,A,!0)},LZ=decodeURIComponent;var bz=(F)=>QA(F,LZ),qA=class{raw;#A;#F;routeIndex=0;path;bodyCache={};constructor(F,A="/",B=[[]]){this.raw=F,this.path=A,this.#F=B,this.#A={}}param(F){return F?this.#B(F):this.#Z()}#B(F){let A=this.#F[0][this.routeIndex][1][F],B=this.#X(A);return B&&/\%/.test(B)?bz(B):B}#Z(){let F={},A=Object.keys(this.#F[0][this.routeIndex][1]);for(let B of A){let D=this.#X(this.#F[0][this.routeIndex][1][B]);if(D!==void 0)F[B]=/\%/.test(D)?bz(D):D}return F}#X(F){return this.#F[1]?this.#F[1][F]:F}query(F){return fz(this.url,F)}queries(F){return gz(this.url,F)}header(F){if(F)return this.raw.headers.get(F)??void 0;let A={};return this.raw.headers.forEach((B,D)=>{A[D]=B}),A}async parseBody(F){return this.bodyCache.parsedBody??=await uz(this,F)}#D=(F)=>{let{bodyCache:A,raw:B}=this,D=A[F];if(D)return D;let X=Object.keys(A)[0];if(X)return A[X].then((Z)=>{if(X==="json")Z=JSON.stringify(Z);return new Response(Z)[F]()});return A[F]=B[F]()};json(){return this.#D("text").then((F)=>JSON.parse(F))}text(){return this.#D("text")}arrayBuffer(){return this.#D("arrayBuffer")}blob(){return this.#D("blob")}formData(){return this.#D("formData")}addValidatedData(F,A){this.#A[F]=A}valid(F){return this.#A[F]}get url(){return this.raw.url}get method(){return this.raw.method}get[kz](){return this.#F}get matchedRoutes(){return this.#F[0].map(([[,F]])=>F)}get routePath(){return this.#F[0].map(([[,F]])=>F)[this.routeIndex].path}};var yz={Stringify:1,BeforeStream:2,Stream:3},$l=(F,A)=>{let B=new String(F);return B.isEscaped=!0,B.callbacks=A,B};var wZ=async(F,A,B,D,X)=>{if(typeof F==="object"&&!(F instanceof String)){if(!(F instanceof Promise))F=F.toString();if(F instanceof Promise)F=await F}let Z=F.callbacks;if(!Z?.length)return Promise.resolve(F);if(X)X[0]+=F;else X=[F];let J=Promise.all(Z.map(($)=>$({phase:A,buffer:X,context:D}))).then(($)=>Promise.all($.filter(Boolean).map((Y)=>wZ(Y,A,!1,D,X))).then(()=>X[0]));if(B)return $l(await J,Z);else return J};var El="text/plain; charset=UTF-8",RZ=(F,A)=>{return{"Content-Type":F,...A}},hz=class{#A;#F;env={};#B;finalized=!1;error;#Z;#X;#D;#G;#$;#E;#Y;#C;#W;constructor(F,A){if(this.#A=F,A)this.#X=A.executionCtx,this.env=A.env,this.#E=A.notFoundHandler,this.#W=A.path,this.#C=A.matchResult}get req(){return this.#F??=new qA(this.#A,this.#W,this.#C),this.#F}get event(){if(this.#X&&"respondWith"in this.#X)return this.#X;else throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#X)return this.#X;else throw Error("This context has no ExecutionContext")}get res(){return this.#D||=new Response(null,{headers:this.#Y??=new Headers})}set res(F){if(this.#D&&F){F=new Response(F.body,F);for(let[A,B]of this.#D.headers.entries()){if(A==="content-type")continue;if(A==="set-cookie"){let D=this.#D.headers.getSetCookie();F.headers.delete("set-cookie");for(let X of D)F.headers.append("set-cookie",X)}else F.headers.set(A,B)}}this.#D=F,this.finalized=!0}render=(...F)=>{return this.#$??=(A)=>this.html(A),this.#$(...F)};setLayout=(F)=>this.#G=F;getLayout=()=>this.#G;setRenderer=(F)=>{this.#$=F};header=(F,A,B)=>{if(this.finalized)this.#D=new Response(this.#D.body,this.#D);let D=this.#D?this.#D.headers:this.#Y??=new Headers;if(A===void 0)D.delete(F);else if(B?.append)D.append(F,A);else D.set(F,A)};status=(F)=>{this.#Z=F};set=(F,A)=>{this.#B??=new Map,this.#B.set(F,A)};get=(F)=>{return this.#B?this.#B.get(F):void 0};get var(){if(!this.#B)return{};return Object.fromEntries(this.#B)}#J(F,A,B){let D=this.#D?new Headers(this.#D.headers):this.#Y??new Headers;if(typeof A==="object"&&"headers"in A){let Z=A.headers instanceof Headers?A.headers:new Headers(A.headers);for(let[J,$]of Z)if(J.toLowerCase()==="set-cookie")D.append(J,$);else D.set(J,$)}if(B)for(let[Z,J]of Object.entries(B))if(typeof J==="string")D.set(Z,J);else{D.delete(Z);for(let $ of J)D.append(Z,$)}let X=typeof A==="number"?A:A?.status??this.#Z;return new Response(F,{status:X,headers:D})}newResponse=(...F)=>this.#J(...F);body=(F,A,B)=>this.#J(F,A,B);text=(F,A,B)=>{return!this.#Y&&!this.#Z&&!A&&!B&&!this.finalized?new Response(F):this.#J(F,A,RZ(El,B))};json=(F,A,B)=>{return this.#J(JSON.stringify(F),A,RZ("application/json",B))};html=(F,A,B)=>{let D=(X)=>this.#J(X,A,RZ("text/html; charset=UTF-8",B));return typeof F==="object"?wZ(F,yz.Stringify,!1,{}).then(D):D(F)};redirect=(F,A)=>{let B=String(F);return this.header("Location",!/[^\x00-\xFF]/.test(B)?B:encodeURI(B)),this.newResponse(null,A??302)};notFound=()=>{return this.#E??=()=>new Response,this.#E(this)}};var l1="ALL",vz="all",mz=["get","post","put","delete","options","patch"],UA="Can not add a route since the matcher is already built.",VA=class extends Error{};var dz="__COMPOSED_HANDLER";var Gl=(F)=>{return F.text("404 Not Found",404)},cz=(F,A)=>{if("getResponse"in F){let B=F.getResponse();return A.newResponse(B.body,B)}return console.error(F),A.text("Internal Server Error",500)},lz=class F{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#A="/";routes=[];constructor(A={}){[...mz,vz].forEach((Z)=>{this[Z]=(J,...$)=>{if(typeof J==="string")this.#A=J;else this.#Z(Z,this.#A,J);return $.forEach((Y)=>{this.#Z(Z,this.#A,Y)}),this}}),this.on=(Z,J,...$)=>{for(let Y of[J].flat()){this.#A=Y;for(let E of[Z].flat())$.map((G)=>{this.#Z(E.toUpperCase(),this.#A,G)})}return this},this.use=(Z,...J)=>{if(typeof Z==="string")this.#A=Z;else this.#A="*",J.unshift(Z);return J.forEach(($)=>{this.#Z(l1,this.#A,$)}),this};let{strict:D,...X}=A;Object.assign(this,X),this.getPath=D??!0?A.getPath??VZ:xz}#F(){let A=new F({router:this.router,getPath:this.getPath});return A.errorHandler=this.errorHandler,A.#B=this.#B,A.routes=this.routes,A}#B=Gl;errorHandler=cz;route(A,B){let D=this.basePath(A);return B.routes.map((X)=>{let Z;if(B.errorHandler===cz)Z=X.handler;else Z=async(J,$)=>(await QZ([],B.errorHandler)(J,()=>X.handler(J,$))).res,Z[dz]=X.handler;D.#Z(X.method,X.path,Z)}),this}basePath(A){let B=this.#F();return B._basePath=v4(this._basePath,A),B}onError=(A)=>{return this.errorHandler=A,this};notFound=(A)=>{return this.#B=A,this};mount(A,B,D){let X,Z;if(D)if(typeof D==="function")Z=D;else if(Z=D.optionHandler,D.replaceRequest===!1)X=(Y)=>Y;else X=D.replaceRequest;let J=Z?(Y)=>{let E=Z(Y);return Array.isArray(E)?E:[E]}:(Y)=>{let E=void 0;try{E=Y.executionCtx}catch{}return[Y.env,E]};X||=(()=>{let Y=v4(this._basePath,A),E=Y==="/"?0:Y.length;return(G)=>{let C=new URL(G.url);return C.pathname=C.pathname.slice(E)||"/",new Request(C,G)}})();let $=async(Y,E)=>{let G=await B(X(Y.req.raw),...J(Y));if(G)return G;await E()};return this.#Z(l1,v4(A,"*"),$),this}#Z(A,B,D){A=A.toUpperCase(),B=v4(this._basePath,B);let X={basePath:this._basePath,path:B,method:A,handler:D};this.router.add(A,B,[D,X]),this.routes.push(X)}#X(A,B){if(A instanceof Error)return this.errorHandler(A,B);throw A}#D(A,B,D,X){if(X==="HEAD")return(async()=>new Response(null,await this.#D(A,B,D,"GET")))();let Z=this.getPath(A,{env:D}),J=this.router.match(X,Z),$=new hz(A,{path:Z,matchResult:J,env:D,executionCtx:B,notFoundHandler:this.#B});if(J[0].length===1){let E;try{E=J[0][0][0][0]($,async()=>{$.res=await this.#B($)})}catch(G){return this.#X(G,$)}return E instanceof Promise?E.then((G)=>G||($.finalized?$.res:this.#B($))).catch((G)=>this.#X(G,$)):E??this.#B($)}let Y=QZ(J[0],this.errorHandler,this.#B);return(async()=>{try{let E=await Y($);if(!E.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return E.res}catch(E){return this.#X(E,$)}})()}fetch=(A,...B)=>{return this.#D(A,B[1],B[0],A.method)};request=(A,B,D,X)=>{if(A instanceof Request)return this.fetch(B?new Request(A,B):A,D,X);return A=A.toString(),this.fetch(new Request(/^https?:\/\//.test(A)?A:`http://localhost${v4("/",A)}`,B),D,X)};fire=()=>{addEventListener("fetch",(A)=>{A.respondWith(this.#D(A.request,A,void 0,A.request.method))})}};var f8=[];function LA(F,A){let B=this.buildAllMatchers(),D=(X,Z)=>{let J=B[X]||B[l1],$=J[2][Z];if($)return $;let Y=Z.match(J[0]);if(!Y)return[[],f8];let E=Y.indexOf("",1);return[J[1][E],Y]};return this.match=D,D(F,A)}var wA="[^/]+",g8=".*",b8="(?:|/.*)",m4=Symbol(),Cl=new Set(".\\+*[^]$()");function Wl(F,A){if(F.length===1)return A.length===1?F<A?-1:1:-1;if(A.length===1)return 1;if(F===g8||F===b8)return 1;else if(A===g8||A===b8)return-1;if(F===wA)return 1;else if(A===wA)return-1;return F.length===A.length?F<A?-1:1:A.length-F.length}var pz=class F{#A;#F;#B=Object.create(null);insert(A,B,D,X,Z){if(A.length===0){if(this.#A!==void 0)throw m4;if(Z)return;this.#A=B;return}let[J,...$]=A,Y=J==="*"?$.length===0?["","",g8]:["","",wA]:J==="/*"?["","",b8]:J.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),E;if(Y){let G=Y[1],C=Y[2]||wA;if(G&&Y[2]){if(C===".*")throw m4;if(C=C.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(C))throw m4}if(E=this.#B[C],!E){if(Object.keys(this.#B).some((W)=>W!==g8&&W!==b8))throw m4;if(Z)return;if(E=this.#B[C]=new F,G!=="")E.#F=X.varIndex++}if(!Z&&G!=="")D.push([G,E.#F])}else if(E=this.#B[J],!E){if(Object.keys(this.#B).some((G)=>G.length>1&&G!==g8&&G!==b8))throw m4;if(Z)return;E=this.#B[J]=new F}E.insert($,B,D,X,Z)}buildRegExpStr(){let B=Object.keys(this.#B).sort(Wl).map((D)=>{let X=this.#B[D];return(typeof X.#F==="number"?`(${D})@${X.#F}`:Cl.has(D)?`\\${D}`:D)+X.buildRegExpStr()});if(typeof this.#A==="number")B.unshift(`#${this.#A}`);if(B.length===0)return"";if(B.length===1)return B[0];return"(?:"+B.join("|")+")"}};var iz=class{#A={varIndex:0};#F=new pz;insert(F,A,B){let D=[],X=[];for(let J=0;;){let $=!1;if(F=F.replace(/\{[^}]+\}/g,(Y)=>{let E=`@\\${J}`;return X[J]=[E,Y],J++,$=!0,E}),!$)break}let Z=F.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let J=X.length-1;J>=0;J--){let[$]=X[J];for(let Y=Z.length-1;Y>=0;Y--)if(Z[Y].indexOf($)!==-1){Z[Y]=Z[Y].replace($,X[J][1]);break}}return this.#F.insert(Z,A,D,this.#A,B),D}buildRegExp(){let F=this.#F.buildRegExpStr();if(F==="")return[/^$/,[],[]];let A=0,B=[],D=[];return F=F.replace(/#(\d+)|@(\d+)|\.\*\$/g,(X,Z,J)=>{if(Z!==void 0)return B[++A]=Number(Z),"$()";if(J!==void 0)return D[Number(J)]=++A,"";return""}),[new RegExp(`^${F}`),B,D]}};var Hl=[/^$/,[],Object.create(null)],nz=Object.create(null);function az(F){return nz[F]??=new RegExp(F==="*"?"":`^${F.replace(/\/\*$|([.\\+*[^\]$()])/g,(A,B)=>B?`\\${B}`:"(?:|/.*)")}$`)}function ql(){nz=Object.create(null)}function zl(F){let A=new iz,B=[];if(F.length===0)return Hl;let D=F.map((E)=>[!/\*|\/:/.test(E[0]),...E]).sort(([E,G],[C,W])=>E?1:C?-1:G.length-W.length),X=Object.create(null);for(let E=0,G=-1,C=D.length;E<C;E++){let[W,H,q]=D[E];if(W)X[H]=[q.map(([K])=>[K,Object.create(null)]),f8];else G++;let Q;try{Q=A.insert(H,G,W)}catch(K){throw K===m4?new VA(H):K}if(W)continue;B[G]=q.map(([K,U])=>{let R=Object.create(null);U-=1;for(;U>=0;U--){let[w,V]=Q[U];R[w]=V}return[K,R]})}let[Z,J,$]=A.buildRegExp();for(let E=0,G=B.length;E<G;E++)for(let C=0,W=B[E].length;C<W;C++){let H=B[E][C]?.[1];if(!H)continue;let q=Object.keys(H);for(let Q=0,K=q.length;Q<K;Q++)H[q[Q]]=$[H[q[Q]]]}let Y=[];for(let E in J)Y[E]=B[J[E]];return[Z,Y,X]}function l9(F,A){if(!F)return;for(let B of Object.keys(F).sort((D,X)=>X.length-D.length))if(az(B).test(A))return[...F[B]];return}var RA=class{name="RegExpRouter";#A;#F;constructor(){this.#A={[l1]:Object.create(null)},this.#F={[l1]:Object.create(null)}}add(F,A,B){let D=this.#A,X=this.#F;if(!D||!X)throw new Error(UA);if(!D[F])[D,X].forEach(($)=>{$[F]=Object.create(null),Object.keys($[l1]).forEach((Y)=>{$[F][Y]=[...$[l1][Y]]})});if(A==="/*")A="*";let Z=(A.match(/\/:/g)||[]).length;if(/\*$/.test(A)){let $=az(A);if(F===l1)Object.keys(D).forEach((Y)=>{D[Y][A]||=l9(D[Y],A)||l9(D[l1],A)||[]});else D[F][A]||=l9(D[F],A)||l9(D[l1],A)||[];Object.keys(D).forEach((Y)=>{if(F===l1||F===Y)Object.keys(D[Y]).forEach((E)=>{$.test(E)&&D[Y][E].push([B,Z])})}),Object.keys(X).forEach((Y)=>{if(F===l1||F===Y)Object.keys(X[Y]).forEach((E)=>$.test(E)&&X[Y][E].push([B,Z]))});return}let J=KA(A)||[A];for(let $=0,Y=J.length;$<Y;$++){let E=J[$];Object.keys(X).forEach((G)=>{if(F===l1||F===G)X[G][E]||=[...l9(D[G],E)||l9(D[l1],E)||[]],X[G][E].push([B,Z-Y+$+1])})}}match=LA;buildAllMatchers(){let F=Object.create(null);return Object.keys(this.#F).concat(Object.keys(this.#A)).forEach((A)=>{F[A]||=this.#B(A)}),this.#A=this.#F=void 0,ql(),F}#B(F){let A=[],B=F===l1;if([this.#A,this.#F].forEach((D)=>{let X=D[F]?Object.keys(D[F]).map((Z)=>[Z,D[F][Z]]):[];if(X.length!==0)B||=!0,A.push(...X);else if(F!==l1)A.push(...Object.keys(D[l1]).map((Z)=>[Z,D[l1][Z]]))}),!B)return null;else return zl(A)}};var Ql=class{name="PreparedRegExpRouter";#A;#F;constructor(F,A){this.#A=F,this.#F=A}#B(F,A){let B=this.#A[F];B[1].forEach((D)=>D&&D.push(A)),Object.values(B[2]).forEach((D)=>D[0].push(A))}#Z(F,A,B,D,X){let Z=this.#A[F];if(!X)Z[2][A][0].push([B,{}]);else D.forEach((J)=>{if(typeof J==="number")Z[1][J].push([B,X]);else Z[2][J||A][0].push([B,X])})}add(F,A,B){if(!this.#A[F]){let X=this.#A[l1],Z={};for(let J in X[2])Z[J]=[X[2][J][0].slice(),f8];this.#A[F]=[X[0],X[1].map((J)=>Array.isArray(J)?J.slice():0),Z]}if(A==="/*"||A==="*"){let X=[B,{}];if(F===l1)for(let Z in this.#A)this.#B(Z,X);else this.#B(F,X);return}let D=this.#F[A];if(!D)throw new Error(`Path ${A} is not registered`);for(let[X,Z]of D)if(F===l1)for(let J in this.#A)this.#Z(J,A,B,X,Z);else this.#Z(F,A,B,X,Z)}buildAllMatchers(){return this.#A}match=LA};var PZ=class{name="SmartRouter";#A=[];#F=[];constructor(F){this.#A=F.routers}add(F,A,B){if(!this.#F)throw new Error(UA);this.#F.push([F,A,B])}match(F,A){if(!this.#F)throw new Error("Fatal error");let B=this.#A,D=this.#F,X=B.length,Z=0,J;for(;Z<X;Z++){let $=B[Z];try{for(let Y=0,E=D.length;Y<E;Y++)$.add(...D[Y]);J=$.match(F,A)}catch(Y){if(Y instanceof VA)continue;throw Y}this.match=$.match.bind($),this.#A=[$],this.#F=void 0;break}if(Z===X)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,J}get activeRouter(){if(this.#F||this.#A.length!==1)throw new Error("No active router has been determined yet.");return this.#A[0]}};var y8=Object.create(null),sz=class F{#A;#F;#B;#Z=0;#X=y8;constructor(A,B,D){if(this.#F=D||Object.create(null),this.#A=[],A&&B){let X=Object.create(null);X[A]={handler:B,possibleKeys:[],score:0},this.#A=[X]}this.#B=[]}insert(A,B,D){this.#Z=++this.#Z;let X=this,Z=Oz(B),J=[];for(let $=0,Y=Z.length;$<Y;$++){let E=Z[$],G=Z[$+1],C=Sz(E,G),W=Array.isArray(C)?C[0]:E;if(W in X.#F){if(X=X.#F[W],C)J.push(C[1]);continue}if(X.#F[W]=new F,C)X.#B.push(C),J.push(C[1]);X=X.#F[W]}return X.#A.push({[A]:{handler:D,possibleKeys:J.filter(($,Y,E)=>E.indexOf($)===Y),score:this.#Z}}),X}#D(A,B,D,X){let Z=[];for(let J=0,$=A.#A.length;J<$;J++){let Y=A.#A[J],E=Y[B]||Y[l1],G={};if(E!==void 0){if(E.params=Object.create(null),Z.push(E),D!==y8||X&&X!==y8)for(let C=0,W=E.possibleKeys.length;C<W;C++){let H=E.possibleKeys[C],q=G[E.score];E.params[H]=X?.[H]&&!q?X[H]:D[H]??X?.[H],G[E.score]=!0}}}return Z}search(A,B){let D=[];this.#X=y8;let Z=[this],J=UZ(B),$=[];for(let Y=0,E=J.length;Y<E;Y++){let G=J[Y],C=Y===E-1,W=[];for(let H=0,q=Z.length;H<q;H++){let Q=Z[H],K=Q.#F[G];if(K)if(K.#X=Q.#X,C){if(K.#F["*"])D.push(...this.#D(K.#F["*"],A,Q.#X));D.push(...this.#D(K,A,Q.#X))}else W.push(K);for(let U=0,R=Q.#B.length;U<R;U++){let w=Q.#B[U],V=Q.#X===y8?{}:{...Q.#X};if(w==="*"){let k=Q.#F["*"];if(k)D.push(...this.#D(k,A,Q.#X)),k.#X=V,W.push(k);continue}let[N,T,I]=w;if(!G&&!(I instanceof RegExp))continue;let u=Q.#F[N],O=J.slice(Y).join("/");if(I instanceof RegExp){let k=I.exec(O);if(k){if(V[T]=k[0],D.push(...this.#D(u,A,Q.#X,V)),Object.keys(u.#F).length){u.#X=V;let m=k[0].match(/\//)?.length??0;($[m]||=[]).push(u)}continue}}if(I===!0||I.test(G))if(V[T]=G,C){if(D.push(...this.#D(u,A,V,Q.#X)),u.#F["*"])D.push(...this.#D(u.#F["*"],A,V,Q.#X))}else u.#X=V,W.push(u)}}Z=W.concat($.shift()??[])}if(D.length>1)D.sort((Y,E)=>{return Y.score-E.score});return[D.map(({handler:Y,params:E})=>[Y,E])]}};var IZ=class{name="TrieRouter";#A;constructor(){this.#A=new sz}add(F,A,B){let D=KA(A);if(D){for(let X=0,Z=D.length;X<Z;X++)this.#A.insert(F,D[X],B);return}this.#A.insert(F,A,B)}match(F,A){return this.#A.search(F,A)}};var NZ=class extends lz{constructor(F={}){super(F);this.router=F.router??new PZ({routers:[new RA,new IZ]})}};import{createServer as Kl}from"http";import{Http2ServerRequest as Ul}from"http2";import{Http2ServerRequest as MZ}from"http2";import{Readable as rz}from"stream";import ul from"crypto";var d4=class extends Error{constructor(F,A){super(F,A);this.name="RequestError"}},Vl=(F)=>{if(F instanceof d4)return F;return new d4(F.message,{cause:F})},Ll=global.Request,h8=class extends Ll{constructor(F,A){if(typeof F==="object"&&n9 in F)F=F[n9]();if(typeof A?.body?.getReader!=="undefined")A.duplex??="half";super(F,A)}},wl=(F)=>{let A=[],B=F.rawHeaders;for(let D=0;D<B.length;D+=2){let{[D]:X,[D+1]:Z}=B;if(X.charCodeAt(0)!==58)A.push([X,Z])}return new Headers(A)},oz=Symbol("wrapBodyStream"),Rl=(F,A,B,D,X)=>{let Z={method:F,headers:B,signal:X.signal};if(F==="TRACE"){Z.method="GET";let J=new h8(A,Z);return Object.defineProperty(J,"method",{get(){return"TRACE"}}),J}if(!(F==="GET"||F==="HEAD"))if("rawBody"in D&&D.rawBody instanceof Buffer)Z.body=new ReadableStream({start(J){J.enqueue(D.rawBody),J.close()}});else if(D[oz]){let J;Z.body=new ReadableStream({async pull($){try{J||=rz.toWeb(D).getReader();let{done:Y,value:E}=await J.read();if(Y)$.close();else $.enqueue(E)}catch(Y){$.error(Y)}}})}else Z.body=rz.toWeb(D);return new h8(A,Z)},n9=Symbol("getRequestCache"),Pl=Symbol("requestCache"),PA=Symbol("incomingKey"),IA=Symbol("urlKey"),Il=Symbol("headersKey"),i9=Symbol("abortControllerKey"),Nl=Symbol("getAbortController"),NA={get method(){return this[PA].method||"GET"},get url(){return this[IA]},get headers(){return this[Il]||=wl(this[PA])},[Nl](){return this[n9](),this[i9]},[n9](){return this[i9]||=new AbortController,this[Pl]||=Rl(this.method,this[IA],this.headers,this[PA],this[i9])}};["body","bodyUsed","cache","credentials","destination","integrity","mode","redirect","referrer","referrerPolicy","signal","keepalive"].forEach((F)=>{Object.defineProperty(NA,F,{get(){return this[n9]()[F]}})});["arrayBuffer","blob","clone","formData","json","text"].forEach((F)=>{Object.defineProperty(NA,F,{value:function(){return this[n9]()[F]()}})});Object.setPrototypeOf(NA,h8.prototype);var Ml=(F,A)=>{let B=Object.create(NA);B[PA]=F;let D=F.url||"";if(D[0]!=="/"&&(D.startsWith("http://")||D.startsWith("https://"))){if(F instanceof MZ)throw new d4("Absolute URL for :path is not allowed in HTTP/2");try{let $=new URL(D);B[IA]=$.href}catch($){throw new d4("Invalid absolute URL",{cause:$})}return B}let X=(F instanceof MZ?F.authority:F.headers.host)||A;if(!X)throw new d4("Missing host header");let Z;if(F instanceof MZ){if(Z=F.scheme,!(Z==="http"||Z==="https"))throw new d4("Unsupported scheme")}else Z=F.socket&&F.socket.encrypted?"https":"http";let J=new URL(`${Z}://${X}${D}`);if(J.hostname.length!==X.length&&J.hostname!==X.replace(/:\d+$/,""))throw new d4("Invalid host header");return B[IA]=J.href,B},tz=Symbol("responseCache"),p9=Symbol("getResponseCache"),c4=Symbol("cache"),TZ=global.Response,v8=class F{#A;#F;[p9](){return delete this[c4],this[tz]||=new TZ(this.#A,this.#F)}constructor(A,B){let D;if(this.#A=A,B instanceof F){let X=B[tz];if(X){this.#F=X,this[p9]();return}else this.#F=B.#F,D=new Headers(B.#F.headers)}else this.#F=B;if(typeof A==="string"||typeof A?.getReader!=="undefined"||A instanceof Blob||A instanceof Uint8Array)D||=B?.headers||{"content-type":"text/plain; charset=UTF-8"},this[c4]=[B?.status||200,A,D]}get headers(){let A=this[c4];if(A){if(!(A[2]instanceof Headers))A[2]=new Headers(A[2]);return A[2]}return this[p9]().headers}get status(){return this[c4]?.[0]??this[p9]().status}get ok(){let A=this.status;return A>=200&&A<300}};["body","bodyUsed","redirected","statusText","trailers","type","url"].forEach((F)=>{Object.defineProperty(v8.prototype,F,{get(){return this[p9]()[F]}})});["arrayBuffer","blob","clone","formData","json","text"].forEach((F)=>{Object.defineProperty(v8.prototype,F,{value:function(){return this[p9]()[F]()}})});Object.setPrototypeOf(v8,TZ);Object.setPrototypeOf(v8.prototype,TZ.prototype);async function jl(F){return Promise.race([F,Promise.resolve().then(()=>Promise.resolve(void 0))])}function ez(F,A,B){let D=($)=>{F.cancel($).catch(()=>{})};return A.on("close",D),A.on("error",D),(B??F.read()).then(J,X),F.closed.finally(()=>{A.off("close",D),A.off("error",D)});function X($){if($)A.destroy($)}function Z(){F.read().then(J,X)}function J({done:$,value:Y}){try{if($)A.end();else if(!A.write(Y))A.once("drain",Z);else return F.read().then(J,X)}catch(E){X(E)}}}function Tl(F,A){if(F.locked)throw new TypeError("ReadableStream is locked.");else if(A.destroyed)return;return ez(F.getReader(),A)}var FQ=(F)=>{let A={};if(!(F instanceof Headers))F=new Headers(F??void 0);let B=[];for(let[D,X]of F)if(D==="set-cookie")B.push(X);else A[D]=X;if(B.length>0)A["set-cookie"]=B;return A["content-type"]??="text/plain; charset=UTF-8",A},kl="x-hono-already-sent",Ol=global.fetch;if(typeof global.crypto==="undefined")global.crypto=ul;global.fetch=(F,A)=>{return A={compress:!1,...A},Ol(F,A)};var kZ=Symbol("outgoingEnded"),Sl=()=>new Response(null,{status:400}),AQ=(F)=>new Response(null,{status:F instanceof Error&&(F.name==="TimeoutError"||F.constructor.name==="TimeoutError")?504:500}),jZ=(F,A)=>{let B=F instanceof Error?F:new Error("unknown error",{cause:F});if(B.code==="ERR_STREAM_PREMATURE_CLOSE")console.info("The user aborted a request.");else{if(console.error(F),!A.headersSent)A.writeHead(500,{"Content-Type":"text/plain"});A.end(`Error: ${B.message}`),A.destroy(B)}},BQ=(F)=>{if("flushHeaders"in F&&F.writable)F.flushHeaders()},DQ=async(F,A)=>{let[B,D,X]=F[c4];if(X instanceof Headers)X=FQ(X);if(typeof D==="string")X["Content-Length"]=Buffer.byteLength(D);else if(D instanceof Uint8Array)X["Content-Length"]=D.byteLength;else if(D instanceof Blob)X["Content-Length"]=D.size;if(A.writeHead(B,X),typeof D==="string"||D instanceof Uint8Array)A.end(D);else if(D instanceof Blob)A.end(new Uint8Array(await D.arrayBuffer()));else BQ(A),await Tl(D,A)?.catch((Z)=>jZ(Z,A));A[kZ]?.()},xl=(F)=>typeof F.then==="function",_l=async(F,A,B={})=>{if(xl(F))if(B.errorHandler)try{F=await F}catch(X){let Z=await B.errorHandler(X);if(!Z)return;F=Z}else F=await F.catch(AQ);if(c4 in F)return DQ(F,A);let D=FQ(F.headers);if(F.body){let X=F.body.getReader(),Z=[],J=!1,$=void 0;if(D["transfer-encoding"]!=="chunked"){let Y=2;for(let E=0;E<Y;E++){$||=X.read();let G=await jl($).catch((C)=>{console.error(C),J=!0});if(!G){if(E===1){await new Promise((C)=>setTimeout(C)),Y=3;continue}break}if($=void 0,G.value)Z.push(G.value);if(G.done){J=!0;break}}if(J&&!("content-length"in D))D["content-length"]=Z.reduce((E,G)=>E+G.length,0)}if(A.writeHead(F.status,D),Z.forEach((Y)=>{A.write(Y)}),J)A.end();else{if(Z.length===0)BQ(A);await ez(X,A,$)}}else if(D[kl]);else A.writeHead(F.status,D),A.end();A[kZ]?.()},fl=(F,A={})=>{let B=A.autoCleanupIncoming??!0;if(A.overrideGlobalObjects!==!1&&global.Request!==h8)Object.defineProperty(global,"Request",{value:h8}),Object.defineProperty(global,"Response",{value:v8});return async(D,X)=>{let Z,J;try{J=Ml(D,A.hostname);let $=!B||D.method==="GET"||D.method==="HEAD";if(!$){if(D[oz]=!0,D.on("end",()=>{$=!0}),D instanceof Ul)X[kZ]=()=>{if(!$)setTimeout(()=>{if(!$)setTimeout(()=>{D.destroy(),X.destroy()})})}}if(X.on("close",()=>{if(J[i9]){if(D.errored)J[i9].abort(D.errored.toString());else if(!X.writableFinished)J[i9].abort("Client connection prematurely closed.")}if(!$)setTimeout(()=>{if(!$)setTimeout(()=>{D.destroy()})})}),Z=F(J,{incoming:D,outgoing:X}),c4 in Z)return DQ(Z,X)}catch($){if(!Z)if(A.errorHandler){if(Z=await A.errorHandler(J?$:Vl($)),!Z)return}else if(!J)Z=Sl();else Z=AQ($);else return jZ($,X)}try{return await _l(Z,X,A)}catch($){return jZ($,X)}}},gl=(F)=>{let A=F.fetch,B=fl(A,{hostname:F.hostname,overrideGlobalObjects:F.overrideGlobalObjects,autoCleanupIncoming:F.autoCleanupIncoming});return(F.createServer||Kl)(F.serverOptions||{},B)},XQ=(F,A)=>{let B=gl(F);return B.listen(F?.port??3000,F.hostname,()=>{let D=B.address();A&&A(D)}),B};var vc=ec(hc(),1),OU1=async(F=!0)=>{try{if(process.env.MONGO_URI!==void 0){let A=await vc.connect(process.env.MONGO_URI,{minPoolSize:0,maxIdleTimeMS:1e4});return null}}catch(A){console.log(A),process.exit(1)}},mc=OU1;mc();var Dz=new NZ;Dz.get("/",(F)=>{return F.text("Hello Hono!")});if(typeof Bun==="undefined")console.log("Server is running on port 5444"),XQ(Dz);var iu1={port:5444,fetch:Dz.fetch};export{iu1 as default};
